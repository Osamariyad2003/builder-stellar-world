var sA=Object.defineProperty;var k0=n=>{throw TypeError(n)};var iA=(n,e,t)=>e in n?sA(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var O0=(n,e,t)=>iA(n,typeof e!="symbol"?e+"":e,t),lg=(n,e,t)=>e.has(n)||k0("Cannot "+t);var ce=(n,e,t)=>(lg(n,e,"read from private field"),t?t.call(n):e.get(n)),_t=(n,e,t)=>e.has(n)?k0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),st=(n,e,t,r)=>(lg(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Fn=(n,e,t)=>(lg(n,e,"access private method"),t);var Ph=(n,e,t,r)=>({set _(i){st(n,e,i,t)},get _(){return ce(n,e,r)}});function oA(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function Mb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var cg={exports:{}},au={},ug={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D0;function aA(){if(D0)return ut;D0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function v($){return $===null||typeof $!="object"?null:($=y&&$[y]||$["@@iterator"],typeof $=="function"?$:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,_={};function w($,X,oe){this.props=$,this.context=X,this.refs=_,this.updater=oe||b}w.prototype.isReactComponent={},w.prototype.setState=function($,X){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,X,"setState")},w.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function P(){}P.prototype=w.prototype;function I($,X,oe){this.props=$,this.context=X,this.refs=_,this.updater=oe||b}var C=I.prototype=new P;C.constructor=I,S(C,w.prototype),C.isPureReactComponent=!0;var M=Array.isArray,z=Object.prototype.hasOwnProperty,B={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function R($,X,oe){var ue,Se={},Ne=null,ge=null;if(X!=null)for(ue in X.ref!==void 0&&(ge=X.ref),X.key!==void 0&&(Ne=""+X.key),X)z.call(X,ue)&&!A.hasOwnProperty(ue)&&(Se[ue]=X[ue]);var we=arguments.length-2;if(we===1)Se.children=oe;else if(1<we){for(var Ie=Array(we),Me=0;Me<we;Me++)Ie[Me]=arguments[Me+2];Se.children=Ie}if($&&$.defaultProps)for(ue in we=$.defaultProps,we)Se[ue]===void 0&&(Se[ue]=we[ue]);return{$$typeof:n,type:$,key:Ne,ref:ge,props:Se,_owner:B.current}}function D($,X){return{$$typeof:n,type:$.type,key:X,ref:$.ref,props:$.props,_owner:$._owner}}function O($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function V($){var X={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(oe){return X[oe]})}var U=/\/+/g;function k($,X){return typeof $=="object"&&$!==null&&$.key!=null?V(""+$.key):X.toString(36)}function G($,X,oe,ue,Se){var Ne=typeof $;(Ne==="undefined"||Ne==="boolean")&&($=null);var ge=!1;if($===null)ge=!0;else switch(Ne){case"string":case"number":ge=!0;break;case"object":switch($.$$typeof){case n:case e:ge=!0}}if(ge)return ge=$,Se=Se(ge),$=ue===""?"."+k(ge,0):ue,M(Se)?(oe="",$!=null&&(oe=$.replace(U,"$&/")+"/"),G(Se,X,oe,"",function(Me){return Me})):Se!=null&&(O(Se)&&(Se=D(Se,oe+(!Se.key||ge&&ge.key===Se.key?"":(""+Se.key).replace(U,"$&/")+"/")+$)),X.push(Se)),1;if(ge=0,ue=ue===""?".":ue+":",M($))for(var we=0;we<$.length;we++){Ne=$[we];var Ie=ue+k(Ne,we);ge+=G(Ne,X,oe,Ie,Se)}else if(Ie=v($),typeof Ie=="function")for($=Ie.call($),we=0;!(Ne=$.next()).done;)Ne=Ne.value,Ie=ue+k(Ne,we++),ge+=G(Ne,X,oe,Ie,Se);else if(Ne==="object")throw X=String($),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return ge}function H($,X,oe){if($==null)return $;var ue=[],Se=0;return G($,ue,"","",function(Ne){return X.call(oe,Ne,Se++)}),ue}function Y($){if($._status===-1){var X=$._result;X=X(),X.then(function(oe){($._status===0||$._status===-1)&&($._status=1,$._result=oe)},function(oe){($._status===0||$._status===-1)&&($._status=2,$._result=oe)}),$._status===-1&&($._status=0,$._result=X)}if($._status===1)return $._result.default;throw $._result}var se={current:null},W={transition:null},ee={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:W,ReactCurrentOwner:B};function ae(){throw Error("act(...) is not supported in production builds of React.")}return ut.Children={map:H,forEach:function($,X,oe){H($,function(){X.apply(this,arguments)},oe)},count:function($){var X=0;return H($,function(){X++}),X},toArray:function($){return H($,function(X){return X})||[]},only:function($){if(!O($))throw Error("React.Children.only expected to receive a single React element child.");return $}},ut.Component=w,ut.Fragment=t,ut.Profiler=i,ut.PureComponent=I,ut.StrictMode=r,ut.Suspense=h,ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,ut.act=ae,ut.cloneElement=function($,X,oe){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var ue=S({},$.props),Se=$.key,Ne=$.ref,ge=$._owner;if(X!=null){if(X.ref!==void 0&&(Ne=X.ref,ge=B.current),X.key!==void 0&&(Se=""+X.key),$.type&&$.type.defaultProps)var we=$.type.defaultProps;for(Ie in X)z.call(X,Ie)&&!A.hasOwnProperty(Ie)&&(ue[Ie]=X[Ie]===void 0&&we!==void 0?we[Ie]:X[Ie])}var Ie=arguments.length-2;if(Ie===1)ue.children=oe;else if(1<Ie){we=Array(Ie);for(var Me=0;Me<Ie;Me++)we[Me]=arguments[Me+2];ue.children=we}return{$$typeof:n,type:$.type,key:Se,ref:Ne,props:ue,_owner:ge}},ut.createContext=function($){return $={$$typeof:c,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:a,_context:$},$.Consumer=$},ut.createElement=R,ut.createFactory=function($){var X=R.bind(null,$);return X.type=$,X},ut.createRef=function(){return{current:null}},ut.forwardRef=function($){return{$$typeof:d,render:$}},ut.isValidElement=O,ut.lazy=function($){return{$$typeof:g,_payload:{_status:-1,_result:$},_init:Y}},ut.memo=function($,X){return{$$typeof:p,type:$,compare:X===void 0?null:X}},ut.startTransition=function($){var X=W.transition;W.transition={};try{$()}finally{W.transition=X}},ut.unstable_act=ae,ut.useCallback=function($,X){return se.current.useCallback($,X)},ut.useContext=function($){return se.current.useContext($)},ut.useDebugValue=function(){},ut.useDeferredValue=function($){return se.current.useDeferredValue($)},ut.useEffect=function($,X){return se.current.useEffect($,X)},ut.useId=function(){return se.current.useId()},ut.useImperativeHandle=function($,X,oe){return se.current.useImperativeHandle($,X,oe)},ut.useInsertionEffect=function($,X){return se.current.useInsertionEffect($,X)},ut.useLayoutEffect=function($,X){return se.current.useLayoutEffect($,X)},ut.useMemo=function($,X){return se.current.useMemo($,X)},ut.useReducer=function($,X,oe){return se.current.useReducer($,X,oe)},ut.useRef=function($){return se.current.useRef($)},ut.useState=function($){return se.current.useState($)},ut.useSyncExternalStore=function($,X,oe){return se.current.useSyncExternalStore($,X,oe)},ut.useTransition=function(){return se.current.useTransition()},ut.version="18.3.1",ut}var L0;function Yy(){return L0||(L0=1,ug.exports=aA()),ug.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0;function lA(){if(M0)return au;M0=1;var n=Yy(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(d,h,p){var g,y={},v=null,b=null;p!==void 0&&(v=""+p),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(b=h.ref);for(g in h)r.call(h,g)&&!a.hasOwnProperty(g)&&(y[g]=h[g]);if(d&&d.defaultProps)for(g in h=d.defaultProps,h)y[g]===void 0&&(y[g]=h[g]);return{$$typeof:e,type:d,key:v,ref:b,props:y,_owner:i.current}}return au.Fragment=t,au.jsx=c,au.jsxs=c,au}var F0;function cA(){return F0||(F0=1,cg.exports=lA()),cg.exports}var l=cA();let ff=!1,uA=[],yu=0;const V0=3,lc=n=>{ff!==n&&(ff=n,console.log(`ðŸ”„ Firebase mode changed: ${n?"OFFLINE":"ONLINE"}`),uA.forEach(e=>e()))},U0=n=>{yu++,console.log(`ðŸš¨ Firebase error ${yu}/${V0}:`,n.message),yu>=V0&&(console.log("ðŸ”„ Too many Firebase errors - switching to global offline mode"),lc(!0))};if(!window.fetch.__firebasePatched){const n=window.fetch,e=(...t)=>{var a;const r=typeof t[0]=="string"?t[0]:(a=t[0])==null?void 0:a.url;if(!(!!r&&(r.includes("firestore.googleapis.com")||r.includes("firebase.googleapis.com")||r.includes("identitytoolkit.googleapis.com"))))try{return n(...t)}catch(c){return Promise.reject(c)}if(ff){const c=new Error("Firebase offline mode - request blocked");return c.isFirebaseOfflineError=!0,Promise.reject(c)}try{const c=n(...t);return Promise.resolve(c).then(d=>(d.ok&&(yu=0,ff&&(console.log("ðŸŸ¢ Firebase connection restored"),lc(!1))),d)).catch(d=>{console.log("ðŸ”´ Firebase request failed:",(d==null?void 0:d.message)||String(d));const h=String(d&&(d.stack||"")||""),p=String((d==null?void 0:d.message)||d||"").toLowerCase();throw!(h.includes("chrome-extension://")||h.includes("extension://")||p.includes("extension"))&&navigator.onLine&&U0(d),d})}catch(c){console.log("ðŸ”´ Firebase request threw synchronously:",(c==null?void 0:c.message)||String(c));const d=String(c&&(c.stack||"")||""),h=String((c==null?void 0:c.message)||c||"").toLowerCase();return!(d.includes("chrome-extension://")||d.includes("extension://")||h.includes("extension"))&&navigator.onLine&&U0(c),Promise.reject(c)}};e.__firebasePatched=!0,window.fetch=e}console.log("ðŸ”„ Initializing Firebase monitoring...");navigator.onLine||(console.log("ðŸš« No internet connection - starting in offline mode"),lc(!0));window.addEventListener("online",()=>{console.log("ðŸŸ¢ Internet connection restored"),yu=0,lc(!1)});window.addEventListener("offline",()=>{console.log("ðŸ”´ Internet connection lost"),lc(!0)});console.log("ðŸ”„ Starting Firebase monitoring in ONLINE mode");window.addEventListener("unhandledrejection",n=>{var r;const e=String(((r=n==null?void 0:n.reason)==null?void 0:r.message)||(n==null?void 0:n.reason)||""),t=String((n==null?void 0:n.reason)&&(n.reason.stack||"")||"");if((e.includes("Failed to fetch")||e.toLowerCase().includes("extension"))&&(t.includes("chrome-extension://")||t.includes("extension://")||t.includes("fullstory.com"))){n.preventDefault();return}if(t.includes("chrome-extension://")||t.includes("extension://")){n.preventDefault();return}});const dA=console.error,hA=console.warn,fA=console.log;console.error=(...n)=>{const e=n.map(i=>i&&typeof i=="object"?String(i):i).join(" "),t=n.some(i=>i&&typeof i=="object"&&i.stack&&i.stack.includes("chrome-extension://"));["Firebase offline mode - request blocked","FirebaseError: [code=unavailable]","Could not reach Cloud Firestore backend","Connection failed","The operation could not be completed","device does not have a healthy Internet connection","client will operate in offline mode","Most recent error: FirebaseError","@firebase/firestore: Firestore","fullstory.com","TypeError: Failed to fetch"].some(i=>e.includes(i))||t||e.includes("chrome-extension://")||e.includes("extension://")||dA.apply(console,n)};console.warn=(...n)=>{const e=n.join(" ");e.includes("Firebase")&&e.includes("offline")||hA.apply(console,n)};console.log=(...n)=>{const e=n.join(" ");e.includes("@firebase/firestore")&&e.includes("offline")||fA.apply(console,n)};setTimeout(()=>{navigator.onLine?console.log("ðŸŒ Internet available - Firebase enabled and ready"):(console.log("ðŸš« No internet connection detected - switching to offline mode"),lc(!0))},100);var E=Yy();const Ee=Mb(E),Fb=oA({__proto__:null,default:Ee},[E]),pA=1,mA=1e6;let dg=0;function gA(){return dg=(dg+1)%Number.MAX_SAFE_INTEGER,dg.toString()}const hg=new Map,z0=n=>{if(hg.has(n))return;const e=setTimeout(()=>{hg.delete(n),vu({type:"REMOVE_TOAST",toastId:n})},mA);hg.set(n,e)},yA=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,pA)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?z0(t):n.toasts.forEach(r=>{z0(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Yh=[];let Xh={toasts:[]};function vu(n){Xh=yA(Xh,n),Yh.forEach(e=>{e(Xh)})}function vA({...n}){const e=gA(),t=i=>vu({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>vu({type:"DISMISS_TOAST",toastId:e});return vu({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function xA(){const[n,e]=E.useState(Xh);return E.useEffect(()=>(Yh.push(e),()=>{const t=Yh.indexOf(e);t>-1&&Yh.splice(t,1)}),[n]),{...n,toast:vA,dismiss:t=>vu({type:"DISMISS_TOAST",toastId:t})}}var fg={exports:{}},lr={},pg={exports:{}},mg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $0;function wA(){return $0||($0=1,function(n){function e(W,ee){var ae=W.length;W.push(ee);e:for(;0<ae;){var $=ae-1>>>1,X=W[$];if(0<i(X,ee))W[$]=ee,W[ae]=X,ae=$;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var ee=W[0],ae=W.pop();if(ae!==ee){W[0]=ae;e:for(var $=0,X=W.length,oe=X>>>1;$<oe;){var ue=2*($+1)-1,Se=W[ue],Ne=ue+1,ge=W[Ne];if(0>i(Se,ae))Ne<X&&0>i(ge,Se)?(W[$]=ge,W[Ne]=ae,$=Ne):(W[$]=Se,W[ue]=ae,$=ue);else if(Ne<X&&0>i(ge,ae))W[$]=ge,W[Ne]=ae,$=Ne;else break e}}return ee}function i(W,ee){var ae=W.sortIndex-ee.sortIndex;return ae!==0?ae:W.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var h=[],p=[],g=1,y=null,v=3,b=!1,S=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(W){for(var ee=t(p);ee!==null;){if(ee.callback===null)r(p);else if(ee.startTime<=W)r(p),ee.sortIndex=ee.expirationTime,e(h,ee);else break;ee=t(p)}}function M(W){if(_=!1,C(W),!S)if(t(h)!==null)S=!0,Y(z);else{var ee=t(p);ee!==null&&se(M,ee.startTime-W)}}function z(W,ee){S=!1,_&&(_=!1,P(R),R=-1),b=!0;var ae=v;try{for(C(ee),y=t(h);y!==null&&(!(y.expirationTime>ee)||W&&!V());){var $=y.callback;if(typeof $=="function"){y.callback=null,v=y.priorityLevel;var X=$(y.expirationTime<=ee);ee=n.unstable_now(),typeof X=="function"?y.callback=X:y===t(h)&&r(h),C(ee)}else r(h);y=t(h)}if(y!==null)var oe=!0;else{var ue=t(p);ue!==null&&se(M,ue.startTime-ee),oe=!1}return oe}finally{y=null,v=ae,b=!1}}var B=!1,A=null,R=-1,D=5,O=-1;function V(){return!(n.unstable_now()-O<D)}function U(){if(A!==null){var W=n.unstable_now();O=W;var ee=!0;try{ee=A(!0,W)}finally{ee?k():(B=!1,A=null)}}else B=!1}var k;if(typeof I=="function")k=function(){I(U)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,H=G.port2;G.port1.onmessage=U,k=function(){H.postMessage(null)}}else k=function(){w(U,0)};function Y(W){A=W,B||(B=!0,k())}function se(W,ee){R=w(function(){W(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){S||b||(S=!0,Y(z))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(W){switch(v){case 1:case 2:case 3:var ee=3;break;default:ee=v}var ae=v;v=ee;try{return W()}finally{v=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,ee){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ae=v;v=W;try{return ee()}finally{v=ae}},n.unstable_scheduleCallback=function(W,ee,ae){var $=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?$+ae:$):ae=$,W){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=ae+X,W={id:g++,callback:ee,priorityLevel:W,startTime:ae,expirationTime:X,sortIndex:-1},ae>$?(W.sortIndex=ae,e(p,W),t(h)===null&&W===t(p)&&(_?(P(R),R=-1):_=!0,se(M,ae-$))):(W.sortIndex=X,e(h,W),S||b||(S=!0,Y(z))),W},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(W){var ee=v;return function(){var ae=v;v=ee;try{return W.apply(this,arguments)}finally{v=ae}}}}(mg)),mg}var B0;function _A(){return B0||(B0=1,pg.exports=wA()),pg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q0;function EA(){if(q0)return lr;q0=1;var n=Yy(),e=_A();function t(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(s,o){c(s,o),c(s+"Capture",o)}function c(s,o){for(i[s]=o,s=0;s<o.length;s++)r.add(o[s])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function v(s){return h.call(y,s)?!0:h.call(g,s)?!1:p.test(s)?y[s]=!0:(g[s]=!0,!1)}function b(s,o,u,m){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return m?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function S(s,o,u,m){if(o===null||typeof o>"u"||b(s,o,u,m))return!0;if(m)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function _(s,o,u,m,x,T,L){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=m,this.attributeNamespace=x,this.mustUseProperty=u,this.propertyName=s,this.type=o,this.sanitizeURL=T,this.removeEmptyString=L}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){w[s]=new _(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];w[o]=new _(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){w[s]=new _(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){w[s]=new _(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){w[s]=new _(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){w[s]=new _(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){w[s]=new _(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){w[s]=new _(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){w[s]=new _(s,5,!1,s.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function I(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(P,I);w[o]=new _(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(P,I);w[o]=new _(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(P,I);w[o]=new _(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){w[s]=new _(s,1,!1,s.toLowerCase(),null,!1,!1)}),w.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){w[s]=new _(s,1,!1,s.toLowerCase(),null,!0,!0)});function C(s,o,u,m){var x=w.hasOwnProperty(o)?w[o]:null;(x!==null?x.type!==0:m||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(S(o,u,x,m)&&(u=null),m||x===null?v(o)&&(u===null?s.removeAttribute(o):s.setAttribute(o,""+u)):x.mustUseProperty?s[x.propertyName]=u===null?x.type===3?!1:"":u:(o=x.attributeName,m=x.attributeNamespace,u===null?s.removeAttribute(o):(x=x.type,u=x===3||x===4&&u===!0?"":""+u,m?s.setAttributeNS(m,o,u):s.setAttribute(o,u))))}var M=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),B=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),V=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),W=Symbol.iterator;function ee(s){return s===null||typeof s!="object"?null:(s=W&&s[W]||s["@@iterator"],typeof s=="function"?s:null)}var ae=Object.assign,$;function X(s){if($===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);$=o&&o[1]||""}return`
`+$+s}var oe=!1;function ue(s,o){if(!s||oe)return"";oe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(re){var m=re}Reflect.construct(s,[],o)}else{try{o.call()}catch(re){m=re}s.call(o.prototype)}else{try{throw Error()}catch(re){m=re}s()}}catch(re){if(re&&m&&typeof re.stack=="string"){for(var x=re.stack.split(`
`),T=m.stack.split(`
`),L=x.length-1,q=T.length-1;1<=L&&0<=q&&x[L]!==T[q];)q--;for(;1<=L&&0<=q;L--,q--)if(x[L]!==T[q]){if(L!==1||q!==1)do if(L--,q--,0>q||x[L]!==T[q]){var K=`
`+x[L].replace(" at new "," at ");return s.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",s.displayName)),K}while(1<=L&&0<=q);break}}}finally{oe=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?X(s):""}function Se(s){switch(s.tag){case 5:return X(s.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return s=ue(s.type,!1),s;case 11:return s=ue(s.type.render,!1),s;case 1:return s=ue(s.type,!0),s;default:return""}}function Ne(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case A:return"Fragment";case B:return"Portal";case D:return"Profiler";case R:return"StrictMode";case k:return"Suspense";case G:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case V:return(s.displayName||"Context")+".Consumer";case O:return(s._context.displayName||"Context")+".Provider";case U:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case H:return o=s.displayName||null,o!==null?o:Ne(s.type)||"Memo";case Y:o=s._payload,s=s._init;try{return Ne(s(o))}catch{}}return null}function ge(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(o);case 8:return o===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function we(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ie(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Me(s){var o=Ie(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),m=""+s[o];if(!s.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var x=u.get,T=u.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return x.call(this)},set:function(L){m=""+L,T.call(this,L)}}),Object.defineProperty(s,o,{enumerable:u.enumerable}),{getValue:function(){return m},setValue:function(L){m=""+L},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Xe(s){s._valueTracker||(s._valueTracker=Me(s))}function nt(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),m="";return s&&(m=Ie(s)?s.checked?"true":"false":s.value),s=m,s!==u?(o.setValue(s),!0):!1}function bt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function kt(s,o){var u=o.checked;return ae({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function Ot(s,o){var u=o.defaultValue==null?"":o.defaultValue,m=o.checked!=null?o.checked:o.defaultChecked;u=we(o.value!=null?o.value:u),s._wrapperState={initialChecked:m,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function lt(s,o){o=o.checked,o!=null&&C(s,"checked",o,!1)}function Jt(s,o){lt(s,o);var u=we(o.value),m=o.type;if(u!=null)m==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(m==="submit"||m==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?Ve(s,o.type,u):o.hasOwnProperty("defaultValue")&&Ve(s,o.type,we(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function be(s,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var m=o.type;if(!(m!=="submit"&&m!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,u||o===s.value||(s.value=o),s.defaultValue=o}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function Ve(s,o,u){(o!=="number"||bt(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var Te=Array.isArray;function He(s,o,u,m){if(s=s.options,o){o={};for(var x=0;x<u.length;x++)o["$"+u[x]]=!0;for(u=0;u<s.length;u++)x=o.hasOwnProperty("$"+s[u].value),s[u].selected!==x&&(s[u].selected=x),x&&m&&(s[u].defaultSelected=!0)}else{for(u=""+we(u),o=null,x=0;x<s.length;x++){if(s[x].value===u){s[x].selected=!0,m&&(s[x].defaultSelected=!0);return}o!==null||s[x].disabled||(o=s[x])}o!==null&&(o.selected=!0)}}function he(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function pt(s,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Te(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}s._wrapperState={initialValue:we(u)}}function ke(s,o){var u=we(o.value),m=we(o.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),o.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),m!=null&&(s.defaultValue=""+m)}function jt(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function It(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function St(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?It(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Wn,Hn=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,m,x){MSApp.execUnsafeLocalFunction(function(){return s(o,u,m,x)})}:s}(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(Wn=Wn||document.createElement("div"),Wn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Wn.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function Zn(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var Tr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hr=["Webkit","ms","Moz","O"];Object.keys(Tr).forEach(function(s){hr.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),Tr[o]=Tr[s]})});function Ur(s,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||Tr.hasOwnProperty(s)&&Tr[s]?(""+o).trim():o+"px"}function qt(s,o){s=s.style;for(var u in o)if(o.hasOwnProperty(u)){var m=u.indexOf("--")===0,x=Ur(u,o[u],m);u==="float"&&(u="cssFloat"),m?s.setProperty(u,x):s[u]=x}}var Ks=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function er(s,o){if(o){if(Ks[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Vo(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ke=null;function xt(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var yt=null,Wt=null,tn=null;function zr(s){if(s=Hc(s)){if(typeof yt!="function")throw Error(t(280));var o=s.stateNode;o&&(o=Hd(o),yt(s.stateNode,s.type,o))}}function Cr(s){Wt?tn?tn.push(s):tn=[s]:Wt=s}function bc(){if(Wt){var s=Wt,o=tn;if(tn=Wt=null,zr(s),o)for(s=0;s<o.length;s++)zr(o[s])}}function Uo(s,o){return s(o)}function Sc(){}var Gs=!1;function Nc(s,o,u){if(Gs)return s(o,u);Gs=!0;try{return Uo(s,o,u)}finally{Gs=!1,(Wt!==null||tn!==null)&&(Sc(),bc())}}function nn(s,o){var u=s.stateNode;if(u===null)return null;var m=Hd(u);if(m===null)return null;u=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var za=!1;if(d)try{var $r={};Object.defineProperty($r,"passive",{get:function(){za=!0}}),window.addEventListener("test",$r,$r),window.removeEventListener("test",$r,$r)}catch{za=!1}function zo(s,o,u,m,x,T,L,q,K){var re=Array.prototype.slice.call(arguments,3);try{o.apply(u,re)}catch(pe){this.onError(pe)}}var $o=!1,$a=null,Br=!1,Tc=null,Lp={onError:function(s){$o=!0,$a=s}};function Ba(s,o,u,m,x,T,L,q,K){$o=!1,$a=null,zo.apply(Lp,arguments)}function yd(s,o,u,m,x,T,L,q,K){if(Ba.apply(this,arguments),$o){if($o){var re=$a;$o=!1,$a=null}else throw Error(t(198));Br||(Br=!0,Tc=re)}}function qr(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function Bo(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function Wr(s){if(qr(s)!==s)throw Error(t(188))}function vd(s){var o=s.alternate;if(!o){if(o=qr(s),o===null)throw Error(t(188));return o!==s?null:s}for(var u=s,m=o;;){var x=u.return;if(x===null)break;var T=x.alternate;if(T===null){if(m=x.return,m!==null){u=m;continue}break}if(x.child===T.child){for(T=x.child;T;){if(T===u)return Wr(x),s;if(T===m)return Wr(x),o;T=T.sibling}throw Error(t(188))}if(u.return!==m.return)u=x,m=T;else{for(var L=!1,q=x.child;q;){if(q===u){L=!0,u=x,m=T;break}if(q===m){L=!0,m=x,u=T;break}q=q.sibling}if(!L){for(q=T.child;q;){if(q===u){L=!0,u=T,m=x;break}if(q===m){L=!0,m=T,u=x;break}q=q.sibling}if(!L)throw Error(t(189))}}if(u.alternate!==m)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:o}function Cc(s){return s=vd(s),s!==null?qa(s):null}function qa(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=qa(s);if(o!==null)return o;s=s.sibling}return null}var Wa=e.unstable_scheduleCallback,Ic=e.unstable_cancelCallback,xd=e.unstable_shouldYield,Mp=e.unstable_requestPaint,Dt=e.unstable_now,wd=e.unstable_getCurrentPriorityLevel,qo=e.unstable_ImmediatePriority,Ni=e.unstable_UserBlockingPriority,Ir=e.unstable_NormalPriority,jc=e.unstable_LowPriority,_d=e.unstable_IdlePriority,Wo=null,fr=null;function Ed(s){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(Wo,s,void 0,(s.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:Sd,Ac=Math.log,bd=Math.LN2;function Sd(s){return s>>>=0,s===0?32:31-(Ac(s)/bd|0)|0}var Ha=64,Ka=4194304;function Ti(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Ho(s,o){var u=s.pendingLanes;if(u===0)return 0;var m=0,x=s.suspendedLanes,T=s.pingedLanes,L=u&268435455;if(L!==0){var q=L&~x;q!==0?m=Ti(q):(T&=L,T!==0&&(m=Ti(T)))}else L=u&~x,L!==0?m=Ti(L):T!==0&&(m=Ti(T));if(m===0)return 0;if(o!==0&&o!==m&&(o&x)===0&&(x=m&-m,T=o&-o,x>=T||x===16&&(T&4194240)!==0))return o;if((m&4)!==0&&(m|=u&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=m;0<o;)u=31-Kn(o),x=1<<u,m|=s[u],o&=~x;return m}function Fp(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qs(s,o){for(var u=s.suspendedLanes,m=s.pingedLanes,x=s.expirationTimes,T=s.pendingLanes;0<T;){var L=31-Kn(T),q=1<<L,K=x[L];K===-1?((q&u)===0||(q&m)!==0)&&(x[L]=Fp(q,o)):K<=o&&(s.expiredLanes|=q),T&=~q}}function pr(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Ko(){var s=Ha;return Ha<<=1,(Ha&4194240)===0&&(Ha=64),s}function Ci(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function Ii(s,o,u){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-Kn(o),s[o]=u}function At(s,o){var u=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var m=s.eventTimes;for(s=s.expirationTimes;0<u;){var x=31-Kn(u),T=1<<x;o[x]=0,m[x]=-1,s[x]=-1,u&=~T}}function ji(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var m=31-Kn(u),x=1<<m;x&o|s[m]&o&&(s[m]|=o),u&=~x}}var ft=0;function Ai(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Nd,Ga,Td,Cd,Id,Pc=!1,ps=[],Tn=null,Hr=null,Kr=null,Pi=new Map,jr=new Map,ms=[],Vp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jd(s,o){switch(s){case"focusin":case"focusout":Tn=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":Pi.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":jr.delete(o.pointerId)}}function tr(s,o,u,m,x,T){return s===null||s.nativeEvent!==T?(s={blockedOn:o,domEventName:u,eventSystemFlags:m,nativeEvent:T,targetContainers:[x]},o!==null&&(o=Hc(o),o!==null&&Ga(o)),s):(s.eventSystemFlags|=m,o=s.targetContainers,x!==null&&o.indexOf(x)===-1&&o.push(x),s)}function Up(s,o,u,m,x){switch(o){case"focusin":return Tn=tr(Tn,s,o,u,m,x),!0;case"dragenter":return Hr=tr(Hr,s,o,u,m,x),!0;case"mouseover":return Kr=tr(Kr,s,o,u,m,x),!0;case"pointerover":var T=x.pointerId;return Pi.set(T,tr(Pi.get(T)||null,s,o,u,m,x)),!0;case"gotpointercapture":return T=x.pointerId,jr.set(T,tr(jr.get(T)||null,s,o,u,m,x)),!0}return!1}function Ad(s){var o=Jo(s.target);if(o!==null){var u=qr(o);if(u!==null){if(o=u.tag,o===13){if(o=Bo(u),o!==null){s.blockedOn=o,Id(s.priority,function(){Td(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ys(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=Qa(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var m=new u.constructor(u.type,u);Ke=m,u.target.dispatchEvent(m),Ke=null}else return o=Hc(u),o!==null&&Ga(o),s.blockedOn=u,!1;o.shift()}return!0}function Go(s,o,u){Ys(s)&&u.delete(o)}function Pd(){Pc=!1,Tn!==null&&Ys(Tn)&&(Tn=null),Hr!==null&&Ys(Hr)&&(Hr=null),Kr!==null&&Ys(Kr)&&(Kr=null),Pi.forEach(Go),jr.forEach(Go)}function Gr(s,o){s.blockedOn===o&&(s.blockedOn=null,Pc||(Pc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Pd)))}function Qr(s){function o(x){return Gr(x,s)}if(0<ps.length){Gr(ps[0],s);for(var u=1;u<ps.length;u++){var m=ps[u];m.blockedOn===s&&(m.blockedOn=null)}}for(Tn!==null&&Gr(Tn,s),Hr!==null&&Gr(Hr,s),Kr!==null&&Gr(Kr,s),Pi.forEach(o),jr.forEach(o),u=0;u<ms.length;u++)m=ms[u],m.blockedOn===s&&(m.blockedOn=null);for(;0<ms.length&&(u=ms[0],u.blockedOn===null);)Ad(u),u.blockedOn===null&&ms.shift()}var Xs=M.ReactCurrentBatchConfig,Ri=!0;function $t(s,o,u,m){var x=ft,T=Xs.transition;Xs.transition=null;try{ft=1,Rc(s,o,u,m)}finally{ft=x,Xs.transition=T}}function zp(s,o,u,m){var x=ft,T=Xs.transition;Xs.transition=null;try{ft=4,Rc(s,o,u,m)}finally{ft=x,Xs.transition=T}}function Rc(s,o,u,m){if(Ri){var x=Qa(s,o,u,m);if(x===null)Jp(s,o,m,Qo,u),jd(s,m);else if(Up(x,s,o,u,m))m.stopPropagation();else if(jd(s,m),o&4&&-1<Vp.indexOf(s)){for(;x!==null;){var T=Hc(x);if(T!==null&&Nd(T),T=Qa(s,o,u,m),T===null&&Jp(s,o,m,Qo,u),T===x)break;x=T}x!==null&&m.stopPropagation()}else Jp(s,o,m,null,u)}}var Qo=null;function Qa(s,o,u,m){if(Qo=null,s=xt(m),s=Jo(s),s!==null)if(o=qr(s),o===null)s=null;else if(u=o.tag,u===13){if(s=Bo(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return Qo=s,null}function kc(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wd()){case qo:return 1;case Ni:return 4;case Ir:case jc:return 16;case _d:return 536870912;default:return 16}default:return 16}}var mr=null,Ya=null,nr=null;function Oc(){if(nr)return nr;var s,o=Ya,u=o.length,m,x="value"in mr?mr.value:mr.textContent,T=x.length;for(s=0;s<u&&o[s]===x[s];s++);var L=u-s;for(m=1;m<=L&&o[u-m]===x[T-m];m++);return nr=x.slice(s,1<m?1-m:void 0)}function Xa(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function gs(){return!0}function Dc(){return!1}function Cn(s){function o(u,m,x,T,L){this._reactName=u,this._targetInst=x,this.type=m,this.nativeEvent=T,this.target=L,this.currentTarget=null;for(var q in s)s.hasOwnProperty(q)&&(u=s[q],this[q]=u?u(T):T[q]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?gs:Dc,this.isPropagationStopped=Dc,this}return ae(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=gs)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=gs)},persist:function(){},isPersistent:gs}),o}var Yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ja=Cn(Yr),ys=ae({},Yr,{view:0,detail:0}),$p=Cn(ys),Za,Js,ki,Yo=ae({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ki&&(ki&&s.type==="mousemove"?(Za=s.screenX-ki.screenX,Js=s.screenY-ki.screenY):Js=Za=0,ki=s),Za)},movementY:function(s){return"movementY"in s?s.movementY:Js}}),el=Cn(Yo),Lc=ae({},Yo,{dataTransfer:0}),Rd=Cn(Lc),tl=ae({},ys,{relatedTarget:0}),nl=Cn(tl),kd=ae({},Yr,{animationName:0,elapsedTime:0,pseudoElement:0}),Zs=Cn(kd),Od=ae({},Yr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Dd=Cn(Od),Ld=ae({},Yr,{data:0}),Mc=Cn(Ld),rl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Md={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fd(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Md[s])?!!o[s]:!1}function vs(){return Fd}var f=ae({},ys,{key:function(s){if(s.key){var o=rl[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Xa(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Gn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vs,charCode:function(s){return s.type==="keypress"?Xa(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Xa(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),N=Cn(f),j=ae({},Yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),F=Cn(j),J=ae({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vs}),ie=Cn(J),_e=ae({},Yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nt=Cn(_e),mn=ae({},Yo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),mt=Cn(mn),wn=[9,13,27,32],ln=d&&"CompositionEvent"in window,Ar=null;d&&"documentMode"in document&&(Ar=document.documentMode);var gr=d&&"TextEvent"in window&&!Ar,Xo=d&&(!ln||Ar&&8<Ar&&11>=Ar),sl=" ",Cx=!1;function Ix(s,o){switch(s){case"keyup":return wn.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jx(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var il=!1;function tj(s,o){switch(s){case"compositionend":return jx(o);case"keypress":return o.which!==32?null:(Cx=!0,sl);case"textInput":return s=o.data,s===sl&&Cx?null:s;default:return null}}function nj(s,o){if(il)return s==="compositionend"||!ln&&Ix(s,o)?(s=Oc(),nr=Ya=mr=null,il=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Xo&&o.locale!=="ko"?null:o.data;default:return null}}var rj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ax(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!rj[s.type]:o==="textarea"}function Px(s,o,u,m){Cr(m),o=Bd(o,"onChange"),0<o.length&&(u=new Ja("onChange","change",null,u,m),s.push({event:u,listeners:o}))}var Fc=null,Vc=null;function sj(s){Qx(s,0)}function Vd(s){var o=ul(s);if(nt(o))return s}function ij(s,o){if(s==="change")return o}var Rx=!1;if(d){var Bp;if(d){var qp="oninput"in document;if(!qp){var kx=document.createElement("div");kx.setAttribute("oninput","return;"),qp=typeof kx.oninput=="function"}Bp=qp}else Bp=!1;Rx=Bp&&(!document.documentMode||9<document.documentMode)}function Ox(){Fc&&(Fc.detachEvent("onpropertychange",Dx),Vc=Fc=null)}function Dx(s){if(s.propertyName==="value"&&Vd(Vc)){var o=[];Px(o,Vc,s,xt(s)),Nc(sj,o)}}function oj(s,o,u){s==="focusin"?(Ox(),Fc=o,Vc=u,Fc.attachEvent("onpropertychange",Dx)):s==="focusout"&&Ox()}function aj(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Vd(Vc)}function lj(s,o){if(s==="click")return Vd(o)}function cj(s,o){if(s==="input"||s==="change")return Vd(o)}function uj(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Xr=typeof Object.is=="function"?Object.is:uj;function Uc(s,o){if(Xr(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),m=Object.keys(o);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var x=u[m];if(!h.call(o,x)||!Xr(s[x],o[x]))return!1}return!0}function Lx(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Mx(s,o){var u=Lx(s);s=0;for(var m;u;){if(u.nodeType===3){if(m=s+u.textContent.length,s<=o&&m>=o)return{node:u,offset:o-s};s=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Lx(u)}}function Fx(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Fx(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Vx(){for(var s=window,o=bt();o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=bt(s.document)}return o}function Wp(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function dj(s){var o=Vx(),u=s.focusedElem,m=s.selectionRange;if(o!==u&&u&&u.ownerDocument&&Fx(u.ownerDocument.documentElement,u)){if(m!==null&&Wp(u)){if(o=m.start,s=m.end,s===void 0&&(s=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(s,u.value.length);else if(s=(o=u.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var x=u.textContent.length,T=Math.min(m.start,x);m=m.end===void 0?T:Math.min(m.end,x),!s.extend&&T>m&&(x=m,m=T,T=x),x=Mx(u,T);var L=Mx(u,m);x&&L&&(s.rangeCount!==1||s.anchorNode!==x.node||s.anchorOffset!==x.offset||s.focusNode!==L.node||s.focusOffset!==L.offset)&&(o=o.createRange(),o.setStart(x.node,x.offset),s.removeAllRanges(),T>m?(s.addRange(o),s.extend(L.node,L.offset)):(o.setEnd(L.node,L.offset),s.addRange(o)))}}for(o=[],s=u;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)s=o[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var hj=d&&"documentMode"in document&&11>=document.documentMode,ol=null,Hp=null,zc=null,Kp=!1;function Ux(s,o,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Kp||ol==null||ol!==bt(m)||(m=ol,"selectionStart"in m&&Wp(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),zc&&Uc(zc,m)||(zc=m,m=Bd(Hp,"onSelect"),0<m.length&&(o=new Ja("onSelect","select",null,o,u),s.push({event:o,listeners:m}),o.target=ol)))}function Ud(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var al={animationend:Ud("Animation","AnimationEnd"),animationiteration:Ud("Animation","AnimationIteration"),animationstart:Ud("Animation","AnimationStart"),transitionend:Ud("Transition","TransitionEnd")},Gp={},zx={};d&&(zx=document.createElement("div").style,"AnimationEvent"in window||(delete al.animationend.animation,delete al.animationiteration.animation,delete al.animationstart.animation),"TransitionEvent"in window||delete al.transitionend.transition);function zd(s){if(Gp[s])return Gp[s];if(!al[s])return s;var o=al[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in zx)return Gp[s]=o[u];return s}var $x=zd("animationend"),Bx=zd("animationiteration"),qx=zd("animationstart"),Wx=zd("transitionend"),Hx=new Map,Kx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oi(s,o){Hx.set(s,o),a(o,[s])}for(var Qp=0;Qp<Kx.length;Qp++){var Yp=Kx[Qp],fj=Yp.toLowerCase(),pj=Yp[0].toUpperCase()+Yp.slice(1);Oi(fj,"on"+pj)}Oi($x,"onAnimationEnd"),Oi(Bx,"onAnimationIteration"),Oi(qx,"onAnimationStart"),Oi("dblclick","onDoubleClick"),Oi("focusin","onFocus"),Oi("focusout","onBlur"),Oi(Wx,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mj=new Set("cancel close invalid load scroll toggle".split(" ").concat($c));function Gx(s,o,u){var m=s.type||"unknown-event";s.currentTarget=u,yd(m,o,void 0,s),s.currentTarget=null}function Qx(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var m=s[u],x=m.event;m=m.listeners;e:{var T=void 0;if(o)for(var L=m.length-1;0<=L;L--){var q=m[L],K=q.instance,re=q.currentTarget;if(q=q.listener,K!==T&&x.isPropagationStopped())break e;Gx(x,q,re),T=K}else for(L=0;L<m.length;L++){if(q=m[L],K=q.instance,re=q.currentTarget,q=q.listener,K!==T&&x.isPropagationStopped())break e;Gx(x,q,re),T=K}}}if(Br)throw s=Tc,Br=!1,Tc=null,s}function Mt(s,o){var u=o[sm];u===void 0&&(u=o[sm]=new Set);var m=s+"__bubble";u.has(m)||(Yx(o,s,2,!1),u.add(m))}function Xp(s,o,u){var m=0;o&&(m|=4),Yx(u,s,m,o)}var $d="_reactListening"+Math.random().toString(36).slice(2);function Bc(s){if(!s[$d]){s[$d]=!0,r.forEach(function(u){u!=="selectionchange"&&(mj.has(u)||Xp(u,!1,s),Xp(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[$d]||(o[$d]=!0,Xp("selectionchange",!1,o))}}function Yx(s,o,u,m){switch(kc(o)){case 1:var x=$t;break;case 4:x=zp;break;default:x=Rc}u=x.bind(null,o,u,s),x=void 0,!za||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(x=!0),m?x!==void 0?s.addEventListener(o,u,{capture:!0,passive:x}):s.addEventListener(o,u,!0):x!==void 0?s.addEventListener(o,u,{passive:x}):s.addEventListener(o,u,!1)}function Jp(s,o,u,m,x){var T=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var L=m.tag;if(L===3||L===4){var q=m.stateNode.containerInfo;if(q===x||q.nodeType===8&&q.parentNode===x)break;if(L===4)for(L=m.return;L!==null;){var K=L.tag;if((K===3||K===4)&&(K=L.stateNode.containerInfo,K===x||K.nodeType===8&&K.parentNode===x))return;L=L.return}for(;q!==null;){if(L=Jo(q),L===null)return;if(K=L.tag,K===5||K===6){m=T=L;continue e}q=q.parentNode}}m=m.return}Nc(function(){var re=T,pe=xt(u),me=[];e:{var fe=Hx.get(s);if(fe!==void 0){var je=Ja,Oe=s;switch(s){case"keypress":if(Xa(u)===0)break e;case"keydown":case"keyup":je=N;break;case"focusin":Oe="focus",je=nl;break;case"focusout":Oe="blur",je=nl;break;case"beforeblur":case"afterblur":je=nl;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=el;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=Rd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=ie;break;case $x:case Bx:case qx:je=Zs;break;case Wx:je=Nt;break;case"scroll":je=$p;break;case"wheel":je=mt;break;case"copy":case"cut":case"paste":je=Dd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=F}var Le=(o&4)!==0,rn=!Le&&s==="scroll",Z=Le?fe!==null?fe+"Capture":null:fe;Le=[];for(var Q=re,te;Q!==null;){te=Q;var ye=te.stateNode;if(te.tag===5&&ye!==null&&(te=ye,Z!==null&&(ye=nn(Q,Z),ye!=null&&Le.push(qc(Q,ye,te)))),rn)break;Q=Q.return}0<Le.length&&(fe=new je(fe,Oe,null,u,pe),me.push({event:fe,listeners:Le}))}}if((o&7)===0){e:{if(fe=s==="mouseover"||s==="pointerover",je=s==="mouseout"||s==="pointerout",fe&&u!==Ke&&(Oe=u.relatedTarget||u.fromElement)&&(Jo(Oe)||Oe[ei]))break e;if((je||fe)&&(fe=pe.window===pe?pe:(fe=pe.ownerDocument)?fe.defaultView||fe.parentWindow:window,je?(Oe=u.relatedTarget||u.toElement,je=re,Oe=Oe?Jo(Oe):null,Oe!==null&&(rn=qr(Oe),Oe!==rn||Oe.tag!==5&&Oe.tag!==6)&&(Oe=null)):(je=null,Oe=re),je!==Oe)){if(Le=el,ye="onMouseLeave",Z="onMouseEnter",Q="mouse",(s==="pointerout"||s==="pointerover")&&(Le=F,ye="onPointerLeave",Z="onPointerEnter",Q="pointer"),rn=je==null?fe:ul(je),te=Oe==null?fe:ul(Oe),fe=new Le(ye,Q+"leave",je,u,pe),fe.target=rn,fe.relatedTarget=te,ye=null,Jo(pe)===re&&(Le=new Le(Z,Q+"enter",Oe,u,pe),Le.target=te,Le.relatedTarget=rn,ye=Le),rn=ye,je&&Oe)t:{for(Le=je,Z=Oe,Q=0,te=Le;te;te=ll(te))Q++;for(te=0,ye=Z;ye;ye=ll(ye))te++;for(;0<Q-te;)Le=ll(Le),Q--;for(;0<te-Q;)Z=ll(Z),te--;for(;Q--;){if(Le===Z||Z!==null&&Le===Z.alternate)break t;Le=ll(Le),Z=ll(Z)}Le=null}else Le=null;je!==null&&Xx(me,fe,je,Le,!1),Oe!==null&&rn!==null&&Xx(me,rn,Oe,Le,!0)}}e:{if(fe=re?ul(re):window,je=fe.nodeName&&fe.nodeName.toLowerCase(),je==="select"||je==="input"&&fe.type==="file")var Fe=ij;else if(Ax(fe))if(Rx)Fe=cj;else{Fe=aj;var ze=oj}else(je=fe.nodeName)&&je.toLowerCase()==="input"&&(fe.type==="checkbox"||fe.type==="radio")&&(Fe=lj);if(Fe&&(Fe=Fe(s,re))){Px(me,Fe,u,pe);break e}ze&&ze(s,fe,re),s==="focusout"&&(ze=fe._wrapperState)&&ze.controlled&&fe.type==="number"&&Ve(fe,"number",fe.value)}switch(ze=re?ul(re):window,s){case"focusin":(Ax(ze)||ze.contentEditable==="true")&&(ol=ze,Hp=re,zc=null);break;case"focusout":zc=Hp=ol=null;break;case"mousedown":Kp=!0;break;case"contextmenu":case"mouseup":case"dragend":Kp=!1,Ux(me,u,pe);break;case"selectionchange":if(hj)break;case"keydown":case"keyup":Ux(me,u,pe)}var $e;if(ln)e:{switch(s){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else il?Ix(s,u)&&(Je="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Je="onCompositionStart");Je&&(Xo&&u.locale!=="ko"&&(il||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&il&&($e=Oc()):(mr=pe,Ya="value"in mr?mr.value:mr.textContent,il=!0)),ze=Bd(re,Je),0<ze.length&&(Je=new Mc(Je,s,null,u,pe),me.push({event:Je,listeners:ze}),$e?Je.data=$e:($e=jx(u),$e!==null&&(Je.data=$e)))),($e=gr?tj(s,u):nj(s,u))&&(re=Bd(re,"onBeforeInput"),0<re.length&&(pe=new Mc("onBeforeInput","beforeinput",null,u,pe),me.push({event:pe,listeners:re}),pe.data=$e))}Qx(me,o)})}function qc(s,o,u){return{instance:s,listener:o,currentTarget:u}}function Bd(s,o){for(var u=o+"Capture",m=[];s!==null;){var x=s,T=x.stateNode;x.tag===5&&T!==null&&(x=T,T=nn(s,u),T!=null&&m.unshift(qc(s,T,x)),T=nn(s,o),T!=null&&m.push(qc(s,T,x))),s=s.return}return m}function ll(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Xx(s,o,u,m,x){for(var T=o._reactName,L=[];u!==null&&u!==m;){var q=u,K=q.alternate,re=q.stateNode;if(K!==null&&K===m)break;q.tag===5&&re!==null&&(q=re,x?(K=nn(u,T),K!=null&&L.unshift(qc(u,K,q))):x||(K=nn(u,T),K!=null&&L.push(qc(u,K,q)))),u=u.return}L.length!==0&&s.push({event:o,listeners:L})}var gj=/\r\n?/g,yj=/\u0000|\uFFFD/g;function Jx(s){return(typeof s=="string"?s:""+s).replace(gj,`
`).replace(yj,"")}function qd(s,o,u){if(o=Jx(o),Jx(s)!==o&&u)throw Error(t(425))}function Wd(){}var Zp=null,em=null;function tm(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var nm=typeof setTimeout=="function"?setTimeout:void 0,vj=typeof clearTimeout=="function"?clearTimeout:void 0,Zx=typeof Promise=="function"?Promise:void 0,xj=typeof queueMicrotask=="function"?queueMicrotask:typeof Zx<"u"?function(s){return Zx.resolve(null).then(s).catch(wj)}:nm;function wj(s){setTimeout(function(){throw s})}function rm(s,o){var u=o,m=0;do{var x=u.nextSibling;if(s.removeChild(u),x&&x.nodeType===8)if(u=x.data,u==="/$"){if(m===0){s.removeChild(x),Qr(o);return}m--}else u!=="$"&&u!=="$?"&&u!=="$!"||m++;u=x}while(u);Qr(o)}function Di(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function ew(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return s;o--}else u==="/$"&&o++}s=s.previousSibling}return null}var cl=Math.random().toString(36).slice(2),xs="__reactFiber$"+cl,Wc="__reactProps$"+cl,ei="__reactContainer$"+cl,sm="__reactEvents$"+cl,_j="__reactListeners$"+cl,Ej="__reactHandles$"+cl;function Jo(s){var o=s[xs];if(o)return o;for(var u=s.parentNode;u;){if(o=u[ei]||u[xs]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=ew(s);s!==null;){if(u=s[xs])return u;s=ew(s)}return o}s=u,u=s.parentNode}return null}function Hc(s){return s=s[xs]||s[ei],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function ul(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Hd(s){return s[Wc]||null}var im=[],dl=-1;function Li(s){return{current:s}}function Ft(s){0>dl||(s.current=im[dl],im[dl]=null,dl--)}function Lt(s,o){dl++,im[dl]=s.current,s.current=o}var Mi={},On=Li(Mi),rr=Li(!1),Zo=Mi;function hl(s,o){var u=s.type.contextTypes;if(!u)return Mi;var m=s.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===o)return m.__reactInternalMemoizedMaskedChildContext;var x={},T;for(T in u)x[T]=o[T];return m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=x),x}function sr(s){return s=s.childContextTypes,s!=null}function Kd(){Ft(rr),Ft(On)}function tw(s,o,u){if(On.current!==Mi)throw Error(t(168));Lt(On,o),Lt(rr,u)}function nw(s,o,u){var m=s.stateNode;if(o=o.childContextTypes,typeof m.getChildContext!="function")return u;m=m.getChildContext();for(var x in m)if(!(x in o))throw Error(t(108,ge(s)||"Unknown",x));return ae({},u,m)}function Gd(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Mi,Zo=On.current,Lt(On,s),Lt(rr,rr.current),!0}function rw(s,o,u){var m=s.stateNode;if(!m)throw Error(t(169));u?(s=nw(s,o,Zo),m.__reactInternalMemoizedMergedChildContext=s,Ft(rr),Ft(On),Lt(On,s)):Ft(rr),Lt(rr,u)}var ti=null,Qd=!1,om=!1;function sw(s){ti===null?ti=[s]:ti.push(s)}function bj(s){Qd=!0,sw(s)}function Fi(){if(!om&&ti!==null){om=!0;var s=0,o=ft;try{var u=ti;for(ft=1;s<u.length;s++){var m=u[s];do m=m(!0);while(m!==null)}ti=null,Qd=!1}catch(x){throw ti!==null&&(ti=ti.slice(s+1)),Wa(qo,Fi),x}finally{ft=o,om=!1}}return null}var fl=[],pl=0,Yd=null,Xd=0,Pr=[],Rr=0,ea=null,ni=1,ri="";function ta(s,o){fl[pl++]=Xd,fl[pl++]=Yd,Yd=s,Xd=o}function iw(s,o,u){Pr[Rr++]=ni,Pr[Rr++]=ri,Pr[Rr++]=ea,ea=s;var m=ni;s=ri;var x=32-Kn(m)-1;m&=~(1<<x),u+=1;var T=32-Kn(o)+x;if(30<T){var L=x-x%5;T=(m&(1<<L)-1).toString(32),m>>=L,x-=L,ni=1<<32-Kn(o)+x|u<<x|m,ri=T+s}else ni=1<<T|u<<x|m,ri=s}function am(s){s.return!==null&&(ta(s,1),iw(s,1,0))}function lm(s){for(;s===Yd;)Yd=fl[--pl],fl[pl]=null,Xd=fl[--pl],fl[pl]=null;for(;s===ea;)ea=Pr[--Rr],Pr[Rr]=null,ri=Pr[--Rr],Pr[Rr]=null,ni=Pr[--Rr],Pr[Rr]=null}var yr=null,vr=null,Bt=!1,Jr=null;function ow(s,o){var u=Lr(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=s,o=s.deletions,o===null?(s.deletions=[u],s.flags|=16):o.push(u)}function aw(s,o){switch(s.tag){case 5:var u=s.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,yr=s,vr=Di(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,yr=s,vr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=ea!==null?{id:ni,overflow:ri}:null,s.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Lr(18,null,null,0),u.stateNode=o,u.return=s,s.child=u,yr=s,vr=null,!0):!1;default:return!1}}function cm(s){return(s.mode&1)!==0&&(s.flags&128)===0}function um(s){if(Bt){var o=vr;if(o){var u=o;if(!aw(s,o)){if(cm(s))throw Error(t(418));o=Di(u.nextSibling);var m=yr;o&&aw(s,o)?ow(m,u):(s.flags=s.flags&-4097|2,Bt=!1,yr=s)}}else{if(cm(s))throw Error(t(418));s.flags=s.flags&-4097|2,Bt=!1,yr=s}}}function lw(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;yr=s}function Jd(s){if(s!==yr)return!1;if(!Bt)return lw(s),Bt=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!tm(s.type,s.memoizedProps)),o&&(o=vr)){if(cm(s))throw cw(),Error(t(418));for(;o;)ow(s,o),o=Di(o.nextSibling)}if(lw(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(o===0){vr=Di(s.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}s=s.nextSibling}vr=null}}else vr=yr?Di(s.stateNode.nextSibling):null;return!0}function cw(){for(var s=vr;s;)s=Di(s.nextSibling)}function ml(){vr=yr=null,Bt=!1}function dm(s){Jr===null?Jr=[s]:Jr.push(s)}var Sj=M.ReactCurrentBatchConfig;function Kc(s,o,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var m=u.stateNode}if(!m)throw Error(t(147,s));var x=m,T=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===T?o.ref:(o=function(L){var q=x.refs;L===null?delete q[T]:q[T]=L},o._stringRef=T,o)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function Zd(s,o){throw s=Object.prototype.toString.call(o),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function uw(s){var o=s._init;return o(s._payload)}function dw(s){function o(Z,Q){if(s){var te=Z.deletions;te===null?(Z.deletions=[Q],Z.flags|=16):te.push(Q)}}function u(Z,Q){if(!s)return null;for(;Q!==null;)o(Z,Q),Q=Q.sibling;return null}function m(Z,Q){for(Z=new Map;Q!==null;)Q.key!==null?Z.set(Q.key,Q):Z.set(Q.index,Q),Q=Q.sibling;return Z}function x(Z,Q){return Z=Hi(Z,Q),Z.index=0,Z.sibling=null,Z}function T(Z,Q,te){return Z.index=te,s?(te=Z.alternate,te!==null?(te=te.index,te<Q?(Z.flags|=2,Q):te):(Z.flags|=2,Q)):(Z.flags|=1048576,Q)}function L(Z){return s&&Z.alternate===null&&(Z.flags|=2),Z}function q(Z,Q,te,ye){return Q===null||Q.tag!==6?(Q=ng(te,Z.mode,ye),Q.return=Z,Q):(Q=x(Q,te),Q.return=Z,Q)}function K(Z,Q,te,ye){var Fe=te.type;return Fe===A?pe(Z,Q,te.props.children,ye,te.key):Q!==null&&(Q.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===Y&&uw(Fe)===Q.type)?(ye=x(Q,te.props),ye.ref=Kc(Z,Q,te),ye.return=Z,ye):(ye=bh(te.type,te.key,te.props,null,Z.mode,ye),ye.ref=Kc(Z,Q,te),ye.return=Z,ye)}function re(Z,Q,te,ye){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==te.containerInfo||Q.stateNode.implementation!==te.implementation?(Q=rg(te,Z.mode,ye),Q.return=Z,Q):(Q=x(Q,te.children||[]),Q.return=Z,Q)}function pe(Z,Q,te,ye,Fe){return Q===null||Q.tag!==7?(Q=ca(te,Z.mode,ye,Fe),Q.return=Z,Q):(Q=x(Q,te),Q.return=Z,Q)}function me(Z,Q,te){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=ng(""+Q,Z.mode,te),Q.return=Z,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case z:return te=bh(Q.type,Q.key,Q.props,null,Z.mode,te),te.ref=Kc(Z,null,Q),te.return=Z,te;case B:return Q=rg(Q,Z.mode,te),Q.return=Z,Q;case Y:var ye=Q._init;return me(Z,ye(Q._payload),te)}if(Te(Q)||ee(Q))return Q=ca(Q,Z.mode,te,null),Q.return=Z,Q;Zd(Z,Q)}return null}function fe(Z,Q,te,ye){var Fe=Q!==null?Q.key:null;if(typeof te=="string"&&te!==""||typeof te=="number")return Fe!==null?null:q(Z,Q,""+te,ye);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case z:return te.key===Fe?K(Z,Q,te,ye):null;case B:return te.key===Fe?re(Z,Q,te,ye):null;case Y:return Fe=te._init,fe(Z,Q,Fe(te._payload),ye)}if(Te(te)||ee(te))return Fe!==null?null:pe(Z,Q,te,ye,null);Zd(Z,te)}return null}function je(Z,Q,te,ye,Fe){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return Z=Z.get(te)||null,q(Q,Z,""+ye,Fe);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case z:return Z=Z.get(ye.key===null?te:ye.key)||null,K(Q,Z,ye,Fe);case B:return Z=Z.get(ye.key===null?te:ye.key)||null,re(Q,Z,ye,Fe);case Y:var ze=ye._init;return je(Z,Q,te,ze(ye._payload),Fe)}if(Te(ye)||ee(ye))return Z=Z.get(te)||null,pe(Q,Z,ye,Fe,null);Zd(Q,ye)}return null}function Oe(Z,Q,te,ye){for(var Fe=null,ze=null,$e=Q,Je=Q=0,bn=null;$e!==null&&Je<te.length;Je++){$e.index>Je?(bn=$e,$e=null):bn=$e.sibling;var wt=fe(Z,$e,te[Je],ye);if(wt===null){$e===null&&($e=bn);break}s&&$e&&wt.alternate===null&&o(Z,$e),Q=T(wt,Q,Je),ze===null?Fe=wt:ze.sibling=wt,ze=wt,$e=bn}if(Je===te.length)return u(Z,$e),Bt&&ta(Z,Je),Fe;if($e===null){for(;Je<te.length;Je++)$e=me(Z,te[Je],ye),$e!==null&&(Q=T($e,Q,Je),ze===null?Fe=$e:ze.sibling=$e,ze=$e);return Bt&&ta(Z,Je),Fe}for($e=m(Z,$e);Je<te.length;Je++)bn=je($e,Z,Je,te[Je],ye),bn!==null&&(s&&bn.alternate!==null&&$e.delete(bn.key===null?Je:bn.key),Q=T(bn,Q,Je),ze===null?Fe=bn:ze.sibling=bn,ze=bn);return s&&$e.forEach(function(Ki){return o(Z,Ki)}),Bt&&ta(Z,Je),Fe}function Le(Z,Q,te,ye){var Fe=ee(te);if(typeof Fe!="function")throw Error(t(150));if(te=Fe.call(te),te==null)throw Error(t(151));for(var ze=Fe=null,$e=Q,Je=Q=0,bn=null,wt=te.next();$e!==null&&!wt.done;Je++,wt=te.next()){$e.index>Je?(bn=$e,$e=null):bn=$e.sibling;var Ki=fe(Z,$e,wt.value,ye);if(Ki===null){$e===null&&($e=bn);break}s&&$e&&Ki.alternate===null&&o(Z,$e),Q=T(Ki,Q,Je),ze===null?Fe=Ki:ze.sibling=Ki,ze=Ki,$e=bn}if(wt.done)return u(Z,$e),Bt&&ta(Z,Je),Fe;if($e===null){for(;!wt.done;Je++,wt=te.next())wt=me(Z,wt.value,ye),wt!==null&&(Q=T(wt,Q,Je),ze===null?Fe=wt:ze.sibling=wt,ze=wt);return Bt&&ta(Z,Je),Fe}for($e=m(Z,$e);!wt.done;Je++,wt=te.next())wt=je($e,Z,Je,wt.value,ye),wt!==null&&(s&&wt.alternate!==null&&$e.delete(wt.key===null?Je:wt.key),Q=T(wt,Q,Je),ze===null?Fe=wt:ze.sibling=wt,ze=wt);return s&&$e.forEach(function(rA){return o(Z,rA)}),Bt&&ta(Z,Je),Fe}function rn(Z,Q,te,ye){if(typeof te=="object"&&te!==null&&te.type===A&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case z:e:{for(var Fe=te.key,ze=Q;ze!==null;){if(ze.key===Fe){if(Fe=te.type,Fe===A){if(ze.tag===7){u(Z,ze.sibling),Q=x(ze,te.props.children),Q.return=Z,Z=Q;break e}}else if(ze.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===Y&&uw(Fe)===ze.type){u(Z,ze.sibling),Q=x(ze,te.props),Q.ref=Kc(Z,ze,te),Q.return=Z,Z=Q;break e}u(Z,ze);break}else o(Z,ze);ze=ze.sibling}te.type===A?(Q=ca(te.props.children,Z.mode,ye,te.key),Q.return=Z,Z=Q):(ye=bh(te.type,te.key,te.props,null,Z.mode,ye),ye.ref=Kc(Z,Q,te),ye.return=Z,Z=ye)}return L(Z);case B:e:{for(ze=te.key;Q!==null;){if(Q.key===ze)if(Q.tag===4&&Q.stateNode.containerInfo===te.containerInfo&&Q.stateNode.implementation===te.implementation){u(Z,Q.sibling),Q=x(Q,te.children||[]),Q.return=Z,Z=Q;break e}else{u(Z,Q);break}else o(Z,Q);Q=Q.sibling}Q=rg(te,Z.mode,ye),Q.return=Z,Z=Q}return L(Z);case Y:return ze=te._init,rn(Z,Q,ze(te._payload),ye)}if(Te(te))return Oe(Z,Q,te,ye);if(ee(te))return Le(Z,Q,te,ye);Zd(Z,te)}return typeof te=="string"&&te!==""||typeof te=="number"?(te=""+te,Q!==null&&Q.tag===6?(u(Z,Q.sibling),Q=x(Q,te),Q.return=Z,Z=Q):(u(Z,Q),Q=ng(te,Z.mode,ye),Q.return=Z,Z=Q),L(Z)):u(Z,Q)}return rn}var gl=dw(!0),hw=dw(!1),eh=Li(null),th=null,yl=null,hm=null;function fm(){hm=yl=th=null}function pm(s){var o=eh.current;Ft(eh),s._currentValue=o}function mm(s,o,u){for(;s!==null;){var m=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),s===u)break;s=s.return}}function vl(s,o){th=s,hm=yl=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&o)!==0&&(ir=!0),s.firstContext=null)}function kr(s){var o=s._currentValue;if(hm!==s)if(s={context:s,memoizedValue:o,next:null},yl===null){if(th===null)throw Error(t(308));yl=s,th.dependencies={lanes:0,firstContext:s}}else yl=yl.next=s;return o}var na=null;function gm(s){na===null?na=[s]:na.push(s)}function fw(s,o,u,m){var x=o.interleaved;return x===null?(u.next=u,gm(o)):(u.next=x.next,x.next=u),o.interleaved=u,si(s,m)}function si(s,o){s.lanes|=o;var u=s.alternate;for(u!==null&&(u.lanes|=o),u=s,s=s.return;s!==null;)s.childLanes|=o,u=s.alternate,u!==null&&(u.childLanes|=o),u=s,s=s.return;return u.tag===3?u.stateNode:null}var Vi=!1;function ym(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pw(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ii(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function Ui(s,o,u){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(vt&2)!==0){var x=m.pending;return x===null?o.next=o:(o.next=x.next,x.next=o),m.pending=o,si(s,u)}return x=m.interleaved,x===null?(o.next=o,gm(m)):(o.next=x.next,x.next=o),m.interleaved=o,si(s,u)}function nh(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var m=o.lanes;m&=s.pendingLanes,u|=m,o.lanes=u,ji(s,u)}}function mw(s,o){var u=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var x=null,T=null;if(u=u.firstBaseUpdate,u!==null){do{var L={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};T===null?x=T=L:T=T.next=L,u=u.next}while(u!==null);T===null?x=T=o:T=T.next=o}else x=T=o;u={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:T,shared:m.shared,effects:m.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}function rh(s,o,u,m){var x=s.updateQueue;Vi=!1;var T=x.firstBaseUpdate,L=x.lastBaseUpdate,q=x.shared.pending;if(q!==null){x.shared.pending=null;var K=q,re=K.next;K.next=null,L===null?T=re:L.next=re,L=K;var pe=s.alternate;pe!==null&&(pe=pe.updateQueue,q=pe.lastBaseUpdate,q!==L&&(q===null?pe.firstBaseUpdate=re:q.next=re,pe.lastBaseUpdate=K))}if(T!==null){var me=x.baseState;L=0,pe=re=K=null,q=T;do{var fe=q.lane,je=q.eventTime;if((m&fe)===fe){pe!==null&&(pe=pe.next={eventTime:je,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});e:{var Oe=s,Le=q;switch(fe=o,je=u,Le.tag){case 1:if(Oe=Le.payload,typeof Oe=="function"){me=Oe.call(je,me,fe);break e}me=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Le.payload,fe=typeof Oe=="function"?Oe.call(je,me,fe):Oe,fe==null)break e;me=ae({},me,fe);break e;case 2:Vi=!0}}q.callback!==null&&q.lane!==0&&(s.flags|=64,fe=x.effects,fe===null?x.effects=[q]:fe.push(q))}else je={eventTime:je,lane:fe,tag:q.tag,payload:q.payload,callback:q.callback,next:null},pe===null?(re=pe=je,K=me):pe=pe.next=je,L|=fe;if(q=q.next,q===null){if(q=x.shared.pending,q===null)break;fe=q,q=fe.next,fe.next=null,x.lastBaseUpdate=fe,x.shared.pending=null}}while(!0);if(pe===null&&(K=me),x.baseState=K,x.firstBaseUpdate=re,x.lastBaseUpdate=pe,o=x.shared.interleaved,o!==null){x=o;do L|=x.lane,x=x.next;while(x!==o)}else T===null&&(x.shared.lanes=0);ia|=L,s.lanes=L,s.memoizedState=me}}function gw(s,o,u){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var m=s[o],x=m.callback;if(x!==null){if(m.callback=null,m=u,typeof x!="function")throw Error(t(191,x));x.call(m)}}}var Gc={},ws=Li(Gc),Qc=Li(Gc),Yc=Li(Gc);function ra(s){if(s===Gc)throw Error(t(174));return s}function vm(s,o){switch(Lt(Yc,o),Lt(Qc,s),Lt(ws,Gc),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:St(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=St(o,s)}Ft(ws),Lt(ws,o)}function xl(){Ft(ws),Ft(Qc),Ft(Yc)}function yw(s){ra(Yc.current);var o=ra(ws.current),u=St(o,s.type);o!==u&&(Lt(Qc,s),Lt(ws,u))}function xm(s){Qc.current===s&&(Ft(ws),Ft(Qc))}var Ht=Li(0);function sh(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var wm=[];function _m(){for(var s=0;s<wm.length;s++)wm[s]._workInProgressVersionPrimary=null;wm.length=0}var ih=M.ReactCurrentDispatcher,Em=M.ReactCurrentBatchConfig,sa=0,Kt=null,gn=null,_n=null,oh=!1,Xc=!1,Jc=0,Nj=0;function Dn(){throw Error(t(321))}function bm(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!Xr(s[u],o[u]))return!1;return!0}function Sm(s,o,u,m,x,T){if(sa=T,Kt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,ih.current=s===null||s.memoizedState===null?jj:Aj,s=u(m,x),Xc){T=0;do{if(Xc=!1,Jc=0,25<=T)throw Error(t(301));T+=1,_n=gn=null,o.updateQueue=null,ih.current=Pj,s=u(m,x)}while(Xc)}if(ih.current=ch,o=gn!==null&&gn.next!==null,sa=0,_n=gn=Kt=null,oh=!1,o)throw Error(t(300));return s}function Nm(){var s=Jc!==0;return Jc=0,s}function _s(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?Kt.memoizedState=_n=s:_n=_n.next=s,_n}function Or(){if(gn===null){var s=Kt.alternate;s=s!==null?s.memoizedState:null}else s=gn.next;var o=_n===null?Kt.memoizedState:_n.next;if(o!==null)_n=o,gn=s;else{if(s===null)throw Error(t(310));gn=s,s={memoizedState:gn.memoizedState,baseState:gn.baseState,baseQueue:gn.baseQueue,queue:gn.queue,next:null},_n===null?Kt.memoizedState=_n=s:_n=_n.next=s}return _n}function Zc(s,o){return typeof o=="function"?o(s):o}function Tm(s){var o=Or(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var m=gn,x=m.baseQueue,T=u.pending;if(T!==null){if(x!==null){var L=x.next;x.next=T.next,T.next=L}m.baseQueue=x=T,u.pending=null}if(x!==null){T=x.next,m=m.baseState;var q=L=null,K=null,re=T;do{var pe=re.lane;if((sa&pe)===pe)K!==null&&(K=K.next={lane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),m=re.hasEagerState?re.eagerState:s(m,re.action);else{var me={lane:pe,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null};K===null?(q=K=me,L=m):K=K.next=me,Kt.lanes|=pe,ia|=pe}re=re.next}while(re!==null&&re!==T);K===null?L=m:K.next=q,Xr(m,o.memoizedState)||(ir=!0),o.memoizedState=m,o.baseState=L,o.baseQueue=K,u.lastRenderedState=m}if(s=u.interleaved,s!==null){x=s;do T=x.lane,Kt.lanes|=T,ia|=T,x=x.next;while(x!==s)}else x===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Cm(s){var o=Or(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var m=u.dispatch,x=u.pending,T=o.memoizedState;if(x!==null){u.pending=null;var L=x=x.next;do T=s(T,L.action),L=L.next;while(L!==x);Xr(T,o.memoizedState)||(ir=!0),o.memoizedState=T,o.baseQueue===null&&(o.baseState=T),u.lastRenderedState=T}return[T,m]}function vw(){}function xw(s,o){var u=Kt,m=Or(),x=o(),T=!Xr(m.memoizedState,x);if(T&&(m.memoizedState=x,ir=!0),m=m.queue,Im(Ew.bind(null,u,m,s),[s]),m.getSnapshot!==o||T||_n!==null&&_n.memoizedState.tag&1){if(u.flags|=2048,eu(9,_w.bind(null,u,m,x,o),void 0,null),En===null)throw Error(t(349));(sa&30)!==0||ww(u,o,x)}return x}function ww(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=Kt.updateQueue,o===null?(o={lastEffect:null,stores:null},Kt.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function _w(s,o,u,m){o.value=u,o.getSnapshot=m,bw(o)&&Sw(s)}function Ew(s,o,u){return u(function(){bw(o)&&Sw(s)})}function bw(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!Xr(s,u)}catch{return!0}}function Sw(s){var o=si(s,1);o!==null&&ns(o,s,1,-1)}function Nw(s){var o=_s();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zc,lastRenderedState:s},o.queue=s,s=s.dispatch=Ij.bind(null,Kt,s),[o.memoizedState,s]}function eu(s,o,u,m){return s={tag:s,create:o,destroy:u,deps:m,next:null},o=Kt.updateQueue,o===null?(o={lastEffect:null,stores:null},Kt.updateQueue=o,o.lastEffect=s.next=s):(u=o.lastEffect,u===null?o.lastEffect=s.next=s:(m=u.next,u.next=s,s.next=m,o.lastEffect=s)),s}function Tw(){return Or().memoizedState}function ah(s,o,u,m){var x=_s();Kt.flags|=s,x.memoizedState=eu(1|o,u,void 0,m===void 0?null:m)}function lh(s,o,u,m){var x=Or();m=m===void 0?null:m;var T=void 0;if(gn!==null){var L=gn.memoizedState;if(T=L.destroy,m!==null&&bm(m,L.deps)){x.memoizedState=eu(o,u,T,m);return}}Kt.flags|=s,x.memoizedState=eu(1|o,u,T,m)}function Cw(s,o){return ah(8390656,8,s,o)}function Im(s,o){return lh(2048,8,s,o)}function Iw(s,o){return lh(4,2,s,o)}function jw(s,o){return lh(4,4,s,o)}function Aw(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Pw(s,o,u){return u=u!=null?u.concat([s]):null,lh(4,4,Aw.bind(null,o,s),u)}function jm(){}function Rw(s,o){var u=Or();o=o===void 0?null:o;var m=u.memoizedState;return m!==null&&o!==null&&bm(o,m[1])?m[0]:(u.memoizedState=[s,o],s)}function kw(s,o){var u=Or();o=o===void 0?null:o;var m=u.memoizedState;return m!==null&&o!==null&&bm(o,m[1])?m[0]:(s=s(),u.memoizedState=[s,o],s)}function Ow(s,o,u){return(sa&21)===0?(s.baseState&&(s.baseState=!1,ir=!0),s.memoizedState=u):(Xr(u,o)||(u=Ko(),Kt.lanes|=u,ia|=u,s.baseState=!0),o)}function Tj(s,o){var u=ft;ft=u!==0&&4>u?u:4,s(!0);var m=Em.transition;Em.transition={};try{s(!1),o()}finally{ft=u,Em.transition=m}}function Dw(){return Or().memoizedState}function Cj(s,o,u){var m=qi(s);if(u={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null},Lw(s))Mw(o,u);else if(u=fw(s,o,u,m),u!==null){var x=Yn();ns(u,s,m,x),Fw(u,o,m)}}function Ij(s,o,u){var m=qi(s),x={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null};if(Lw(s))Mw(o,x);else{var T=s.alternate;if(s.lanes===0&&(T===null||T.lanes===0)&&(T=o.lastRenderedReducer,T!==null))try{var L=o.lastRenderedState,q=T(L,u);if(x.hasEagerState=!0,x.eagerState=q,Xr(q,L)){var K=o.interleaved;K===null?(x.next=x,gm(o)):(x.next=K.next,K.next=x),o.interleaved=x;return}}catch{}finally{}u=fw(s,o,x,m),u!==null&&(x=Yn(),ns(u,s,m,x),Fw(u,o,m))}}function Lw(s){var o=s.alternate;return s===Kt||o!==null&&o===Kt}function Mw(s,o){Xc=oh=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function Fw(s,o,u){if((u&4194240)!==0){var m=o.lanes;m&=s.pendingLanes,u|=m,o.lanes=u,ji(s,u)}}var ch={readContext:kr,useCallback:Dn,useContext:Dn,useEffect:Dn,useImperativeHandle:Dn,useInsertionEffect:Dn,useLayoutEffect:Dn,useMemo:Dn,useReducer:Dn,useRef:Dn,useState:Dn,useDebugValue:Dn,useDeferredValue:Dn,useTransition:Dn,useMutableSource:Dn,useSyncExternalStore:Dn,useId:Dn,unstable_isNewReconciler:!1},jj={readContext:kr,useCallback:function(s,o){return _s().memoizedState=[s,o===void 0?null:o],s},useContext:kr,useEffect:Cw,useImperativeHandle:function(s,o,u){return u=u!=null?u.concat([s]):null,ah(4194308,4,Aw.bind(null,o,s),u)},useLayoutEffect:function(s,o){return ah(4194308,4,s,o)},useInsertionEffect:function(s,o){return ah(4,2,s,o)},useMemo:function(s,o){var u=_s();return o=o===void 0?null:o,s=s(),u.memoizedState=[s,o],s},useReducer:function(s,o,u){var m=_s();return o=u!==void 0?u(o):o,m.memoizedState=m.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},m.queue=s,s=s.dispatch=Cj.bind(null,Kt,s),[m.memoizedState,s]},useRef:function(s){var o=_s();return s={current:s},o.memoizedState=s},useState:Nw,useDebugValue:jm,useDeferredValue:function(s){return _s().memoizedState=s},useTransition:function(){var s=Nw(!1),o=s[0];return s=Tj.bind(null,s[1]),_s().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,u){var m=Kt,x=_s();if(Bt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),En===null)throw Error(t(349));(sa&30)!==0||ww(m,o,u)}x.memoizedState=u;var T={value:u,getSnapshot:o};return x.queue=T,Cw(Ew.bind(null,m,T,s),[s]),m.flags|=2048,eu(9,_w.bind(null,m,T,u,o),void 0,null),u},useId:function(){var s=_s(),o=En.identifierPrefix;if(Bt){var u=ri,m=ni;u=(m&~(1<<32-Kn(m)-1)).toString(32)+u,o=":"+o+"R"+u,u=Jc++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=Nj++,o=":"+o+"r"+u.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},Aj={readContext:kr,useCallback:Rw,useContext:kr,useEffect:Im,useImperativeHandle:Pw,useInsertionEffect:Iw,useLayoutEffect:jw,useMemo:kw,useReducer:Tm,useRef:Tw,useState:function(){return Tm(Zc)},useDebugValue:jm,useDeferredValue:function(s){var o=Or();return Ow(o,gn.memoizedState,s)},useTransition:function(){var s=Tm(Zc)[0],o=Or().memoizedState;return[s,o]},useMutableSource:vw,useSyncExternalStore:xw,useId:Dw,unstable_isNewReconciler:!1},Pj={readContext:kr,useCallback:Rw,useContext:kr,useEffect:Im,useImperativeHandle:Pw,useInsertionEffect:Iw,useLayoutEffect:jw,useMemo:kw,useReducer:Cm,useRef:Tw,useState:function(){return Cm(Zc)},useDebugValue:jm,useDeferredValue:function(s){var o=Or();return gn===null?o.memoizedState=s:Ow(o,gn.memoizedState,s)},useTransition:function(){var s=Cm(Zc)[0],o=Or().memoizedState;return[s,o]},useMutableSource:vw,useSyncExternalStore:xw,useId:Dw,unstable_isNewReconciler:!1};function Zr(s,o){if(s&&s.defaultProps){o=ae({},o),s=s.defaultProps;for(var u in s)o[u]===void 0&&(o[u]=s[u]);return o}return o}function Am(s,o,u,m){o=s.memoizedState,u=u(m,o),u=u==null?o:ae({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var uh={isMounted:function(s){return(s=s._reactInternals)?qr(s)===s:!1},enqueueSetState:function(s,o,u){s=s._reactInternals;var m=Yn(),x=qi(s),T=ii(m,x);T.payload=o,u!=null&&(T.callback=u),o=Ui(s,T,x),o!==null&&(ns(o,s,x,m),nh(o,s,x))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var m=Yn(),x=qi(s),T=ii(m,x);T.tag=1,T.payload=o,u!=null&&(T.callback=u),o=Ui(s,T,x),o!==null&&(ns(o,s,x,m),nh(o,s,x))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=Yn(),m=qi(s),x=ii(u,m);x.tag=2,o!=null&&(x.callback=o),o=Ui(s,x,m),o!==null&&(ns(o,s,m,u),nh(o,s,m))}};function Vw(s,o,u,m,x,T,L){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,T,L):o.prototype&&o.prototype.isPureReactComponent?!Uc(u,m)||!Uc(x,T):!0}function Uw(s,o,u){var m=!1,x=Mi,T=o.contextType;return typeof T=="object"&&T!==null?T=kr(T):(x=sr(o)?Zo:On.current,m=o.contextTypes,T=(m=m!=null)?hl(s,x):Mi),o=new o(u,T),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=uh,s.stateNode=o,o._reactInternals=s,m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=x,s.__reactInternalMemoizedMaskedChildContext=T),o}function zw(s,o,u,m){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,m),o.state!==s&&uh.enqueueReplaceState(o,o.state,null)}function Pm(s,o,u,m){var x=s.stateNode;x.props=u,x.state=s.memoizedState,x.refs={},ym(s);var T=o.contextType;typeof T=="object"&&T!==null?x.context=kr(T):(T=sr(o)?Zo:On.current,x.context=hl(s,T)),x.state=s.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(Am(s,o,T,u),x.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(o=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),o!==x.state&&uh.enqueueReplaceState(x,x.state,null),rh(s,u,x,m),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308)}function wl(s,o){try{var u="",m=o;do u+=Se(m),m=m.return;while(m);var x=u}catch(T){x=`
Error generating stack: `+T.message+`
`+T.stack}return{value:s,source:o,stack:x,digest:null}}function Rm(s,o,u){return{value:s,source:null,stack:u??null,digest:o??null}}function km(s,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var Rj=typeof WeakMap=="function"?WeakMap:Map;function $w(s,o,u){u=ii(-1,u),u.tag=3,u.payload={element:null};var m=o.value;return u.callback=function(){yh||(yh=!0,Gm=m),km(s,o)},u}function Bw(s,o,u){u=ii(-1,u),u.tag=3;var m=s.type.getDerivedStateFromError;if(typeof m=="function"){var x=o.value;u.payload=function(){return m(x)},u.callback=function(){km(s,o)}}var T=s.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(u.callback=function(){km(s,o),typeof m!="function"&&($i===null?$i=new Set([this]):$i.add(this));var L=o.stack;this.componentDidCatch(o.value,{componentStack:L!==null?L:""})}),u}function qw(s,o,u){var m=s.pingCache;if(m===null){m=s.pingCache=new Rj;var x=new Set;m.set(o,x)}else x=m.get(o),x===void 0&&(x=new Set,m.set(o,x));x.has(u)||(x.add(u),s=Hj.bind(null,s,o,u),o.then(s,s))}function Ww(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function Hw(s,o,u,m,x){return(s.mode&1)===0?(s===o?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=ii(-1,1),o.tag=2,Ui(u,o,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=x,s)}var kj=M.ReactCurrentOwner,ir=!1;function Qn(s,o,u,m){o.child=s===null?hw(o,null,u,m):gl(o,s.child,u,m)}function Kw(s,o,u,m,x){u=u.render;var T=o.ref;return vl(o,x),m=Sm(s,o,u,m,T,x),u=Nm(),s!==null&&!ir?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~x,oi(s,o,x)):(Bt&&u&&am(o),o.flags|=1,Qn(s,o,m,x),o.child)}function Gw(s,o,u,m,x){if(s===null){var T=u.type;return typeof T=="function"&&!tg(T)&&T.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=T,Qw(s,o,T,m,x)):(s=bh(u.type,null,m,o,o.mode,x),s.ref=o.ref,s.return=o,o.child=s)}if(T=s.child,(s.lanes&x)===0){var L=T.memoizedProps;if(u=u.compare,u=u!==null?u:Uc,u(L,m)&&s.ref===o.ref)return oi(s,o,x)}return o.flags|=1,s=Hi(T,m),s.ref=o.ref,s.return=o,o.child=s}function Qw(s,o,u,m,x){if(s!==null){var T=s.memoizedProps;if(Uc(T,m)&&s.ref===o.ref)if(ir=!1,o.pendingProps=m=T,(s.lanes&x)!==0)(s.flags&131072)!==0&&(ir=!0);else return o.lanes=s.lanes,oi(s,o,x)}return Om(s,o,u,m,x)}function Yw(s,o,u){var m=o.pendingProps,x=m.children,T=s!==null?s.memoizedState:null;if(m.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lt(El,xr),xr|=u;else{if((u&1073741824)===0)return s=T!==null?T.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,Lt(El,xr),xr|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=T!==null?T.baseLanes:u,Lt(El,xr),xr|=m}else T!==null?(m=T.baseLanes|u,o.memoizedState=null):m=u,Lt(El,xr),xr|=m;return Qn(s,o,x,u),o.child}function Xw(s,o){var u=o.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Om(s,o,u,m,x){var T=sr(u)?Zo:On.current;return T=hl(o,T),vl(o,x),u=Sm(s,o,u,m,T,x),m=Nm(),s!==null&&!ir?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~x,oi(s,o,x)):(Bt&&m&&am(o),o.flags|=1,Qn(s,o,u,x),o.child)}function Jw(s,o,u,m,x){if(sr(u)){var T=!0;Gd(o)}else T=!1;if(vl(o,x),o.stateNode===null)hh(s,o),Uw(o,u,m),Pm(o,u,m,x),m=!0;else if(s===null){var L=o.stateNode,q=o.memoizedProps;L.props=q;var K=L.context,re=u.contextType;typeof re=="object"&&re!==null?re=kr(re):(re=sr(u)?Zo:On.current,re=hl(o,re));var pe=u.getDerivedStateFromProps,me=typeof pe=="function"||typeof L.getSnapshotBeforeUpdate=="function";me||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(q!==m||K!==re)&&zw(o,L,m,re),Vi=!1;var fe=o.memoizedState;L.state=fe,rh(o,m,L,x),K=o.memoizedState,q!==m||fe!==K||rr.current||Vi?(typeof pe=="function"&&(Am(o,u,pe,m),K=o.memoizedState),(q=Vi||Vw(o,u,q,m,fe,K,re))?(me||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(o.flags|=4194308)):(typeof L.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=K),L.props=m,L.state=K,L.context=re,m=q):(typeof L.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{L=o.stateNode,pw(s,o),q=o.memoizedProps,re=o.type===o.elementType?q:Zr(o.type,q),L.props=re,me=o.pendingProps,fe=L.context,K=u.contextType,typeof K=="object"&&K!==null?K=kr(K):(K=sr(u)?Zo:On.current,K=hl(o,K));var je=u.getDerivedStateFromProps;(pe=typeof je=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(q!==me||fe!==K)&&zw(o,L,m,K),Vi=!1,fe=o.memoizedState,L.state=fe,rh(o,m,L,x);var Oe=o.memoizedState;q!==me||fe!==Oe||rr.current||Vi?(typeof je=="function"&&(Am(o,u,je,m),Oe=o.memoizedState),(re=Vi||Vw(o,u,re,m,fe,Oe,K)||!1)?(pe||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(m,Oe,K),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(m,Oe,K)),typeof L.componentDidUpdate=="function"&&(o.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof L.componentDidUpdate!="function"||q===s.memoizedProps&&fe===s.memoizedState||(o.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||q===s.memoizedProps&&fe===s.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=Oe),L.props=m,L.state=Oe,L.context=K,m=re):(typeof L.componentDidUpdate!="function"||q===s.memoizedProps&&fe===s.memoizedState||(o.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||q===s.memoizedProps&&fe===s.memoizedState||(o.flags|=1024),m=!1)}return Dm(s,o,u,m,T,x)}function Dm(s,o,u,m,x,T){Xw(s,o);var L=(o.flags&128)!==0;if(!m&&!L)return x&&rw(o,u,!1),oi(s,o,T);m=o.stateNode,kj.current=o;var q=L&&typeof u.getDerivedStateFromError!="function"?null:m.render();return o.flags|=1,s!==null&&L?(o.child=gl(o,s.child,null,T),o.child=gl(o,null,q,T)):Qn(s,o,q,T),o.memoizedState=m.state,x&&rw(o,u,!0),o.child}function Zw(s){var o=s.stateNode;o.pendingContext?tw(s,o.pendingContext,o.pendingContext!==o.context):o.context&&tw(s,o.context,!1),vm(s,o.containerInfo)}function e0(s,o,u,m,x){return ml(),dm(x),o.flags|=256,Qn(s,o,u,m),o.child}var Lm={dehydrated:null,treeContext:null,retryLane:0};function Mm(s){return{baseLanes:s,cachePool:null,transitions:null}}function t0(s,o,u){var m=o.pendingProps,x=Ht.current,T=!1,L=(o.flags&128)!==0,q;if((q=L)||(q=s!==null&&s.memoizedState===null?!1:(x&2)!==0),q?(T=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(x|=1),Lt(Ht,x&1),s===null)return um(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((o.mode&1)===0?o.lanes=1:s.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(L=m.children,s=m.fallback,T?(m=o.mode,T=o.child,L={mode:"hidden",children:L},(m&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=L):T=Sh(L,m,0,null),s=ca(s,m,u,null),T.return=o,s.return=o,T.sibling=s,o.child=T,o.child.memoizedState=Mm(u),o.memoizedState=Lm,s):Fm(o,L));if(x=s.memoizedState,x!==null&&(q=x.dehydrated,q!==null))return Oj(s,o,L,m,q,x,u);if(T){T=m.fallback,L=o.mode,x=s.child,q=x.sibling;var K={mode:"hidden",children:m.children};return(L&1)===0&&o.child!==x?(m=o.child,m.childLanes=0,m.pendingProps=K,o.deletions=null):(m=Hi(x,K),m.subtreeFlags=x.subtreeFlags&14680064),q!==null?T=Hi(q,T):(T=ca(T,L,u,null),T.flags|=2),T.return=o,m.return=o,m.sibling=T,o.child=m,m=T,T=o.child,L=s.child.memoizedState,L=L===null?Mm(u):{baseLanes:L.baseLanes|u,cachePool:null,transitions:L.transitions},T.memoizedState=L,T.childLanes=s.childLanes&~u,o.memoizedState=Lm,m}return T=s.child,s=T.sibling,m=Hi(T,{mode:"visible",children:m.children}),(o.mode&1)===0&&(m.lanes=u),m.return=o,m.sibling=null,s!==null&&(u=o.deletions,u===null?(o.deletions=[s],o.flags|=16):u.push(s)),o.child=m,o.memoizedState=null,m}function Fm(s,o){return o=Sh({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function dh(s,o,u,m){return m!==null&&dm(m),gl(o,s.child,null,u),s=Fm(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function Oj(s,o,u,m,x,T,L){if(u)return o.flags&256?(o.flags&=-257,m=Rm(Error(t(422))),dh(s,o,L,m)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(T=m.fallback,x=o.mode,m=Sh({mode:"visible",children:m.children},x,0,null),T=ca(T,x,L,null),T.flags|=2,m.return=o,T.return=o,m.sibling=T,o.child=m,(o.mode&1)!==0&&gl(o,s.child,null,L),o.child.memoizedState=Mm(L),o.memoizedState=Lm,T);if((o.mode&1)===0)return dh(s,o,L,null);if(x.data==="$!"){if(m=x.nextSibling&&x.nextSibling.dataset,m)var q=m.dgst;return m=q,T=Error(t(419)),m=Rm(T,m,void 0),dh(s,o,L,m)}if(q=(L&s.childLanes)!==0,ir||q){if(m=En,m!==null){switch(L&-L){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(m.suspendedLanes|L))!==0?0:x,x!==0&&x!==T.retryLane&&(T.retryLane=x,si(s,x),ns(m,s,x,-1))}return eg(),m=Rm(Error(t(421))),dh(s,o,L,m)}return x.data==="$?"?(o.flags|=128,o.child=s.child,o=Kj.bind(null,s),x._reactRetry=o,null):(s=T.treeContext,vr=Di(x.nextSibling),yr=o,Bt=!0,Jr=null,s!==null&&(Pr[Rr++]=ni,Pr[Rr++]=ri,Pr[Rr++]=ea,ni=s.id,ri=s.overflow,ea=o),o=Fm(o,m.children),o.flags|=4096,o)}function n0(s,o,u){s.lanes|=o;var m=s.alternate;m!==null&&(m.lanes|=o),mm(s.return,o,u)}function Vm(s,o,u,m,x){var T=s.memoizedState;T===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:x}:(T.isBackwards=o,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=u,T.tailMode=x)}function r0(s,o,u){var m=o.pendingProps,x=m.revealOrder,T=m.tail;if(Qn(s,o,m.children,u),m=Ht.current,(m&2)!==0)m=m&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&n0(s,u,o);else if(s.tag===19)n0(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}if(Lt(Ht,m),(o.mode&1)===0)o.memoizedState=null;else switch(x){case"forwards":for(u=o.child,x=null;u!==null;)s=u.alternate,s!==null&&sh(s)===null&&(x=u),u=u.sibling;u=x,u===null?(x=o.child,o.child=null):(x=u.sibling,u.sibling=null),Vm(o,!1,x,u,T);break;case"backwards":for(u=null,x=o.child,o.child=null;x!==null;){if(s=x.alternate,s!==null&&sh(s)===null){o.child=x;break}s=x.sibling,x.sibling=u,u=x,x=s}Vm(o,!0,u,null,T);break;case"together":Vm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function hh(s,o){(o.mode&1)===0&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function oi(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),ia|=o.lanes,(u&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(t(153));if(o.child!==null){for(s=o.child,u=Hi(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=Hi(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function Dj(s,o,u){switch(o.tag){case 3:Zw(o),ml();break;case 5:yw(o);break;case 1:sr(o.type)&&Gd(o);break;case 4:vm(o,o.stateNode.containerInfo);break;case 10:var m=o.type._context,x=o.memoizedProps.value;Lt(eh,m._currentValue),m._currentValue=x;break;case 13:if(m=o.memoizedState,m!==null)return m.dehydrated!==null?(Lt(Ht,Ht.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?t0(s,o,u):(Lt(Ht,Ht.current&1),s=oi(s,o,u),s!==null?s.sibling:null);Lt(Ht,Ht.current&1);break;case 19:if(m=(u&o.childLanes)!==0,(s.flags&128)!==0){if(m)return r0(s,o,u);o.flags|=128}if(x=o.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Lt(Ht,Ht.current),m)break;return null;case 22:case 23:return o.lanes=0,Yw(s,o,u)}return oi(s,o,u)}var s0,Um,i0,o0;s0=function(s,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Um=function(){},i0=function(s,o,u,m){var x=s.memoizedProps;if(x!==m){s=o.stateNode,ra(ws.current);var T=null;switch(u){case"input":x=kt(s,x),m=kt(s,m),T=[];break;case"select":x=ae({},x,{value:void 0}),m=ae({},m,{value:void 0}),T=[];break;case"textarea":x=he(s,x),m=he(s,m),T=[];break;default:typeof x.onClick!="function"&&typeof m.onClick=="function"&&(s.onclick=Wd)}er(u,m);var L;u=null;for(re in x)if(!m.hasOwnProperty(re)&&x.hasOwnProperty(re)&&x[re]!=null)if(re==="style"){var q=x[re];for(L in q)q.hasOwnProperty(L)&&(u||(u={}),u[L]="")}else re!=="dangerouslySetInnerHTML"&&re!=="children"&&re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&re!=="autoFocus"&&(i.hasOwnProperty(re)?T||(T=[]):(T=T||[]).push(re,null));for(re in m){var K=m[re];if(q=x!=null?x[re]:void 0,m.hasOwnProperty(re)&&K!==q&&(K!=null||q!=null))if(re==="style")if(q){for(L in q)!q.hasOwnProperty(L)||K&&K.hasOwnProperty(L)||(u||(u={}),u[L]="");for(L in K)K.hasOwnProperty(L)&&q[L]!==K[L]&&(u||(u={}),u[L]=K[L])}else u||(T||(T=[]),T.push(re,u)),u=K;else re==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,q=q?q.__html:void 0,K!=null&&q!==K&&(T=T||[]).push(re,K)):re==="children"?typeof K!="string"&&typeof K!="number"||(T=T||[]).push(re,""+K):re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&(i.hasOwnProperty(re)?(K!=null&&re==="onScroll"&&Mt("scroll",s),T||q===K||(T=[])):(T=T||[]).push(re,K))}u&&(T=T||[]).push("style",u);var re=T;(o.updateQueue=re)&&(o.flags|=4)}},o0=function(s,o,u,m){u!==m&&(o.flags|=4)};function tu(s,o){if(!Bt)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function Ln(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,m=0;if(o)for(var x=s.child;x!==null;)u|=x.lanes|x.childLanes,m|=x.subtreeFlags&14680064,m|=x.flags&14680064,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)u|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=m,s.childLanes=u,o}function Lj(s,o,u){var m=o.pendingProps;switch(lm(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(o),null;case 1:return sr(o.type)&&Kd(),Ln(o),null;case 3:return m=o.stateNode,xl(),Ft(rr),Ft(On),_m(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(s===null||s.child===null)&&(Jd(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Jr!==null&&(Xm(Jr),Jr=null))),Um(s,o),Ln(o),null;case 5:xm(o);var x=ra(Yc.current);if(u=o.type,s!==null&&o.stateNode!=null)i0(s,o,u,m,x),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!m){if(o.stateNode===null)throw Error(t(166));return Ln(o),null}if(s=ra(ws.current),Jd(o)){m=o.stateNode,u=o.type;var T=o.memoizedProps;switch(m[xs]=o,m[Wc]=T,s=(o.mode&1)!==0,u){case"dialog":Mt("cancel",m),Mt("close",m);break;case"iframe":case"object":case"embed":Mt("load",m);break;case"video":case"audio":for(x=0;x<$c.length;x++)Mt($c[x],m);break;case"source":Mt("error",m);break;case"img":case"image":case"link":Mt("error",m),Mt("load",m);break;case"details":Mt("toggle",m);break;case"input":Ot(m,T),Mt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!T.multiple},Mt("invalid",m);break;case"textarea":pt(m,T),Mt("invalid",m)}er(u,T),x=null;for(var L in T)if(T.hasOwnProperty(L)){var q=T[L];L==="children"?typeof q=="string"?m.textContent!==q&&(T.suppressHydrationWarning!==!0&&qd(m.textContent,q,s),x=["children",q]):typeof q=="number"&&m.textContent!==""+q&&(T.suppressHydrationWarning!==!0&&qd(m.textContent,q,s),x=["children",""+q]):i.hasOwnProperty(L)&&q!=null&&L==="onScroll"&&Mt("scroll",m)}switch(u){case"input":Xe(m),be(m,T,!0);break;case"textarea":Xe(m),jt(m);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(m.onclick=Wd)}m=x,o.updateQueue=m,m!==null&&(o.flags|=4)}else{L=x.nodeType===9?x:x.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=It(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=L.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof m.is=="string"?s=L.createElement(u,{is:m.is}):(s=L.createElement(u),u==="select"&&(L=s,m.multiple?L.multiple=!0:m.size&&(L.size=m.size))):s=L.createElementNS(s,u),s[xs]=o,s[Wc]=m,s0(s,o,!1,!1),o.stateNode=s;e:{switch(L=Vo(u,m),u){case"dialog":Mt("cancel",s),Mt("close",s),x=m;break;case"iframe":case"object":case"embed":Mt("load",s),x=m;break;case"video":case"audio":for(x=0;x<$c.length;x++)Mt($c[x],s);x=m;break;case"source":Mt("error",s),x=m;break;case"img":case"image":case"link":Mt("error",s),Mt("load",s),x=m;break;case"details":Mt("toggle",s),x=m;break;case"input":Ot(s,m),x=kt(s,m),Mt("invalid",s);break;case"option":x=m;break;case"select":s._wrapperState={wasMultiple:!!m.multiple},x=ae({},m,{value:void 0}),Mt("invalid",s);break;case"textarea":pt(s,m),x=he(s,m),Mt("invalid",s);break;default:x=m}er(u,x),q=x;for(T in q)if(q.hasOwnProperty(T)){var K=q[T];T==="style"?qt(s,K):T==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,K!=null&&Hn(s,K)):T==="children"?typeof K=="string"?(u!=="textarea"||K!=="")&&Zn(s,K):typeof K=="number"&&Zn(s,""+K):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(i.hasOwnProperty(T)?K!=null&&T==="onScroll"&&Mt("scroll",s):K!=null&&C(s,T,K,L))}switch(u){case"input":Xe(s),be(s,m,!1);break;case"textarea":Xe(s),jt(s);break;case"option":m.value!=null&&s.setAttribute("value",""+we(m.value));break;case"select":s.multiple=!!m.multiple,T=m.value,T!=null?He(s,!!m.multiple,T,!1):m.defaultValue!=null&&He(s,!!m.multiple,m.defaultValue,!0);break;default:typeof x.onClick=="function"&&(s.onclick=Wd)}switch(u){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Ln(o),null;case 6:if(s&&o.stateNode!=null)o0(s,o,s.memoizedProps,m);else{if(typeof m!="string"&&o.stateNode===null)throw Error(t(166));if(u=ra(Yc.current),ra(ws.current),Jd(o)){if(m=o.stateNode,u=o.memoizedProps,m[xs]=o,(T=m.nodeValue!==u)&&(s=yr,s!==null))switch(s.tag){case 3:qd(m.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&qd(m.nodeValue,u,(s.mode&1)!==0)}T&&(o.flags|=4)}else m=(u.nodeType===9?u:u.ownerDocument).createTextNode(m),m[xs]=o,o.stateNode=m}return Ln(o),null;case 13:if(Ft(Ht),m=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Bt&&vr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)cw(),ml(),o.flags|=98560,T=!1;else if(T=Jd(o),m!==null&&m.dehydrated!==null){if(s===null){if(!T)throw Error(t(318));if(T=o.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(t(317));T[xs]=o}else ml(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ln(o),T=!1}else Jr!==null&&(Xm(Jr),Jr=null),T=!0;if(!T)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(m=m!==null,m!==(s!==null&&s.memoizedState!==null)&&m&&(o.child.flags|=8192,(o.mode&1)!==0&&(s===null||(Ht.current&1)!==0?yn===0&&(yn=3):eg())),o.updateQueue!==null&&(o.flags|=4),Ln(o),null);case 4:return xl(),Um(s,o),s===null&&Bc(o.stateNode.containerInfo),Ln(o),null;case 10:return pm(o.type._context),Ln(o),null;case 17:return sr(o.type)&&Kd(),Ln(o),null;case 19:if(Ft(Ht),T=o.memoizedState,T===null)return Ln(o),null;if(m=(o.flags&128)!==0,L=T.rendering,L===null)if(m)tu(T,!1);else{if(yn!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(L=sh(s),L!==null){for(o.flags|=128,tu(T,!1),m=L.updateQueue,m!==null&&(o.updateQueue=m,o.flags|=4),o.subtreeFlags=0,m=u,u=o.child;u!==null;)T=u,s=m,T.flags&=14680066,L=T.alternate,L===null?(T.childLanes=0,T.lanes=s,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=L.childLanes,T.lanes=L.lanes,T.child=L.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=L.memoizedProps,T.memoizedState=L.memoizedState,T.updateQueue=L.updateQueue,T.type=L.type,s=L.dependencies,T.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return Lt(Ht,Ht.current&1|2),o.child}s=s.sibling}T.tail!==null&&Dt()>bl&&(o.flags|=128,m=!0,tu(T,!1),o.lanes=4194304)}else{if(!m)if(s=sh(L),s!==null){if(o.flags|=128,m=!0,u=s.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),tu(T,!0),T.tail===null&&T.tailMode==="hidden"&&!L.alternate&&!Bt)return Ln(o),null}else 2*Dt()-T.renderingStartTime>bl&&u!==1073741824&&(o.flags|=128,m=!0,tu(T,!1),o.lanes=4194304);T.isBackwards?(L.sibling=o.child,o.child=L):(u=T.last,u!==null?u.sibling=L:o.child=L,T.last=L)}return T.tail!==null?(o=T.tail,T.rendering=o,T.tail=o.sibling,T.renderingStartTime=Dt(),o.sibling=null,u=Ht.current,Lt(Ht,m?u&1|2:u&1),o):(Ln(o),null);case 22:case 23:return Zm(),m=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==m&&(o.flags|=8192),m&&(o.mode&1)!==0?(xr&1073741824)!==0&&(Ln(o),o.subtreeFlags&6&&(o.flags|=8192)):Ln(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function Mj(s,o){switch(lm(o),o.tag){case 1:return sr(o.type)&&Kd(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return xl(),Ft(rr),Ft(On),_m(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 5:return xm(o),null;case 13:if(Ft(Ht),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ml()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return Ft(Ht),null;case 4:return xl(),null;case 10:return pm(o.type._context),null;case 22:case 23:return Zm(),null;case 24:return null;default:return null}}var fh=!1,Mn=!1,Fj=typeof WeakSet=="function"?WeakSet:Set,Re=null;function _l(s,o){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(m){Zt(s,o,m)}else u.current=null}function zm(s,o,u){try{u()}catch(m){Zt(s,o,m)}}var a0=!1;function Vj(s,o){if(Zp=Ri,s=Vx(),Wp(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var x=m.anchorOffset,T=m.focusNode;m=m.focusOffset;try{u.nodeType,T.nodeType}catch{u=null;break e}var L=0,q=-1,K=-1,re=0,pe=0,me=s,fe=null;t:for(;;){for(var je;me!==u||x!==0&&me.nodeType!==3||(q=L+x),me!==T||m!==0&&me.nodeType!==3||(K=L+m),me.nodeType===3&&(L+=me.nodeValue.length),(je=me.firstChild)!==null;)fe=me,me=je;for(;;){if(me===s)break t;if(fe===u&&++re===x&&(q=L),fe===T&&++pe===m&&(K=L),(je=me.nextSibling)!==null)break;me=fe,fe=me.parentNode}me=je}u=q===-1||K===-1?null:{start:q,end:K}}else u=null}u=u||{start:0,end:0}}else u=null;for(em={focusedElem:s,selectionRange:u},Ri=!1,Re=o;Re!==null;)if(o=Re,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Re=s;else for(;Re!==null;){o=Re;try{var Oe=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Oe!==null){var Le=Oe.memoizedProps,rn=Oe.memoizedState,Z=o.stateNode,Q=Z.getSnapshotBeforeUpdate(o.elementType===o.type?Le:Zr(o.type,Le),rn);Z.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var te=o.stateNode.containerInfo;te.nodeType===1?te.textContent="":te.nodeType===9&&te.documentElement&&te.removeChild(te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ye){Zt(o,o.return,ye)}if(s=o.sibling,s!==null){s.return=o.return,Re=s;break}Re=o.return}return Oe=a0,a0=!1,Oe}function nu(s,o,u){var m=o.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var x=m=m.next;do{if((x.tag&s)===s){var T=x.destroy;x.destroy=void 0,T!==void 0&&zm(o,u,T)}x=x.next}while(x!==m)}}function ph(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&s)===s){var m=u.create;u.destroy=m()}u=u.next}while(u!==o)}}function $m(s){var o=s.ref;if(o!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof o=="function"?o(s):o.current=s}}function l0(s){var o=s.alternate;o!==null&&(s.alternate=null,l0(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[xs],delete o[Wc],delete o[sm],delete o[_j],delete o[Ej])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function c0(s){return s.tag===5||s.tag===3||s.tag===4}function u0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||c0(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Bm(s,o,u){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(s,o):u.insertBefore(s,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(s,u)):(o=u,o.appendChild(s)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Wd));else if(m!==4&&(s=s.child,s!==null))for(Bm(s,o,u),s=s.sibling;s!==null;)Bm(s,o,u),s=s.sibling}function qm(s,o,u){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(m!==4&&(s=s.child,s!==null))for(qm(s,o,u),s=s.sibling;s!==null;)qm(s,o,u),s=s.sibling}var In=null,es=!1;function zi(s,o,u){for(u=u.child;u!==null;)d0(s,o,u),u=u.sibling}function d0(s,o,u){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(Wo,u)}catch{}switch(u.tag){case 5:Mn||_l(u,o);case 6:var m=In,x=es;In=null,zi(s,o,u),In=m,es=x,In!==null&&(es?(s=In,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):In.removeChild(u.stateNode));break;case 18:In!==null&&(es?(s=In,u=u.stateNode,s.nodeType===8?rm(s.parentNode,u):s.nodeType===1&&rm(s,u),Qr(s)):rm(In,u.stateNode));break;case 4:m=In,x=es,In=u.stateNode.containerInfo,es=!0,zi(s,o,u),In=m,es=x;break;case 0:case 11:case 14:case 15:if(!Mn&&(m=u.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){x=m=m.next;do{var T=x,L=T.destroy;T=T.tag,L!==void 0&&((T&2)!==0||(T&4)!==0)&&zm(u,o,L),x=x.next}while(x!==m)}zi(s,o,u);break;case 1:if(!Mn&&(_l(u,o),m=u.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=u.memoizedProps,m.state=u.memoizedState,m.componentWillUnmount()}catch(q){Zt(u,o,q)}zi(s,o,u);break;case 21:zi(s,o,u);break;case 22:u.mode&1?(Mn=(m=Mn)||u.memoizedState!==null,zi(s,o,u),Mn=m):zi(s,o,u);break;default:zi(s,o,u)}}function h0(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new Fj),o.forEach(function(m){var x=Gj.bind(null,s,m);u.has(m)||(u.add(m),m.then(x,x))})}}function ts(s,o){var u=o.deletions;if(u!==null)for(var m=0;m<u.length;m++){var x=u[m];try{var T=s,L=o,q=L;e:for(;q!==null;){switch(q.tag){case 5:In=q.stateNode,es=!1;break e;case 3:In=q.stateNode.containerInfo,es=!0;break e;case 4:In=q.stateNode.containerInfo,es=!0;break e}q=q.return}if(In===null)throw Error(t(160));d0(T,L,x),In=null,es=!1;var K=x.alternate;K!==null&&(K.return=null),x.return=null}catch(re){Zt(x,o,re)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)f0(o,s),o=o.sibling}function f0(s,o){var u=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ts(o,s),Es(s),m&4){try{nu(3,s,s.return),ph(3,s)}catch(Le){Zt(s,s.return,Le)}try{nu(5,s,s.return)}catch(Le){Zt(s,s.return,Le)}}break;case 1:ts(o,s),Es(s),m&512&&u!==null&&_l(u,u.return);break;case 5:if(ts(o,s),Es(s),m&512&&u!==null&&_l(u,u.return),s.flags&32){var x=s.stateNode;try{Zn(x,"")}catch(Le){Zt(s,s.return,Le)}}if(m&4&&(x=s.stateNode,x!=null)){var T=s.memoizedProps,L=u!==null?u.memoizedProps:T,q=s.type,K=s.updateQueue;if(s.updateQueue=null,K!==null)try{q==="input"&&T.type==="radio"&&T.name!=null&&lt(x,T),Vo(q,L);var re=Vo(q,T);for(L=0;L<K.length;L+=2){var pe=K[L],me=K[L+1];pe==="style"?qt(x,me):pe==="dangerouslySetInnerHTML"?Hn(x,me):pe==="children"?Zn(x,me):C(x,pe,me,re)}switch(q){case"input":Jt(x,T);break;case"textarea":ke(x,T);break;case"select":var fe=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!T.multiple;var je=T.value;je!=null?He(x,!!T.multiple,je,!1):fe!==!!T.multiple&&(T.defaultValue!=null?He(x,!!T.multiple,T.defaultValue,!0):He(x,!!T.multiple,T.multiple?[]:"",!1))}x[Wc]=T}catch(Le){Zt(s,s.return,Le)}}break;case 6:if(ts(o,s),Es(s),m&4){if(s.stateNode===null)throw Error(t(162));x=s.stateNode,T=s.memoizedProps;try{x.nodeValue=T}catch(Le){Zt(s,s.return,Le)}}break;case 3:if(ts(o,s),Es(s),m&4&&u!==null&&u.memoizedState.isDehydrated)try{Qr(o.containerInfo)}catch(Le){Zt(s,s.return,Le)}break;case 4:ts(o,s),Es(s);break;case 13:ts(o,s),Es(s),x=s.child,x.flags&8192&&(T=x.memoizedState!==null,x.stateNode.isHidden=T,!T||x.alternate!==null&&x.alternate.memoizedState!==null||(Km=Dt())),m&4&&h0(s);break;case 22:if(pe=u!==null&&u.memoizedState!==null,s.mode&1?(Mn=(re=Mn)||pe,ts(o,s),Mn=re):ts(o,s),Es(s),m&8192){if(re=s.memoizedState!==null,(s.stateNode.isHidden=re)&&!pe&&(s.mode&1)!==0)for(Re=s,pe=s.child;pe!==null;){for(me=Re=pe;Re!==null;){switch(fe=Re,je=fe.child,fe.tag){case 0:case 11:case 14:case 15:nu(4,fe,fe.return);break;case 1:_l(fe,fe.return);var Oe=fe.stateNode;if(typeof Oe.componentWillUnmount=="function"){m=fe,u=fe.return;try{o=m,Oe.props=o.memoizedProps,Oe.state=o.memoizedState,Oe.componentWillUnmount()}catch(Le){Zt(m,u,Le)}}break;case 5:_l(fe,fe.return);break;case 22:if(fe.memoizedState!==null){g0(me);continue}}je!==null?(je.return=fe,Re=je):g0(me)}pe=pe.sibling}e:for(pe=null,me=s;;){if(me.tag===5){if(pe===null){pe=me;try{x=me.stateNode,re?(T=x.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(q=me.stateNode,K=me.memoizedProps.style,L=K!=null&&K.hasOwnProperty("display")?K.display:null,q.style.display=Ur("display",L))}catch(Le){Zt(s,s.return,Le)}}}else if(me.tag===6){if(pe===null)try{me.stateNode.nodeValue=re?"":me.memoizedProps}catch(Le){Zt(s,s.return,Le)}}else if((me.tag!==22&&me.tag!==23||me.memoizedState===null||me===s)&&me.child!==null){me.child.return=me,me=me.child;continue}if(me===s)break e;for(;me.sibling===null;){if(me.return===null||me.return===s)break e;pe===me&&(pe=null),me=me.return}pe===me&&(pe=null),me.sibling.return=me.return,me=me.sibling}}break;case 19:ts(o,s),Es(s),m&4&&h0(s);break;case 21:break;default:ts(o,s),Es(s)}}function Es(s){var o=s.flags;if(o&2){try{e:{for(var u=s.return;u!==null;){if(c0(u)){var m=u;break e}u=u.return}throw Error(t(160))}switch(m.tag){case 5:var x=m.stateNode;m.flags&32&&(Zn(x,""),m.flags&=-33);var T=u0(s);qm(s,T,x);break;case 3:case 4:var L=m.stateNode.containerInfo,q=u0(s);Bm(s,q,L);break;default:throw Error(t(161))}}catch(K){Zt(s,s.return,K)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function Uj(s,o,u){Re=s,p0(s)}function p0(s,o,u){for(var m=(s.mode&1)!==0;Re!==null;){var x=Re,T=x.child;if(x.tag===22&&m){var L=x.memoizedState!==null||fh;if(!L){var q=x.alternate,K=q!==null&&q.memoizedState!==null||Mn;q=fh;var re=Mn;if(fh=L,(Mn=K)&&!re)for(Re=x;Re!==null;)L=Re,K=L.child,L.tag===22&&L.memoizedState!==null?y0(x):K!==null?(K.return=L,Re=K):y0(x);for(;T!==null;)Re=T,p0(T),T=T.sibling;Re=x,fh=q,Mn=re}m0(s)}else(x.subtreeFlags&8772)!==0&&T!==null?(T.return=x,Re=T):m0(s)}}function m0(s){for(;Re!==null;){var o=Re;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Mn||ph(5,o);break;case 1:var m=o.stateNode;if(o.flags&4&&!Mn)if(u===null)m.componentDidMount();else{var x=o.elementType===o.type?u.memoizedProps:Zr(o.type,u.memoizedProps);m.componentDidUpdate(x,u.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var T=o.updateQueue;T!==null&&gw(o,T,m);break;case 3:var L=o.updateQueue;if(L!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}gw(o,L,u)}break;case 5:var q=o.stateNode;if(u===null&&o.flags&4){u=q;var K=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":K.autoFocus&&u.focus();break;case"img":K.src&&(u.src=K.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var re=o.alternate;if(re!==null){var pe=re.memoizedState;if(pe!==null){var me=pe.dehydrated;me!==null&&Qr(me)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Mn||o.flags&512&&$m(o)}catch(fe){Zt(o,o.return,fe)}}if(o===s){Re=null;break}if(u=o.sibling,u!==null){u.return=o.return,Re=u;break}Re=o.return}}function g0(s){for(;Re!==null;){var o=Re;if(o===s){Re=null;break}var u=o.sibling;if(u!==null){u.return=o.return,Re=u;break}Re=o.return}}function y0(s){for(;Re!==null;){var o=Re;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{ph(4,o)}catch(K){Zt(o,u,K)}break;case 1:var m=o.stateNode;if(typeof m.componentDidMount=="function"){var x=o.return;try{m.componentDidMount()}catch(K){Zt(o,x,K)}}var T=o.return;try{$m(o)}catch(K){Zt(o,T,K)}break;case 5:var L=o.return;try{$m(o)}catch(K){Zt(o,L,K)}}}catch(K){Zt(o,o.return,K)}if(o===s){Re=null;break}var q=o.sibling;if(q!==null){q.return=o.return,Re=q;break}Re=o.return}}var zj=Math.ceil,mh=M.ReactCurrentDispatcher,Wm=M.ReactCurrentOwner,Dr=M.ReactCurrentBatchConfig,vt=0,En=null,cn=null,jn=0,xr=0,El=Li(0),yn=0,ru=null,ia=0,gh=0,Hm=0,su=null,or=null,Km=0,bl=1/0,ai=null,yh=!1,Gm=null,$i=null,vh=!1,Bi=null,xh=0,iu=0,Qm=null,wh=-1,_h=0;function Yn(){return(vt&6)!==0?Dt():wh!==-1?wh:wh=Dt()}function qi(s){return(s.mode&1)===0?1:(vt&2)!==0&&jn!==0?jn&-jn:Sj.transition!==null?(_h===0&&(_h=Ko()),_h):(s=ft,s!==0||(s=window.event,s=s===void 0?16:kc(s.type)),s)}function ns(s,o,u,m){if(50<iu)throw iu=0,Qm=null,Error(t(185));Ii(s,u,m),((vt&2)===0||s!==En)&&(s===En&&((vt&2)===0&&(gh|=u),yn===4&&Wi(s,jn)),ar(s,m),u===1&&vt===0&&(o.mode&1)===0&&(bl=Dt()+500,Qd&&Fi()))}function ar(s,o){var u=s.callbackNode;Qs(s,o);var m=Ho(s,s===En?jn:0);if(m===0)u!==null&&Ic(u),s.callbackNode=null,s.callbackPriority=0;else if(o=m&-m,s.callbackPriority!==o){if(u!=null&&Ic(u),o===1)s.tag===0?bj(x0.bind(null,s)):sw(x0.bind(null,s)),xj(function(){(vt&6)===0&&Fi()}),u=null;else{switch(Ai(m)){case 1:u=qo;break;case 4:u=Ni;break;case 16:u=Ir;break;case 536870912:u=_d;break;default:u=Ir}u=C0(u,v0.bind(null,s))}s.callbackPriority=o,s.callbackNode=u}}function v0(s,o){if(wh=-1,_h=0,(vt&6)!==0)throw Error(t(327));var u=s.callbackNode;if(Sl()&&s.callbackNode!==u)return null;var m=Ho(s,s===En?jn:0);if(m===0)return null;if((m&30)!==0||(m&s.expiredLanes)!==0||o)o=Eh(s,m);else{o=m;var x=vt;vt|=2;var T=_0();(En!==s||jn!==o)&&(ai=null,bl=Dt()+500,aa(s,o));do try{qj();break}catch(q){w0(s,q)}while(!0);fm(),mh.current=T,vt=x,cn!==null?o=0:(En=null,jn=0,o=yn)}if(o!==0){if(o===2&&(x=pr(s),x!==0&&(m=x,o=Ym(s,x))),o===1)throw u=ru,aa(s,0),Wi(s,m),ar(s,Dt()),u;if(o===6)Wi(s,m);else{if(x=s.current.alternate,(m&30)===0&&!$j(x)&&(o=Eh(s,m),o===2&&(T=pr(s),T!==0&&(m=T,o=Ym(s,T))),o===1))throw u=ru,aa(s,0),Wi(s,m),ar(s,Dt()),u;switch(s.finishedWork=x,s.finishedLanes=m,o){case 0:case 1:throw Error(t(345));case 2:la(s,or,ai);break;case 3:if(Wi(s,m),(m&130023424)===m&&(o=Km+500-Dt(),10<o)){if(Ho(s,0)!==0)break;if(x=s.suspendedLanes,(x&m)!==m){Yn(),s.pingedLanes|=s.suspendedLanes&x;break}s.timeoutHandle=nm(la.bind(null,s,or,ai),o);break}la(s,or,ai);break;case 4:if(Wi(s,m),(m&4194240)===m)break;for(o=s.eventTimes,x=-1;0<m;){var L=31-Kn(m);T=1<<L,L=o[L],L>x&&(x=L),m&=~T}if(m=x,m=Dt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*zj(m/1960))-m,10<m){s.timeoutHandle=nm(la.bind(null,s,or,ai),m);break}la(s,or,ai);break;case 5:la(s,or,ai);break;default:throw Error(t(329))}}}return ar(s,Dt()),s.callbackNode===u?v0.bind(null,s):null}function Ym(s,o){var u=su;return s.current.memoizedState.isDehydrated&&(aa(s,o).flags|=256),s=Eh(s,o),s!==2&&(o=or,or=u,o!==null&&Xm(o)),s}function Xm(s){or===null?or=s:or.push.apply(or,s)}function $j(s){for(var o=s;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var m=0;m<u.length;m++){var x=u[m],T=x.getSnapshot;x=x.value;try{if(!Xr(T(),x))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Wi(s,o){for(o&=~Hm,o&=~gh,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var u=31-Kn(o),m=1<<u;s[u]=-1,o&=~m}}function x0(s){if((vt&6)!==0)throw Error(t(327));Sl();var o=Ho(s,0);if((o&1)===0)return ar(s,Dt()),null;var u=Eh(s,o);if(s.tag!==0&&u===2){var m=pr(s);m!==0&&(o=m,u=Ym(s,m))}if(u===1)throw u=ru,aa(s,0),Wi(s,o),ar(s,Dt()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,la(s,or,ai),ar(s,Dt()),null}function Jm(s,o){var u=vt;vt|=1;try{return s(o)}finally{vt=u,vt===0&&(bl=Dt()+500,Qd&&Fi())}}function oa(s){Bi!==null&&Bi.tag===0&&(vt&6)===0&&Sl();var o=vt;vt|=1;var u=Dr.transition,m=ft;try{if(Dr.transition=null,ft=1,s)return s()}finally{ft=m,Dr.transition=u,vt=o,(vt&6)===0&&Fi()}}function Zm(){xr=El.current,Ft(El)}function aa(s,o){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,vj(u)),cn!==null)for(u=cn.return;u!==null;){var m=u;switch(lm(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Kd();break;case 3:xl(),Ft(rr),Ft(On),_m();break;case 5:xm(m);break;case 4:xl();break;case 13:Ft(Ht);break;case 19:Ft(Ht);break;case 10:pm(m.type._context);break;case 22:case 23:Zm()}u=u.return}if(En=s,cn=s=Hi(s.current,null),jn=xr=o,yn=0,ru=null,Hm=gh=ia=0,or=su=null,na!==null){for(o=0;o<na.length;o++)if(u=na[o],m=u.interleaved,m!==null){u.interleaved=null;var x=m.next,T=u.pending;if(T!==null){var L=T.next;T.next=x,m.next=L}u.pending=m}na=null}return s}function w0(s,o){do{var u=cn;try{if(fm(),ih.current=ch,oh){for(var m=Kt.memoizedState;m!==null;){var x=m.queue;x!==null&&(x.pending=null),m=m.next}oh=!1}if(sa=0,_n=gn=Kt=null,Xc=!1,Jc=0,Wm.current=null,u===null||u.return===null){yn=1,ru=o,cn=null;break}e:{var T=s,L=u.return,q=u,K=o;if(o=jn,q.flags|=32768,K!==null&&typeof K=="object"&&typeof K.then=="function"){var re=K,pe=q,me=pe.tag;if((pe.mode&1)===0&&(me===0||me===11||me===15)){var fe=pe.alternate;fe?(pe.updateQueue=fe.updateQueue,pe.memoizedState=fe.memoizedState,pe.lanes=fe.lanes):(pe.updateQueue=null,pe.memoizedState=null)}var je=Ww(L);if(je!==null){je.flags&=-257,Hw(je,L,q,T,o),je.mode&1&&qw(T,re,o),o=je,K=re;var Oe=o.updateQueue;if(Oe===null){var Le=new Set;Le.add(K),o.updateQueue=Le}else Oe.add(K);break e}else{if((o&1)===0){qw(T,re,o),eg();break e}K=Error(t(426))}}else if(Bt&&q.mode&1){var rn=Ww(L);if(rn!==null){(rn.flags&65536)===0&&(rn.flags|=256),Hw(rn,L,q,T,o),dm(wl(K,q));break e}}T=K=wl(K,q),yn!==4&&(yn=2),su===null?su=[T]:su.push(T),T=L;do{switch(T.tag){case 3:T.flags|=65536,o&=-o,T.lanes|=o;var Z=$w(T,K,o);mw(T,Z);break e;case 1:q=K;var Q=T.type,te=T.stateNode;if((T.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&($i===null||!$i.has(te)))){T.flags|=65536,o&=-o,T.lanes|=o;var ye=Bw(T,q,o);mw(T,ye);break e}}T=T.return}while(T!==null)}b0(u)}catch(Fe){o=Fe,cn===u&&u!==null&&(cn=u=u.return);continue}break}while(!0)}function _0(){var s=mh.current;return mh.current=ch,s===null?ch:s}function eg(){(yn===0||yn===3||yn===2)&&(yn=4),En===null||(ia&268435455)===0&&(gh&268435455)===0||Wi(En,jn)}function Eh(s,o){var u=vt;vt|=2;var m=_0();(En!==s||jn!==o)&&(ai=null,aa(s,o));do try{Bj();break}catch(x){w0(s,x)}while(!0);if(fm(),vt=u,mh.current=m,cn!==null)throw Error(t(261));return En=null,jn=0,yn}function Bj(){for(;cn!==null;)E0(cn)}function qj(){for(;cn!==null&&!xd();)E0(cn)}function E0(s){var o=T0(s.alternate,s,xr);s.memoizedProps=s.pendingProps,o===null?b0(s):cn=o,Wm.current=null}function b0(s){var o=s;do{var u=o.alternate;if(s=o.return,(o.flags&32768)===0){if(u=Lj(u,o,xr),u!==null){cn=u;return}}else{if(u=Mj(u,o),u!==null){u.flags&=32767,cn=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{yn=6,cn=null;return}}if(o=o.sibling,o!==null){cn=o;return}cn=o=s}while(o!==null);yn===0&&(yn=5)}function la(s,o,u){var m=ft,x=Dr.transition;try{Dr.transition=null,ft=1,Wj(s,o,u,m)}finally{Dr.transition=x,ft=m}return null}function Wj(s,o,u,m){do Sl();while(Bi!==null);if((vt&6)!==0)throw Error(t(327));u=s.finishedWork;var x=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var T=u.lanes|u.childLanes;if(At(s,T),s===En&&(cn=En=null,jn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||vh||(vh=!0,C0(Ir,function(){return Sl(),null})),T=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||T){T=Dr.transition,Dr.transition=null;var L=ft;ft=1;var q=vt;vt|=4,Wm.current=null,Vj(s,u),f0(u,s),dj(em),Ri=!!Zp,em=Zp=null,s.current=u,Uj(u),Mp(),vt=q,ft=L,Dr.transition=T}else s.current=u;if(vh&&(vh=!1,Bi=s,xh=x),T=s.pendingLanes,T===0&&($i=null),Ed(u.stateNode),ar(s,Dt()),o!==null)for(m=s.onRecoverableError,u=0;u<o.length;u++)x=o[u],m(x.value,{componentStack:x.stack,digest:x.digest});if(yh)throw yh=!1,s=Gm,Gm=null,s;return(xh&1)!==0&&s.tag!==0&&Sl(),T=s.pendingLanes,(T&1)!==0?s===Qm?iu++:(iu=0,Qm=s):iu=0,Fi(),null}function Sl(){if(Bi!==null){var s=Ai(xh),o=Dr.transition,u=ft;try{if(Dr.transition=null,ft=16>s?16:s,Bi===null)var m=!1;else{if(s=Bi,Bi=null,xh=0,(vt&6)!==0)throw Error(t(331));var x=vt;for(vt|=4,Re=s.current;Re!==null;){var T=Re,L=T.child;if((Re.flags&16)!==0){var q=T.deletions;if(q!==null){for(var K=0;K<q.length;K++){var re=q[K];for(Re=re;Re!==null;){var pe=Re;switch(pe.tag){case 0:case 11:case 15:nu(8,pe,T)}var me=pe.child;if(me!==null)me.return=pe,Re=me;else for(;Re!==null;){pe=Re;var fe=pe.sibling,je=pe.return;if(l0(pe),pe===re){Re=null;break}if(fe!==null){fe.return=je,Re=fe;break}Re=je}}}var Oe=T.alternate;if(Oe!==null){var Le=Oe.child;if(Le!==null){Oe.child=null;do{var rn=Le.sibling;Le.sibling=null,Le=rn}while(Le!==null)}}Re=T}}if((T.subtreeFlags&2064)!==0&&L!==null)L.return=T,Re=L;else e:for(;Re!==null;){if(T=Re,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:nu(9,T,T.return)}var Z=T.sibling;if(Z!==null){Z.return=T.return,Re=Z;break e}Re=T.return}}var Q=s.current;for(Re=Q;Re!==null;){L=Re;var te=L.child;if((L.subtreeFlags&2064)!==0&&te!==null)te.return=L,Re=te;else e:for(L=Q;Re!==null;){if(q=Re,(q.flags&2048)!==0)try{switch(q.tag){case 0:case 11:case 15:ph(9,q)}}catch(Fe){Zt(q,q.return,Fe)}if(q===L){Re=null;break e}var ye=q.sibling;if(ye!==null){ye.return=q.return,Re=ye;break e}Re=q.return}}if(vt=x,Fi(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(Wo,s)}catch{}m=!0}return m}finally{ft=u,Dr.transition=o}}return!1}function S0(s,o,u){o=wl(u,o),o=$w(s,o,1),s=Ui(s,o,1),o=Yn(),s!==null&&(Ii(s,1,o),ar(s,o))}function Zt(s,o,u){if(s.tag===3)S0(s,s,u);else for(;o!==null;){if(o.tag===3){S0(o,s,u);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&($i===null||!$i.has(m))){s=wl(u,s),s=Bw(o,s,1),o=Ui(o,s,1),s=Yn(),o!==null&&(Ii(o,1,s),ar(o,s));break}}o=o.return}}function Hj(s,o,u){var m=s.pingCache;m!==null&&m.delete(o),o=Yn(),s.pingedLanes|=s.suspendedLanes&u,En===s&&(jn&u)===u&&(yn===4||yn===3&&(jn&130023424)===jn&&500>Dt()-Km?aa(s,0):Hm|=u),ar(s,o)}function N0(s,o){o===0&&((s.mode&1)===0?o=1:(o=Ka,Ka<<=1,(Ka&130023424)===0&&(Ka=4194304)));var u=Yn();s=si(s,o),s!==null&&(Ii(s,o,u),ar(s,u))}function Kj(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),N0(s,u)}function Gj(s,o){var u=0;switch(s.tag){case 13:var m=s.stateNode,x=s.memoizedState;x!==null&&(u=x.retryLane);break;case 19:m=s.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(o),N0(s,u)}var T0;T0=function(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps||rr.current)ir=!0;else{if((s.lanes&u)===0&&(o.flags&128)===0)return ir=!1,Dj(s,o,u);ir=(s.flags&131072)!==0}else ir=!1,Bt&&(o.flags&1048576)!==0&&iw(o,Xd,o.index);switch(o.lanes=0,o.tag){case 2:var m=o.type;hh(s,o),s=o.pendingProps;var x=hl(o,On.current);vl(o,u),x=Sm(null,o,m,s,x,u);var T=Nm();return o.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,sr(m)?(T=!0,Gd(o)):T=!1,o.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,ym(o),x.updater=uh,o.stateNode=x,x._reactInternals=o,Pm(o,m,s,u),o=Dm(null,o,m,!0,T,u)):(o.tag=0,Bt&&T&&am(o),Qn(null,o,x,u),o=o.child),o;case 16:m=o.elementType;e:{switch(hh(s,o),s=o.pendingProps,x=m._init,m=x(m._payload),o.type=m,x=o.tag=Yj(m),s=Zr(m,s),x){case 0:o=Om(null,o,m,s,u);break e;case 1:o=Jw(null,o,m,s,u);break e;case 11:o=Kw(null,o,m,s,u);break e;case 14:o=Gw(null,o,m,Zr(m.type,s),u);break e}throw Error(t(306,m,""))}return o;case 0:return m=o.type,x=o.pendingProps,x=o.elementType===m?x:Zr(m,x),Om(s,o,m,x,u);case 1:return m=o.type,x=o.pendingProps,x=o.elementType===m?x:Zr(m,x),Jw(s,o,m,x,u);case 3:e:{if(Zw(o),s===null)throw Error(t(387));m=o.pendingProps,T=o.memoizedState,x=T.element,pw(s,o),rh(o,m,null,u);var L=o.memoizedState;if(m=L.element,T.isDehydrated)if(T={element:m,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},o.updateQueue.baseState=T,o.memoizedState=T,o.flags&256){x=wl(Error(t(423)),o),o=e0(s,o,m,u,x);break e}else if(m!==x){x=wl(Error(t(424)),o),o=e0(s,o,m,u,x);break e}else for(vr=Di(o.stateNode.containerInfo.firstChild),yr=o,Bt=!0,Jr=null,u=hw(o,null,m,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ml(),m===x){o=oi(s,o,u);break e}Qn(s,o,m,u)}o=o.child}return o;case 5:return yw(o),s===null&&um(o),m=o.type,x=o.pendingProps,T=s!==null?s.memoizedProps:null,L=x.children,tm(m,x)?L=null:T!==null&&tm(m,T)&&(o.flags|=32),Xw(s,o),Qn(s,o,L,u),o.child;case 6:return s===null&&um(o),null;case 13:return t0(s,o,u);case 4:return vm(o,o.stateNode.containerInfo),m=o.pendingProps,s===null?o.child=gl(o,null,m,u):Qn(s,o,m,u),o.child;case 11:return m=o.type,x=o.pendingProps,x=o.elementType===m?x:Zr(m,x),Kw(s,o,m,x,u);case 7:return Qn(s,o,o.pendingProps,u),o.child;case 8:return Qn(s,o,o.pendingProps.children,u),o.child;case 12:return Qn(s,o,o.pendingProps.children,u),o.child;case 10:e:{if(m=o.type._context,x=o.pendingProps,T=o.memoizedProps,L=x.value,Lt(eh,m._currentValue),m._currentValue=L,T!==null)if(Xr(T.value,L)){if(T.children===x.children&&!rr.current){o=oi(s,o,u);break e}}else for(T=o.child,T!==null&&(T.return=o);T!==null;){var q=T.dependencies;if(q!==null){L=T.child;for(var K=q.firstContext;K!==null;){if(K.context===m){if(T.tag===1){K=ii(-1,u&-u),K.tag=2;var re=T.updateQueue;if(re!==null){re=re.shared;var pe=re.pending;pe===null?K.next=K:(K.next=pe.next,pe.next=K),re.pending=K}}T.lanes|=u,K=T.alternate,K!==null&&(K.lanes|=u),mm(T.return,u,o),q.lanes|=u;break}K=K.next}}else if(T.tag===10)L=T.type===o.type?null:T.child;else if(T.tag===18){if(L=T.return,L===null)throw Error(t(341));L.lanes|=u,q=L.alternate,q!==null&&(q.lanes|=u),mm(L,u,o),L=T.sibling}else L=T.child;if(L!==null)L.return=T;else for(L=T;L!==null;){if(L===o){L=null;break}if(T=L.sibling,T!==null){T.return=L.return,L=T;break}L=L.return}T=L}Qn(s,o,x.children,u),o=o.child}return o;case 9:return x=o.type,m=o.pendingProps.children,vl(o,u),x=kr(x),m=m(x),o.flags|=1,Qn(s,o,m,u),o.child;case 14:return m=o.type,x=Zr(m,o.pendingProps),x=Zr(m.type,x),Gw(s,o,m,x,u);case 15:return Qw(s,o,o.type,o.pendingProps,u);case 17:return m=o.type,x=o.pendingProps,x=o.elementType===m?x:Zr(m,x),hh(s,o),o.tag=1,sr(m)?(s=!0,Gd(o)):s=!1,vl(o,u),Uw(o,m,x),Pm(o,m,x,u),Dm(null,o,m,!0,s,u);case 19:return r0(s,o,u);case 22:return Yw(s,o,u)}throw Error(t(156,o.tag))};function C0(s,o){return Wa(s,o)}function Qj(s,o,u,m){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(s,o,u,m){return new Qj(s,o,u,m)}function tg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Yj(s){if(typeof s=="function")return tg(s)?1:0;if(s!=null){if(s=s.$$typeof,s===U)return 11;if(s===H)return 14}return 2}function Hi(s,o){var u=s.alternate;return u===null?(u=Lr(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function bh(s,o,u,m,x,T){var L=2;if(m=s,typeof s=="function")tg(s)&&(L=1);else if(typeof s=="string")L=5;else e:switch(s){case A:return ca(u.children,x,T,o);case R:L=8,x|=8;break;case D:return s=Lr(12,u,o,x|2),s.elementType=D,s.lanes=T,s;case k:return s=Lr(13,u,o,x),s.elementType=k,s.lanes=T,s;case G:return s=Lr(19,u,o,x),s.elementType=G,s.lanes=T,s;case se:return Sh(u,x,T,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case O:L=10;break e;case V:L=9;break e;case U:L=11;break e;case H:L=14;break e;case Y:L=16,m=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return o=Lr(L,u,o,x),o.elementType=s,o.type=m,o.lanes=T,o}function ca(s,o,u,m){return s=Lr(7,s,m,o),s.lanes=u,s}function Sh(s,o,u,m){return s=Lr(22,s,m,o),s.elementType=se,s.lanes=u,s.stateNode={isHidden:!1},s}function ng(s,o,u){return s=Lr(6,s,null,o),s.lanes=u,s}function rg(s,o,u){return o=Lr(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function Xj(s,o,u,m,x){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ci(0),this.expirationTimes=Ci(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ci(0),this.identifierPrefix=m,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function sg(s,o,u,m,x,T,L,q,K){return s=new Xj(s,o,u,q,K),o===1?(o=1,T===!0&&(o|=8)):o=0,T=Lr(3,null,null,o),s.current=T,T.stateNode=s,T.memoizedState={element:m,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},ym(T),s}function Jj(s,o,u){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:m==null?null:""+m,children:s,containerInfo:o,implementation:u}}function I0(s){if(!s)return Mi;s=s._reactInternals;e:{if(qr(s)!==s||s.tag!==1)throw Error(t(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(sr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(sr(u))return nw(s,u,o)}return o}function j0(s,o,u,m,x,T,L,q,K){return s=sg(u,m,!0,s,x,T,L,q,K),s.context=I0(null),u=s.current,m=Yn(),x=qi(u),T=ii(m,x),T.callback=o??null,Ui(u,T,x),s.current.lanes=x,Ii(s,x,m),ar(s,m),s}function Nh(s,o,u,m){var x=o.current,T=Yn(),L=qi(x);return u=I0(u),o.context===null?o.context=u:o.pendingContext=u,o=ii(T,L),o.payload={element:s},m=m===void 0?null:m,m!==null&&(o.callback=m),s=Ui(x,o,L),s!==null&&(ns(s,x,L,T),nh(s,x,L)),L}function Th(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function A0(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function ig(s,o){A0(s,o),(s=s.alternate)&&A0(s,o)}function Zj(){return null}var P0=typeof reportError=="function"?reportError:function(s){console.error(s)};function og(s){this._internalRoot=s}Ch.prototype.render=og.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(t(409));Nh(s,o,null,null)},Ch.prototype.unmount=og.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;oa(function(){Nh(null,s,null,null)}),o[ei]=null}};function Ch(s){this._internalRoot=s}Ch.prototype.unstable_scheduleHydration=function(s){if(s){var o=Cd();s={blockedOn:null,target:s,priority:o};for(var u=0;u<ms.length&&o!==0&&o<ms[u].priority;u++);ms.splice(u,0,s),u===0&&Ad(s)}};function ag(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Ih(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function R0(){}function eA(s,o,u,m,x){if(x){if(typeof m=="function"){var T=m;m=function(){var re=Th(L);T.call(re)}}var L=j0(o,m,s,0,null,!1,!1,"",R0);return s._reactRootContainer=L,s[ei]=L.current,Bc(s.nodeType===8?s.parentNode:s),oa(),L}for(;x=s.lastChild;)s.removeChild(x);if(typeof m=="function"){var q=m;m=function(){var re=Th(K);q.call(re)}}var K=sg(s,0,!1,null,null,!1,!1,"",R0);return s._reactRootContainer=K,s[ei]=K.current,Bc(s.nodeType===8?s.parentNode:s),oa(function(){Nh(o,K,u,m)}),K}function jh(s,o,u,m,x){var T=u._reactRootContainer;if(T){var L=T;if(typeof x=="function"){var q=x;x=function(){var K=Th(L);q.call(K)}}Nh(o,L,s,x)}else L=eA(u,o,s,x,m);return Th(L)}Nd=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var u=Ti(o.pendingLanes);u!==0&&(ji(o,u|1),ar(o,Dt()),(vt&6)===0&&(bl=Dt()+500,Fi()))}break;case 13:oa(function(){var m=si(s,1);if(m!==null){var x=Yn();ns(m,s,1,x)}}),ig(s,1)}},Ga=function(s){if(s.tag===13){var o=si(s,134217728);if(o!==null){var u=Yn();ns(o,s,134217728,u)}ig(s,134217728)}},Td=function(s){if(s.tag===13){var o=qi(s),u=si(s,o);if(u!==null){var m=Yn();ns(u,s,o,m)}ig(s,o)}},Cd=function(){return ft},Id=function(s,o){var u=ft;try{return ft=s,o()}finally{ft=u}},yt=function(s,o,u){switch(o){case"input":if(Jt(s,u),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var m=u[o];if(m!==s&&m.form===s.form){var x=Hd(m);if(!x)throw Error(t(90));nt(m),Jt(m,x)}}}break;case"textarea":ke(s,u);break;case"select":o=u.value,o!=null&&He(s,!!u.multiple,o,!1)}},Uo=Jm,Sc=oa;var tA={usingClientEntryPoint:!1,Events:[Hc,ul,Hd,Cr,bc,Jm]},ou={findFiberByHostInstance:Jo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nA={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Cc(s),s===null?null:s.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||Zj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ah.isDisabled&&Ah.supportsFiber)try{Wo=Ah.inject(nA),fr=Ah}catch{}}return lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tA,lr.createPortal=function(s,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ag(o))throw Error(t(200));return Jj(s,o,null,u)},lr.createRoot=function(s,o){if(!ag(s))throw Error(t(299));var u=!1,m="",x=P0;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onRecoverableError!==void 0&&(x=o.onRecoverableError)),o=sg(s,1,!1,null,null,u,!1,m,x),s[ei]=o.current,Bc(s.nodeType===8?s.parentNode:s),new og(o)},lr.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Cc(o),s=s===null?null:s.stateNode,s},lr.flushSync=function(s){return oa(s)},lr.hydrate=function(s,o,u){if(!Ih(o))throw Error(t(200));return jh(null,s,o,!0,u)},lr.hydrateRoot=function(s,o,u){if(!ag(s))throw Error(t(405));var m=u!=null&&u.hydratedSources||null,x=!1,T="",L=P0;if(u!=null&&(u.unstable_strictMode===!0&&(x=!0),u.identifierPrefix!==void 0&&(T=u.identifierPrefix),u.onRecoverableError!==void 0&&(L=u.onRecoverableError)),o=j0(o,null,s,1,u??null,x,!1,T,L),s[ei]=o.current,Bc(s),m)for(s=0;s<m.length;s++)u=m[s],x=u._getVersion,x=x(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,x]:o.mutableSourceEagerHydrationData.push(u,x);return new Ch(o)},lr.render=function(s,o,u){if(!Ih(o))throw Error(t(200));return jh(null,s,o,!1,u)},lr.unmountComponentAtNode=function(s){if(!Ih(s))throw Error(t(40));return s._reactRootContainer?(oa(function(){jh(null,null,s,!1,function(){s._reactRootContainer=null,s[ei]=null})}),!0):!1},lr.unstable_batchedUpdates=Jm,lr.unstable_renderSubtreeIntoContainer=function(s,o,u,m){if(!Ih(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return jh(s,o,u,!1,m)},lr.version="18.3.1-next-f1338f8080-20240426",lr}var W0;function Vb(){if(W0)return fg.exports;W0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),fg.exports=EA(),fg.exports}var Oa=Vb();const Xy=Mb(Oa);function We(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function bA(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function Ub(...n){return e=>n.forEach(t=>bA(t,e))}function Ct(...n){return E.useCallback(Ub(...n),n)}function Ei(n,e=[]){let t=[];function r(a,c){const d=E.createContext(c),h=t.length;t=[...t,c];function p(y){const{scope:v,children:b,...S}=y,_=(v==null?void 0:v[n][h])||d,w=E.useMemo(()=>S,Object.values(S));return l.jsx(_.Provider,{value:w,children:b})}function g(y,v){const b=(v==null?void 0:v[n][h])||d,S=E.useContext(b);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${a}\``)}return p.displayName=a+"Provider",[p,g]}const i=()=>{const a=t.map(c=>E.createContext(c));return function(d){const h=(d==null?void 0:d[n])||a;return E.useMemo(()=>({[`__scope${n}`]:{...d,[n]:h}}),[d,h])}};return i.scopeName=n,[r,SA(i,...e)]}function SA(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const c=r.reduce((d,{useScope:h,scopeName:p})=>{const y=h(a)[`__scope${p}`];return{...d,...y}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var Gl=E.forwardRef((n,e)=>{const{children:t,...r}=n,i=E.Children.toArray(t),a=i.find(NA);if(a){const c=a.props.children,d=i.map(h=>h===a?E.Children.count(c)>1?E.Children.only(null):E.isValidElement(c)?c.props.children:null:h);return l.jsx(qg,{...r,ref:e,children:E.isValidElement(c)?E.cloneElement(c,void 0,d):null})}return l.jsx(qg,{...r,ref:e,children:t})});Gl.displayName="Slot";var qg=E.forwardRef((n,e)=>{const{children:t,...r}=n;if(E.isValidElement(t)){const i=CA(t);return E.cloneElement(t,{...TA(r,t.props),ref:e?Ub(e,i):i})}return E.Children.count(t)>1?E.Children.only(null):null});qg.displayName="SlotClone";var zb=({children:n})=>l.jsx(l.Fragment,{children:n});function NA(n){return E.isValidElement(n)&&n.type===zb}function TA(n,e){const t={...e};for(const r in e){const i=n[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?t[r]=(...d)=>{a(...d),i(...d)}:i&&(t[r]=i):r==="style"?t[r]={...i,...a}:r==="className"&&(t[r]=[i,a].filter(Boolean).join(" "))}return{...n,...t}}function CA(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Jy(n){const e=n+"CollectionProvider",[t,r]=Ei(e),[i,a]=t(e,{collectionRef:{current:null},itemMap:new Map}),c=b=>{const{scope:S,children:_}=b,w=Ee.useRef(null),P=Ee.useRef(new Map).current;return l.jsx(i,{scope:S,itemMap:P,collectionRef:w,children:_})};c.displayName=e;const d=n+"CollectionSlot",h=Ee.forwardRef((b,S)=>{const{scope:_,children:w}=b,P=a(d,_),I=Ct(S,P.collectionRef);return l.jsx(Gl,{ref:I,children:w})});h.displayName=d;const p=n+"CollectionItemSlot",g="data-radix-collection-item",y=Ee.forwardRef((b,S)=>{const{scope:_,children:w,...P}=b,I=Ee.useRef(null),C=Ct(S,I),M=a(p,_);return Ee.useEffect(()=>(M.itemMap.set(I,{ref:I,...P}),()=>void M.itemMap.delete(I))),l.jsx(Gl,{[g]:"",ref:C,children:w})});y.displayName=p;function v(b){const S=a(n+"CollectionConsumer",b);return Ee.useCallback(()=>{const w=S.collectionRef.current;if(!w)return[];const P=Array.from(w.querySelectorAll(`[${g}]`));return Array.from(S.itemMap.values()).sort((M,z)=>P.indexOf(M.ref.current)-P.indexOf(z.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:c,Slot:h,ItemSlot:y},v,r]}var IA=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],et=IA.reduce((n,e)=>{const t=E.forwardRef((r,i)=>{const{asChild:a,...c}=r,d=a?Gl:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(d,{...c,ref:i})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function Kf(n,e){n&&Oa.flushSync(()=>n.dispatchEvent(e))}function xn(n){const e=E.useRef(n);return E.useEffect(()=>{e.current=n}),E.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function Zy(n,e=globalThis==null?void 0:globalThis.document){const t=xn(n);E.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var jA="DismissableLayer",Wg="dismissableLayer.update",AA="dismissableLayer.pointerDownOutside",PA="dismissableLayer.focusOutside",H0,$b=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Bb=E.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:c,onDismiss:d,...h}=n,p=E.useContext($b),[g,y]=E.useState(null),v=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=E.useState({}),S=Ct(e,A=>y(A)),_=Array.from(p.layers),[w]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),P=_.indexOf(w),I=g?_.indexOf(g):-1,C=p.layersWithOutsidePointerEventsDisabled.size>0,M=I>=P,z=kA(A=>{const R=A.target,D=[...p.branches].some(O=>O.contains(R));!M||D||(i==null||i(A),c==null||c(A),A.defaultPrevented||d==null||d())},v),B=OA(A=>{const R=A.target;[...p.branches].some(O=>O.contains(R))||(a==null||a(A),c==null||c(A),A.defaultPrevented||d==null||d())},v);return Zy(A=>{I===p.layers.size-1&&(r==null||r(A),!A.defaultPrevented&&d&&(A.preventDefault(),d()))},v),E.useEffect(()=>{if(g)return t&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(H0=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),K0(),()=>{t&&p.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=H0)}},[g,v,t,p]),E.useEffect(()=>()=>{g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),K0())},[g,p]),E.useEffect(()=>{const A=()=>b({});return document.addEventListener(Wg,A),()=>document.removeEventListener(Wg,A)},[]),l.jsx(et.div,{...h,ref:S,style:{pointerEvents:C?M?"auto":"none":void 0,...n.style},onFocusCapture:We(n.onFocusCapture,B.onFocusCapture),onBlurCapture:We(n.onBlurCapture,B.onBlurCapture),onPointerDownCapture:We(n.onPointerDownCapture,z.onPointerDownCapture)})});Bb.displayName=jA;var RA="DismissableLayerBranch",qb=E.forwardRef((n,e)=>{const t=E.useContext($b),r=E.useRef(null),i=Ct(e,r);return E.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),l.jsx(et.div,{...n,ref:i})});qb.displayName=RA;function kA(n,e=globalThis==null?void 0:globalThis.document){const t=xn(n),r=E.useRef(!1),i=E.useRef(()=>{});return E.useEffect(()=>{const a=d=>{if(d.target&&!r.current){let h=function(){Wb(AA,t,p,{discrete:!0})};const p={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=h,e.addEventListener("click",i.current,{once:!0})):h()}else e.removeEventListener("click",i.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function OA(n,e=globalThis==null?void 0:globalThis.document){const t=xn(n),r=E.useRef(!1);return E.useEffect(()=>{const i=a=>{a.target&&!r.current&&Wb(PA,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function K0(){const n=new CustomEvent(Wg);document.dispatchEvent(n)}function Wb(n,e,t,{discrete:r}){const i=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?Kf(i,a):i.dispatchEvent(a)}var DA=Bb,LA=qb,an=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},MA="Portal",Hb=E.forwardRef((n,e)=>{var d;const{container:t,...r}=n,[i,a]=E.useState(!1);an(()=>a(!0),[]);const c=t||i&&((d=globalThis==null?void 0:globalThis.document)==null?void 0:d.body);return c?Xy.createPortal(l.jsx(et.div,{...r,ref:e}),c):null});Hb.displayName=MA;function FA(n,e){return E.useReducer((t,r)=>e[t][r]??t,n)}var ev=n=>{const{present:e,children:t}=n,r=VA(e),i=typeof t=="function"?t({present:r.isPresent}):E.Children.only(t),a=Ct(r.ref,UA(i));return typeof t=="function"||r.isPresent?E.cloneElement(i,{ref:a}):null};ev.displayName="Presence";function VA(n){const[e,t]=E.useState(),r=E.useRef({}),i=E.useRef(n),a=E.useRef("none"),c=n?"mounted":"unmounted",[d,h]=FA(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const p=Rh(r.current);a.current=d==="mounted"?p:"none"},[d]),an(()=>{const p=r.current,g=i.current;if(g!==n){const v=a.current,b=Rh(p);n?h("MOUNT"):b==="none"||(p==null?void 0:p.display)==="none"?h("UNMOUNT"):h(g&&v!==b?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,h]),an(()=>{if(e){const p=y=>{const b=Rh(r.current).includes(y.animationName);y.target===e&&b&&Oa.flushSync(()=>h("ANIMATION_END"))},g=y=>{y.target===e&&(a.current=Rh(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:E.useCallback(p=>{p&&(r.current=getComputedStyle(p)),t(p)},[])}}function Rh(n){return(n==null?void 0:n.animationName)||"none"}function UA(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Ql({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=zA({defaultProp:e,onChange:t}),a=n!==void 0,c=a?n:r,d=xn(t),h=E.useCallback(p=>{if(a){const y=typeof p=="function"?p(n):p;y!==n&&d(y)}else i(p)},[a,n,i,d]);return[c,h]}function zA({defaultProp:n,onChange:e}){const t=E.useState(n),[r]=t,i=E.useRef(r),a=xn(e);return E.useEffect(()=>{i.current!==r&&(a(r),i.current=r)},[r,i,a]),t}var $A="VisuallyHidden",Qu=E.forwardRef((n,e)=>l.jsx(et.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));Qu.displayName=$A;var BA=Qu,tv="ToastProvider",[nv,qA,WA]=Jy("Toast"),[Kb,W9]=Ei("Toast",[WA]),[HA,Gf]=Kb(tv),Gb=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:c}=n,[d,h]=E.useState(null),[p,g]=E.useState(0),y=E.useRef(!1),v=E.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${tv}\`. Expected non-empty \`string\`.`),l.jsx(nv.Provider,{scope:e,children:l.jsx(HA,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:a,toastCount:p,viewport:d,onViewportChange:h,onToastAdd:E.useCallback(()=>g(b=>b+1),[]),onToastRemove:E.useCallback(()=>g(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:y,isClosePausedRef:v,children:c})})};Gb.displayName=tv;var Qb="ToastViewport",KA=["F8"],Hg="toast.viewportPause",Kg="toast.viewportResume",Yb=E.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=KA,label:i="Notifications ({hotkey})",...a}=n,c=Gf(Qb,t),d=qA(t),h=E.useRef(null),p=E.useRef(null),g=E.useRef(null),y=E.useRef(null),v=Ct(e,y,c.onViewportChange),b=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=c.toastCount>0;E.useEffect(()=>{const w=P=>{var C;r.every(M=>P[M]||P.code===M)&&((C=y.current)==null||C.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),E.useEffect(()=>{const w=h.current,P=y.current;if(S&&w&&P){const I=()=>{if(!c.isClosePausedRef.current){const B=new CustomEvent(Hg);P.dispatchEvent(B),c.isClosePausedRef.current=!0}},C=()=>{if(c.isClosePausedRef.current){const B=new CustomEvent(Kg);P.dispatchEvent(B),c.isClosePausedRef.current=!1}},M=B=>{!w.contains(B.relatedTarget)&&C()},z=()=>{w.contains(document.activeElement)||C()};return w.addEventListener("focusin",I),w.addEventListener("focusout",M),w.addEventListener("pointermove",I),w.addEventListener("pointerleave",z),window.addEventListener("blur",I),window.addEventListener("focus",C),()=>{w.removeEventListener("focusin",I),w.removeEventListener("focusout",M),w.removeEventListener("pointermove",I),w.removeEventListener("pointerleave",z),window.removeEventListener("blur",I),window.removeEventListener("focus",C)}}},[S,c.isClosePausedRef]);const _=E.useCallback(({tabbingDirection:w})=>{const I=d().map(C=>{const M=C.ref.current,z=[M,...oP(M)];return w==="forwards"?z:z.reverse()});return(w==="forwards"?I.reverse():I).flat()},[d]);return E.useEffect(()=>{const w=y.current;if(w){const P=I=>{var z,B,A;const C=I.altKey||I.ctrlKey||I.metaKey;if(I.key==="Tab"&&!C){const R=document.activeElement,D=I.shiftKey;if(I.target===w&&D){(z=p.current)==null||z.focus();return}const U=_({tabbingDirection:D?"backwards":"forwards"}),k=U.findIndex(G=>G===R);gg(U.slice(k+1))?I.preventDefault():D?(B=p.current)==null||B.focus():(A=g.current)==null||A.focus()}};return w.addEventListener("keydown",P),()=>w.removeEventListener("keydown",P)}},[d,_]),l.jsxs(LA,{ref:h,role:"region","aria-label":i.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&l.jsx(Gg,{ref:p,onFocusFromOutsideViewport:()=>{const w=_({tabbingDirection:"forwards"});gg(w)}}),l.jsx(nv.Slot,{scope:t,children:l.jsx(et.ol,{tabIndex:-1,...a,ref:v})}),S&&l.jsx(Gg,{ref:g,onFocusFromOutsideViewport:()=>{const w=_({tabbingDirection:"backwards"});gg(w)}})]})});Yb.displayName=Qb;var Xb="ToastFocusProxy",Gg=E.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,a=Gf(Xb,t);return l.jsx(Qu,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:c=>{var p;const d=c.relatedTarget;!((p=a.viewport)!=null&&p.contains(d))&&r()}})});Gg.displayName=Xb;var Qf="Toast",GA="toast.swipeStart",QA="toast.swipeMove",YA="toast.swipeCancel",XA="toast.swipeEnd",Jb=E.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:a,...c}=n,[d=!0,h]=Ql({prop:r,defaultProp:i,onChange:a});return l.jsx(ev,{present:t||d,children:l.jsx(eP,{open:d,...c,ref:e,onClose:()=>h(!1),onPause:xn(n.onPause),onResume:xn(n.onResume),onSwipeStart:We(n.onSwipeStart,p=>{p.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:We(n.onSwipeMove,p=>{const{x:g,y}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","move"),p.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${g}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${y}px`)}),onSwipeCancel:We(n.onSwipeCancel,p=>{p.currentTarget.setAttribute("data-swipe","cancel"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:We(n.onSwipeEnd,p=>{const{x:g,y}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","end"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${g}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${y}px`),h(!1)})})})});Jb.displayName=Qf;var[JA,ZA]=Kb(Qf,{onClose(){}}),eP=E.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:a,onClose:c,onEscapeKeyDown:d,onPause:h,onResume:p,onSwipeStart:g,onSwipeMove:y,onSwipeCancel:v,onSwipeEnd:b,...S}=n,_=Gf(Qf,t),[w,P]=E.useState(null),I=Ct(e,G=>P(G)),C=E.useRef(null),M=E.useRef(null),z=i||_.duration,B=E.useRef(0),A=E.useRef(z),R=E.useRef(0),{onToastAdd:D,onToastRemove:O}=_,V=xn(()=>{var H;(w==null?void 0:w.contains(document.activeElement))&&((H=_.viewport)==null||H.focus()),c()}),U=E.useCallback(G=>{!G||G===1/0||(window.clearTimeout(R.current),B.current=new Date().getTime(),R.current=window.setTimeout(V,G))},[V]);E.useEffect(()=>{const G=_.viewport;if(G){const H=()=>{U(A.current),p==null||p()},Y=()=>{const se=new Date().getTime()-B.current;A.current=A.current-se,window.clearTimeout(R.current),h==null||h()};return G.addEventListener(Hg,Y),G.addEventListener(Kg,H),()=>{G.removeEventListener(Hg,Y),G.removeEventListener(Kg,H)}}},[_.viewport,z,h,p,U]),E.useEffect(()=>{a&&!_.isClosePausedRef.current&&U(z)},[a,z,_.isClosePausedRef,U]),E.useEffect(()=>(D(),()=>O()),[D,O]);const k=E.useMemo(()=>w?i1(w):null,[w]);return _.viewport?l.jsxs(l.Fragment,{children:[k&&l.jsx(tP,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:k}),l.jsx(JA,{scope:t,onClose:V,children:Oa.createPortal(l.jsx(nv.ItemSlot,{scope:t,children:l.jsx(DA,{asChild:!0,onEscapeKeyDown:We(d,()=>{_.isFocusedToastEscapeKeyDownRef.current||V(),_.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(et.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":_.swipeDirection,...S,ref:I,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:We(n.onKeyDown,G=>{G.key==="Escape"&&(d==null||d(G.nativeEvent),G.nativeEvent.defaultPrevented||(_.isFocusedToastEscapeKeyDownRef.current=!0,V()))}),onPointerDown:We(n.onPointerDown,G=>{G.button===0&&(C.current={x:G.clientX,y:G.clientY})}),onPointerMove:We(n.onPointerMove,G=>{if(!C.current)return;const H=G.clientX-C.current.x,Y=G.clientY-C.current.y,se=!!M.current,W=["left","right"].includes(_.swipeDirection),ee=["left","up"].includes(_.swipeDirection)?Math.min:Math.max,ae=W?ee(0,H):0,$=W?0:ee(0,Y),X=G.pointerType==="touch"?10:2,oe={x:ae,y:$},ue={originalEvent:G,delta:oe};se?(M.current=oe,kh(QA,y,ue,{discrete:!1})):G0(oe,_.swipeDirection,X)?(M.current=oe,kh(GA,g,ue,{discrete:!1}),G.target.setPointerCapture(G.pointerId)):(Math.abs(H)>X||Math.abs(Y)>X)&&(C.current=null)}),onPointerUp:We(n.onPointerUp,G=>{const H=M.current,Y=G.target;if(Y.hasPointerCapture(G.pointerId)&&Y.releasePointerCapture(G.pointerId),M.current=null,C.current=null,H){const se=G.currentTarget,W={originalEvent:G,delta:H};G0(H,_.swipeDirection,_.swipeThreshold)?kh(XA,b,W,{discrete:!0}):kh(YA,v,W,{discrete:!0}),se.addEventListener("click",ee=>ee.preventDefault(),{once:!0})}})})})}),_.viewport)})]}):null}),tP=n=>{const{__scopeToast:e,children:t,...r}=n,i=Gf(Qf,e),[a,c]=E.useState(!1),[d,h]=E.useState(!1);return sP(()=>c(!0)),E.useEffect(()=>{const p=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(p)},[]),d?null:l.jsx(Hb,{asChild:!0,children:l.jsx(Qu,{...r,children:a&&l.jsxs(l.Fragment,{children:[i.label," ",t]})})})},nP="ToastTitle",Zb=E.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return l.jsx(et.div,{...r,ref:e})});Zb.displayName=nP;var rP="ToastDescription",e1=E.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return l.jsx(et.div,{...r,ref:e})});e1.displayName=rP;var t1="ToastAction",n1=E.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?l.jsx(s1,{altText:t,asChild:!0,children:l.jsx(rv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${t1}\`. Expected non-empty \`string\`.`),null)});n1.displayName=t1;var r1="ToastClose",rv=E.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=ZA(r1,t);return l.jsx(s1,{asChild:!0,children:l.jsx(et.button,{type:"button",...r,ref:e,onClick:We(n.onClick,i.onClose)})})});rv.displayName=r1;var s1=E.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return l.jsx(et.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function i1(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),iP(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const c=r.dataset.radixToastAnnounceAlt;c&&e.push(c)}else e.push(...i1(r))}}),e}function kh(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,a=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?Kf(i,a):i.dispatchEvent(a)}var G0=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),a=r>i;return e==="left"||e==="right"?a&&r>t:!a&&i>t};function sP(n=()=>{}){const e=xn(n);an(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function iP(n){return n.nodeType===n.ELEMENT_NODE}function oP(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function gg(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var aP=Gb,o1=Yb,a1=Jb,l1=Zb,c1=e1,u1=n1,d1=rv;function h1(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=h1(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function f1(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=h1(n))&&(r&&(r+=" "),r+=e);return r}const Q0=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,Y0=f1,Yu=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return Y0(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:a}=e,c=Object.keys(i).map(p=>{const g=t==null?void 0:t[p],y=a==null?void 0:a[p];if(g===null)return null;const v=Q0(g)||Q0(y);return i[p][v]}),d=t&&Object.entries(t).reduce((p,g)=>{let[y,v]=g;return v===void 0||(p[y]=v),p},{}),h=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((p,g)=>{let{class:y,className:v,...b}=g;return Object.entries(b).every(S=>{let[_,w]=S;return Array.isArray(w)?w.includes({...a,...d}[_]):{...a,...d}[_]===w})?[...p,y,v]:p},[]);return Y0(n,c,h,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),p1=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=E.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:c,...d},h)=>E.createElement("svg",{ref:h,...cP,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:p1("lucide",i),...d},[...c.map(([p,g])=>E.createElement(p,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=(n,e)=>{const t=E.forwardRef(({className:r,...i},a)=>E.createElement(uP,{ref:a,iconNode:e,className:p1(`lucide-${lP(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=Ze("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=Ze("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=Ze("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=Ze("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=Ze("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=Ze("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=Ze("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=Ze("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=Ze("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=Ze("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=Ze("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=Ze("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=Ze("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=Ze("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=Ze("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=Ze("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=Ze("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=Ze("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=Ze("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=Ze("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=Ze("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=Ze("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=Ze("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=Ze("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=Ze("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=Ze("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=Ze("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=Ze("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=Ze("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=Ze("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wP=Ze("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=Ze("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=Ze("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=Ze("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=Ze("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=Ze("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=Ze("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=Ze("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=Ze("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=Ze("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=Ze("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=Ze("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=Ze("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=Ze("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=Ze("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=Ze("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=Ze("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),iv="-",NP=n=>{const e=CP(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:c=>{const d=c.split(iv);return d[0]===""&&d.length!==1&&d.shift(),w1(d,e)||TP(c)},getConflictingClassGroupIds:(c,d)=>{const h=t[c]||[];return d&&r[c]?[...h,...r[c]]:h}}},w1=(n,e)=>{var c;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?w1(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=n.join(iv);return(c=e.validators.find(({validator:d})=>d(a)))==null?void 0:c.classGroupId},Z0=/^\[(.+)\]$/,TP=n=>{if(Z0.test(n)){const e=Z0.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},CP=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return jP(Object.entries(n.classGroups),t).forEach(([a,c])=>{Zg(c,r,a,e)}),r},Zg=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const a=i===""?e:e_(e,i);a.classGroupId=t;return}if(typeof i=="function"){if(IP(i)){Zg(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([a,c])=>{Zg(c,e_(e,a),t,r)})})},e_=(n,e)=>{let t=n;return e.split(iv).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},IP=n=>n.isThemeGetter,jP=(n,e)=>e?n.map(([t,r])=>{const i=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([c,d])=>[e+c,d])):a);return[t,i]}):n,AP=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(a,c)=>{t.set(a,c),e++,e>n&&(e=0,r=t,t=new Map)};return{get(a){let c=t.get(a);if(c!==void 0)return c;if((c=r.get(a))!==void 0)return i(a,c),c},set(a,c){t.has(a)?t.set(a,c):i(a,c)}}},_1="!",PP=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,i=e[0],a=e.length,c=d=>{const h=[];let p=0,g=0,y;for(let w=0;w<d.length;w++){let P=d[w];if(p===0){if(P===i&&(r||d.slice(w,w+a)===e)){h.push(d.slice(g,w)),g=w+a;continue}if(P==="/"){y=w;continue}}P==="["?p++:P==="]"&&p--}const v=h.length===0?d:d.substring(g),b=v.startsWith(_1),S=b?v.substring(1):v,_=y&&y>g?y-g:void 0;return{modifiers:h,hasImportantModifier:b,baseClassName:S,maybePostfixModifierPosition:_}};return t?d=>t({className:d,parseClassName:c}):c},RP=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},kP=n=>({cache:AP(n.cacheSize),parseClassName:PP(n),...NP(n)}),OP=/\s+/,DP=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i}=e,a=[],c=n.trim().split(OP);let d="";for(let h=c.length-1;h>=0;h-=1){const p=c[h],{modifiers:g,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:b}=t(p);let S=!!b,_=r(S?v.substring(0,b):v);if(!_){if(!S){d=p+(d.length>0?" "+d:d);continue}if(_=r(v),!_){d=p+(d.length>0?" "+d:d);continue}S=!1}const w=RP(g).join(":"),P=y?w+_1:w,I=P+_;if(a.includes(I))continue;a.push(I);const C=i(_,S);for(let M=0;M<C.length;++M){const z=C[M];a.push(P+z)}d=p+(d.length>0?" "+d:d)}return d};function LP(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=E1(e))&&(r&&(r+=" "),r+=t);return r}const E1=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=E1(n[r]))&&(t&&(t+=" "),t+=e);return t};function MP(n,...e){let t,r,i,a=c;function c(h){const p=e.reduce((g,y)=>y(g),n());return t=kP(p),r=t.cache.get,i=t.cache.set,a=d,d(h)}function d(h){const p=r(h);if(p)return p;const g=DP(h,t);return i(h,g),g}return function(){return a(LP.apply(null,arguments))}}const Vt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},b1=/^\[(?:([a-z-]+):)?(.+)\]$/i,FP=/^\d+\/\d+$/,VP=new Set(["px","full","screen"]),UP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,zP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,$P=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,BP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,qP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,li=n=>kl(n)||VP.has(n)||FP.test(n),Gi=n=>uc(n,"length",JP),kl=n=>!!n&&!Number.isNaN(Number(n)),yg=n=>uc(n,"number",kl),lu=n=>!!n&&Number.isInteger(Number(n)),WP=n=>n.endsWith("%")&&kl(n.slice(0,-1)),it=n=>b1.test(n),Qi=n=>UP.test(n),HP=new Set(["length","size","percentage"]),KP=n=>uc(n,HP,S1),GP=n=>uc(n,"position",S1),QP=new Set(["image","url"]),YP=n=>uc(n,QP,eR),XP=n=>uc(n,"",ZP),cu=()=>!0,uc=(n,e,t)=>{const r=b1.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},JP=n=>zP.test(n)&&!$P.test(n),S1=()=>!1,ZP=n=>BP.test(n),eR=n=>qP.test(n),tR=()=>{const n=Vt("colors"),e=Vt("spacing"),t=Vt("blur"),r=Vt("brightness"),i=Vt("borderColor"),a=Vt("borderRadius"),c=Vt("borderSpacing"),d=Vt("borderWidth"),h=Vt("contrast"),p=Vt("grayscale"),g=Vt("hueRotate"),y=Vt("invert"),v=Vt("gap"),b=Vt("gradientColorStops"),S=Vt("gradientColorStopPositions"),_=Vt("inset"),w=Vt("margin"),P=Vt("opacity"),I=Vt("padding"),C=Vt("saturate"),M=Vt("scale"),z=Vt("sepia"),B=Vt("skew"),A=Vt("space"),R=Vt("translate"),D=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto",it,e],U=()=>[it,e],k=()=>["",li,Gi],G=()=>["auto",kl,it],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>["start","end","center","between","around","evenly","stretch"],ee=()=>["","0",it],ae=()=>["auto","avoid","all","avoid-page","page","left","right","column"],$=()=>[kl,it];return{cacheSize:500,separator:":",theme:{colors:[cu],spacing:[li,Gi],blur:["none","",Qi,it],brightness:$(),borderColor:[n],borderRadius:["none","","full",Qi,it],borderSpacing:U(),borderWidth:k(),contrast:$(),grayscale:ee(),hueRotate:$(),invert:ee(),gap:U(),gradientColorStops:[n],gradientColorStopPositions:[WP,Gi],inset:V(),margin:V(),opacity:$(),padding:U(),saturate:$(),scale:$(),sepia:ee(),skew:$(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",it]}],container:["container"],columns:[{columns:[Qi]}],"break-after":[{"break-after":ae()}],"break-before":[{"break-before":ae()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),it]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",lu,it]}],basis:[{basis:V()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",it]}],grow:[{grow:ee()}],shrink:[{shrink:ee()}],order:[{order:["first","last","none",lu,it]}],"grid-cols":[{"grid-cols":[cu]}],"col-start-end":[{col:["auto",{span:["full",lu,it]},it]}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":[cu]}],"row-start-end":[{row:["auto",{span:[lu,it]},it]}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",it]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",it]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...W()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...W(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...W(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[I]}],px:[{px:[I]}],py:[{py:[I]}],ps:[{ps:[I]}],pe:[{pe:[I]}],pt:[{pt:[I]}],pr:[{pr:[I]}],pb:[{pb:[I]}],pl:[{pl:[I]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",it,e]}],"min-w":[{"min-w":[it,e,"min","max","fit"]}],"max-w":[{"max-w":[it,e,"none","full","min","max","fit","prose",{screen:[Qi]},Qi]}],h:[{h:[it,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[it,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[it,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[it,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Qi,Gi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",yg]}],"font-family":[{font:[cu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",it]}],"line-clamp":[{"line-clamp":["none",kl,yg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",li,it]}],"list-image":[{"list-image":["none",it]}],"list-style-type":[{list:["none","disc","decimal",it]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[P]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[P]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",li,Gi]}],"underline-offset":[{"underline-offset":["auto",li,it]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",it]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",it]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[P]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),GP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",KP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},YP]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[d]}],"border-w-x":[{"border-x":[d]}],"border-w-y":[{"border-y":[d]}],"border-w-s":[{"border-s":[d]}],"border-w-e":[{"border-e":[d]}],"border-w-t":[{"border-t":[d]}],"border-w-r":[{"border-r":[d]}],"border-w-b":[{"border-b":[d]}],"border-w-l":[{"border-l":[d]}],"border-opacity":[{"border-opacity":[P]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[d]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[d]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[P]}],"divide-style":[{divide:Y()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[li,it]}],"outline-w":[{outline:[li,Gi]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[P]}],"ring-offset-w":[{"ring-offset":[li,Gi]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Qi,XP]}],"shadow-color":[{shadow:[cu]}],opacity:[{opacity:[P]}],"mix-blend":[{"mix-blend":[...se(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":se()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",Qi,it]}],grayscale:[{grayscale:[p]}],"hue-rotate":[{"hue-rotate":[g]}],invert:[{invert:[y]}],saturate:[{saturate:[C]}],sepia:[{sepia:[z]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[p]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[g]}],"backdrop-invert":[{"backdrop-invert":[y]}],"backdrop-opacity":[{"backdrop-opacity":[P]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[z]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",it]}],duration:[{duration:$()}],ease:[{ease:["linear","in","out","in-out",it]}],delay:[{delay:$()}],animate:[{animate:["none","spin","ping","pulse","bounce",it]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[M]}],"scale-x":[{"scale-x":[M]}],"scale-y":[{"scale-y":[M]}],rotate:[{rotate:[lu,it]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[B]}],"skew-y":[{"skew-y":[B]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",it]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",it]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",it]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[li,Gi,yg]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},nR=MP(tR);function at(...n){return nR(f1(n))}function rR(n){if(!n||typeof n!="string")return null;const e=n.trim();try{const t=e.match(/https?:\/\/(?:drive\.google\.com)\/(?:file\/d\/([a-zA-Z0-9_-]+)\/view|open\?id=([a-zA-Z0-9_-]+))/i);if(t){const r=t[1]||t[2];if(r)return`https://drive.google.com/uc?export=view&id=${r}`}if(/dropbox\.com\//i.test(e)){if(e.includes("dl=0"))return e.replace("dl=0","dl=1");if(!e.includes("dl="))return e+"?dl=1"}return e}catch{return e}}const sR=aP,N1=E.forwardRef(({className:n,...e},t)=>l.jsx(o1,{ref:t,className:at("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));N1.displayName=o1.displayName;const iR=Yu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),T1=E.forwardRef(({className:n,variant:e,...t},r)=>l.jsx(a1,{ref:r,className:at(iR({variant:e}),n),...t}));T1.displayName=a1.displayName;const oR=E.forwardRef(({className:n,...e},t)=>l.jsx(u1,{ref:t,className:at("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));oR.displayName=u1.displayName;const C1=E.forwardRef(({className:n,...e},t)=>l.jsx(d1,{ref:t,className:at("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:l.jsx(Cu,{className:"h-4 w-4"})}));C1.displayName=d1.displayName;const I1=E.forwardRef(({className:n,...e},t)=>l.jsx(l1,{ref:t,className:at("text-sm font-semibold",n),...e}));I1.displayName=l1.displayName;const j1=E.forwardRef(({className:n,...e},t)=>l.jsx(c1,{ref:t,className:at("text-sm opacity-90",n),...e}));j1.displayName=c1.displayName;function aR(){const{toasts:n}=xA();return l.jsxs(sR,{children:[n.map(function({id:e,title:t,description:r,action:i,...a}){return l.jsxs(T1,{...a,children:[l.jsxs("div",{className:"grid gap-1",children:[t&&l.jsx(I1,{children:t}),r&&l.jsx(j1,{children:r})]}),i,l.jsx(C1,{})]},e)}),l.jsx(N1,{})]})}var Oh={},t_;function lR(){if(t_)return Oh;t_=1;var n=Vb();return Oh.createRoot=n.createRoot,Oh.hydrateRoot=n.hydrateRoot,Oh}var cR=lR(),n_=["light","dark"],uR="(prefers-color-scheme: dark)",dR=E.createContext(void 0),hR={setTheme:n=>{},themes:[]},fR=()=>{var n;return(n=E.useContext(dR))!=null?n:hR};E.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:a,value:c,attrs:d,nonce:h})=>{let p=a==="system",g=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${d.map(S=>`'${S}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,y=i?n_.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",v=(S,_=!1,w=!0)=>{let P=c?c[S]:S,I=_?S+"|| ''":`'${P}'`,C="";return i&&w&&!_&&n_.includes(S)&&(C+=`d.style.colorScheme = '${S}';`),t==="class"?_||P?C+=`c.add(${I})`:C+="null":P&&(C+=`d[s](n,${I})`),C},b=n?`!function(){${g}${v(n)}}()`:r?`!function(){try{${g}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${p})){var t='${uR}',m=window.matchMedia(t);if(m.media!==t||m.matches){${v("dark")}}else{${v("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${v(c?"x[e]":"e",!0)}}${p?"":"else{"+v(a,!1,!1)+"}"}${y}}catch(e){}}()`:`!function(){try{${g}var e=localStorage.getItem('${e}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${v(c?"x[e]":"e",!0)}}else{${v(a,!1,!1)};}${y}}catch(t){}}();`;return E.createElement("script",{nonce:h,dangerouslySetInnerHTML:{__html:b}})});var pR=n=>{switch(n){case"success":return yR;case"info":return xR;case"warning":return vR;case"error":return wR;default:return null}},mR=Array(12).fill(0),gR=({visible:n})=>Ee.createElement("div",{className:"sonner-loading-wrapper","data-visible":n},Ee.createElement("div",{className:"sonner-spinner"},mR.map((e,t)=>Ee.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),yR=Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ee.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),vR=Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ee.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),xR=Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ee.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),wR=Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ee.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),_R=()=>{let[n,e]=Ee.useState(document.hidden);return Ee.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},ey=1,ER=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...i}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:ey++,c=this.toasts.find(h=>h.id===a),d=e.dismissible===void 0?!0:e.dismissible;return c?this.toasts=this.toasts.map(h=>h.id===a?(this.publish({...h,...e,id:a,title:r}),{...h,...e,id:a,dismissible:d,title:r}):h):this.addToast({title:r,...i,dismissible:d,id:a}),a},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let i=e instanceof Promise?e:e(),a=r!==void 0;return i.then(async c=>{if(SR(c)&&!c.ok){a=!1;let d=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,h=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:d,description:h})}else if(t.success!==void 0){a=!1;let d=typeof t.success=="function"?await t.success(c):t.success,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(t.error!==void 0){a=!1;let d=typeof t.error=="function"?await t.error(c):t.error,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),r},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||ey++;return this.create({jsx:e(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},wr=new ER,bR=(n,e)=>{let t=(e==null?void 0:e.id)||ey++;return wr.addToast({title:n,...e,id:t}),t},SR=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",NR=bR,TR=()=>wr.toasts;Object.assign(NR,{success:wr.success,info:wr.info,warning:wr.warning,error:wr.error,custom:wr.custom,message:wr.message,promise:wr.promise,dismiss:wr.dismiss,loading:wr.loading},{getHistory:TR});function CR(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}CR(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Dh(n){return n.label!==void 0}var IR=3,jR="32px",AR=4e3,PR=356,RR=14,kR=20,OR=200;function DR(...n){return n.filter(Boolean).join(" ")}var LR=n=>{var e,t,r,i,a,c,d,h,p,g;let{invert:y,toast:v,unstyled:b,interacting:S,setHeights:_,visibleToasts:w,heights:P,index:I,toasts:C,expanded:M,removeToast:z,defaultRichColors:B,closeButton:A,style:R,cancelButtonStyle:D,actionButtonStyle:O,className:V="",descriptionClassName:U="",duration:k,position:G,gap:H,loadingIcon:Y,expandByDefault:se,classNames:W,icons:ee,closeButtonAriaLabel:ae="Close toast",pauseWhenPageIsHidden:$,cn:X}=n,[oe,ue]=Ee.useState(!1),[Se,Ne]=Ee.useState(!1),[ge,we]=Ee.useState(!1),[Ie,Me]=Ee.useState(!1),[Xe,nt]=Ee.useState(0),[bt,kt]=Ee.useState(0),Ot=Ee.useRef(null),lt=Ee.useRef(null),Jt=I===0,be=I+1<=w,Ve=v.type,Te=v.dismissible!==!1,He=v.className||"",he=v.descriptionClassName||"",pt=Ee.useMemo(()=>P.findIndex(Ke=>Ke.toastId===v.id)||0,[P,v.id]),ke=Ee.useMemo(()=>{var Ke;return(Ke=v.closeButton)!=null?Ke:A},[v.closeButton,A]),jt=Ee.useMemo(()=>v.duration||k||AR,[v.duration,k]),It=Ee.useRef(0),St=Ee.useRef(0),Wn=Ee.useRef(0),Hn=Ee.useRef(null),[Zn,Tr]=G.split("-"),hr=Ee.useMemo(()=>P.reduce((Ke,xt,yt)=>yt>=pt?Ke:Ke+xt.height,0),[P,pt]),Ur=_R(),qt=v.invert||y,Ks=Ve==="loading";St.current=Ee.useMemo(()=>pt*H+hr,[pt,hr]),Ee.useEffect(()=>{ue(!0)},[]),Ee.useLayoutEffect(()=>{if(!oe)return;let Ke=lt.current,xt=Ke.style.height;Ke.style.height="auto";let yt=Ke.getBoundingClientRect().height;Ke.style.height=xt,kt(yt),_(Wt=>Wt.find(tn=>tn.toastId===v.id)?Wt.map(tn=>tn.toastId===v.id?{...tn,height:yt}:tn):[{toastId:v.id,height:yt,position:v.position},...Wt])},[oe,v.title,v.description,_,v.id]);let er=Ee.useCallback(()=>{Ne(!0),nt(St.current),_(Ke=>Ke.filter(xt=>xt.toastId!==v.id)),setTimeout(()=>{z(v)},OR)},[v,z,_,St]);Ee.useEffect(()=>{if(v.promise&&Ve==="loading"||v.duration===1/0||v.type==="loading")return;let Ke,xt=jt;return M||S||$&&Ur?(()=>{if(Wn.current<It.current){let yt=new Date().getTime()-It.current;xt=xt-yt}Wn.current=new Date().getTime()})():xt!==1/0&&(It.current=new Date().getTime(),Ke=setTimeout(()=>{var yt;(yt=v.onAutoClose)==null||yt.call(v,v),er()},xt)),()=>clearTimeout(Ke)},[M,S,se,v,jt,er,v.promise,Ve,$,Ur]),Ee.useEffect(()=>{let Ke=lt.current;if(Ke){let xt=Ke.getBoundingClientRect().height;return kt(xt),_(yt=>[{toastId:v.id,height:xt,position:v.position},...yt]),()=>_(yt=>yt.filter(Wt=>Wt.toastId!==v.id))}},[_,v.id]),Ee.useEffect(()=>{v.delete&&er()},[er,v.delete]);function Vo(){return ee!=null&&ee.loading?Ee.createElement("div",{className:"sonner-loader","data-visible":Ve==="loading"},ee.loading):Y?Ee.createElement("div",{className:"sonner-loader","data-visible":Ve==="loading"},Y):Ee.createElement(gR,{visible:Ve==="loading"})}return Ee.createElement("li",{"aria-live":v.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:lt,className:X(V,He,W==null?void 0:W.toast,(e=v==null?void 0:v.classNames)==null?void 0:e.toast,W==null?void 0:W.default,W==null?void 0:W[Ve],(t=v==null?void 0:v.classNames)==null?void 0:t[Ve]),"data-sonner-toast":"","data-rich-colors":(r=v.richColors)!=null?r:B,"data-styled":!(v.jsx||v.unstyled||b),"data-mounted":oe,"data-promise":!!v.promise,"data-removed":Se,"data-visible":be,"data-y-position":Zn,"data-x-position":Tr,"data-index":I,"data-front":Jt,"data-swiping":ge,"data-dismissible":Te,"data-type":Ve,"data-invert":qt,"data-swipe-out":Ie,"data-expanded":!!(M||se&&oe),style:{"--index":I,"--toasts-before":I,"--z-index":C.length-I,"--offset":`${Se?Xe:St.current}px`,"--initial-height":se?"auto":`${bt}px`,...R,...v.style},onPointerDown:Ke=>{Ks||!Te||(Ot.current=new Date,nt(St.current),Ke.target.setPointerCapture(Ke.pointerId),Ke.target.tagName!=="BUTTON"&&(we(!0),Hn.current={x:Ke.clientX,y:Ke.clientY}))},onPointerUp:()=>{var Ke,xt,yt,Wt;if(Ie||!Te)return;Hn.current=null;let tn=Number(((Ke=lt.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount").replace("px",""))||0),zr=new Date().getTime()-((xt=Ot.current)==null?void 0:xt.getTime()),Cr=Math.abs(tn)/zr;if(Math.abs(tn)>=kR||Cr>.11){nt(St.current),(yt=v.onDismiss)==null||yt.call(v,v),er(),Me(!0);return}(Wt=lt.current)==null||Wt.style.setProperty("--swipe-amount","0px"),we(!1)},onPointerMove:Ke=>{var xt;if(!Hn.current||!Te)return;let yt=Ke.clientY-Hn.current.y,Wt=Ke.clientX-Hn.current.x,tn=(Zn==="top"?Math.min:Math.max)(0,yt),zr=Ke.pointerType==="touch"?10:2;Math.abs(tn)>zr?(xt=lt.current)==null||xt.style.setProperty("--swipe-amount",`${yt}px`):Math.abs(Wt)>zr&&(Hn.current=null)}},ke&&!v.jsx?Ee.createElement("button",{"aria-label":ae,"data-disabled":Ks,"data-close-button":!0,onClick:Ks||!Te?()=>{}:()=>{var Ke;er(),(Ke=v.onDismiss)==null||Ke.call(v,v)},className:X(W==null?void 0:W.closeButton,(i=v==null?void 0:v.classNames)==null?void 0:i.closeButton)},Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ee.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ee.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,v.jsx||Ee.isValidElement(v.title)?v.jsx||v.title:Ee.createElement(Ee.Fragment,null,Ve||v.icon||v.promise?Ee.createElement("div",{"data-icon":"",className:X(W==null?void 0:W.icon,(a=v==null?void 0:v.classNames)==null?void 0:a.icon)},v.promise||v.type==="loading"&&!v.icon?v.icon||Vo():null,v.type!=="loading"?v.icon||(ee==null?void 0:ee[Ve])||pR(Ve):null):null,Ee.createElement("div",{"data-content":"",className:X(W==null?void 0:W.content,(c=v==null?void 0:v.classNames)==null?void 0:c.content)},Ee.createElement("div",{"data-title":"",className:X(W==null?void 0:W.title,(d=v==null?void 0:v.classNames)==null?void 0:d.title)},v.title),v.description?Ee.createElement("div",{"data-description":"",className:X(U,he,W==null?void 0:W.description,(h=v==null?void 0:v.classNames)==null?void 0:h.description)},v.description):null),Ee.isValidElement(v.cancel)?v.cancel:v.cancel&&Dh(v.cancel)?Ee.createElement("button",{"data-button":!0,"data-cancel":!0,style:v.cancelButtonStyle||D,onClick:Ke=>{var xt,yt;Dh(v.cancel)&&Te&&((yt=(xt=v.cancel).onClick)==null||yt.call(xt,Ke),er())},className:X(W==null?void 0:W.cancelButton,(p=v==null?void 0:v.classNames)==null?void 0:p.cancelButton)},v.cancel.label):null,Ee.isValidElement(v.action)?v.action:v.action&&Dh(v.action)?Ee.createElement("button",{"data-button":!0,"data-action":!0,style:v.actionButtonStyle||O,onClick:Ke=>{var xt,yt;Dh(v.action)&&(Ke.defaultPrevented||((yt=(xt=v.action).onClick)==null||yt.call(xt,Ke),er()))},className:X(W==null?void 0:W.actionButton,(g=v==null?void 0:v.classNames)==null?void 0:g.actionButton)},v.action.label):null))};function r_(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}var MR=n=>{let{invert:e,position:t="bottom-right",hotkey:r=["altKey","KeyT"],expand:i,closeButton:a,className:c,offset:d,theme:h="light",richColors:p,duration:g,style:y,visibleToasts:v=IR,toastOptions:b,dir:S=r_(),gap:_=RR,loadingIcon:w,icons:P,containerAriaLabel:I="Notifications",pauseWhenPageIsHidden:C,cn:M=DR}=n,[z,B]=Ee.useState([]),A=Ee.useMemo(()=>Array.from(new Set([t].concat(z.filter($=>$.position).map($=>$.position)))),[z,t]),[R,D]=Ee.useState([]),[O,V]=Ee.useState(!1),[U,k]=Ee.useState(!1),[G,H]=Ee.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Y=Ee.useRef(null),se=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),W=Ee.useRef(null),ee=Ee.useRef(!1),ae=Ee.useCallback($=>{var X;(X=z.find(oe=>oe.id===$.id))!=null&&X.delete||wr.dismiss($.id),B(oe=>oe.filter(({id:ue})=>ue!==$.id))},[z]);return Ee.useEffect(()=>wr.subscribe($=>{if($.dismiss){B(X=>X.map(oe=>oe.id===$.id?{...oe,delete:!0}:oe));return}setTimeout(()=>{Xy.flushSync(()=>{B(X=>{let oe=X.findIndex(ue=>ue.id===$.id);return oe!==-1?[...X.slice(0,oe),{...X[oe],...$},...X.slice(oe+1)]:[$,...X]})})})}),[]),Ee.useEffect(()=>{if(h!=="system"){H(h);return}h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?H("dark"):H("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:$})=>{H($?"dark":"light")})},[h]),Ee.useEffect(()=>{z.length<=1&&V(!1)},[z]),Ee.useEffect(()=>{let $=X=>{var oe,ue;r.every(Se=>X[Se]||X.code===Se)&&(V(!0),(oe=Y.current)==null||oe.focus()),X.code==="Escape"&&(document.activeElement===Y.current||(ue=Y.current)!=null&&ue.contains(document.activeElement))&&V(!1)};return document.addEventListener("keydown",$),()=>document.removeEventListener("keydown",$)},[r]),Ee.useEffect(()=>{if(Y.current)return()=>{W.current&&(W.current.focus({preventScroll:!0}),W.current=null,ee.current=!1)}},[Y.current]),z.length?Ee.createElement("section",{"aria-label":`${I} ${se}`,tabIndex:-1},A.map(($,X)=>{var oe;let[ue,Se]=$.split("-");return Ee.createElement("ol",{key:$,dir:S==="auto"?r_():S,tabIndex:-1,ref:Y,className:c,"data-sonner-toaster":!0,"data-theme":G,"data-y-position":ue,"data-x-position":Se,style:{"--front-toast-height":`${((oe=R[0])==null?void 0:oe.height)||0}px`,"--offset":typeof d=="number"?`${d}px`:d||jR,"--width":`${PR}px`,"--gap":`${_}px`,...y},onBlur:Ne=>{ee.current&&!Ne.currentTarget.contains(Ne.relatedTarget)&&(ee.current=!1,W.current&&(W.current.focus({preventScroll:!0}),W.current=null))},onFocus:Ne=>{Ne.target instanceof HTMLElement&&Ne.target.dataset.dismissible==="false"||ee.current||(ee.current=!0,W.current=Ne.relatedTarget)},onMouseEnter:()=>V(!0),onMouseMove:()=>V(!0),onMouseLeave:()=>{U||V(!1)},onPointerDown:Ne=>{Ne.target instanceof HTMLElement&&Ne.target.dataset.dismissible==="false"||k(!0)},onPointerUp:()=>k(!1)},z.filter(Ne=>!Ne.position&&X===0||Ne.position===$).map((Ne,ge)=>{var we,Ie;return Ee.createElement(LR,{key:Ne.id,icons:P,index:ge,toast:Ne,defaultRichColors:p,duration:(we=b==null?void 0:b.duration)!=null?we:g,className:b==null?void 0:b.className,descriptionClassName:b==null?void 0:b.descriptionClassName,invert:e,visibleToasts:v,closeButton:(Ie=b==null?void 0:b.closeButton)!=null?Ie:a,interacting:U,position:$,style:b==null?void 0:b.style,unstyled:b==null?void 0:b.unstyled,classNames:b==null?void 0:b.classNames,cancelButtonStyle:b==null?void 0:b.cancelButtonStyle,actionButtonStyle:b==null?void 0:b.actionButtonStyle,removeToast:ae,toasts:z.filter(Me=>Me.position==Ne.position),heights:R.filter(Me=>Me.position==Ne.position),setHeights:D,expandByDefault:i,gap:_,loadingIcon:w,expanded:O,pauseWhenPageIsHidden:C,cn:M})}))})):null};const FR=({...n})=>{const{theme:e="system"}=fR();return l.jsx(MR,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};function VR(n,e=[]){let t=[];function r(a,c){const d=E.createContext(c),h=t.length;t=[...t,c];const p=y=>{var P;const{scope:v,children:b,...S}=y,_=((P=v==null?void 0:v[n])==null?void 0:P[h])||d,w=E.useMemo(()=>S,Object.values(S));return l.jsx(_.Provider,{value:w,children:b})};p.displayName=a+"Provider";function g(y,v){var _;const b=((_=v==null?void 0:v[n])==null?void 0:_[h])||d,S=E.useContext(b);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${a}\``)}return[p,g]}const i=()=>{const a=t.map(c=>E.createContext(c));return function(d){const h=(d==null?void 0:d[n])||a;return E.useMemo(()=>({[`__scope${n}`]:{...d,[n]:h}}),[d,h])}};return i.scopeName=n,[r,UR(i,...e)]}function UR(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const c=r.reduce((d,{useScope:h,scopeName:p})=>{const y=h(a)[`__scope${p}`];return{...d,...y}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var zR="DismissableLayer",ty="dismissableLayer.update",$R="dismissableLayer.pointerDownOutside",BR="dismissableLayer.focusOutside",s_,A1=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),P1=E.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:c,onDismiss:d,...h}=n,p=E.useContext(A1),[g,y]=E.useState(null),v=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=E.useState({}),S=Ct(e,A=>y(A)),_=Array.from(p.layers),[w]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),P=_.indexOf(w),I=g?_.indexOf(g):-1,C=p.layersWithOutsidePointerEventsDisabled.size>0,M=I>=P,z=HR(A=>{const R=A.target,D=[...p.branches].some(O=>O.contains(R));!M||D||(i==null||i(A),c==null||c(A),A.defaultPrevented||d==null||d())},v),B=KR(A=>{const R=A.target;[...p.branches].some(O=>O.contains(R))||(a==null||a(A),c==null||c(A),A.defaultPrevented||d==null||d())},v);return Zy(A=>{I===p.layers.size-1&&(r==null||r(A),!A.defaultPrevented&&d&&(A.preventDefault(),d()))},v),E.useEffect(()=>{if(g)return t&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(s_=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),i_(),()=>{t&&p.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=s_)}},[g,v,t,p]),E.useEffect(()=>()=>{g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),i_())},[g,p]),E.useEffect(()=>{const A=()=>b({});return document.addEventListener(ty,A),()=>document.removeEventListener(ty,A)},[]),l.jsx(et.div,{...h,ref:S,style:{pointerEvents:C?M?"auto":"none":void 0,...n.style},onFocusCapture:We(n.onFocusCapture,B.onFocusCapture),onBlurCapture:We(n.onBlurCapture,B.onBlurCapture),onPointerDownCapture:We(n.onPointerDownCapture,z.onPointerDownCapture)})});P1.displayName=zR;var qR="DismissableLayerBranch",WR=E.forwardRef((n,e)=>{const t=E.useContext(A1),r=E.useRef(null),i=Ct(e,r);return E.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),l.jsx(et.div,{...n,ref:i})});WR.displayName=qR;function HR(n,e=globalThis==null?void 0:globalThis.document){const t=xn(n),r=E.useRef(!1),i=E.useRef(()=>{});return E.useEffect(()=>{const a=d=>{if(d.target&&!r.current){let h=function(){R1($R,t,p,{discrete:!0})};const p={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=h,e.addEventListener("click",i.current,{once:!0})):h()}else e.removeEventListener("click",i.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function KR(n,e=globalThis==null?void 0:globalThis.document){const t=xn(n),r=E.useRef(!1);return E.useEffect(()=>{const i=a=>{a.target&&!r.current&&R1(BR,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function i_(){const n=new CustomEvent(ty);document.dispatchEvent(n)}function R1(n,e,t,{discrete:r}){const i=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?Kf(i,a):i.dispatchEvent(a)}var GR=Fb.useId||(()=>{}),QR=0;function Ju(n){const[e,t]=E.useState(GR());return an(()=>{t(r=>r??String(QR++))},[n]),e?`radix-${e}`:""}const YR=["top","right","bottom","left"],wo=Math.min,_r=Math.max,yf=Math.round,Lh=Math.floor,_o=n=>({x:n,y:n}),XR={left:"right",right:"left",bottom:"top",top:"bottom"},JR={start:"end",end:"start"};function ny(n,e,t){return _r(n,wo(e,t))}function mi(n,e){return typeof n=="function"?n(e):n}function gi(n){return n.split("-")[0]}function dc(n){return n.split("-")[1]}function ov(n){return n==="x"?"y":"x"}function av(n){return n==="y"?"height":"width"}function Eo(n){return["top","bottom"].includes(gi(n))?"y":"x"}function lv(n){return ov(Eo(n))}function ZR(n,e,t){t===void 0&&(t=!1);const r=dc(n),i=lv(n),a=av(i);let c=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(c=vf(c)),[c,vf(c)]}function ek(n){const e=vf(n);return[ry(n),e,ry(e)]}function ry(n){return n.replace(/start|end/g,e=>JR[e])}function tk(n,e,t){const r=["left","right"],i=["right","left"],a=["top","bottom"],c=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?a:c;default:return[]}}function nk(n,e,t,r){const i=dc(n);let a=tk(gi(n),t==="start",r);return i&&(a=a.map(c=>c+"-"+i),e&&(a=a.concat(a.map(ry)))),a}function vf(n){return n.replace(/left|right|bottom|top/g,e=>XR[e])}function rk(n){return{top:0,right:0,bottom:0,left:0,...n}}function k1(n){return typeof n!="number"?rk(n):{top:n,right:n,bottom:n,left:n}}function xf(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function o_(n,e,t){let{reference:r,floating:i}=n;const a=Eo(e),c=lv(e),d=av(c),h=gi(e),p=a==="y",g=r.x+r.width/2-i.width/2,y=r.y+r.height/2-i.height/2,v=r[d]/2-i[d]/2;let b;switch(h){case"top":b={x:g,y:r.y-i.height};break;case"bottom":b={x:g,y:r.y+r.height};break;case"right":b={x:r.x+r.width,y};break;case"left":b={x:r.x-i.width,y};break;default:b={x:r.x,y:r.y}}switch(dc(e)){case"start":b[c]-=v*(t&&p?-1:1);break;case"end":b[c]+=v*(t&&p?-1:1);break}return b}const sk=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:c}=t,d=a.filter(Boolean),h=await(c.isRTL==null?void 0:c.isRTL(e));let p=await c.getElementRects({reference:n,floating:e,strategy:i}),{x:g,y}=o_(p,r,h),v=r,b={},S=0;for(let _=0;_<d.length;_++){const{name:w,fn:P}=d[_],{x:I,y:C,data:M,reset:z}=await P({x:g,y,initialPlacement:r,placement:v,strategy:i,middlewareData:b,rects:p,platform:c,elements:{reference:n,floating:e}});g=I??g,y=C??y,b={...b,[w]:{...b[w],...M}},z&&S<=50&&(S++,typeof z=="object"&&(z.placement&&(v=z.placement),z.rects&&(p=z.rects===!0?await c.getElementRects({reference:n,floating:e,strategy:i}):z.rects),{x:g,y}=o_(p,v,h)),_=-1)}return{x:g,y,placement:v,strategy:i,middlewareData:b}};async function Iu(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:c,elements:d,strategy:h}=n,{boundary:p="clippingAncestors",rootBoundary:g="viewport",elementContext:y="floating",altBoundary:v=!1,padding:b=0}=mi(e,n),S=k1(b),w=d[v?y==="floating"?"reference":"floating":y],P=xf(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(w)))==null||t?w:w.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(d.floating)),boundary:p,rootBoundary:g,strategy:h})),I=y==="floating"?{x:r,y:i,width:c.floating.width,height:c.floating.height}:c.reference,C=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d.floating)),M=await(a.isElement==null?void 0:a.isElement(C))?await(a.getScale==null?void 0:a.getScale(C))||{x:1,y:1}:{x:1,y:1},z=xf(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:I,offsetParent:C,strategy:h}):I);return{top:(P.top-z.top+S.top)/M.y,bottom:(z.bottom-P.bottom+S.bottom)/M.y,left:(P.left-z.left+S.left)/M.x,right:(z.right-P.right+S.right)/M.x}}const ik=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:a,platform:c,elements:d,middlewareData:h}=e,{element:p,padding:g=0}=mi(n,e)||{};if(p==null)return{};const y=k1(g),v={x:t,y:r},b=lv(i),S=av(b),_=await c.getDimensions(p),w=b==="y",P=w?"top":"left",I=w?"bottom":"right",C=w?"clientHeight":"clientWidth",M=a.reference[S]+a.reference[b]-v[b]-a.floating[S],z=v[b]-a.reference[b],B=await(c.getOffsetParent==null?void 0:c.getOffsetParent(p));let A=B?B[C]:0;(!A||!await(c.isElement==null?void 0:c.isElement(B)))&&(A=d.floating[C]||a.floating[S]);const R=M/2-z/2,D=A/2-_[S]/2-1,O=wo(y[P],D),V=wo(y[I],D),U=O,k=A-_[S]-V,G=A/2-_[S]/2+R,H=ny(U,G,k),Y=!h.arrow&&dc(i)!=null&&G!==H&&a.reference[S]/2-(G<U?O:V)-_[S]/2<0,se=Y?G<U?G-U:G-k:0;return{[b]:v[b]+se,data:{[b]:H,centerOffset:G-H-se,...Y&&{alignmentOffset:se}},reset:Y}}}),ok=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:a,rects:c,initialPlacement:d,platform:h,elements:p}=e,{mainAxis:g=!0,crossAxis:y=!0,fallbackPlacements:v,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:_=!0,...w}=mi(n,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const P=gi(i),I=Eo(d),C=gi(d)===d,M=await(h.isRTL==null?void 0:h.isRTL(p.floating)),z=v||(C||!_?[vf(d)]:ek(d)),B=S!=="none";!v&&B&&z.push(...nk(d,_,S,M));const A=[d,...z],R=await Iu(e,w),D=[];let O=((r=a.flip)==null?void 0:r.overflows)||[];if(g&&D.push(R[P]),y){const G=ZR(i,c,M);D.push(R[G[0]],R[G[1]])}if(O=[...O,{placement:i,overflows:D}],!D.every(G=>G<=0)){var V,U;const G=(((V=a.flip)==null?void 0:V.index)||0)+1,H=A[G];if(H)return{data:{index:G,overflows:O},reset:{placement:H}};let Y=(U=O.filter(se=>se.overflows[0]<=0).sort((se,W)=>se.overflows[1]-W.overflows[1])[0])==null?void 0:U.placement;if(!Y)switch(b){case"bestFit":{var k;const se=(k=O.filter(W=>{if(B){const ee=Eo(W.placement);return ee===I||ee==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(ee=>ee>0).reduce((ee,ae)=>ee+ae,0)]).sort((W,ee)=>W[1]-ee[1])[0])==null?void 0:k[0];se&&(Y=se);break}case"initialPlacement":Y=d;break}if(i!==Y)return{reset:{placement:Y}}}return{}}}};function a_(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function l_(n){return YR.some(e=>n[e]>=0)}const ak=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=mi(n,e);switch(r){case"referenceHidden":{const a=await Iu(e,{...i,elementContext:"reference"}),c=a_(a,t.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:l_(c)}}}case"escaped":{const a=await Iu(e,{...i,altBoundary:!0}),c=a_(a,t.floating);return{data:{escapedOffsets:c,escaped:l_(c)}}}default:return{}}}}};async function lk(n,e){const{placement:t,platform:r,elements:i}=n,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),c=gi(t),d=dc(t),h=Eo(t)==="y",p=["left","top"].includes(c)?-1:1,g=a&&h?-1:1,y=mi(e,n);let{mainAxis:v,crossAxis:b,alignmentAxis:S}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return d&&typeof S=="number"&&(b=d==="end"?S*-1:S),h?{x:b*g,y:v*p}:{x:v*p,y:b*g}}const ck=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:a,placement:c,middlewareData:d}=e,h=await lk(e,n);return c===((t=d.offset)==null?void 0:t.placement)&&(r=d.arrow)!=null&&r.alignmentOffset?{}:{x:i+h.x,y:a+h.y,data:{...h,placement:c}}}}},uk=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:c=!1,limiter:d={fn:w=>{let{x:P,y:I}=w;return{x:P,y:I}}},...h}=mi(n,e),p={x:t,y:r},g=await Iu(e,h),y=Eo(gi(i)),v=ov(y);let b=p[v],S=p[y];if(a){const w=v==="y"?"top":"left",P=v==="y"?"bottom":"right",I=b+g[w],C=b-g[P];b=ny(I,b,C)}if(c){const w=y==="y"?"top":"left",P=y==="y"?"bottom":"right",I=S+g[w],C=S-g[P];S=ny(I,S,C)}const _=d.fn({...e,[v]:b,[y]:S});return{..._,data:{x:_.x-t,y:_.y-r,enabled:{[v]:a,[y]:c}}}}}},dk=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:a,middlewareData:c}=e,{offset:d=0,mainAxis:h=!0,crossAxis:p=!0}=mi(n,e),g={x:t,y:r},y=Eo(i),v=ov(y);let b=g[v],S=g[y];const _=mi(d,e),w=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(h){const C=v==="y"?"height":"width",M=a.reference[v]-a.floating[C]+w.mainAxis,z=a.reference[v]+a.reference[C]-w.mainAxis;b<M?b=M:b>z&&(b=z)}if(p){var P,I;const C=v==="y"?"width":"height",M=["top","left"].includes(gi(i)),z=a.reference[y]-a.floating[C]+(M&&((P=c.offset)==null?void 0:P[y])||0)+(M?0:w.crossAxis),B=a.reference[y]+a.reference[C]+(M?0:((I=c.offset)==null?void 0:I[y])||0)-(M?w.crossAxis:0);S<z?S=z:S>B&&(S=B)}return{[v]:b,[y]:S}}}},hk=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:a,platform:c,elements:d}=e,{apply:h=()=>{},...p}=mi(n,e),g=await Iu(e,p),y=gi(i),v=dc(i),b=Eo(i)==="y",{width:S,height:_}=a.floating;let w,P;y==="top"||y==="bottom"?(w=y,P=v===(await(c.isRTL==null?void 0:c.isRTL(d.floating))?"start":"end")?"left":"right"):(P=y,w=v==="end"?"top":"bottom");const I=_-g.top-g.bottom,C=S-g.left-g.right,M=wo(_-g[w],I),z=wo(S-g[P],C),B=!e.middlewareData.shift;let A=M,R=z;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(R=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(A=I),B&&!v){const O=_r(g.left,0),V=_r(g.right,0),U=_r(g.top,0),k=_r(g.bottom,0);b?R=S-2*(O!==0||V!==0?O+V:_r(g.left,g.right)):A=_-2*(U!==0||k!==0?U+k:_r(g.top,g.bottom))}await h({...e,availableWidth:R,availableHeight:A});const D=await c.getDimensions(d.floating);return S!==D.width||_!==D.height?{reset:{rects:!0}}:{}}}};function Yf(){return typeof window<"u"}function hc(n){return O1(n)?(n.nodeName||"").toLowerCase():"#document"}function Sr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Bs(n){var e;return(e=(O1(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function O1(n){return Yf()?n instanceof Node||n instanceof Sr(n).Node:!1}function us(n){return Yf()?n instanceof Element||n instanceof Sr(n).Element:!1}function Fs(n){return Yf()?n instanceof HTMLElement||n instanceof Sr(n).HTMLElement:!1}function c_(n){return!Yf()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Sr(n).ShadowRoot}function Zu(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=ds(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function fk(n){return["table","td","th"].includes(hc(n))}function Xf(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function cv(n){const e=uv(),t=us(n)?ds(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function pk(n){let e=bo(n);for(;Fs(e)&&!Xl(e);){if(cv(e))return e;if(Xf(e))return null;e=bo(e)}return null}function uv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Xl(n){return["html","body","#document"].includes(hc(n))}function ds(n){return Sr(n).getComputedStyle(n)}function Jf(n){return us(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function bo(n){if(hc(n)==="html")return n;const e=n.assignedSlot||n.parentNode||c_(n)&&n.host||Bs(n);return c_(e)?e.host:e}function D1(n){const e=bo(n);return Xl(e)?n.ownerDocument?n.ownerDocument.body:n.body:Fs(e)&&Zu(e)?e:D1(e)}function ju(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=D1(n),a=i===((r=n.ownerDocument)==null?void 0:r.body),c=Sr(i);if(a){const d=sy(c);return e.concat(c,c.visualViewport||[],Zu(i)?i:[],d&&t?ju(d):[])}return e.concat(i,ju(i,[],t))}function sy(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function L1(n){const e=ds(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Fs(n),a=i?n.offsetWidth:t,c=i?n.offsetHeight:r,d=yf(t)!==a||yf(r)!==c;return d&&(t=a,r=c),{width:t,height:r,$:d}}function dv(n){return us(n)?n:n.contextElement}function Ol(n){const e=dv(n);if(!Fs(e))return _o(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:a}=L1(e);let c=(a?yf(t.width):t.width)/r,d=(a?yf(t.height):t.height)/i;return(!c||!Number.isFinite(c))&&(c=1),(!d||!Number.isFinite(d))&&(d=1),{x:c,y:d}}const mk=_o(0);function M1(n){const e=Sr(n);return!uv()||!e.visualViewport?mk:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function gk(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Sr(n)?!1:e}function Na(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),a=dv(n);let c=_o(1);e&&(r?us(r)&&(c=Ol(r)):c=Ol(n));const d=gk(a,t,r)?M1(a):_o(0);let h=(i.left+d.x)/c.x,p=(i.top+d.y)/c.y,g=i.width/c.x,y=i.height/c.y;if(a){const v=Sr(a),b=r&&us(r)?Sr(r):r;let S=v,_=sy(S);for(;_&&r&&b!==S;){const w=Ol(_),P=_.getBoundingClientRect(),I=ds(_),C=P.left+(_.clientLeft+parseFloat(I.paddingLeft))*w.x,M=P.top+(_.clientTop+parseFloat(I.paddingTop))*w.y;h*=w.x,p*=w.y,g*=w.x,y*=w.y,h+=C,p+=M,S=Sr(_),_=sy(S)}}return xf({width:g,height:y,x:h,y:p})}function yk(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const a=i==="fixed",c=Bs(r),d=e?Xf(e.floating):!1;if(r===c||d&&a)return t;let h={scrollLeft:0,scrollTop:0},p=_o(1);const g=_o(0),y=Fs(r);if((y||!y&&!a)&&((hc(r)!=="body"||Zu(c))&&(h=Jf(r)),Fs(r))){const v=Na(r);p=Ol(r),g.x=v.x+r.clientLeft,g.y=v.y+r.clientTop}return{width:t.width*p.x,height:t.height*p.y,x:t.x*p.x-h.scrollLeft*p.x+g.x,y:t.y*p.y-h.scrollTop*p.y+g.y}}function vk(n){return Array.from(n.getClientRects())}function iy(n,e){const t=Jf(n).scrollLeft;return e?e.left+t:Na(Bs(n)).left+t}function xk(n){const e=Bs(n),t=Jf(n),r=n.ownerDocument.body,i=_r(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=_r(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-t.scrollLeft+iy(n);const d=-t.scrollTop;return ds(r).direction==="rtl"&&(c+=_r(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:c,y:d}}function wk(n,e){const t=Sr(n),r=Bs(n),i=t.visualViewport;let a=r.clientWidth,c=r.clientHeight,d=0,h=0;if(i){a=i.width,c=i.height;const p=uv();(!p||p&&e==="fixed")&&(d=i.offsetLeft,h=i.offsetTop)}return{width:a,height:c,x:d,y:h}}function _k(n,e){const t=Na(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,a=Fs(n)?Ol(n):_o(1),c=n.clientWidth*a.x,d=n.clientHeight*a.y,h=i*a.x,p=r*a.y;return{width:c,height:d,x:h,y:p}}function u_(n,e,t){let r;if(e==="viewport")r=wk(n,t);else if(e==="document")r=xk(Bs(n));else if(us(e))r=_k(e,t);else{const i=M1(n);r={...e,x:e.x-i.x,y:e.y-i.y}}return xf(r)}function F1(n,e){const t=bo(n);return t===e||!us(t)||Xl(t)?!1:ds(t).position==="fixed"||F1(t,e)}function Ek(n,e){const t=e.get(n);if(t)return t;let r=ju(n,[],!1).filter(d=>us(d)&&hc(d)!=="body"),i=null;const a=ds(n).position==="fixed";let c=a?bo(n):n;for(;us(c)&&!Xl(c);){const d=ds(c),h=cv(c);!h&&d.position==="fixed"&&(i=null),(a?!h&&!i:!h&&d.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Zu(c)&&!h&&F1(n,c))?r=r.filter(g=>g!==c):i=d,c=bo(c)}return e.set(n,r),r}function bk(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const c=[...t==="clippingAncestors"?Xf(e)?[]:Ek(e,this._c):[].concat(t),r],d=c[0],h=c.reduce((p,g)=>{const y=u_(e,g,i);return p.top=_r(y.top,p.top),p.right=wo(y.right,p.right),p.bottom=wo(y.bottom,p.bottom),p.left=_r(y.left,p.left),p},u_(e,d,i));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function Sk(n){const{width:e,height:t}=L1(n);return{width:e,height:t}}function Nk(n,e,t){const r=Fs(e),i=Bs(e),a=t==="fixed",c=Na(n,!0,a,e);let d={scrollLeft:0,scrollTop:0};const h=_o(0);if(r||!r&&!a)if((hc(e)!=="body"||Zu(i))&&(d=Jf(e)),r){const b=Na(e,!0,a,e);h.x=b.x+e.clientLeft,h.y=b.y+e.clientTop}else i&&(h.x=iy(i));let p=0,g=0;if(i&&!r&&!a){const b=i.getBoundingClientRect();g=b.top+d.scrollTop,p=b.left+d.scrollLeft-iy(i,b)}const y=c.left+d.scrollLeft-h.x-p,v=c.top+d.scrollTop-h.y-g;return{x:y,y:v,width:c.width,height:c.height}}function vg(n){return ds(n).position==="static"}function d_(n,e){if(!Fs(n)||ds(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Bs(n)===t&&(t=t.ownerDocument.body),t}function V1(n,e){const t=Sr(n);if(Xf(n))return t;if(!Fs(n)){let i=bo(n);for(;i&&!Xl(i);){if(us(i)&&!vg(i))return i;i=bo(i)}return t}let r=d_(n,e);for(;r&&fk(r)&&vg(r);)r=d_(r,e);return r&&Xl(r)&&vg(r)&&!cv(r)?t:r||pk(n)||t}const Tk=async function(n){const e=this.getOffsetParent||V1,t=this.getDimensions,r=await t(n.floating);return{reference:Nk(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Ck(n){return ds(n).direction==="rtl"}const Ik={convertOffsetParentRelativeRectToViewportRelativeRect:yk,getDocumentElement:Bs,getClippingRect:bk,getOffsetParent:V1,getElementRects:Tk,getClientRects:vk,getDimensions:Sk,getScale:Ol,isElement:us,isRTL:Ck};function jk(n,e){let t=null,r;const i=Bs(n);function a(){var d;clearTimeout(r),(d=t)==null||d.disconnect(),t=null}function c(d,h){d===void 0&&(d=!1),h===void 0&&(h=1),a();const{left:p,top:g,width:y,height:v}=n.getBoundingClientRect();if(d||e(),!y||!v)return;const b=Lh(g),S=Lh(i.clientWidth-(p+y)),_=Lh(i.clientHeight-(g+v)),w=Lh(p),I={rootMargin:-b+"px "+-S+"px "+-_+"px "+-w+"px",threshold:_r(0,wo(1,h))||1};let C=!0;function M(z){const B=z[0].intersectionRatio;if(B!==h){if(!C)return c();B?c(!1,B):r=setTimeout(()=>{c(!1,1e-7)},1e3)}C=!1}try{t=new IntersectionObserver(M,{...I,root:i.ownerDocument})}catch{t=new IntersectionObserver(M,I)}t.observe(n)}return c(!0),a}function Ak(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:h=!1}=r,p=dv(n),g=i||a?[...p?ju(p):[],...ju(e)]:[];g.forEach(P=>{i&&P.addEventListener("scroll",t,{passive:!0}),a&&P.addEventListener("resize",t)});const y=p&&d?jk(p,t):null;let v=-1,b=null;c&&(b=new ResizeObserver(P=>{let[I]=P;I&&I.target===p&&b&&(b.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var C;(C=b)==null||C.observe(e)})),t()}),p&&!h&&b.observe(p),b.observe(e));let S,_=h?Na(n):null;h&&w();function w(){const P=Na(n);_&&(P.x!==_.x||P.y!==_.y||P.width!==_.width||P.height!==_.height)&&t(),_=P,S=requestAnimationFrame(w)}return t(),()=>{var P;g.forEach(I=>{i&&I.removeEventListener("scroll",t),a&&I.removeEventListener("resize",t)}),y==null||y(),(P=b)==null||P.disconnect(),b=null,h&&cancelAnimationFrame(S)}}const Pk=ck,Rk=uk,kk=ok,Ok=hk,Dk=ak,h_=ik,Lk=dk,Mk=(n,e,t)=>{const r=new Map,i={platform:Ik,...t},a={...i.platform,_c:r};return sk(n,e,{...i,platform:a})};var Jh=typeof document<"u"?E.useLayoutEffect:E.useEffect;function wf(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!wf(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const a=i[r];if(!(a==="_owner"&&n.$$typeof)&&!wf(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function U1(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function f_(n,e){const t=U1(n);return Math.round(e*t)/t}function xg(n){const e=E.useRef(n);return Jh(()=>{e.current=n}),e}function Fk(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:c}={},transform:d=!0,whileElementsMounted:h,open:p}=n,[g,y]=E.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[v,b]=E.useState(r);wf(v,r)||b(r);const[S,_]=E.useState(null),[w,P]=E.useState(null),I=E.useCallback(W=>{W!==B.current&&(B.current=W,_(W))},[]),C=E.useCallback(W=>{W!==A.current&&(A.current=W,P(W))},[]),M=a||S,z=c||w,B=E.useRef(null),A=E.useRef(null),R=E.useRef(g),D=h!=null,O=xg(h),V=xg(i),U=xg(p),k=E.useCallback(()=>{if(!B.current||!A.current)return;const W={placement:e,strategy:t,middleware:v};V.current&&(W.platform=V.current),Mk(B.current,A.current,W).then(ee=>{const ae={...ee,isPositioned:U.current!==!1};G.current&&!wf(R.current,ae)&&(R.current=ae,Oa.flushSync(()=>{y(ae)}))})},[v,e,t,V,U]);Jh(()=>{p===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,y(W=>({...W,isPositioned:!1})))},[p]);const G=E.useRef(!1);Jh(()=>(G.current=!0,()=>{G.current=!1}),[]),Jh(()=>{if(M&&(B.current=M),z&&(A.current=z),M&&z){if(O.current)return O.current(M,z,k);k()}},[M,z,k,O,D]);const H=E.useMemo(()=>({reference:B,floating:A,setReference:I,setFloating:C}),[I,C]),Y=E.useMemo(()=>({reference:M,floating:z}),[M,z]),se=E.useMemo(()=>{const W={position:t,left:0,top:0};if(!Y.floating)return W;const ee=f_(Y.floating,g.x),ae=f_(Y.floating,g.y);return d?{...W,transform:"translate("+ee+"px, "+ae+"px)",...U1(Y.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ee,top:ae}},[t,d,Y.floating,g.x,g.y]);return E.useMemo(()=>({...g,update:k,refs:H,elements:Y,floatingStyles:se}),[g,k,H,Y,se])}const Vk=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?h_({element:r.current,padding:i}).fn(t):{}:r?h_({element:r,padding:i}).fn(t):{}}}},Uk=(n,e)=>({...Pk(n),options:[n,e]}),zk=(n,e)=>({...Rk(n),options:[n,e]}),$k=(n,e)=>({...Lk(n),options:[n,e]}),Bk=(n,e)=>({...kk(n),options:[n,e]}),qk=(n,e)=>({...Ok(n),options:[n,e]}),Wk=(n,e)=>({...Dk(n),options:[n,e]}),Hk=(n,e)=>({...Vk(n),options:[n,e]});var Kk="Arrow",z1=E.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...a}=n;return l.jsx(et.svg,{...a,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});z1.displayName=Kk;var Gk=z1;function $1(n){const[e,t]=E.useState(void 0);return an(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let c,d;if("borderBoxSize"in a){const h=a.borderBoxSize,p=Array.isArray(h)?h[0]:h;c=p.inlineSize,d=p.blockSize}else c=n.offsetWidth,d=n.offsetHeight;t({width:c,height:d})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var hv="Popper",[B1,Zf]=Ei(hv),[Qk,q1]=B1(hv),W1=n=>{const{__scopePopper:e,children:t}=n,[r,i]=E.useState(null);return l.jsx(Qk,{scope:e,anchor:r,onAnchorChange:i,children:t})};W1.displayName=hv;var H1="PopperAnchor",K1=E.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,a=q1(H1,t),c=E.useRef(null),d=Ct(e,c);return E.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||c.current)}),r?null:l.jsx(et.div,{...i,ref:d})});K1.displayName=H1;var fv="PopperContent",[Yk,Xk]=B1(fv),G1=E.forwardRef((n,e)=>{var ge,we,Ie,Me,Xe,nt;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:c=0,arrowPadding:d=0,avoidCollisions:h=!0,collisionBoundary:p=[],collisionPadding:g=0,sticky:y="partial",hideWhenDetached:v=!1,updatePositionStrategy:b="optimized",onPlaced:S,..._}=n,w=q1(fv,t),[P,I]=E.useState(null),C=Ct(e,bt=>I(bt)),[M,z]=E.useState(null),B=$1(M),A=(B==null?void 0:B.width)??0,R=(B==null?void 0:B.height)??0,D=r+(a!=="center"?"-"+a:""),O=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},V=Array.isArray(p)?p:[p],U=V.length>0,k={padding:O,boundary:V.filter(Zk),altBoundary:U},{refs:G,floatingStyles:H,placement:Y,isPositioned:se,middlewareData:W}=Fk({strategy:"fixed",placement:D,whileElementsMounted:(...bt)=>Ak(...bt,{animationFrame:b==="always"}),elements:{reference:w.anchor},middleware:[Uk({mainAxis:i+R,alignmentAxis:c}),h&&zk({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?$k():void 0,...k}),h&&Bk({...k}),qk({...k,apply:({elements:bt,rects:kt,availableWidth:Ot,availableHeight:lt})=>{const{width:Jt,height:be}=kt.reference,Ve=bt.floating.style;Ve.setProperty("--radix-popper-available-width",`${Ot}px`),Ve.setProperty("--radix-popper-available-height",`${lt}px`),Ve.setProperty("--radix-popper-anchor-width",`${Jt}px`),Ve.setProperty("--radix-popper-anchor-height",`${be}px`)}}),M&&Hk({element:M,padding:d}),e2({arrowWidth:A,arrowHeight:R}),v&&Wk({strategy:"referenceHidden",...k})]}),[ee,ae]=X1(Y),$=xn(S);an(()=>{se&&($==null||$())},[se,$]);const X=(ge=W.arrow)==null?void 0:ge.x,oe=(we=W.arrow)==null?void 0:we.y,ue=((Ie=W.arrow)==null?void 0:Ie.centerOffset)!==0,[Se,Ne]=E.useState();return an(()=>{P&&Ne(window.getComputedStyle(P).zIndex)},[P]),l.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:se?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Se,"--radix-popper-transform-origin":[(Me=W.transformOrigin)==null?void 0:Me.x,(Xe=W.transformOrigin)==null?void 0:Xe.y].join(" "),...((nt=W.hide)==null?void 0:nt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:l.jsx(Yk,{scope:t,placedSide:ee,onArrowChange:z,arrowX:X,arrowY:oe,shouldHideArrow:ue,children:l.jsx(et.div,{"data-side":ee,"data-align":ae,..._,ref:C,style:{..._.style,animation:se?void 0:"none"}})})})});G1.displayName=fv;var Q1="PopperArrow",Jk={top:"bottom",right:"left",bottom:"top",left:"right"},Y1=E.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,a=Xk(Q1,r),c=Jk[a.placedSide];return l.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:l.jsx(Gk,{...i,ref:t,style:{...i.style,display:"block"}})})});Y1.displayName=Q1;function Zk(n){return n!==null}var e2=n=>({name:"transformOrigin",options:n,fn(e){var w,P,I;const{placement:t,rects:r,middlewareData:i}=e,c=((w=i.arrow)==null?void 0:w.centerOffset)!==0,d=c?0:n.arrowWidth,h=c?0:n.arrowHeight,[p,g]=X1(t),y={start:"0%",center:"50%",end:"100%"}[g],v=(((P=i.arrow)==null?void 0:P.x)??0)+d/2,b=(((I=i.arrow)==null?void 0:I.y)??0)+h/2;let S="",_="";return p==="bottom"?(S=c?y:`${v}px`,_=`${-h}px`):p==="top"?(S=c?y:`${v}px`,_=`${r.floating.height+h}px`):p==="right"?(S=`${-h}px`,_=c?y:`${b}px`):p==="left"&&(S=`${r.floating.width+h}px`,_=c?y:`${b}px`),{data:{x:S,y:_}}}});function X1(n){const[e,t="center"]=n.split("-");return[e,t]}var t2=W1,J1=K1,Z1=G1,eS=Y1;function n2(n,e){return E.useReducer((t,r)=>e[t][r]??t,n)}var tS=n=>{const{present:e,children:t}=n,r=r2(e),i=typeof t=="function"?t({present:r.isPresent}):E.Children.only(t),a=Ct(r.ref,s2(i));return typeof t=="function"||r.isPresent?E.cloneElement(i,{ref:a}):null};tS.displayName="Presence";function r2(n){const[e,t]=E.useState(),r=E.useRef({}),i=E.useRef(n),a=E.useRef("none"),c=n?"mounted":"unmounted",[d,h]=n2(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const p=Mh(r.current);a.current=d==="mounted"?p:"none"},[d]),an(()=>{const p=r.current,g=i.current;if(g!==n){const v=a.current,b=Mh(p);n?h("MOUNT"):b==="none"||(p==null?void 0:p.display)==="none"?h("UNMOUNT"):h(g&&v!==b?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,h]),an(()=>{if(e){let p;const g=e.ownerDocument.defaultView??window,y=b=>{const _=Mh(r.current).includes(b.animationName);if(b.target===e&&_&&(h("ANIMATION_END"),!i.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",p=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},v=b=>{b.target===e&&(a.current=Mh(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{g.clearTimeout(p),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:E.useCallback(p=>{p&&(r.current=getComputedStyle(p)),t(p)},[])}}function Mh(n){return(n==null?void 0:n.animationName)||"none"}function s2(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var[ep,K9]=VR("Tooltip",[Zf]),pv=Zf(),nS="TooltipProvider",i2=700,p_="tooltip.open",[o2,rS]=ep(nS),sS=n=>{const{__scopeTooltip:e,delayDuration:t=i2,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:a}=n,[c,d]=E.useState(!0),h=E.useRef(!1),p=E.useRef(0);return E.useEffect(()=>{const g=p.current;return()=>window.clearTimeout(g)},[]),l.jsx(o2,{scope:e,isOpenDelayed:c,delayDuration:t,onOpen:E.useCallback(()=>{window.clearTimeout(p.current),d(!1)},[]),onClose:E.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>d(!0),r)},[r]),isPointerInTransitRef:h,onPointerInTransitChange:E.useCallback(g=>{h.current=g},[]),disableHoverableContent:i,children:a})};sS.displayName=nS;var iS="Tooltip",[G9,tp]=ep(iS),oy="TooltipTrigger",a2=E.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=tp(oy,t),a=rS(oy,t),c=pv(t),d=E.useRef(null),h=Ct(e,d,i.onTriggerChange),p=E.useRef(!1),g=E.useRef(!1),y=E.useCallback(()=>p.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),l.jsx(J1,{asChild:!0,...c,children:l.jsx(et.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:h,onPointerMove:We(n.onPointerMove,v=>{v.pointerType!=="touch"&&!g.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),g.current=!0)}),onPointerLeave:We(n.onPointerLeave,()=>{i.onTriggerLeave(),g.current=!1}),onPointerDown:We(n.onPointerDown,()=>{p.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:We(n.onFocus,()=>{p.current||i.onOpen()}),onBlur:We(n.onBlur,i.onClose),onClick:We(n.onClick,i.onClose)})})});a2.displayName=oy;var l2="TooltipPortal",[Q9,c2]=ep(l2,{forceMount:void 0}),Jl="TooltipContent",oS=E.forwardRef((n,e)=>{const t=c2(Jl,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...a}=n,c=tp(Jl,n.__scopeTooltip);return l.jsx(tS,{present:r||c.open,children:c.disableHoverableContent?l.jsx(aS,{side:i,...a,ref:e}):l.jsx(u2,{side:i,...a,ref:e})})}),u2=E.forwardRef((n,e)=>{const t=tp(Jl,n.__scopeTooltip),r=rS(Jl,n.__scopeTooltip),i=E.useRef(null),a=Ct(e,i),[c,d]=E.useState(null),{trigger:h,onClose:p}=t,g=i.current,{onPointerInTransitChange:y}=r,v=E.useCallback(()=>{d(null),y(!1)},[y]),b=E.useCallback((S,_)=>{const w=S.currentTarget,P={x:S.clientX,y:S.clientY},I=p2(P,w.getBoundingClientRect()),C=m2(P,I),M=g2(_.getBoundingClientRect()),z=v2([...C,...M]);d(z),y(!0)},[y]);return E.useEffect(()=>()=>v(),[v]),E.useEffect(()=>{if(h&&g){const S=w=>b(w,g),_=w=>b(w,h);return h.addEventListener("pointerleave",S),g.addEventListener("pointerleave",_),()=>{h.removeEventListener("pointerleave",S),g.removeEventListener("pointerleave",_)}}},[h,g,b,v]),E.useEffect(()=>{if(c){const S=_=>{const w=_.target,P={x:_.clientX,y:_.clientY},I=(h==null?void 0:h.contains(w))||(g==null?void 0:g.contains(w)),C=!y2(P,c);I?v():C&&(v(),p())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[h,g,c,p,v]),l.jsx(aS,{...n,ref:a})}),[d2,h2]=ep(iS,{isInside:!1}),aS=E.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:c,...d}=n,h=tp(Jl,t),p=pv(t),{onClose:g}=h;return E.useEffect(()=>(document.addEventListener(p_,g),()=>document.removeEventListener(p_,g)),[g]),E.useEffect(()=>{if(h.trigger){const y=v=>{const b=v.target;b!=null&&b.contains(h.trigger)&&g()};return window.addEventListener("scroll",y,{capture:!0}),()=>window.removeEventListener("scroll",y,{capture:!0})}},[h.trigger,g]),l.jsx(P1,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:y=>y.preventDefault(),onDismiss:g,children:l.jsxs(Z1,{"data-state":h.stateAttribute,...p,...d,ref:e,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(zb,{children:r}),l.jsx(d2,{scope:t,isInside:!0,children:l.jsx(BA,{id:h.contentId,role:"tooltip",children:i||r})})]})})});oS.displayName=Jl;var lS="TooltipArrow",f2=E.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=pv(t);return h2(lS,t).isInside?null:l.jsx(eS,{...i,...r,ref:e})});f2.displayName=lS;function p2(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),a=Math.abs(e.left-n.x);switch(Math.min(t,r,i,a)){case a:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function m2(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function g2(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function y2(n,e){const{x:t,y:r}=n;let i=!1;for(let a=0,c=e.length-1;a<e.length;c=a++){const d=e[a].x,h=e[a].y,p=e[c].x,g=e[c].y;h>r!=g>r&&t<(p-d)*(r-h)/(g-h)+d&&(i=!i)}return i}function v2(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),x2(e)}function x2(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const a=e[e.length-1],c=e[e.length-2];if((a.x-c.x)*(i.y-c.y)>=(a.y-c.y)*(i.x-c.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const a=t[t.length-1],c=t[t.length-2];if((a.x-c.x)*(i.y-c.y)>=(a.y-c.y)*(i.x-c.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var w2=sS,cS=oS;const _2=w2,E2=E.forwardRef(({className:n,sideOffset:e=4,...t},r)=>l.jsx(cS,{ref:r,sideOffset:e,className:at("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));E2.displayName=cS.displayName;var np=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},rp=typeof window>"u"||"Deno"in globalThis;function rs(){}function b2(n,e){return typeof n=="function"?n(e):n}function S2(n){return typeof n=="number"&&n>=0&&n!==1/0}function N2(n,e){return Math.max(n+(e||0)-Date.now(),0)}function ay(n,e){return typeof n=="function"?n(e):n}function T2(n,e){return typeof n=="function"?n(e):n}function m_(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:a,queryKey:c,stale:d}=n;if(c){if(r){if(e.queryHash!==mv(c,e.options))return!1}else if(!Pu(e.queryKey,c))return!1}if(t!=="all"){const h=e.isActive();if(t==="active"&&!h||t==="inactive"&&h)return!1}return!(typeof d=="boolean"&&e.isStale()!==d||i&&i!==e.state.fetchStatus||a&&!a(e))}function g_(n,e){const{exact:t,status:r,predicate:i,mutationKey:a}=n;if(a){if(!e.options.mutationKey)return!1;if(t){if(Au(e.options.mutationKey)!==Au(a))return!1}else if(!Pu(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function mv(n,e){return((e==null?void 0:e.queryKeyHashFn)||Au)(n)}function Au(n){return JSON.stringify(n,(e,t)=>ly(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function Pu(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Pu(n[t],e[t])):!1}function uS(n,e){if(n===e)return n;const t=y_(n)&&y_(e);if(t||ly(n)&&ly(e)){const r=t?n:Object.keys(n),i=r.length,a=t?e:Object.keys(e),c=a.length,d=t?[]:{},h=new Set(r);let p=0;for(let g=0;g<c;g++){const y=t?g:a[g];(!t&&h.has(y)||t)&&n[y]===void 0&&e[y]===void 0?(d[y]=void 0,p++):(d[y]=uS(n[y],e[y]),d[y]===n[y]&&n[y]!==void 0&&p++)}return i===c&&p===i?n:d}return e}function y_(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function ly(n){if(!v_(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!v_(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function v_(n){return Object.prototype.toString.call(n)==="[object Object]"}function C2(n){return new Promise(e=>{setTimeout(e,n)})}function I2(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?uS(n,e):e}function j2(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function A2(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var gv=Symbol();function dS(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===gv?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var ha,ro,Ul,jb,P2=(jb=class extends np{constructor(){super();_t(this,ha);_t(this,ro);_t(this,Ul);st(this,Ul,e=>{if(!rp&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){ce(this,ro)||this.setEventListener(ce(this,Ul))}onUnsubscribe(){var e;this.hasListeners()||((e=ce(this,ro))==null||e.call(this),st(this,ro,void 0))}setEventListener(e){var t;st(this,Ul,e),(t=ce(this,ro))==null||t.call(this),st(this,ro,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ce(this,ha)!==e&&(st(this,ha,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof ce(this,ha)=="boolean"?ce(this,ha):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ha=new WeakMap,ro=new WeakMap,Ul=new WeakMap,jb),hS=new P2,zl,so,$l,Ab,R2=(Ab=class extends np{constructor(){super();_t(this,zl,!0);_t(this,so);_t(this,$l);st(this,$l,e=>{if(!rp&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){ce(this,so)||this.setEventListener(ce(this,$l))}onUnsubscribe(){var e;this.hasListeners()||((e=ce(this,so))==null||e.call(this),st(this,so,void 0))}setEventListener(e){var t;st(this,$l,e),(t=ce(this,so))==null||t.call(this),st(this,so,e(this.setOnline.bind(this)))}setOnline(e){ce(this,zl)!==e&&(st(this,zl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ce(this,zl)}},zl=new WeakMap,so=new WeakMap,$l=new WeakMap,Ab),_f=new R2;function k2(){let n,e;const t=new Promise((i,a)=>{n=i,e=a});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function O2(n){return Math.min(1e3*2**n,3e4)}function fS(n){return(n??"online")==="online"?_f.isOnline():!0}var pS=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function wg(n){return n instanceof pS}function mS(n){let e=!1,t=0,r=!1,i;const a=k2(),c=_=>{var w;r||(v(new pS(_)),(w=n.abort)==null||w.call(n))},d=()=>{e=!0},h=()=>{e=!1},p=()=>hS.isFocused()&&(n.networkMode==="always"||_f.isOnline())&&n.canRun(),g=()=>fS(n.networkMode)&&n.canRun(),y=_=>{var w;r||(r=!0,(w=n.onSuccess)==null||w.call(n,_),i==null||i(),a.resolve(_))},v=_=>{var w;r||(r=!0,(w=n.onError)==null||w.call(n,_),i==null||i(),a.reject(_))},b=()=>new Promise(_=>{var w;i=P=>{(r||p())&&_(P)},(w=n.onPause)==null||w.call(n)}).then(()=>{var _;i=void 0,r||(_=n.onContinue)==null||_.call(n)}),S=()=>{if(r)return;let _;const w=t===0?n.initialPromise:void 0;try{_=w??n.fn()}catch(P){_=Promise.reject(P)}Promise.resolve(_).then(y).catch(P=>{var B;if(r)return;const I=n.retry??(rp?0:3),C=n.retryDelay??O2,M=typeof C=="function"?C(t,P):C,z=I===!0||typeof I=="number"&&t<I||typeof I=="function"&&I(t,P);if(e||!z){v(P);return}t++,(B=n.onFail)==null||B.call(n,t,P),C2(M).then(()=>p()?void 0:b()).then(()=>{e?v(P):S()})})};return{promise:a,cancel:c,continue:()=>(i==null||i(),a),cancelRetry:d,continueRetry:h,canStart:g,start:()=>(g()?S():b().then(S),a)}}var D2=n=>setTimeout(n,0);function L2(){let n=[],e=0,t=d=>{d()},r=d=>{d()},i=D2;const a=d=>{e?n.push(d):i(()=>{t(d)})},c=()=>{const d=n;n=[],d.length&&i(()=>{r(()=>{d.forEach(h=>{t(h)})})})};return{batch:d=>{let h;e++;try{h=d()}finally{e--,e||c()}return h},batchCalls:d=>(...h)=>{a(()=>{d(...h)})},schedule:a,setNotifyFunction:d=>{t=d},setBatchNotifyFunction:d=>{r=d},setScheduler:d=>{i=d}}}var Jn=L2(),fa,Pb,gS=(Pb=class{constructor(){_t(this,fa)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),S2(this.gcTime)&&st(this,fa,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(rp?1/0:5*60*1e3))}clearGcTimeout(){ce(this,fa)&&(clearTimeout(ce(this,fa)),st(this,fa,void 0))}},fa=new WeakMap,Pb),Bl,pa,Mr,ma,Un,Ku,ga,ss,ci,Rb,M2=(Rb=class extends gS{constructor(t){super();_t(this,ss);_t(this,Bl);_t(this,pa);_t(this,Mr);_t(this,ma);_t(this,Un);_t(this,Ku);_t(this,ga);st(this,ga,!1),st(this,Ku,t.defaultOptions),this.setOptions(t.options),this.observers=[],st(this,ma,t.client),st(this,Mr,ce(this,ma).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,st(this,Bl,V2(this.options)),this.state=t.state??ce(this,Bl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=ce(this,Un))==null?void 0:t.promise}setOptions(t){this.options={...ce(this,Ku),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ce(this,Mr).remove(this)}setData(t,r){const i=I2(this.state.data,t,this.options);return Fn(this,ss,ci).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(t,r){Fn(this,ss,ci).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var i,a;const r=(i=ce(this,Un))==null?void 0:i.promise;return(a=ce(this,Un))==null||a.cancel(t),r?r.then(rs).catch(rs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ce(this,Bl))}isActive(){return this.observers.some(t=>T2(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===gv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ay(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!N2(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(i=>i.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=ce(this,Un))==null||r.continue()}onOnline(){var r;const t=this.observers.find(i=>i.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=ce(this,Un))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),ce(this,Mr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(ce(this,Un)&&(ce(this,ga)?ce(this,Un).cancel({revert:!0}):ce(this,Un).cancelRetry()),this.scheduleGc()),ce(this,Mr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Fn(this,ss,ci).call(this,{type:"invalidate"})}fetch(t,r){var g,y,v;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(ce(this,Un))return ce(this,Un).continueRetry(),ce(this,Un).promise}if(t&&this.setOptions(t),!this.options.queryFn){const b=this.observers.find(S=>S.options.queryFn);b&&this.setOptions(b.options)}const i=new AbortController,a=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(st(this,ga,!0),i.signal)})},c=()=>{const b=dS(this.options,r),_=(()=>{const w={client:ce(this,ma),queryKey:this.queryKey,meta:this.meta};return a(w),w})();return st(this,ga,!1),this.options.persister?this.options.persister(b,_,this):b(_)},h=(()=>{const b={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:ce(this,ma),state:this.state,fetchFn:c};return a(b),b})();(g=this.options.behavior)==null||g.onFetch(h,this),st(this,pa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((y=h.fetchOptions)==null?void 0:y.meta))&&Fn(this,ss,ci).call(this,{type:"fetch",meta:(v=h.fetchOptions)==null?void 0:v.meta});const p=b=>{var S,_,w,P;wg(b)&&b.silent||Fn(this,ss,ci).call(this,{type:"error",error:b}),wg(b)||((_=(S=ce(this,Mr).config).onError)==null||_.call(S,b,this),(P=(w=ce(this,Mr).config).onSettled)==null||P.call(w,this.state.data,b,this)),this.scheduleGc()};return st(this,Un,mS({initialPromise:r==null?void 0:r.initialPromise,fn:h.fetchFn,abort:i.abort.bind(i),onSuccess:b=>{var S,_,w,P;if(b===void 0){p(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(b)}catch(I){p(I);return}(_=(S=ce(this,Mr).config).onSuccess)==null||_.call(S,b,this),(P=(w=ce(this,Mr).config).onSettled)==null||P.call(w,b,this.state.error,this),this.scheduleGc()},onError:p,onFail:(b,S)=>{Fn(this,ss,ci).call(this,{type:"failed",failureCount:b,error:S})},onPause:()=>{Fn(this,ss,ci).call(this,{type:"pause"})},onContinue:()=>{Fn(this,ss,ci).call(this,{type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0})),ce(this,Un).start()}},Bl=new WeakMap,pa=new WeakMap,Mr=new WeakMap,ma=new WeakMap,Un=new WeakMap,Ku=new WeakMap,ga=new WeakMap,ss=new WeakSet,ci=function(t){const r=i=>{switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...F2(i.data,this.options),fetchMeta:t.meta??null};case"success":return st(this,pa,void 0),{...i,data:t.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return wg(a)&&a.revert&&ce(this,pa)?{...ce(this,pa),fetchStatus:"idle"}:{...i,error:a,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=r(this.state),Jn.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),ce(this,Mr).notify({query:this,type:"updated",action:t})})},Rb);function F2(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:fS(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function V2(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Ss,kb,U2=(kb=class extends np{constructor(e={}){super();_t(this,Ss);this.config=e,st(this,Ss,new Map)}build(e,t,r){const i=t.queryKey,a=t.queryHash??mv(i,t);let c=this.get(a);return c||(c=new M2({client:e,queryKey:i,queryHash:a,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(c)),c}add(e){ce(this,Ss).has(e.queryHash)||(ce(this,Ss).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=ce(this,Ss).get(e.queryHash);t&&(e.destroy(),t===e&&ce(this,Ss).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Jn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ce(this,Ss).get(e)}getAll(){return[...ce(this,Ss).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>m_(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>m_(e,r)):t}notify(e){Jn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Jn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Jn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ss=new WeakMap,kb),Ns,Xn,ya,Ts,Xi,Ob,z2=(Ob=class extends gS{constructor(t){super();_t(this,Ts);_t(this,Ns);_t(this,Xn);_t(this,ya);this.mutationId=t.mutationId,st(this,Xn,t.mutationCache),st(this,Ns,[]),this.state=t.state||$2(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){ce(this,Ns).includes(t)||(ce(this,Ns).push(t),this.clearGcTimeout(),ce(this,Xn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){st(this,Ns,ce(this,Ns).filter(r=>r!==t)),this.scheduleGc(),ce(this,Xn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){ce(this,Ns).length||(this.state.status==="pending"?this.scheduleGc():ce(this,Xn).remove(this))}continue(){var t;return((t=ce(this,ya))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var c,d,h,p,g,y,v,b,S,_,w,P,I,C,M,z,B,A,R,D;const r=()=>{Fn(this,Ts,Xi).call(this,{type:"continue"})};st(this,ya,mS({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(O,V)=>{Fn(this,Ts,Xi).call(this,{type:"failed",failureCount:O,error:V})},onPause:()=>{Fn(this,Ts,Xi).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ce(this,Xn).canRun(this)}));const i=this.state.status==="pending",a=!ce(this,ya).canStart();try{if(i)r();else{Fn(this,Ts,Xi).call(this,{type:"pending",variables:t,isPaused:a}),await((d=(c=ce(this,Xn).config).onMutate)==null?void 0:d.call(c,t,this));const V=await((p=(h=this.options).onMutate)==null?void 0:p.call(h,t));V!==this.state.context&&Fn(this,Ts,Xi).call(this,{type:"pending",context:V,variables:t,isPaused:a})}const O=await ce(this,ya).start();return await((y=(g=ce(this,Xn).config).onSuccess)==null?void 0:y.call(g,O,t,this.state.context,this)),await((b=(v=this.options).onSuccess)==null?void 0:b.call(v,O,t,this.state.context)),await((_=(S=ce(this,Xn).config).onSettled)==null?void 0:_.call(S,O,null,this.state.variables,this.state.context,this)),await((P=(w=this.options).onSettled)==null?void 0:P.call(w,O,null,t,this.state.context)),Fn(this,Ts,Xi).call(this,{type:"success",data:O}),O}catch(O){try{throw await((C=(I=ce(this,Xn).config).onError)==null?void 0:C.call(I,O,t,this.state.context,this)),await((z=(M=this.options).onError)==null?void 0:z.call(M,O,t,this.state.context)),await((A=(B=ce(this,Xn).config).onSettled)==null?void 0:A.call(B,void 0,O,this.state.variables,this.state.context,this)),await((D=(R=this.options).onSettled)==null?void 0:D.call(R,void 0,O,t,this.state.context)),O}finally{Fn(this,Ts,Xi).call(this,{type:"error",error:O})}}finally{ce(this,Xn).runNext(this)}}},Ns=new WeakMap,Xn=new WeakMap,ya=new WeakMap,Ts=new WeakSet,Xi=function(t){const r=i=>{switch(t.type){case"failed":return{...i,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...i,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:t.error,failureCount:i.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Jn.batch(()=>{ce(this,Ns).forEach(i=>{i.onMutationUpdate(t)}),ce(this,Xn).notify({mutation:this,type:"updated",action:t})})},Ob);function $2(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var di,is,Gu,Db,B2=(Db=class extends np{constructor(e={}){super();_t(this,di);_t(this,is);_t(this,Gu);this.config=e,st(this,di,new Set),st(this,is,new Map),st(this,Gu,0)}build(e,t,r){const i=new z2({mutationCache:this,mutationId:++Ph(this,Gu)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){ce(this,di).add(e);const t=Fh(e);if(typeof t=="string"){const r=ce(this,is).get(t);r?r.push(e):ce(this,is).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ce(this,di).delete(e)){const t=Fh(e);if(typeof t=="string"){const r=ce(this,is).get(t);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&ce(this,is).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Fh(e);if(typeof t=="string"){const r=ce(this,is).get(t),i=r==null?void 0:r.find(a=>a.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const t=Fh(e);if(typeof t=="string"){const i=(r=ce(this,is).get(t))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Jn.batch(()=>{ce(this,di).forEach(e=>{this.notify({type:"removed",mutation:e})}),ce(this,di).clear(),ce(this,is).clear()})}getAll(){return Array.from(ce(this,di))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>g_(t,r))}findAll(e={}){return this.getAll().filter(t=>g_(e,t))}notify(e){Jn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Jn.batch(()=>Promise.all(e.map(t=>t.continue().catch(rs))))}},di=new WeakMap,is=new WeakMap,Gu=new WeakMap,Db);function Fh(n){var e;return(e=n.options.scope)==null?void 0:e.id}function x_(n){return{onFetch:(e,t)=>{var g,y,v,b,S;const r=e.options,i=(v=(y=(g=e.fetchOptions)==null?void 0:g.meta)==null?void 0:y.fetchMore)==null?void 0:v.direction,a=((b=e.state.data)==null?void 0:b.pages)||[],c=((S=e.state.data)==null?void 0:S.pageParams)||[];let d={pages:[],pageParams:[]},h=0;const p=async()=>{let _=!1;const w=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?_=!0:e.signal.addEventListener("abort",()=>{_=!0}),e.signal)})},P=dS(e.options,e.fetchOptions),I=async(C,M,z)=>{if(_)return Promise.reject();if(M==null&&C.pages.length)return Promise.resolve(C);const A=(()=>{const V={client:e.client,queryKey:e.queryKey,pageParam:M,direction:z?"backward":"forward",meta:e.options.meta};return w(V),V})(),R=await P(A),{maxPages:D}=e.options,O=z?A2:j2;return{pages:O(C.pages,R,D),pageParams:O(C.pageParams,M,D)}};if(i&&a.length){const C=i==="backward",M=C?q2:w_,z={pages:a,pageParams:c},B=M(r,z);d=await I(z,B,C)}else{const C=n??a.length;do{const M=h===0?c[0]??r.initialPageParam:w_(r,d);if(h>0&&M==null)break;d=await I(d,M),h++}while(h<C)}return d};e.options.persister?e.fetchFn=()=>{var _,w;return(w=(_=e.options).persister)==null?void 0:w.call(_,p,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=p}}}function w_(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function q2(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var en,io,oo,ql,Wl,ao,Hl,Kl,Lb,W2=(Lb=class{constructor(n={}){_t(this,en);_t(this,io);_t(this,oo);_t(this,ql);_t(this,Wl);_t(this,ao);_t(this,Hl);_t(this,Kl);st(this,en,n.queryCache||new U2),st(this,io,n.mutationCache||new B2),st(this,oo,n.defaultOptions||{}),st(this,ql,new Map),st(this,Wl,new Map),st(this,ao,0)}mount(){Ph(this,ao)._++,ce(this,ao)===1&&(st(this,Hl,hS.subscribe(async n=>{n&&(await this.resumePausedMutations(),ce(this,en).onFocus())})),st(this,Kl,_f.subscribe(async n=>{n&&(await this.resumePausedMutations(),ce(this,en).onOnline())})))}unmount(){var n,e;Ph(this,ao)._--,ce(this,ao)===0&&((n=ce(this,Hl))==null||n.call(this),st(this,Hl,void 0),(e=ce(this,Kl))==null||e.call(this),st(this,Kl,void 0))}isFetching(n){return ce(this,en).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return ce(this,io).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ce(this,en).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=ce(this,en).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(ay(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return ce(this,en).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=ce(this,en).get(r.queryHash),a=i==null?void 0:i.state.data,c=b2(e,a);if(c!==void 0)return ce(this,en).build(this,r).setData(c,{...t,manual:!0})}setQueriesData(n,e,t){return Jn.batch(()=>ce(this,en).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ce(this,en).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=ce(this,en);Jn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=ce(this,en);return Jn.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=Jn.batch(()=>ce(this,en).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(rs).catch(rs)}invalidateQueries(n,e={}){return Jn.batch(()=>(ce(this,en).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=Jn.batch(()=>ce(this,en).findAll(n).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,t);return t.throwOnError||(a=a.catch(rs)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(rs)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=ce(this,en).build(this,e);return t.isStaleByTime(ay(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(rs).catch(rs)}fetchInfiniteQuery(n){return n.behavior=x_(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(rs).catch(rs)}ensureInfiniteQueryData(n){return n.behavior=x_(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return _f.isOnline()?ce(this,io).resumePausedMutations():Promise.resolve()}getQueryCache(){return ce(this,en)}getMutationCache(){return ce(this,io)}getDefaultOptions(){return ce(this,oo)}setDefaultOptions(n){st(this,oo,n)}setQueryDefaults(n,e){ce(this,ql).set(Au(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...ce(this,ql).values()],t={};return e.forEach(r=>{Pu(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){ce(this,Wl).set(Au(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...ce(this,Wl).values()],t={};return e.forEach(r=>{Pu(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...ce(this,oo).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=mv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===gv&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...ce(this,oo).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){ce(this,en).clear(),ce(this,io).clear()}},en=new WeakMap,io=new WeakMap,oo=new WeakMap,ql=new WeakMap,Wl=new WeakMap,ao=new WeakMap,Hl=new WeakMap,Kl=new WeakMap,Lb),H2=E.createContext(void 0),K2=({client:n,children:e})=>(E.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),l.jsx(H2.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ru(){return Ru=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ru.apply(this,arguments)}var co;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(co||(co={}));const __="popstate";function G2(n){n===void 0&&(n={});function e(r,i){let{pathname:a,search:c,hash:d}=r.location;return cy("",{pathname:a,search:c,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Ef(i)}return Y2(e,t,null,n)}function Yt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function yS(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Q2(){return Math.random().toString(36).substr(2,8)}function E_(n,e){return{usr:n.state,key:n.key,idx:e}}function cy(n,e,t,r){return t===void 0&&(t=null),Ru({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?fc(e):e,{state:t,key:e&&e.key||r||Q2()})}function Ef(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function fc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function Y2(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,c=i.history,d=co.Pop,h=null,p=g();p==null&&(p=0,c.replaceState(Ru({},c.state,{idx:p}),""));function g(){return(c.state||{idx:null}).idx}function y(){d=co.Pop;let w=g(),P=w==null?null:w-p;p=w,h&&h({action:d,location:_.location,delta:P})}function v(w,P){d=co.Push;let I=cy(_.location,w,P);p=g()+1;let C=E_(I,p),M=_.createHref(I);try{c.pushState(C,"",M)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(M)}a&&h&&h({action:d,location:_.location,delta:1})}function b(w,P){d=co.Replace;let I=cy(_.location,w,P);p=g();let C=E_(I,p),M=_.createHref(I);c.replaceState(C,"",M),a&&h&&h({action:d,location:_.location,delta:0})}function S(w){let P=i.location.origin!=="null"?i.location.origin:i.location.href,I=typeof w=="string"?w:Ef(w);return I=I.replace(/ $/,"%20"),Yt(P,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,P)}let _={get action(){return d},get location(){return n(i,c)},listen(w){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(__,y),h=w,()=>{i.removeEventListener(__,y),h=null}},createHref(w){return e(i,w)},createURL:S,encodeLocation(w){let P=S(w);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:v,replace:b,go(w){return c.go(w)}};return _}var b_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(b_||(b_={}));function X2(n,e,t){return t===void 0&&(t="/"),J2(n,e,t)}function J2(n,e,t,r){let i=typeof e=="string"?fc(e):e,a=Zl(i.pathname||"/",t);if(a==null)return null;let c=vS(n);Z2(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let p=uO(a);d=lO(c[h],p)}return d}function vS(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(a,c,d)=>{let h={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};h.relativePath.startsWith("/")&&(Yt(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let p=ho([r,h.relativePath]),g=t.concat(h);a.children&&a.children.length>0&&(Yt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),vS(a.children,e,g,p)),!(a.path==null&&!a.index)&&e.push({path:p,score:oO(p,a.index),routesMeta:g})};return n.forEach((a,c)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))i(a,c);else for(let h of xS(a.path))i(a,c,h)}),e}function xS(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let c=xS(r.join("/")),d=[];return d.push(...c.map(h=>h===""?a:[a,h].join("/"))),i&&d.push(...c),d.map(h=>n.startsWith("/")&&h===""?"/":h)}function Z2(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:aO(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const eO=/^:[\w-]+$/,tO=3,nO=2,rO=1,sO=10,iO=-2,S_=n=>n==="*";function oO(n,e){let t=n.split("/"),r=t.length;return t.some(S_)&&(r+=iO),e&&(r+=nO),t.filter(i=>!S_(i)).reduce((i,a)=>i+(eO.test(a)?tO:a===""?rO:sO),r)}function aO(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function lO(n,e,t){let{routesMeta:r}=n,i={},a="/",c=[];for(let d=0;d<r.length;++d){let h=r[d],p=d===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",y=uy({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},g),v=h.route;if(!y)return null;Object.assign(i,y.params),c.push({params:i,pathname:ho([a,y.pathname]),pathnameBase:pO(ho([a,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(a=ho([a,y.pathnameBase]))}return c}function uy(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=cO(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],c=a.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((p,g,y)=>{let{paramName:v,isOptional:b}=g;if(v==="*"){let _=d[y]||"";c=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const S=d[y];return b&&!S?p[v]=void 0:p[v]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:c,pattern:n}}function cO(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),yS(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h)=>(r.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function uO(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yS(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Zl(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function dO(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?fc(n):n;return{pathname:t?t.startsWith("/")?t:hO(t,e):e,search:mO(r),hash:gO(i)}}function hO(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function _g(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function yv(n,e){let t=fO(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function vv(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=fc(n):(i=Ru({},n),Yt(!i.pathname||!i.pathname.includes("?"),_g("?","pathname","search",i)),Yt(!i.pathname||!i.pathname.includes("#"),_g("#","pathname","hash",i)),Yt(!i.search||!i.search.includes("#"),_g("#","search","hash",i)));let a=n===""||i.pathname==="",c=a?"/":i.pathname,d;if(c==null)d=t;else{let y=e.length-1;if(!r&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;i.pathname=v.join("/")}d=y>=0?e[y]:"/"}let h=dO(i,d),p=c&&c!=="/"&&c.endsWith("/"),g=(a||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(p||g)&&(h.pathname+="/"),h}const ho=n=>n.join("/").replace(/\/\/+/g,"/"),pO=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),mO=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,gO=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function yO(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const wS=["post","put","patch","delete"];new Set(wS);const vO=["get",...wS];new Set(vO);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ku(){return ku=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ku.apply(this,arguments)}const sp=E.createContext(null),_S=E.createContext(null),bi=E.createContext(null),ip=E.createContext(null),qs=E.createContext({outlet:null,matches:[],isDataRoute:!1}),ES=E.createContext(null);function xO(n,e){let{relative:t}=e===void 0?{}:e;pc()||Yt(!1);let{basename:r,navigator:i}=E.useContext(bi),{hash:a,pathname:c,search:d}=op(n,{relative:t}),h=c;return r!=="/"&&(h=c==="/"?r:ho([r,c])),i.createHref({pathname:h,search:d,hash:a})}function pc(){return E.useContext(ip)!=null}function Ro(){return pc()||Yt(!1),E.useContext(ip).location}function bS(n){E.useContext(bi).static||E.useLayoutEffect(n)}function ed(){let{isDataRoute:n}=E.useContext(qs);return n?OO():wO()}function wO(){pc()||Yt(!1);let n=E.useContext(sp),{basename:e,future:t,navigator:r}=E.useContext(bi),{matches:i}=E.useContext(qs),{pathname:a}=Ro(),c=JSON.stringify(yv(i,t.v7_relativeSplatPath)),d=E.useRef(!1);return bS(()=>{d.current=!0}),E.useCallback(function(p,g){if(g===void 0&&(g={}),!d.current)return;if(typeof p=="number"){r.go(p);return}let y=vv(p,JSON.parse(c),a,g.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:ho([e,y.pathname])),(g.replace?r.replace:r.push)(y,g.state,g)},[e,r,c,a,n])}const _O=E.createContext(null);function EO(n){let e=E.useContext(qs).outlet;return e&&E.createElement(_O.Provider,{value:n},e)}function SS(){let{matches:n}=E.useContext(qs),e=n[n.length-1];return e?e.params:{}}function op(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=E.useContext(bi),{matches:i}=E.useContext(qs),{pathname:a}=Ro(),c=JSON.stringify(yv(i,r.v7_relativeSplatPath));return E.useMemo(()=>vv(n,JSON.parse(c),a,t==="path"),[n,c,a,t])}function bO(n,e){return SO(n,e)}function SO(n,e,t,r){pc()||Yt(!1);let{navigator:i}=E.useContext(bi),{matches:a}=E.useContext(qs),c=a[a.length-1],d=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let p=Ro(),g;if(e){var y;let w=typeof e=="string"?fc(e):e;h==="/"||(y=w.pathname)!=null&&y.startsWith(h)||Yt(!1),g=w}else g=p;let v=g.pathname||"/",b=v;if(h!=="/"){let w=h.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(w.length).join("/")}let S=X2(n,{pathname:b}),_=jO(S&&S.map(w=>Object.assign({},w,{params:Object.assign({},d,w.params),pathname:ho([h,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?h:ho([h,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,t,r);return e&&_?E.createElement(ip.Provider,{value:{location:ku({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:co.Pop}},_):_}function NO(){let n=kO(),e=yO(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),t?E.createElement("pre",{style:i},t):null,null)}const TO=E.createElement(NO,null);class CO extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?E.createElement(qs.Provider,{value:this.props.routeContext},E.createElement(ES.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function IO(n){let{routeContext:e,match:t,children:r}=n,i=E.useContext(sp);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),E.createElement(qs.Provider,{value:e},r)}function jO(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,d=(i=t)==null?void 0:i.errors;if(d!=null){let g=c.findIndex(y=>y.route.id&&(d==null?void 0:d[y.route.id])!==void 0);g>=0||Yt(!1),c=c.slice(0,Math.min(c.length,g+1))}let h=!1,p=-1;if(t&&r&&r.v7_partialHydration)for(let g=0;g<c.length;g++){let y=c[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=g),y.route.id){let{loaderData:v,errors:b}=t,S=y.route.loader&&v[y.route.id]===void 0&&(!b||b[y.route.id]===void 0);if(y.route.lazy||S){h=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}return c.reduceRight((g,y,v)=>{let b,S=!1,_=null,w=null;t&&(b=d&&y.route.id?d[y.route.id]:void 0,_=y.route.errorElement||TO,h&&(p<0&&v===0?(DO("route-fallback"),S=!0,w=null):p===v&&(S=!0,w=y.route.hydrateFallbackElement||null)));let P=e.concat(c.slice(0,v+1)),I=()=>{let C;return b?C=_:S?C=w:y.route.Component?C=E.createElement(y.route.Component,null):y.route.element?C=y.route.element:C=g,E.createElement(IO,{match:y,routeContext:{outlet:g,matches:P,isDataRoute:t!=null},children:C})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?E.createElement(CO,{location:t.location,revalidation:t.revalidation,component:_,error:b,children:I(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):I()},null)}var NS=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(NS||{}),TS=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(TS||{});function AO(n){let e=E.useContext(sp);return e||Yt(!1),e}function PO(n){let e=E.useContext(_S);return e||Yt(!1),e}function RO(n){let e=E.useContext(qs);return e||Yt(!1),e}function CS(n){let e=RO(),t=e.matches[e.matches.length-1];return t.route.id||Yt(!1),t.route.id}function kO(){var n;let e=E.useContext(ES),t=PO(),r=CS();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function OO(){let{router:n}=AO(NS.UseNavigateStable),e=CS(TS.UseNavigateStable),t=E.useRef(!1);return bS(()=>{t.current=!0}),E.useCallback(function(i,a){a===void 0&&(a={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,ku({fromRouteId:e},a)))},[n,e])}const N_={};function DO(n,e,t){N_[n]||(N_[n]=!0)}function Zh(n){let{to:e,replace:t,state:r,relative:i}=n;pc()||Yt(!1);let{future:a,static:c}=E.useContext(bi),{matches:d}=E.useContext(qs),{pathname:h}=Ro(),p=ed(),g=vv(e,yv(d,a.v7_relativeSplatPath),h,i==="path"),y=JSON.stringify(g);return E.useEffect(()=>p(JSON.parse(y),{replace:t,state:r,relative:i}),[p,y,i,t,r]),null}function LO(n){return EO(n.context)}function Ut(n){Yt(!1)}function MO(n){let{basename:e="/",children:t=null,location:r,navigationType:i=co.Pop,navigator:a,static:c=!1,future:d}=n;pc()&&Yt(!1);let h=e.replace(/^\/*/,"/"),p=E.useMemo(()=>({basename:h,navigator:a,static:c,future:ku({v7_relativeSplatPath:!1},d)}),[h,d,a,c]);typeof r=="string"&&(r=fc(r));let{pathname:g="/",search:y="",hash:v="",state:b=null,key:S="default"}=r,_=E.useMemo(()=>{let w=Zl(g,h);return w==null?null:{location:{pathname:w,search:y,hash:v,state:b,key:S},navigationType:i}},[h,g,y,v,b,S,i]);return _==null?null:E.createElement(bi.Provider,{value:p},E.createElement(ip.Provider,{children:t,value:_}))}function FO(n){let{children:e,location:t}=n;return bO(dy(e),t)}new Promise(()=>{});function dy(n,e){e===void 0&&(e=[]);let t=[];return E.Children.forEach(n,(r,i)=>{if(!E.isValidElement(r))return;let a=[...e,i];if(r.type===E.Fragment){t.push.apply(t,dy(r.props.children,a));return}r.type!==Ut&&Yt(!1),!r.props.index||!r.props.children||Yt(!1);let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=dy(r.props.children,a)),t.push(c)}),t}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bf(){return bf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},bf.apply(this,arguments)}function IS(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function VO(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function UO(n,e){return n.button===0&&(!e||e==="_self")&&!VO(n)}function hy(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function zO(n,e){let t=hy(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(a=>{t.append(i,a)})}),t}const $O=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],BO=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],qO="6";try{window.__reactRouterVersion=qO}catch{}const WO=E.createContext({isTransitioning:!1}),HO="startTransition",T_=Fb[HO];function KO(n){let{basename:e,children:t,future:r,window:i}=n,a=E.useRef();a.current==null&&(a.current=G2({window:i,v5Compat:!0}));let c=a.current,[d,h]=E.useState({action:c.action,location:c.location}),{v7_startTransition:p}=r||{},g=E.useCallback(y=>{p&&T_?T_(()=>h(y)):h(y)},[h,p]);return E.useLayoutEffect(()=>c.listen(g),[c,g]),E.createElement(MO,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:c,future:r})}const GO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bn=E.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:a,replace:c,state:d,target:h,to:p,preventScrollReset:g,unstable_viewTransition:y}=e,v=IS(e,$O),{basename:b}=E.useContext(bi),S,_=!1;if(typeof p=="string"&&QO.test(p)&&(S=p,GO))try{let C=new URL(window.location.href),M=p.startsWith("//")?new URL(C.protocol+p):new URL(p),z=Zl(M.pathname,b);M.origin===C.origin&&z!=null?p=z+M.search+M.hash:_=!0}catch{}let w=xO(p,{relative:i}),P=XO(p,{replace:c,state:d,target:h,preventScrollReset:g,relative:i,unstable_viewTransition:y});function I(C){r&&r(C),C.defaultPrevented||P(C)}return E.createElement("a",bf({},v,{href:S||w,onClick:_||a?r:I,ref:t,target:h}))}),C_=E.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:i=!1,className:a="",end:c=!1,style:d,to:h,unstable_viewTransition:p,children:g}=e,y=IS(e,BO),v=op(h,{relative:y.relative}),b=Ro(),S=E.useContext(_S),{navigator:_,basename:w}=E.useContext(bi),P=S!=null&&JO(v)&&p===!0,I=_.encodeLocation?_.encodeLocation(v).pathname:v.pathname,C=b.pathname,M=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;i||(C=C.toLowerCase(),M=M?M.toLowerCase():null,I=I.toLowerCase()),M&&w&&(M=Zl(M,w)||M);const z=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let B=C===I||!c&&C.startsWith(I)&&C.charAt(z)==="/",A=M!=null&&(M===I||!c&&M.startsWith(I)&&M.charAt(I.length)==="/"),R={isActive:B,isPending:A,isTransitioning:P},D=B?r:void 0,O;typeof a=="function"?O=a(R):O=[a,B?"active":null,A?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let V=typeof d=="function"?d(R):d;return E.createElement(Bn,bf({},y,{"aria-current":D,className:O,ref:t,style:V,to:h,unstable_viewTransition:p}),typeof g=="function"?g(R):g)});var fy;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(fy||(fy={}));var I_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(I_||(I_={}));function YO(n){let e=E.useContext(sp);return e||Yt(!1),e}function XO(n,e){let{target:t,replace:r,state:i,preventScrollReset:a,relative:c,unstable_viewTransition:d}=e===void 0?{}:e,h=ed(),p=Ro(),g=op(n,{relative:c});return E.useCallback(y=>{if(UO(y,t)){y.preventDefault();let v=r!==void 0?r:Ef(p)===Ef(g);h(n,{replace:v,state:i,preventScrollReset:a,relative:c,unstable_viewTransition:d})}},[p,h,g,r,i,t,n,a,c,d])}function td(n){let e=E.useRef(hy(n)),t=E.useRef(!1),r=Ro(),i=E.useMemo(()=>zO(r.search,t.current?null:e.current),[r.search]),a=ed(),c=E.useCallback((d,h)=>{const p=hy(typeof d=="function"?d(i):d);t.current=!0,a("?"+p,h)},[a,i]);return[i,c]}function JO(n,e){e===void 0&&(e={});let t=E.useContext(WO);t==null&&Yt(!1);let{basename:r}=YO(fy.useViewTransitionState),i=op(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Zl(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Zl(t.nextLocation.pathname,r)||t.nextLocation.pathname;return uy(i.pathname,c)!=null||uy(i.pathname,a)!=null}const ZO=()=>{};var j_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},eD=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],c=n[t++],d=n[t++],h=((i&7)<<18|(a&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|c&63)}}return e.join("")},AS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],c=i+1<n.length,d=c?n[i+1]:0,h=i+2<n.length,p=h?n[i+2]:0,g=a>>2,y=(a&3)<<4|d>>4;let v=(d&15)<<2|p>>6,b=p&63;h||(b=64,c||(v=64)),r.push(t[g],t[y],t[v],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(jS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):eD(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],d=i<n.length?t[n.charAt(i)]:0;++i;const p=i<n.length?t[n.charAt(i)]:64;++i;const y=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||d==null||p==null||y==null)throw new tD;const v=a<<2|d>>4;if(r.push(v),p!==64){const b=d<<4&240|p>>2;if(r.push(b),y!==64){const S=p<<6&192|y;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class tD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nD=function(n){const e=jS(n);return AS.encodeByteArray(e,!0)},Sf=function(n){return nD(n).replace(/\./g,"")},PS=function(n){try{return AS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=()=>rD().__FIREBASE_DEFAULTS__,iD=()=>{if(typeof process>"u"||typeof j_>"u")return;const n=j_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},oD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&PS(n[1]);return e&&JSON.parse(e)},ap=()=>{try{return ZO()||sD()||iD()||oD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},RS=n=>{var e,t;return(t=(e=ap())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},aD=n=>{const e=RS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},kS=()=>{var n;return(n=ap())===null||n===void 0?void 0:n.config},OS=n=>{var e;return(e=ap())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xv(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Sf(JSON.stringify(t)),Sf(JSON.stringify(c)),""].join(".")}const wu={};function uD(){const n={prod:[],emulator:[]};for(const e of Object.keys(wu))wu[e]?n.emulator.push(e):n.prod.push(e);return n}function dD(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let A_=!1;function DS(n,e){if(typeof window>"u"||typeof document>"u"||!Da(window.location.host)||wu[n]===e||wu[n]||A_)return;wu[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",a=uD().prod.length>0;function c(){const v=document.getElementById(r);v&&v.remove()}function d(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,b){v.setAttribute("width","24"),v.setAttribute("id",b),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function p(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{A_=!0,c()},v}function g(v,b){v.setAttribute("id",b),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=dD(r),b=t("text"),S=document.getElementById(b)||document.createElement("span"),_=t("learnmore"),w=document.getElementById(_)||document.createElement("a"),P=t("preprendIcon"),I=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const C=v.element;d(C),g(w,_);const M=p();h(I,P),C.append(I,S,w,M),document.body.appendChild(C)}a?(S.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qn())}function fD(){var n;const e=(n=ap())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mD(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function gD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yD(){const n=qn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function vD(){return!fD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xD(){try{return typeof indexedDB=="object"}catch{return!1}}function wD(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="FirebaseError";class Ws extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=_D,Object.setPrototypeOf(this,Ws.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nd.prototype.create)}}class nd{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],c=a?ED(a,r):"Error",d=`${this.serviceName}: ${c} (${i}).`;return new Ws(i,d,r)}}function ED(n,e){return n.replace(bD,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const bD=/\{\$([^}]+)}/g;function SD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ta(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],c=e[i];if(P_(a)&&P_(c)){if(!Ta(a,c))return!1}else if(a!==c)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function P_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function uu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function du(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function ND(n,e){const t=new TD(n,e);return t.subscribe.bind(t)}class TD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");CD(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Eg),i.error===void 0&&(i.error=Eg),i.complete===void 0&&(i.complete=Eg);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Eg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(n){return n&&n._delegate?n._delegate:n}class So{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new lD;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AD(e))try{this.getOrInitializeService({instanceIdentifier:ua})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=ua){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ua){return this.instances.has(e)}getOptions(e=ua){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&c.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const c=this.instances.get(i);return c&&e(c,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jD(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ua){return this.component?this.component.multipleInstances?e:ua:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jD(n){return n===ua?void 0:n}function AD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ID(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(dt||(dt={}));const RD={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},kD=dt.INFO,OD={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},DD=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=OD[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wv{constructor(e){this.name=e,this._logLevel=kD,this._logHandler=DD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...e),this._logHandler(this,dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...e),this._logHandler(this,dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...e),this._logHandler(this,dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...e),this._logHandler(this,dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...e),this._logHandler(this,dt.ERROR,...e)}}const LD=(n,e)=>e.some(t=>n instanceof t);let R_,k_;function MD(){return R_||(R_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FD(){return k_||(k_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LS=new WeakMap,py=new WeakMap,MS=new WeakMap,bg=new WeakMap,_v=new WeakMap;function VD(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(fo(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&LS.set(t,n)}).catch(()=>{}),_v.set(e,n),e}function UD(n){if(py.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});py.set(n,e)}let my={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return py.get(n);if(e==="objectStoreNames")return n.objectStoreNames||MS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function zD(n){my=n(my)}function $D(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Sg(this),e,...t);return MS.set(r,e.sort?e.sort():[e]),fo(r)}:FD().includes(n)?function(...e){return n.apply(Sg(this),e),fo(LS.get(this))}:function(...e){return fo(n.apply(Sg(this),e))}}function BD(n){return typeof n=="function"?$D(n):(n instanceof IDBTransaction&&UD(n),LD(n,MD())?new Proxy(n,my):n)}function fo(n){if(n instanceof IDBRequest)return VD(n);if(bg.has(n))return bg.get(n);const e=BD(n);return e!==n&&(bg.set(n,e),_v.set(e,n)),e}const Sg=n=>_v.get(n);function qD(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const c=indexedDB.open(n,e),d=fo(c);return r&&c.addEventListener("upgradeneeded",h=>{r(fo(c.result),h.oldVersion,h.newVersion,fo(c.transaction),h)}),t&&c.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),d.then(h=>{a&&h.addEventListener("close",()=>a()),i&&h.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const WD=["get","getKey","getAll","getAllKeys","count"],HD=["put","add","delete","clear"],Ng=new Map;function O_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ng.get(e))return Ng.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=HD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||WD.includes(t)))return;const a=async function(c,...d){const h=this.transaction(c,i?"readwrite":"readonly");let p=h.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),i&&h.done]))[0]};return Ng.set(e,a),a}zD(n=>({...n,get:(e,t,r)=>O_(e,t)||n.get(e,t,r),has:(e,t)=>!!O_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(GD(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function GD(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gy="@firebase/app",D_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=new wv("@firebase/app"),QD="@firebase/app-compat",YD="@firebase/analytics-compat",XD="@firebase/analytics",JD="@firebase/app-check-compat",ZD="@firebase/app-check",eL="@firebase/auth",tL="@firebase/auth-compat",nL="@firebase/database",rL="@firebase/data-connect",sL="@firebase/database-compat",iL="@firebase/functions",oL="@firebase/functions-compat",aL="@firebase/installations",lL="@firebase/installations-compat",cL="@firebase/messaging",uL="@firebase/messaging-compat",dL="@firebase/performance",hL="@firebase/performance-compat",fL="@firebase/remote-config",pL="@firebase/remote-config-compat",mL="@firebase/storage",gL="@firebase/storage-compat",yL="@firebase/firestore",vL="@firebase/ai",xL="@firebase/firestore-compat",wL="firebase",_L="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="[DEFAULT]",EL={[gy]:"fire-core",[QD]:"fire-core-compat",[XD]:"fire-analytics",[YD]:"fire-analytics-compat",[ZD]:"fire-app-check",[JD]:"fire-app-check-compat",[eL]:"fire-auth",[tL]:"fire-auth-compat",[nL]:"fire-rtdb",[rL]:"fire-data-connect",[sL]:"fire-rtdb-compat",[iL]:"fire-fn",[oL]:"fire-fn-compat",[aL]:"fire-iid",[lL]:"fire-iid-compat",[cL]:"fire-fcm",[uL]:"fire-fcm-compat",[dL]:"fire-perf",[hL]:"fire-perf-compat",[fL]:"fire-rc",[pL]:"fire-rc-compat",[mL]:"fire-gcs",[gL]:"fire-gcs-compat",[yL]:"fire-fst",[xL]:"fire-fst-compat",[vL]:"fire-vertex","fire-js":"fire-js",[wL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf=new Map,bL=new Map,vy=new Map;function L_(n,e){try{n.container.addComponent(e)}catch(t){yi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ca(n){const e=n.name;if(vy.has(e))return yi.debug(`There were multiple attempts to register component ${e}.`),!1;vy.set(e,n);for(const t of Nf.values())L_(t,n);for(const t of bL.values())L_(t,n);return!0}function lp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Fr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},po=new nd("app","Firebase",SL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new So("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw po.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La=_L;function FS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:yy,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw po.create("bad-app-name",{appName:String(i)});if(t||(t=kS()),!t)throw po.create("no-options");const a=Nf.get(i);if(a){if(Ta(t,a.options)&&Ta(r,a.config))return a;throw po.create("duplicate-app",{appName:i})}const c=new PD(i);for(const h of vy.values())c.addComponent(h);const d=new NL(t,r,c);return Nf.set(i,d),d}function VS(n=yy){const e=Nf.get(n);if(!e&&n===yy&&kS())return FS();if(!e)throw po.create("no-app",{appName:n});return e}function js(n,e,t){var r;let i=(r=EL[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const d=[`Unable to register library "${i}" with version "${e}":`];a&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yi.warn(d.join(" "));return}Ca(new So(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL="firebase-heartbeat-database",CL=1,Ou="firebase-heartbeat-store";let Tg=null;function US(){return Tg||(Tg=qD(TL,CL,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ou)}catch(t){console.warn(t)}}}}).catch(n=>{throw po.create("idb-open",{originalErrorMessage:n.message})})),Tg}async function IL(n){try{const t=(await US()).transaction(Ou),r=await t.objectStore(Ou).get(zS(n));return await t.done,r}catch(e){if(e instanceof Ws)yi.warn(e.message);else{const t=po.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yi.warn(t.message)}}}async function M_(n,e){try{const r=(await US()).transaction(Ou,"readwrite");await r.objectStore(Ou).put(e,zS(n)),await r.done}catch(t){if(t instanceof Ws)yi.warn(t.message);else{const r=po.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});yi.warn(r.message)}}}function zS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL=1024,AL=30;class PL{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new kL(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=F_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>AL){const c=OL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){yi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=F_(),{heartbeatsToSend:r,unsentEntries:i}=RL(this._heartbeatsCache.heartbeats),a=Sf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return yi.warn(t),""}}}function F_(){return new Date().toISOString().substring(0,10)}function RL(n,e=jL){const t=[];let r=n.slice();for(const i of n){const a=t.find(c=>c.agent===i.agent);if(a){if(a.dates.push(i.date),V_(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),V_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class kL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xD()?wD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await IL(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return M_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return M_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function V_(n){return Sf(JSON.stringify({version:2,heartbeats:n})).length}function OL(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(n){Ca(new So("platform-logger",e=>new KD(e),"PRIVATE")),Ca(new So("heartbeat",e=>new PL(e),"PRIVATE")),js(gy,D_,n),js(gy,D_,"esm2017"),js("fire-js","")}DL("");var Cs=function(){return Cs=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Cs.apply(this,arguments)};function sd(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function LL(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}function $S(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ML=$S,BS=new nd("auth","Firebase",$S());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf=new wv("@firebase/auth");function FL(n,...e){Tf.logLevel<=dt.WARN&&Tf.warn(`Auth (${La}): ${n}`,...e)}function ef(n,...e){Tf.logLevel<=dt.ERROR&&Tf.error(`Auth (${La}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(n,...e){throw Ev(n,...e)}function As(n,...e){return Ev(n,...e)}function qS(n,e,t){const r=Object.assign(Object.assign({},ML()),{[e]:t});return new nd("auth","Firebase",r).create(e,{appName:n.name})}function mo(n){return qS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ev(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return BS.create(n,...e)}function Ge(n,e,...t){if(!n)throw Ev(e,...t)}function hi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ef(e),new Error(e)}function vi(n,e){n||hi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function VL(){return U_()==="http:"||U_()==="https:"}function U_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VL()||mD()||"connection"in navigator)?navigator.onLine:!0}function zL(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,t){this.shortDelay=e,this.longDelay=t,vi(t>e,"Short delay should be less than long delay!"),this.isMobile=hD()||gD()}get(){return UL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(n,e){vi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qL=new id(3e4,6e4);function Ma(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ko(n,e,t,r,i={}){return HS(n,i,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const d=rd(Object.assign({key:n.config.apiKey},c)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:h},a);return pD()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Da(n.emulatorConfig.host)&&(p.credentials="include"),WS.fetch()(await KS(n,n.config.apiHost,t,d),p)})}async function HS(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},$L),e);try{const i=new HL(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Vh(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const d=a.ok?c.errorMessage:c.error.message,[h,p]=d.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vh(n,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw Vh(n,"email-already-in-use",c);if(h==="USER_DISABLED")throw Vh(n,"user-disabled",c);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw qS(n,g,p);hs(n,g)}}catch(i){if(i instanceof Ws)throw i;hs(n,"network-request-failed",{message:String(i)})}}async function cp(n,e,t,r,i={}){const a=await ko(n,e,t,r,i);return"mfaPendingCredential"in a&&hs(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function KS(n,e,t,r){const i=`${e}${t}?${r}`,a=n,c=a.config.emulator?bv(n.config,i):`${n.config.apiScheme}://${i}`;return BL.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function WL(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class HL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(As(this.auth,"network-request-failed")),qL.get())})}}function Vh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=As(n,e,r);return i.customData._tokenResponse=t,i}function z_(n){return n!==void 0&&n.enterprise!==void 0}class KL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return WL(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function GL(n,e){return ko(n,"GET","/v2/recaptchaConfig",Ma(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QL(n,e){return ko(n,"POST","/v1/accounts:delete",e)}async function Cf(n,e){return ko(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YL(n,e=!1){const t=pn(n),r=await t.getIdToken(e),i=Sv(r);Ge(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:_u(Cg(i.auth_time)),issuedAtTime:_u(Cg(i.iat)),expirationTime:_u(Cg(i.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Cg(n){return Number(n)*1e3}function Sv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ef("JWT malformed, contained fewer than 3 sections"),null;try{const i=PS(t);return i?JSON.parse(i):(ef("Failed to decode base64 JWT payload"),null)}catch(i){return ef("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function $_(n){const e=Sv(n);return Ge(e,"internal-error"),Ge(typeof e.exp<"u","internal-error"),Ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Du(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ws&&XL(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function XL({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_u(this.lastLoginAt),this.creationTime=_u(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function If(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Du(n,Cf(t,{idToken:r}));Ge(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?GS(a.providerUserInfo):[],d=e4(n.providerData,c),h=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),g=h?p:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new wy(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,y)}async function ZL(n){const e=pn(n);await If(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function e4(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function GS(n){return n.map(e=>{var{providerId:t}=e,r=sd(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t4(n,e){const t=await HS(n,{},async()=>{const r=rd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,c=await KS(n,i,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:d,body:r};return n.emulatorConfig&&Da(n.emulatorConfig.host)&&(h.credentials="include"),WS.fetch()(c,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function n4(n,e){return ko(n,"POST","/v2/accounts:revokeToken",Ma(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ge(e.idToken,"internal-error"),Ge(typeof e.idToken<"u","internal-error"),Ge(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ge(e.length!==0,"internal-error");const t=$_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await t4(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,c=new Dl;return r&&(Ge(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(Ge(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),a&&(Ge(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Dl,this.toJSON())}_performRefresh(){return hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(n,e){Ge(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class as{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=sd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new JL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new wy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Du(this,this.stsTokenManager.getToken(this.auth,e));return Ge(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return YL(this,e)}reload(){return ZL(this)}_assign(e){this!==e&&(Ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new as(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await If(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fr(this.auth.app))return Promise.reject(mo(this.auth));const e=await this.getIdToken();return await Du(this,QL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,c,d,h,p,g;const y=(r=t.displayName)!==null&&r!==void 0?r:void 0,v=(i=t.email)!==null&&i!==void 0?i:void 0,b=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,S=(c=t.photoURL)!==null&&c!==void 0?c:void 0,_=(d=t.tenantId)!==null&&d!==void 0?d:void 0,w=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,P=(p=t.createdAt)!==null&&p!==void 0?p:void 0,I=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:C,emailVerified:M,isAnonymous:z,providerData:B,stsTokenManager:A}=t;Ge(C&&A,e,"internal-error");const R=Dl.fromJSON(this.name,A);Ge(typeof C=="string",e,"internal-error"),Yi(y,e.name),Yi(v,e.name),Ge(typeof M=="boolean",e,"internal-error"),Ge(typeof z=="boolean",e,"internal-error"),Yi(b,e.name),Yi(S,e.name),Yi(_,e.name),Yi(w,e.name),Yi(P,e.name),Yi(I,e.name);const D=new as({uid:C,auth:e,email:v,emailVerified:M,displayName:y,isAnonymous:z,photoURL:S,phoneNumber:b,tenantId:_,stsTokenManager:R,createdAt:P,lastLoginAt:I});return B&&Array.isArray(B)&&(D.providerData=B.map(O=>Object.assign({},O))),w&&(D._redirectEventId=w),D}static async _fromIdTokenResponse(e,t,r=!1){const i=new Dl;i.updateFromServerResponse(t);const a=new as({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await If(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ge(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?GS(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),d=new Dl;d.updateFromIdToken(r);const h=new as({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:c}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new wy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,p),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_=new Map;function fi(n){vi(n instanceof Function,"Expected a class definition");let e=B_.get(n);return e?(vi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,B_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}QS.type="NONE";const q_=QS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(n,e,t){return`firebase:${n}:${e}:${t}`}class Ll{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=tf(this.userKey,i.apiKey,a),this.fullPersistenceKey=tf("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Cf(this.auth,{idToken:e}).catch(()=>{});return t?as._fromGetAccountInfoResponse(this.auth,t,e):null}return as._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ll(fi(q_),e,r);const i=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=i[0]||fi(q_);const c=tf(r,e.config.apiKey,e.name);let d=null;for(const p of t)try{const g=await p._get(c);if(g){let y;if(typeof g=="string"){const v=await Cf(e,{idToken:g}).catch(()=>{});if(!v)break;y=await as._fromGetAccountInfoResponse(e,v,g)}else y=as._fromJSON(e,g);p!==a&&(d=y),a=p;break}}catch{}const h=i.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new Ll(a,e,r):(a=h[0],d&&await a._set(c,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==a)try{await p._remove(c)}catch{}})),new Ll(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tN(e))return"Blackberry";if(nN(e))return"Webos";if(XS(e))return"Safari";if((e.includes("chrome/")||JS(e))&&!e.includes("edge/"))return"Chrome";if(eN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function YS(n=qn()){return/firefox\//i.test(n)}function XS(n=qn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function JS(n=qn()){return/crios\//i.test(n)}function ZS(n=qn()){return/iemobile/i.test(n)}function eN(n=qn()){return/android/i.test(n)}function tN(n=qn()){return/blackberry/i.test(n)}function nN(n=qn()){return/webos/i.test(n)}function Nv(n=qn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function r4(n=qn()){var e;return Nv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function s4(){return yD()&&document.documentMode===10}function rN(n=qn()){return Nv(n)||eN(n)||nN(n)||tN(n)||/windows phone/i.test(n)||ZS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(n,e=[]){let t;switch(n){case"Browser":t=W_(qn());break;case"Worker":t=`${W_(qn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${La}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,d)=>{try{const h=e(a);c(h)}catch(h){d(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o4(n,e={}){return ko(n,"GET","/v2/passwordPolicy",Ma(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4=6;class l4{constructor(e){var t,r,i,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:a4,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,c,d;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(a=h.containsUppercaseLetter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(c=h.containsNumericCharacter)!==null&&c!==void 0?c:!0),h.isValid&&(h.isValid=(d=h.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),h}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new H_(this),this.idTokenSubscription=new H_(this),this.beforeStateQueue=new i4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fi(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Ll.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Cf(this,{idToken:e}),r=await as._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Fr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!c||c===d)&&(h!=null&&h.user)&&(i=h.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await If(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fr(this.app))return Promise.reject(mo(this));const t=e?pn(e):null;return t&&Ge(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fr(this.app)?Promise.reject(mo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fr(this.app)?Promise.reject(mo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await o4(this),t=new l4(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new nd("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await n4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fi(e)||this._popupRedirectResolver;Ge(t,this,"argument-error"),this.redirectPersistenceManager=await Ll.create(this,[fi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ge(d,this,"internal-error"),d.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{c=!0,h()}}else{const h=e.addObserver(t);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Fr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&FL(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function mc(n){return pn(n)}class H_{constructor(e){this.auth=e,this.observer=null,this.addObserver=ND(t=>this.observer=t)}get next(){return Ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let up={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function u4(n){up=n}function iN(n){return up.loadJS(n)}function d4(){return up.recaptchaEnterpriseScript}function h4(){return up.gapiScript}function f4(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class p4{constructor(){this.enterprise=new m4}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class m4{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const g4="recaptcha-enterprise",oN="NO_RECAPTCHA";class y4{constructor(e){this.type=g4,this.auth=mc(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,d)=>{GL(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new KL(h);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,c(p.siteKey)}}).catch(h=>{d(h)})})}function i(a,c,d){const h=window.grecaptcha;z_(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(p=>{c(p)}).catch(()=>{c(oN)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new p4().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(d=>{if(!t&&z_(window.grecaptcha))i(d,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=d4();h.length!==0&&(h+=d),iN(h).then(()=>{i(d,a,c)}).catch(p=>{c(p)})}}).catch(d=>{c(d)})})}}async function K_(n,e,t,r=!1,i=!1){const a=new y4(n);let c;if(i)c=oN;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const h=d.phoneEnrollmentInfo.phoneNumber,p=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const h=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function G_(n,e,t,r,i){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await K_(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await K_(n,e,t,t==="getOobCode");return r(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(n,e){const t=lp(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(Ta(a,e??{}))return i;hs(i,"already-initialized")}return t.initialize({options:e})}function x4(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(fi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function w4(n,e,t){const r=mc(n);Ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=aN(e),{host:c,port:d}=_4(e),h=d===null?"":`:${d}`,p={url:`${a}//${c}${h}/`},g=Object.freeze({host:c,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ge(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ge(Ta(p,r.config.emulator)&&Ta(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Da(c)?(xv(`${a}//${c}${h}`),DS("Auth",!0)):E4()}function aN(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function _4(n){const e=aN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Q_(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:Q_(c)}}}function Q_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function E4(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return hi("not implemented")}_getIdTokenResponse(e){return hi("not implemented")}_linkToIdToken(e,t){return hi("not implemented")}_getReauthenticationResolver(e){return hi("not implemented")}}async function b4(n,e){return ko(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S4(n,e){return cp(n,"POST","/v1/accounts:signInWithPassword",Ma(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N4(n,e){return cp(n,"POST","/v1/accounts:signInWithEmailLink",Ma(n,e))}async function T4(n,e){return cp(n,"POST","/v1/accounts:signInWithEmailLink",Ma(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu extends Tv{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Lu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Lu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return G_(e,t,"signInWithPassword",S4);case"emailLink":return N4(e,{email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return G_(e,r,"signUpPassword",b4);case"emailLink":return T4(e,{idToken:t,email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(n,e){return cp(n,"POST","/v1/accounts:signInWithIdp",Ma(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4="http://localhost";class Ia extends Tv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ia(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=sd(t,["providerId","signInMethod"]);if(!r||!i)return null;const c=new Ia(r,i);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Ml(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ml(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ml(e,t)}buildRequest(){const e={requestUri:C4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=rd(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function j4(n){const e=uu(du(n)).link,t=e?uu(du(e)).deep_link_id:null,r=uu(du(n)).deep_link_id;return(r?uu(du(r)).link:null)||r||t||e||n}class Cv{constructor(e){var t,r,i,a,c,d;const h=uu(du(e)),p=(t=h.apiKey)!==null&&t!==void 0?t:null,g=(r=h.oobCode)!==null&&r!==void 0?r:null,y=I4((i=h.mode)!==null&&i!==void 0?i:null);Ge(p&&g&&y,"argument-error"),this.apiKey=p,this.operation=y,this.code=g,this.continueUrl=(a=h.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=h.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=h.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=j4(e);try{return new Cv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(){this.providerId=gc.PROVIDER_ID}static credential(e,t){return Lu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Cv.parseLink(t);return Ge(r,"argument-error"),Lu._fromEmailAndCode(e,r.code,r.tenantId)}}gc.PROVIDER_ID="password";gc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";gc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od extends lN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends od{constructor(){super("facebook.com")}static credential(e){return Ia._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zi.credential(e.oauthAccessToken)}catch{return null}}}Zi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo extends od{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ia._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return eo.credential(t,r)}catch{return null}}}eo.GOOGLE_SIGN_IN_METHOD="google.com";eo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends od{constructor(){super("github.com")}static credential(e){return Ia._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return to.credentialFromTaggedObject(e)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return to.credential(e.oauthAccessToken)}catch{return null}}}to.GITHUB_SIGN_IN_METHOD="github.com";to.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends od{constructor(){super("twitter.com")}static credential(e,t){return Ia._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return no.credentialFromTaggedObject(e)}static credentialFromError(e){return no.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return no.credential(t,r)}catch{return null}}}no.TWITTER_SIGN_IN_METHOD="twitter.com";no.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await as._fromIdTokenResponse(e,r,i),c=Y_(r);return new ec({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Y_(r);return new ec({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Y_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf extends Ws{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,jf.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new jf(e,t,r,i)}}function cN(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?jf._fromErrorAndOperation(n,a,e,r):a})}async function A4(n,e,t=!1){const r=await Du(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ec._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P4(n,e,t=!1){const{auth:r}=n;if(Fr(r.app))return Promise.reject(mo(r));const i="reauthenticate";try{const a=await Du(n,cN(r,i,e,n),t);Ge(a.idToken,r,"internal-error");const c=Sv(a.idToken);Ge(c,r,"internal-error");const{sub:d}=c;return Ge(n.uid===d,r,"user-mismatch"),ec._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&hs(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(n,e,t=!1){if(Fr(n.app))return Promise.reject(mo(n));const r="signIn",i=await cN(n,r,e),a=await ec._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function R4(n,e){return uN(mc(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k4(n){const e=mc(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function O4(n,e,t){return Fr(n.app)?Promise.reject(mo(n)):R4(pn(n),gc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&k4(n),r})}function D4(n,e,t,r){return pn(n).onIdTokenChanged(e,t,r)}function L4(n,e,t){return pn(n).beforeAuthStateChanged(e,t)}function M4(n,e,t,r){return pn(n).onAuthStateChanged(e,t,r)}function F4(n){return pn(n).signOut()}const Af="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Af,"1"),this.storage.removeItem(Af),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4=1e3,U4=10;class hN extends dN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,h)=>{this.notifyListeners(c,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);s4()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,U4):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},V4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}hN.type="LOCAL";const z4=hN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN extends dN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}fN.type="SESSION";const pN=fN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new dp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(c).map(async p=>p(t.origin,a)),h=await $4(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,c;return new Promise((d,h)=>{const p=Iv("",20);i.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(y){const v=y;if(v.data.eventId===p)switch(v.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(v.data.response);break;default:clearTimeout(g),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(){return window}function q4(n){Ps().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(){return typeof Ps().WorkerGlobalScope<"u"&&typeof Ps().importScripts=="function"}async function W4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function H4(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function K4(){return mN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN="firebaseLocalStorageDb",G4=1,Pf="firebaseLocalStorage",yN="fbase_key";class ad{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hp(n,e){return n.transaction([Pf],e?"readwrite":"readonly").objectStore(Pf)}function Q4(){const n=indexedDB.deleteDatabase(gN);return new ad(n).toPromise()}function _y(){const n=indexedDB.open(gN,G4);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Pf,{keyPath:yN})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Pf)?e(r):(r.close(),await Q4(),e(await _y()))})})}async function X_(n,e,t){const r=hp(n,!0).put({[yN]:e,value:t});return new ad(r).toPromise()}async function Y4(n,e){const t=hp(n,!1).get(e),r=await new ad(t).toPromise();return r===void 0?null:r.value}function J_(n,e){const t=hp(n,!0).delete(e);return new ad(t).toPromise()}const X4=800,J4=3;class vN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _y(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>J4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dp._getInstance(K4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await W4(),!this.activeServiceWorker)return;this.sender=new B4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||H4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _y();return await X_(e,Af,"1"),await J_(e,Af),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>X_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Y4(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>J_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=hp(i,!1).getAll();return new ad(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),X4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vN.type="LOCAL";const Z4=vN;new id(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(n,e){return e?fi(e):(Ge(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv extends Tv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ml(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ml(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ml(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function tM(n){return uN(n.auth,new jv(n),n.bypassAuthState)}function nM(n){const{auth:e,user:t}=n;return Ge(t,e,"internal-error"),P4(t,new jv(n),n.bypassAuthState)}async function rM(n){const{auth:e,user:t}=n;return Ge(t,e,"internal-error"),A4(t,new jv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:c,type:d}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tM;case"linkViaPopup":case"linkViaRedirect":return rM;case"reauthViaPopup":case"reauthViaRedirect":return nM;default:hs(this.auth,"internal-error")}}resolve(e){vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=new id(2e3,1e4);class Rl extends xN{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Rl.currentPopupAction&&Rl.currentPopupAction.cancel(),Rl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ge(e,this.auth,"internal-error"),e}async onExecution(){vi(this.filter.length===1,"Popup operations only handle one event");const e=Iv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(As(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(As(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Rl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(As(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sM.get())};e()}}Rl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM="pendingRedirect",nf=new Map;class oM extends xN{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=nf.get(this.auth._key());if(!e){try{const r=await aM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}nf.set(this.auth._key(),e)}return this.bypassAuthState||nf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aM(n,e){const t=uM(e),r=cM(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function lM(n,e){nf.set(n._key(),e)}function cM(n){return fi(n._redirectPersistence)}function uM(n){return tf(iM,n.config.apiKey,n.name)}async function dM(n,e,t=!1){if(Fr(n.app))return Promise.reject(mo(n));const r=mc(n),i=eM(r,e),c=await new oM(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=10*60*1e3;class fM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!wN(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(As(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z_(e))}saveEventToCache(e){this.cachedEventUids.add(Z_(e)),this.lastProcessedEventTime=Date.now()}}function Z_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function wN({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wN(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mM(n,e={}){return ko(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yM=/^https?/;async function vM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await mM(n);for(const t of e)try{if(xM(t))return}catch{}hs(n,"unauthorized-domain")}function xM(n){const e=xy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!yM.test(t))return!1;if(gM.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=new id(3e4,6e4);function eE(){const n=Ps().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function _M(n){return new Promise((e,t)=>{var r,i,a;function c(){eE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eE(),t(As(n,"network-request-failed"))},timeout:wM.get()})}if(!((i=(r=Ps().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Ps().gapi)===null||a===void 0)&&a.load)c();else{const d=f4("iframefcb");return Ps()[d]=()=>{gapi.load?c():t(As(n,"network-request-failed"))},iN(`${h4()}?onload=${d}`).catch(h=>t(h))}}).catch(e=>{throw rf=null,e})}let rf=null;function EM(n){return rf=rf||_M(n),rf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=new id(5e3,15e3),SM="__/auth/iframe",NM="emulator/auth/iframe",TM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IM(n){const e=n.config;Ge(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?bv(e,NM):`https://${n.config.authDomain}/${SM}`,r={apiKey:e.apiKey,appName:n.name,v:La},i=CM.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${rd(r).slice(1)}`}async function jM(n){const e=await EM(n),t=Ps().gapi;return Ge(t,n,"internal-error"),e.open({where:document.body,url:IM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TM,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const c=As(n,"network-request-failed"),d=Ps().setTimeout(()=>{a(c)},bM.get());function h(){Ps().clearTimeout(d),i(r)}r.ping(h).then(h,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PM=500,RM=600,kM="_blank",OM="http://localhost";class tE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DM(n,e,t,r=PM,i=RM){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const h=Object.assign(Object.assign({},AM),{width:r.toString(),height:i.toString(),top:a,left:c}),p=qn().toLowerCase();t&&(d=JS(p)?kM:t),YS(p)&&(e=e||OM,h.scrollbars="yes");const g=Object.entries(h).reduce((v,[b,S])=>`${v}${b}=${S},`,"");if(r4(p)&&d!=="_self")return LM(e||"",d),new tE(null);const y=window.open(e||"",d,g);Ge(y,n,"popup-blocked");try{y.focus()}catch{}return new tE(y)}function LM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM="__/auth/handler",FM="emulator/auth/handler",VM=encodeURIComponent("fac");async function nE(n,e,t,r,i,a){Ge(n.config.authDomain,n,"auth-domain-config-required"),Ge(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:La,eventId:i};if(e instanceof lN){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",SD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof od){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const g of Object.keys(d))d[g]===void 0&&delete d[g];const h=await n._getAppCheckToken(),p=h?`#${VM}=${encodeURIComponent(h)}`:"";return`${UM(n)}?${rd(d).slice(1)}${p}`}function UM({config:n}){return n.emulator?bv(n,FM):`https://${n.authDomain}/${MM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="webStorageSupport";class zM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pN,this._completeRedirectFn=dM,this._overrideRedirectResult=lM}async _openPopup(e,t,r,i){var a;vi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await nE(e,t,r,xy(),i);return DM(e,c,Iv())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await nE(e,t,r,xy(),i);return q4(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(vi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await jM(e),r=new fM(e);return t.register("authEvent",i=>(Ge(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ig,{type:Ig},i=>{var a;const c=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Ig];c!==void 0&&t(!!c),hs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=vM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return rN()||XS()||Nv()}}const $M=zM;var rE="@firebase/auth",sE="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WM(n){Ca(new So("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Ge(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sN(n)},p=new c4(r,i,a,h);return x4(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ca(new So("auth-internal",e=>{const t=mc(e.getProvider("auth").getImmediate());return(r=>new BM(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),js(rE,sE,qM(n)),js(rE,sE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=5*60,KM=OS("authIdTokenMaxAge")||HM;let iE=null;const GM=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>KM)return;const i=t==null?void 0:t.token;iE!==i&&(iE=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function QM(n=VS()){const e=lp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=v4(n,{popupRedirectResolver:$M,persistence:[Z4,z4,pN]}),r=OS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=GM(a.toString());L4(t,c,()=>c(t.currentUser)),D4(t,d=>c(d))}}const i=RS("auth");return i&&w4(t,`http://${i}`),t}function YM(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}u4({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=As("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",YM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WM("Browser");var XM="firebase",JM="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */js(XM,JM,"app");var oE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var go,_N;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,R){function D(){}D.prototype=R.prototype,A.D=R.prototype,A.prototype=new D,A.prototype.constructor=A,A.C=function(O,V,U){for(var k=Array(arguments.length-2),G=2;G<arguments.length;G++)k[G-2]=arguments[G];return R.prototype[V].apply(O,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,R,D){D||(D=0);var O=Array(16);if(typeof R=="string")for(var V=0;16>V;++V)O[V]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for(V=0;16>V;++V)O[V]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=A.g[0],D=A.g[1],V=A.g[2];var U=A.g[3],k=R+(U^D&(V^U))+O[0]+3614090360&4294967295;R=D+(k<<7&4294967295|k>>>25),k=U+(V^R&(D^V))+O[1]+3905402710&4294967295,U=R+(k<<12&4294967295|k>>>20),k=V+(D^U&(R^D))+O[2]+606105819&4294967295,V=U+(k<<17&4294967295|k>>>15),k=D+(R^V&(U^R))+O[3]+3250441966&4294967295,D=V+(k<<22&4294967295|k>>>10),k=R+(U^D&(V^U))+O[4]+4118548399&4294967295,R=D+(k<<7&4294967295|k>>>25),k=U+(V^R&(D^V))+O[5]+1200080426&4294967295,U=R+(k<<12&4294967295|k>>>20),k=V+(D^U&(R^D))+O[6]+2821735955&4294967295,V=U+(k<<17&4294967295|k>>>15),k=D+(R^V&(U^R))+O[7]+4249261313&4294967295,D=V+(k<<22&4294967295|k>>>10),k=R+(U^D&(V^U))+O[8]+1770035416&4294967295,R=D+(k<<7&4294967295|k>>>25),k=U+(V^R&(D^V))+O[9]+2336552879&4294967295,U=R+(k<<12&4294967295|k>>>20),k=V+(D^U&(R^D))+O[10]+4294925233&4294967295,V=U+(k<<17&4294967295|k>>>15),k=D+(R^V&(U^R))+O[11]+2304563134&4294967295,D=V+(k<<22&4294967295|k>>>10),k=R+(U^D&(V^U))+O[12]+1804603682&4294967295,R=D+(k<<7&4294967295|k>>>25),k=U+(V^R&(D^V))+O[13]+4254626195&4294967295,U=R+(k<<12&4294967295|k>>>20),k=V+(D^U&(R^D))+O[14]+2792965006&4294967295,V=U+(k<<17&4294967295|k>>>15),k=D+(R^V&(U^R))+O[15]+1236535329&4294967295,D=V+(k<<22&4294967295|k>>>10),k=R+(V^U&(D^V))+O[1]+4129170786&4294967295,R=D+(k<<5&4294967295|k>>>27),k=U+(D^V&(R^D))+O[6]+3225465664&4294967295,U=R+(k<<9&4294967295|k>>>23),k=V+(R^D&(U^R))+O[11]+643717713&4294967295,V=U+(k<<14&4294967295|k>>>18),k=D+(U^R&(V^U))+O[0]+3921069994&4294967295,D=V+(k<<20&4294967295|k>>>12),k=R+(V^U&(D^V))+O[5]+3593408605&4294967295,R=D+(k<<5&4294967295|k>>>27),k=U+(D^V&(R^D))+O[10]+38016083&4294967295,U=R+(k<<9&4294967295|k>>>23),k=V+(R^D&(U^R))+O[15]+3634488961&4294967295,V=U+(k<<14&4294967295|k>>>18),k=D+(U^R&(V^U))+O[4]+3889429448&4294967295,D=V+(k<<20&4294967295|k>>>12),k=R+(V^U&(D^V))+O[9]+568446438&4294967295,R=D+(k<<5&4294967295|k>>>27),k=U+(D^V&(R^D))+O[14]+3275163606&4294967295,U=R+(k<<9&4294967295|k>>>23),k=V+(R^D&(U^R))+O[3]+4107603335&4294967295,V=U+(k<<14&4294967295|k>>>18),k=D+(U^R&(V^U))+O[8]+1163531501&4294967295,D=V+(k<<20&4294967295|k>>>12),k=R+(V^U&(D^V))+O[13]+2850285829&4294967295,R=D+(k<<5&4294967295|k>>>27),k=U+(D^V&(R^D))+O[2]+4243563512&4294967295,U=R+(k<<9&4294967295|k>>>23),k=V+(R^D&(U^R))+O[7]+1735328473&4294967295,V=U+(k<<14&4294967295|k>>>18),k=D+(U^R&(V^U))+O[12]+2368359562&4294967295,D=V+(k<<20&4294967295|k>>>12),k=R+(D^V^U)+O[5]+4294588738&4294967295,R=D+(k<<4&4294967295|k>>>28),k=U+(R^D^V)+O[8]+2272392833&4294967295,U=R+(k<<11&4294967295|k>>>21),k=V+(U^R^D)+O[11]+1839030562&4294967295,V=U+(k<<16&4294967295|k>>>16),k=D+(V^U^R)+O[14]+4259657740&4294967295,D=V+(k<<23&4294967295|k>>>9),k=R+(D^V^U)+O[1]+2763975236&4294967295,R=D+(k<<4&4294967295|k>>>28),k=U+(R^D^V)+O[4]+1272893353&4294967295,U=R+(k<<11&4294967295|k>>>21),k=V+(U^R^D)+O[7]+4139469664&4294967295,V=U+(k<<16&4294967295|k>>>16),k=D+(V^U^R)+O[10]+3200236656&4294967295,D=V+(k<<23&4294967295|k>>>9),k=R+(D^V^U)+O[13]+681279174&4294967295,R=D+(k<<4&4294967295|k>>>28),k=U+(R^D^V)+O[0]+3936430074&4294967295,U=R+(k<<11&4294967295|k>>>21),k=V+(U^R^D)+O[3]+3572445317&4294967295,V=U+(k<<16&4294967295|k>>>16),k=D+(V^U^R)+O[6]+76029189&4294967295,D=V+(k<<23&4294967295|k>>>9),k=R+(D^V^U)+O[9]+3654602809&4294967295,R=D+(k<<4&4294967295|k>>>28),k=U+(R^D^V)+O[12]+3873151461&4294967295,U=R+(k<<11&4294967295|k>>>21),k=V+(U^R^D)+O[15]+530742520&4294967295,V=U+(k<<16&4294967295|k>>>16),k=D+(V^U^R)+O[2]+3299628645&4294967295,D=V+(k<<23&4294967295|k>>>9),k=R+(V^(D|~U))+O[0]+4096336452&4294967295,R=D+(k<<6&4294967295|k>>>26),k=U+(D^(R|~V))+O[7]+1126891415&4294967295,U=R+(k<<10&4294967295|k>>>22),k=V+(R^(U|~D))+O[14]+2878612391&4294967295,V=U+(k<<15&4294967295|k>>>17),k=D+(U^(V|~R))+O[5]+4237533241&4294967295,D=V+(k<<21&4294967295|k>>>11),k=R+(V^(D|~U))+O[12]+1700485571&4294967295,R=D+(k<<6&4294967295|k>>>26),k=U+(D^(R|~V))+O[3]+2399980690&4294967295,U=R+(k<<10&4294967295|k>>>22),k=V+(R^(U|~D))+O[10]+4293915773&4294967295,V=U+(k<<15&4294967295|k>>>17),k=D+(U^(V|~R))+O[1]+2240044497&4294967295,D=V+(k<<21&4294967295|k>>>11),k=R+(V^(D|~U))+O[8]+1873313359&4294967295,R=D+(k<<6&4294967295|k>>>26),k=U+(D^(R|~V))+O[15]+4264355552&4294967295,U=R+(k<<10&4294967295|k>>>22),k=V+(R^(U|~D))+O[6]+2734768916&4294967295,V=U+(k<<15&4294967295|k>>>17),k=D+(U^(V|~R))+O[13]+1309151649&4294967295,D=V+(k<<21&4294967295|k>>>11),k=R+(V^(D|~U))+O[4]+4149444226&4294967295,R=D+(k<<6&4294967295|k>>>26),k=U+(D^(R|~V))+O[11]+3174756917&4294967295,U=R+(k<<10&4294967295|k>>>22),k=V+(R^(U|~D))+O[2]+718787259&4294967295,V=U+(k<<15&4294967295|k>>>17),k=D+(U^(V|~R))+O[9]+3951481745&4294967295,A.g[0]=A.g[0]+R&4294967295,A.g[1]=A.g[1]+(V+(k<<21&4294967295|k>>>11))&4294967295,A.g[2]=A.g[2]+V&4294967295,A.g[3]=A.g[3]+U&4294967295}r.prototype.u=function(A,R){R===void 0&&(R=A.length);for(var D=R-this.blockSize,O=this.B,V=this.h,U=0;U<R;){if(V==0)for(;U<=D;)i(this,A,U),U+=this.blockSize;if(typeof A=="string"){for(;U<R;)if(O[V++]=A.charCodeAt(U++),V==this.blockSize){i(this,O),V=0;break}}else for(;U<R;)if(O[V++]=A[U++],V==this.blockSize){i(this,O),V=0;break}}this.h=V,this.o+=R},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var R=1;R<A.length-8;++R)A[R]=0;var D=8*this.o;for(R=A.length-8;R<A.length;++R)A[R]=D&255,D/=256;for(this.u(A),A=Array(16),R=D=0;4>R;++R)for(var O=0;32>O;O+=8)A[D++]=this.g[R]>>>O&255;return A};function a(A,R){var D=d;return Object.prototype.hasOwnProperty.call(D,A)?D[A]:D[A]=R(A)}function c(A,R){this.h=R;for(var D=[],O=!0,V=A.length-1;0<=V;V--){var U=A[V]|0;O&&U==R||(D[V]=U,O=!1)}this.g=D}var d={};function h(A){return-128<=A&&128>A?a(A,function(R){return new c([R|0],0>R?-1:0)}):new c([A|0],0>A?-1:0)}function p(A){if(isNaN(A)||!isFinite(A))return y;if(0>A)return w(p(-A));for(var R=[],D=1,O=0;A>=D;O++)R[O]=A/D|0,D*=4294967296;return new c(R,0)}function g(A,R){if(A.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(A.charAt(0)=="-")return w(g(A.substring(1),R));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=p(Math.pow(R,8)),O=y,V=0;V<A.length;V+=8){var U=Math.min(8,A.length-V),k=parseInt(A.substring(V,V+U),R);8>U?(U=p(Math.pow(R,U)),O=O.j(U).add(p(k))):(O=O.j(D),O=O.add(p(k)))}return O}var y=h(0),v=h(1),b=h(16777216);n=c.prototype,n.m=function(){if(_(this))return-w(this).m();for(var A=0,R=1,D=0;D<this.g.length;D++){var O=this.i(D);A+=(0<=O?O:4294967296+O)*R,R*=4294967296}return A},n.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(S(this))return"0";if(_(this))return"-"+w(this).toString(A);for(var R=p(Math.pow(A,6)),D=this,O="";;){var V=M(D,R).g;D=P(D,V.j(R));var U=((0<D.g.length?D.g[0]:D.h)>>>0).toString(A);if(D=V,S(D))return U+O;for(;6>U.length;)U="0"+U;O=U+O}},n.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function S(A){if(A.h!=0)return!1;for(var R=0;R<A.g.length;R++)if(A.g[R]!=0)return!1;return!0}function _(A){return A.h==-1}n.l=function(A){return A=P(this,A),_(A)?-1:S(A)?0:1};function w(A){for(var R=A.g.length,D=[],O=0;O<R;O++)D[O]=~A.g[O];return new c(D,~A.h).add(v)}n.abs=function(){return _(this)?w(this):this},n.add=function(A){for(var R=Math.max(this.g.length,A.g.length),D=[],O=0,V=0;V<=R;V++){var U=O+(this.i(V)&65535)+(A.i(V)&65535),k=(U>>>16)+(this.i(V)>>>16)+(A.i(V)>>>16);O=k>>>16,U&=65535,k&=65535,D[V]=k<<16|U}return new c(D,D[D.length-1]&-2147483648?-1:0)};function P(A,R){return A.add(w(R))}n.j=function(A){if(S(this)||S(A))return y;if(_(this))return _(A)?w(this).j(w(A)):w(w(this).j(A));if(_(A))return w(this.j(w(A)));if(0>this.l(b)&&0>A.l(b))return p(this.m()*A.m());for(var R=this.g.length+A.g.length,D=[],O=0;O<2*R;O++)D[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<A.g.length;V++){var U=this.i(O)>>>16,k=this.i(O)&65535,G=A.i(V)>>>16,H=A.i(V)&65535;D[2*O+2*V]+=k*H,I(D,2*O+2*V),D[2*O+2*V+1]+=U*H,I(D,2*O+2*V+1),D[2*O+2*V+1]+=k*G,I(D,2*O+2*V+1),D[2*O+2*V+2]+=U*G,I(D,2*O+2*V+2)}for(O=0;O<R;O++)D[O]=D[2*O+1]<<16|D[2*O];for(O=R;O<2*R;O++)D[O]=0;return new c(D,0)};function I(A,R){for(;(A[R]&65535)!=A[R];)A[R+1]+=A[R]>>>16,A[R]&=65535,R++}function C(A,R){this.g=A,this.h=R}function M(A,R){if(S(R))throw Error("division by zero");if(S(A))return new C(y,y);if(_(A))return R=M(w(A),R),new C(w(R.g),w(R.h));if(_(R))return R=M(A,w(R)),new C(w(R.g),R.h);if(30<A.g.length){if(_(A)||_(R))throw Error("slowDivide_ only works with positive integers.");for(var D=v,O=R;0>=O.l(A);)D=z(D),O=z(O);var V=B(D,1),U=B(O,1);for(O=B(O,2),D=B(D,2);!S(O);){var k=U.add(O);0>=k.l(A)&&(V=V.add(D),U=k),O=B(O,1),D=B(D,1)}return R=P(A,V.j(R)),new C(V,R)}for(V=y;0<=A.l(R);){for(D=Math.max(1,Math.floor(A.m()/R.m())),O=Math.ceil(Math.log(D)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),U=p(D),k=U.j(R);_(k)||0<k.l(A);)D-=O,U=p(D),k=U.j(R);S(U)&&(U=v),V=V.add(U),A=P(A,k)}return new C(V,A)}n.A=function(A){return M(this,A).h},n.and=function(A){for(var R=Math.max(this.g.length,A.g.length),D=[],O=0;O<R;O++)D[O]=this.i(O)&A.i(O);return new c(D,this.h&A.h)},n.or=function(A){for(var R=Math.max(this.g.length,A.g.length),D=[],O=0;O<R;O++)D[O]=this.i(O)|A.i(O);return new c(D,this.h|A.h)},n.xor=function(A){for(var R=Math.max(this.g.length,A.g.length),D=[],O=0;O<R;O++)D[O]=this.i(O)^A.i(O);return new c(D,this.h^A.h)};function z(A){for(var R=A.g.length+1,D=[],O=0;O<R;O++)D[O]=A.i(O)<<1|A.i(O-1)>>>31;return new c(D,A.h)}function B(A,R){var D=R>>5;R%=32;for(var O=A.g.length-D,V=[],U=0;U<O;U++)V[U]=0<R?A.i(U+D)>>>R|A.i(U+D+1)<<32-R:A.i(U+D);return new c(V,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_N=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=g,go=c}).apply(typeof oE<"u"?oE:typeof self<"u"?self:typeof window<"u"?window:{});var Uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var EN,hu,bN,sf,Ey,SN,NN,TN;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,N,j){return f==Array.prototype||f==Object.prototype||(f[N]=j.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uh=="object"&&Uh];for(var N=0;N<f.length;++N){var j=f[N];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var r=t(this);function i(f,N){if(N)e:{var j=r;f=f.split(".");for(var F=0;F<f.length-1;F++){var J=f[F];if(!(J in j))break e;j=j[J]}f=f[f.length-1],F=j[f],N=N(F),N!=F&&N!=null&&e(j,f,{configurable:!0,writable:!0,value:N})}}function a(f,N){f instanceof String&&(f+="");var j=0,F=!1,J={next:function(){if(!F&&j<f.length){var ie=j++;return{value:N(ie,f[ie]),done:!1}}return F=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}i("Array.prototype.values",function(f){return f||function(){return a(this,function(N,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function h(f){var N=typeof f;return N=N!="object"?N:f?Array.isArray(f)?"array":N:"null",N=="array"||N=="object"&&typeof f.length=="number"}function p(f){var N=typeof f;return N=="object"&&f!=null||N=="function"}function g(f,N,j){return f.call.apply(f.bind,arguments)}function y(f,N,j){if(!f)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,F),f.apply(N,J)}}return function(){return f.apply(N,arguments)}}function v(f,N,j){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:y,v.apply(null,arguments)}function b(f,N){var j=Array.prototype.slice.call(arguments,1);return function(){var F=j.slice();return F.push.apply(F,arguments),f.apply(this,F)}}function S(f,N){function j(){}j.prototype=N.prototype,f.aa=N.prototype,f.prototype=new j,f.prototype.constructor=f,f.Qb=function(F,J,ie){for(var _e=Array(arguments.length-2),Nt=2;Nt<arguments.length;Nt++)_e[Nt-2]=arguments[Nt];return N.prototype[J].apply(F,_e)}}function _(f){const N=f.length;if(0<N){const j=Array(N);for(let F=0;F<N;F++)j[F]=f[F];return j}return[]}function w(f,N){for(let j=1;j<arguments.length;j++){const F=arguments[j];if(h(F)){const J=f.length||0,ie=F.length||0;f.length=J+ie;for(let _e=0;_e<ie;_e++)f[J+_e]=F[_e]}else f.push(F)}}class P{constructor(N,j){this.i=N,this.j=j,this.h=0,this.g=null}get(){let N;return 0<this.h?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function I(f){return/^[\s\xa0]*$/.test(f)}function C(){var f=d.navigator;return f&&(f=f.userAgent)?f:""}function M(f){return M[" "](f),f}M[" "]=function(){};var z=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function B(f,N,j){for(const F in f)N.call(j,f[F],F,f)}function A(f,N){for(const j in f)N.call(void 0,f[j],j,f)}function R(f){const N={};for(const j in f)N[j]=f[j];return N}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(f,N){let j,F;for(let J=1;J<arguments.length;J++){F=arguments[J];for(j in F)f[j]=F[j];for(let ie=0;ie<D.length;ie++)j=D[ie],Object.prototype.hasOwnProperty.call(F,j)&&(f[j]=F[j])}}function V(f){var N=1;f=f.split(":");const j=[];for(;0<N&&f.length;)j.push(f.shift()),N--;return f.length&&j.push(f.join(":")),j}function U(f){d.setTimeout(()=>{throw f},0)}function k(){var f=ee;let N=null;return f.g&&(N=f.g,f.g=f.g.next,f.g||(f.h=null),N.next=null),N}class G{constructor(){this.h=this.g=null}add(N,j){const F=H.get();F.set(N,j),this.h?this.h.next=F:this.g=F,this.h=F}}var H=new P(()=>new Y,f=>f.reset());class Y{constructor(){this.next=this.g=this.h=null}set(N,j){this.h=N,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let se,W=!1,ee=new G,ae=()=>{const f=d.Promise.resolve(void 0);se=()=>{f.then($)}};var $=()=>{for(var f;f=k();){try{f.h.call(f.g)}catch(j){U(j)}var N=H;N.j(f),100>N.h&&(N.h++,f.next=N.g,N.g=f)}W=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(f,N){this.type=f,this.g=this.target=N,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var ue=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var f=!1,N=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const j=()=>{};d.addEventListener("test",j,N),d.removeEventListener("test",j,N)}catch{}return f}();function Se(f,N){if(oe.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var j=this.type=f.type,F=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=N,N=f.relatedTarget){if(z){e:{try{M(N.nodeName);var J=!0;break e}catch{}J=!1}J||(N=null)}}else j=="mouseover"?N=f.fromElement:j=="mouseout"&&(N=f.toElement);this.relatedTarget=N,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Ne[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Se.aa.h.call(this)}}S(Se,oe);var Ne={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ge="closure_listenable_"+(1e6*Math.random()|0),we=0;function Ie(f,N,j,F,J){this.listener=f,this.proxy=null,this.src=N,this.type=j,this.capture=!!F,this.ha=J,this.key=++we,this.da=this.fa=!1}function Me(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Xe(f){this.src=f,this.g={},this.h=0}Xe.prototype.add=function(f,N,j,F,J){var ie=f.toString();f=this.g[ie],f||(f=this.g[ie]=[],this.h++);var _e=bt(f,N,F,J);return-1<_e?(N=f[_e],j||(N.fa=!1)):(N=new Ie(N,this.src,ie,!!F,J),N.fa=j,f.push(N)),N};function nt(f,N){var j=N.type;if(j in f.g){var F=f.g[j],J=Array.prototype.indexOf.call(F,N,void 0),ie;(ie=0<=J)&&Array.prototype.splice.call(F,J,1),ie&&(Me(N),f.g[j].length==0&&(delete f.g[j],f.h--))}}function bt(f,N,j,F){for(var J=0;J<f.length;++J){var ie=f[J];if(!ie.da&&ie.listener==N&&ie.capture==!!j&&ie.ha==F)return J}return-1}var kt="closure_lm_"+(1e6*Math.random()|0),Ot={};function lt(f,N,j,F,J){if(Array.isArray(N)){for(var ie=0;ie<N.length;ie++)lt(f,N[ie],j,F,J);return null}return j=jt(j),f&&f[ge]?f.K(N,j,p(F)?!!F.capture:!1,J):Jt(f,N,j,!1,F,J)}function Jt(f,N,j,F,J,ie){if(!N)throw Error("Invalid event type");var _e=p(J)?!!J.capture:!!J,Nt=pt(f);if(Nt||(f[kt]=Nt=new Xe(f)),j=Nt.add(N,j,F,_e,ie),j.proxy)return j;if(F=be(),j.proxy=F,F.src=f,F.listener=j,f.addEventListener)ue||(J=_e),J===void 0&&(J=!1),f.addEventListener(N.toString(),F,J);else if(f.attachEvent)f.attachEvent(He(N.toString()),F);else if(f.addListener&&f.removeListener)f.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return j}function be(){function f(j){return N.call(f.src,f.listener,j)}const N=he;return f}function Ve(f,N,j,F,J){if(Array.isArray(N))for(var ie=0;ie<N.length;ie++)Ve(f,N[ie],j,F,J);else F=p(F)?!!F.capture:!!F,j=jt(j),f&&f[ge]?(f=f.i,N=String(N).toString(),N in f.g&&(ie=f.g[N],j=bt(ie,j,F,J),-1<j&&(Me(ie[j]),Array.prototype.splice.call(ie,j,1),ie.length==0&&(delete f.g[N],f.h--)))):f&&(f=pt(f))&&(N=f.g[N.toString()],f=-1,N&&(f=bt(N,j,F,J)),(j=-1<f?N[f]:null)&&Te(j))}function Te(f){if(typeof f!="number"&&f&&!f.da){var N=f.src;if(N&&N[ge])nt(N.i,f);else{var j=f.type,F=f.proxy;N.removeEventListener?N.removeEventListener(j,F,f.capture):N.detachEvent?N.detachEvent(He(j),F):N.addListener&&N.removeListener&&N.removeListener(F),(j=pt(N))?(nt(j,f),j.h==0&&(j.src=null,N[kt]=null)):Me(f)}}}function He(f){return f in Ot?Ot[f]:Ot[f]="on"+f}function he(f,N){if(f.da)f=!0;else{N=new Se(N,this);var j=f.listener,F=f.ha||f.src;f.fa&&Te(f),f=j.call(F,N)}return f}function pt(f){return f=f[kt],f instanceof Xe?f:null}var ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function jt(f){return typeof f=="function"?f:(f[ke]||(f[ke]=function(N){return f.handleEvent(N)}),f[ke])}function It(){X.call(this),this.i=new Xe(this),this.M=this,this.F=null}S(It,X),It.prototype[ge]=!0,It.prototype.removeEventListener=function(f,N,j,F){Ve(this,f,N,j,F)};function St(f,N){var j,F=f.F;if(F)for(j=[];F;F=F.F)j.push(F);if(f=f.M,F=N.type||N,typeof N=="string")N=new oe(N,f);else if(N instanceof oe)N.target=N.target||f;else{var J=N;N=new oe(F,f),O(N,J)}if(J=!0,j)for(var ie=j.length-1;0<=ie;ie--){var _e=N.g=j[ie];J=Wn(_e,F,!0,N)&&J}if(_e=N.g=f,J=Wn(_e,F,!0,N)&&J,J=Wn(_e,F,!1,N)&&J,j)for(ie=0;ie<j.length;ie++)_e=N.g=j[ie],J=Wn(_e,F,!1,N)&&J}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var f=this.i,N;for(N in f.g){for(var j=f.g[N],F=0;F<j.length;F++)Me(j[F]);delete f.g[N],f.h--}}this.F=null},It.prototype.K=function(f,N,j,F){return this.i.add(String(f),N,!1,j,F)},It.prototype.L=function(f,N,j,F){return this.i.add(String(f),N,!0,j,F)};function Wn(f,N,j,F){if(N=f.i.g[String(N)],!N)return!0;N=N.concat();for(var J=!0,ie=0;ie<N.length;++ie){var _e=N[ie];if(_e&&!_e.da&&_e.capture==j){var Nt=_e.listener,mn=_e.ha||_e.src;_e.fa&&nt(f.i,_e),J=Nt.call(mn,F)!==!1&&J}}return J&&!F.defaultPrevented}function Hn(f,N,j){if(typeof f=="function")j&&(f=v(f,j));else if(f&&typeof f.handleEvent=="function")f=v(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(N)?-1:d.setTimeout(f,N||0)}function Zn(f){f.g=Hn(()=>{f.g=null,f.i&&(f.i=!1,Zn(f))},f.l);const N=f.h;f.h=null,f.m.apply(null,N)}class Tr extends X{constructor(N,j){super(),this.m=N,this.l=j,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:Zn(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hr(f){X.call(this),this.h=f,this.g={}}S(hr,X);var Ur=[];function qt(f){B(f.g,function(N,j){this.g.hasOwnProperty(j)&&Te(N)},f),f.g={}}hr.prototype.N=function(){hr.aa.N.call(this),qt(this)},hr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ks=d.JSON.stringify,er=d.JSON.parse,Vo=class{stringify(f){return d.JSON.stringify(f,void 0)}parse(f){return d.JSON.parse(f,void 0)}};function Ke(){}Ke.prototype.h=null;function xt(f){return f.h||(f.h=f.i())}function yt(){}var Wt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tn(){oe.call(this,"d")}S(tn,oe);function zr(){oe.call(this,"c")}S(zr,oe);var Cr={},bc=null;function Uo(){return bc=bc||new It}Cr.La="serverreachability";function Sc(f){oe.call(this,Cr.La,f)}S(Sc,oe);function Gs(f){const N=Uo();St(N,new Sc(N))}Cr.STAT_EVENT="statevent";function Nc(f,N){oe.call(this,Cr.STAT_EVENT,f),this.stat=N}S(Nc,oe);function nn(f){const N=Uo();St(N,new Nc(N,f))}Cr.Ma="timingevent";function za(f,N){oe.call(this,Cr.Ma,f),this.size=N}S(za,oe);function $r(f,N){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){f()},N)}function zo(){this.g=!0}zo.prototype.xa=function(){this.g=!1};function $o(f,N,j,F,J,ie){f.info(function(){if(f.g)if(ie)for(var _e="",Nt=ie.split("&"),mn=0;mn<Nt.length;mn++){var mt=Nt[mn].split("=");if(1<mt.length){var wn=mt[0];mt=mt[1];var ln=wn.split("_");_e=2<=ln.length&&ln[1]=="type"?_e+(wn+"="+mt+"&"):_e+(wn+"=redacted&")}}else _e=null;else _e=ie;return"XMLHTTP REQ ("+F+") [attempt "+J+"]: "+N+`
`+j+`
`+_e})}function $a(f,N,j,F,J,ie,_e){f.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+J+"]: "+N+`
`+j+`
`+ie+" "+_e})}function Br(f,N,j,F){f.info(function(){return"XMLHTTP TEXT ("+N+"): "+Lp(f,j)+(F?" "+F:"")})}function Tc(f,N){f.info(function(){return"TIMEOUT: "+N})}zo.prototype.info=function(){};function Lp(f,N){if(!f.g)return N;if(!N)return null;try{var j=JSON.parse(N);if(j){for(f=0;f<j.length;f++)if(Array.isArray(j[f])){var F=j[f];if(!(2>F.length)){var J=F[1];if(Array.isArray(J)&&!(1>J.length)){var ie=J[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var _e=1;_e<J.length;_e++)J[_e]=""}}}}return Ks(j)}catch{return N}}var Ba={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qr;function Bo(){}S(Bo,Ke),Bo.prototype.g=function(){return new XMLHttpRequest},Bo.prototype.i=function(){return{}},qr=new Bo;function Wr(f,N,j,F){this.j=f,this.i=N,this.l=j,this.R=F||1,this.U=new hr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vd}function vd(){this.i=null,this.g="",this.h=!1}var Cc={},qa={};function Wa(f,N,j){f.L=1,f.v=ji(pr(N)),f.m=j,f.P=!0,Ic(f,null)}function Ic(f,N){f.F=Date.now(),Dt(f),f.A=pr(f.v);var j=f.A,F=f.R;Array.isArray(F)||(F=[String(F)]),Pi(j.i,"t",F),f.C=0,j=f.j.J,f.h=new vd,f.g=Ld(f.j,j?N:null,!f.m),0<f.O&&(f.M=new Tr(v(f.Y,f,f.g),f.O)),N=f.U,j=f.g,F=f.ca;var J="readystatechange";Array.isArray(J)||(J&&(Ur[0]=J.toString()),J=Ur);for(var ie=0;ie<J.length;ie++){var _e=lt(j,J[ie],F||N.handleEvent,!1,N.h||N);if(!_e)break;N.g[_e.key]=_e}N=f.H?R(f.H):{},f.m?(f.u||(f.u="POST"),N["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,N)):(f.u="GET",f.g.ea(f.A,f.u,null,N)),Gs(),$o(f.i,f.u,f.A,f.l,f.R,f.m)}Wr.prototype.ca=function(f){f=f.target;const N=this.M;N&&nr(f)==3?N.j():this.Y(f)},Wr.prototype.Y=function(f){try{if(f==this.g)e:{const ln=nr(this.g);var N=this.g.Ba();const Ar=this.g.Z();if(!(3>ln)&&(ln!=3||this.g&&(this.h.h||this.g.oa()||Oc(this.g)))){this.J||ln!=4||N==7||(N==8||0>=Ar?Gs(3):Gs(2)),qo(this);var j=this.g.Z();this.X=j;t:if(xd(this)){var F=Oc(this.g);f="";var J=F.length,ie=nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ir(this),Ni(this);var _e="";break t}this.h.i=new d.TextDecoder}for(N=0;N<J;N++)this.h.h=!0,f+=this.h.i.decode(F[N],{stream:!(ie&&N==J-1)});F.length=0,this.h.g+=f,this.C=0,_e=this.h.g}else _e=this.g.oa();if(this.o=j==200,$a(this.i,this.u,this.A,this.l,this.R,ln,j),this.o){if(this.T&&!this.K){t:{if(this.g){var Nt,mn=this.g;if((Nt=mn.g?mn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Nt)){var mt=Nt;break t}}mt=null}if(j=mt)Br(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jc(this,j);else{this.o=!1,this.s=3,nn(12),Ir(this),Ni(this);break e}}if(this.P){j=!0;let gr;for(;!this.J&&this.C<_e.length;)if(gr=Mp(this,_e),gr==qa){ln==4&&(this.s=4,nn(14),j=!1),Br(this.i,this.l,null,"[Incomplete Response]");break}else if(gr==Cc){this.s=4,nn(15),Br(this.i,this.l,_e,"[Invalid Chunk]"),j=!1;break}else Br(this.i,this.l,gr,null),jc(this,gr);if(xd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ln!=4||_e.length!=0||this.h.h||(this.s=1,nn(16),j=!1),this.o=this.o&&j,!j)Br(this.i,this.l,_e,"[Invalid Chunked Response]"),Ir(this),Ni(this);else if(0<_e.length&&!this.W){this.W=!0;var wn=this.j;wn.g==this&&wn.ba&&!wn.M&&(wn.j.info("Great, no buffering proxy detected. Bytes received: "+_e.length),Lc(wn),wn.M=!0,nn(11))}}else Br(this.i,this.l,_e,null),jc(this,_e);ln==4&&Ir(this),this.o&&!this.J&&(ln==4?nl(this.j,this):(this.o=!1,Dt(this)))}else Xa(this.g),j==400&&0<_e.indexOf("Unknown SID")?(this.s=3,nn(12)):(this.s=0,nn(13)),Ir(this),Ni(this)}}}catch{}finally{}};function xd(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Mp(f,N){var j=f.C,F=N.indexOf(`
`,j);return F==-1?qa:(j=Number(N.substring(j,F)),isNaN(j)?Cc:(F+=1,F+j>N.length?qa:(N=N.slice(F,F+j),f.C=F+j,N)))}Wr.prototype.cancel=function(){this.J=!0,Ir(this)};function Dt(f){f.S=Date.now()+f.I,wd(f,f.I)}function wd(f,N){if(f.B!=null)throw Error("WatchDog timer not null");f.B=$r(v(f.ba,f),N)}function qo(f){f.B&&(d.clearTimeout(f.B),f.B=null)}Wr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Tc(this.i,this.A),this.L!=2&&(Gs(),nn(17)),Ir(this),this.s=2,Ni(this)):wd(this,this.S-f)};function Ni(f){f.j.G==0||f.J||nl(f.j,f)}function Ir(f){qo(f);var N=f.M;N&&typeof N.ma=="function"&&N.ma(),f.M=null,qt(f.U),f.g&&(N=f.g,f.g=null,N.abort(),N.ma())}function jc(f,N){try{var j=f.j;if(j.G!=0&&(j.g==f||Kn(j.h,f))){if(!f.K&&Kn(j.h,f)&&j.G==3){try{var F=j.Da.g.parse(N)}catch{F=null}if(Array.isArray(F)&&F.length==3){var J=F;if(J[0]==0){e:if(!j.u){if(j.g)if(j.g.F+3e3<f.F)tl(j),Yr(j);else break e;el(j),nn(18)}}else j.za=J[1],0<j.za-j.T&&37500>J[2]&&j.F&&j.v==0&&!j.C&&(j.C=$r(v(j.Za,j),6e3));if(1>=Ed(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else Zs(j,11)}else if((f.K||j.g==f)&&tl(j),!I(N))for(J=j.Da.g.parse(N),N=0;N<J.length;N++){let mt=J[N];if(j.T=mt[0],mt=mt[1],j.G==2)if(mt[0]=="c"){j.K=mt[1],j.ia=mt[2];const wn=mt[3];wn!=null&&(j.la=wn,j.j.info("VER="+j.la));const ln=mt[4];ln!=null&&(j.Aa=ln,j.j.info("SVER="+j.Aa));const Ar=mt[5];Ar!=null&&typeof Ar=="number"&&0<Ar&&(F=1.5*Ar,j.L=F,j.j.info("backChannelRequestTimeoutMs_="+F)),F=j;const gr=f.g;if(gr){const Xo=gr.g?gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xo){var ie=F.h;ie.g||Xo.indexOf("spdy")==-1&&Xo.indexOf("quic")==-1&&Xo.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(Ac(ie,ie.h),ie.h=null))}if(F.D){const sl=gr.g?gr.g.getResponseHeader("X-HTTP-Session-Id"):null;sl&&(F.ya=sl,At(F.I,F.D,sl))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-f.F,j.j.info("Handshake RTT: "+j.R+"ms")),F=j;var _e=f;if(F.qa=Dd(F,F.J?F.ia:null,F.W),_e.K){bd(F.h,_e);var Nt=_e,mn=F.L;mn&&(Nt.I=mn),Nt.B&&(qo(Nt),Dt(Nt)),F.g=_e}else Yo(F);0<j.i.length&&ys(j)}else mt[0]!="stop"&&mt[0]!="close"||Zs(j,7);else j.G==3&&(mt[0]=="stop"||mt[0]=="close"?mt[0]=="stop"?Zs(j,7):Cn(j):mt[0]!="noop"&&j.l&&j.l.ta(mt),j.v=0)}}Gs(4)}catch{}}var _d=class{constructor(f,N){this.g=f,this.map=N}};function Wo(f){this.l=f||10,d.PerformanceNavigationTiming?(f=d.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fr(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ed(f){return f.h?1:f.g?f.g.size:0}function Kn(f,N){return f.h?f.h==N:f.g?f.g.has(N):!1}function Ac(f,N){f.g?f.g.add(N):f.h=N}function bd(f,N){f.h&&f.h==N?f.h=null:f.g&&f.g.has(N)&&f.g.delete(N)}Wo.prototype.cancel=function(){if(this.i=Sd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Sd(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let N=f.i;for(const j of f.g.values())N=N.concat(j.D);return N}return _(f.i)}function Ha(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(h(f)){for(var N=[],j=f.length,F=0;F<j;F++)N.push(f[F]);return N}N=[],j=0;for(F in f)N[j++]=f[F];return N}function Ka(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(h(f)||typeof f=="string"){var N=[];f=f.length;for(var j=0;j<f;j++)N.push(j);return N}N=[],j=0;for(const F in f)N[j++]=F;return N}}}function Ti(f,N){if(f.forEach&&typeof f.forEach=="function")f.forEach(N,void 0);else if(h(f)||typeof f=="string")Array.prototype.forEach.call(f,N,void 0);else for(var j=Ka(f),F=Ha(f),J=F.length,ie=0;ie<J;ie++)N.call(void 0,F[ie],j&&j[ie],f)}var Ho=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fp(f,N){if(f){f=f.split("&");for(var j=0;j<f.length;j++){var F=f[j].indexOf("="),J=null;if(0<=F){var ie=f[j].substring(0,F);J=f[j].substring(F+1)}else ie=f[j];N(ie,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Qs(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Qs){this.h=f.h,Ko(this,f.j),this.o=f.o,this.g=f.g,Ci(this,f.s),this.l=f.l;var N=f.i,j=new ps;j.i=N.i,N.g&&(j.g=new Map(N.g),j.h=N.h),Ii(this,j),this.m=f.m}else f&&(N=String(f).match(Ho))?(this.h=!1,Ko(this,N[1]||"",!0),this.o=ft(N[2]||""),this.g=ft(N[3]||"",!0),Ci(this,N[4]),this.l=ft(N[5]||"",!0),Ii(this,N[6]||"",!0),this.m=ft(N[7]||"")):(this.h=!1,this.i=new ps(null,this.h))}Qs.prototype.toString=function(){var f=[],N=this.j;N&&f.push(Ai(N,Ga,!0),":");var j=this.g;return(j||N=="file")&&(f.push("//"),(N=this.o)&&f.push(Ai(N,Ga,!0),"@"),f.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&f.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&f.push("/"),f.push(Ai(j,j.charAt(0)=="/"?Cd:Td,!0))),(j=this.i.toString())&&f.push("?",j),(j=this.m)&&f.push("#",Ai(j,Pc)),f.join("")};function pr(f){return new Qs(f)}function Ko(f,N,j){f.j=j?ft(N,!0):N,f.j&&(f.j=f.j.replace(/:$/,""))}function Ci(f,N){if(N){if(N=Number(N),isNaN(N)||0>N)throw Error("Bad port number "+N);f.s=N}else f.s=null}function Ii(f,N,j){N instanceof ps?(f.i=N,ms(f.i,f.h)):(j||(N=Ai(N,Id)),f.i=new ps(N,f.h))}function At(f,N,j){f.i.set(N,j)}function ji(f){return At(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function ft(f,N){return f?N?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ai(f,N,j){return typeof f=="string"?(f=encodeURI(f).replace(N,Nd),j&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Nd(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Ga=/[#\/\?@]/g,Td=/[#\?:]/g,Cd=/[#\?]/g,Id=/[#\?@]/g,Pc=/#/g;function ps(f,N){this.h=this.g=null,this.i=f||null,this.j=!!N}function Tn(f){f.g||(f.g=new Map,f.h=0,f.i&&Fp(f.i,function(N,j){f.add(decodeURIComponent(N.replace(/\+/g," ")),j)}))}n=ps.prototype,n.add=function(f,N){Tn(this),this.i=null,f=jr(this,f);var j=this.g.get(f);return j||this.g.set(f,j=[]),j.push(N),this.h+=1,this};function Hr(f,N){Tn(f),N=jr(f,N),f.g.has(N)&&(f.i=null,f.h-=f.g.get(N).length,f.g.delete(N))}function Kr(f,N){return Tn(f),N=jr(f,N),f.g.has(N)}n.forEach=function(f,N){Tn(this),this.g.forEach(function(j,F){j.forEach(function(J){f.call(N,J,F,this)},this)},this)},n.na=function(){Tn(this);const f=Array.from(this.g.values()),N=Array.from(this.g.keys()),j=[];for(let F=0;F<N.length;F++){const J=f[F];for(let ie=0;ie<J.length;ie++)j.push(N[F])}return j},n.V=function(f){Tn(this);let N=[];if(typeof f=="string")Kr(this,f)&&(N=N.concat(this.g.get(jr(this,f))));else{f=Array.from(this.g.values());for(let j=0;j<f.length;j++)N=N.concat(f[j])}return N},n.set=function(f,N){return Tn(this),this.i=null,f=jr(this,f),Kr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[N]),this.h+=1,this},n.get=function(f,N){return f?(f=this.V(f),0<f.length?String(f[0]):N):N};function Pi(f,N,j){Hr(f,N),0<j.length&&(f.i=null,f.g.set(jr(f,N),_(j)),f.h+=j.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],N=Array.from(this.g.keys());for(var j=0;j<N.length;j++){var F=N[j];const ie=encodeURIComponent(String(F)),_e=this.V(F);for(F=0;F<_e.length;F++){var J=ie;_e[F]!==""&&(J+="="+encodeURIComponent(String(_e[F]))),f.push(J)}}return this.i=f.join("&")};function jr(f,N){return N=String(N),f.j&&(N=N.toLowerCase()),N}function ms(f,N){N&&!f.j&&(Tn(f),f.i=null,f.g.forEach(function(j,F){var J=F.toLowerCase();F!=J&&(Hr(this,F),Pi(this,J,j))},f)),f.j=N}function Vp(f,N){const j=new zo;if(d.Image){const F=new Image;F.onload=b(tr,j,"TestLoadImage: loaded",!0,N,F),F.onerror=b(tr,j,"TestLoadImage: error",!1,N,F),F.onabort=b(tr,j,"TestLoadImage: abort",!1,N,F),F.ontimeout=b(tr,j,"TestLoadImage: timeout",!1,N,F),d.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=f}else N(!1)}function jd(f,N){const j=new zo,F=new AbortController,J=setTimeout(()=>{F.abort(),tr(j,"TestPingServer: timeout",!1,N)},1e4);fetch(f,{signal:F.signal}).then(ie=>{clearTimeout(J),ie.ok?tr(j,"TestPingServer: ok",!0,N):tr(j,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(J),tr(j,"TestPingServer: error",!1,N)})}function tr(f,N,j,F,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),F(j)}catch{}}function Up(){this.g=new Vo}function Ad(f,N,j){const F=j||"";try{Ti(f,function(J,ie){let _e=J;p(J)&&(_e=Ks(J)),N.push(F+ie+"="+encodeURIComponent(_e))})}catch(J){throw N.push(F+"type="+encodeURIComponent("_badmap")),J}}function Ys(f){this.l=f.Ub||null,this.j=f.eb||!1}S(Ys,Ke),Ys.prototype.g=function(){return new Go(this.l,this.j)},Ys.prototype.i=function(f){return function(){return f}}({});function Go(f,N){It.call(this),this.D=f,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Go,It),n=Go.prototype,n.open=function(f,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=N,this.readyState=1,Qr(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const N={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(N.body=f),(this.D||d).fetch(new Request(this.A,N)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gr(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Qr(this)),this.g&&(this.readyState=3,Qr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pd(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pd(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var N=f.value?f.value:new Uint8Array(0);(N=this.v.decode(N,{stream:!f.done}))&&(this.response=this.responseText+=N)}f.done?Gr(this):Qr(this),this.readyState==3&&Pd(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Gr(this))},n.Qa=function(f){this.g&&(this.response=f,Gr(this))},n.ga=function(){this.g&&Gr(this)};function Gr(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Qr(f)}n.setRequestHeader=function(f,N){this.u.append(f,N)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],N=this.h.entries();for(var j=N.next();!j.done;)j=j.value,f.push(j[0]+": "+j[1]),j=N.next();return f.join(`\r
`)};function Qr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Go.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Xs(f){let N="";return B(f,function(j,F){N+=F,N+=":",N+=j,N+=`\r
`}),N}function Ri(f,N,j){e:{for(F in j){var F=!1;break e}F=!0}F||(j=Xs(j),typeof f=="string"?j!=null&&encodeURIComponent(String(j)):At(f,N,j))}function $t(f){It.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S($t,It);var zp=/^https?$/i,Rc=["POST","PUT"];n=$t.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,N,j,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);N=N?N.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qr.g(),this.v=this.o?xt(this.o):xt(qr),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(N,String(f),!0),this.B=!1}catch(ie){Qo(this,ie);return}if(f=j||"",j=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var J in F)j.set(J,F[J]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const ie of F.keys())j.set(ie,F.get(ie));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(j.keys()).find(ie=>ie.toLowerCase()=="content-type"),J=d.FormData&&f instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Rc,N,void 0))||F||J||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,_e]of j)this.g.setRequestHeader(ie,_e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ya(this),this.u=!0,this.g.send(f),this.u=!1}catch(ie){Qo(this,ie)}};function Qo(f,N){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=N,f.m=5,Qa(f),mr(f)}function Qa(f){f.A||(f.A=!0,St(f,"complete"),St(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,St(this,"complete"),St(this,"abort"),mr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mr(this,!0)),$t.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?kc(this):this.bb())},n.bb=function(){kc(this)};function kc(f){if(f.h&&typeof c<"u"&&(!f.v[1]||nr(f)!=4||f.Z()!=2)){if(f.u&&nr(f)==4)Hn(f.Ea,0,f);else if(St(f,"readystatechange"),nr(f)==4){f.h=!1;try{const _e=f.Z();e:switch(_e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var j;if(!(j=N)){var F;if(F=_e===0){var J=String(f.D).match(Ho)[1]||null;!J&&d.self&&d.self.location&&(J=d.self.location.protocol.slice(0,-1)),F=!zp.test(J?J.toLowerCase():"")}j=F}if(j)St(f,"complete"),St(f,"success");else{f.m=6;try{var ie=2<nr(f)?f.g.statusText:""}catch{ie=""}f.l=ie+" ["+f.Z()+"]",Qa(f)}}finally{mr(f)}}}}function mr(f,N){if(f.g){Ya(f);const j=f.g,F=f.v[0]?()=>{}:null;f.g=null,f.v=null,N||St(f,"ready");try{j.onreadystatechange=F}catch{}}}function Ya(f){f.I&&(d.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function nr(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<nr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var N=this.g.responseText;return f&&N.indexOf(f)==0&&(N=N.substring(f.length)),er(N)}};function Oc(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Xa(f){const N={};f=(f.g&&2<=nr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<f.length;F++){if(I(f[F]))continue;var j=V(f[F]);const J=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const ie=N[J]||[];N[J]=ie,ie.push(j)}A(N,function(F){return F.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gs(f,N,j){return j&&j.internalChannelParams&&j.internalChannelParams[f]||N}function Dc(f){this.Aa=0,this.i=[],this.j=new zo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gs("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gs("baseRetryDelayMs",5e3,f),this.cb=gs("retryDelaySeedMs",1e4,f),this.Wa=gs("forwardChannelMaxRetries",2,f),this.wa=gs("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Wo(f&&f.concurrentRequestLimit),this.Da=new Up,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Dc.prototype,n.la=8,n.G=1,n.connect=function(f,N,j,F){nn(0),this.W=f,this.H=N||{},j&&F!==void 0&&(this.H.OSID=j,this.H.OAID=F),this.F=this.X,this.I=Dd(this,null,this.W),ys(this)};function Cn(f){if(Ja(f),f.G==3){var N=f.U++,j=pr(f.I);if(At(j,"SID",f.K),At(j,"RID",N),At(j,"TYPE","terminate"),Js(f,j),N=new Wr(f,f.j,N),N.L=2,N.v=ji(pr(j)),j=!1,d.navigator&&d.navigator.sendBeacon)try{j=d.navigator.sendBeacon(N.v.toString(),"")}catch{}!j&&d.Image&&(new Image().src=N.v,j=!0),j||(N.g=Ld(N.j,null),N.g.ea(N.v)),N.F=Date.now(),Dt(N)}Od(f)}function Yr(f){f.g&&(Lc(f),f.g.cancel(),f.g=null)}function Ja(f){Yr(f),f.u&&(d.clearTimeout(f.u),f.u=null),tl(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&d.clearTimeout(f.s),f.s=null)}function ys(f){if(!fr(f.h)&&!f.s){f.s=!0;var N=f.Ga;se||ae(),W||(se(),W=!0),ee.add(N,f),f.B=0}}function $p(f,N){return Ed(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=N.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=$r(v(f.Ga,f,N),kd(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const J=new Wr(this,this.j,f);let ie=this.o;if(this.S&&(ie?(ie=R(ie),O(ie,this.S)):ie=this.S),this.m!==null||this.O||(J.H=ie,ie=null),this.P)e:{for(var N=0,j=0;j<this.i.length;j++){t:{var F=this.i[j];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(N+=F,4096<N){N=j;break e}if(N===4096||j===this.i.length-1){N=j+1;break e}}N=1e3}else N=1e3;N=ki(this,J,N),j=pr(this.I),At(j,"RID",f),At(j,"CVER",22),this.D&&At(j,"X-HTTP-Session-Id",this.D),Js(this,j),ie&&(this.O?N="headers="+encodeURIComponent(String(Xs(ie)))+"&"+N:this.m&&Ri(j,this.m,ie)),Ac(this.h,J),this.Ua&&At(j,"TYPE","init"),this.P?(At(j,"$req",N),At(j,"SID","null"),J.T=!0,Wa(J,j,null)):Wa(J,j,N),this.G=2}}else this.G==3&&(f?Za(this,f):this.i.length==0||fr(this.h)||Za(this))};function Za(f,N){var j;N?j=N.l:j=f.U++;const F=pr(f.I);At(F,"SID",f.K),At(F,"RID",j),At(F,"AID",f.T),Js(f,F),f.m&&f.o&&Ri(F,f.m,f.o),j=new Wr(f,f.j,j,f.B+1),f.m===null&&(j.H=f.o),N&&(f.i=N.D.concat(f.i)),N=ki(f,j,1e3),j.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Ac(f.h,j),Wa(j,F,N)}function Js(f,N){f.H&&B(f.H,function(j,F){At(N,F,j)}),f.l&&Ti({},function(j,F){At(N,F,j)})}function ki(f,N,j){j=Math.min(f.i.length,j);var F=f.l?v(f.l.Na,f.l,f):null;e:{var J=f.i;let ie=-1;for(;;){const _e=["count="+j];ie==-1?0<j?(ie=J[0].g,_e.push("ofs="+ie)):ie=0:_e.push("ofs="+ie);let Nt=!0;for(let mn=0;mn<j;mn++){let mt=J[mn].g;const wn=J[mn].map;if(mt-=ie,0>mt)ie=Math.max(0,J[mn].g-100),Nt=!1;else try{Ad(wn,_e,"req"+mt+"_")}catch{F&&F(wn)}}if(Nt){F=_e.join("&");break e}}}return f=f.i.splice(0,j),N.D=f,F}function Yo(f){if(!f.g&&!f.u){f.Y=1;var N=f.Fa;se||ae(),W||(se(),W=!0),ee.add(N,f),f.v=0}}function el(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=$r(v(f.Fa,f),kd(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Rd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=$r(v(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nn(10),Yr(this),Rd(this))};function Lc(f){f.A!=null&&(d.clearTimeout(f.A),f.A=null)}function Rd(f){f.g=new Wr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var N=pr(f.qa);At(N,"RID","rpc"),At(N,"SID",f.K),At(N,"AID",f.T),At(N,"CI",f.F?"0":"1"),!f.F&&f.ja&&At(N,"TO",f.ja),At(N,"TYPE","xmlhttp"),Js(f,N),f.m&&f.o&&Ri(N,f.m,f.o),f.L&&(f.g.I=f.L);var j=f.g;f=f.ia,j.L=1,j.v=ji(pr(N)),j.m=null,j.P=!0,Ic(j,f)}n.Za=function(){this.C!=null&&(this.C=null,Yr(this),el(this),nn(19))};function tl(f){f.C!=null&&(d.clearTimeout(f.C),f.C=null)}function nl(f,N){var j=null;if(f.g==N){tl(f),Lc(f),f.g=null;var F=2}else if(Kn(f.h,N))j=N.D,bd(f.h,N),F=1;else return;if(f.G!=0){if(N.o)if(F==1){j=N.m?N.m.length:0,N=Date.now()-N.F;var J=f.B;F=Uo(),St(F,new za(F,j)),ys(f)}else Yo(f);else if(J=N.s,J==3||J==0&&0<N.X||!(F==1&&$p(f,N)||F==2&&el(f)))switch(j&&0<j.length&&(N=f.h,N.i=N.i.concat(j)),J){case 1:Zs(f,5);break;case 4:Zs(f,10);break;case 3:Zs(f,6);break;default:Zs(f,2)}}}function kd(f,N){let j=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(j*=2),j*N}function Zs(f,N){if(f.j.info("Error code "+N),N==2){var j=v(f.fb,f),F=f.Xa;const J=!F;F=new Qs(F||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ko(F,"https"),ji(F),J?Vp(F.toString(),j):jd(F.toString(),j)}else nn(2);f.G=0,f.l&&f.l.sa(N),Od(f),Ja(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),nn(2)):(this.j.info("Failed to ping google.com"),nn(1))};function Od(f){if(f.G=0,f.ka=[],f.l){const N=Sd(f.h);(N.length!=0||f.i.length!=0)&&(w(f.ka,N),w(f.ka,f.i),f.h.i.length=0,_(f.i),f.i.length=0),f.l.ra()}}function Dd(f,N,j){var F=j instanceof Qs?pr(j):new Qs(j);if(F.g!="")N&&(F.g=N+"."+F.g),Ci(F,F.s);else{var J=d.location;F=J.protocol,N=N?N+"."+J.hostname:J.hostname,J=+J.port;var ie=new Qs(null);F&&Ko(ie,F),N&&(ie.g=N),J&&Ci(ie,J),j&&(ie.l=j),F=ie}return j=f.D,N=f.ya,j&&N&&At(F,j,N),At(F,"VER",f.la),Js(f,F),F}function Ld(f,N,j){if(N&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return N=f.Ca&&!f.pa?new $t(new Ys({eb:j})):new $t(f.pa),N.Ha(f.J),N}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mc(){}n=Mc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function rl(){}rl.prototype.g=function(f,N){return new Gn(f,N)};function Gn(f,N){It.call(this),this.g=new Dc(N),this.l=f,this.h=N&&N.messageUrlParams||null,f=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(f?f["X-WebChannel-Content-Type"]=N.messageContentType:f={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.va&&(f?f["X-WebChannel-Client-Profile"]=N.va:f={"X-WebChannel-Client-Profile":N.va}),this.g.S=f,(f=N&&N.Sb)&&!I(f)&&(this.g.m=f),this.v=N&&N.supportsCrossDomainXhr||!1,this.u=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!I(N)&&(this.g.D=N,f=this.h,f!==null&&N in f&&(f=this.h,N in f&&delete f[N])),this.j=new vs(this)}S(Gn,It),Gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gn.prototype.close=function(){Cn(this.g)},Gn.prototype.o=function(f){var N=this.g;if(typeof f=="string"){var j={};j.__data__=f,f=j}else this.u&&(j={},j.__data__=Ks(f),f=j);N.i.push(new _d(N.Ya++,f)),N.G==3&&ys(N)},Gn.prototype.N=function(){this.g.l=null,delete this.j,Cn(this.g),delete this.g,Gn.aa.N.call(this)};function Md(f){tn.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var N=f.__sm__;if(N){e:{for(const j in N){f=j;break e}f=void 0}(this.i=f)&&(f=this.i,N=N!==null&&f in N?N[f]:void 0),this.data=N}else this.data=f}S(Md,tn);function Fd(){zr.call(this),this.status=1}S(Fd,zr);function vs(f){this.g=f}S(vs,Mc),vs.prototype.ua=function(){St(this.g,"a")},vs.prototype.ta=function(f){St(this.g,new Md(f))},vs.prototype.sa=function(f){St(this.g,new Fd)},vs.prototype.ra=function(){St(this.g,"b")},rl.prototype.createWebChannel=rl.prototype.g,Gn.prototype.send=Gn.prototype.o,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,TN=function(){return new rl},NN=function(){return Uo()},SN=Cr,Ey={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ba.NO_ERROR=0,Ba.TIMEOUT=8,Ba.HTTP_ERROR=6,sf=Ba,yd.COMPLETE="complete",bN=yd,yt.EventType=Wt,Wt.OPEN="a",Wt.CLOSE="b",Wt.ERROR="c",Wt.MESSAGE="d",It.prototype.listen=It.prototype.K,hu=yt,$t.prototype.listenOnce=$t.prototype.L,$t.prototype.getLastError=$t.prototype.Ka,$t.prototype.getLastErrorCode=$t.prototype.Ba,$t.prototype.getStatus=$t.prototype.Z,$t.prototype.getResponseJson=$t.prototype.Oa,$t.prototype.getResponseText=$t.prototype.oa,$t.prototype.send=$t.prototype.ea,$t.prototype.setWithCredentials=$t.prototype.Ha,EN=$t}).apply(typeof Uh<"u"?Uh:typeof self<"u"?self:typeof window<"u"?window:{});const aE="@firebase/firestore",lE="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cr.UNAUTHENTICATED=new cr(null),cr.GOOGLE_CREDENTIALS=new cr("google-credentials-uid"),cr.FIRST_PARTY=new cr("first-party-uid"),cr.MOCK_USER=new cr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yc="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=new wv("@firebase/firestore");function Il(){return ja.logLevel}function Ae(n,...e){if(ja.logLevel<=dt.DEBUG){const t=e.map(Av);ja.debug(`Firestore (${yc}): ${n}`,...t)}}function xi(n,...e){if(ja.logLevel<=dt.ERROR){const t=e.map(Av);ja.error(`Firestore (${yc}): ${n}`,...t)}}function Aa(n,...e){if(ja.logLevel<=dt.WARN){const t=e.map(Av);ja.warn(`Firestore (${yc}): ${n}`,...t)}}function Av(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,CN(n,r,t)}function CN(n,e,t){let r=`FIRESTORE (${yc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw xi(r),new Error(r)}function Et(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||CN(e,i,r)}function rt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends Ws{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(cr.UNAUTHENTICATED))}shutdown(){}}class tF{constructor(e){this.t=e,this.currentUser=cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Et(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let a=new yo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new yo,e.enqueueRetryable(()=>i(this.currentUser))};const c=()=>{const h=a;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},d=h=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(h=>d(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?d(h):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new yo)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et(typeof r.accessToken=="string",31837,{l:r}),new ZM(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Et(e===null||typeof e=="string",2055,{h:e}),new cr(e)}}class nF{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=cr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class rF{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new nF(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(cr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sF{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Fr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Et(this.o===void 0,3512);const r=a=>{a.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,Ae("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new cE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Et(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new cE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iF(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=iF(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function ct(n,e){return n<e?-1:n>e?1:0}function by(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ct(r,i);{const a=IN(),c=oF(a.encode(uE(n,t)),a.encode(uE(e,t)));return c!==0?c:ct(r,i)}}t+=r>65535?2:1}return ct(n.length,e.length)}function uE(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function oF(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ct(n[t],e[t]);return ct(n.length,e.length)}function tc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy="__name__";class bs{constructor(e,t,r){t===void 0?t=0:t>e.length&&Qe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Qe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return bs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bs?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=bs.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return ct(e.length,t.length)}static compareSegments(e,t){const r=bs.isNumericId(e),i=bs.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?bs.extractNumericId(e).compare(bs.extractNumericId(t)):by(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return go.fromString(e.substring(4,e.length-2))}}class Rt extends bs{construct(e,t,r){return new Rt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ce(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Rt(t)}static emptyPath(){return new Rt([])}}const aF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rn extends bs{construct(e,t,r){return new Rn(e,t,r)}static isValidIdentifier(e){return aF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Sy}static keyField(){return new Rn([Sy])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Ce(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new Ce(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Ce(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else d==="`"?(c=!c,i++):d!=="."||c?(r+=d,i++):(a(),i++)}if(a(),c)throw new Ce(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rn(t)}static emptyPath(){return new Rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.path=e}static fromPath(e){return new Ue(Rt.fromString(e))}static fromName(e){return new Ue(Rt.fromString(e).popFirst(5))}static empty(){return new Ue(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ue(new Rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(n,e,t){if(!t)throw new Ce(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lF(n,e,t,r){if(e===!0&&r===!0)throw new Ce(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dE(n){if(!Ue.isDocumentKey(n))throw new Ce(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hE(n){if(Ue.isDocumentKey(n))throw new Ce(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jN(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function fp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Qe(12329,{type:typeof n})}function Rs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ce(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=fp(n);throw new Ce(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(n,e){const t={typeString:n};return e&&(t.value=e),t}function ld(n,e){if(!jN(n))throw new Ce(le.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(i&&typeof c!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new Ce(le.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=-62135596800,pE=1e6;class zt{static now(){return zt.fromMillis(Date.now())}static fromDate(e){return zt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*pE);return new zt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ce(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ce(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<fE)throw new Ce(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pE}_compareTo(e){return this.seconds===e.seconds?ct(this.nanoseconds,e.nanoseconds):ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:zt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ld(e,zt._jsonSchema))return new zt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-fE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}zt._jsonSchemaVersion="firestore/timestamp/1.0",zt._jsonSchema={type:hn("string",zt._jsonSchemaVersion),seconds:hn("number"),nanoseconds:hn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{static fromTimestamp(e){return new tt(e)}static min(){return new tt(new zt(0,0))}static max(){return new tt(new zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu=-1;function cF(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=tt.fromTimestamp(r===1e9?new zt(t+1,0):new zt(t,r));return new No(i,Ue.empty(),e)}function uF(n){return new No(n.readTime,n.key,Mu)}class No{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new No(tt.min(),Ue.empty(),Mu)}static max(){return new No(tt.max(),Ue.empty(),Mu)}}function dF(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ue.comparator(n.documentKey,e.documentKey),t!==0?t:ct(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vc(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==hF)throw n;Ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let i=0,a=0,c=!1;e.forEach(d=>{++i,d.next(()=>{++a,c&&a===i&&t()},h=>r(h))}),c=!0,a===i&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(i=>i?de.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new de((r,i)=>{const a=e.length,c=new Array(a);let d=0;for(let h=0;h<a;h++){const p=h;t(e[p]).next(g=>{c[p]=g,++d,d===a&&r(c)},g=>i(g))}})}static doWhile(e,t){return new de((r,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):r()};a()})}}function pF(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function xc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}pp.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=-1;function mp(n){return n==null}function Rf(n){return n===0&&1/n==-1/0}function mF(n){return typeof n=="number"&&Number.isInteger(n)&&!Rf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="";function gF(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=mE(e)),e=yF(n.get(t),e);return mE(e)}function yF(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case AN:t+="";break;default:t+=a}}return t}function mE(n){return n+AN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Oo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function PN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,t){this.comparator=e,this.root=t||An.EMPTY}insert(e,t){return new Xt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,An.BLACK,null,null))}remove(e){return new Xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,An.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zh(this.root,e,this.comparator,!0)}}class zh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class An{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??An.RED,this.left=i??An.EMPTY,this.right=a??An.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new An(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return An.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return An.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,An.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,An.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Qe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Qe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Qe(27949);return e+(this.isRed()?0:1)}}An.EMPTY=null,An.RED=!0,An.BLACK=!1;An.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe(57766)}get value(){throw Qe(16141)}get color(){throw Qe(16727)}get left(){throw Qe(29726)}get right(){throw Qe(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new An(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.comparator=e,this.data=new Xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yE(this.data.getIterator())}getIteratorFrom(e){return new yE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vn(this.comparator);return t.data=e,t}}class yE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.fields=e,e.sort(Rn.comparator)}static empty(){return new br([])}unionWith(e){let t=new vn(Rn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new br(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new RN("Invalid base64 string: "+a):a}}(e);return new kn(t)}static fromUint8Array(e){const t=function(i){let a="";for(let c=0;c<i.length;++c)a+=String.fromCharCode(i[c]);return a}(e);return new kn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kn.EMPTY_BYTE_STRING=new kn("");const vF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function To(n){if(Et(!!n,39018),typeof n=="string"){let e=0;const t=vF.exec(n);if(Et(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:sn(n.seconds),nanos:sn(n.nanos)}}function sn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Co(n){return typeof n=="string"?kn.fromBase64String(n):kn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="server_timestamp",ON="__type__",DN="__previous_value__",LN="__local_write_time__";function Ov(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[ON])===null||t===void 0?void 0:t.stringValue)===kN}function gp(n){const e=n.mapValue.fields[DN];return Ov(e)?gp(e):e}function Fu(n){const e=To(n.mapValue.fields[LN].timestampValue);return new zt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e,t,r,i,a,c,d,h,p,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=h,this.useFetchStreams=p,this.isUsingEmulator=g}}const kf="(default)";class Vu{constructor(e,t){this.projectId=e,this.database=t||kf}static empty(){return new Vu("","")}get isDefaultDatabase(){return this.database===kf}isEqual(e){return e instanceof Vu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="__type__",wF="__max__",$h={mapValue:{}},FN="__vector__",Of="value";function Io(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ov(n)?4:EF(n)?9007199254740991:_F(n)?10:11:Qe(28295,{value:n})}function Vs(n,e){if(n===e)return!0;const t=Io(n);if(t!==Io(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fu(n).isEqual(Fu(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const c=To(i.timestampValue),d=To(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,a){return Co(i.bytesValue).isEqual(Co(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return sn(i.geoPointValue.latitude)===sn(a.geoPointValue.latitude)&&sn(i.geoPointValue.longitude)===sn(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return sn(i.integerValue)===sn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const c=sn(i.doubleValue),d=sn(a.doubleValue);return c===d?Rf(c)===Rf(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return tc(n.arrayValue.values||[],e.arrayValue.values||[],Vs);case 10:case 11:return function(i,a){const c=i.mapValue.fields||{},d=a.mapValue.fields||{};if(gE(c)!==gE(d))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(d[h]===void 0||!Vs(c[h],d[h])))return!1;return!0}(n,e);default:return Qe(52216,{left:n})}}function Uu(n,e){return(n.values||[]).find(t=>Vs(t,e))!==void 0}function nc(n,e){if(n===e)return 0;const t=Io(n),r=Io(e);if(t!==r)return ct(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ct(n.booleanValue,e.booleanValue);case 2:return function(a,c){const d=sn(a.integerValue||a.doubleValue),h=sn(c.integerValue||c.doubleValue);return d<h?-1:d>h?1:d===h?0:isNaN(d)?isNaN(h)?0:-1:1}(n,e);case 3:return vE(n.timestampValue,e.timestampValue);case 4:return vE(Fu(n),Fu(e));case 5:return by(n.stringValue,e.stringValue);case 6:return function(a,c){const d=Co(a),h=Co(c);return d.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const d=a.split("/"),h=c.split("/");for(let p=0;p<d.length&&p<h.length;p++){const g=ct(d[p],h[p]);if(g!==0)return g}return ct(d.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const d=ct(sn(a.latitude),sn(c.latitude));return d!==0?d:ct(sn(a.longitude),sn(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return xE(n.arrayValue,e.arrayValue);case 10:return function(a,c){var d,h,p,g;const y=a.fields||{},v=c.fields||{},b=(d=y[Of])===null||d===void 0?void 0:d.arrayValue,S=(h=v[Of])===null||h===void 0?void 0:h.arrayValue,_=ct(((p=b==null?void 0:b.values)===null||p===void 0?void 0:p.length)||0,((g=S==null?void 0:S.values)===null||g===void 0?void 0:g.length)||0);return _!==0?_:xE(b,S)}(n.mapValue,e.mapValue);case 11:return function(a,c){if(a===$h.mapValue&&c===$h.mapValue)return 0;if(a===$h.mapValue)return 1;if(c===$h.mapValue)return-1;const d=a.fields||{},h=Object.keys(d),p=c.fields||{},g=Object.keys(p);h.sort(),g.sort();for(let y=0;y<h.length&&y<g.length;++y){const v=by(h[y],g[y]);if(v!==0)return v;const b=nc(d[h[y]],p[g[y]]);if(b!==0)return b}return ct(h.length,g.length)}(n.mapValue,e.mapValue);default:throw Qe(23264,{le:t})}}function vE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ct(n,e);const t=To(n),r=To(e),i=ct(t.seconds,r.seconds);return i!==0?i:ct(t.nanos,r.nanos)}function xE(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=nc(t[i],r[i]);if(a)return a}return ct(t.length,r.length)}function rc(n){return Ny(n)}function Ny(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=To(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Co(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ue.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=Ny(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const c of r)a?a=!1:i+=",",i+=`${c}:${Ny(t.fields[c])}`;return i+"}"}(n.mapValue):Qe(61005,{value:n})}function of(n){switch(Io(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gp(n);return e?16+of(e):16;case 5:return 2*n.stringValue.length;case 6:return Co(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+of(a),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Oo(r.fields,(a,c)=>{i+=a.length+of(c)}),i}(n.mapValue);default:throw Qe(13486,{value:n})}}function wE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ty(n){return!!n&&"integerValue"in n}function Dv(n){return!!n&&"arrayValue"in n}function _E(n){return!!n&&"nullValue"in n}function EE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function af(n){return!!n&&"mapValue"in n}function _F(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[MN])===null||t===void 0?void 0:t.stringValue)===FN}function Eu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Oo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Eu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Eu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function EF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===wF}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.value=e}static empty(){return new dr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!af(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eu(t)}setAll(e){let t=Rn.emptyPath(),r={},i=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=d.popLast()}c?r[d.lastSegment()]=Eu(c):i.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());af(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];af(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Oo(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new dr(Eu(this.value))}}function VN(n){const e=[];return Oo(n.fields,(t,r)=>{const i=new Rn([t]);if(af(r)){const a=VN(r.mapValue).fields;if(a.length===0)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new br(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,t,r,i,a,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=d}static newInvalidDocument(e){return new zn(e,0,tt.min(),tt.min(),tt.min(),dr.empty(),0)}static newFoundDocument(e,t,r,i){return new zn(e,1,t,tt.min(),r,i,0)}static newNoDocument(e,t){return new zn(e,2,t,tt.min(),tt.min(),dr.empty(),0)}static newUnknownDocument(e,t){return new zn(e,3,t,tt.min(),tt.min(),dr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,t){this.position=e,this.inclusive=t}}function bE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(a.field.isKeyField()?r=Ue.comparator(Ue.fromName(c.referenceValue),t.key):r=nc(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function SE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,t="asc"){this.field=e,this.dir=t}}function bF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{}class dn extends UN{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new NF(e,t,r):t==="array-contains"?new IF(e,r):t==="in"?new jF(e,r):t==="not-in"?new AF(e,r):t==="array-contains-any"?new PF(e,r):new dn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new TF(e,r):new CF(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(nc(t,this.value)):t!==null&&Io(this.value)===Io(t)&&this.matchesComparison(nc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Qe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fs extends UN{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new fs(e,t)}matches(e){return zN(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function zN(n){return n.op==="and"}function $N(n){return SF(n)&&zN(n)}function SF(n){for(const e of n.filters)if(e instanceof fs)return!1;return!0}function Cy(n){if(n instanceof dn)return n.field.canonicalString()+n.op.toString()+rc(n.value);if($N(n))return n.filters.map(e=>Cy(e)).join(",");{const e=n.filters.map(t=>Cy(t)).join(",");return`${n.op}(${e})`}}function BN(n,e){return n instanceof dn?function(r,i){return i instanceof dn&&r.op===i.op&&r.field.isEqual(i.field)&&Vs(r.value,i.value)}(n,e):n instanceof fs?function(r,i){return i instanceof fs&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,c,d)=>a&&BN(c,i.filters[d]),!0):!1}(n,e):void Qe(19439)}function qN(n){return n instanceof dn?function(t){return`${t.field.canonicalString()} ${t.op} ${rc(t.value)}`}(n):n instanceof fs?function(t){return t.op.toString()+" {"+t.getFilters().map(qN).join(" ,")+"}"}(n):"Filter"}class NF extends dn{constructor(e,t,r){super(e,t,r),this.key=Ue.fromName(r.referenceValue)}matches(e){const t=Ue.comparator(e.key,this.key);return this.matchesComparison(t)}}class TF extends dn{constructor(e,t){super(e,"in",t),this.keys=WN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class CF extends dn{constructor(e,t){super(e,"not-in",t),this.keys=WN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function WN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Ue.fromName(r.referenceValue))}class IF extends dn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Dv(t)&&Uu(t.arrayValue,this.value)}}class jF extends dn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Uu(this.value.arrayValue,t)}}class AF extends dn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Uu(this.value.arrayValue,t)}}class PF extends dn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Dv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Uu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e,t=null,r=[],i=[],a=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=d,this.Pe=null}}function NE(n,e=null,t=[],r=[],i=null,a=null,c=null){return new RF(n,e,t,r,i,a,c)}function Lv(n){const e=rt(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Cy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),mp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>rc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>rc(r)).join(",")),e.Pe=t}return e.Pe}function Mv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!bF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!BN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!SE(n.startAt,e.startAt)&&SE(n.endAt,e.endAt)}function Iy(n){return Ue.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,t=null,r=[],i=[],a=null,c="F",d=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=h,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function kF(n,e,t,r,i,a,c,d){return new Fa(n,e,t,r,i,a,c,d)}function Fv(n){return new Fa(n)}function TE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function HN(n){return n.collectionGroup!==null}function bu(n){const e=rt(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new vn(Rn.comparator);return c.filters.forEach(h=>{h.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new zu(a,r))}),t.has(Rn.keyField().canonicalString())||e.Te.push(new zu(Rn.keyField(),r))}return e.Te}function ks(n){const e=rt(n);return e.Ie||(e.Ie=OF(e,bu(n))),e.Ie}function OF(n,e){if(n.limitType==="F")return NE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new zu(i.field,a)});const t=n.endAt?new Df(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Df(n.startAt.position,n.startAt.inclusive):null;return NE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function jy(n,e){const t=n.filters.concat([e]);return new Fa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ay(n,e,t){return new Fa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yp(n,e){return Mv(ks(n),ks(e))&&n.limitType===e.limitType}function KN(n){return`${Lv(ks(n))}|lt:${n.limitType}`}function jl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>qN(i)).join(", ")}]`),mp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>rc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>rc(i)).join(",")),`Target(${r})`}(ks(n))}; limitType=${n.limitType})`}function vp(n,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ue.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,i){for(const a of bu(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(c,d,h){const p=bE(c,d,h);return c.inclusive?p<=0:p<0}(r.startAt,bu(r),i)||r.endAt&&!function(c,d,h){const p=bE(c,d,h);return c.inclusive?p>=0:p>0}(r.endAt,bu(r),i))}(n,e)}function DF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GN(n){return(e,t)=>{let r=!1;for(const i of bu(n)){const a=LF(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function LF(n,e,t){const r=n.field.isKeyField()?Ue.comparator(e.key,t.key):function(a,c,d){const h=c.data.field(a),p=d.data.field(a);return h!==null&&p!==null?nc(h,p):Qe(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Qe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Oo(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return PN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MF=new Xt(Ue.comparator);function wi(){return MF}const QN=new Xt(Ue.comparator);function fu(...n){let e=QN;for(const t of n)e=e.insert(t.key,t);return e}function YN(n){let e=QN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function da(){return Su()}function XN(){return Su()}function Su(){return new Va(n=>n.toString(),(n,e)=>n.isEqual(e))}const FF=new Xt(Ue.comparator),VF=new vn(Ue.comparator);function ht(...n){let e=VF;for(const t of n)e=e.add(t);return e}const UF=new vn(ct);function zF(){return UF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rf(e)?"-0":e}}function JN(n){return{integerValue:""+n}}function $F(n,e){return mF(e)?JN(e):Vv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(){this._=void 0}}function BF(n,e,t){return n instanceof Lf?function(i,a){const c={fields:{[ON]:{stringValue:kN},[LN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Ov(a)&&(a=gp(a)),a&&(c.fields[DN]=a),{mapValue:c}}(t,e):n instanceof $u?eT(n,e):n instanceof Bu?tT(n,e):function(i,a){const c=ZN(i,a),d=CE(c)+CE(i.Ee);return Ty(c)&&Ty(i.Ee)?JN(d):Vv(i.serializer,d)}(n,e)}function qF(n,e,t){return n instanceof $u?eT(n,e):n instanceof Bu?tT(n,e):t}function ZN(n,e){return n instanceof Mf?function(r){return Ty(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Lf extends xp{}class $u extends xp{constructor(e){super(),this.elements=e}}function eT(n,e){const t=nT(e);for(const r of n.elements)t.some(i=>Vs(i,r))||t.push(r);return{arrayValue:{values:t}}}class Bu extends xp{constructor(e){super(),this.elements=e}}function tT(n,e){let t=nT(e);for(const r of n.elements)t=t.filter(i=>!Vs(i,r));return{arrayValue:{values:t}}}class Mf extends xp{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function CE(n){return sn(n.integerValue||n.doubleValue)}function nT(n){return Dv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function WF(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof $u&&i instanceof $u||r instanceof Bu&&i instanceof Bu?tc(r.elements,i.elements,Vs):r instanceof Mf&&i instanceof Mf?Vs(r.Ee,i.Ee):r instanceof Lf&&i instanceof Lf}(n.transform,e.transform)}class HF{constructor(e,t){this.version=e,this.transformResults=t}}class cs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cs}static exists(e){return new cs(void 0,e)}static updateTime(e){return new cs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class wp{}function rT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Uv(n.key,cs.none()):new cd(n.key,n.data,cs.none());{const t=n.data,r=dr.empty();let i=new vn(Rn.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),i=i.add(a)}return new Do(n.key,r,new br(i.toArray()),cs.none())}}function KF(n,e,t){n instanceof cd?function(i,a,c){const d=i.value.clone(),h=jE(i.fieldTransforms,a,c.transformResults);d.setAll(h),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Do?function(i,a,c){if(!lf(i.precondition,a))return void a.convertToUnknownDocument(c.version);const d=jE(i.fieldTransforms,a,c.transformResults),h=a.data;h.setAll(sT(i)),h.setAll(d),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):function(i,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Nu(n,e,t,r){return n instanceof cd?function(a,c,d,h){if(!lf(a.precondition,c))return d;const p=a.value.clone(),g=AE(a.fieldTransforms,h,c);return p.setAll(g),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof Do?function(a,c,d,h){if(!lf(a.precondition,c))return d;const p=AE(a.fieldTransforms,h,c),g=c.data;return g.setAll(sT(a)),g.setAll(p),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(y=>y.field))}(n,e,t,r):function(a,c,d){return lf(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(n,e,t)}function GF(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=ZN(r.transform,i||null);a!=null&&(t===null&&(t=dr.empty()),t.set(r.field,a))}return t||null}function IE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&tc(r,i,(a,c)=>WF(a,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class cd extends wp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Do extends wp{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function sT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function jE(n,e,t){const r=new Map;Et(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,d=e.data.field(a.field);r.set(a.field,qF(c,d,t[i]))}return r}function AE(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,BF(a,c,e))}return r}class Uv extends wp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QF extends wp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&KF(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Nu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Nu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=XN();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let d=this.applyToLocalView(c,a.mutatedFields);d=t.has(i.key)?null:d;const h=rT(c,d);h!==null&&r.set(i.key,h),c.isValidDocument()||c.convertToNoDocument(tt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ht())}isEqual(e){return this.batchId===e.batchId&&tc(this.mutations,e.mutations,(t,r)=>IE(t,r))&&tc(this.baseMutations,e.baseMutations,(t,r)=>IE(t,r))}}class zv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Et(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return FF}();const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new zv(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var un,gt;function ZF(n){switch(n){case le.OK:return Qe(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return Qe(15467,{code:n})}}function iT(n){if(n===void 0)return xi("GRPC error has no .code"),le.UNKNOWN;switch(n){case un.OK:return le.OK;case un.CANCELLED:return le.CANCELLED;case un.UNKNOWN:return le.UNKNOWN;case un.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case un.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case un.INTERNAL:return le.INTERNAL;case un.UNAVAILABLE:return le.UNAVAILABLE;case un.UNAUTHENTICATED:return le.UNAUTHENTICATED;case un.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case un.NOT_FOUND:return le.NOT_FOUND;case un.ALREADY_EXISTS:return le.ALREADY_EXISTS;case un.PERMISSION_DENIED:return le.PERMISSION_DENIED;case un.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case un.ABORTED:return le.ABORTED;case un.OUT_OF_RANGE:return le.OUT_OF_RANGE;case un.UNIMPLEMENTED:return le.UNIMPLEMENTED;case un.DATA_LOSS:return le.DATA_LOSS;default:return Qe(39323,{code:n})}}(gt=un||(un={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV=new go([4294967295,4294967295],0);function PE(n){const e=IN().encode(n),t=new _N;return t.update(e),new Uint8Array(t.digest())}function RE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new go([t,r],0),new go([i,a],0)]}class $v{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new pu(`Invalid padding: ${t}`);if(r<0)throw new pu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new pu(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=go.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(go.fromNumber(r)));return i.compare(eV)===1&&(i=new go([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=PE(e),[r,i]=RE(t);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,i,a);if(!this.ye(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new $v(a,i,t);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.fe===0)return;const t=PE(e),[r,i]=RE(t);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,i,a);this.we(c)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class pu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,ud.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new _p(tt.min(),i,new Xt(ct),wi(),ht())}}class ud{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ud(r,t,ht(),ht(),ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}}class oT{constructor(e,t){this.targetId=e,this.De=t}}class aT{constructor(e,t,r=kn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class kE{constructor(){this.ve=0,this.Ce=OE(),this.Fe=kn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ht(),t=ht(),r=ht();return this.Ce.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Qe(38017,{changeType:a})}}),new ud(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=OE()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Et(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class tV{constructor(e){this.We=e,this.Ge=new Map,this.ze=wi(),this.je=Bh(),this.Je=Bh(),this.He=new Xt(ct)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Qe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){const t=e.targetId,r=e.De.count,i=this.st(t);if(i){const a=i.target;if(Iy(a))if(r===0){const c=new Ue(a.path);this.Xe(t,c,zn.newNoDocument(c,tt.min()))}else Et(r===1,20013,{expectedCount:r});else{const c=this.ot(t);if(c!==r){const d=this._t(e),h=d?this.ut(d,e,c):1;if(h!==0){this.rt(t);const p=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,p)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let c,d;try{c=Co(r).toUint8Array()}catch(h){if(h instanceof RN)return Aa("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{d=new $v(c,i,a)}catch(h){return Aa(h instanceof pu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return d.fe===0?null:d}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let i=0;return r.forEach(a=>{const c=this.We.lt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,a,null),i++)}),i}Pt(e){const t=new Map;this.Ge.forEach((a,c)=>{const d=this.st(c);if(d){if(a.current&&Iy(d.target)){const h=new Ue(d.target.path);this.Tt(h).has(c)||this.It(c,h)||this.Xe(c,h,zn.newNoDocument(h,e))}a.Ne&&(t.set(c,a.Le()),a.ke())}});let r=ht();this.Je.forEach((a,c)=>{let d=!0;c.forEachWhile(h=>{const p=this.st(h);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(a))}),this.ze.forEach((a,c)=>c.setReadTime(e));const i=new _p(e,t,this.He,this.ze,r);return this.ze=wi(),this.je=Bh(),this.Je=Bh(),this.He=new Xt(ct),i}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new kE,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new vn(ct),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new vn(ct),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Ae("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new kE),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Bh(){return new Xt(Ue.comparator)}function OE(){return new Xt(Ue.comparator)}const nV={asc:"ASCENDING",desc:"DESCENDING"},rV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sV={and:"AND",or:"OR"};class iV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Py(n,e){return n.useProto3Json||mp(e)?e:{value:e}}function Ff(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function oV(n,e){return Ff(n,e.toTimestamp())}function Os(n){return Et(!!n,49232),tt.fromTimestamp(function(t){const r=To(t);return new zt(r.seconds,r.nanos)}(n))}function Bv(n,e){return Ry(n,e).canonicalString()}function Ry(n,e){const t=function(i){return new Rt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function cT(n){const e=Rt.fromString(n);return Et(pT(e),10190,{key:e.toString()}),e}function ky(n,e){return Bv(n.databaseId,e.path)}function jg(n,e){const t=cT(e);if(t.get(1)!==n.databaseId.projectId)throw new Ce(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ce(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ue(dT(t))}function uT(n,e){return Bv(n.databaseId,e)}function aV(n){const e=cT(n);return e.length===4?Rt.emptyPath():dT(e)}function Oy(n){return new Rt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dT(n){return Et(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function DE(n,e,t){return{name:ky(n,e),fields:t.value.mapValue.fields}}function lV(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Qe(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(p,g){return p.useProto3Json?(Et(g===void 0||typeof g=="string",58123),kn.fromBase64String(g||"")):(Et(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),kn.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(p){const g=p.code===void 0?le.UNKNOWN:iT(p.code);return new Ce(g,p.message||"")}(c);t=new aT(r,i,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=jg(n,r.document.name),a=Os(r.document.updateTime),c=r.document.createTime?Os(r.document.createTime):tt.min(),d=new dr({mapValue:{fields:r.document.fields}}),h=zn.newFoundDocument(i,a,c,d),p=r.targetIds||[],g=r.removedTargetIds||[];t=new cf(p,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=jg(n,r.document),a=r.readTime?Os(r.readTime):tt.min(),c=zn.newNoDocument(i,a),d=r.removedTargetIds||[];t=new cf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=jg(n,r.document),a=r.removedTargetIds||[];t=new cf([],a,i,null)}else{if(!("filter"in e))return Qe(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,c=new JF(i,a),d=r.targetId;t=new oT(d,c)}}return t}function cV(n,e){let t;if(e instanceof cd)t={update:DE(n,e.key,e.value)};else if(e instanceof Uv)t={delete:ky(n,e.key)};else if(e instanceof Do)t={update:DE(n,e.key,e.data),updateMask:vV(e.fieldMask)};else{if(!(e instanceof QF))return Qe(16599,{Rt:e.type});t={verify:ky(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const d=c.transform;if(d instanceof Lf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof $u)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Bu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Mf)return{fieldPath:c.field.canonicalString(),increment:d.Ee};throw Qe(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:oV(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Qe(27497)}(n,e.precondition)),t}function uV(n,e){return n&&n.length>0?(Et(e!==void 0,14353),n.map(t=>function(i,a){let c=i.updateTime?Os(i.updateTime):Os(a);return c.isEqual(tt.min())&&(c=Os(a)),new HF(c,i.transformResults||[])}(t,e))):[]}function dV(n,e){return{documents:[uT(n,e.path)]}}function hV(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=uT(n,i);const a=function(p){if(p.length!==0)return fT(fs.create(p,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(p){if(p.length!==0)return p.map(g=>function(v){return{field:Al(v.field),direction:mV(v.dir)}}(g))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Py(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{Vt:t,parent:i}}function fV(n){let e=aV(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Et(r===1,65062);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let a=[];t.where&&(a=function(y){const v=hT(y);return v instanceof fs&&$N(v)?v.getFilters():[v]}(t.where));let c=[];t.orderBy&&(c=function(y){return y.map(v=>function(S){return new zu(Pl(S.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(v))}(t.orderBy));let d=null;t.limit&&(d=function(y){let v;return v=typeof y=="object"?y.value:y,mp(v)?null:v}(t.limit));let h=null;t.startAt&&(h=function(y){const v=!!y.before,b=y.values||[];return new Df(b,v)}(t.startAt));let p=null;return t.endAt&&(p=function(y){const v=!y.before,b=y.values||[];return new Df(b,v)}(t.endAt)),kF(e,i,c,a,d,"F",h,p)}function pV(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qe(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function hT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Pl(t.unaryFilter.field);return dn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Pl(t.unaryFilter.field);return dn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Pl(t.unaryFilter.field);return dn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Pl(t.unaryFilter.field);return dn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Qe(61313);default:return Qe(60726)}}(n):n.fieldFilter!==void 0?function(t){return dn.create(Pl(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Qe(58110);default:return Qe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return fs.create(t.compositeFilter.filters.map(r=>hT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Qe(1026)}}(t.compositeFilter.op))}(n):Qe(30097,{filter:n})}function mV(n){return nV[n]}function gV(n){return rV[n]}function yV(n){return sV[n]}function Al(n){return{fieldPath:n.canonicalString()}}function Pl(n){return Rn.fromServerFormat(n.fieldPath)}function fT(n){return n instanceof dn?function(t){if(t.op==="=="){if(EE(t.value))return{unaryFilter:{field:Al(t.field),op:"IS_NAN"}};if(_E(t.value))return{unaryFilter:{field:Al(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(EE(t.value))return{unaryFilter:{field:Al(t.field),op:"IS_NOT_NAN"}};if(_E(t.value))return{unaryFilter:{field:Al(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Al(t.field),op:gV(t.op),value:t.value}}}(n):n instanceof fs?function(t){const r=t.getFilters().map(i=>fT(i));return r.length===1?r[0]:{compositeFilter:{op:yV(t.op),filters:r}}}(n):Qe(54877,{filter:n})}function vV(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,t,r,i,a=tt.min(),c=tt.min(),d=kn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=h}withSequenceNumber(e){return new uo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new uo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new uo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new uo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e){this.gt=e}}function wV(n){const e=fV({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ay(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(){this.Dn=new EV}addToCollectionParentIndex(e,t){return this.Dn.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(No.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(No.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class EV{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new vn(Rt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vn(Rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mT=41943040;class ur{static withCacheSize(e){return new ur(e,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ur.DEFAULT_COLLECTION_PERCENTILE=10,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ur.DEFAULT=new ur(mT,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ur.DISABLED=new ur(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new sc(0)}static ur(){return new sc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="LruGarbageCollector",gT=1048576;function FE([n,e],[t,r]){const i=ct(n,t);return i===0?ct(e,r):i}class bV{constructor(e){this.Tr=e,this.buffer=new vn(FE),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();FE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class SV{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ae(ME,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xc(t)?Ae(ME,"Ignoring IndexedDB error during garbage collection: ",t):await vc(t)}await this.Rr(3e5)})}}class NV{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return de.resolve(pp.ue);const r=new bV(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(LE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),LE):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,a,c,d,h,p;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,c=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,d=Date.now(),this.removeTargets(e,r,t))).next(y=>(a=y,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(p=Date.now(),Il()<=dt.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${i} in `+(d-c)+`ms
	Removed ${a} targets in `+(h-d)+`ms
	Removed ${y} documents in `+(p-h)+`ms
Total Duration: ${p-g}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:y})))}}function TV(n,e){return new NV(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(){this.changes=new Va(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Nu(r.mutation,i,br.empty(),zt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ht()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ht()){const i=da();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=fu();return a.forEach((d,h)=>{c=c.insert(d,h.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=da();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ht()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,i){let a=wi();const c=Su(),d=function(){return Su()}();return t.forEach((h,p)=>{const g=r.get(p.key);i.has(p.key)&&(g===void 0||g.mutation instanceof Do)?a=a.insert(p.key,p):g!==void 0?(c.set(p.key,g.mutation.getFieldMask()),Nu(g.mutation,p,g.mutation.getFieldMask(),zt.now())):c.set(p.key,br.empty())}),this.recalculateAndSaveOverlays(e,a).next(h=>(h.forEach((p,g)=>c.set(p,g)),t.forEach((p,g)=>{var y;return d.set(p,new IV(g,(y=c.get(p))!==null&&y!==void 0?y:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Su();let i=new Xt((c,d)=>c-d),a=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(h=>{const p=t.get(h);if(p===null)return;let g=r.get(h)||br.empty();g=d.applyToLocalView(p,g),r.set(h,g);const y=(i.get(d.batchId)||ht()).add(h);i=i.insert(d.batchId,y)})}).next(()=>{const c=[],d=i.getReverseIterator();for(;d.hasNext();){const h=d.getNext(),p=h.key,g=h.value,y=XN();g.forEach(v=>{if(!a.has(v)){const b=rT(t.get(v),r.get(v));b!==null&&y.set(v,b),a=a.add(v)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,y))}return de.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(c){return Ue.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):HN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):de.resolve(da());let d=Mu,h=a;return c.next(p=>de.forEach(p,(g,y)=>(d<y.largestBatchId&&(d=y.largestBatchId),a.get(g)?de.resolve():this.remoteDocumentCache.getEntry(e,g).next(v=>{h=h.insert(g,v)}))).next(()=>this.populateOverlays(e,p,a)).next(()=>this.computeViews(e,h,p,ht())).next(g=>({batchId:d,changes:YN(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ue(t)).next(r=>{let i=fu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let c=fu();return this.indexManager.getCollectionParents(e,a).next(d=>de.forEach(d,h=>{const p=function(y,v){return new Fa(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(t,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next(g=>{g.forEach((y,v)=>{c=c.insert(y,v)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i))).next(c=>{a.forEach((h,p)=>{const g=p.getKey();c.get(g)===null&&(c=c.insert(g,zn.newInvalidDocument(g)))});let d=fu();return c.forEach((h,p)=>{const g=a.get(h);g!==void 0&&Nu(g.mutation,p,br.empty(),zt.now()),vp(t,p)&&(d=d.insert(h,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return de.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Os(i.createTime)}}(t)),de.resolve()}getNamedQuery(e,t){return de.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:wV(i.bundledQuery),readTime:Os(i.readTime)}}(t)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(){this.overlays=new Xt(Ue.comparator),this.kr=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const r=da();return de.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.wt(e,t,a)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const i=da(),a=t.length+1,c=new Ue(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const h=d.getNext().value,p=h.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&h.largestBatchId>r&&i.set(h.getKey(),h)}return de.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Xt((p,g)=>p-g);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let g=a.get(p.largestBatchId);g===null&&(g=da(),a=a.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const d=da(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((p,g)=>d.set(p,g)),!(d.size()>=i)););return de.resolve(d)}wt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new XF(t,r));let a=this.kr.get(t);a===void 0&&(a=ht(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(){this.sessionToken=kn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(){this.qr=new vn(Sn.Qr),this.$r=new vn(Sn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Sn(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Sn(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){const t=new Ue(new Rt([])),r=new Sn(t,e),i=new Sn(t,e+1),a=[];return this.$r.forEachInRange([r,i],c=>{this.Wr(c),a.push(c.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ue(new Rt([])),r=new Sn(t,e),i=new Sn(t,e+1);let a=ht();return this.$r.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Sn(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Sn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ue.comparator(e.key,t.key)||ct(e.Hr,t.Hr)}static Ur(e,t){return ct(e.Hr,t.Hr)||Ue.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new vn(Sn.Qr)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new YF(a,t,r,i);this.mutationQueue.push(c);for(const d of i)this.Yr=this.Yr.add(new Sn(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return de.resolve(c)}lookupMutationBatch(e,t){return de.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Xr(r),a=i<0?0:i;return de.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?kv:this.er-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Sn(t,0),i=new Sn(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,i],c=>{const d=this.Zr(c.Hr);a.push(d)}),de.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(ct);return t.forEach(i=>{const a=new Sn(i,0),c=new Sn(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,c],d=>{r=r.add(d.Hr)})}),de.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ue.isDocumentKey(a)||(a=a.child(""));const c=new Sn(new Ue(a),0);let d=new vn(ct);return this.Yr.forEachWhile(h=>{const p=h.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(d=d.add(h.Hr)),!0)},c),de.resolve(this.ei(d))}ei(e){const t=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Et(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return de.forEach(t.mutations,i=>{const a=new Sn(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){const r=new Sn(t,0),i=this.Yr.firstAfterOrEqual(r);return de.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e){this.ni=e,this.docs=function(){return new Xt(Ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():zn.newInvalidDocument(t))}getEntries(e,t){let r=wi();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():zn.newInvalidDocument(i))}),de.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=wi();const c=t.path,d=new Ue(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(d);for(;h.hasNext();){const{key:p,value:{document:g}}=h.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||dF(uF(g),r)<=0||(i.has(g.key)||vp(t,g))&&(a=a.insert(g.key,g.mutableCopy()))}return de.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Qe(9500)}ri(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new DV(this)}getSize(e){return de.resolve(this.size)}}class DV extends CV{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e){this.persistence=e,this.ii=new Va(t=>Lv(t),Mv),this.lastRemoteSnapshotVersion=tt.min(),this.highestTargetId=0,this.si=0,this.oi=new qv,this.targetCount=0,this._i=sc.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),de.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new sc(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.hr(t),de.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.ii.forEach((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ii.delete(c),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),de.waitFor(a).next(()=>i)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),de.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,t){this.ai={},this.overlays={},this.ui=new pp(0),this.ci=!1,this.ci=!0,this.li=new RV,this.referenceDelegate=e(this),this.hi=new LV(this),this.indexManager=new _V,this.remoteDocumentCache=function(i){return new OV(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new xV(t),this.Ti=new AV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new kV(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){Ae("MemoryPersistence","Starting transaction:",e);const i=new MV(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ei(e,t){return de.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class MV extends fF{constructor(e){super(),this.currentSequenceNumber=e}}class Wv{constructor(e){this.persistence=e,this.Ai=new qv,this.Ri=null}static Vi(e){return new Wv(e)}get mi(){if(this.Ri)return this.Ri;throw Qe(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),de.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.mi,r=>{const i=Ue.fromPath(r);return this.fi(e,i).next(a=>{a||t.removeEntry(i,tt.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return de.or([()=>de.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Vf{constructor(e,t){this.persistence=e,this.gi=new Va(r=>gF(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=TV(this,t)}static Vi(e,t){return new Vf(e,t)}Ii(){}di(e){return de.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return de.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(a=>a?de.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ri(e,c=>this.Sr(e,c,t).next(d=>{d||(r++,a.removeEntry(c,tt.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),de.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),de.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),de.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=of(e.data.value)),t}Sr(e,t,r){return de.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.gi.get(t);return de.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=ht(),i=ht();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Hv(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return vD()?8:pF(qn())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ps(e,t).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.ys(e,t,i,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new FV;return this.ws(e,t,c).next(d=>{if(a.result=d,this.Rs)return this.Ss(e,t,c,d.size)})}).next(()=>a.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Il()<=dt.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",jl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),de.resolve()):(Il()<=dt.DEBUG&&Ae("QueryEngine","Query:",jl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Il()<=dt.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",jl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ks(t))):de.resolve())}ps(e,t){if(TE(t))return de.resolve(null);let r=ks(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Ay(t,null,"F"),r=ks(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=ht(...a);return this.gs.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(h=>{const p=this.bs(t,d);return this.Ds(t,p,c,h.readTime)?this.ps(e,Ay(t,null,"F")):this.vs(e,p,t,h)}))})))}ys(e,t,r,i){return TE(t)||i.isEqual(tt.min())?de.resolve(null):this.gs.getDocuments(e,r).next(a=>{const c=this.bs(t,a);return this.Ds(t,c,r,i)?de.resolve(null):(Il()<=dt.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),jl(t)),this.vs(e,c,t,cF(i,Mu)).next(d=>d))})}bs(e,t){let r=new vn(GN(e));return t.forEach((i,a)=>{vp(e,a)&&(r=r.add(a))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ws(e,t,r){return Il()<=dt.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",jl(t)),this.gs.getDocumentsMatchingQuery(e,t,No.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="LocalStore",UV=3e8;class zV{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Xt(ct),this.Ms=new Va(a=>Lv(a),Mv),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jV(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function $V(n,e,t,r){return new zV(n,e,t,r)}async function vT(n,e){const t=rt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],d=[];let h=ht();for(const p of i){c.push(p.batchId);for(const g of p.mutations)h=h.add(g.key)}for(const p of a){d.push(p.batchId);for(const g of p.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(r,h).next(p=>({Bs:p,removedBatchIds:c,addedBatchIds:d}))})})}function BV(n,e){const t=rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return function(d,h,p,g){const y=p.batch,v=y.keys();let b=de.resolve();return v.forEach(S=>{b=b.next(()=>g.getEntry(h,S)).next(_=>{const w=p.docVersions.get(S);Et(w!==null,48541),_.version.compareTo(w)<0&&(y.applyToRemoteDocument(_,p),_.isValidDocument()&&(_.setReadTime(p.commitVersion),g.addEntry(_)))})}),b.next(()=>d.mutationQueue.removeMutationBatch(h,y))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let h=ht();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(h=h.add(d.batch.mutations[p].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function xT(n){const e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function qV(n,e){const t=rt(n),r=e.snapshotVersion;let i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;const d=[];e.targetChanges.forEach((g,y)=>{const v=i.get(y);if(!v)return;d.push(t.hi.removeMatchingKeys(a,g.removedDocuments,y).next(()=>t.hi.addMatchingKeys(a,g.addedDocuments,y)));let b=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(y)!==null?b=b.withResumeToken(kn.EMPTY_BYTE_STRING,tt.min()).withLastLimboFreeSnapshotVersion(tt.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,r)),i=i.insert(y,b),function(_,w,P){return _.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=UV?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(v,b,g)&&d.push(t.hi.updateTargetData(a,b))});let h=wi(),p=ht();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,g))}),d.push(WV(a,c,e.documentUpdates).next(g=>{h=g.Ls,p=g.ks})),!r.isEqual(tt.min())){const g=t.hi.getLastRemoteSnapshotVersion(a).next(y=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(g)}return de.waitFor(d).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,h,p)).next(()=>h)}).then(a=>(t.Fs=i,a))}function WV(n,e,t){let r=ht(),i=ht();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=wi();return t.forEach((d,h)=>{const p=a.get(d);h.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(d)),h.isNoDocument()&&h.version.isEqual(tt.min())?(e.removeEntry(d,h.readTime),c=c.insert(d,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||h.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(h),c=c.insert(d,h)):Ae(Kv,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",h.version)}),{Ls:c,ks:i}})}function HV(n,e){const t=rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=kv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function KV(n,e){const t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(a=>a?(i=a,de.resolve(i)):t.hi.allocateTargetId(r).next(c=>(i=new uo(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function Dy(n,e,t){const r=rt(n),i=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i))}catch(c){if(!xc(c))throw c;Ae(Kv,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function VE(n,e,t){const r=rt(n);let i=tt.min(),a=ht();return r.persistence.runTransaction("Execute query","readwrite",c=>function(h,p,g){const y=rt(h),v=y.Ms.get(g);return v!==void 0?de.resolve(y.Fs.get(v)):y.hi.getTargetData(p,g)}(r,c,ks(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,d.targetId).next(h=>{a=h})}).next(()=>r.Cs.getDocumentsMatchingQuery(c,e,t?i:tt.min(),t?a:ht())).next(d=>(GV(r,DF(e),d),{documents:d,qs:a})))}function GV(n,e,t){let r=n.xs.get(e)||tt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.xs.set(e,r)}class UE{constructor(){this.activeTargetIds=zF()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QV{constructor(){this.Fo=new UE,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new UE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="ConnectivityMonitor";class $E{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ae(zE,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ae(zE,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qh=null;function Ly(){return qh===null?qh=function(){return 268435456+Math.round(2147483648*Math.random())}():qh++,"0x"+qh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="RestConnection",XV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JV{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===kf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,a){const c=Ly(),d=this.Go(e,t.toUriEncodedString());Ae(Ag,`Sending RPC '${e}' ${c}:`,d,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(h,i,a);const{host:p}=new URL(d),g=Da(p);return this.jo(e,d,h,r,g).then(y=>(Ae(Ag,`Received RPC '${e}' ${c}: `,y),y),y=>{throw Aa(Ag,`RPC '${e}' ${c} failed with error: `,y,"url: ",d,"request:",r),y})}Jo(e,t,r,i,a,c){return this.Wo(e,t,r,i,a)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Go(e,t){const r=XV[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn="WebChannelConnection";class e3 extends JV{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,a){const c=Ly();return new Promise((d,h)=>{const p=new EN;p.setWithCredentials(!0),p.listenOnce(bN.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case sf.NO_ERROR:const y=p.getResponseJson();Ae(Vn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),d(y);break;case sf.TIMEOUT:Ae(Vn,`RPC '${e}' ${c} timed out`),h(new Ce(le.DEADLINE_EXCEEDED,"Request time out"));break;case sf.HTTP_ERROR:const v=p.getStatus();if(Ae(Vn,`RPC '${e}' ${c} failed with status:`,v,"response text:",p.getResponseText()),v>0){let b=p.getResponseJson();Array.isArray(b)&&(b=b[0]);const S=b==null?void 0:b.error;if(S&&S.status&&S.message){const _=function(P){const I=P.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(I)>=0?I:le.UNKNOWN}(S.status);h(new Ce(_,S.message))}else h(new Ce(le.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new Ce(le.UNAVAILABLE,"Connection failed."));break;default:Qe(9055,{c_:e,streamId:c,l_:p.getLastErrorCode(),h_:p.getLastError()})}}finally{Ae(Vn,`RPC '${e}' ${c} completed.`)}});const g=JSON.stringify(i);Ae(Vn,`RPC '${e}' ${c} sending request:`,i),p.send(t,"POST",g,r,15)})}P_(e,t,r){const i=Ly(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=TN(),d=NN(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(h.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(h.useFetchStreams=!0),this.zo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const g=a.join("");Ae(Vn,`Creating RPC '${e}' stream ${i}: ${g}`,h);const y=c.createWebChannel(g,h);this.T_(y);let v=!1,b=!1;const S=new ZV({Ho:w=>{b?Ae(Vn,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(v||(Ae(Vn,`Opening RPC '${e}' stream ${i} transport.`),y.open(),v=!0),Ae(Vn,`RPC '${e}' stream ${i} sending:`,w),y.send(w))},Yo:()=>y.close()}),_=(w,P,I)=>{w.listen(P,C=>{try{I(C)}catch(M){setTimeout(()=>{throw M},0)}})};return _(y,hu.EventType.OPEN,()=>{b||(Ae(Vn,`RPC '${e}' stream ${i} transport opened.`),S.s_())}),_(y,hu.EventType.CLOSE,()=>{b||(b=!0,Ae(Vn,`RPC '${e}' stream ${i} transport closed`),S.__(),this.I_(y))}),_(y,hu.EventType.ERROR,w=>{b||(b=!0,Aa(Vn,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),S.__(new Ce(le.UNAVAILABLE,"The operation could not be completed")))}),_(y,hu.EventType.MESSAGE,w=>{var P;if(!b){const I=w.data[0];Et(!!I,16349);const C=I,M=(C==null?void 0:C.error)||((P=C[0])===null||P===void 0?void 0:P.error);if(M){Ae(Vn,`RPC '${e}' stream ${i} received error:`,M);const z=M.status;let B=function(D){const O=un[D];if(O!==void 0)return iT(O)}(z),A=M.message;B===void 0&&(B=le.INTERNAL,A="Unknown error status: "+z+" with message "+M.message),b=!0,S.__(new Ce(B,A)),y.close()}else Ae(Vn,`RPC '${e}' stream ${i} received:`,I),S.a_(I)}}),_(d,SN.STAT_EVENT,w=>{w.stat===Ey.PROXY?Ae(Vn,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===Ey.NOPROXY&&Ae(Vn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Pg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(n){return new iV(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&Ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="PersistentStream";class _T{constructor(e,t,r,i,a,c,d,h){this.Fi=e,this.w_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=h,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new wT(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(xi(t.toString()),xi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{const i=new Ce(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Ae(BE,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(Ae(BE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class t3 extends _T{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=lV(this.serializer,e),r=function(a){if(!("targetChange"in a))return tt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?tt.min():c.readTime?Os(c.readTime):tt.min()}(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=Oy(this.serializer),t.addTarget=function(a,c){let d;const h=c.target;if(d=Iy(h)?{documents:dV(a,h)}:{query:hV(a,h).Vt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=lT(a,c.resumeToken);const p=Py(a,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(tt.min())>0){d.readTime=Ff(a,c.snapshotVersion.toTimestamp());const p=Py(a,c.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,e);const r=pV(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=Oy(this.serializer),t.removeTarget=e,this.k_(t)}}class n3 extends _T{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=uV(e.writeResults,e.commitTime),r=Os(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=Oy(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>cV(this.serializer,r))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{}class s3 extends r3{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Ce(le.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Wo(e,Ry(t,r),i,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ce(le.UNKNOWN,a.toString())})}Jo(e,t,r,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Jo(e,Ry(t,r),i,c,d,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ce(le.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class i3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(xi(t),this._a=!1):Ae("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa="RemoteStore";class o3{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(c=>{r.enqueueAndForget(async()=>{Ua(this)&&(Ae(Pa,"Restarting streams for network reachability change."),await async function(h){const p=rt(h);p.Ia.add(4),await dd(p),p.Aa.set("Unknown"),p.Ia.delete(4),await bp(p)}(this))})}),this.Aa=new i3(r,i)}}async function bp(n){if(Ua(n))for(const e of n.da)await e(!0)}async function dd(n){for(const e of n.da)await e(!1)}function ET(n,e){const t=rt(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Xv(t)?Yv(t):wc(t).x_()&&Qv(t,e))}function Gv(n,e){const t=rt(n),r=wc(t);t.Ta.delete(e),r.x_()&&bT(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ua(t)&&t.Aa.set("Unknown"))}function Qv(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(tt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wc(n).H_(e)}function bT(n,e){n.Ra.$e(e),wc(n).Y_(e)}function Yv(n){n.Ra=new tV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),wc(n).start(),n.Aa.aa()}function Xv(n){return Ua(n)&&!wc(n).M_()&&n.Ta.size>0}function Ua(n){return rt(n).Ia.size===0}function ST(n){n.Ra=void 0}async function a3(n){n.Aa.set("Online")}async function l3(n){n.Ta.forEach((e,t)=>{Qv(n,e)})}async function c3(n,e){ST(n),Xv(n)?(n.Aa.la(e),Yv(n)):n.Aa.set("Unknown")}async function u3(n,e,t){if(n.Aa.set("Online"),e instanceof aT&&e.state===2&&e.cause)try{await async function(i,a){const c=a.cause;for(const d of a.targetIds)i.Ta.has(d)&&(await i.remoteSyncer.rejectListen(d,c),i.Ta.delete(d),i.Ra.removeTarget(d))}(n,e)}catch(r){Ae(Pa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Uf(n,r)}else if(e instanceof cf?n.Ra.Ye(e):e instanceof oT?n.Ra.it(e):n.Ra.et(e),!t.isEqual(tt.min()))try{const r=await xT(n.localStore);t.compareTo(r)>=0&&await function(a,c){const d=a.Ra.Pt(c);return d.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const g=a.Ta.get(p);g&&a.Ta.set(p,g.withResumeToken(h.resumeToken,c))}}),d.targetMismatches.forEach((h,p)=>{const g=a.Ta.get(h);if(!g)return;a.Ta.set(h,g.withResumeToken(kn.EMPTY_BYTE_STRING,g.snapshotVersion)),bT(a,h);const y=new uo(g.target,h,p,g.sequenceNumber);Qv(a,y)}),a.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(r){Ae(Pa,"Failed to raise snapshot:",r),await Uf(n,r)}}async function Uf(n,e,t){if(!xc(e))throw e;n.Ia.add(1),await dd(n),n.Aa.set("Offline"),t||(t=()=>xT(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Ae(Pa,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await bp(n)})}function NT(n,e){return e().catch(t=>Uf(n,t,e))}async function Sp(n){const e=rt(n),t=jo(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:kv;for(;d3(e);)try{const i=await HV(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,h3(e,i)}catch(i){await Uf(e,i)}TT(e)&&CT(e)}function d3(n){return Ua(n)&&n.Pa.length<10}function h3(n,e){n.Pa.push(e);const t=jo(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function TT(n){return Ua(n)&&!jo(n).M_()&&n.Pa.length>0}function CT(n){jo(n).start()}async function f3(n){jo(n).na()}async function p3(n){const e=jo(n);for(const t of n.Pa)e.X_(t.mutations)}async function m3(n,e,t){const r=n.Pa.shift(),i=zv.from(r,e,t);await NT(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Sp(n)}async function g3(n,e){e&&jo(n).Z_&&await async function(r,i){if(function(c){return ZF(c)&&c!==le.ABORTED}(i.code)){const a=r.Pa.shift();jo(r).N_(),await NT(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Sp(r)}}(n,e),TT(n)&&CT(n)}async function qE(n,e){const t=rt(n);t.asyncQueue.verifyOperationInProgress(),Ae(Pa,"RemoteStore received new credentials");const r=Ua(t);t.Ia.add(3),await dd(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await bp(t)}async function y3(n,e){const t=rt(n);e?(t.Ia.delete(2),await bp(t)):e||(t.Ia.add(2),await dd(t),t.Aa.set("Unknown"))}function wc(n){return n.Va||(n.Va=function(t,r,i){const a=rt(t);return a.ia(),new t3(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Zo:a3.bind(null,n),e_:l3.bind(null,n),n_:c3.bind(null,n),J_:u3.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),Xv(n)?Yv(n):n.Aa.set("Unknown")):(await n.Va.stop(),ST(n))})),n.Va}function jo(n){return n.ma||(n.ma=function(t,r,i){const a=rt(t);return a.ia(),new n3(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:f3.bind(null,n),n_:g3.bind(null,n),ea:p3.bind(null,n),ta:m3.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Sp(n)):(await n.ma.stop(),n.Pa.length>0&&(Ae(Pa,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new yo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,d=new Jv(e,t,c,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ce(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zv(n,e){if(xi("AsyncQueue",`${e}: ${n}`),xc(n))return new Ce(le.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{static emptySet(e){return new Fl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ue.comparator(t.key,r.key):(t,r)=>Ue.comparator(t.key,r.key),this.keyedMap=fu(),this.sortedSet=new Xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Fl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(){this.fa=new Xt(Ue.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Qe(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class ic{constructor(e,t,r,i,a,c,d,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new ic(e,t,Fl.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class x3{constructor(){this.queries=HE(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const i=rt(t),a=i.queries;i.queries=HE(),a.forEach((c,d)=>{for(const h of d.wa)h.onError(r)})})(this,new Ce(le.ABORTED,"Firestore shutting down"))}}function HE(){return new Va(n=>KN(n),yp)}async function IT(n,e){const t=rt(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.Sa()&&e.ba()&&(r=2):(a=new v3,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(i,!0);break;case 1:a.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(c){const d=Zv(c,`Initialization of query '${jl(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&ex(t)}async function jT(n,e){const t=rt(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const c=a.wa.indexOf(e);c>=0&&(a.wa.splice(c,1),a.wa.length===0?i=e.ba()?0:1:!a.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function w3(n,e){const t=rt(n);let r=!1;for(const i of e){const a=i.query,c=t.queries.get(a);if(c){for(const d of c.wa)d.Ca(i)&&(r=!0);c.ya=i}}r&&ex(t)}function _3(n,e,t){const r=rt(n),i=r.queries.get(e);if(i)for(const a of i.wa)a.onError(t);r.queries.delete(e)}function ex(n){n.Da.forEach(e=>{e.next()})}var My,KE;(KE=My||(My={})).Fa="default",KE.Cache="cache";class AT{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ic(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ic.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==My.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.key=e}}class RT{constructor(e){this.key=e}}class E3{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ht(),this.mutatedKeys=ht(),this.Xa=GN(e),this.eu=new Fl(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new WE,i=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,d=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,y)=>{const v=i.get(g),b=vp(this.query,y)?y:null,S=!!v&&this.mutatedKeys.has(v.key),_=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let w=!1;v&&b?v.data.isEqual(b.data)?S!==_&&(r.track({type:3,doc:b}),w=!0):this.iu(v,b)||(r.track({type:2,doc:b}),w=!0,(h&&this.Xa(b,h)>0||p&&this.Xa(b,p)<0)&&(d=!0)):!v&&b?(r.track({type:0,doc:b}),w=!0):v&&!b&&(r.track({type:1,doc:v}),w=!0,(h||p)&&(d=!0)),w&&(b?(c=c.add(b),a=_?a.add(g):a.delete(g)):(c=c.delete(g),a=a.delete(g)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{eu:c,ru:r,Ds:d,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((g,y)=>function(b,S){const _=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe(20277,{At:w})}};return _(b)-_(S)}(g.type,y.type)||this.Xa(g.doc,y.doc)),this.su(r),i=i!=null&&i;const d=t&&!i?this.ou():[],h=this.Za.size===0&&this.current&&!i?1:0,p=h!==this.Ya;return this.Ya=h,c.length!==0||p?{snapshot:new ic(this.query,e.eu,a,c,e.mutatedKeys,h===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new WE,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ht(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new RT(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new PT(r))}),t}uu(e){this.Ha=e.qs,this.Za=ht();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ic.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const tx="SyncEngine";class b3{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class S3{constructor(e){this.key=e,this.lu=!1}}class N3{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Va(d=>KN(d),yp),this.Tu=new Map,this.Iu=new Set,this.du=new Xt(Ue.comparator),this.Eu=new Map,this.Au=new qv,this.Ru={},this.Vu=new Map,this.mu=sc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function T3(n,e,t=!0){const r=FT(n);let i;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await kT(r,e,t,!0),i}async function C3(n,e){const t=FT(n);await kT(t,e,!0,!1)}async function kT(n,e,t,r){const i=await KV(n.localStore,ks(e)),a=i.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await I3(n,e,a,c==="current",i.resumeToken)),n.isPrimaryClient&&t&&ET(n.remoteStore,i),d}async function I3(n,e,t,r,i){n.gu=(y,v,b)=>async function(_,w,P,I){let C=w.view.nu(P);C.Ds&&(C=await VE(_.localStore,w.query,!1).then(({documents:A})=>w.view.nu(A,C)));const M=I&&I.targetChanges.get(w.targetId),z=I&&I.targetMismatches.get(w.targetId)!=null,B=w.view.applyChanges(C,_.isPrimaryClient,M,z);return QE(_,w.targetId,B._u),B.snapshot}(n,y,v,b);const a=await VE(n.localStore,e,!0),c=new E3(e,a.qs),d=c.nu(a.documents),h=ud.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),p=c.applyChanges(d,n.isPrimaryClient,h);QE(n,t,p._u);const g=new b3(e,t,c);return n.Pu.set(e,g),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),p.snapshot}async function j3(n,e,t){const r=rt(n),i=r.Pu.get(e),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter(c=>!yp(c,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Dy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Gv(r.remoteStore,i.targetId),Fy(r,i.targetId)}).catch(vc)):(Fy(r,i.targetId),await Dy(r.localStore,i.targetId,!0))}async function A3(n,e){const t=rt(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Gv(t.remoteStore,r.targetId))}async function P3(n,e,t){const r=F3(n);try{const i=await function(c,d){const h=rt(c),p=zt.now(),g=d.reduce((b,S)=>b.add(S.key),ht());let y,v;return h.persistence.runTransaction("Locally write mutations","readwrite",b=>{let S=wi(),_=ht();return h.Os.getEntries(b,g).next(w=>{S=w,S.forEach((P,I)=>{I.isValidDocument()||(_=_.add(P))})}).next(()=>h.localDocuments.getOverlayedDocuments(b,S)).next(w=>{y=w;const P=[];for(const I of d){const C=GF(I,y.get(I.key).overlayedDocument);C!=null&&P.push(new Do(I.key,C,VN(C.value.mapValue),cs.exists(!0)))}return h.mutationQueue.addMutationBatch(b,p,P,d)}).next(w=>{v=w;const P=w.applyToLocalDocumentSet(y,_);return h.documentOverlayCache.saveOverlays(b,w.batchId,P)})}).then(()=>({batchId:v.batchId,changes:YN(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(c,d,h){let p=c.Ru[c.currentUser.toKey()];p||(p=new Xt(ct)),p=p.insert(d,h),c.Ru[c.currentUser.toKey()]=p}(r,i.batchId,t),await hd(r,i.changes),await Sp(r.remoteStore)}catch(i){const a=Zv(i,"Failed to persist write");t.reject(a)}}async function OT(n,e){const t=rt(n);try{const r=await qV(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.Eu.get(a);c&&(Et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.lu=!0:i.modifiedDocuments.size>0?Et(c.lu,14607):i.removedDocuments.size>0&&(Et(c.lu,42227),c.lu=!1))}),await hd(t,r,e)}catch(r){await vc(r)}}function GE(n,e,t){const r=rt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Pu.forEach((a,c)=>{const d=c.view.va(e);d.snapshot&&i.push(d.snapshot)}),function(c,d){const h=rt(c);h.onlineState=d;let p=!1;h.queries.forEach((g,y)=>{for(const v of y.wa)v.va(d)&&(p=!0)}),p&&ex(h)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function R3(n,e,t){const r=rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Eu.get(e),a=i&&i.key;if(a){let c=new Xt(Ue.comparator);c=c.insert(a,zn.newNoDocument(a,tt.min()));const d=ht().add(a),h=new _p(tt.min(),new Map,new Xt(ct),c,d);await OT(r,h),r.du=r.du.remove(a),r.Eu.delete(e),nx(r)}else await Dy(r.localStore,e,!1).then(()=>Fy(r,e,t)).catch(vc)}async function k3(n,e){const t=rt(n),r=e.batch.batchId;try{const i=await BV(t.localStore,e);LT(t,r,null),DT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await hd(t,i)}catch(i){await vc(i)}}async function O3(n,e,t){const r=rt(n);try{const i=await function(c,d){const h=rt(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let g;return h.mutationQueue.lookupMutationBatch(p,d).next(y=>(Et(y!==null,37113),g=y.keys(),h.mutationQueue.removeMutationBatch(p,y))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,g,d)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g)).next(()=>h.localDocuments.getDocuments(p,g))})}(r.localStore,e);LT(r,e,t),DT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await hd(r,i)}catch(i){await vc(i)}}function DT(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function LT(n,e,t){const r=rt(n);let i=r.Ru[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Fy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||MT(n,r)})}function MT(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Gv(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),nx(n))}function QE(n,e,t){for(const r of t)r instanceof PT?(n.Au.addReference(r.key,e),D3(n,r)):r instanceof RT?(Ae(tx,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||MT(n,r.key)):Qe(19791,{yu:r})}function D3(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(Ae(tx,"New document in limbo: "+t),n.Iu.add(r),nx(n))}function nx(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Ue(Rt.fromString(e)),r=n.mu.next();n.Eu.set(r,new S3(t)),n.du=n.du.insert(t,r),ET(n.remoteStore,new uo(ks(Fv(t.path)),r,"TargetPurposeLimboResolution",pp.ue))}}async function hd(n,e,t){const r=rt(n),i=[],a=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach((d,h)=>{c.push(r.gu(h,e,t).then(p=>{var g;if((p||t)&&r.isPrimaryClient){const y=p?!p.fromCache:(g=t==null?void 0:t.targetChanges.get(h.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(p){i.push(p);const y=Hv.Es(h.targetId,p);a.push(y)}}))}),await Promise.all(c),r.hu.J_(i),await async function(h,p){const g=rt(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>de.forEach(p,v=>de.forEach(v.Is,b=>g.persistence.referenceDelegate.addReference(y,v.targetId,b)).next(()=>de.forEach(v.ds,b=>g.persistence.referenceDelegate.removeReference(y,v.targetId,b)))))}catch(y){if(!xc(y))throw y;Ae(Kv,"Failed to update sequence numbers: "+y)}for(const y of p){const v=y.targetId;if(!y.fromCache){const b=g.Fs.get(v),S=b.snapshotVersion,_=b.withLastLimboFreeSnapshotVersion(S);g.Fs=g.Fs.insert(v,_)}}}(r.localStore,a))}async function L3(n,e){const t=rt(n);if(!t.currentUser.isEqual(e)){Ae(tx,"User change. New user:",e.toKey());const r=await vT(t.localStore,e);t.currentUser=e,function(a,c){a.Vu.forEach(d=>{d.forEach(h=>{h.reject(new Ce(le.CANCELLED,c))})}),a.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await hd(t,r.Bs)}}function M3(n,e){const t=rt(n),r=t.Eu.get(e);if(r&&r.lu)return ht().add(r.key);{let i=ht();const a=t.Tu.get(e);if(!a)return i;for(const c of a){const d=t.Pu.get(c);i=i.unionWith(d.view.tu)}return i}}function FT(n){const e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=OT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=M3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R3.bind(null,e),e.hu.J_=w3.bind(null,e.eventManager),e.hu.pu=_3.bind(null,e.eventManager),e}function F3(n){const e=rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=k3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=O3.bind(null,e),e}class zf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ep(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return $V(this.persistence,new VV,e.initialUser,this.serializer)}Du(e){return new yT(Wv.Vi,this.serializer)}bu(e){return new QV}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zf.provider={build:()=>new zf};class V3 extends zf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Et(this.persistence.referenceDelegate instanceof Vf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new SV(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?ur.withCacheSize(this.cacheSizeBytes):ur.DEFAULT;return new yT(r=>Vf.Vi(r,t),this.serializer)}}class Vy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>GE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=L3.bind(null,this.syncEngine),await y3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new x3}()}createDatastore(e){const t=Ep(e.databaseInfo.databaseId),r=function(a){return new e3(a)}(e.databaseInfo);return function(a,c,d,h){return new s3(a,c,d,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,a,c,d){return new o3(r,i,a,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>GE(this.syncEngine,t,0),function(){return $E.C()?new $E:new YV}())}createSyncEngine(e,t){return function(i,a,c,d,h,p,g){const y=new N3(i,a,c,d,h,p);return g&&(y.fu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=rt(i);Ae(Pa,"RemoteStore shutting down."),a.Ia.add(5),await dd(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Vy.provider={build:()=>new Vy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):xi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="FirestoreClient";class U3{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=cr.UNAUTHENTICATED,this.clientId=Pv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{Ae(Ao,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Ae(Ao,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Zv(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Rg(n,e){n.asyncQueue.verifyOperationInProgress(),Ae(Ao,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await vT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Aa("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{Ae("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Aa("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function YE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await z3(n);Ae(Ao,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>qE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>qE(e.remoteStore,i)),n._onlineComponents=e}async function z3(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ae(Ao,"Using user provided OfflineComponentProvider");try{await Rg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===le.FAILED_PRECONDITION||i.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Aa("Error using user provided cache. Falling back to memory cache: "+t),await Rg(n,new zf)}}else Ae(Ao,"Using default OfflineComponentProvider"),await Rg(n,new V3(void 0));return n._offlineComponents}async function UT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ae(Ao,"Using user provided OnlineComponentProvider"),await YE(n,n._uninitializedComponentsProvider._online)):(Ae(Ao,"Using default OnlineComponentProvider"),await YE(n,new Vy))),n._onlineComponents}function $3(n){return UT(n).then(e=>e.syncEngine)}async function Uy(n){const e=await UT(n),t=e.eventManager;return t.onListen=T3.bind(null,e.syncEngine),t.onUnlisten=j3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=C3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=A3.bind(null,e.syncEngine),t}function B3(n,e,t={}){const r=new yo;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,d,h,p){const g=new VT({next:v=>{g.Ou(),c.enqueueAndForget(()=>jT(a,y)),v.fromCache&&h.source==="server"?p.reject(new Ce(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(v)},error:v=>p.reject(v)}),y=new AT(d,g,{includeMetadataChanges:!0,ka:!0});return IT(a,y)}(await Uy(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3="firestore.googleapis.com",JE=!0;class ZE{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ce(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=q3,this.ssl=JE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:JE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gT)throw new Ce(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ce(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ce(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ce(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Np{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ce(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ce(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new eF;switch(r.type){case"firstParty":return new rF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ce(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=XE.get(t);r&&(Ae("ComponentProvider","Removing Datastore"),XE.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Si(this.firestore,e,this._query)}}class fn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fn(this.firestore,e,this._key)}toJSON(){return{type:fn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ld(t,fn._jsonSchema))return new fn(e,r||null,new Ue(Rt.fromString(t.referencePath)))}}fn._jsonSchemaVersion="firestore/documentReference/1.0",fn._jsonSchema={type:hn("string",fn._jsonSchemaVersion),referencePath:hn("string")};class vo extends Si{constructor(e,t,r){super(e,t,Fv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fn(this.firestore,null,new Ue(e))}withConverter(e){return new vo(this.firestore,e,this._path)}}function ot(n,e,...t){if(n=pn(n),Rv("collection","path",e),n instanceof Np){const r=Rt.fromString(e,...t);return hE(r),new vo(n,null,r)}{if(!(n instanceof fn||n instanceof vo))throw new Ce(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rt.fromString(e,...t));return hE(r),new vo(n.firestore,null,r)}}function wa(n,e){if(n=Rs(n,Np),Rv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ce(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Si(n,null,function(r){return new Fa(Rt.emptyPath(),r)}(e))}function Pt(n,e,...t){if(n=pn(n),arguments.length===1&&(e=Pv.newId()),Rv("doc","path",e),n instanceof Np){const r=Rt.fromString(e,...t);return dE(r),new fn(n,null,new Ue(r))}{if(!(n instanceof fn||n instanceof vo))throw new Ce(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rt.fromString(e,...t));return dE(r),new fn(n.firestore,n instanceof vo?n.converter:null,new Ue(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="AsyncQueue";class tb{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new wT(this,"async_queue_retry"),this.oc=()=>{const r=Pg();r&&Ae(eb,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=Pg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Pg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new yo;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!xc(e))throw e;Ae(eb,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,xi("INTERNAL UNHANDLED ERROR: ",nb(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const i=Jv.createAndSchedule(this,e,t,r,a=>this.lc(a));return this.ec.push(i),i}ac(){this.tc&&Qe(47125,{hc:nb(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function nb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(n,["next","error","complete"])}class Ra extends Np{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new tb,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tb(e),this._firestoreClient=void 0,await e}}}function W3(n,e,t){t||(t=kf);const r=lp(n,"firestore");if(r.isInitialized(t)){const i=r.getImmediate({identifier:t}),a=r.getOptions(t);if(Ta(a,e))return i;throw new Ce(le.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Ce(le.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gT)throw new Ce(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Da(e.host)&&xv(e.host),r.initialize({options:e,instanceIdentifier:t})}function rx(n){if(n._terminated)throw new Ce(le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||H3(n),n._firestoreClient}function H3(n){var e,t,r;const i=n._freezeSettings(),a=function(d,h,p,g){return new xF(d,h,p,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,zT(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new U3(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(d){const h=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(h),_online:h}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vr(kn.fromBase64String(e))}catch(t){throw new Ce(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vr(kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ld(e,Vr._jsonSchema))return Vr.fromBase64String(e.bytes)}}Vr._jsonSchemaVersion="firestore/bytes/1.0",Vr._jsonSchema={type:hn("string",Vr._jsonSchemaVersion),bytes:hn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ce(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function K3(){return new fd(Sy)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ce(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ce(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ct(this._lat,e._lat)||ct(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ds._jsonSchemaVersion}}static fromJSON(e){if(ld(e,Ds._jsonSchema))return new Ds(e.latitude,e.longitude)}}Ds._jsonSchemaVersion="firestore/geoPoint/1.0",Ds._jsonSchema={type:hn("string",Ds._jsonSchemaVersion),latitude:hn("number"),longitude:hn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ls._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ld(e,Ls._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Ls(e.vectorValues);throw new Ce(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ls._jsonSchemaVersion="firestore/vectorValue/1.0",Ls._jsonSchema={type:hn("string",Ls._jsonSchemaVersion),vectorValues:hn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3=/^__.*__$/;class Q3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Do(e,this.data,this.fieldMask,t,this.fieldTransforms):new cd(e,this.data,t,this.fieldTransforms)}}class $T{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Do(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function BT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe(40011,{Ec:n})}}class ix{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new ix(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return $f(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(BT(this.Ec)&&G3.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Y3{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ep(e)}Dc(e,t,r,i=!1){return new ix({Ec:e,methodName:t,bc:r,path:Rn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ox(n){const e=n._freezeSettings(),t=Ep(n._databaseId);return new Y3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function X3(n,e,t,r,i,a={}){const c=n.Dc(a.merge||a.mergeFields?2:0,e,t,i);ax("Data must be an object, but it was:",c,r);const d=qT(r,c);let h,p;if(a.merge)h=new br(c.fieldMask),p=c.fieldTransforms;else if(a.mergeFields){const g=[];for(const y of a.mergeFields){const v=zy(e,y,t);if(!c.contains(v))throw new Ce(le.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);HT(g,v)||g.push(v)}h=new br(g),p=c.fieldTransforms.filter(y=>h.covers(y.field))}else h=null,p=c.fieldTransforms;return new Q3(new dr(d),h,p)}class Tp extends sx{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tp}}function J3(n,e,t,r){const i=n.Dc(1,e,t);ax("Data must be an object, but it was:",i,r);const a=[],c=dr.empty();Oo(r,(h,p)=>{const g=lx(e,h,t);p=pn(p);const y=i.gc(g);if(p instanceof Tp)a.push(g);else{const v=pd(p,y);v!=null&&(a.push(g),c.set(g,v))}});const d=new br(a);return new $T(c,d,i.fieldTransforms)}function Z3(n,e,t,r,i,a){const c=n.Dc(1,e,t),d=[zy(e,r,t)],h=[i];if(a.length%2!=0)throw new Ce(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)d.push(zy(e,a[v])),h.push(a[v+1]);const p=[],g=dr.empty();for(let v=d.length-1;v>=0;--v)if(!HT(p,d[v])){const b=d[v];let S=h[v];S=pn(S);const _=c.gc(b);if(S instanceof Tp)p.push(b);else{const w=pd(S,_);w!=null&&(p.push(b),g.set(b,w))}}const y=new br(p);return new $T(g,y,c.fieldTransforms)}function eU(n,e,t,r=!1){return pd(t,n.Dc(r?4:3,e))}function pd(n,e){if(WT(n=pn(n)))return ax("Unsupported field value:",e,n),qT(n,e);if(n instanceof sx)return function(r,i){if(!BT(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const a=[];let c=0;for(const d of r){let h=pd(d,i.yc(c));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),c++}return{arrayValue:{values:a}}}(n,e)}return function(r,i){if((r=pn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $F(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=zt.fromDate(r);return{timestampValue:Ff(i.serializer,a)}}if(r instanceof zt){const a=new zt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ff(i.serializer,a)}}if(r instanceof Ds)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vr)return{bytesValue:lT(i.serializer,r._byteString)};if(r instanceof fn){const a=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw i.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Bv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ls)return function(c,d){return{mapValue:{fields:{[MN]:{stringValue:FN},[Of]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.wc("VectorValues must only contain numeric values.");return Vv(d.serializer,p)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${fp(r)}`)}(n,e)}function qT(n,e){const t={};return PN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oo(n,(r,i)=>{const a=pd(i,e.Vc(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function WT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof zt||n instanceof Ds||n instanceof Vr||n instanceof fn||n instanceof sx||n instanceof Ls)}function ax(n,e,t){if(!WT(t)||!jN(t)){const r=fp(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function zy(n,e,t){if((e=pn(e))instanceof fd)return e._internalPath;if(typeof e=="string")return lx(n,e);throw $f("Field path arguments must be of type string or ",n,!1,void 0,t)}const tU=new RegExp("[~\\*/\\[\\]]");function lx(n,e,t){if(e.search(tU)>=0)throw $f(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fd(...e.split("."))._internalPath}catch{throw $f(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $f(n,e,t,r,i){const a=r&&!r.isEmpty(),c=i!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let h="";return(a||c)&&(h+=" (found",a&&(h+=` in field ${r}`),c&&(h+=` in document ${i}`),h+=")"),new Ce(le.INVALID_ARGUMENT,d+n+h)}function HT(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Cp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class nU extends KT{data(){return super.data()}}function Cp(n,e){return typeof e=="string"?lx(n,e):e instanceof fd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ce(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cx{}class QT extends cx{}function Nr(n,e,...t){let r=[];e instanceof cx&&r.push(e),r=r.concat(t),function(a){const c=a.filter(h=>h instanceof ux).length,d=a.filter(h=>h instanceof Ip).length;if(c>1||c>0&&d>0)throw new Ce(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Ip extends QT{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ip(e,t,r)}_apply(e){const t=this._parse(e);return YT(e._query,t),new Si(e.firestore,e.converter,jy(e._query,t))}_parse(e){const t=ox(e.firestore);return function(a,c,d,h,p,g,y){let v;if(p.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new Ce(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){ib(y,g);const S=[];for(const _ of y)S.push(sb(h,a,_));v={arrayValue:{values:S}}}else v=sb(h,a,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||ib(y,g),v=eU(d,c,y,g==="in"||g==="not-in");return dn.create(p,g,v)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function rU(n,e,t){const r=e,i=Cp("where",n);return Ip._create(i,r,t)}class ux extends cx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ux(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:fs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,a){let c=i;const d=a.getFlattenedFilters();for(const h of d)YT(c,h),c=jy(c,h)}(e._query,t),new Si(e.firestore,e.converter,jy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dx extends QT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new dx(e,t)}_apply(e){const t=function(i,a,c){if(i.startAt!==null)throw new Ce(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ce(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zu(a,c)}(e._query,this._field,this._direction);return new Si(e.firestore,e.converter,function(i,a){const c=i.explicitOrderBy.concat([a]);return new Fa(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function md(n,e="asc"){const t=e,r=Cp("orderBy",n);return dx._create(r,t)}function sb(n,e,t){if(typeof(t=pn(t))=="string"){if(t==="")throw new Ce(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HN(e)&&t.indexOf("/")!==-1)throw new Ce(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Rt.fromString(t));if(!Ue.isDocumentKey(r))throw new Ce(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wE(n,new Ue(r))}if(t instanceof fn)return wE(n,t._key);throw new Ce(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fp(t)}.`)}function ib(n,e){if(!Array.isArray(n)||n.length===0)throw new Ce(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YT(n,e){const t=function(i,a){for(const c of i)for(const d of c.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Ce(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ce(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class sU{convertValue(e,t="none"){switch(Io(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Co(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Qe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Oo(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,i;const a=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Of].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(c=>sn(c.doubleValue));return new Ls(a)}convertGeoPoint(e){return new Ds(sn(e.latitude),sn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=gp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Fu(e));default:return null}}convertTimestamp(e){const t=To(e);return new zt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Rt.fromString(e);Et(pT(r),9688,{name:e});const i=new Vu(r.get(1),r.get(3)),a=new Ue(r.popFirst(5));return i.isEqual(t)||xi(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class mu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _a extends KT{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Cp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=_a._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}_a._jsonSchemaVersion="firestore/documentSnapshot/1.0",_a._jsonSchema={type:hn("string",_a._jsonSchemaVersion),bundleSource:hn("string","DocumentSnapshot"),bundleName:hn("string"),bundle:hn("string")};class uf extends _a{data(e={}){return super.data(e)}}class Ea{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new mu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new uf(this._firestore,this._userDataWriter,r.key,r,new mu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ce(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(d=>{const h=new uf(i._firestore,i._userDataWriter,d.doc.key,d.doc,new mu(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}})}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(d=>a||d.type!==3).map(d=>{const h=new uf(i._firestore,i._userDataWriter,d.doc.key,d.doc,new mu(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,g=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),g=c.indexOf(d.doc.key)),{type:oU(d.type),doc:h,oldIndex:p,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ea._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Pv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function oU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe(61501,{type:n})}}Ea._jsonSchemaVersion="firestore/querySnapshot/1.0",Ea._jsonSchema={type:hn("string",Ea._jsonSchemaVersion),bundleSource:hn("string","QuerySnapshot"),bundleName:hn("string"),bundle:hn("string")};class hx extends sU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fn(this.firestore,null,t)}}function Gt(n){n=Rs(n,Si);const e=Rs(n.firestore,Ra),t=rx(e),r=new hx(e);return GT(n._query),B3(t,n._query).then(i=>new Ea(e,r,n,i))}function Nn(n,e,t,...r){n=Rs(n,fn);const i=Rs(n.firestore,Ra),a=ox(i);let c;return c=typeof(e=pn(e))=="string"||e instanceof fd?Z3(a,"updateDoc",n._key,e,t,r):J3(a,"updateDoc",n._key,e),fx(i,[c.toMutation(n._key,cs.exists(!0))])}function Us(n){return fx(Rs(n.firestore,Ra),[new Uv(n._key,cs.none())])}function Pn(n,e){const t=Rs(n.firestore,Ra),r=Pt(n),i=iU(n.converter,e);return fx(t,[X3(ox(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,cs.exists(!1))]).then(()=>r)}function Lo(n,...e){var t,r,i;n=pn(n);let a={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||rb(e[c])||(a=e[c++]);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(rb(e[c])){const y=e[c];e[c]=(t=y.next)===null||t===void 0?void 0:t.bind(y),e[c+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[c+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let h,p,g;if(n instanceof fn)p=Rs(n.firestore,Ra),g=Fv(n._key.path),h={next:y=>{e[c]&&e[c](aU(p,n,y))},error:e[c+1],complete:e[c+2]};else{const y=Rs(n,Si);p=Rs(y.firestore,Ra),g=y._query;const v=new hx(p);h={next:b=>{e[c]&&e[c](new Ea(p,v,y,b))},error:e[c+1],complete:e[c+2]},GT(n._query)}return function(v,b,S,_){const w=new VT(_),P=new AT(b,w,S);return v.asyncQueue.enqueueAndForget(async()=>IT(await Uy(v),P)),()=>{w.Ou(),v.asyncQueue.enqueueAndForget(async()=>jT(await Uy(v),P))}}(rx(p),g,d,h)}function fx(n,e){return function(r,i){const a=new yo;return r.asyncQueue.enqueueAndForget(async()=>P3(await $3(r),i,a)),a.promise}(rx(n),e)}function aU(n,e,t){const r=t.docs.get(e._key),i=new hx(n);return new _a(n,i,e._key,r,new mu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){yc=i})(La),Ca(new So("firestore",(r,{instanceIdentifier:i,options:a})=>{const c=r.getProvider("app").getImmediate(),d=new Ra(new tF(r.getProvider("auth-internal")),new sF(c,r.getProvider("app-check-internal")),function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ce(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vu(p.options.projectId,g)}(c,i),c);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),js(aE,lE,e),js(aE,lE,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="firebasestorage.googleapis.com",lU="storageBucket",cU=2*60*1e3,uU=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends Ws{constructor(e,t,r=0){super(kg(e),`Firebase Storage: ${t} (${kg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return kg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zs;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zs||(zs={}));function kg(n){return"storage/"+n}function dU(){const n="An unknown error occurred, please check the error payload for server response.";return new Hs(zs.UNKNOWN,n)}function hU(){return new Hs(zs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fU(){return new Hs(zs.CANCELED,"User canceled the upload/download.")}function pU(n){return new Hs(zs.INVALID_URL,"Invalid URL '"+n+"'.")}function mU(n){return new Hs(zs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function ob(n){return new Hs(zs.INVALID_ARGUMENT,n)}function JT(){return new Hs(zs.APP_DELETED,"The Firebase app was deleted.")}function gU(n){return new Hs(zs.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ls.makeFromUrl(e,t)}catch{return new ls(e,"")}if(r.path==="")return r;throw mU(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+i+c,"i"),h={bucket:1,path:3};function p(M){M.path_=decodeURIComponent(M.path)}const g="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",b=new RegExp(`^https?://${y}/${g}/b/${i}/o${v}`,"i"),S={bucket:1,path:3},_=t===XT?"(?:storage.googleapis.com|storage.cloud.google.com)":t,w="([^?#]*)",P=new RegExp(`^https?://${_}/${i}/${w}`,"i"),C=[{regex:d,indices:h,postModify:a},{regex:b,indices:S,postModify:p},{regex:P,indices:{bucket:1,path:2},postModify:p}];for(let M=0;M<C.length;M++){const z=C[M],B=z.regex.exec(e);if(B){const A=B[z.indices.bucket];let R=B[z.indices.path];R||(R=""),r=new ls(A,R),z.postModify(r);break}}if(r==null)throw pU(e);return r}}class yU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vU(n,e,t){let r=1,i=null,a=null,c=!1,d=0;function h(){return d===2}let p=!1;function g(...w){p||(p=!0,e.apply(null,w))}function y(w){i=setTimeout(()=>{i=null,n(b,h())},w)}function v(){a&&clearTimeout(a)}function b(w,...P){if(p){v();return}if(w){v(),g.call(null,w,...P);return}if(h()||c){v(),g.call(null,w,...P);return}r<64&&(r*=2);let C;d===1?(d=2,C=0):C=(r+Math.random())*1e3,y(C)}let S=!1;function _(w){S||(S=!0,v(),!p&&(i!==null?(w||(d=2),clearTimeout(i),y(0)):w||(d=1)))}return y(0),a=setTimeout(()=>{c=!0,_(!0)},t),_}function xU(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(n){return n!==void 0}function ab(n,e,t,r){if(r<e)throw ob(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw ob(`Invalid value for '${n}'. Expected ${t} or less.`)}function _U(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Bf;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Bf||(Bf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EU(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e,t,r,i,a,c,d,h,p,g,y,v=!0,b=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=h,this.timeout_=p,this.progressCallback_=g,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,_)=>{this.resolve_=S,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Wh(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const c=d=>{const h=d.loaded,p=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,p)};this.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const d=a.getErrorCode()===Bf.NO_ERROR,h=a.getStatus();if(!d||EU(h,this.additionalRetryCodes_)&&this.retry){const g=a.getErrorCode()===Bf.ABORT;r(!1,new Wh(!1,null,g));return}const p=this.successCodes_.indexOf(h)!==-1;r(!0,new Wh(p,a))})},t=(r,i)=>{const a=this.resolve_,c=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(d,d.getResponse());wU(h)?a(h):a()}catch(h){c(h)}else if(d!==null){const h=dU();h.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,h)):c(h)}else if(i.canceled){const h=this.appDelete_?JT():fU();c(h)}else{const h=hU();c(h)}};this.canceled_?t(!1,new Wh(!1,null,!0)):this.backoffId_=vU(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&xU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Wh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function SU(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function NU(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function TU(n,e){e&&(n["X-Firebase-GMPID"]=e)}function CU(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function IU(n,e,t,r,i,a,c=!0,d=!1){const h=_U(n.urlParams),p=n.url+h,g=Object.assign({},n.headers);return TU(g,e),SU(g,t),NU(g,a),CU(g,r),new bU(p,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jU(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function AU(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t){this._service=e,t instanceof ls?this._location=t:this._location=ls.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new qf(e,t)}get root(){const e=new ls(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return AU(this._location.path)}get storage(){return this._service}get parent(){const e=jU(this._location.path);if(e===null)return null;const t=new ls(this._location.bucket,e);return new qf(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw gU(e)}}function lb(n,e){const t=e==null?void 0:e[lU];return t==null?null:ls.makeFromBucketSpec(t,n)}function PU(n,e,t,r={}){n.host=`${e}:${t}`;const i=Da(e);i&&(xv(`https://${n.host}/b`),DS("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:cD(a,n.app.options.projectId))}class RU{constructor(e,t,r,i,a,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=c,this._bucket=null,this._host=XT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=cU,this._maxUploadRetryTime=uU,this._requests=new Set,i!=null?this._bucket=ls.makeFromBucketSpec(i,this._host):this._bucket=lb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ls.makeFromBucketSpec(this._url,e):this._bucket=lb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ab("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ab("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Fr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qf(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new yU(JT());{const c=IU(e,this._appId,r,i,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const cb="@firebase/storage",ub="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="storage";function kU(n=VS(),e){n=pn(n);const r=lp(n,ZT).getImmediate({identifier:e}),i=aD("storage");return i&&OU(r,...i),r}function OU(n,e,t,r={}){PU(n,e,t,r)}function DU(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new RU(t,r,i,e,La)}function LU(){Ca(new So(ZT,DU,"PUBLIC").setMultipleInstances(!0)),js(cb,ub,""),js(cb,ub,"esm2017")}LU();const MU={apiKey:"AIzaSyDUR89i6kvh3bp51GCgBX0fTwh3bFt1Ksg",authDomain:"medjust-d26eb.firebaseapp.com",projectId:"medjust-d26eb",storageBucket:"medjust-d26eb.appspot.com",messagingSenderId:"631362355665",appId:"1:631362355665:web:4d7f8eadba1bca0969e0f0"},px=FS(MU),Og=QM(px),Be=W3(px,{experimentalForceLongPolling:!0,useFetchStreams:!1});kU(px);const eC=E.createContext(void 0);function mx(){const n=E.useContext(eC);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function FU({children:n}){const[e,t]=E.useState(null),[r,i]=E.useState(!0),[a,c]=E.useState(null),d=y=>new Promise(v=>setTimeout(v,y)),h=async(y,v)=>{if(typeof navigator<"u"&&!navigator.onLine){const w=new Error("No network connection (navigator offline)");throw console.error("Login pre-check failed:",w),c("No network connection - please connect to the internet"),w}const b=3;let S=0,_=null;for(;S<b;){S+=1;try{await O4(Og,y,v),c(null);return}catch(w){if(_=w,console.error(`Login attempt ${S} failed:`,w),!((w==null?void 0:w.code)==="auth/network-request-failed"||(w==null?void 0:w.message)&&w.message.toLowerCase().includes("fetch")))throw(w==null?void 0:w.code)==="auth/wrong-password"||(w==null?void 0:w.code)==="auth/user-not-found"?c("Invalid email or password"):c("Authentication error - see console for details"),w;if(c(`Network error (attempt ${S} of ${b}) - checking connection...`),S<b){const I=500*Math.pow(2,S-1);console.log(`Retrying login in ${I}ms...`),await d(I);continue}}}throw console.error("Login failed after retries:",_),c("Network error - unable to reach Firebase. Check your internet connection, disabling browser extensions (adblockers), or ensure your site domain is added to Firebase Authentication -> Authorized domains."),_},p=async()=>{try{await F4(Og),c(null)}catch(y){console.error("Logout error:",y),t(null)}};E.useEffect(()=>{const y=setTimeout(()=>{r&&(console.log("ðŸ”„ Auth taking too long - continuing without authentication"),i(!1))},5e3),v=M4(Og,b=>{clearTimeout(y),t(b),i(!1),c(null)},b=>{clearTimeout(y),console.error("Auth state change error:",b),c("Authentication error - working offline"),i(!1)});return()=>{clearTimeout(y),v()}},[]);const g={currentUser:e,login:h,logout:p,loading:r,authError:a};return l.jsx(eC.Provider,{value:g,children:!r&&n})}const VU=Yu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ne=E.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},a)=>{const c=r?Gl:"button";return l.jsx(c,{className:at(VU({variant:e,size:t,className:n})),ref:a,...i})});ne.displayName="Button";const ve=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:at("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));ve.displayName="Card";const qe=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:at("flex flex-col space-y-1.5 p-6",n),...e}));qe.displayName="CardHeader";const Ye=E.forwardRef(({className:n,...e},t)=>l.jsx("h3",{ref:t,className:at("text-2xl font-semibold leading-none tracking-tight",n),...e}));Ye.displayName="CardTitle";const Tt=E.forwardRef(({className:n,...e},t)=>l.jsx("p",{ref:t,className:at("text-sm text-muted-foreground",n),...e}));Tt.displayName="CardDescription";const xe=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:at("p-6 pt-0",n),...e}));xe.displayName="CardContent";const UU=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:at("flex items-center p-6 pt-0",n),...e}));UU.displayName="CardFooter";class zU extends Ee.Component{constructor(t){super(t);O0(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),window.location.replace(window.location.href)});this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("ErrorBoundary caught an error:",t,r),(t.message.includes("fetch")||t.message.includes("Firebase")||t.message.includes("Firestore"))&&console.log("ðŸ”„ Firebase error detected - this is a known connectivity issue"),this.setState({error:t,errorInfo:r})}render(){var t,r,i;if(this.state.hasError){const a=((t=this.state.error)==null?void 0:t.message.includes("fetch"))||((r=this.state.error)==null?void 0:r.message.includes("Firebase"))||((i=this.state.error)==null?void 0:i.message.includes("Firestore"));return l.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:l.jsxs(ve,{className:"max-w-md w-full",children:[l.jsx(qe,{children:l.jsxs(Ye,{className:"flex items-center gap-2 text-destructive",children:[l.jsx(bP,{className:"h-5 w-5"}),a?"Connection Error":"Application Error"]})}),l.jsxs(xe,{className:"space-y-4",children:[l.jsx("p",{className:"text-muted-foreground",children:a?"There's a connectivity issue with Firebase services. The app will work in offline mode.":"Something went wrong. Please try refreshing the page."}),!1,l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(ne,{onClick:this.handleRetry,className:"flex-1",children:[l.jsx(wP,{className:"h-4 w-4 mr-2"}),"Retry"]}),l.jsx(ne,{variant:"outline",onClick:()=>window.location.href="/admin/years",className:"flex-1",children:"Go to Years"})]})]})]})})}return this.props.children}}var gx="Avatar",[$U,Z9]=Ei(gx),[BU,tC]=$U(gx),nC=E.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[i,a]=E.useState("idle");return l.jsx(BU,{scope:t,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:l.jsx(et.span,{...r,ref:e})})});nC.displayName=gx;var rC="AvatarImage",sC=E.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:i=()=>{},...a}=n,c=tC(rC,t),d=qU(r),h=xn(p=>{i(p),c.onImageLoadingStatusChange(p)});return an(()=>{d!=="idle"&&h(d)},[d,h]),d==="loaded"?l.jsx(et.img,{...a,ref:e,src:r}):null});sC.displayName=rC;var iC="AvatarFallback",oC=E.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...i}=n,a=tC(iC,t),[c,d]=E.useState(r===void 0);return E.useEffect(()=>{if(r!==void 0){const h=window.setTimeout(()=>d(!0),r);return()=>window.clearTimeout(h)}},[r]),c&&a.imageLoadingStatus!=="loaded"?l.jsx(et.span,{...i,ref:e}):null});oC.displayName=iC;function qU(n){const[e,t]=E.useState("idle");return an(()=>{if(!n){t("error");return}let r=!0;const i=new window.Image,a=c=>()=>{r&&t(c)};return t("loading"),i.onload=a("loaded"),i.onerror=a("error"),i.src=n,()=>{r=!1}},[n]),e}var aC=nC,lC=sC,cC=oC;const oc=E.forwardRef(({className:n,...e},t)=>l.jsx(aC,{ref:t,className:at("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));oc.displayName=aC.displayName;const qu=E.forwardRef(({className:n,...e},t)=>l.jsx(lC,{ref:t,className:at("aspect-square h-full w-full",n),...e}));qu.displayName=lC.displayName;const ac=E.forwardRef(({className:n,...e},t)=>l.jsx(cC,{ref:t,className:at("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));ac.displayName=cC.displayName;const WU=[{icon:gP,label:"Dashboard",path:"/admin"},{icon:gf,label:"News",path:"/admin/news"},{icon:os,label:"Years",path:"/admin/years"},{icon:Yl,label:"Users",path:"/admin/users"},{icon:Yl,label:"Professors",path:"/admin/professors"},{icon:sv,label:"Store",path:"/admin/store"},{icon:Ms,label:"Orders",path:"/admin/orders"},{icon:pi,label:"Research",path:"/admin/research"},{icon:Tu,label:"Maps",path:"/admin/maps"},{icon:x1,label:"Settings",path:"/admin/settings"}];function HU({isOpen:n}){return l.jsx("div",{className:at("fixed left-0 top-16 h-[calc(100vh-4rem)] bg-card border-r transition-all duration-300 z-40",n?"w-64":"w-16"),children:l.jsx("nav",{className:"p-4 space-y-2",children:WU.map(e=>l.jsxs("div",{children:[l.jsxs(C_,{to:e.path,className:({isActive:t})=>at("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors","hover:bg-accent hover:text-accent-foreground",t&&"bg-primary text-primary-foreground hover:bg-primary/90",!n&&"justify-center"),children:[l.jsx(e.icon,{className:"h-5 w-5 flex-shrink-0"}),n&&l.jsx("span",{className:"font-medium",children:e.label})]}),e.children&&n&&l.jsx("div",{className:"ml-6 mt-2 space-y-1",children:e.children.map(t=>l.jsxs(C_,{to:t.path,className:({isActive:r})=>at("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors text-sm","hover:bg-accent hover:text-accent-foreground",r&&"bg-primary text-primary-foreground hover:bg-primary/90"),children:[l.jsx(t.icon,{className:"h-4 w-4 flex-shrink-0"}),l.jsx("span",{children:t.label})]},t.path))})]},e.path))})})}function KU(){var a;const[n,e]=E.useState(!0),{currentUser:t,logout:r}=mx(),i=async()=>{try{await r()}catch(c){console.error("Error logging out:",c)}};return l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-card shadow-sm",children:l.jsxs("div",{className:"flex h-16 items-center px-4",children:[l.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>e(!n),className:"mr-4",children:l.jsx(xP,{className:"h-5 w-5"})}),l.jsx("div",{className:"flex-1",children:l.jsx("h1",{className:"text-xl font-semibold text-primary",children:"MedJust Admin Dashboard"})}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(oc,{className:"h-8 w-8",children:l.jsx(ac,{children:l.jsx(lo,{className:"h-4 w-4"})})}),l.jsx("span",{className:"text-sm font-medium",children:((a=t==null?void 0:t.email)==null?void 0:a.split("@")[0])||"Admin"})]}),l.jsx(ne,{variant:"ghost",size:"icon",onClick:i,className:"text-muted-foreground hover:text-destructive",children:l.jsx(vP,{className:"h-4 w-4"})})]})]})}),l.jsxs("div",{className:"flex",children:[l.jsx(HU,{isOpen:n}),l.jsx("main",{className:`flex-1 transition-all duration-300 ${n?"ml-64":"ml-16"}`,children:l.jsx("div",{className:"p-6",children:l.jsx(LO,{})})})]})]})}const De=E.forwardRef(({className:n,type:e,...t},r)=>l.jsx("input",{type:e,className:at("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));De.displayName="Input";var GU="Label",uC=E.forwardRef((n,e)=>l.jsx(et.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));uC.displayName=GU;var dC=uC;const QU=Yu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Pe=E.forwardRef(({className:n,...e},t)=>l.jsx(dC,{ref:t,className:at(QU(),n),...e}));Pe.displayName=dC.displayName;const YU=Yu("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),hC=E.forwardRef(({className:n,variant:e,...t},r)=>l.jsx("div",{ref:r,role:"alert",className:at(YU({variant:e}),n),...t}));hC.displayName="Alert";const XU=E.forwardRef(({className:n,...e},t)=>l.jsx("h5",{ref:t,className:at("mb-1 font-medium leading-none tracking-tight",n),...e}));XU.displayName="AlertTitle";const fC=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:at("text-sm [&_p]:leading-relaxed",n),...e}));fC.displayName="AlertDescription";function JU(){const[n,e]=E.useState(""),[t,r]=E.useState(""),[i,a]=E.useState(""),[c,d]=E.useState(!1),{login:h,authError:p}=mx(),g=ed(),y=async v=>{if(v.preventDefault(),!n||!t){a("Please fill in all fields");return}try{if(typeof navigator<"u"&&!navigator.onLine){a("No network connection. Please connect to the internet and try again.");return}a(""),d(!0),await h(n,t),g("/admin")}catch(b){console.error("Login error:",b),p?a(p):(b==null?void 0:b.code)==="auth/network-request-failed"?a("Network error - check your connection and try again."):(b==null?void 0:b.code)==="auth/wrong-password"||(b==null?void 0:b.code)==="auth/user-not-found"?a("Invalid email or password."):a("Failed to log in. Please check your credentials.")}finally{d(!1)}};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-secondary/20 flex items-center justify-center p-4",children:l.jsxs(ve,{className:"w-full max-w-md shadow-xl",children:[l.jsxs(qe,{className:"space-y-1 text-center",children:[l.jsx("div",{className:"mx-auto w-12 h-12 bg-primary rounded-lg flex items-center justify-center mb-4",children:l.jsx(J0,{className:"h-6 w-6 text-primary-foreground"})}),l.jsx(Ye,{className:"text-2xl font-bold",children:"MedJust Admin"}),l.jsx(Tt,{children:"Sign in to access the admin dashboard"})]}),l.jsx(xe,{children:l.jsxs("form",{onSubmit:y,className:"space-y-4",children:[i&&l.jsx(hC,{variant:"destructive",children:l.jsx(fC,{children:i})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"email",children:"Email"}),l.jsxs("div",{className:"relative",children:[l.jsx(mf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(De,{id:"email",type:"email",placeholder:"MedAdmin@gmail.com",value:n,onChange:v=>e(v.target.value),className:"pl-10",required:!0})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"password",children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(J0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(De,{id:"password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:t,onChange:v=>r(v.target.value),className:"pl-10",required:!0})]})]}),l.jsx(ne,{type:"submit",className:"w-full",disabled:c,children:c?l.jsxs(l.Fragment,{children:[l.jsx(xo,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})})]})})}const ZU=Yu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function on({className:n,variant:e,...t}){return l.jsx("div",{className:at(ZU({variant:e}),n),...t})}const e6=[{id:"1",title:"Revolutionary Gene Therapy Shows Promise in Cancer Treatment",content:"Recent studies demonstrate significant progress in targeted gene therapy for various cancer types. This breakthrough research could change how we approach oncological treatments in the future.",authorName:"Dr. Sarah Johnson",authorId:"user1",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15"),tags:["oncology","gene-therapy","research"],isPinned:!0,viewsCount:1247,attachments:[],imageUrl:"https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=300&h=200&fit=crop"},{id:"2",title:"Medical Education Technology Trends for 2024",content:"Exploring the latest innovations in medical education platforms, including VR simulations, AI-powered learning, and interactive case studies that are transforming how medical students learn.",authorName:"Prof. Michael Chen",authorId:"user2",createdAt:new Date("2024-01-14"),updatedAt:new Date("2024-01-14"),tags:["education","technology","trends"],isPinned:!1,viewsCount:892,attachments:[],imageUrl:"https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=300&h=200&fit=crop"},{id:"3",title:"New Guidelines for Emergency Medicine Protocols",content:"Updated protocols for emergency medical procedures and best practices have been released. These guidelines incorporate the latest research and improve patient care outcomes.",authorName:"Dr. Emily Rodriguez",authorId:"user3",createdAt:new Date("2024-01-13"),updatedAt:new Date("2024-01-13"),tags:["emergency","protocols","guidelines"],isPinned:!1,viewsCount:654,attachments:["protocol-guide.pdf"],imageUrl:"https://images.unsplash.com/photo-1551190822-a9333d879b1f?w=300&h=200&fit=crop"}];function yx(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[i,a]=E.useState(null);return E.useEffect(()=>{const p=Nr(ot(Be,"news"),md("updatedAt","desc")),g=Lo(p,y=>{const v=[];y.forEach(b=>{var _,w;const S=b.data();v.push({id:b.id,title:S.title||"",content:S.content||"",imageUrl:S.imageUrl||"",videoUrl:S.videoUrl||"",createdAt:((_=S.createdAt)==null?void 0:_.toDate())||new Date,updatedAt:((w=S.updatedAt)==null?void 0:w.toDate())||new Date,authorName:S.authorName||"",authorId:S.newsId||b.id,tags:S.tags||[],isPinned:S.isPinned||!1,viewsCount:S.viewsCount||0,attachments:S.attachments||[],yearId:S.yearId||"",yearNumber:S.yearNumber||void 0})}),e(v),r(!1)},y=>{console.error("Error fetching news:",y),console.log("Using mock data for news"),e(e6),a(null),r(!1)});return()=>g()},[]),{news:n,loading:t,error:i,createNews:async p=>{try{await Pn(ot(Be,"news"),p)}catch(g){console.error("Error creating news:",g);const y={id:`mock_${Date.now()}`,...p,createdAt:new Date,updatedAt:new Date,viewsCount:0,attachments:p.attachments||[]};e(v=>[y,...v]),console.log("Added news to mock data:",y)}},updateNews:async(p,g)=>{try{await Nn(Pt(Be,"news",p),g)}catch(y){console.error("Error updating news:",y),e(v=>v.map(b=>b.id===p?{...b,...g,updatedAt:new Date}:b)),console.log("Updated news in mock data")}},deleteNews:async p=>{try{await Us(Pt(Be,"news",p))}catch(g){console.error("Error deleting news:",g),e(y=>y.filter(v=>v.id!==p)),console.log("Removed news from mock data")}}}}function pC(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[i,a]=E.useState(null),[c,d]=E.useState(!1),h=[{id:"product1",productId:"product1",name:"Medical Textbook",description:"Comprehensive medical textbook for students",price:89.99,images:["https://example.com/book1.jpg"],categoryId:"books",createdAt:new Date},{id:"product2",productId:"product2",name:"Stethoscope",description:"Professional grade stethoscope",price:120,images:["https://example.com/stethoscope.jpg"],categoryId:"equipment",createdAt:new Date}];E.useEffect(()=>{(async()=>{const S=setTimeout(()=>{t&&!c&&(console.log("ðŸ”„ Firebase taking too long - switching to offline mode"),d(!0),r(!1),a("Working in offline mode - Firebase unavailable"),e(h))},3e3);try{console.log("ðŸ”„ Fetching products from Firebase...");const _=await Gt(ot(Be,"products")),w=[];_.forEach(P=>{var C;const I=P.data();w.push({id:P.id,productId:I.productId||P.id,name:I.name||"",description:I.description||"",price:I.price||0,images:I.images||[],categoryId:I.categoryId||"",createdAt:((C=I.createdAt)==null?void 0:C.toDate())||new Date})}),clearTimeout(S),e(w.sort((P,I)=>I.createdAt.getTime()-P.createdAt.getTime())),r(!1),a(null),console.log("âœ… Products loaded successfully:",w.length)}catch(_){clearTimeout(S),_.isFirebaseOfflineError?console.log("ðŸ”„ Firebase offline mode detected - using mock data"):console.error("Firebase error - switching to offline mode:",_.message),d(!0),r(!1),a("Working in offline mode - Firebase unavailable"),e(h)}})()},[]);const p=async b=>{if(c){const S={id:`product_${Date.now()}`,productId:`product_${Date.now()}`,...b,createdAt:new Date};e(_=>[S,..._]),console.log("âœ… Added product to offline mode:",S.name);return}try{const S={name:b.name,description:b.description,price:b.price,images:b.images,categoryId:b.categoryId||"",createdAt:new Date,productId:""};console.log("ðŸ“ Creating new product:",S);const _=await Pn(ot(Be,"products"),S);await Nn(_,{productId:_.id}),console.log("âœ… Created product with ID:",_.id),window.location.replace(window.location.href)}catch(S){console.error("Error creating product:",S),d(!0),await p(b)}};return{products:n,loading:t,error:i,isOfflineMode:c,createProduct:p,updateProduct:async(b,S)=>{if(c){e(_=>_.map(w=>w.id===b?{...w,...S}:w)),console.log("âœ… Updated product in offline mode");return}try{const _=Pt(Be,"products",b);await Nn(_,S),console.log("âœ… Updated product in Firebase:",b),window.location.replace(window.location.href)}catch(_){console.error("Error updating product:",_)}},deleteProduct:async b=>{if(c){e(S=>S.filter(_=>_.id!==b)),console.log("âœ… Deleted product from offline mode");return}try{await Us(Pt(Be,"products",b)),console.log("âœ… Deleted product from Firebase:",b),window.location.replace(window.location.href)}catch(S){console.error("Error deleting product:",S)}},retryConnection:()=>{console.log("ðŸ”„ Retrying Firebase connection..."),r(!0),a(null),d(!1),window.location.replace(window.location.href)}}}const t6=[{id:"1",name:"Dr. Sarah Johnson",department:"Internal Medicine",email:"sarah.johnson@medjust.com",officeLocation:"Medical Building, Room 301",imageUrl:"https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=300&h=300&fit=crop&crop=face"},{id:"2",name:"Prof. Michael Chen",department:"Surgery",email:"michael.chen@medjust.com",officeLocation:"Surgical Wing, Room 205",imageUrl:"https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=300&h=300&fit=crop&crop=face"},{id:"3",name:"Dr. Emily Rodriguez",department:"Emergency Medicine",email:"emily.rodriguez@medjust.com",officeLocation:"Emergency Department, Office 12",imageUrl:"https://images.unsplash.com/photo-1594824928909-90ad1d93d7c3?w=300&h=300&fit=crop&crop=face"}];function mC(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[i,a]=E.useState(null),[c,d]=E.useState(!1);E.useEffect(()=>{const y=async()=>{try{const b=Nr(ot(Be,"professors"));await Gt(b);const S=Nr(ot(Be,"professors"),md("name","asc"));return Lo(S,w=>{const P=[];w.forEach(I=>{const C=I.data();P.push({id:I.id,name:C.name||"",title:C.title||"",department:C.department||"",email:C.email||"",phone:C.phone||"",officeLocation:C.officeLocation||"",bio:C.bio||"",researchAreas:C.researchAreas||[],website:C.website||"",linkedin:C.linkedin||"",imageUrl:C.imageUrl||""})}),e(P),r(!1)},w=>{console.error("Error in Firebase listener:",w),v()})}catch(b){return console.error("Firebase connection failed:",b),v(),null}},v=()=>{console.log("ðŸ”„ Switching to offline mode with mock data"),d(!0),e(t6),a(null),r(!1)};y()},[]);const h=async y=>{if(c){const v={id:`offline_${Date.now()}`,...y};e(b=>[...b,v]),console.log("âœ… Added professor in offline mode:",v.name);return}try{await Pn(ot(Be,"professors"),{...y,professorId:`prof_${Date.now()}`}),console.log("âœ… Added professor to Firebase:",y.name)}catch(v){console.error("Error creating professor:",v),d(!0),await h(y)}};return{professors:n,loading:t,error:i,createProfessor:h,updateProfessor:async(y,v)=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(b=>b.map(S=>S.id===y?{...S,...v}:S)),console.log("âœ… Updated professor in offline mode");return}try{await Nn(Pt(Be,"professors",y),v),console.log("âœ… Updated professor in Firebase")}catch(b){console.error("Error updating professor:",b),e(S=>S.map(_=>_.id===y?{..._,...v}:_)),console.log("âœ… Updated professor locally (Firebase failed)")}},deleteProfessor:async y=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(v=>v.filter(b=>b.id!==y)),console.log("âœ… Deleted professor in offline mode");return}try{await Us(Pt(Be,"professors",y)),console.log("âœ… Deleted professor from Firebase")}catch(v){console.error("Error deleting professor:",v),e(b=>b.filter(S=>S.id!==y)),console.log("âœ… Deleted professor locally (Firebase failed)")}},isOfflineMode:c}}function _c(){const[n,e]=E.useState([]),[t,r]=E.useState([]),[i,a]=E.useState([]),[c,d]=E.useState(!0),[h,p]=E.useState(null),[g,y]=E.useState(!1),[v,b]=E.useState(1),[S,_]=E.useState("connecting"),w=()=>{console.log("ðŸ”„ Activating offline mode immediately"),y(!0),_("offline"),d(!1),p(null),e([{id:"offline_year1",yearNumber:1,type:"basic",batchName:"",subjects:[]},{id:"offline_year2",yearNumber:2,type:"basic",batchName:"",subjects:[]},{id:"offline_year3",yearNumber:3,type:"basic",batchName:"",subjects:[]},{id:"offline_year4",yearNumber:4,type:"clinical",batchName:"",subjects:[]},{id:"offline_year5",yearNumber:5,type:"clinical",batchName:"",subjects:[]},{id:"offline_year6",yearNumber:6,type:"clinical",batchName:"",subjects:[]}]),a([])};E.useEffect(()=>{},[]),E.useEffect(()=>{(async()=>{var G,H,Y;if(!navigator.onLine){console.log("ðŸš« No internet connection detected - activating offline mode"),w();return}_("connecting"),d(!0);try{console.log("ðŸ”„ Attempting Firebase connection...");const se=await Gt(ot(Be,"batches"));let W=[];const ee=[];for(const oe of se.docs){const ue=oe.data(),Se=oe.id,Ne=ue.batch_name||ue.batchName||"";ee.push({id:Se,batchName:Ne,imageUrl:ue.image_url||ue.imageUrl||"",aca_supervisor:ue.aca_supervisor||ue.acadmic_supervisor||ue.academic_supervisor||"",cr:ue.cr||"",actor:ue.actor||"",group_link:ue.group_link||ue.groupUrl||ue.group_url||""});try{(await Gt(ot(oe.ref,"years"))).forEach(we=>{const Ie=we.data();let Me=Ie.order||1;if(Ie.name){const Xe=String(Ie.name).match(/\d+/);Xe&&(Me=parseInt(Xe[0]))}W.push({id:we.id,yearNumber:Me,name:Ie.name||Ie.title||"",type:Me<=3?"basic":"clinical",batchName:Ne,imageUrl:Ie.imageUrl||Ie.image_url||"",academicSupervisor:Ie.aca_supervisor||Ie.acadmic_supervisor||Ie.academic_supervisor||"",actor:Ie.actor||"",cr:Ie.cr||"",groupUrl:Ie.group_link||Ie.group_url||Ie.groupUrl||"",subjects:[],batchId:Se})})}catch(ge){console.warn("Failed to fetch years for batch",Se,ge)}}r(ee),typeof yearsSnapshot<"u"&&yearsSnapshot&&!yearsSnapshot.empty&&yearsSnapshot.forEach(oe=>{const ue=oe.data();let Se=ue.order||1;if(ue.name){const Ne=ue.name.match(/\d+/);Ne&&(Se=parseInt(Ne[0]))}W.push({id:oe.id,yearNumber:Se,name:ue.name||ue.title||"",type:Se<=3?"basic":"clinical",batchName:ue.batch_name||ue.batchName||"",imageUrl:ue.imageUrl||ue.image_url||"",academicSupervisor:ue.aca_supervisor||ue.acadmic_supervisor||ue.academic_supervisor||"",actor:ue.actor||"",cr:ue.cr||"",groupUrl:ue.group_url||ue.groupUrl||"",subjects:[]})});const ae=await Gt(ot(Be,"Subjects")),$=[];for(const oe of ae.docs){const ue=oe.data(),Se=await Gt(ot(oe.ref,"lectures")),Ne=[];for(const ge of Se.docs){const we=ge.data(),Ie=await Gt(ot(ge.ref,"videos")),Me=[];Ie.forEach(Ot=>{var Jt;const lt=Ot.data();Me.push({id:Ot.id,title:lt.title||lt.name||"",url:lt.url||"",thumbnailUrl:lt.thumbnailUrl||"",description:lt.description||"",uploadedAt:((Jt=lt.uploadedAt)==null?void 0:Jt.toDate())||new Date})});const Xe=await Gt(ot(ge.ref,"files")),nt=[];Xe.forEach(Ot=>{var Jt;const lt=Ot.data();nt.push({id:Ot.id,title:lt.title||lt.name||"",url:lt.url||"",description:lt.description||"",uploadedAt:((Jt=lt.uploadedAt)==null?void 0:Jt.toDate())||new Date})});const bt=await Gt(ot(ge.ref,"quizzes")),kt=[];bt.forEach(Ot=>{const lt=Ot.data();kt.push({id:Ot.id,title:lt.title||lt.name||"",description:lt.description||"",duration:lt.duration||30,passRate:lt.passRate||70,questions:lt.questions||[]})}),Ne.push({id:ge.id,name:we.name||we.title||"",description:we.description||"",subjectId:oe.id,order:we.order||1,imageUrl:we.imageUrl||"",createdAt:((G=we.createdAt)==null?void 0:G.toDate())||new Date,uploadedBy:we.uploadedBy||"Unknown",videos:Me,files:nt,quizzes:kt})}$.push({id:oe.id,name:ue.name||"",subjectId:ue.subjectId||oe.id,yearId:ue.yearId||"",imageUrl:ue.imageUrl||"",lectures:Ne.sort((ge,we)=>ge.order-we.order)})}const X=W.map(oe=>({...oe,subjects:$.filter(ue=>ue.yearId===oe.id).sort((ue,Se)=>ue.name.localeCompare(Se.name))}));e(X.sort((oe,ue)=>oe.yearNumber-ue.yearNumber)),a(X.flatMap(oe=>oe.subjects)),d(!1),y(!1),_("connected"),p(null),console.log("âœ… Firebase data loaded successfully");try{if(navigator.onLine)for(const oe of se.docs)try{const ue=await Gt(ot(oe.ref,"years"));for(const Se of ue.docs){const Ne=Se.data(),ge=Pt(ot(oe.ref,"years"),Se.id),we={};if(Ne.imageUrl===void 0&&(we.imageUrl=""),Ne.batch_name===void 0&&Ne.batchName===void 0&&(we.batch_name=((H=oe.data())==null?void 0:H.batch_name)||((Y=oe.data())==null?void 0:Y.batchName)||""),Object.keys(we).length>0)try{await Nn(ge,we),console.log(`ðŸ”„ Set missing fields for year ${Se.id}:`,we)}catch(Ie){console.warn(`Failed to set defaults for ${Se.id}:`,Ie)}}}catch(ue){console.warn("Could not ensure fields for years under batch",oe.id,ue)}}catch(oe){console.warn("Could not ensure imageUrl fields:",oe)}}catch{console.log("âŒ Firebase connection failed - staying in offline mode"),w()}})()},[v]);const P=()=>{console.log("ï¿½ï¿½ï¿½ Retrying Firebase connection..."),d(!0),p(null),y(!1),_("connecting"),b(k=>k+1)},I=async(k,G)=>{if(k){if(g||!navigator.onLine){e(H=>H.map(Y=>Y.id===k?{...Y,...G}:Y));return}try{const H=wa(Be,"years"),se=(await Gt(H)).docs.find(W=>W.id===k);if(se){await Nn(se.ref,{...G,updatedAt:new Date}),b(W=>W+1);return}e(W=>W.map(ee=>ee.id===k?{...ee,...G}:ee))}catch(H){console.error("Error updating year:",H),e(Y=>Y.map(se=>se.id===k?{...se,...G}:se))}}},C=async(k,G)=>{if(k){if(g||!navigator.onLine){r(H=>H.map(Y=>Y.id===k?{...Y,...G}:Y));return}try{const H=Pt(Be,"batches",k);await Nn(H,{...G,updatedAt:new Date}),b(Y=>Y+1)}catch(H){console.error("Failed to update batch:",H),r(Y=>Y.map(se=>se.id===k?{...se,...G}:se))}}},M=async(k,G=3)=>{for(let H=0;H<G;H++)try{return await k()}catch(Y){if(console.log(`Attempt ${H+1} failed:`,Y.message),H===G-1)throw Y;await new Promise(se=>setTimeout(se,1e3*(H+1)))}},z=async k=>{if(g||!navigator.onLine){const G={id:`subject_${Date.now()}`,name:k.name,subjectId:`subject_${Date.now()}`,yearId:k.yearId,imageUrl:k.imageUrl||"",lectures:[]};a(H=>[...H,G]),e(H=>H.map(Y=>Y.id===k.yearId?{...Y,subjects:[...Y.subjects,G]}:Y)),console.log("âœ… Added subject to offline mode:",G.name);return}try{console.log("ðŸ”„ Creating subject with data:",k),await M(async()=>{const G="7RpQaRoWKFLKiPA7A9Aq",H=Pt(Be,"Subjects",G);await Nn(H,{name:k.name,imageUrl:k.imageUrl||"",hours:k.hours||3,yearId:k.yearId,subjectId:G,updatedAt:new Date}),console.log("âœ… Updated existing subject document:",G);const Y=ot(H,"lectures");if((await Gt(Y)).empty){const ee=await Pn(Y,{name:"Sample Lecture",title:"Sample Lecture",description:"",imageUrl:"",order:1,uploadedBy:"System",createdAt:new Date,lectureId:""});await Nn(ee,{lectureId:ee.id});const ae=["videos","files","quizzes"];for(const $ of ae){const X=ot(ee,$);let oe={};$==="videos"?oe={title:"Sample Video",description:"",thumbnailUrl:"",url:"",uploadedAt:new Date,videoId:""}:$==="files"?oe={title:"Sample File",description:"",url:"",uploadedAt:new Date,fileId:""}:$==="quizzes"&&(oe={title:"Sample Quiz",description:"",duration:30,passRate:70,questions:[],quizId:""});const ue=await Pn(X,oe),Se=`${$.slice(0,-1)}Id`;await Nn(ue,{[Se]:ue.id})}console.log("âœ… Created complete lecture structure for subject:",G)}b(W=>W+1)})}catch(G){console.error("Error creating subject:",G),y(!0),await z(k)}},B=async k=>{if(g){const G={id:`lecture_${Date.now()}`,...k};a(H=>H.map(Y=>Y.id===k.subjectId?{...Y,lectures:[...Y.lectures,G]}:Y)),e(H=>H.map(Y=>({...Y,subjects:Y.subjects.map(se=>se.id===k.subjectId?{...se,lectures:[...se.lectures,G]}:se)}))),console.log("âœ… Added lecture to offline mode:",G.name);return}try{await M(async()=>{const G=Pt(Be,"Subjects",k.subjectId),H=ot(G,"lectures"),Y={title:k.name,description:k.description||"",imageUrl:k.imageUrl||"",order:k.order||1,uploadedBy:k.uploadedBy||"Current User",createdAt:new Date,lectureId:""};console.log("ðŸ“ Creating lecture in subcollection:",Y);const se=await Pn(H,Y);await Nn(se,{lectureId:se.id}),console.log("âœ… Created lecture document with ID:",se.id),console.log("ðŸ“ Path: /Subjects/"+k.subjectId+"/lectures/"+se.id),b(W=>W+1)})}catch(G){console.error("Error creating lecture:",G),y(!0),await B(k)}},A=async(k,G)=>{if(g){a(H=>H.map(Y=>Y.id===k?{...Y,lectures:Y.lectures.filter(se=>se.id!==G)}:Y)),e(H=>H.map(Y=>({...Y,subjects:Y.subjects.map(se=>se.id===k?{...se,lectures:se.lectures.filter(W=>W.id!==G)}:se)}))),console.log("âœ… Deleted lecture from offline mode");return}try{const H=Pt(Be,"Subjects",k),Y=Pt(H,"lectures",G);await Us(Y),console.log("âœ… Deleted lecture from Firebase"),b(se=>se+1)}catch(H){console.error("Error deleting lecture:",H)}},R=async k=>{if(k){if(g){a(G=>G.filter(H=>H.id!==k)),e(G=>G.map(H=>({...H,subjects:H.subjects.filter(Y=>Y.id!==k)}))),console.log("âœ… Deleted subject in offline mode");return}try{const G=Pt(Be,"Subjects",k);await Us(G),console.log("âœ… Deleted subject from Firebase"),b(H=>H+1)}catch(G){console.error("Error deleting subject:",G)}}},D=async(k,G,H)=>{if(!(!k||!G)){if(g){e(Y=>Y.map(se=>({...se,subjects:se.subjects.map(W=>W.id===k?{...W,lectures:W.lectures.map(ee=>ee.id===G?{...ee,videos:[...ee.videos||[],{id:`video_${Date.now()}`,title:H.title,url:H.url,thumbnailUrl:H.thumbnailUrl||"",description:H.description||"",uploadedAt:new Date}]}:ee)}:W)})));return}try{const Y=Pt(Be,"Subjects",k,"lectures",G);await Pn(ot(Y,"videos"),{title:H.title,description:H.description||"",url:H.url,duration:H.duration||"",thumbnailUrl:H.thumbnailUrl||"",platform:H.platform||"",uploadedAt:new Date,uploadedBy:"Current User"}),b(se=>se+1)}catch(Y){console.error("Error adding video:",Y)}}},O=async(k,G,H)=>{if(!(!k||!G)){if(g){e(Y=>Y.map(se=>({...se,subjects:se.subjects.map(W=>W.id===k?{...W,lectures:W.lectures.map(ee=>ee.id===G?{...ee,files:[...ee.files||[],{id:`file_${Date.now()}`,title:H.title,url:H.fileUrl,description:H.description||"",uploadedAt:new Date}]}:ee)}:W)})));return}try{const Y=Pt(Be,"Subjects",k,"lectures",G);await Pn(ot(Y,"files"),{title:H.title,description:H.description||"",url:H.fileUrl,fileType:H.fileType||"",fileSize:H.fileSize||"",uploadedAt:new Date,uploadedBy:"Current User"}),b(se=>se+1)}catch(Y){console.error("Error adding file:",Y)}}},V=async(k,G,H)=>{if(!(!k||!G)){if(g){e(Y=>Y.map(se=>({...se,subjects:se.subjects.map(W=>W.id===k?{...W,lectures:W.lectures.map(ee=>ee.id===G?{...ee,quizzes:[...ee.quizzes||[],{id:`quiz_${Date.now()}`,title:H.title,description:H.description||"",duration:H.timeLimit||30,passRate:H.passingScore||70,questions:H.questions||[]}]}:ee)}:W)})));return}try{const Y=Pt(Be,"Subjects",k,"lectures",G);await Pn(ot(Y,"quizzes"),{title:H.title,description:H.description||"",duration:H.timeLimit||30,passRate:H.passingScore||70,questions:H.questions||[],createdAt:new Date,uploadedBy:"Current User"}),b(se=>se+1)}catch(Y){console.error("Error adding quiz:",Y)}}},U=async(k,G={})=>{const H=G.yearNumber||1,Y=G.name||`Year ${H}`,se=G.type||(H<=3?"basic":"clinical");if(g||!navigator.onLine){const W={id:`year_${Date.now()}`,yearNumber:H,name:Y,type:se,batchName:"",batchId:k||void 0,imageUrl:"",academicSupervisor:"",actor:"",cr:"",groupUrl:"",subjects:[]};e(ee=>[...ee,W]),k&&r(ee=>ee.map(ae=>ae.id===k?{...ae}:ae)),console.log("âœ… Added year in offline mode:",W);return}try{await M(async()=>{if(k){const W=Pt(Be,"batches",k),ee=ot(W,"years"),ae=await Pn(ee,{name:Y,order:H,imageUrl:"",batch_name:Y,createdAt:new Date});try{await Nn(ae,{yearId:ae.id})}catch{}}else{const W=ot(Be,"years"),ee=await Pn(W,{name:Y,order:H,imageUrl:"",batch_name:Y,createdAt:new Date});try{await Nn(ee,{yearId:ee.id})}catch{}}b(W=>W+1)})}catch(W){console.error("Error creating year:",W),y(!0),await U(k,G)}};return{years:n,batches:t,subjects:i,loading:c,error:h,isOfflineMode:g,connectionStatus:S,retryConnection:P,updateYear:I,updateBatch:C,createSubject:z,createLecture:B,createYear:U,deleteLecture:A,deleteSubject:R,addVideo:D,addFile:O,addQuiz:V}}const n6=[{id:1,type:"news",title:"New cardiology study published",time:"2 hours ago",author:"Dr. Smith"},{id:2,type:"video",title:"Anatomy lecture uploaded",time:"4 hours ago",author:"Prof. Johnson"},{id:3,type:"quiz",title:"Pharmacology quiz created",time:"6 hours ago",author:"Dr. Brown"},{id:4,type:"product",title:"New stethoscope added to store",time:"1 day ago",author:"Admin"}];function r6(){const{news:n,loading:e}=yx(),{products:t,loading:r}=pC(),{professors:i,loading:a}=mC(),{years:c,loading:d}=_c(),h=n.length,p=i.length,g=t.reduce((b,S)=>b+(S.price||0),0);c.reduce((b,S)=>b+S.subjects.reduce((_,w)=>_+w.lectures.reduce((P,I)=>{var C;return P+(((C=I.videos)==null?void 0:C.length)||0)},0),0),0);const y=c.reduce((b,S)=>{var _;return b+(((_=S.subjects)==null?void 0:_.length)||0)},0),v=[{title:"Total News Articles",value:e?"...":String(h),change:"+12%",icon:gf,color:"text-blue-600"},{title:"Subjects",value:d?"...":String(y),change:"+5%",icon:os,color:"text-green-600"},{title:"Active Professors",value:a?"...":String(p),change:"+2%",icon:Yl,color:"text-purple-600"},{title:"Store Revenue",value:r?"...":`$${g.toLocaleString()}`,change:"+18%",icon:y1,color:"text-emerald-600"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard"}),l.jsx("p",{className:"text-muted-foreground",children:"Welcome to the MedJust Admin Dashboard"})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:v.map(b=>l.jsxs(ve,{children:[l.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Ye,{className:"text-sm font-medium",children:b.title}),l.jsx(b.icon,{className:`h-4 w-4 ${b.color}`})]}),l.jsxs(xe,{children:[l.jsx("div",{className:"text-2xl font-bold",children:b.value}),l.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[l.jsxs(on,{variant:"secondary",className:"text-green-600",children:[l.jsx(EP,{className:"h-3 w-3 mr-1"}),b.change]}),l.jsx("span",{className:"text-muted-foreground",children:"from last month"})]})]})]},b.title))}),l.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsx(Ye,{children:"Recent Activity"}),l.jsx(Tt,{children:"Latest updates across all modules"})]}),l.jsx(xe,{children:l.jsx("div",{className:"space-y-4",children:n6.map(b=>l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium",children:b.title}),l.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[l.jsx("span",{children:b.author}),l.jsx("span",{children:"â€¢"}),l.jsx("span",{children:b.time})]})]})]},b.id))})})]}),l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsx(Ye,{children:"Quick Actions"}),l.jsx(Tt,{children:"Common administrative tasks"})]}),l.jsx(xe,{children:l.jsxs("div",{className:"grid gap-2",children:[l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(gf,{className:"h-5 w-5 text-blue-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Create News Article"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Publish new content"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(Is,{className:"h-5 w-5 text-green-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Upload Video"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Add learning resource"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(Yl,{className:"h-5 w-5 text-purple-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Add Professor"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Register new faculty"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(sv,{className:"h-5 w-5 text-emerald-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Add Product"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Expand store catalog"})]})]})]})})]})]})]})}const _i=E.forwardRef(({className:n,...e},t)=>l.jsx("textarea",{className:at("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));_i.displayName="Textarea";function gC(n){const e=E.useRef({value:n,previous:n});return E.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var vx="Switch",[s6,ez]=Ei(vx),[i6,o6]=s6(vx),yC=E.forwardRef((n,e)=>{const{__scopeSwitch:t,name:r,checked:i,defaultChecked:a,required:c,disabled:d,value:h="on",onCheckedChange:p,...g}=n,[y,v]=E.useState(null),b=Ct(e,I=>v(I)),S=E.useRef(!1),_=y?!!y.closest("form"):!0,[w=!1,P]=Ql({prop:i,defaultProp:a,onChange:p});return l.jsxs(i6,{scope:t,checked:w,disabled:d,children:[l.jsx(et.button,{type:"button",role:"switch","aria-checked":w,"aria-required":c,"data-state":wC(w),"data-disabled":d?"":void 0,disabled:d,value:h,...g,ref:b,onClick:We(n.onClick,I=>{P(C=>!C),_&&(S.current=I.isPropagationStopped(),S.current||I.stopPropagation())})}),_&&l.jsx(a6,{control:y,bubbles:!S.current,name:r,value:h,checked:w,required:c,disabled:d,style:{transform:"translateX(-100%)"}})]})});yC.displayName=vx;var vC="SwitchThumb",xC=E.forwardRef((n,e)=>{const{__scopeSwitch:t,...r}=n,i=o6(vC,t);return l.jsx(et.span,{"data-state":wC(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});xC.displayName=vC;var a6=n=>{const{control:e,checked:t,bubbles:r=!0,...i}=n,a=E.useRef(null),c=gC(t),d=$1(e);return E.useEffect(()=>{const h=a.current,p=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(p,"checked").set;if(c!==t&&y){const v=new Event("click",{bubbles:r});y.call(h,t),h.dispatchEvent(v)}},[c,t,r]),l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:a,style:{...n.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function wC(n){return n?"checked":"unchecked"}var _C=yC,l6=xC;const EC=E.forwardRef(({className:n,...e},t)=>l.jsx(_C,{className:at("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...e,ref:t,children:l.jsx(l6,{className:at("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));EC.displayName=_C.displayName;function c6({news:n,onClose:e,onSave:t}){var w,P,I;const{years:r}=_c(),[i,a]=E.useState(null),[c,d]=E.useState({title:"",content:"",imageUrl:"",videoUrl:"",tags:[],isPinned:!1,attachments:[],yearId:"",subjectId:""}),[h,p]=E.useState(""),[g,y]=E.useState(!1);E.useEffect(()=>{n&&d({title:n.title||"",content:n.content||"",imageUrl:n.imageUrl||"",videoUrl:n.videoUrl||"",tags:n.tags||[],isPinned:n.isPinned||!1,attachments:n.attachments||[],yearId:n.yearId||"",subjectId:n.subjectId||""})},[n]),E.useEffect(()=>{let C=!0;return(async()=>{try{if(r&&r.length>0||i)return;const z=await Gt(wa(Be,"years")),B=[];z.forEach(A=>{const R=A.data();let D=R.order||1;if(R.name){const O=String(R.name).match(/\d+/);O&&(D=parseInt(O[0]))}B.push({id:A.id,yearNumber:D,type:D<=3?"basic":"clinical",subjects:R.subjects||[]})}),C&&B.length>0&&a(B)}catch{}})(),()=>{C=!1}},[r,i]);const v=async C=>{C.preventDefault(),y(!0);try{const M={...c,yearNumber:void 0,updatedAt:new Date,...n?{}:{createdAt:new Date,authorName:"Current User",authorId:"current-user-id",viewsCount:0}};if(c.yearId){const z=r.find(B=>B.id===c.yearId);z&&(M.yearNumber=z.yearNumber)}c.subjectId&&(M.subjectId=c.subjectId),t(M)}catch(M){console.error("Error saving news:",M)}finally{y(!1)}},b=()=>{h.trim()&&!c.tags.includes(h.trim())&&(d(C=>({...C,tags:[...C.tags,h.trim()]})),p(""))},S=C=>{d(M=>({...M,tags:M.tags.filter(z=>z!==C)}))},_=C=>{C.key==="Enter"&&(C.preventDefault(),b())};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ne,{variant:"ghost",onClick:e,children:[l.jsx($s,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Article":"Create Article"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update the news article details":"Create a new news article for medical students"})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(EC,{id:"pinned",checked:c.isPinned,onCheckedChange:C=>d(M=>({...M,isPinned:C}))}),l.jsxs(Pe,{htmlFor:"pinned",className:"flex items-center gap-2",children:[l.jsx(v1,{className:"h-4 w-4"}),"Pin Article"]})]})})]}),l.jsx("form",{onSubmit:v,className:"space-y-6",children:l.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsx(Ye,{children:"Article Content"}),l.jsx(Tt,{children:"Main article information and content"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"title",children:"Title *"}),l.jsx(De,{id:"title",placeholder:"Enter article title...",value:c.title,onChange:C=>d(M=>({...M,title:C.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"content",children:"Content *"}),l.jsx(_i,{id:"content",placeholder:"Write your article content here...",value:c.content,onChange:C=>d(M=>({...M,content:C.target.value})),rows:12,required:!0})]})]})]}),l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsx(Ye,{children:"Tags"}),l.jsx(Tt,{children:"Add relevant tags to help categorize this article"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx(De,{placeholder:"Add a tag...",value:h,onChange:C=>p(C.target.value),onKeyPress:_}),l.jsxs(ne,{type:"button",onClick:b,variant:"outline",children:[l.jsx(xu,{className:"h-4 w-4 mr-2"}),"Add"]})]}),c.tags.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map(C=>l.jsxs(on,{variant:"secondary",className:"flex items-center gap-1",children:[C,l.jsx("button",{type:"button",onClick:()=>S(C),className:"ml-1 hover:text-destructive",children:l.jsx(Cu,{className:"h-3 w-3"})})]},C))})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsx(Ye,{children:"Media"}),l.jsx(Tt,{children:"Add images and videos to your article"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"imageUrl",children:"Featured Image URL"}),l.jsx(De,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:c.imageUrl,onChange:C=>d(M=>({...M,imageUrl:C.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"videoUrl",children:"Video URL"}),l.jsx(De,{id:"videoUrl",placeholder:"https://youtube.com/watch?v=...",value:c.videoUrl,onChange:C=>d(M=>({...M,videoUrl:C.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"yearId",children:"Related Year"}),l.jsxs("select",{id:"yearId",value:c.yearId,onChange:C=>d(M=>({...M,yearId:C.target.value,subjectId:""})),className:"w-full border rounded px-3 py-2",children:[l.jsx("option",{value:"",children:"-- Not related to a specific year --"}),(i&&i.length>0?i:r)&&(i&&i.length>0?i:r).length>0?(i&&i.length>0?i:r).map(C=>l.jsx("option",{value:C.id,children:`Year ${C.yearNumber}`},C.id)):l.jsx("option",{value:"",children:"No years available"})]})]}),c.yearId&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(Pe,{htmlFor:"subjectId",children:"Related Subject"}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Selected year: ",(w=(i&&i.length>0?i:r).find(C=>C.id===c.yearId))!=null&&w.yearNumber?`Year ${(P=(i&&i.length>0?i:r).find(C=>C.id===c.yearId))==null?void 0:P.yearNumber}`:""]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{id:"subjectId",value:c.subjectId,onChange:C=>d(M=>({...M,subjectId:C.target.value})),className:"flex-1 border rounded px-3 py-2",children:[l.jsx("option",{value:"",children:"-- Not related to a specific subject --"}),(((I=(i&&i.length>0?i:r).find(C=>C.id===c.yearId))==null?void 0:I.subjects)||[]).map(C=>l.jsx("option",{value:C.id,children:C.name},C.id))]}),l.jsx(ne,{type:"button",variant:"outline",size:"sm",onClick:()=>{var C;(C=navigator.clipboard)==null||C.writeText(c.yearId||""),alert("Year id copied")},children:"Copy ID"})]})]}),c.imageUrl&&l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{children:"Preview"}),l.jsx("img",{src:c.imageUrl,alt:"Preview",className:"w-full h-32 object-cover rounded-lg border",onError:C=>{C.currentTarget.style.display="none"}})]})]})]}),l.jsxs(ve,{children:[l.jsx(qe,{children:l.jsx(Ye,{children:"Actions"})}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs(ne,{type:"submit",className:"w-full",disabled:g,children:[l.jsx(Po,{className:"h-4 w-4 mr-2"}),g?"Saving...":n?"Update Article":"Create Article"]}),l.jsx(ne,{type:"button",variant:"outline",className:"w-full",onClick:e,children:"Cancel"})]})]})]})]})})]})}function u6(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[i,a]=E.useState(!1),[c,d]=E.useState("all"),{news:h,loading:p,error:g,createNews:y,updateNews:v,deleteNews:b}=yx(),S=h.filter(I=>I.title.toLowerCase().includes(n.toLowerCase())||I.tags.some(C=>C.toLowerCase().includes(n.toLowerCase()))),_=I=>{r(I),a(!0)},w=async I=>{if(window.confirm("Are you sure you want to delete this article?"))try{await b(I)}catch(C){console.error("Error deleting news:",C),alert("Failed to delete article. Please try again.")}},P=()=>{r(null),a(!0)};return i?l.jsx(c6,{news:t,onClose:()=>{a(!1),r(null)},onSave:async I=>{try{t?await v(t.id,I):await y(I),a(!1),r(null)}catch(C){console.error("Error saving news:",C),alert("Failed to save article. Please try again.")}}}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"News Management"}),l.jsx("p",{className:"text-muted-foreground",children:"Create and manage news articles for medical students"})]}),l.jsxs(ne,{onClick:P,className:"flex items-center gap-2",children:[l.jsx(Qt,{className:"h-4 w-4"}),"Create Article"]})]}),l.jsx(ve,{children:l.jsx(xe,{className:"pt-6",children:l.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:l.jsxs("div",{className:"relative flex-1",children:[l.jsx(cc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(De,{placeholder:"Search articles by title or tags...",value:n,onChange:I=>e(I.target.value),className:"pl-10"})]})})})}),p&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(xo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading news articles..."})]})}),g&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading news"}),l.jsx("p",{className:"text-muted-foreground",children:g})]})}),!p&&!g&&l.jsx("div",{className:"space-y-4",children:S.map(I=>l.jsx(ve,{className:"hover:shadow-md transition-shadow",children:l.jsx(xe,{className:"pt-6",children:l.jsxs("div",{className:"flex gap-4",children:[I.imageUrl&&l.jsx("img",{src:I.imageUrl,alt:I.title,className:"w-24 h-24 object-cover rounded-lg flex-shrink-0"}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:I.title}),I.isPinned&&l.jsx(v1,{className:"h-4 w-4 text-yellow-500"})]}),l.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mb-3",children:I.content}),l.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:I.tags.map(C=>l.jsxs(on,{variant:"secondary",className:"text-xs",children:[l.jsx(xu,{className:"h-3 w-3 mr-1"}),C]},C))}),l.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(lo,{className:"h-3 w-3"}),I.authorName]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(m1,{className:"h-3 w-3"}),I.createdAt.toLocaleDateString()]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(mP,{className:"h-3 w-3"}),I.viewsCount," views"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>_(I),children:l.jsx(Xu,{className:"h-4 w-4"})}),l.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>w(I.id),className:"text-destructive hover:text-destructive",children:l.jsx($n,{className:"h-4 w-4"})})]})]})})]})})},I.id))}),!p&&!g&&S.length===0&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(gf,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No articles found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No articles match your search criteria.":"Start by creating your first news article."}),l.jsxs(ne,{onClick:P,children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Create Article"]})]})})]})}var d6=E.createContext(void 0);function xx(n){const e=E.useContext(d6);return n||e||"ltr"}var Dg="rovingFocusGroup.onEntryFocus",h6={bubbles:!1,cancelable:!0},jp="RovingFocusGroup",[$y,bC,f6]=Jy(jp),[p6,SC]=Ei(jp,[f6]),[m6,g6]=p6(jp),NC=E.forwardRef((n,e)=>l.jsx($y.Provider,{scope:n.__scopeRovingFocusGroup,children:l.jsx($y.Slot,{scope:n.__scopeRovingFocusGroup,children:l.jsx(y6,{...n,ref:e})})}));NC.displayName=jp;var y6=E.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:a,currentTabStopId:c,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:h,onEntryFocus:p,preventScrollOnEntryFocus:g=!1,...y}=n,v=E.useRef(null),b=Ct(e,v),S=xx(a),[_=null,w]=Ql({prop:c,defaultProp:d,onChange:h}),[P,I]=E.useState(!1),C=xn(p),M=bC(t),z=E.useRef(!1),[B,A]=E.useState(0);return E.useEffect(()=>{const R=v.current;if(R)return R.addEventListener(Dg,C),()=>R.removeEventListener(Dg,C)},[C]),l.jsx(m6,{scope:t,orientation:r,dir:S,loop:i,currentTabStopId:_,onItemFocus:E.useCallback(R=>w(R),[w]),onItemShiftTab:E.useCallback(()=>I(!0),[]),onFocusableItemAdd:E.useCallback(()=>A(R=>R+1),[]),onFocusableItemRemove:E.useCallback(()=>A(R=>R-1),[]),children:l.jsx(et.div,{tabIndex:P||B===0?-1:0,"data-orientation":r,...y,ref:b,style:{outline:"none",...n.style},onMouseDown:We(n.onMouseDown,()=>{z.current=!0}),onFocus:We(n.onFocus,R=>{const D=!z.current;if(R.target===R.currentTarget&&D&&!P){const O=new CustomEvent(Dg,h6);if(R.currentTarget.dispatchEvent(O),!O.defaultPrevented){const V=M().filter(Y=>Y.focusable),U=V.find(Y=>Y.active),k=V.find(Y=>Y.id===_),H=[U,k,...V].filter(Boolean).map(Y=>Y.ref.current);IC(H,g)}}z.current=!1}),onBlur:We(n.onBlur,()=>I(!1))})})}),TC="RovingFocusGroupItem",CC=E.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:a,...c}=n,d=Ju(),h=a||d,p=g6(TC,t),g=p.currentTabStopId===h,y=bC(t),{onFocusableItemAdd:v,onFocusableItemRemove:b}=p;return E.useEffect(()=>{if(r)return v(),()=>b()},[r,v,b]),l.jsx($y.ItemSlot,{scope:t,id:h,focusable:r,active:i,children:l.jsx(et.span,{tabIndex:g?0:-1,"data-orientation":p.orientation,...c,ref:e,onMouseDown:We(n.onMouseDown,S=>{r?p.onItemFocus(h):S.preventDefault()}),onFocus:We(n.onFocus,()=>p.onItemFocus(h)),onKeyDown:We(n.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){p.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const _=w6(S,p.orientation,p.dir);if(_!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let P=y().filter(I=>I.focusable).map(I=>I.ref.current);if(_==="last")P.reverse();else if(_==="prev"||_==="next"){_==="prev"&&P.reverse();const I=P.indexOf(S.currentTarget);P=p.loop?_6(P,I+1):P.slice(I+1)}setTimeout(()=>IC(P))}})})})});CC.displayName=TC;var v6={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function x6(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function w6(n,e,t){const r=x6(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return v6[r]}function IC(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function _6(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var E6=NC,b6=CC,wx="Tabs",[S6,tz]=Ei(wx,[SC]),jC=SC(),[N6,_x]=S6(wx),AC=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:i,defaultValue:a,orientation:c="horizontal",dir:d,activationMode:h="automatic",...p}=n,g=xx(d),[y,v]=Ql({prop:r,onChange:i,defaultProp:a});return l.jsx(N6,{scope:t,baseId:Ju(),value:y,onValueChange:v,orientation:c,dir:g,activationMode:h,children:l.jsx(et.div,{dir:g,"data-orientation":c,...p,ref:e})})});AC.displayName=wx;var PC="TabsList",RC=E.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...i}=n,a=_x(PC,t),c=jC(t);return l.jsx(E6,{asChild:!0,...c,orientation:a.orientation,dir:a.dir,loop:r,children:l.jsx(et.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});RC.displayName=PC;var kC="TabsTrigger",OC=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:i=!1,...a}=n,c=_x(kC,t),d=jC(t),h=MC(c.baseId,r),p=FC(c.baseId,r),g=r===c.value;return l.jsx(b6,{asChild:!0,...d,focusable:!i,active:g,children:l.jsx(et.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":p,"data-state":g?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:h,...a,ref:e,onMouseDown:We(n.onMouseDown,y=>{!i&&y.button===0&&y.ctrlKey===!1?c.onValueChange(r):y.preventDefault()}),onKeyDown:We(n.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&c.onValueChange(r)}),onFocus:We(n.onFocus,()=>{const y=c.activationMode!=="manual";!g&&!i&&y&&c.onValueChange(r)})})})});OC.displayName=kC;var DC="TabsContent",LC=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:i,children:a,...c}=n,d=_x(DC,t),h=MC(d.baseId,r),p=FC(d.baseId,r),g=r===d.value,y=E.useRef(g);return E.useEffect(()=>{const v=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(v)},[]),l.jsx(ev,{present:i||g,children:({present:v})=>l.jsx(et.div,{"data-state":g?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":h,hidden:!v,id:p,tabIndex:0,...c,ref:e,style:{...n.style,animationDuration:y.current?"0s":void 0},children:v&&a})})});LC.displayName=DC;function MC(n,e){return`${n}-trigger-${e}`}function FC(n,e){return`${n}-content-${e}`}var T6=AC,VC=RC,UC=OC,zC=LC;const $C=T6,Ex=E.forwardRef(({className:n,...e},t)=>l.jsx(VC,{ref:t,className:at("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));Ex.displayName=VC.displayName;const Wu=E.forwardRef(({className:n,...e},t)=>l.jsx(UC,{ref:t,className:at("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));Wu.displayName=UC.displayName;const Hu=E.forwardRef(({className:n,...e},t)=>l.jsx(zC,{ref:t,className:at("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));Hu.displayName=zC.displayName;function BC({quiz:n,onClose:e,onSave:t}){const[r,i]=E.useState({title:"",description:"",timeLimit:30,passingScore:70,questions:[]}),[a,c]=E.useState({question:"",options:["","","",""],correctAnswer:0,imageUrl:"",weight:1}),[d,h]=E.useState(!1);E.useEffect(()=>{n&&i({title:n.title||"",description:n.description||"",timeLimit:n.timeLimit||30,passingScore:n.passingScore||70,questions:n.questions||[],type:n.type||"multiple_choice"})},[n]);const p=async _=>{_.preventDefault(),h(!0);try{const w={...r,...n?{}:{createdAt:new Date,createdBy:"Current User"}};w.type||(w.type="multiple_choice"),t(w)}catch(w){console.error("Error saving quiz:",w)}finally{h(!1)}},g=()=>{var P;const _=r.type==="flashcard",w=a.question.trim();if(_){const I=a.options&&String(a.options[0]).trim()||a.answer;if(w&&I){const C={...a,options:[String(((P=a.options)==null?void 0:P[0])||a.answer||"").trim()],correctAnswer:0};i(M=>({...M,questions:[...M.questions,C]})),c({question:"",options:[""],correctAnswer:0,imageUrl:"",weight:1})}return}w&&Array.isArray(a.options)&&a.options.filter(I=>String(I).trim()).length>=2&&typeof a.correctAnswer=="number"&&String(a.options[a.correctAnswer]||"").trim()&&(i(I=>({...I,questions:[...I.questions,{...a}]})),c({question:"",options:["","","",""],correctAnswer:0,imageUrl:"",weight:1}))},y=_=>{i(w=>({...w,questions:w.questions.filter((P,I)=>I!==_)}))},v=(_,w)=>{const P=[...a.options||[]];P[_]=w,c(I=>({...I,options:P}))},b=()=>{c(_=>({..._,options:[..._.options||[],""]}))},S=_=>{c(w=>{const P=[...w.options||[]];P.splice(_,1);let I=w.correctAnswer;return I>=P.length&&(I=Math.max(0,P.length-1)),{...w,options:P,correctAnswer:I}})};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ne,{variant:"ghost",onClick:e,children:[l.jsx($s,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Quiz":"Create Quiz"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update the quiz details and questions":"Create a new quiz for students"})]})]})}),l.jsxs("form",{onSubmit:p,className:"space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsxs(Ye,{className:"flex items-center gap-2",children:[l.jsx(pi,{className:"h-5 w-5"}),"Quiz Information"]}),l.jsx(Tt,{children:"Basic information about the quiz"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"title",children:"Quiz Title *"}),l.jsx(De,{id:"title",placeholder:"Enter quiz title...",value:r.title,onChange:_=>i(w=>({...w,title:_.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"description",children:"Description"}),l.jsx(_i,{id:"description",placeholder:"Describe what this quiz covers...",value:r.description,onChange:_=>i(w=>({...w,description:_.target.value})),rows:3})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Pe,{htmlFor:"timeLimit",className:"flex items-center gap-2",children:[l.jsx(pf,{className:"h-4 w-4"}),"Time Limit (minutes)"]}),l.jsx(De,{id:"timeLimit",type:"number",min:"1",value:r.timeLimit,onChange:_=>i(w=>({...w,timeLimit:parseInt(_.target.value)||30}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Pe,{htmlFor:"passingScore",className:"flex items-center gap-2",children:[l.jsx(_P,{className:"h-4 w-4"}),"Passing Score (%)"]}),l.jsx(De,{id:"passingScore",type:"number",min:"0",max:"100",value:r.passingScore,onChange:_=>i(w=>({...w,passingScore:parseInt(_.target.value)||70}))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"quizType",children:"Quiz Type"}),l.jsxs("select",{id:"quizType",value:r.type||"multiple_choice",onChange:_=>i(w=>({...w,type:_.target.value})),className:"w-full border rounded px-3 py-2",children:[l.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),l.jsx("option",{value:"flashcard",children:"Flashcard"})]}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose how this quiz will be presented to students."})]})]})]}),l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsx(Ye,{children:"Add Question"}),l.jsx(Tt,{children:"Create multiple choice questions for the quiz"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"question",children:"Question"}),l.jsx(_i,{id:"question",placeholder:"Enter your question...",value:a.question,onChange:_=>c(w=>({...w,question:_.target.value})),rows:3})]}),l.jsx("div",{className:"space-y-2",children:r.type==="flashcard"?l.jsxs(l.Fragment,{children:[l.jsx(Pe,{children:"Correct Answer"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{placeholder:"Correct answer",value:a.options[0]??a.answer??"",onChange:_=>{c(w=>({...w,options:[_.target.value]}))}}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"For flashcards enter the correct answer (single). Use [[answer]] in the question to create blanks."})]})]}):l.jsxs(l.Fragment,{children:[l.jsx(Pe,{children:"Answer Options"}),l.jsxs("div",{className:"space-y-2",children:[a.options.map((_,w)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[l.jsx(Pe,{className:"w-8 h-8 rounded-full bg-secondary flex items-center justify-center text-sm",children:String.fromCharCode(65+w)}),l.jsx(De,{placeholder:`Option ${String.fromCharCode(65+w)}`,value:_,onChange:P=>v(w,P.target.value),className:a.correctAnswer===w?"ring-2 ring-green-500":""})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ne,{type:"button",variant:a.correctAnswer===w?"default":"outline",size:"sm",onClick:()=>c(P=>({...P,correctAnswer:w})),children:a.correctAnswer===w?"Correct":"Mark Correct"}),a.options.length>2&&l.jsx(ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>S(w),children:"Remove"})]})]},w)),l.jsx("div",{children:l.jsx(ne,{type:"button",variant:"outline",onClick:b,className:"mt-2",children:"Add Option"})})]})]})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),l.jsx(De,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:a.imageUrl,onChange:_=>c(w=>({...w,imageUrl:_.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"weight",children:"Question Weight"}),l.jsx(De,{id:"weight",type:"number",min:1,value:a.weight,onChange:_=>c(w=>({...w,weight:parseFloat(_.target.value)||1}))})]}),l.jsxs(ne,{type:"button",onClick:g,className:"w-full",children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Add Question"]})]})]}),r.questions.length>0&&l.jsxs(ve,{children:[l.jsx(qe,{children:l.jsxs(Ye,{children:["Quiz Questions (",r.questions.length,")"]})}),l.jsx(xe,{children:l.jsx("div",{className:"space-y-4",children:r.questions.map((_,w)=>l.jsx("div",{className:"p-4 border rounded-lg space-y-3",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("p",{className:"font-medium",children:[w+1,". ",_.question]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Pe,{className:"text-sm",children:"Weight"}),l.jsx(De,{type:"number",min:1,value:_.weight||1,onChange:P=>{const I=parseFloat(P.target.value)||1;i(C=>({...C,questions:C.questions.map((M,z)=>z===w?{...M,weight:I}:M)}))},className:"w-20 text-sm"})]})]}),l.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:_.options.map((P,I)=>l.jsxs("div",{className:`flex items-center gap-2 p-2 rounded ${_.correctAnswer===I?"bg-green-100 text-green-800":"bg-secondary/50"}`,children:[l.jsx("span",{className:"w-6 h-6 rounded-full bg-white flex items-center justify-center text-sm font-medium",children:String.fromCharCode(65+I)}),l.jsx("span",{className:"text-sm",children:P}),_.correctAnswer===I&&l.jsx(on,{variant:"outline",className:"ml-auto text-xs bg-green-200",children:"Correct"})]},I))})]}),l.jsx("div",{className:"flex flex-col items-end gap-2",children:l.jsx(ne,{type:"button",variant:"ghost",size:"icon",onClick:()=>y(w),className:"text-destructive hover:text-destructive",children:l.jsx($n,{className:"h-4 w-4"})})})]})},w))})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(ne,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(ne,{type:"submit",disabled:d||r.questions.length===0,children:[l.jsx(Po,{className:"h-4 w-4 mr-2"}),d?"Saving...":n?"Update Quiz":"Create Quiz"]})]})]})]})}function qC({year:n,yearType:e,onClose:t,onSave:r}){const[i,a]=E.useState({name:"",imageUrl:"",hours:3}),[c,d]=E.useState(!1),h=async p=>{p.preventDefault(),d(!0);try{const g={name:i.name,imageUrl:i.imageUrl||"",hours:i.hours||3,createdAt:new Date};r(g)}catch(g){console.error("Error saving subject:",g)}finally{d(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ne,{variant:"ghost",onClick:t,children:[l.jsx($s,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Add Subject to Year ",n]}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e==="basic"?l.jsx(va,{className:"h-4 w-4 text-blue-600"}):l.jsx(xa,{className:"h-4 w-4 text-red-600"}),l.jsxs("p",{className:"text-muted-foreground",children:["Adding to ",e==="basic"?"Basic":"Clinical"," Years â€¢ Year ",n]})]})]})]})}),l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l.jsx(ve,{className:`border-l-4 ${e==="basic"?"border-l-blue-500 bg-blue-50/50":"border-l-red-500 bg-red-50/50"}`,children:l.jsx(xe,{className:"pt-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[e==="basic"?l.jsx(va,{className:"h-8 w-8 text-blue-600"}):l.jsx(xa,{className:"h-8 w-8 text-red-600"}),l.jsxs("div",{children:[l.jsxs("h3",{className:"font-semibold text-lg",children:["Year ",n]}),l.jsx("p",{className:"text-sm text-muted-foreground",children:e==="basic"?"Basic Years":"Clinical Years"})]})]})})}),l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsxs(Ye,{className:"flex items-center gap-2",children:[e==="basic"?l.jsx(va,{className:"h-5 w-5 text-blue-600"}):l.jsx(xa,{className:"h-5 w-5 text-red-600"}),"Subject Information"]}),l.jsx(Tt,{children:"Basic information about the subject"})]}),l.jsx(xe,{className:"space-y-4",children:l.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"year",children:"Year"}),l.jsx(De,{id:"year",value:`Year ${n} (${e==="basic"?"Basic":"Clinical"})`,disabled:!0,className:"bg-muted"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"name",children:"Subject Name *"}),l.jsx(De,{id:"name",placeholder:"e.g., Anatomy & Physiology",value:i.name,onChange:p=>a(g=>({...g,name:p.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"hours",children:"Credit Hours"}),l.jsx(De,{id:"hours",type:"number",placeholder:"3",value:i.hours,onChange:p=>a(g=>({...g,hours:parseInt(p.target.value)||3})),min:"1",max:"12"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),l.jsx(De,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:i.imageUrl,onChange:p=>a(g=>({...g,imageUrl:p.target.value}))})]})]})})]}),i.name&&l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsx(Ye,{children:"Preview"}),l.jsxs(Tt,{children:["How the subject will appear in Year ",n]})]}),l.jsx(xe,{children:l.jsxs("div",{className:"p-4 border rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.imageUrl?l.jsx("img",{src:i.imageUrl,alt:i.name,className:"w-8 h-8 object-cover rounded",onError:p=>{p.currentTarget.style.display="none"}}):l.jsx(os,{className:"h-5 w-5 text-primary"}),l.jsx("h3",{className:"font-semibold text-lg",children:i.name})]}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Year ",n," â€¢ ",e," years"]})]})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(ne,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),l.jsxs(ne,{type:"submit",disabled:c,children:[l.jsx(Po,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add Subject"]})]})]})]})}function db(n,[e,t]){return Math.min(t,Math.max(e,n))}var C6="DismissableLayer",By="dismissableLayer.update",I6="dismissableLayer.pointerDownOutside",j6="dismissableLayer.focusOutside",hb,WC=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),HC=E.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:c,onDismiss:d,...h}=n,p=E.useContext(WC),[g,y]=E.useState(null),v=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=E.useState({}),S=Ct(e,A=>y(A)),_=Array.from(p.layers),[w]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),P=_.indexOf(w),I=g?_.indexOf(g):-1,C=p.layersWithOutsidePointerEventsDisabled.size>0,M=I>=P,z=R6(A=>{const R=A.target,D=[...p.branches].some(O=>O.contains(R));!M||D||(i==null||i(A),c==null||c(A),A.defaultPrevented||d==null||d())},v),B=k6(A=>{const R=A.target;[...p.branches].some(O=>O.contains(R))||(a==null||a(A),c==null||c(A),A.defaultPrevented||d==null||d())},v);return Zy(A=>{I===p.layers.size-1&&(r==null||r(A),!A.defaultPrevented&&d&&(A.preventDefault(),d()))},v),E.useEffect(()=>{if(g)return t&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(hb=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),fb(),()=>{t&&p.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=hb)}},[g,v,t,p]),E.useEffect(()=>()=>{g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),fb())},[g,p]),E.useEffect(()=>{const A=()=>b({});return document.addEventListener(By,A),()=>document.removeEventListener(By,A)},[]),l.jsx(et.div,{...h,ref:S,style:{pointerEvents:C?M?"auto":"none":void 0,...n.style},onFocusCapture:We(n.onFocusCapture,B.onFocusCapture),onBlurCapture:We(n.onBlurCapture,B.onBlurCapture),onPointerDownCapture:We(n.onPointerDownCapture,z.onPointerDownCapture)})});HC.displayName=C6;var A6="DismissableLayerBranch",P6=E.forwardRef((n,e)=>{const t=E.useContext(WC),r=E.useRef(null),i=Ct(e,r);return E.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),l.jsx(et.div,{...n,ref:i})});P6.displayName=A6;function R6(n,e=globalThis==null?void 0:globalThis.document){const t=xn(n),r=E.useRef(!1),i=E.useRef(()=>{});return E.useEffect(()=>{const a=d=>{if(d.target&&!r.current){let h=function(){KC(I6,t,p,{discrete:!0})};const p={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=h,e.addEventListener("click",i.current,{once:!0})):h()}else e.removeEventListener("click",i.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function k6(n,e=globalThis==null?void 0:globalThis.document){const t=xn(n),r=E.useRef(!1);return E.useEffect(()=>{const i=a=>{a.target&&!r.current&&KC(j6,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function fb(){const n=new CustomEvent(By);document.dispatchEvent(n)}function KC(n,e,t,{discrete:r}){const i=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?Kf(i,a):i.dispatchEvent(a)}var Lg=0;function O6(){E.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??pb()),document.body.insertAdjacentElement("beforeend",n[1]??pb()),Lg++,()=>{Lg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Lg--}},[])}function pb(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",n}var Mg="focusScope.autoFocusOnMount",Fg="focusScope.autoFocusOnUnmount",mb={bubbles:!1,cancelable:!0},D6="FocusScope",GC=E.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...c}=n,[d,h]=E.useState(null),p=xn(i),g=xn(a),y=E.useRef(null),v=Ct(e,_=>h(_)),b=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(r){let _=function(C){if(b.paused||!d)return;const M=C.target;d.contains(M)?y.current=M:Ji(y.current,{select:!0})},w=function(C){if(b.paused||!d)return;const M=C.relatedTarget;M!==null&&(d.contains(M)||Ji(y.current,{select:!0}))},P=function(C){if(document.activeElement===document.body)for(const z of C)z.removedNodes.length>0&&Ji(d)};document.addEventListener("focusin",_),document.addEventListener("focusout",w);const I=new MutationObserver(P);return d&&I.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",w),I.disconnect()}}},[r,d,b.paused]),E.useEffect(()=>{if(d){yb.add(b);const _=document.activeElement;if(!d.contains(_)){const P=new CustomEvent(Mg,mb);d.addEventListener(Mg,p),d.dispatchEvent(P),P.defaultPrevented||(L6(z6(QC(d)),{select:!0}),document.activeElement===_&&Ji(d))}return()=>{d.removeEventListener(Mg,p),setTimeout(()=>{const P=new CustomEvent(Fg,mb);d.addEventListener(Fg,g),d.dispatchEvent(P),P.defaultPrevented||Ji(_??document.body,{select:!0}),d.removeEventListener(Fg,g),yb.remove(b)},0)}}},[d,p,g,b]);const S=E.useCallback(_=>{if(!t&&!r||b.paused)return;const w=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,P=document.activeElement;if(w&&P){const I=_.currentTarget,[C,M]=M6(I);C&&M?!_.shiftKey&&P===M?(_.preventDefault(),t&&Ji(C,{select:!0})):_.shiftKey&&P===C&&(_.preventDefault(),t&&Ji(M,{select:!0})):P===I&&_.preventDefault()}},[t,r,b.paused]);return l.jsx(et.div,{tabIndex:-1,...c,ref:v,onKeyDown:S})});GC.displayName=D6;function L6(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Ji(r,{select:e}),document.activeElement!==t)return}function M6(n){const e=QC(n),t=gb(e,n),r=gb(e.reverse(),n);return[t,r]}function QC(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function gb(n,e){for(const t of n)if(!F6(t,{upTo:e}))return t}function F6(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function V6(n){return n instanceof HTMLInputElement&&"select"in n}function Ji(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&V6(n)&&e&&n.select()}}var yb=U6();function U6(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=vb(n,e),n.unshift(e)},remove(e){var t;n=vb(n,e),(t=n[0])==null||t.resume()}}}function vb(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function z6(n){return n.filter(e=>e.tagName!=="A")}var $6="Portal",YC=E.forwardRef((n,e)=>{var d;const{container:t,...r}=n,[i,a]=E.useState(!1);an(()=>a(!0),[]);const c=t||i&&((d=globalThis==null?void 0:globalThis.document)==null?void 0:d.body);return c?Xy.createPortal(l.jsx(et.div,{...r,ref:e}),c):null});YC.displayName=$6;var B6=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Nl=new WeakMap,Hh=new WeakMap,Kh={},Vg=0,XC=function(n){return n&&(n.host||XC(n.parentNode))},q6=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=XC(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},W6=function(n,e,t,r){var i=q6(e,Array.isArray(n)?n:[n]);Kh[t]||(Kh[t]=new WeakMap);var a=Kh[t],c=[],d=new Set,h=new Set(i),p=function(y){!y||d.has(y)||(d.add(y),p(y.parentNode))};i.forEach(p);var g=function(y){!y||h.has(y)||Array.prototype.forEach.call(y.children,function(v){if(d.has(v))g(v);else try{var b=v.getAttribute(r),S=b!==null&&b!=="false",_=(Nl.get(v)||0)+1,w=(a.get(v)||0)+1;Nl.set(v,_),a.set(v,w),c.push(v),_===1&&S&&Hh.set(v,!0),w===1&&v.setAttribute(t,"true"),S||v.setAttribute(r,"true")}catch(P){console.error("aria-hidden: cannot operate on ",v,P)}})};return g(e),d.clear(),Vg++,function(){c.forEach(function(y){var v=Nl.get(y)-1,b=a.get(y)-1;Nl.set(y,v),a.set(y,b),v||(Hh.has(y)||y.removeAttribute(r),Hh.delete(y)),b||y.removeAttribute(t)}),Vg--,Vg||(Nl=new WeakMap,Nl=new WeakMap,Hh=new WeakMap,Kh={})}},H6=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=B6(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),W6(r,i,t,"aria-hidden")):function(){return null}},df="right-scroll-bar-position",hf="width-before-scroll-bar",K6="with-scroll-bars-hidden",G6="--removed-body-scroll-bar-size";function Ug(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function Q6(n,e){var t=E.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var Y6=typeof window<"u"?E.useLayoutEffect:E.useEffect,xb=new WeakMap;function X6(n,e){var t=Q6(null,function(r){return n.forEach(function(i){return Ug(i,r)})});return Y6(function(){var r=xb.get(t);if(r){var i=new Set(r),a=new Set(n),c=t.current;i.forEach(function(d){a.has(d)||Ug(d,null)}),a.forEach(function(d){i.has(d)||Ug(d,c)})}xb.set(t,n)},[n]),t}function J6(n){return n}function Z6(n,e){e===void 0&&(e=J6);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(a){var c=e(a,r);return t.push(c),function(){t=t.filter(function(d){return d!==c})}},assignSyncMedium:function(a){for(r=!0;t.length;){var c=t;t=[],c.forEach(a)}t={push:function(d){return a(d)},filter:function(){return t}}},assignMedium:function(a){r=!0;var c=[];if(t.length){var d=t;t=[],d.forEach(a),c=t}var h=function(){var g=c;c=[],g.forEach(a)},p=function(){return Promise.resolve().then(h)};p(),t={push:function(g){c.push(g),p()},filter:function(g){return c=c.filter(g),t}}}};return i}function e5(n){n===void 0&&(n={});var e=Z6(null);return e.options=Cs({async:!0,ssr:!1},n),e}var JC=function(n){var e=n.sideCar,t=sd(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return E.createElement(r,Cs({},t))};JC.isSideCarExport=!0;function t5(n,e){return n.useMedium(e),JC}var ZC=e5(),zg=function(){},Ap=E.forwardRef(function(n,e){var t=E.useRef(null),r=E.useState({onScrollCapture:zg,onWheelCapture:zg,onTouchMoveCapture:zg}),i=r[0],a=r[1],c=n.forwardProps,d=n.children,h=n.className,p=n.removeScrollBar,g=n.enabled,y=n.shards,v=n.sideCar,b=n.noIsolation,S=n.inert,_=n.allowPinchZoom,w=n.as,P=w===void 0?"div":w,I=n.gapMode,C=sd(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=v,z=X6([t,e]),B=Cs(Cs({},C),i);return E.createElement(E.Fragment,null,g&&E.createElement(M,{sideCar:ZC,removeScrollBar:p,shards:y,noIsolation:b,inert:S,setCallbacks:a,allowPinchZoom:!!_,lockRef:t,gapMode:I}),c?E.cloneElement(E.Children.only(d),Cs(Cs({},B),{ref:z})):E.createElement(P,Cs({},B,{className:h,ref:z}),d))});Ap.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ap.classNames={fullWidth:hf,zeroRight:df};var n5=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function r5(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=n5();return e&&n.setAttribute("nonce",e),n}function s5(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function i5(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var o5=function(){var n=0,e=null;return{add:function(t){n==0&&(e=r5())&&(s5(e,t),i5(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},a5=function(){var n=o5();return function(e,t){E.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},eI=function(){var n=a5(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},l5={left:0,top:0,right:0,gap:0},$g=function(n){return parseInt(n||"",10)||0},c5=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[$g(t),$g(r),$g(i)]},u5=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return l5;var e=c5(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},d5=eI(),Vl="data-scroll-locked",h5=function(n,e,t,r){var i=n.left,a=n.top,c=n.right,d=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(K6,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(d,"px ").concat(r,`;
  }
  body[`).concat(Vl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(d,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(df,` {
    right: `).concat(d,"px ").concat(r,`;
  }
  
  .`).concat(hf,` {
    margin-right: `).concat(d,"px ").concat(r,`;
  }
  
  .`).concat(df," .").concat(df,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(hf," .").concat(hf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Vl,`] {
    `).concat(G6,": ").concat(d,`px;
  }
`)},wb=function(){var n=parseInt(document.body.getAttribute(Vl)||"0",10);return isFinite(n)?n:0},f5=function(){E.useEffect(function(){return document.body.setAttribute(Vl,(wb()+1).toString()),function(){var n=wb()-1;n<=0?document.body.removeAttribute(Vl):document.body.setAttribute(Vl,n.toString())}},[])},p5=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;f5();var a=E.useMemo(function(){return u5(i)},[i]);return E.createElement(d5,{styles:h5(a,!e,i,t?"":"!important")})},qy=!1;if(typeof window<"u")try{var Gh=Object.defineProperty({},"passive",{get:function(){return qy=!0,!0}});window.addEventListener("test",Gh,Gh),window.removeEventListener("test",Gh,Gh)}catch{qy=!1}var Tl=qy?{passive:!1}:!1,m5=function(n){return n.tagName==="TEXTAREA"},tI=function(n,e){var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!m5(n)&&t[e]==="visible")},g5=function(n){return tI(n,"overflowY")},y5=function(n){return tI(n,"overflowX")},_b=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=nI(n,r);if(i){var a=rI(n,r),c=a[1],d=a[2];if(c>d)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},v5=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},x5=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},nI=function(n,e){return n==="v"?g5(e):y5(e)},rI=function(n,e){return n==="v"?v5(e):x5(e)},w5=function(n,e){return n==="h"&&e==="rtl"?-1:1},_5=function(n,e,t,r,i){var a=w5(n,window.getComputedStyle(e).direction),c=a*r,d=t.target,h=e.contains(d),p=!1,g=c>0,y=0,v=0;do{var b=rI(n,d),S=b[0],_=b[1],w=b[2],P=_-w-a*S;(S||P)&&nI(n,d)&&(y+=P,v+=S),d instanceof ShadowRoot?d=d.host:d=d.parentNode}while(!h&&d!==document.body||h&&(e.contains(d)||e===d));return(g&&Math.abs(y)<1||!g&&Math.abs(v)<1)&&(p=!0),p},Qh=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Eb=function(n){return[n.deltaX,n.deltaY]},bb=function(n){return n&&"current"in n?n.current:n},E5=function(n,e){return n[0]===e[0]&&n[1]===e[1]},b5=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},S5=0,Cl=[];function N5(n){var e=E.useRef([]),t=E.useRef([0,0]),r=E.useRef(),i=E.useState(S5++)[0],a=E.useState(eI)[0],c=E.useRef(n);E.useEffect(function(){c.current=n},[n]),E.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var _=LL([n.lockRef.current],(n.shards||[]).map(bb),!0).filter(Boolean);return _.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),_.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var d=E.useCallback(function(_,w){if("touches"in _&&_.touches.length===2)return!c.current.allowPinchZoom;var P=Qh(_),I=t.current,C="deltaX"in _?_.deltaX:I[0]-P[0],M="deltaY"in _?_.deltaY:I[1]-P[1],z,B=_.target,A=Math.abs(C)>Math.abs(M)?"h":"v";if("touches"in _&&A==="h"&&B.type==="range")return!1;var R=_b(A,B);if(!R)return!0;if(R?z=A:(z=A==="v"?"h":"v",R=_b(A,B)),!R)return!1;if(!r.current&&"changedTouches"in _&&(C||M)&&(r.current=z),!z)return!0;var D=r.current||z;return _5(D,w,_,D==="h"?C:M)},[]),h=E.useCallback(function(_){var w=_;if(!(!Cl.length||Cl[Cl.length-1]!==a)){var P="deltaY"in w?Eb(w):Qh(w),I=e.current.filter(function(z){return z.name===w.type&&(z.target===w.target||w.target===z.shadowParent)&&E5(z.delta,P)})[0];if(I&&I.should){w.cancelable&&w.preventDefault();return}if(!I){var C=(c.current.shards||[]).map(bb).filter(Boolean).filter(function(z){return z.contains(w.target)}),M=C.length>0?d(w,C[0]):!c.current.noIsolation;M&&w.cancelable&&w.preventDefault()}}},[]),p=E.useCallback(function(_,w,P,I){var C={name:_,delta:w,target:P,should:I,shadowParent:T5(P)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(M){return M!==C})},1)},[]),g=E.useCallback(function(_){t.current=Qh(_),r.current=void 0},[]),y=E.useCallback(function(_){p(_.type,Eb(_),_.target,d(_,n.lockRef.current))},[]),v=E.useCallback(function(_){p(_.type,Qh(_),_.target,d(_,n.lockRef.current))},[]);E.useEffect(function(){return Cl.push(a),n.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:v}),document.addEventListener("wheel",h,Tl),document.addEventListener("touchmove",h,Tl),document.addEventListener("touchstart",g,Tl),function(){Cl=Cl.filter(function(_){return _!==a}),document.removeEventListener("wheel",h,Tl),document.removeEventListener("touchmove",h,Tl),document.removeEventListener("touchstart",g,Tl)}},[]);var b=n.removeScrollBar,S=n.inert;return E.createElement(E.Fragment,null,S?E.createElement(a,{styles:b5(i)}):null,b?E.createElement(p5,{gapMode:n.gapMode}):null)}function T5(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const C5=t5(ZC,N5);var sI=E.forwardRef(function(n,e){return E.createElement(Ap,Cs({},n,{ref:e,sideCar:C5}))});sI.classNames=Ap.classNames;var I5=[" ","Enter","ArrowUp","ArrowDown"],j5=[" ","Enter"],gd="Select",[Pp,Rp,A5]=Jy(gd),[Ec,nz]=Ei(gd,[A5,Zf]),kp=Zf(),[P5,Mo]=Ec(gd),[R5,k5]=Ec(gd),iI=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:i,onOpenChange:a,value:c,defaultValue:d,onValueChange:h,dir:p,name:g,autoComplete:y,disabled:v,required:b}=n,S=kp(e),[_,w]=E.useState(null),[P,I]=E.useState(null),[C,M]=E.useState(!1),z=xx(p),[B=!1,A]=Ql({prop:r,defaultProp:i,onChange:a}),[R,D]=Ql({prop:c,defaultProp:d,onChange:h}),O=E.useRef(null),V=_?!!_.closest("form"):!0,[U,k]=E.useState(new Set),G=Array.from(U).map(H=>H.props.value).join(";");return l.jsx(t2,{...S,children:l.jsxs(P5,{required:b,scope:e,trigger:_,onTriggerChange:w,valueNode:P,onValueNodeChange:I,valueNodeHasChildren:C,onValueNodeHasChildrenChange:M,contentId:Ju(),value:R,onValueChange:D,open:B,onOpenChange:A,dir:z,triggerPointerDownPosRef:O,disabled:v,children:[l.jsx(Pp.Provider,{scope:e,children:l.jsx(R5,{scope:n.__scopeSelect,onNativeOptionAdd:E.useCallback(H=>{k(Y=>new Set(Y).add(H))},[]),onNativeOptionRemove:E.useCallback(H=>{k(Y=>{const se=new Set(Y);return se.delete(H),se})},[]),children:t})}),V?l.jsxs(AI,{"aria-hidden":!0,required:b,tabIndex:-1,name:g,autoComplete:y,value:R,onChange:H=>D(H.target.value),disabled:v,children:[R===void 0?l.jsx("option",{value:""}):null,Array.from(U)]},G):null]})})};iI.displayName=gd;var oI="SelectTrigger",aI=E.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...i}=n,a=kp(t),c=Mo(oI,t),d=c.disabled||r,h=Ct(e,c.onTriggerChange),p=Rp(t),[g,y,v]=PI(S=>{const _=p().filter(I=>!I.disabled),w=_.find(I=>I.value===c.value),P=RI(_,S,w);P!==void 0&&c.onValueChange(P.value)}),b=()=>{d||(c.onOpenChange(!0),v())};return l.jsx(J1,{asChild:!0,...a,children:l.jsx(et.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":jI(c.value)?"":void 0,...i,ref:h,onClick:We(i.onClick,S=>{S.currentTarget.focus()}),onPointerDown:We(i.onPointerDown,S=>{const _=S.target;_.hasPointerCapture(S.pointerId)&&_.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&(b(),c.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)},S.preventDefault())}),onKeyDown:We(i.onKeyDown,S=>{const _=g.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&y(S.key),!(_&&S.key===" ")&&I5.includes(S.key)&&(b(),S.preventDefault())})})})});aI.displayName=oI;var lI="SelectValue",cI=E.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,children:a,placeholder:c="",...d}=n,h=Mo(lI,t),{onValueNodeHasChildrenChange:p}=h,g=a!==void 0,y=Ct(e,h.onValueNodeChange);return an(()=>{p(g)},[p,g]),l.jsx(et.span,{...d,ref:y,style:{pointerEvents:"none"},children:jI(h.value)?l.jsx(l.Fragment,{children:c}):a})});cI.displayName=lI;var O5="SelectIcon",uI=E.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...i}=n;return l.jsx(et.span,{"aria-hidden":!0,...i,ref:e,children:r||"â–¼"})});uI.displayName=O5;var D5="SelectPortal",dI=n=>l.jsx(YC,{asChild:!0,...n});dI.displayName=D5;var ka="SelectContent",hI=E.forwardRef((n,e)=>{const t=Mo(ka,n.__scopeSelect),[r,i]=E.useState();if(an(()=>{i(new DocumentFragment)},[]),!t.open){const a=r;return a?Oa.createPortal(l.jsx(fI,{scope:n.__scopeSelect,children:l.jsx(Pp.Slot,{scope:n.__scopeSelect,children:l.jsx("div",{children:n.children})})}),a):null}return l.jsx(pI,{...n,ref:e})});hI.displayName=ka;var ui=10,[fI,Fo]=Ec(ka),L5="SelectContentImpl",pI=E.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:c,side:d,sideOffset:h,align:p,alignOffset:g,arrowPadding:y,collisionBoundary:v,collisionPadding:b,sticky:S,hideWhenDetached:_,avoidCollisions:w,...P}=n,I=Mo(ka,t),[C,M]=E.useState(null),[z,B]=E.useState(null),A=Ct(e,ge=>M(ge)),[R,D]=E.useState(null),[O,V]=E.useState(null),U=Rp(t),[k,G]=E.useState(!1),H=E.useRef(!1);E.useEffect(()=>{if(C)return H6(C)},[C]),O6();const Y=E.useCallback(ge=>{const[we,...Ie]=U().map(nt=>nt.ref.current),[Me]=Ie.slice(-1),Xe=document.activeElement;for(const nt of ge)if(nt===Xe||(nt==null||nt.scrollIntoView({block:"nearest"}),nt===we&&z&&(z.scrollTop=0),nt===Me&&z&&(z.scrollTop=z.scrollHeight),nt==null||nt.focus(),document.activeElement!==Xe))return},[U,z]),se=E.useCallback(()=>Y([R,C]),[Y,R,C]);E.useEffect(()=>{k&&se()},[k,se]);const{onOpenChange:W,triggerPointerDownPosRef:ee}=I;E.useEffect(()=>{if(C){let ge={x:0,y:0};const we=Me=>{var Xe,nt;ge={x:Math.abs(Math.round(Me.pageX)-(((Xe=ee.current)==null?void 0:Xe.x)??0)),y:Math.abs(Math.round(Me.pageY)-(((nt=ee.current)==null?void 0:nt.y)??0))}},Ie=Me=>{ge.x<=10&&ge.y<=10?Me.preventDefault():C.contains(Me.target)||W(!1),document.removeEventListener("pointermove",we),ee.current=null};return ee.current!==null&&(document.addEventListener("pointermove",we),document.addEventListener("pointerup",Ie,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",we),document.removeEventListener("pointerup",Ie,{capture:!0})}}},[C,W,ee]),E.useEffect(()=>{const ge=()=>W(!1);return window.addEventListener("blur",ge),window.addEventListener("resize",ge),()=>{window.removeEventListener("blur",ge),window.removeEventListener("resize",ge)}},[W]);const[ae,$]=PI(ge=>{const we=U().filter(Xe=>!Xe.disabled),Ie=we.find(Xe=>Xe.ref.current===document.activeElement),Me=RI(we,ge,Ie);Me&&setTimeout(()=>Me.ref.current.focus())}),X=E.useCallback((ge,we,Ie)=>{const Me=!H.current&&!Ie;(I.value!==void 0&&I.value===we||Me)&&(D(ge),Me&&(H.current=!0))},[I.value]),oe=E.useCallback(()=>C==null?void 0:C.focus(),[C]),ue=E.useCallback((ge,we,Ie)=>{const Me=!H.current&&!Ie;(I.value!==void 0&&I.value===we||Me)&&V(ge)},[I.value]),Se=r==="popper"?Wy:mI,Ne=Se===Wy?{side:d,sideOffset:h,align:p,alignOffset:g,arrowPadding:y,collisionBoundary:v,collisionPadding:b,sticky:S,hideWhenDetached:_,avoidCollisions:w}:{};return l.jsx(fI,{scope:t,content:C,viewport:z,onViewportChange:B,itemRefCallback:X,selectedItem:R,onItemLeave:oe,itemTextRefCallback:ue,focusSelectedItem:se,selectedItemText:O,position:r,isPositioned:k,searchRef:ae,children:l.jsx(sI,{as:Gl,allowPinchZoom:!0,children:l.jsx(GC,{asChild:!0,trapped:I.open,onMountAutoFocus:ge=>{ge.preventDefault()},onUnmountAutoFocus:We(i,ge=>{var we;(we=I.trigger)==null||we.focus({preventScroll:!0}),ge.preventDefault()}),children:l.jsx(HC,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:ge=>ge.preventDefault(),onDismiss:()=>I.onOpenChange(!1),children:l.jsx(Se,{role:"listbox",id:I.contentId,"data-state":I.open?"open":"closed",dir:I.dir,onContextMenu:ge=>ge.preventDefault(),...P,...Ne,onPlaced:()=>G(!0),ref:A,style:{display:"flex",flexDirection:"column",outline:"none",...P.style},onKeyDown:We(P.onKeyDown,ge=>{const we=ge.ctrlKey||ge.altKey||ge.metaKey;if(ge.key==="Tab"&&ge.preventDefault(),!we&&ge.key.length===1&&$(ge.key),["ArrowUp","ArrowDown","Home","End"].includes(ge.key)){let Me=U().filter(Xe=>!Xe.disabled).map(Xe=>Xe.ref.current);if(["ArrowUp","End"].includes(ge.key)&&(Me=Me.slice().reverse()),["ArrowUp","ArrowDown"].includes(ge.key)){const Xe=ge.target,nt=Me.indexOf(Xe);Me=Me.slice(nt+1)}setTimeout(()=>Y(Me)),ge.preventDefault()}})})})})})})});pI.displayName=L5;var M5="SelectItemAlignedPosition",mI=E.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...i}=n,a=Mo(ka,t),c=Fo(ka,t),[d,h]=E.useState(null),[p,g]=E.useState(null),y=Ct(e,A=>g(A)),v=Rp(t),b=E.useRef(!1),S=E.useRef(!0),{viewport:_,selectedItem:w,selectedItemText:P,focusSelectedItem:I}=c,C=E.useCallback(()=>{if(a.trigger&&a.valueNode&&d&&p&&_&&w&&P){const A=a.trigger.getBoundingClientRect(),R=p.getBoundingClientRect(),D=a.valueNode.getBoundingClientRect(),O=P.getBoundingClientRect();if(a.dir!=="rtl"){const Xe=O.left-R.left,nt=D.left-Xe,bt=A.left-nt,kt=A.width+bt,Ot=Math.max(kt,R.width),lt=window.innerWidth-ui,Jt=db(nt,[ui,lt-Ot]);d.style.minWidth=kt+"px",d.style.left=Jt+"px"}else{const Xe=R.right-O.right,nt=window.innerWidth-D.right-Xe,bt=window.innerWidth-A.right-nt,kt=A.width+bt,Ot=Math.max(kt,R.width),lt=window.innerWidth-ui,Jt=db(nt,[ui,lt-Ot]);d.style.minWidth=kt+"px",d.style.right=Jt+"px"}const V=v(),U=window.innerHeight-ui*2,k=_.scrollHeight,G=window.getComputedStyle(p),H=parseInt(G.borderTopWidth,10),Y=parseInt(G.paddingTop,10),se=parseInt(G.borderBottomWidth,10),W=parseInt(G.paddingBottom,10),ee=H+Y+k+W+se,ae=Math.min(w.offsetHeight*5,ee),$=window.getComputedStyle(_),X=parseInt($.paddingTop,10),oe=parseInt($.paddingBottom,10),ue=A.top+A.height/2-ui,Se=U-ue,Ne=w.offsetHeight/2,ge=w.offsetTop+Ne,we=H+Y+ge,Ie=ee-we;if(we<=ue){const Xe=w===V[V.length-1].ref.current;d.style.bottom="0px";const nt=p.clientHeight-_.offsetTop-_.offsetHeight,bt=Math.max(Se,Ne+(Xe?oe:0)+nt+se),kt=we+bt;d.style.height=kt+"px"}else{const Xe=w===V[0].ref.current;d.style.top="0px";const bt=Math.max(ue,H+_.offsetTop+(Xe?X:0)+Ne)+Ie;d.style.height=bt+"px",_.scrollTop=we-ue+_.offsetTop}d.style.margin=`${ui}px 0`,d.style.minHeight=ae+"px",d.style.maxHeight=U+"px",r==null||r(),requestAnimationFrame(()=>b.current=!0)}},[v,a.trigger,a.valueNode,d,p,_,w,P,a.dir,r]);an(()=>C(),[C]);const[M,z]=E.useState();an(()=>{p&&z(window.getComputedStyle(p).zIndex)},[p]);const B=E.useCallback(A=>{A&&S.current===!0&&(C(),I==null||I(),S.current=!1)},[C,I]);return l.jsx(V5,{scope:t,contentWrapper:d,shouldExpandOnScrollRef:b,onScrollButtonChange:B,children:l.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:l.jsx(et.div,{...i,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});mI.displayName=M5;var F5="SelectPopperPosition",Wy=E.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:i=ui,...a}=n,c=kp(t);return l.jsx(Z1,{...c,...a,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Wy.displayName=F5;var[V5,bx]=Ec(ka,{}),Hy="SelectViewport",gI=E.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...i}=n,a=Fo(Hy,t),c=bx(Hy,t),d=Ct(e,a.onViewportChange),h=E.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(Pp.Slot,{scope:t,children:l.jsx(et.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:d,style:{position:"relative",flex:1,overflow:"auto",...i.style},onScroll:We(i.onScroll,p=>{const g=p.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:v}=c;if(v!=null&&v.current&&y){const b=Math.abs(h.current-g.scrollTop);if(b>0){const S=window.innerHeight-ui*2,_=parseFloat(y.style.minHeight),w=parseFloat(y.style.height),P=Math.max(_,w);if(P<S){const I=P+b,C=Math.min(S,I),M=I-C;y.style.height=C+"px",y.style.bottom==="0px"&&(g.scrollTop=M>0?M:0,y.style.justifyContent="flex-end")}}}h.current=g.scrollTop})})})]})});gI.displayName=Hy;var yI="SelectGroup",[U5,z5]=Ec(yI),$5=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=Ju();return l.jsx(U5,{scope:t,id:i,children:l.jsx(et.div,{role:"group","aria-labelledby":i,...r,ref:e})})});$5.displayName=yI;var vI="SelectLabel",xI=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=z5(vI,t);return l.jsx(et.div,{id:i.id,...r,ref:e})});xI.displayName=vI;var Wf="SelectItem",[B5,wI]=Ec(Wf),_I=E.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:i=!1,textValue:a,...c}=n,d=Mo(Wf,t),h=Fo(Wf,t),p=d.value===r,[g,y]=E.useState(a??""),[v,b]=E.useState(!1),S=Ct(e,P=>{var I;return(I=h.itemRefCallback)==null?void 0:I.call(h,P,r,i)}),_=Ju(),w=()=>{i||(d.onValueChange(r),d.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(B5,{scope:t,value:r,disabled:i,textId:_,isSelected:p,onItemTextChange:E.useCallback(P=>{y(I=>I||((P==null?void 0:P.textContent)??"").trim())},[]),children:l.jsx(Pp.ItemSlot,{scope:t,value:r,disabled:i,textValue:g,children:l.jsx(et.div,{role:"option","aria-labelledby":_,"data-highlighted":v?"":void 0,"aria-selected":p&&v,"data-state":p?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...c,ref:S,onFocus:We(c.onFocus,()=>b(!0)),onBlur:We(c.onBlur,()=>b(!1)),onPointerUp:We(c.onPointerUp,w),onPointerMove:We(c.onPointerMove,P=>{var I;i?(I=h.onItemLeave)==null||I.call(h):P.currentTarget.focus({preventScroll:!0})}),onPointerLeave:We(c.onPointerLeave,P=>{var I;P.currentTarget===document.activeElement&&((I=h.onItemLeave)==null||I.call(h))}),onKeyDown:We(c.onKeyDown,P=>{var C;((C=h.searchRef)==null?void 0:C.current)!==""&&P.key===" "||(j5.includes(P.key)&&w(),P.key===" "&&P.preventDefault())})})})})});_I.displayName=Wf;var gu="SelectItemText",EI=E.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,...a}=n,c=Mo(gu,t),d=Fo(gu,t),h=wI(gu,t),p=k5(gu,t),[g,y]=E.useState(null),v=Ct(e,P=>y(P),h.onItemTextChange,P=>{var I;return(I=d.itemTextRefCallback)==null?void 0:I.call(d,P,h.value,h.disabled)}),b=g==null?void 0:g.textContent,S=E.useMemo(()=>l.jsx("option",{value:h.value,disabled:h.disabled,children:b},h.value),[h.disabled,h.value,b]),{onNativeOptionAdd:_,onNativeOptionRemove:w}=p;return an(()=>(_(S),()=>w(S)),[_,w,S]),l.jsxs(l.Fragment,{children:[l.jsx(et.span,{id:h.textId,...a,ref:v}),h.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Oa.createPortal(a.children,c.valueNode):null]})});EI.displayName=gu;var bI="SelectItemIndicator",SI=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return wI(bI,t).isSelected?l.jsx(et.span,{"aria-hidden":!0,...r,ref:e}):null});SI.displayName=bI;var Ky="SelectScrollUpButton",NI=E.forwardRef((n,e)=>{const t=Fo(Ky,n.__scopeSelect),r=bx(Ky,n.__scopeSelect),[i,a]=E.useState(!1),c=Ct(e,r.onScrollButtonChange);return an(()=>{if(t.viewport&&t.isPositioned){let d=function(){const p=h.scrollTop>0;a(p)};const h=t.viewport;return d(),h.addEventListener("scroll",d),()=>h.removeEventListener("scroll",d)}},[t.viewport,t.isPositioned]),i?l.jsx(CI,{...n,ref:c,onAutoScroll:()=>{const{viewport:d,selectedItem:h}=t;d&&h&&(d.scrollTop=d.scrollTop-h.offsetHeight)}}):null});NI.displayName=Ky;var Gy="SelectScrollDownButton",TI=E.forwardRef((n,e)=>{const t=Fo(Gy,n.__scopeSelect),r=bx(Gy,n.__scopeSelect),[i,a]=E.useState(!1),c=Ct(e,r.onScrollButtonChange);return an(()=>{if(t.viewport&&t.isPositioned){let d=function(){const p=h.scrollHeight-h.clientHeight,g=Math.ceil(h.scrollTop)<p;a(g)};const h=t.viewport;return d(),h.addEventListener("scroll",d),()=>h.removeEventListener("scroll",d)}},[t.viewport,t.isPositioned]),i?l.jsx(CI,{...n,ref:c,onAutoScroll:()=>{const{viewport:d,selectedItem:h}=t;d&&h&&(d.scrollTop=d.scrollTop+h.offsetHeight)}}):null});TI.displayName=Gy;var CI=E.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...i}=n,a=Fo("SelectScrollButton",t),c=E.useRef(null),d=Rp(t),h=E.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return E.useEffect(()=>()=>h(),[h]),an(()=>{var g;const p=d().find(y=>y.ref.current===document.activeElement);(g=p==null?void 0:p.ref.current)==null||g.scrollIntoView({block:"nearest"})},[d]),l.jsx(et.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:We(i.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:We(i.onPointerMove,()=>{var p;(p=a.onItemLeave)==null||p.call(a),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:We(i.onPointerLeave,()=>{h()})})}),q5="SelectSeparator",II=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return l.jsx(et.div,{"aria-hidden":!0,...r,ref:e})});II.displayName=q5;var Qy="SelectArrow",W5=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=kp(t),a=Mo(Qy,t),c=Fo(Qy,t);return a.open&&c.position==="popper"?l.jsx(eS,{...i,...r,ref:e}):null});W5.displayName=Qy;function jI(n){return n===""||n===void 0}var AI=E.forwardRef((n,e)=>{const{value:t,...r}=n,i=E.useRef(null),a=Ct(e,i),c=gC(t);return E.useEffect(()=>{const d=i.current,h=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(h,"value").set;if(c!==t&&g){const y=new Event("change",{bubbles:!0});g.call(d,t),d.dispatchEvent(y)}},[c,t]),l.jsx(Qu,{asChild:!0,children:l.jsx("select",{...r,ref:a,defaultValue:t})})});AI.displayName="BubbleSelect";function PI(n){const e=xn(n),t=E.useRef(""),r=E.useRef(0),i=E.useCallback(c=>{const d=t.current+c;e(d),function h(p){t.current=p,window.clearTimeout(r.current),p!==""&&(r.current=window.setTimeout(()=>h(""),1e3))}(d)},[e]),a=E.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,i,a]}function RI(n,e,t){const i=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let c=H5(n,Math.max(a,0));i.length===1&&(c=c.filter(p=>p!==t));const h=c.find(p=>p.textValue.toLowerCase().startsWith(i.toLowerCase()));return h!==t?h:void 0}function H5(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var K5=iI,kI=aI,G5=cI,Q5=uI,Y5=dI,OI=hI,X5=gI,DI=xI,LI=_I,J5=EI,Z5=SI,MI=NI,FI=TI,VI=II;const e9=K5,t9=G5,UI=E.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(kI,{ref:r,className:at("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,l.jsx(Q5,{asChild:!0,children:l.jsx(g1,{className:"h-4 w-4 opacity-50"})})]}));UI.displayName=kI.displayName;const zI=E.forwardRef(({className:n,...e},t)=>l.jsx(MI,{ref:t,className:at("flex cursor-default items-center justify-center py-1",n),...e,children:l.jsx(fP,{className:"h-4 w-4"})}));zI.displayName=MI.displayName;const $I=E.forwardRef(({className:n,...e},t)=>l.jsx(FI,{ref:t,className:at("flex cursor-default items-center justify-center py-1",n),...e,children:l.jsx(g1,{className:"h-4 w-4"})}));$I.displayName=FI.displayName;const BI=E.forwardRef(({className:n,children:e,position:t="popper",...r},i)=>l.jsx(Y5,{children:l.jsxs(OI,{ref:i,className:at("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[l.jsx(zI,{}),l.jsx(X5,{className:at("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),l.jsx($I,{})]})}));BI.displayName=OI.displayName;const n9=E.forwardRef(({className:n,...e},t)=>l.jsx(DI,{ref:t,className:at("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));n9.displayName=DI.displayName;const qI=E.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(LI,{ref:r,className:at("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(Z5,{children:l.jsx(hP,{className:"h-4 w-4"})})}),l.jsx(J5,{children:e})]}));qI.displayName=LI.displayName;const r9=E.forwardRef(({className:n,...e},t)=>l.jsx(VI,{ref:t,className:at("-mx-1 my-1 h-px bg-muted",n),...e}));r9.displayName=VI.displayName;function WI({lectureId:n,onClose:e,onSave:t}){const[r,i]=E.useState({title:"",description:"",fileUrl:"",fileType:"",fileSize:""}),[a,c]=E.useState(!1),d=["PDF","DOCX","PPTX","XLSX","TXT","ZIP","MP3","MP4","JPG","PNG"],h=async p=>{p.preventDefault(),c(!0);try{const g={...r,id:`file_${Date.now()}`,lectureId:n,uploadedAt:new Date,uploadedBy:"Current User"};t(g)}catch(g){console.error("Error saving file:",g)}finally{c(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ne,{variant:"ghost",onClick:e,children:[l.jsx($s,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Add File"}),l.jsx("p",{className:"text-muted-foreground",children:"Add a file resource to the lecture"})]})]})}),l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsxs(Ye,{className:"flex items-center gap-2",children:[l.jsx(Ms,{className:"h-5 w-5 text-blue-600"}),"File Information"]}),l.jsx(Tt,{children:"Upload or link to educational files"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"title",children:"File Title *"}),l.jsx(De,{id:"title",placeholder:"e.g., Anatomy Reference Guide",value:r.title,onChange:p=>i(g=>({...g,title:p.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"description",children:"Description"}),l.jsx(_i,{id:"description",placeholder:"Describe the file content...",value:r.description,onChange:p=>i(g=>({...g,description:p.target.value})),rows:3})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"fileType",children:"File Type *"}),l.jsxs(e9,{value:r.fileType,onValueChange:p=>i(g=>({...g,fileType:p})),children:[l.jsx(UI,{children:l.jsx(t9,{placeholder:"Select file type"})}),l.jsx(BI,{children:d.map(p=>l.jsx(qI,{value:p,children:p},p))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"fileSize",children:"File Size"}),l.jsx(De,{id:"fileSize",placeholder:"e.g., 2.5 MB",value:r.fileSize,onChange:p=>i(g=>({...g,fileSize:p.target.value}))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"fileUrl",children:"File URL *"}),l.jsx(De,{id:"fileUrl",placeholder:"https://example.com/file.pdf or /uploads/file.pdf",value:r.fileUrl,onChange:p=>i(g=>({...g,fileUrl:p.target.value})),required:!0}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"You can upload to Firebase Storage or use external links"})]})]})]}),r.title&&l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsx(Ye,{children:"Preview"}),l.jsx(Tt,{children:"How the file will appear in the lecture"})]}),l.jsx(xe,{children:l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Ms,{className:"h-8 w-8 text-blue-600"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-medium",children:r.title}),r.description&&l.jsx("p",{className:"text-sm text-muted-foreground",children:r.description}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.fileType&&l.jsx(on,{variant:"secondary",children:r.fileType}),r.fileSize&&l.jsx(on,{variant:"outline",children:r.fileSize})]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(ne,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(ne,{type:"submit",disabled:a,children:[l.jsx(Po,{className:"h-4 w-4 mr-2"}),a?"Adding...":"Add File"]})]})]})]})}function HI({lectureId:n,onClose:e,onSave:t}){const[r,i]=E.useState({title:"",description:"",url:"",duration:"",thumbnailUrl:"",platform:"YouTube"}),[a,c]=E.useState(!1),d=async y=>{y.preventDefault(),c(!0);try{const v={...r,id:`video_${Date.now()}`,lectureId:n,uploadedAt:new Date,uploadedBy:"Current User"};t(v)}catch(v){console.error("Error saving video:",v)}finally{c(!1)}},h=y=>{const v=y.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);return v?v[1]:null},p=y=>{const v=h(y);return v?`https://img.youtube.com/vi/${v}/maxresdefault.jpg`:""},g=y=>{i(v=>({...v,url:y,thumbnailUrl:p(y)}))};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ne,{variant:"ghost",onClick:e,children:[l.jsx($s,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Add Video"}),l.jsx("p",{className:"text-muted-foreground",children:"Add a video resource to the lecture"})]})]})}),l.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsxs(Ye,{className:"flex items-center gap-2",children:[l.jsx(Is,{className:"h-5 w-5 text-green-600"}),"Video Information"]}),l.jsx(Tt,{children:"Add YouTube videos or other video links"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"title",children:"Video Title *"}),l.jsx(De,{id:"title",placeholder:"e.g., Introduction to Human Anatomy",value:r.title,onChange:y=>i(v=>({...v,title:y.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"description",children:"Description"}),l.jsx(_i,{id:"description",placeholder:"Describe the video content...",value:r.description,onChange:y=>i(v=>({...v,description:y.target.value})),rows:3})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"url",children:"Video URL *"}),l.jsx(De,{id:"url",placeholder:"https://youtube.com/watch?v=... or https://vimeo.com/...",value:r.url,onChange:y=>g(y.target.value),required:!0}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Supports YouTube, Vimeo, and direct video links"})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"duration",children:"Duration"}),l.jsx(De,{id:"duration",placeholder:"e.g., 45:30",value:r.duration,onChange:y=>i(v=>({...v,duration:y.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"platform",children:"Platform"}),l.jsx(De,{id:"platform",value:r.platform,onChange:y=>i(v=>({...v,platform:y.target.value})),disabled:!0})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"thumbnailUrl",children:"Thumbnail URL"}),l.jsx(De,{id:"thumbnailUrl",placeholder:"Auto-generated for YouTube videos",value:r.thumbnailUrl,onChange:y=>i(v=>({...v,thumbnailUrl:y.target.value}))})]})]})]}),r.title&&l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsx(Ye,{children:"Preview"}),l.jsx(Tt,{children:"How the video will appear in the lecture"})]}),l.jsx(xe,{children:l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"relative",children:[r.thumbnailUrl?l.jsx("img",{src:r.thumbnailUrl,alt:r.title,className:"w-24 h-16 object-cover rounded"}):l.jsx("div",{className:"w-24 h-16 bg-gray-200 rounded flex items-center justify-center",children:l.jsx(Jg,{className:"h-6 w-6 text-gray-400"})}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx(Is,{className:"h-8 w-8 text-white opacity-80"})})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-medium",children:r.title}),r.description&&l.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:r.description}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.duration&&l.jsxs(on,{variant:"secondary",className:"text-xs",children:[l.jsx(pf,{className:"h-3 w-3 mr-1"}),r.duration]}),l.jsxs(on,{variant:"outline",className:"text-xs",children:[l.jsx(yP,{className:"h-3 w-3 mr-1"}),r.platform]})]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(ne,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(ne,{type:"submit",disabled:a,children:[l.jsx(Po,{className:"h-4 w-4 mr-2"}),a?"Adding...":"Add Video"]})]})]})]})}function Op({subjectId:n,subjectName:e,yearType:t,onClose:r,onSave:i}){const[a,c]=E.useState({name:"",description:"",order:1,imageUrl:""}),[d,h]=E.useState(!1),p=async g=>{g.preventDefault(),h(!0);try{const y={...a,subjectId:n,createdAt:new Date,uploadedBy:"Current User"};i(y)}catch(y){console.error("Error saving lecture:",y)}finally{h(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ne,{variant:"ghost",onClick:r,children:[l.jsx($s,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Add Lecture"}),l.jsxs("p",{className:"text-muted-foreground",children:["Add a new lecture to ",e]})]})]})}),l.jsxs("form",{onSubmit:p,className:"space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsxs(Ye,{className:"flex items-center gap-2",children:[t==="basic"?l.jsx(va,{className:"h-5 w-5 text-blue-600"}):l.jsx(xa,{className:"h-5 w-5 text-red-600"}),"Lecture Information"]}),l.jsx(Tt,{children:"Basic information about the lecture"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"name",children:"Lecture Name *"}),l.jsx(De,{id:"name",placeholder:"e.g., Introduction to Cell Biology",value:a.name,onChange:g=>c(y=>({...y,name:g.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"description",children:"Description"}),l.jsx(_i,{id:"description",placeholder:"Describe what this lecture covers...",value:a.description,onChange:g=>c(y=>({...y,description:g.target.value})),rows:4})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"order",children:"Order"}),l.jsx(De,{id:"order",type:"number",min:"1",value:a.order,onChange:g=>c(y=>({...y,order:parseInt(g.target.value)||1}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),l.jsx(De,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:a.imageUrl,onChange:g=>c(y=>({...y,imageUrl:g.target.value}))})]})]})]})]}),a.name&&l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsx(Ye,{children:"Preview"}),l.jsxs(Tt,{children:["How the lecture will appear in ",e]})]}),l.jsx(xe,{children:l.jsx("div",{className:"p-4 border rounded-lg bg-secondary/20",children:l.jsxs("div",{className:"flex items-start gap-3",children:[a.imageUrl?l.jsx("img",{src:a.imageUrl,alt:a.name,className:"w-16 h-16 object-cover rounded",onError:g=>{g.currentTarget.style.display="none"}}):l.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center",children:l.jsx(os,{className:"h-6 w-6 text-gray-400"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-lg",children:a.name}),a.description&&l.jsx("p",{className:"text-sm text-muted-foreground",children:a.description}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Lecture ",a.order," â€¢ ",e]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(ne,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),l.jsxs(ne,{type:"submit",disabled:d,children:[l.jsx(Po,{className:"h-4 w-4 mr-2"}),d?"Adding...":"Add Lecture"]})]})]})]})}async function Er(n){let e,t;const r="".replace(/\/$/,"");try{const I=await fetch(`${r}/api/cloudinary/config`);if(I.ok)try{const C=await I.json();e=C.cloudName||e,t=C.uploadPreset||C.upload_preset||t}catch{const C=I.headers.get("x-cloudinary-cloudname"),M=I.headers.get("x-cloudinary-upload-preset");C&&(e=e||C),M&&(t=t||M)}}catch{}if(!e)try{const I=localStorage.getItem("cloudinary.cloudName"),C=localStorage.getItem("cloudinary.uploadPreset");I&&(e=I,t=t||C||t)}catch{}if(!e)throw new Error("Cloudinary cloud name is not configured. Set VITE_CLOUDINARY_CLOUD_NAME in your environment or provide server config.");const i=`https://api.cloudinary.com/v1_1/${e}/upload`;try{const I=await Bg(n);if(I&&typeof I=="string"&&I.startsWith("http"))return I}catch(I){const C=String((I==null?void 0:I.message)||I||"");console.warn("Server upload failed, falling back to client upload:",C)}async function a(I){if(I.bodyUsed)throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.");try{const C=I.clone();try{return{json:await C.json(),text:null}}catch{}}catch{if(I.bodyUsed)throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.")}try{const C=await I.text();try{return{json:JSON.parse(C),text:C}}catch{return{json:null,text:C}}}catch(C){throw new Error("Could not read response body: "+String(C))}}async function c(I,C){const M=async(B,A)=>{const R=await fetch(B,A),D=await a(R).catch(O=>{throw O});return{res:R,body:D}},z=typeof I=="string"?I:I.url;try{return await M(z,C)}catch(B){const A=String((B==null?void 0:B.message)||B||"").toLowerCase();if(A.includes("response body already read")||A.includes("body already read")){const R=z+(z.includes("?")?`&_retry=${Date.now()}`:`?_retry=${Date.now()}`);try{return await M(R,C)}catch{}}if(A.includes("failed to fetch")||A.includes("networkerror")||A.includes("network request failed")||A.includes("script error")||A.includes("response body already read")||A.includes("body already read"))try{return await(async()=>await new Promise((R,D)=>{const O=new XMLHttpRequest;let V=C&&C.method||"GET",U=!1;try{if(O.open(V,z,!0),C&&C.headers){const k=C.headers;Object.keys(k).forEach(G=>{try{O.setRequestHeader(G,k[G])}catch{}})}if(O.onreadystatechange=()=>{if(O.readyState!==4)return;const k=O.status||0,G={};(O.getAllResponseHeaders()||"").split(`\r
`).forEach(ae=>{const $=ae.indexOf(":");if($>0){const X=ae.substring(0,$).trim().toLowerCase(),oe=ae.substring($+1).trim();G[X]=oe}});const Y={ok:k>=200&&k<400,status:k,headers:{get:ae=>G[ae.toLowerCase()]||null}},se=O.responseText;let W=null;try{W=se?JSON.parse(se):null}catch{W=null}R({res:Y,body:{json:W,text:se}})},O.onerror=()=>D(new Error("XHR network error")),O.ontimeout=()=>D(new Error("XHR timeout")),C&&C.body)try{if(C.body instanceof FormData)U=!0,O.send(C.body);else if(typeof C.body=="string")O.send(C.body);else try{O.send(JSON.stringify(C.body))}catch{O.send(String(C.body))}}catch(k){D(k)}else O.send()}catch(k){D(k)}}))()}catch{}throw B}}if(t){const I=new FormData;I.append("file",n),I.append("upload_preset",t);const{res:C,body:M}=await c(i,{method:"POST",body:I});if(!C.ok){const z=M!=null&&M.json?JSON.stringify(M.json):(M==null?void 0:M.text)||"";throw new Error(`Cloudinary upload failed: ${C.status} ${z}`)}if(M.json&&(M.json.secure_url||M.json.url))return M.json.secure_url||M.json.url;if(M.text&&typeof M.text=="string"&&M.text.startsWith("http"))return M.text;throw new Error("Cloudinary upload returned unexpected response.")}const d=(()=>{try{return localStorage.getItem("cloudinary.apiKey")}catch{return null}})()||null;let h,p;try{const I=await c(`${r}/api/cloudinary/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:d})});h=I.res,p=I.body}catch(I){const C=String((I==null?void 0:I.message)||I||"");if(C.toLowerCase().includes("response body already read")||C.toLowerCase().includes("body already read")){try{const M=await fetch(`${r}/api/cloudinary/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:d})}),z=M.headers.get("x-cloudinary-signature"),B=M.headers.get("x-cloudinary-timestamp"),A=M.headers.get("x-cloudinary-apikey"),R=M.headers.get("x-cloudinary-cloudname"),D=M.headers.get("x-cloudinary-upload-preset");if(z&&B){const O=A||d||null,V=z,U=Number(B);R&&(e=e||R);const k=new FormData;k.append("file",n),O&&k.append("api_key",O),k.append("timestamp",String(U)),k.append("signature",V);const{res:G,body:H}=await c(i,{method:"POST",body:k});if(!G.ok){const Y=H!=null&&H.json?JSON.stringify(H.json):(H==null?void 0:H.text)||"",se=(Y||"").toLowerCase();if(se.includes("missing required parameter - api_key")||se.includes("missing required parameter - api key")||se.includes("missing required parameter 'api_key'")){const W=d||(()=>{try{return localStorage.getItem("cloudinary.apiKey")}catch{return null}})();if(W){const ee=new FormData;ee.append("file",n),ee.append("api_key",W),ee.append("timestamp",String(U)),ee.append("signature",V);const{res:ae,body:$}=await c(i,{method:"POST",body:ee});if(!ae.ok){const X=$!=null&&$.json?JSON.stringify($.json):($==null?void 0:$.text)||"";throw new Error(`Cloudinary signed upload retry failed: ${ae.status} ${X}`)}if($.json&&($.json.secure_url||$.json.url))return $.json.secure_url||$.json.url;if($.text&&typeof $.text=="string"&&$.text.startsWith("http"))return $.text;throw new Error("Cloudinary signed upload retry returned unexpected response.")}if(t){const ee=new FormData;ee.append("file",n),ee.append("upload_preset",t);const ae=await fetch(i,{method:"POST",body:ee});if(!ae.ok){const oe=await ae.text().catch(()=>"");throw new Error(`Cloudinary unsigned fallback failed: ${ae.status} ${oe}`)}const $=await ae.json().catch(()=>null);if($&&($.secure_url||$.url))return $.secure_url||$.url;const X=await ae.text().catch(()=>"");if(X&&X.startsWith("http"))return X;throw new Error("Cloudinary unsigned fallback returned unexpected response.")}}throw new Error(`Cloudinary signed upload failed: ${G.status} ${Y}`)}if(H.json&&(H.json.secure_url||H.json.url))return H.json.secure_url||H.json.url;if(H.text&&typeof H.text=="string"&&H.text.startsWith("http"))return H.text;throw new Error("Cloudinary signed upload returned unexpected response.")}if(D){const O=new FormData;O.append("file",n),O.append("upload_preset",D);const V=await fetch(i,{method:"POST",body:O});if(!V.ok){const G=await V.text().catch(()=>"");throw new Error(`Cloudinary upload fallback failed: ${V.status} ${G}`)}const U=await V.json().catch(()=>null);if(U&&(U.secure_url||U.url))return U.secure_url||U.url;const k=await V.text().catch(()=>"");if(k&&k.startsWith("http"))return k;throw new Error("Cloudinary fallback upload returned unexpected response.")}}catch{}try{const M=await Bg(n);if(M&&typeof M=="string"&&M.startsWith("http"))return M}catch{}throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.")}throw I}if(!h.ok){const I=p!=null&&p.json?JSON.stringify(p.json):(p==null?void 0:p.text)||"";throw new Error(`Cloudinary signing failed: ${h.status} ${I}`)}const g=p.json||{},{signature:y,apiKey:v,timestamp:b}=g,S=v||d||null;if(!y||!b)throw new Error("Cloudinary signing endpoint returned invalid data.");if(!S){if(t){const I=new FormData;I.append("file",n),I.append("upload_preset",t);const{res:C,body:M}=await c(i,{method:"POST",body:I});if(!C.ok){const z=M!=null&&M.json?JSON.stringify(M.json):(M==null?void 0:M.text)||"";throw new Error(`Cloudinary unsigned upload (preset) failed: ${C.status} ${z}`)}if(M.json&&(M.json.secure_url||M.json.url))return M.json.secure_url||M.json.url;if(M.text&&typeof M.text=="string"&&M.text.startsWith("http"))return M.text;throw new Error("Cloudinary unsigned upload (preset) returned unexpected response.")}try{const I=await Bg(n);if(I&&typeof I=="string"&&I.startsWith("http"))return I}catch{}throw new Error("Cloudinary signing did not return an API key and no unsigned preset is configured. Set CLOUDINARY_API_KEY on the server, or set CLOUDINARY_UPLOAD_PRESET, or set a public API key in localStorage (for testing).")}const _=new FormData;_.append("file",n),_.append("api_key",S),_.append("timestamp",String(b)),_.append("signature",y);const{res:w,body:P}=await c(i,{method:"POST",body:_});if(!w.ok){const I=P!=null&&P.json?JSON.stringify(P.json):(P==null?void 0:P.text)||"",C=(I||"").toLowerCase();if(C.includes("missing required parameter - api_key")||C.includes("missing required parameter - api key")||C.includes("missing required parameter 'api_key'")){const M=d||(()=>{try{return localStorage.getItem("cloudinary.apiKey")}catch{return null}})();if(M){const z=new FormData;z.append("file",n),z.append("api_key",M),z.append("timestamp",String(b)),z.append("signature",y);const{res:B,body:A}=await c(i,{method:"POST",body:z});if(!B.ok){const R=A!=null&&A.json?JSON.stringify(A.json):(A==null?void 0:A.text)||"";throw new Error(`Cloudinary signed upload retry failed: ${B.status} ${R}`)}if(A.json&&(A.json.secure_url||A.json.url))return A.json.secure_url||A.json.url;if(A.text&&typeof A.text=="string"&&A.text.startsWith("http"))return A.text;throw new Error("Cloudinary signed upload retry returned unexpected response.")}if(t){const z=new FormData;z.append("file",n),z.append("upload_preset",t);const B=await fetch(i,{method:"POST",body:z});if(!B.ok){const D=await B.text().catch(()=>"");throw new Error(`Cloudinary unsigned fallback failed: ${B.status} ${D}`)}const A=await B.json().catch(()=>null);if(A&&(A.secure_url||A.url))return A.secure_url||A.url;const R=await B.text().catch(()=>"");if(R&&R.startsWith("http"))return R;throw new Error("Cloudinary unsigned fallback returned unexpected response.")}}throw new Error(`Cloudinary signed upload failed: ${w.status} ${I}`)}if(P.json&&(P.json.secure_url||P.json.url))return P.json.secure_url||P.json.url;if(P.text&&typeof P.text=="string"&&P.text.startsWith("http"))return P.text;throw new Error("Cloudinary signed upload returned unexpected response.")}async function Bg(n){const e=await new Promise((t,r)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>r(new Error("Failed to read file")),i.readAsDataURL(n)});return await new Promise((t,r)=>{try{const i=new XMLHttpRequest;i.open("POST",`${API_BASE}/api/cloudinary/upload`,!0),i.setRequestHeader("Content-Type","application/json"),i.onreadystatechange=()=>{if(i.readyState!==4)return;const a=i.status||0,c=i.responseText||"";if(a<200||a>=400){let d=c;try{const h=c?JSON.parse(c):null;h&&h.error&&(d=h.error)}catch{}return r(new Error(`Server upload failed: ${a} ${d}`))}try{const d=c?JSON.parse(c):{};return d&&(d.secure_url||d.url)?t(d.secure_url||d.url):r(new Error("Server upload returned unexpected response"))}catch{return r(new Error("Server upload returned non-JSON response"))}},i.onerror=()=>r(new Error("Server upload XHR error")),i.send(JSON.stringify({file:e,filename:n.name}))}catch(i){r(i)}}).catch(async t=>{try{const r=String((t==null?void 0:t.message)||"").toLowerCase();if(r.includes("cloudinary not configured")||r.includes("404")||r.includes("server upload failed"))return await new Promise((i,a)=>{try{const c=new XMLHttpRequest;c.open("POST",`${API_BASE}/api/imagekit/upload`,!0),c.setRequestHeader("Content-Type","application/json"),c.onreadystatechange=()=>{if(c.readyState!==4)return;const d=c.status||0,h=c.responseText||"";if(d<200||d>=400){let p=h;try{const g=h?JSON.parse(h):null;g&&g.error&&(p=g.error)}catch{}return a(new Error(`ImageKit server upload failed: ${d} ${p}`))}try{const p=h?JSON.parse(h):{};return p&&(p.url||p.filePath)?i(p.url||p.filePath):a(new Error("ImageKit server upload returned unexpected response"))}catch{return a(new Error("ImageKit server upload returned non-JSON response"))}},c.onerror=()=>a(new Error("ImageKit server upload XHR error")),c.send(JSON.stringify({file:e,filename:n.name}))}catch(c){a(c)}})}catch{}throw t})}function ba(n,e,t){try{n&&localStorage.setItem("cloudinary.cloudName",n),e&&localStorage.setItem("cloudinary.uploadPreset",e),t&&localStorage.setItem("cloudinary.apiKey",t)}catch(r){console.warn("Could not persist Cloudinary config to localStorage",r)}}async function Sb(n,e){if(!n)throw new Error("No URL provided");return await new Promise((t,r)=>{try{const i=new XMLHttpRequest;i.open("POST",`${API_BASE}/api/cloudinary/upload`,!0),i.setRequestHeader("Content-Type","application/json"),i.onreadystatechange=()=>{if(i.readyState!==4)return;const a=i.status||0,c=i.responseText||"";if(a<200||a>=400){let d=c;try{const h=c?JSON.parse(c):null;h&&h.error&&(d=h.error)}catch{}return r(new Error(`Server upload failed: ${a} ${d}`))}try{const d=c?JSON.parse(c):{};return d&&(d.secure_url||d.url)?t(d.secure_url||d.url):r(new Error("Server upload returned unexpected response"))}catch{return r(new Error("Server upload returned non-JSON response"))}},i.onerror=()=>r(new Error("Server upload XHR error")),i.send(JSON.stringify({file:n,filename:e||"remote"}))}catch(i){r(new Error("Failed to call server upload endpoint: "+String(i)))}})}const s9="".replace(/\/$/,"");async function i9(n,e){const t=await fetch(n,e);let r=null,i="";try{r=await t.json()}catch{try{i=await t.text()}catch{}}return{res:t,json:r,text:i}}async function Sa(n,e){let t;typeof n=="string"?t=n:t=await new Promise((d,h)=>{const p=new FileReader;p.onload=()=>d(p.result),p.onerror=()=>h(new Error("Failed to read file")),p.readAsDataURL(n)});const r=`${s9}/api/imagekit/upload`,{res:i,json:a,text:c}=await i9(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:t,filename:e})});if(!i.ok){const d=a?JSON.stringify(a):c||"";throw new Error(`ImageKit server upload failed: ${i.status} ${d}`)}if(a&&(a.url||a.filePath||a.name))return a.url||a.filePath||a.name;throw new Error("ImageKit server upload returned unexpected response.")}function o9(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[i,a]=E.useState(!1),[c,d]=E.useState(!1),[h,p]=E.useState(!1),[g,y]=E.useState(!1),[v,b]=E.useState(!1),[S,_]=E.useState(null),[w,P]=E.useState(null),[I,C]=E.useState(null),[M,z]=E.useState("basic"),[B,A]=E.useState({}),[R,D]=E.useState(null),[O,V]=E.useState(""),[U,k]=E.useState(""),G=(be,Ve)=>{A(Te=>{var He;return{...Te,[be]:{videos:!1,files:!1,quizzes:!1,...Te[be]||{},[Ve]:!((He=Te[be])!=null&&He[Ve])}}})},{years:H,batches:Y,loading:se,error:W,connectionStatus:ee,retryConnection:ae,updateYear:$,updateBatch:X,createSubject:oe,createLecture:ue,createYear:Se,deleteLecture:Ne,deleteSubject:ge,addVideo:we,addFile:Ie,addQuiz:Me}=_c(),{news:Xe}=yx(),nt=(be,Ve)=>{C(be),P(Ve),r(null),a(!0)},bt=(be,Ve)=>{console.log("ðŸ”„ Opening subject form for year:",be.yearNumber,"type:",Ve),_({id:be.id,number:be.yearNumber}),z(Ve),d(!0)},kt=(be,Ve)=>{C(be),z(Ve),b(!0)},Ot=(be,Ve)=>{C(be),P(Ve),p(!0)},lt=(be,Ve)=>{C(be),P(Ve),y(!0)};if(i)return l.jsx(BC,{quiz:t,onClose:()=>{a(!1),r(null),P(null)},onSave:async be=>{I!=null&&I.id&&w&&await Me(I.id,w,{title:be.title,description:be.description,questions:be.questions||[],timeLimit:be.timeLimit,passingScore:be.passingScore}),a(!1),r(null),P(null)}});if(console.log("ðŸ” Render check - isSubjectFormOpen:",c,"selectedYear:",S),c)return console.log("ðŸ“ Rendering SubjectForm"),l.jsx(qC,{year:S==null?void 0:S.number,yearType:M,onClose:()=>{d(!1),_(null)},onSave:async be=>{try{await oe({...be,yearId:(S==null?void 0:S.id)||"",order:1}),d(!1),_(null)}catch(Ve){console.error("Error saving subject:",Ve),alert("Failed to save subject. Please try again.")}}});if(v)return l.jsx(Op,{subjectId:I==null?void 0:I.id,subjectName:I==null?void 0:I.name,yearType:M,onClose:()=>{b(!1),C(null)},onSave:async be=>{try{await ue(be),b(!1),C(null)}catch(Ve){console.error("Error saving lecture:",Ve),alert("Failed to save lecture. Please try again.")}}});if(h)return l.jsx(WI,{lectureId:w,onClose:()=>{p(!1),P(null)},onSave:async be=>{I!=null&&I.id&&w&&await Ie(I.id,w,be),p(!1),P(null)}});if(g)return l.jsx(HI,{lectureId:w,onClose:()=>{y(!1),P(null)},onSave:async be=>{I!=null&&I.id&&w&&await we(I.id,w,be),y(!1),P(null)}});const Jt=(be,Ve)=>{var Te,He;return l.jsxs(ve,{className:`border-l-4 ${Ve==="basic"?"border-l-blue-500":"border-l-red-500"}`,children:[l.jsx(qe,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[be.imageUrl?l.jsx("img",{src:be.imageUrl,alt:`Year ${be.yearNumber}`,className:"w-24 h-16 object-cover rounded-md",onError:he=>{he.currentTarget.style.display="none"}}):l.jsx("div",{className:"w-24 h-16 rounded-md bg-muted flex items-center justify-center",children:Ve==="basic"?l.jsx(va,{className:"h-6 w-6 text-blue-600"}):l.jsx(xa,{className:"h-6 w-6 text-red-600"})}),l.jsx(Ye,{className:"flex flex-col",children:R===be.id?l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx(De,{value:O,onChange:he=>V(he.target.value),className:"w-48",placeholder:"Batch name"}),l.jsx(ne,{size:"sm",onClick:async()=>{try{await($==null?void 0:$(be.id,{batchName:O,batch_name:O})),D(null),V("")}catch(he){console.error(he),alert("Failed to save batch name")}},children:"Save"}),l.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>{D(null),V("")},children:"Cancel"})]}):l.jsx(l.Fragment,{children:be.batchName?l.jsxs(l.Fragment,{children:[l.jsx(Bn,{to:`/admin/years/${be.id}`,className:"text-lg font-bold text-foreground hover:underline",children:be.batchName}),l.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[l.jsxs("span",{className:"text-sm text-muted",children:["Year ",be.yearNumber]}),be.name&&l.jsxs("span",{className:"ml-2",children:["â€¢ ",be.name]}),be.academicSupervisor&&l.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Academic Supervisor: ",be.academicSupervisor]}),be.cr&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["CR: ",be.cr]}),be.actor&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actor: ",be.actor]})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs(Bn,{to:`/admin/years/${be.id}`,className:"text-lg font-medium text-blue-600 hover:underline",children:["Year ",be.yearNumber]}),l.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[be.name?l.jsx("span",{className:"mr-2",children:be.name}):l.jsx("span",{className:"italic",children:"No batch name"}),be.academicSupervisor&&l.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Academic Supervisor: ",be.academicSupervisor]}),be.cr&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["CR: ",be.cr]}),be.actor&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actor: ",be.actor]})]})]})})})]}),l.jsx("div",{className:"flex items-center gap-2"})]})}),l.jsx(xe,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(os,{className:"h-4 w-4 text-blue-600"}),l.jsx("span",{className:"font-semibold",children:"Subjects"}),l.jsxs(on,{variant:"secondary",children:[((Te=be.subjects)==null?void 0:Te.length)||0," subjects"]}),l.jsxs(on,{variant:"outline",children:[(Xe||[]).filter(he=>he.yearId===be.id).length," ","news"]})]}),l.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>bt(be,Ve),className:"flex items-center gap-1",children:[l.jsx(Qt,{className:"h-3 w-3"}),"Add Subject"]})]}),!be.subjects||be.subjects.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(os,{className:"h-8 w-8 mx-auto mb-3 text-muted-foreground"}),l.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No subjects added yet"}),l.jsx(ne,{variant:"outline",size:"sm",onClick:()=>bt(be,Ve),children:"Add first subject"})]}):l.jsx("div",{className:"grid gap-4",children:(He=be.subjects)==null?void 0:He.map(he=>{var pt;return l.jsxs(ve,{className:"bg-secondary/10",children:[l.jsx(qe,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[he.imageUrl?l.jsx("img",{src:he.imageUrl,alt:he.name,className:"w-8 h-8 object-cover rounded",onError:ke=>{ke.currentTarget.style.display="none"}}):l.jsx(os,{className:"h-5 w-5 text-blue-600"}),l.jsx(Bn,{to:`/admin/subjects/${he.id}`,className:"font-medium text-lg text-blue-600 hover:underline",children:he.name}),l.jsxs(on,{variant:"outline",className:"text-xs",children:[((pt=he.lectures)==null?void 0:pt.length)||0," lectures"]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>kt(he,Ve),className:"h-8 px-3 text-xs",children:[l.jsx(Qt,{className:"h-3 w-3 mr-1"}),"Add Lecture"]}),l.jsx(ne,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:async()=>{if(confirm(`Delete subject "${he.name}"? This will remove its lectures.`))try{await ge(he.id)}catch(ke){console.error(ke),alert("Failed to delete subject")}},children:l.jsx($n,{className:"h-3 w-3"})})]})]})}),he.lectures&&he.lectures.length>0&&l.jsx(xe,{className:"pt-0",children:l.jsxs("div",{className:"grid gap-3",children:[he.lectures.slice(0,3).map(ke=>{var jt,It,St,Wn,Hn,Zn,Tr,hr,Ur;return l.jsx(ve,{className:"bg-background border",children:l.jsx(xe,{className:"p-3",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:ke.imageUrl?l.jsx("img",{src:ke.imageUrl,alt:ke.name,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(Is,{className:"h-6 w-6 text-muted-foreground"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:ke.name}),l.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:ke.description||"No description available"}),l.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[l.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>G(ke.id,"videos"),className:`h-6 px-2 text-xs ${(jt=B[ke.id])!=null&&jt.videos?"bg-accent":""}`,children:[l.jsx(Jg,{className:"h-3 w-3 mr-1"}),"Videos (",((It=ke.videos)==null?void 0:It.length)||0,")"]}),l.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>G(ke.id,"files"),className:`h-6 px-2 text-xs ${(St=B[ke.id])!=null&&St.files?"bg-accent":""}`,children:[l.jsx(Ms,{className:"h-3 w-3 mr-1"}),"Files (",((Wn=ke.files)==null?void 0:Wn.length)||0,")"]}),l.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>G(ke.id,"quizzes"),className:`h-6 px-2 text-xs ${(Hn=B[ke.id])!=null&&Hn.quizzes?"bg-accent":""}`,children:[l.jsx(pi,{className:"h-3 w-3 mr-1"}),"Quizzes (",((Zn=ke.quizzes)==null?void 0:Zn.length)||0,")"]}),l.jsx(ne,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${ke.name}"?`))try{await Ne(he.id,ke.id)}catch(qt){console.error(qt),alert("Failed to delete lecture")}},children:l.jsx($n,{className:"h-3 w-3"})})]}),((Tr=B[ke.id])==null?void 0:Tr.videos)&&l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Videos:"}),l.jsxs(ne,{variant:"ghost",size:"xs",onClick:()=>lt(he,ke.id),className:"h-6 px-2 text-xs",children:[l.jsx(Qt,{className:"h-3 w-3 mr-1"})," Add"]})]}),l.jsxs("div",{className:"space-y-1",children:[ke.videos&&ke.videos.length>0?ke.videos.slice(0,4).map(qt=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Jg,{className:"h-3 w-3 text-blue-600"}),l.jsx("a",{href:qt.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline truncate",children:qt.title||qt.name||"Untitled Video"})]},qt.id)):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"}),ke.videos&&ke.videos.length>4&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",ke.videos.length-4," more videos"]})]})]}),((hr=B[ke.id])==null?void 0:hr.files)&&l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Files:"}),l.jsxs(ne,{variant:"ghost",size:"xs",onClick:()=>Ot(he,ke.id),className:"h-6 px-2 text-xs",children:[l.jsx(Qt,{className:"h-3 w-3 mr-1"})," Add"]})]}),l.jsxs("div",{className:"space-y-1",children:[ke.files&&ke.files.length>0?ke.files.slice(0,4).map(qt=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ms,{className:"h-3 w-3 text-green-600"}),l.jsx("a",{href:qt.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-green-600 hover:underline truncate",children:qt.title||qt.name||"Untitled File"})]},qt.id)):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"}),ke.files&&ke.files.length>4&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",ke.files.length-4," more files"]})]})]}),((Ur=B[ke.id])==null?void 0:Ur.quizzes)&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Quizzes:"}),l.jsxs(ne,{variant:"ghost",size:"xs",onClick:()=>nt(he,ke.id),className:"h-6 px-2 text-xs",children:[l.jsx(Qt,{className:"h-3 w-3 mr-1"})," Add"]})]}),l.jsxs("div",{className:"space-y-1",children:[ke.quizzes&&ke.quizzes.length>0?ke.quizzes.slice(0,4).map(qt=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(pi,{className:"h-3 w-3 text-purple-600"}),l.jsx("span",{className:"text-xs text-purple-600",children:qt.title||qt.name||"Untitled Quiz"})]},qt.id)):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"}),ke.quizzes&&ke.quizzes.length>4&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",ke.quizzes.length-4," more quizzes"]})]})]})]})]})})},ke.id)}),he.lectures.length>3&&l.jsxs("div",{className:"text-center text-muted-foreground text-xs pt-2",children:["+",he.lectures.length-3," more lectures"]})]})})]},he.id)})})]})})]},be.yearNumber)};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Academic Years Management"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-muted-foreground",children:"Manage curriculum by academic years, subjects, and lectures"}),ee==="connecting"&&l.jsxs("span",{className:"flex items-center gap-1 text-blue-600 font-medium text-sm",children:[l.jsx(xo,{className:"h-3 w-3 animate-spin"}),"Connecting..."]}),ee==="connected"&&l.jsxs("span",{className:"flex items-center gap-1 text-green-600 font-medium text-sm",children:[l.jsx("div",{className:"h-2 w-2 bg-green-600 rounded-full"}),"Connected"]}),ee==="offline"&&l.jsxs("span",{className:"flex items-center gap-1 text-orange-600 font-medium text-sm",children:[l.jsx("div",{className:"h-2 w-2 bg-orange-600 rounded-full"}),"Offline Mode"]})]})]})}),se&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(xo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading academic years..."})]})}),W&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading years"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:W}),l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx(ne,{onClick:ae,variant:"outline",children:"Retry Connection"}),l.jsx(ne,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!se&&!W&&l.jsxs(l.Fragment,{children:[l.jsx(ve,{children:l.jsx(xe,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(cc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(De,{placeholder:"Search lectures, subjects, or content...",value:n,onChange:be=>e(be.target.value),className:"pl-10"})]})})}),l.jsxs($C,{defaultValue:"basic",className:"space-y-6",children:[l.jsxs(Ex,{className:"grid w-full grid-cols-2",children:[l.jsxs(Wu,{value:"basic",className:"flex items-center gap-2",children:[l.jsx(va,{className:"h-4 w-4"}),"Basic Years (1-3)"]}),l.jsxs(Wu,{value:"clinical",className:"flex items-center gap-2",children:[l.jsx(xa,{className:"h-4 w-4"}),"Clinical Years (4-6)"]})]}),l.jsx(Hu,{value:"basic",className:"space-y-4",children:l.jsx("div",{className:"space-y-6",children:H.length===0?l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(va,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Setting Up Years..."}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"The academic years structure is being initialized. Please refresh the page in a moment."}),l.jsx(ne,{onClick:()=>window.location.replace(window.location.href),children:"Refresh Page"})]})}):(()=>{const be=H.filter(Te=>Te.type==="basic"),Ve={};return be.forEach(Te=>{const He=Te.batchId||Te.batchName||`no-batch-${Te.yearNumber}`;Ve[He]||(Ve[He]={batchId:Te.batchId||null,batchName:Te.batchName||null,years:[]}),Ve[He].years.push(Te)}),Object.values(Ve).map(Te=>{const He=(Y||[]).find(he=>he.id===Te.batchId)||{};return l.jsxs(ve,{children:[l.jsx(qe,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[He.imageUrl?l.jsx("img",{src:He.imageUrl,alt:He.batchName||"Batch",className:"w-24 h-16 object-cover rounded-md",onError:he=>{he.currentTarget.style.display="none"}}):l.jsx("div",{className:"w-24 h-16 rounded-md bg-muted flex items-center justify-center",children:l.jsx(os,{className:"h-6 w-6 text-muted-foreground"})}),l.jsx("div",{children:R===(Te.batchId||Te.batchName)?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(De,{value:O,onChange:he=>V(he.target.value),placeholder:"Batch name",className:"w-48"}),l.jsx(De,{value:U||"",onChange:he=>k(he.target.value),placeholder:"CR",className:"w-32"}),l.jsx(ne,{size:"sm",onClick:async()=>{try{const he=Te.batchId||Te.batchName;await(X==null?void 0:X(he,{batch_name:O,batchName:O,cr:U})),D(null),V(""),k("")}catch(he){console.error(he),alert("Failed to save batch")}},children:"Save"}),l.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>{D(null),V(""),k("")},children:"Cancel"})]}):l.jsxs(l.Fragment,{children:[l.jsx(Ye,{className:"text-lg",children:He.batchName||Te.batchName||`Batch ${Te.years.map(he=>he.yearNumber).join(", ")}`}),l.jsx(Tt,{children:Te.batchId?"":"No batch metadata"}),l.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[He.cr&&l.jsxs("div",{children:["CR: ",He.cr]}),He.aca_supervisor&&l.jsxs("div",{children:["Academic Supervisor: ",He.aca_supervisor]})]})]})})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(ne,{variant:"ghost",size:"sm",onClick:async()=>{try{const he=document.createElement("input");he.type="file",he.accept="image/*",he.onchange=async()=>{var ke;const pt=(ke=he.files)==null?void 0:ke[0];if(pt)try{let jt=null;try{jt=await Er(pt)}catch{jt=await Sa(pt,pt.name)}if(!jt){alert("Upload failed");return}await(X==null?void 0:X(Te.batchId,{image_url:jt,imageUrl:jt}))}catch(jt){console.error(jt),alert("Failed to upload image")}},he.click()}catch(he){console.error(he),alert("Could not open file dialog")}},children:[l.jsx(Xg,{className:"h-4 w-4"}),He.imageUrl?"Change Image":"Add Image"]}),l.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>{D(Te.batchId||Te.batchName),V(He.batchName||Te.batchName||""),k(He.cr||"")},children:"Batch Name"}),l.jsxs(ne,{variant:"ghost",size:"sm",onClick:async()=>{try{const he=window.prompt("Enter year number (e.g. 1,2,3,4...):");if(!he)return;const pt=parseInt(he,10);if(isNaN(pt)){alert("Invalid year number");return}const ke=window.prompt("Optional: Batch or Year name:","");await(Se==null?void 0:Se(Te.batchId||null,{yearNumber:pt,name:ke})),alert("Year created")}catch(he){console.error(he),alert("Failed to create year")}},children:[l.jsx(Qt,{className:"h-4 w-4"})," Add Year"]})]})]})}),l.jsx(xe,{className:"space-y-4",children:Te.years.sort((he,pt)=>he.yearNumber-pt.yearNumber).map(he=>l.jsx("div",{children:Jt(he,"basic")},he.id))})]},Te.batchId||Te.batchName||Te.years.map(he=>he.id).join("_"))})})()})}),l.jsx(Hu,{value:"clinical",className:"space-y-4",children:l.jsx("div",{className:"space-y-6",children:H.length===0?l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(xa,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Setting Up Years..."}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"The academic years structure is being initialized. Please refresh the page in a moment."}),l.jsx(ne,{onClick:()=>window.location.replace(window.location.href),children:"Refresh Page"})]})}):(()=>{const be=H.filter(Te=>Te.type==="clinical"),Ve={};return be.forEach(Te=>{const He=Te.batchId||Te.batchName||`no-batch-${Te.yearNumber}`;Ve[He]||(Ve[He]={batchId:Te.batchId||null,batchName:Te.batchName||null,years:[]}),Ve[He].years.push(Te)}),Object.values(Ve).map(Te=>{const He=(Y||[]).find(he=>he.id===Te.batchId)||{};return l.jsxs(ve,{children:[l.jsx(qe,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[He.imageUrl?l.jsx("img",{src:He.imageUrl,alt:He.batchName||"Batch",className:"w-24 h-16 object-cover rounded-md",onError:he=>{he.currentTarget.style.display="none"}}):l.jsx("div",{className:"w-24 h-16 rounded-md bg-muted flex items-center justify-center",children:l.jsx(os,{className:"h-6 w-6 text-muted-foreground"})}),l.jsx("div",{children:R===(Te.batchId||Te.batchName)?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(De,{value:O,onChange:he=>V(he.target.value),placeholder:"Batch name",className:"w-48"}),l.jsx(De,{value:U||"",onChange:he=>k(he.target.value),placeholder:"CR",className:"w-32"}),l.jsx(ne,{size:"sm",onClick:async()=>{try{const he=Te.batchId||Te.batchName;await(X==null?void 0:X(he,{batch_name:O,batchName:O,cr:U})),D(null),V(""),k("")}catch(he){console.error(he),alert("Failed to save batch")}},children:"Save"}),l.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>{D(null),V(""),k("")},children:"Cancel"})]}):l.jsxs(l.Fragment,{children:[l.jsx(Ye,{className:"text-lg",children:He.batchName||Te.batchName||`Batch ${Te.years.map(he=>he.yearNumber).join(", ")}`}),l.jsx(Tt,{children:Te.batchId?"":"No batch metadata"}),l.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[He.cr&&l.jsxs("div",{children:["CR: ",He.cr]}),He.aca_supervisor&&l.jsxs("div",{children:["Academic Supervisor: ",He.aca_supervisor]})]})]})})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(ne,{variant:"ghost",size:"sm",onClick:async()=>{try{const he=document.createElement("input");he.type="file",he.accept="image/*",he.onchange=async()=>{var ke;const pt=(ke=he.files)==null?void 0:ke[0];if(pt)try{let jt=null;try{jt=await Er(pt)}catch{jt=await Sa(pt,pt.name)}if(!jt){alert("Upload failed");return}await(X==null?void 0:X(Te.batchId,{image_url:jt,imageUrl:jt}))}catch(jt){console.error(jt),alert("Failed to upload image")}},he.click()}catch(he){console.error(he),alert("Could not open file dialog")}},children:[l.jsx(Xg,{className:"h-4 w-4"}),He.imageUrl?"Change Image":"Add Image"]}),l.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>{D(Te.batchId||Te.batchName),V(He.batchName||Te.batchName||""),k(He.cr||"")},children:"Batch Name"}),l.jsxs(ne,{variant:"ghost",size:"sm",onClick:async()=>{try{const he=window.prompt("Enter year number (e.g. 1,2,3,4...):");if(!he)return;const pt=parseInt(he,10);if(isNaN(pt)){alert("Invalid year number");return}const ke=window.prompt("Optional: Batch or Year name:","");await(Se==null?void 0:Se(Te.batchId||null,{yearNumber:pt,name:ke})),alert("Year created")}catch(he){console.error(he),alert("Failed to create year")}},children:[l.jsx(Qt,{className:"h-4 w-4"})," Add Year"]})]})]})}),l.jsx(xe,{className:"space-y-4",children:Te.years.sort((he,pt)=>he.yearNumber-pt.yearNumber).map(he=>l.jsx("div",{children:Jt(he,"clinical")},he.id))})]},Te.batchId||Te.batchName||Te.years.map(he=>he.id).join("_"))})})()})})]})]})]})}function a9(){var z;const{id:n}=SS(),[e,t]=E.useState(!1),[r,i]=E.useState(!1),[a,c]=E.useState(null),[d,h]=E.useState(null),[p,g]=E.useState(""),{years:y,loading:v,updateYear:b,createSubject:S,createLecture:_,deleteSubject:w,deleteLecture:P}=_c(),I=y.find(B=>B.id===n);if(v)return l.jsx(ve,{children:l.jsx(xe,{className:"text-center py-12",children:"Loading..."})});if(!I)return l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"Year not found"}),l.jsx("div",{className:"flex gap-2 justify-center",children:l.jsx(Bn,{to:"/admin/years",children:l.jsx(ne,{variant:"outline",children:"Back to Years"})})})]})});const C=async B=>{try{await S({...B,yearId:I.id}),t(!1)}catch(A){console.error(A),alert("Failed to add subject")}},M=async B=>{try{await _(B),i(!1),c(null)}catch(A){console.error(A),alert("Failed to add lecture")}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Bn,{to:"/admin/years",children:l.jsxs(ne,{variant:"ghost",children:[l.jsx($s,{className:"h-4 w-4 mr-2"})," Back"]})}),l.jsxs("div",{children:[I.batchName?l.jsxs(l.Fragment,{children:[l.jsx("h1",{className:"text-2xl font-bold",children:I.batchName}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Year ",I.yearNumber]})]}):l.jsxs("h1",{className:"text-2xl font-bold",children:["Year ",I.yearNumber]}),l.jsx("p",{className:"text-muted-foreground",children:"Manage subjects and lectures for this year"})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:!window.__yearEditing&&l.jsxs(l.Fragment,{children:[l.jsxs(ne,{variant:"ghost",onClick:async()=>{try{const B=document.createElement("input");B.type="file",B.accept="image/*",B.onchange=async()=>{var R;const A=(R=B.files)==null?void 0:R[0];if(A)try{let D=null;try{D=await Er(A)}catch(O){console.warn("Cloudinary upload failed, attempting ImageKit fallback:",(O==null?void 0:O.message)||O);try{D=await Sa(A,A.name)}catch(V){throw console.error("ImageKit upload also failed:",V),O}}if(!D||typeof D!="string"||!D.startsWith("http")){console.error("Invalid upload response:",D),alert("Image upload failed: unexpected response from upload provider"),window.__yearEditing=!1;return}await(b==null?void 0:b(I.id,{imageUrl:D,image_url:D})),window.__yearEditing=!1}catch(D){console.error(D);const V=((D==null?void 0:D.message)||String(D)||"").toLowerCase();if(V.includes("cloudinary cloud name is not configured")){const U=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!U){alert("No cloud name provided. Upload cancelled."),window.__yearEditing=!1;return}const k=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),G=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");try{ba(U,k||null,G||null);const H=await Er(A);if(console.log("Cloudinary upload result after config:",H),!H||typeof H!="string"||!H.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(b==null?void 0:b(I.id,{imageUrl:H,image_url:H}))}catch(H){console.error(H),alert("Image upload failed after configuring Cloudinary: "+(H.message||H))}window.__yearEditing=!1;return}else if(V.includes("cloudinary signing did not return an api key")||V.includes("missing required parameter - api_key")||V.includes("missing required parameter 'api_key'")){const U=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(U&&U.trim())try{ba(null,null,U.trim());const k=await Er(A);if(!k||typeof k!="string"||!k.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(b==null?void 0:b(I.id,{imageUrl:k,image_url:k})),window.__yearEditing=!1;return}catch(k){console.error(k),alert("Image upload failed after setting API key: "+(k.message||k)),window.__yearEditing=!1;return}}alert("Image upload failed: "+(D.message||D))}},B.click()}catch(B){console.error(B),alert("Could not open file dialog")}},children:[l.jsx(Xg,{className:"h-4 w-4 mr-2"})," ",I.imageUrl?"Change Image":"Add Image"]}),l.jsx(ne,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("academicSupervisor"),g(I.academicSupervisor||I.acadmic_supervisor||"")},children:"Academic Supervisor"}),l.jsx(ne,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("actor"),g(I.actor||"")},children:"Actor"}),l.jsx(ne,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("groupUrl"),g(I.groupUrl||I.group_url||"")},children:"Group URL"}),l.jsx(ne,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("batchName"),g(I.batchName||I.batch_name||"")},children:"Batch Name"}),I.imageUrl&&l.jsx(ne,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm("Remove year image?"))try{await(b==null?void 0:b(I.id,{imageUrl:""}))}catch(B){console.error(B),alert("Failed to remove year image")}},children:l.jsx($n,{className:"h-3 w-3"})})]})})]}),d&&l.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[l.jsx(De,{placeholder:d==="image"?"Image URL":d==="groupUrl"?"Group URL":d==="academicSupervisor"?"Academic Supervisor":"Actor",value:p,onChange:B=>g(B.target.value),className:"w-full max-w-2xl"}),l.jsx(ne,{onClick:async()=>{try{const B={};d==="image"?B.imageUrl=p:d==="academicSupervisor"?(B.academicSupervisor=p,B.acadmic_supervisor=p):d==="actor"?B.actor=p:d==="groupUrl"?(B.groupUrl=p,B.group_url=p):d==="batchName"&&(B.batchName=p,B.batch_name=p),await(b==null?void 0:b(I.id,B)),h(null),g(""),window.__yearEditing=!1}catch(B){console.error(B),alert("Failed to save field")}},children:"Save"}),l.jsx(ne,{variant:"ghost",onClick:()=>{h(null),g(""),window.__yearEditing=!1},children:"Cancel"})]}),l.jsxs(ve,{children:[l.jsx(qe,{children:l.jsxs(Ye,{className:"flex items-center gap-2",children:["Subjects",l.jsxs(on,{variant:"secondary",children:[((z=I.subjects)==null?void 0:z.length)||0," subjects"]})]})}),l.jsxs(xe,{children:[l.jsx("div",{className:"flex justify-end mb-4",children:l.jsxs(ne,{onClick:()=>t(!0),className:"flex items-center gap-2",children:[l.jsx(Qt,{className:"h-3 w-3"})," Add Subject"]})}),!I.subjects||I.subjects.length===0?l.jsx("div",{className:"text-center py-8",children:"No subjects added yet."}):l.jsx("div",{className:"grid gap-4",children:I.subjects.map(B=>l.jsxs(ve,{className:"bg-secondary/10",children:[l.jsx(qe,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[B.imageUrl?l.jsx("img",{src:B.imageUrl,alt:B.name,className:"w-8 h-8 object-cover rounded"}):l.jsx("div",{className:"w-8 h-8 bg-muted rounded"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-lg",children:B.name}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:[(B.lectures||[]).length," lectures"]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(ne,{onClick:()=>{c(B),i(!0)},variant:"ghost",size:"sm",children:"Add Lecture"}),l.jsx(ne,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete subject "${B.name}"?`))try{await w(B.id)}catch(A){console.error(A),alert("Failed to delete subject")}},children:l.jsx($n,{className:"h-3 w-3"})})]})]})}),B.lectures&&B.lectures.length>0&&l.jsx(xe,{children:l.jsx("div",{className:"grid gap-3",children:B.lectures.map(A=>l.jsx(ve,{className:"bg-background border",children:l.jsx(xe,{className:"p-3",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:A.imageUrl?l.jsx("img",{src:A.imageUrl,alt:A.name,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"No image"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:A.name}),l.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:A.description||"No description available"})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(ne,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${A.name}"?`))try{await P(B.id,A.id)}catch(R){console.error(R),alert("Failed to delete lecture")}},children:l.jsx($n,{className:"h-3 w-3"})})})]})})},A.id))})})]},B.id))})]})]}),e&&l.jsx(qC,{year:I.yearNumber,yearType:I.type,onClose:()=>t(!1),onSave:C}),r&&a&&l.jsx(Op,{subjectId:a.id,subjectName:a.name,yearType:I.type,onClose:()=>{i(!1),c(null)},onSave:M})]})}function Dp(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[i,a]=E.useState(null);return E.useEffect(()=>{const p=Nr(wa(Be,"lectures")),g=Lo(p,async y=>{var b;const v=[];for(const S of y.docs){const _=S.data(),w=S.id,P=S.ref,I=await Gt(ot(P,"files")),C=[];I.forEach(R=>{var O;const D=R.data();C.push({id:R.id,title:D.title||"",fileUrl:D.fileUrl||"",fileType:D.fileType||"",fileSize:D.fileSize||"",description:D.description||"",uploadedAt:((O=D.uploadedAt)==null?void 0:O.toDate())||new Date,uploadedBy:D.uploadedBy||""})});const M=await Gt(ot(P,"quizzes")),z=[];M.forEach(R=>{var O;const D=R.data();z.push({id:R.id,title:D.title||"",description:D.description||"",questions:D.questions||[],timeLimit:D.duration||30,passingScore:D.passRate||70,createdAt:((O=D.createdAt)==null?void 0:O.toDate())||new Date,createdBy:D.uploadedBy||""})});const B=await Gt(ot(P,"videos")),A=[];B.empty?(_.videos||[]).forEach(D=>{var O,V;A.push({id:D.id||D.videoId||"",title:D.title||D.name||"",youtubeUrl:D.url||D.youtubeUrl||"",thumbnailUrl:D.thumbnailUrl||D.thumbnail||"",duration:D.duration||D.time||"",description:D.description||"",uploadedAt:((V=(O=D.uploadedAt)==null?void 0:O.toDate)==null?void 0:V.call(O))||new Date,uploadedBy:D.uploadedBy||D.uploader||"",imageUrl:D.thumbnailUrl||""})}):B.forEach(R=>{var O,V;const D=R.data();A.push({id:R.id,title:D.title||D.name||"",youtubeUrl:D.url||D.youtubeUrl||"",thumbnailUrl:D.thumbnailUrl||D.thumbnail||"",duration:D.duration||D.time||"",description:D.description||"",uploadedAt:((V=(O=D.uploadedAt)==null?void 0:O.toDate)==null?void 0:V.call(O))||new Date,uploadedBy:D.uploadedBy||D.uploader||"",imageUrl:D.thumbnailUrl||""})}),v.push({id:w,title:_.title||"",description:_.description||"",subject:_.subjectId||"Unknown",order:_.order||1,createdAt:((b=_.createdAt)==null?void 0:b.toDate())||new Date,createdBy:_.uploadedBy||"",videos:A,files:C,quizzes:z})}v.sort((S,_)=>(S.order||0)-(_.order||0)),e(v),r(!1)},y=>{console.error("Error fetching lectures:",y),a("Failed to fetch lectures"),r(!1)});return()=>g()},[]),{lectures:n,loading:t,error:i,createLecture:async(p,g)=>{try{const y=Pt(Be,"Subjects",g),v=ot(y,"lectures"),{videos:b,files:S,quizzes:_,...w}=p,P=await Pn(v,{...w,videos:b,subjectId:g});if(S&&S.length>0){const I=ot(P,"files");for(const C of S)await Pn(I,C)}if(_&&_.length>0){const I=ot(P,"quizzes");for(const C of _)await Pn(I,C)}}catch(y){throw console.error("Error creating lecture:",y),y}},updateLecture:async(p,g)=>{try{const y=Nr(wa(Be,"lectures")),v=await Gt(y);for(const b of v.docs)if(b.id===p){await Nn(b.ref,g);break}}catch(y){throw console.error("Error updating lecture:",y),y}},deleteLecture:async p=>{try{const g=Nr(wa(Be,"lectures")),y=await Gt(g);for(const v of y.docs)if(v.id===p){await Us(v.ref);break}}catch(g){throw console.error("Error deleting lecture:",g),g}}}}function Nb(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[i,a]=E.useState(!1),{lectures:c,loading:d,error:h,createLecture:p,updateLecture:g}=Dp(),[y]=td(),v=y.get("lecture");y.get("tab");let b=c.filter(w=>w.title.toLowerCase().includes(n.toLowerCase())||w.subject.toLowerCase().includes(n.toLowerCase()));v&&(b=c.filter(w=>w.id===v));const S=()=>{r(null),a(!0)},_=w=>{r(w),a(!0)};return i?l.jsx(Op,{lecture:t,onClose:()=>{a(!1),r(null)},onSave:async w=>{try{t?await g(t.id,w):await p(w,"default-subject"),a(!1),r(null)}catch(P){console.error("Error saving lecture:",P)}}}):(v&&c.find(w=>w.id===v),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Resources Management"}),l.jsx("p",{className:"text-muted-foreground",children:"Organize educational content by lectures with videos, files, and quizzes"})]}),l.jsxs(ne,{onClick:S,className:"flex items-center gap-2",children:[l.jsx(Qt,{className:"h-4 w-4"}),"Create Lecture"]})]}),l.jsx(ve,{children:l.jsx(xe,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(cc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(De,{placeholder:"Search lectures by title or subject...",value:n,onChange:w=>e(w.target.value),className:"pl-10"})]})})}),d&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(xo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading lectures..."})]})}),h&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading lectures"}),l.jsx("p",{className:"text-muted-foreground",children:h})]})}),!d&&!h&&l.jsx("div",{className:"space-y-6",children:b.map(w=>l.jsxs(ve,{className:`hover:shadow-lg transition-all duration-200 border-l-4 ${v===w.id?"border-l-primary bg-primary/5":"border-l-primary/20 hover:border-l-primary"}`,children:[l.jsx(qe,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx(os,{className:"h-5 w-5 text-primary"}),l.jsx(Ye,{className:"text-xl",children:w.title}),l.jsx(on,{variant:"secondary",children:w.subject})]}),l.jsx(Tt,{className:"text-base",children:w.description}),l.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Yl,{className:"h-3 w-3"}),w.createdBy]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(m1,{className:"h-3 w-3"}),w.createdAt.toLocaleDateString()]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>_(w),children:l.jsx(Xu,{className:"h-4 w-4"})}),l.jsx(ne,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",children:l.jsx($n,{className:"h-4 w-4"})})]})]})}),l.jsx(xe,{children:l.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(Is,{className:"h-4 w-4 text-green-600"}),"Videos (",w.videos.length,")"]}),w.videos.length>0&&l.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>{w.videos.forEach(P=>window.open(P.youtubeUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Play All"})]}),w.videos.length>0?l.jsx("div",{className:"space-y-2",children:w.videos.map(P=>l.jsx("button",{onClick:()=>window.open(P.youtubeUrl,"_blank"),className:"w-full p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"relative",children:[P.thumbnailUrl&&l.jsx("img",{src:P.thumbnailUrl,alt:P.title,className:"w-16 h-12 object-cover rounded"}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx(Is,{className:"h-6 w-6 text-white"})})]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:P.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(pf,{className:"h-3 w-3"}),P.duration]})]})]})},P.id))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(Ms,{className:"h-4 w-4 text-blue-600"}),"Files (",w.files.length,")"]}),w.files.length>0&&l.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>{w.files.forEach(P=>window.open(P.fileUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Download All"})]}),w.files.length>0?l.jsx("div",{className:"space-y-2",children:w.files.map(P=>l.jsx("button",{onClick:()=>window.open(P.fileUrl,"_blank"),className:"w-full p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(Ms,{className:"h-4 w-4 text-blue-600 mt-1 flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:P.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(on,{variant:"outline",className:"text-xs",children:P.fileType}),l.jsx("span",{children:P.fileSize})]})]})]})},P.id))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(pi,{className:"h-4 w-4 text-purple-600"}),"Quizzes (",w.quizzes.length,")"]}),w.quizzes.length>0&&l.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>{alert(`Starting all ${w.quizzes.length} quizzes for: ${w.title}`)},className:"h-6 px-2 text-xs",children:"Start All"})]}),w.quizzes.length>0?l.jsx("div",{className:"space-y-2",children:w.quizzes.map(P=>l.jsx("button",{onClick:()=>{alert(`Starting quiz: ${P.title}
Time limit: ${P.timeLimit} minutes
Passing score: ${P.passingScore}%`)},className:"w-full p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(pi,{className:"h-4 w-4 text-purple-600 mt-1 flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:P.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(pf,{className:"h-3 w-3"}),P.timeLimit,"min",l.jsx("span",{children:"â€¢"}),l.jsxs("span",{children:[P.passingScore,"% pass"]})]})]})]})},P.id))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"})]})]})})]},w.id))}),!d&&!h&&b.length===0&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(os,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No lectures found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No lectures match your search criteria.":"Start by creating your first lecture with videos, files, and quizzes."}),l.jsxs(ne,{onClick:S,children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Create Lecture"]})]})})]}))}function l9({professor:n,onClose:e,onSave:t}){const[r,i]=E.useState({name:"",title:"",department:"",email:"",others:"",officeLocation:"",researchAreas:"",imageUrl:""}),[a,c]=E.useState(!1);E.useEffect(()=>{n&&i({name:n.name||"",title:n.title||"",department:n.department||"",email:n.email||"",others:n.others||"",officeLocation:n.officeLocation||"",researchAreas:(n.researchAreas||[]).join(", "),imageUrl:n.imageUrl||""})},[n]);const d=async h=>{h.preventDefault(),c(!0);try{const p={...r,researchAreas:r.researchAreas?r.researchAreas.split(",").map(g=>g.trim()).filter(Boolean):[]};t(p)}catch(p){console.error("Error saving professor:",p)}finally{c(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ne,{variant:"ghost",onClick:e,children:[l.jsx($s,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Professor":"Add Professor"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update professor information":"Add a new professor to the faculty"})]})]})}),l.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsxs(Ye,{className:"flex items-center gap-2",children:[l.jsx(lo,{className:"h-5 w-5"}),"Professor Information"]}),l.jsx(Tt,{children:"Basic information about the professor"})]}),l.jsxs(xe,{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsxs(oc,{className:"w-20 h-20",children:[l.jsx(qu,{src:r.imageUrl,alt:r.name}),l.jsx(ac,{children:l.jsx(lo,{className:"w-8 h-8"})})]}),l.jsxs("div",{className:"space-y-2 flex-1",children:[l.jsx(Pe,{htmlFor:"imageUrl",children:"Profile Image URL"}),l.jsx(De,{id:"imageUrl",placeholder:"https://example.com/profile.jpg",value:r.imageUrl,onChange:h=>i(p=>({...p,imageUrl:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"name",children:"Full Name *"}),l.jsx(De,{id:"name",placeholder:"Dr. John Smith",value:r.name,onChange:h=>i(p=>({...p,name:h.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"title",children:"Title"}),l.jsx(De,{id:"title",placeholder:"e.g., Associate Professor",value:r.title,onChange:h=>i(p=>({...p,title:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Pe,{htmlFor:"department",className:"flex items-center gap-2",children:[l.jsx(dP,{className:"h-4 w-4"}),"Department"]}),l.jsx(De,{id:"department",placeholder:"Internal Medicine",value:r.department,onChange:h=>i(p=>({...p,department:h.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"others",children:"Others"}),l.jsx(De,{id:"others",placeholder:"Other contact or notes",value:r.others,onChange:h=>i(p=>({...p,others:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Pe,{htmlFor:"email",className:"flex items-center gap-2",children:[l.jsx(mf,{className:"h-4 w-4"}),"Email Address"]}),l.jsx(De,{id:"email",type:"email",placeholder:"john.smith@university.edu",value:r.email,onChange:h=>i(p=>({...p,email:h.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Pe,{htmlFor:"officeLocation",className:"flex items-center gap-2",children:[l.jsx(Tu,{className:"h-4 w-4"}),"Office Location"]}),l.jsx(De,{id:"officeLocation",placeholder:"Medical Building, Room 301",value:r.officeLocation,onChange:h=>i(p=>({...p,officeLocation:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"researchAreas",children:"Research Areas"}),l.jsx(De,{id:"researchAreas",placeholder:"e.g., Cardiology, Epidemiology",value:r.researchAreas,onChange:h=>i(p=>({...p,researchAreas:h.target.value}))})]}),l.jsx("div",{className:"space-y-2",children:l.jsx("div",{})})]})]})]}),r.name&&l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsx(Ye,{children:"Preview"}),l.jsx(Tt,{children:"How the professor will appear in the system"})]}),l.jsx(xe,{children:l.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[l.jsxs(oc,{className:"h-12 w-12",children:[l.jsx(qu,{src:r.imageUrl,alt:r.name}),l.jsx(ac,{children:l.jsx(lo,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold",children:r.name}),l.jsx("p",{className:"text-sm text-muted-foreground",children:r.department}),l.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-sm text-muted-foreground",children:[r.email&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(mf,{className:"h-3 w-3"}),l.jsx("span",{children:r.email})]}),r.officeLocation&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Tu,{className:"h-3 w-3"}),l.jsx("span",{children:r.officeLocation})]}),r.others&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(lo,{className:"h-3 w-3"}),l.jsx("span",{children:r.others})]})]})]})]})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(ne,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(ne,{type:"submit",disabled:a,children:[l.jsx(Po,{className:"h-4 w-4 mr-2"}),a?"Saving...":n?"Update Professor":"Add Professor"]})]})]})]})}function c9(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[i,a]=E.useState(!1),{professors:c,loading:d,error:h,createProfessor:p,updateProfessor:g,deleteProfessor:y,isOfflineMode:v}=mC(),b=c.filter(_=>_.name.toLowerCase().includes(n.toLowerCase())||_.department.toLowerCase().includes(n.toLowerCase())||_.email.toLowerCase().includes(n.toLowerCase())),S=async _=>{if(window.confirm("Are you sure you want to delete this professor?"))try{await y(_)}catch(w){console.error("Error deleting professor:",w),alert("Failed to delete professor. Please try again.")}};return i?l.jsx(l9,{professor:t,onClose:()=>{a(!1),r(null)},onSave:async _=>{try{t?await g(t.id,_):await p(_),a(!1),r(null)}catch(w){console.error("Error saving professor:",w),alert("Failed to save professor. Please try again.")}}}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Professors Management"}),l.jsxs("p",{className:"text-muted-foreground",children:["Manage faculty information and profiles",v&&l.jsx("span",{className:"ml-2 text-orange-600 font-medium",children:"â€¢ Working in offline mode"})]})]}),l.jsxs(ne,{onClick:()=>a(!0),children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]}),l.jsx(ve,{children:l.jsx(xe,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(cc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(De,{placeholder:"Search professors by name, department, or email...",value:n,onChange:_=>e(_.target.value),className:"pl-10"})]})})}),d&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(xo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading professors..."})]})}),h&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading professors"}),l.jsx("p",{className:"text-muted-foreground",children:h})]})}),!d&&!h&&l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:b.map(_=>l.jsxs(ve,{className:"hover:shadow-md transition-shadow",children:[l.jsx(qe,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs(oc,{className:"h-12 w-12",children:[l.jsx(qu,{src:_.imageUrl,alt:_.name}),l.jsx(ac,{children:l.jsx(lo,{className:"h-6 w-6"})})]}),l.jsxs("div",{children:[l.jsx(Ye,{className:"text-lg",children:_.name}),l.jsx(on,{variant:"secondary",className:"text-xs",children:_.department})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>{r(_),a(!0)},children:l.jsx(Xu,{className:"h-4 w-4"})}),l.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>S(_.id),className:"text-destructive hover:text-destructive",children:l.jsx($n,{className:"h-4 w-4"})})]})]})}),l.jsx(xe,{children:l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsxs("div",{className:"",children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:_.title}),l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mt-1",children:[l.jsx(mf,{className:"h-4 w-4"}),l.jsx("span",{children:_.email})]})]}),_.phone&&l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[l.jsx(lo,{className:"h-4 w-4"}),l.jsx("span",{children:_.phone})]}),_.officeLocation&&l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[l.jsx(Tu,{className:"h-4 w-4"}),l.jsx("span",{children:_.officeLocation})]}),_.bio&&l.jsx("div",{className:"text-sm text-muted-foreground line-clamp-3",children:_.bio}),_.researchAreas&&_.researchAreas.length>0&&l.jsx("div",{className:"flex gap-2 flex-wrap",children:_.researchAreas.map(w=>l.jsx(on,{children:w},w))}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[_.website&&l.jsx("a",{href:_.website,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"Website"}),_.linkedin&&l.jsx("a",{href:_.linkedin,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"LinkedIn"})]})]})})]},_.id))}),!d&&!h&&b.length===0&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(Yl,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No professors found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No professors match your search criteria.":"Start by adding your first professor."}),l.jsxs(ne,{onClick:()=>a(!0),children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]})})]})}const u9=[{id:"user_1",displayName:"Ali Ahmed",email:"ali.ahmed@example.com",role:"student",photoURL:"",createdAt:new Date},{id:"user_2",displayName:"Mona Hassan",email:"mona.hassan@example.com",role:"staff",photoURL:"",createdAt:new Date(Date.now()-1e3*60*60*24)}];function d9(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[i,a]=E.useState(null),[c,d]=E.useState(!1),{years:h}=_c();return E.useEffect(()=>{const y=async()=>{try{const b=Nr(ot(Be,"users"));await Gt(b);const S=Nr(ot(Be,"users"),md("createdAt","desc")),_=Lo(S,w=>{const P=[];w.forEach(C=>{var R,D;const M=C.data(),z=M.yearId||M.year||M.year_id||M.yearId||null;let B=z,A="-";if(typeof z=="string"&&z.includes(":")){const[O,V]=z.split(":",2);B=O||null,V&&V.trim()&&(A=V.trim())}if(B&&A==="-"){const O=h.find(V=>V.id===B);O&&(O.batchName?A=O.batchName:A=`Year ${{1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six"}[O.yearNumber]||String(O.yearNumber)}`)}P.push({id:C.id,displayName:M.displayName||M.name||"",email:M.email||"",role:M.role||"student",photoURL:M.photoURL||M.avatar||"",createdAt:((D=(R=M.createdAt)==null?void 0:R.toDate)==null?void 0:D.call(R))||void 0,yearId:B||void 0,yearLabel:A})}),e(P);const I=Array.from(new Set(P.map(C=>C.yearId).filter(Boolean).filter(C=>!h.find(M=>M.id===C))));I.length>0&&Promise.all(I.map(async C=>{try{const z=(await Gt(wa(Be,"years"))).docs.find(D=>D.id===C);if(!z)return null;const B=z.data(),A=B.yearNumber||B.order||(()=>{const D=(B.name||"").match(/\d+/);return D?parseInt(D[0]):void 0})(),R=B.batchName||(A?`Year ${A}`:void 0)||void 0;return{id:C,label:R}}catch{return null}})).then(C=>{const M={};C.forEach(z=>{z&&z.id&&z.label&&(M[z.id]=z.label)}),Object.keys(M).length>0&&e(z=>z.map(B=>B.yearId&&M[B.yearId]?{...B,yearLabel:M[B.yearId]}:B))}),r(!1)},w=>{console.error("Failed to listen to users:",w),v()});return()=>_()}catch(b){console.error("Failed to load users, entering offline mode:",b),v()}},v=()=>{d(!0),e(u9),r(!1),a(null)};y()},[]),E.useEffect(()=>{!h||h.length===0||e(y=>y.map(v=>{if(!v)return v;const b=v.yearId||null;if(!b)return v;const S=h.find(I=>I.id===b);if(!S)return v;const w={1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six"}[S.yearNumber]||String(S.yearNumber),P=S.batchName?S.batchName:`Year ${w}`;return{...v,yearLabel:P}}))},[h]),{users:n,loading:t,error:i,updateUser:async(y,v)=>{if(c||y.startsWith("mock_")||y.startsWith("offline_")){e(b=>b.map(S=>S.id===y?{...S,...v}:S));return}try{await Nn(Pt(Be,"users",y),v)}catch(b){console.error("Failed to update user:",b),e(S=>S.map(_=>_.id===y?{..._,...v}:_))}},deleteUser:async y=>{if(c||y.startsWith("mock_")||y.startsWith("offline_")){e(v=>v.filter(b=>b.id!==y));return}try{await Us(Pt(Be,"users",y))}catch(v){console.error("Failed to delete user:",v),e(b=>b.filter(S=>S.id!==y))}},isOfflineMode:c}}function h9(){const{users:n,loading:e,error:t,updateUser:r,deleteUser:i}=d9(),a=async d=>{const h=d.role==="admin"?"user":"admin";await r(d.id,{role:h})},c=(d,h)=>{if(!d)return"-";const p=d.match(/(19|20)\d{2}/);if(p)return p[0];if(h)try{const g=new Date(h);if(!isNaN(g.getTime()))return String(g.getFullYear())}catch{}return"-"};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(SP,{className:"h-6 w-6 text-blue-600"}),l.jsx("h1",{className:"text-3xl font-bold",children:"Users"})]}),l.jsxs(ve,{children:[l.jsx(qe,{children:l.jsxs(Ye,{children:["All Users (",n.length,")"]})}),l.jsx(xe,{children:e?l.jsx("div",{children:"Loading..."}):t?l.jsx("div",{className:"text-destructive",children:t}):n.length===0?l.jsx("div",{className:"text-muted-foreground",children:"No users found."}):l.jsx("div",{className:"space-y-2",children:n.map(d=>{var h;return l.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[l.jsx(oc,{className:"h-12 w-12",children:d.photoURL?l.jsx(qu,{src:d.photoURL,alt:d.displayName}):l.jsx(ac,{children:((h=d.displayName)==null?void 0:h[0])||"U"})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-medium truncate",children:d.displayName}),l.jsx("div",{className:"text-xs text-muted-foreground truncate",children:d.email}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Created:"," ",d.createdAt?new Date(d.createdAt).toLocaleString():"-",l.jsxs("span",{className:"ml-3",children:["Year:"," ",d.yearLabel||c(d.id,d.createdAt)]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(on,{children:d.role||"user"}),l.jsx(ne,{size:"sm",variant:"outline",onClick:()=>a(d),children:d.role==="admin"?"Demote":"Make Admin"}),l.jsx(ne,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>i(d.id),children:l.jsx($n,{className:"h-4 w-4"})})]})]},d.id)})})})]})]})}function f9(n){if(!n)return 0;if(typeof n=="number")return n;const e=String(n).trim();if(/^\d+$/.test(e))return parseInt(e,10);const t=e.split(":").map(r=>parseInt(r,10));return t.length===3?t[0]*3600+(t[1]||0)*60+(t[2]||0):t.length===2?(t[0]||0)*60+(t[1]||0):0}function p9(n){if(!n||n<=0)return"0:00";const e=Math.floor(n/3600),t=Math.floor(n%3600/60),r=n%60;return e>0?`${e}:${String(t).padStart(2,"0")}:${String(r).padStart(2,"0")}`:`${t}:${String(r).padStart(2,"0")}`}function m9(){var D;const{id:n}=SS(),e=ed(),{years:t,subjects:r,loading:i,createLecture:a,deleteLecture:c,deleteSubject:d,addVideo:h,addFile:p,addQuiz:g}=_c(),[y,v]=E.useState(null),[b,S]=E.useState(!1),[_,w]=E.useState(!1),[P,I]=E.useState(!1),[C,M]=E.useState(!1),z=r.find(O=>O.id===n),B=O=>{v(O||null),S(!0)},A=O=>{v(O||null),w(!0)},R=O=>{v(O||null),I(!0)};return b&&y?l.jsx(HI,{lectureId:y,onClose:()=>{S(!1),v(null)},onSave:async O=>{z!=null&&z.id&&y&&await h(z.id,y,O),S(!1),v(null)}}):_&&y?l.jsx(WI,{lectureId:y,onClose:()=>{w(!1),v(null)},onSave:async O=>{z!=null&&z.id&&y&&await p(z.id,y,O),w(!1),v(null)}}):P&&y?l.jsx(BC,{lectureId:y,onClose:()=>{I(!1),v(null)},onSave:async O=>{z!=null&&z.id&&y&&await g(z.id,y,O),I(!1),v(null)}}):C?l.jsx(Op,{subjectId:(z==null?void 0:z.id)||null,subjectName:z==null?void 0:z.name,yearType:(D=t.find(O=>O.id===(z==null?void 0:z.yearId)))==null?void 0:D.type,onClose:()=>M(!1),onSave:async O=>{z!=null&&z.id&&await a(O),M(!1)}}):i?l.jsx("div",{children:"Loading..."}):z?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:z.name}),l.jsx("p",{className:"text-muted-foreground",children:"Subject details and lectures"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>M(!0),className:"flex items-center gap-2",children:[l.jsx(Qt,{className:"h-4 w-4"}),"Add Lecture"]}),l.jsx(ne,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if(z&&confirm(`Delete subject "${z.name}"? This will remove all lectures.`))try{await d(z.id),e("/admin/years")}catch(O){console.error(O),alert("Failed to delete subject")}},children:l.jsx($n,{className:"h-4 w-4"})}),l.jsx(Bn,{to:"/admin/years",children:l.jsx(ne,{variant:"ghost",children:"Back"})})]})]}),l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsx(Ye,{children:"Lectures"}),l.jsx(Tt,{children:"All lectures for this subject"})]}),l.jsx(xe,{children:l.jsx("div",{className:"grid gap-4",children:z.lectures&&z.lectures.length>0?z.lectures.map(O=>{var U,k;const V=O.imageUrl||O.videos&&O.videos[0]&&O.videos[0].thumbnailUrl||"";return l.jsxs("div",{className:"p-3 border rounded-md flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[V?l.jsx("img",{src:V,alt:O.name,width:1280,height:720,style:{width:160,height:90,objectFit:"cover"},className:"rounded"}):l.jsx("div",{className:"w-40 h-24 bg-muted rounded flex items-center justify-center text-xs",children:"No image"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:O.name}),l.jsx("div",{className:"text-sm text-muted-foreground",children:O.description})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>B(O.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Video",children:[l.jsx(Is,{className:"h-3 w-3 text-blue-600"}),l.jsx("span",{children:"Add Video"})]}),l.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>A(O.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add File",children:[l.jsx(Ms,{className:"h-3 w-3 text-green-600"}),l.jsx("span",{children:"Add File"})]}),l.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>R(O.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Quiz",children:[l.jsx(pi,{className:"h-3 w-3 text-purple-600"}),l.jsx("span",{children:"Add Quiz"})]}),l.jsx(ne,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if(z&&confirm(`Delete lecture "${O.name}"?`))try{await c(z.id,O.id)}catch(G){console.error(G),alert("Failed to delete lecture")}},children:l.jsx($n,{className:"h-3 w-3"})}),l.jsxs("div",{className:"flex items-center gap-2",children:[O.videos&&O.videos.length>0?(()=>{const G=(O.videos||[]).reduce((H,Y)=>H+f9(Y.duration||Y.time||Y.durationSeconds||Y.length),0);return l.jsxs("button",{onClick:()=>e(`/admin/videos?lecture=${O.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:[l.jsx(Is,{className:"h-4 w-4"}),l.jsxs("span",{children:["(",O.videos.length,")"]}),l.jsx("span",{className:"text-muted-foreground",children:p9(G)})]})})():l.jsx("button",{onClick:()=>e(`/admin/videos?lecture=${O.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:l.jsx(Is,{className:"h-4 w-4"})}),l.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${O.id}&tab=files`),className:"text-xs text-green-600 flex items-center gap-1 px-2",title:"Files",children:[l.jsx(Ms,{className:"h-4 w-4"}),l.jsxs("span",{children:["(",((U=O.files)==null?void 0:U.length)||0,")"]})]}),l.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${O.id}&tab=quizzes`),className:"text-xs text-purple-600 flex items-center gap-1 px-2",title:"Quizzes",children:[l.jsx(pi,{className:"h-4 w-4"}),l.jsxs("span",{children:["(",((k=O.quizzes)==null?void 0:k.length)||0,")"]})]})]})]})]},O.id)}):l.jsx("div",{className:"text-muted-foreground",children:"No lectures yet for this subject."})})})]})]}):l.jsx(ve,{children:l.jsxs(xe,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Subject not found"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"The subject you requested does not exist."}),l.jsx("div",{className:"mt-4",children:l.jsx(Bn,{to:"/admin/years",children:l.jsx(ne,{children:"Back to Years"})})})]})})}function g9({product:n,onClose:e,onSave:t}){const[r,i]=E.useState({name:(n==null?void 0:n.name)||"",description:(n==null?void 0:n.description)||"",price:(n==null?void 0:n.price)||0,images:(n==null?void 0:n.images)||[""],categoryId:(n==null?void 0:n.categoryId)||""}),[a,c]=E.useState(!1),[d,h]=E.useState(null),p=async b=>{b.preventDefault(),c(!0);try{const S={...r,images:r.images.filter(_=>_.trim()!=="")};t(S)}catch(S){console.error("Error saving product:",S)}finally{c(!1)}},g=()=>{i(b=>({...b,images:[...b.images,""]}))},y=(b,S)=>{i(_=>({..._,images:_.images.map((w,P)=>P===b?S:w)}))},v=b=>{i(S=>({...S,images:S.images.filter((_,w)=>w!==b)}))};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ne,{variant:"ghost",onClick:e,children:[l.jsx($s,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Product":"Add Product"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update product details":"Create a new product"})]})]})}),l.jsxs("form",{onSubmit:p,className:"space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsxs(Ye,{className:"flex items-center gap-2",children:[l.jsx(Yg,{className:"h-5 w-5 text-blue-600"}),"Product Information"]}),l.jsx(Tt,{children:"Basic information about the product"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"name",children:"Product Name *"}),l.jsx(De,{id:"name",placeholder:"e.g., Medical Textbook",value:r.name,onChange:b=>i(S=>({...S,name:b.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"price",children:"Price *"}),l.jsx(De,{id:"price",type:"number",step:"0.01",placeholder:"0.00",value:r.price,onChange:b=>i(S=>({...S,price:parseFloat(b.target.value)||0})),required:!0})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"description",children:"Description"}),l.jsx(_i,{id:"description",placeholder:"Describe the product...",value:r.description,onChange:b=>i(S=>({...S,description:b.target.value})),rows:4})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"categoryId",children:"Category ID (Optional)"}),l.jsx(De,{id:"categoryId",placeholder:"e.g., books, equipment",value:r.categoryId,onChange:b=>i(S=>({...S,categoryId:b.target.value}))})]})]})]}),l.jsxs(ve,{children:[l.jsx(qe,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx(Ye,{children:"Product Images"}),l.jsx(Tt,{children:"Add image URLs for the product"})]}),l.jsxs(ne,{type:"button",variant:"outline",onClick:g,children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Add Image"]})]})}),l.jsx(xe,{className:"space-y-4",children:r.images.map((b,S)=>l.jsxs("div",{className:`flex gap-2 items-center ${d===S?"border-2 border-dashed p-2 rounded":""}`,onDragOver:_=>{_.preventDefault(),h(S)},onDragEnter:_=>{_.preventDefault(),h(S)},onDragLeave:()=>{h(null)},onDrop:async _=>{_.preventDefault(),h(null);try{const w=_.dataTransfer;if(!w)return;if(w.files&&w.files.length>0){const I=w.files[0];try{let C=null;try{C=await Er(I)}catch(M){console.warn("Cloudinary upload failed, trying ImageKit fallback",(M==null?void 0:M.message)||M),C=await Sa(I,I.name)}C&&typeof C=="string"&&C.startsWith("http")?y(S,C):alert("Upload failed: unexpected response from upload provider")}catch(C){console.error("Drop upload error:",C);const z=((C==null?void 0:C.message)||String(C)||"").toLowerCase();if(z.includes("cloudinary signing did not return an api key")||z.includes("missing required parameter - api_key")||z.includes("missing required parameter 'api_key'")){const B=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(B&&B.trim())try{ba(null,null,B.trim());const A=await Er(I);if(A&&typeof A=="string"&&A.startsWith("http")){y(S,A);return}}catch(A){console.error("Retry after API key failed:",A)}}alert("Upload failed: "+((C==null?void 0:C.message)||C))}return}const P=w.getData("text/uri-list")||w.getData("text/plain");if(P&&P.startsWith("http")){if(!window.confirm(`Upload the dragged URL to Cloudinary and replace it?
`+P))return;const C=await Sb(P);C&&typeof C=="string"&&C.startsWith("http")?y(S,C):alert("Upload failed: unexpected response from server")}}catch(w){console.error("Drop upload error:",w),alert("Image upload failed: "+((w==null?void 0:w.message)||w))}},children:[l.jsx(De,{placeholder:"https://example.com/image.jpg",value:b,onChange:_=>y(S,_.target.value)}),l.jsx(ne,{type:"button",variant:"ghost",size:"icon",onClick:async()=>{var _;try{const w=(_=r.images[S])==null?void 0:_.trim();if(w&&(w.startsWith("http://")||w.startsWith("https://"))){try{if(!window.confirm(`Upload the current URL to Cloudinary/ImageKit and replace it?
`+w))return;try{const C=await Sb(w);if(C&&typeof C=="string"&&C.startsWith("http")){y(S,C);return}}catch(C){console.warn("uploadUrlToServer failed, will try ImageKit:",(C==null?void 0:C.message)||C)}try{const C=await Sa(w);if(C&&typeof C=="string"&&C.startsWith("http")){y(S,C);return}else alert("Upload failed: unexpected response from ImageKit")}catch(C){console.error("ImageKit URL upload error:",C),alert("URL upload failed: "+((C==null?void 0:C.message)||C))}}catch(I){console.error("URL upload error:",I),alert("URL upload failed: "+((I==null?void 0:I.message)||I))}return}const P=document.createElement("input");P.type="file",P.accept="image/*",P.onchange=async()=>{var C;const I=(C=P.files)==null?void 0:C[0];if(I)try{let M=null;try{M=await Er(I)}catch(z){console.warn("Cloudinary upload failed, trying ImageKit fallback",(z==null?void 0:z.message)||z);try{M=await Sa(I,I.name)}catch(B){throw console.error("ImageKit upload failed:",B),z}}if(!M||typeof M!="string"||!M.startsWith("http")){alert("Upload failed: unexpected response from upload provider");return}y(S,M)}catch(M){const z=(M==null?void 0:M.message)||String(M);console.error("Upload error:",M);const B=(z||"").toLowerCase();if(B.includes("cloudinary cloud name is not configured")){const A=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!A){alert("No cloud name provided.");return}const R=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),D=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");ba(A,R||null,D||null);try{const O=await Er(I);if(!O||typeof O!="string"||!O.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}y(S,O)}catch(O){console.error("Retry upload error:",O),alert("Upload failed after configuring Cloudinary: "+(O.message||O))}}else if(B.includes("cloudinary signing did not return an api key")||B.includes("missing required parameter - api_key")||B.includes("missing required parameter 'api_key'")){const A=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(A&&A.trim())try{ba(null,null,A.trim());const R=await Er(I);if(!R||typeof R!="string"||!R.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}y(S,R);return}catch(R){console.error("Retry upload error:",R),alert("Upload failed after setting API key: "+(R.message||R));return}}else alert("Image upload failed: "+(M.message||M))}},P.click()}catch(w){console.error(w),alert("Could not open file dialog")}},children:l.jsx(Qg,{className:"h-4 w-4"})}),r.images.length>1&&l.jsx(ne,{type:"button",variant:"outline",size:"icon",onClick:()=>v(S),children:l.jsx(Cu,{className:"h-4 w-4"})})]},S))})]}),r.name&&l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsx(Ye,{children:"Preview"}),l.jsx(Tt,{children:"How the product will appear"})]}),l.jsx(xe,{children:l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex items-start gap-4",children:[r.images[0]&&r.images[0].trim()&&(()=>{const b=rR(r.images[0]);return l.jsx("img",{src:b||void 0,alt:r.name,className:"w-20 h-20 object-cover rounded",onError:S=>{S.currentTarget.style.display="none",console.warn("Product preview image failed to load:",b||r.images[0])}})})(),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-lg",children:r.name}),l.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-1",children:["$",r.price.toFixed(2)]}),r.description&&l.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:r.description}),r.categoryId&&l.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Category: ",r.categoryId]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(ne,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(ne,{type:"submit",disabled:a,children:[l.jsx(Po,{className:"h-4 w-4 mr-2"}),a?"Saving...":n?"Update Product":"Add Product"]})]})]})]})}function KI(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[i,a]=E.useState(null);return E.useEffect(()=>{const p=Nr(ot(Be,"orders"),md("orderDate","desc")),g=Lo(p,async y=>{try{const v=await Gt(ot(Be,"products")),b={};v.forEach(_=>{const w=_.data();b[_.id]={id:_.id,name:w.name||w.title||"",price:w.price||0}});const S=[];y.forEach(_=>{var B,A;const w=_.data();let P=[];w.items&&Array.isArray(w.items)&&w.items.length>0?P=w.items:w.productsIds&&Array.isArray(w.productsIds)&&(P=w.productsIds.map(R=>{var D,O;return{productId:R,name:((D=b[R])==null?void 0:D.name)||R,quantity:1,price:((O=b[R])==null?void 0:O.price)||0}}));const I=w.total||w.totalAmount||w.totalPrice||0,C=w.address||w.shippingaddress||w.shippingAddress||"",M=w.userPhone||w.user_phone||w.phone||"";let z=new Date;w.createdAt&&typeof w.createdAt.toDate=="function"?z=w.createdAt.toDate():w.orderDate&&typeof w.orderDate.toDate=="function"?z=w.orderDate.toDate():w.orderDate&&(z=new Date(w.orderDate)),S.push({id:_.id,userId:w.userId||w.user_id||"",username:w.username||w.userName||w.user_name||w.customerName||"",userName:w.userName||w.user_name||w.customerName||"",userEmail:w.userEmail||w.email||"",userPhone:M,address:C,items:P,total:I,iscompleted:w.iscompleted===!0||w.isCompleted===!0||!1,status:w.status||(w.iscompleted===!0?"completed":"pending"),createdAt:z,updatedAt:(A=(B=w.updatedAt)==null?void 0:B.toDate)==null?void 0:A.call(B)})}),e(S),r(!1)}catch(v){console.error("Error processing orders:",v),a("Failed to load orders"),r(!1)}},y=>{console.error("Failed to load orders:",y),a("Failed to load orders"),r(!1)});return()=>g()},[]),{orders:n,loading:t,error:i,createOrder:async p=>{try{await Pn(ot(Be,"orders"),{...p,createdAt:new Date})}catch(g){console.error("Error creating order:",g)}},updateOrder:async(p,g)=>{try{const y={...g,updatedAt:new Date};(g.status==="completed"||g.isCompleted)&&(y.isCompleted=!0,y.iscompleted=!0,y.completedAt=new Date,y.status="completed"),await Nn(Pt(Be,"orders",p),y)}catch(y){console.error("Error updating order:",y)}},deleteOrder:async p=>{try{await Us(Pt(Be,"orders",p))}catch(g){console.error("Error deleting order:",g)}}}}function y9(){const[n,e]=E.useState(""),[t,r]=E.useState(!1),[i,a]=E.useState(null),{products:c,loading:d,error:h,isOfflineMode:p,createProduct:g,updateProduct:y,deleteProduct:v,retryConnection:b}=pC(),{createOrder:S}=KI(),_=()=>{a(null),r(!0)},w=C=>{a(C),r(!0)},P=async(C,M)=>{confirm(`Are you sure you want to delete "${M}"?`)&&await v(C)};if(t)return l.jsx(g9,{product:i,onClose:()=>{r(!1),a(null)},onSave:async C=>{try{i?await y(i.id,C):await g(C),r(!1),a(null)}catch(M){console.error("Error saving product:",M),alert("Failed to save product. Please try again.")}}});const I=c.filter(C=>C.name.toLowerCase().includes(n.toLowerCase())||C.description.toLowerCase().includes(n.toLowerCase()));return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Store Management"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-muted-foreground",children:"Manage store products and categories"}),p&&l.jsxs("span",{className:"flex items-center gap-1 text-orange-600 font-medium text-sm",children:[l.jsx("div",{className:"h-2 w-2 bg-orange-600 rounded-full"}),"Offline Mode"]})]})]})}),d&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(xo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading products..."})]})}),h&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading products"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:h}),l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx(ne,{onClick:b,variant:"outline",children:"Retry Connection"}),l.jsx(ne,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!d&&!h&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[l.jsxs(ve,{children:[l.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Ye,{className:"text-sm font-medium",children:"Total Products"}),l.jsx(Yg,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(xe,{children:l.jsx("div",{className:"text-2xl font-bold",children:c.length})})]}),l.jsxs(ve,{children:[l.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Ye,{className:"text-sm font-medium",children:"Average Price"}),l.jsx(y1,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(xe,{children:l.jsxs("div",{className:"text-2xl font-bold",children:["$",c.length>0?(c.reduce((C,M)=>C+M.price,0)/c.length).toFixed(2):"0.00"]})})]}),l.jsxs(ve,{children:[l.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Ye,{className:"text-sm font-medium",children:"Categories"}),l.jsx(xu,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(xe,{children:l.jsx("div",{className:"text-2xl font-bold",children:new Set(c.map(C=>C.categoryId).filter(C=>C&&C.trim())).size})})]})]}),l.jsxs($C,{defaultValue:"products",className:"space-y-6",children:[l.jsxs(Ex,{className:"grid w-full grid-cols-2",children:[l.jsxs(Wu,{value:"products",className:"flex items-center gap-2",children:[l.jsx(sv,{className:"h-4 w-4"}),"Products (",c.length,")"]}),l.jsxs(Wu,{value:"categories",className:"flex items-center gap-2",children:[l.jsx(xu,{className:"h-4 w-4"}),"Categories"]})]}),l.jsxs(Hu,{value:"products",className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"relative flex-1 max-w-sm",children:[l.jsx(cc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(De,{placeholder:"Search products...",value:n,onChange:C=>e(C.target.value),className:"pl-10"})]}),l.jsxs(ne,{onClick:_,children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),I.length===0?l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(Yg,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:n?"No products found":"No products yet"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"Try adjusting your search terms":"Add your first product to get started"}),!n&&l.jsxs(ne,{onClick:_,children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Add First Product"]})]})}):l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:I.map(C=>l.jsxs(ve,{className:"overflow-hidden",children:[l.jsxs("div",{className:"aspect-video bg-muted relative",children:[C.images&&C.images[0]?l.jsx("img",{src:C.images[0],alt:C.name,className:"w-full h-full object-cover",onError:M=>{M.currentTarget.style.display="none",M.currentTarget.nextElementSibling.style.display="flex"}}):null,l.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{display:C.images&&C.images[0]?"none":"flex"},children:l.jsx(Qg,{className:"h-12 w-12 text-muted-foreground"})})]}),l.jsxs(qe,{className:"pb-2",children:[l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsx(Ye,{className:"text-lg line-clamp-1",children:C.name}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>w(C),className:"h-8 w-8",children:l.jsx(Xu,{className:"h-3 w-3"})}),l.jsx(ne,{variant:"ghost",size:"icon",onClick:async()=>{try{const M=document.createElement("input");M.type="file",M.accept="image/*",M.onchange=async()=>{var B;const z=(B=M.files)==null?void 0:B[0];if(z)try{let A=null;try{A=await Er(z)}catch(R){console.warn("Cloudinary upload failed, trying ImageKit fallback",(R==null?void 0:R.message)||R);try{A=await Sa(z,z.name)}catch(D){throw console.error("ImageKit upload failed:",D),R}}if(!A||typeof A!="string"||!A.startsWith("http")){console.error("Invalid upload response:",A),alert("Image upload failed: unexpected response from upload provider");return}await y(C.id,{images:[A]})}catch(A){console.error(A);const D=((A==null?void 0:A.message)||String(A)||"").toLowerCase();if(D.includes("cloudinary cloud name is not configured")){const O=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!O){alert("No cloud name provided. Upload cancelled.");return}const V=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),U=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");try{ba(O,V||null,U||null);const k=await Er(z);if(console.log("Cloudinary upload result after config:",k),!k||typeof k!="string"||!k.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await y(C.id,{images:[k]})}catch(k){console.error(k),alert("Image upload failed after configuring Cloudinary: "+(k.message||k))}return}else if(D.includes("cloudinary signing did not return an api key")||D.includes("missing required parameter - api_key")||D.includes("missing required parameter 'api_key'")){const O=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(O&&O.trim())try{ba(null,null,O.trim());const V=await Er(z);if(!V||typeof V!="string"||!V.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await y(C.id,{images:[V]});return}catch(V){console.error(V),alert("Image upload failed after setting API key: "+(V.message||V));return}}alert("Image upload failed: "+(A.message||A))}},M.click()}catch(M){console.error(M),alert("Could not open file dialog")}},className:"h-8 w-8",children:l.jsx(Qg,{className:"h-3 w-3"})}),l.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>P(C.id,C.name),className:"h-8 w-8 text-destructive hover:text-destructive",children:l.jsx($n,{className:"h-3 w-3"})}),l.jsx(ne,{variant:"outline",size:"sm",onClick:async()=>{try{const M=window.prompt("Your full name:");if(!M)return;const z=window.prompt("Your email:");if(!z)return;const B=window.prompt("Quantity:","1")||"1",A=parseInt(B)||1,R=window.prompt("Phone (optional):","")||"",D=window.prompt("Address (optional):","")||"";await S({username:M,userName:M,userEmail:z,userPhone:R,address:D,items:[{productId:C.id,name:C.name,quantity:A,price:C.price}],total:C.price*A,status:"pending",createdAt:new Date}),alert("Order placed successfully")}catch(M){console.error(M),alert("Failed to place order")}},children:"Buy"})]})]}),l.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",C.price.toFixed(2)]})]}),l.jsxs(xe,{className:"pt-0",children:[C.description&&l.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:C.description}),l.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[l.jsx("span",{children:C.createdAt.toLocaleDateString()}),C.categoryId&&l.jsx(on,{variant:"secondary",className:"text-xs",children:C.categoryId})]})]})]},C.id))})]}),l.jsxs(Hu,{value:"categories",className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Categories"}),l.jsxs(ne,{disabled:!0,children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Add Category"]})]}),l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(xu,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Category Management"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"Category management will be implemented in the future."}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"For now, you can specify category IDs when creating products."})]})})]})]})]})]})}function v9({order:n,onChangeStatus:e,onDelete:t}){var r,i;return l.jsxs(ve,{children:[l.jsx(qe,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(Ye,{children:["Order for ",n.username||n.userName,l.jsx("div",{className:"text-xs text-muted-foreground",children:(i=(r=n.createdAt)==null?void 0:r.toLocaleString)==null?void 0:i.call(r)})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(on,{variant:n.status==="completed"||n.iscompleted?"default":"secondary",children:[n.status,n.iscompleted?" â€¢ completed":""]}),l.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>e(n.id,"completed"),children:[l.jsx(X0,{className:"h-4 w-4 mr-1"})," Complete"]}),l.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>t(n.id),className:"text-destructive",children:l.jsx($n,{className:"h-4 w-4"})})]})]})}),l.jsxs(xe,{children:[l.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact"}),l.jsx("div",{className:"font-medium",children:n.username||n.userName}),l.jsx("div",{className:"text-sm",children:n.userEmail}),n.userPhone&&l.jsx("div",{className:"text-sm",children:n.userPhone}),n.address&&l.jsx("div",{className:"text-sm",children:n.address})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Items"}),l.jsxs("div",{className:"space-y-2 mt-2",children:[n.items&&n.items.length>0?n.items.map((a,c)=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-sm",children:[a.name," x",a.quantity]}),l.jsxs("div",{className:"font-medium",children:["$",(a.price*a.quantity).toFixed(2)]})]},c)):l.jsx("div",{className:"text-sm text-muted-foreground",children:"No item details. Products IDs may be attached in the raw order."}),n.productsIds&&n.productsIds.length>0&&l.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Product IDs: ",(n.productsIds||[]).join(", ")]}),l.jsxs("div",{className:"flex items-center justify-between pt-2 border-t mt-2",children:[l.jsx("div",{className:"font-medium",children:"Total"}),l.jsxs("div",{className:"font-bold",children:["$",(n.total||0).toFixed(2)]})]})]})]})]}),l.jsxs("div",{className:"flex gap-2 mt-4",children:[l.jsxs(ne,{onClick:()=>e(n.id,"paid"),children:[l.jsx(X0,{className:"h-4 w-4 mr-2"})," Mark Paid"]}),l.jsxs(ne,{variant:"outline",onClick:()=>e(n.id,"cancelled"),children:[l.jsx(pP,{className:"h-4 w-4 mr-2"})," Cancel"]})]})]})]},n.id)}function x9(){const{orders:n,loading:e,error:t,updateOrder:r,deleteOrder:i}=KI(),a=async(d,h)=>{d&&await r(d,{status:h})},c=async d=>{d&&confirm("Delete this order?")&&await i(d)};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Orders"}),l.jsx("p",{className:"text-muted-foreground",children:"View and manage store orders"})]})}),e&&l.jsx("div",{children:"Loading..."}),t&&l.jsx("div",{className:"text-destructive",children:t}),!e&&!t&&l.jsx("div",{className:"grid gap-4",children:n.map(d=>l.jsx(v9,{order:d,onChangeStatus:a,onDelete:c},d.id))})]})}function Sx(n,e){const[t,r]=E.useState([]),[i,a]=E.useState(!0),[c,d]=E.useState(null);return E.useEffect(()=>{let h=null,p=!0;return(async()=>{if(!n){r([]),a(!1);return}try{const y=Nr(wa(Be,"lectures"),rU(K3(),"==",n)),v=await Gt(y);if(v.empty){p&&(r([]),a(!1));return}const b=v.docs[0],S=ot(b.ref,e);h=Lo(S,_=>{if(!p)return;const w=[];_.forEach(P=>{const I=P.data();w.push({id:P.id,...I})}),r(w),a(!1)},_=>{console.error(`Failed to subscribe to ${e}:`,_),d(`Failed to load ${e}`),a(!1)})}catch(y){console.error(`Error resolving lecture for ${e}:`,y),p&&(d(y.message||String(y)),a(!1))}})(),()=>{p=!1,h&&h()}},[n,e]),{items:t,loading:i,error:c}}function w9(n){return Sx(n,"videos")}function _9(n){return Sx(n,"files")}function GI(n){return Sx(n,"quizzes")}function E9(){var p;const[n]=td(),e=n.get("lecture"),{lectures:t,loading:r,error:i}=Dp(),{items:a,loading:c,error:d}=w9(e);if(c||r)return l.jsx("div",{children:"Loading..."});if(d||i)return l.jsx("div",{className:"text-destructive",children:d||i});const h=t.find(g=>g.id===e);return h?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Videos for ",h.title||h.id]}),l.jsx("p",{className:"text-muted-foreground",children:h.description})]}),l.jsx("div",{children:l.jsx(Bn,{to:"/admin/resources",children:l.jsx(ne,{variant:"ghost",children:"Back"})})})]}),l.jsxs(ve,{children:[l.jsx(qe,{children:l.jsxs(Ye,{children:["Videos (",((p=h.videos)==null?void 0:p.length)||0,")"]})}),l.jsx(xe,{children:a&&a.length>0?l.jsx("div",{className:"space-y-3",children:a.map(g=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[g.thumbnailUrl?l.jsx("img",{src:g.thumbnailUrl,alt:g.title,className:"w-32 h-18 object-cover rounded"}):l.jsx("div",{className:"w-32 h-18 bg-muted rounded"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:g.title||"Untitled"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:g.description})]})]}),l.jsx("div",{children:l.jsxs(ne,{onClick:()=>window.open(g.url||g.youtubeUrl||"","_blank"),children:[" ",l.jsx(Is,{className:"h-4 w-4 mr-2"})," Play "]})})]},g.id))}):l.jsx("p",{className:"text-muted-foreground",children:"No videos available for this lecture."})})]})]}):l.jsx(ve,{children:l.jsxs(xe,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its videos."}),l.jsx("div",{className:"mt-4",children:l.jsx(Bn,{to:"/admin/years",children:l.jsx(ne,{children:"Back to Years"})})})]})})}function b9(){var p;const[n]=td(),e=n.get("lecture"),{lectures:t,loading:r,error:i}=Dp(),{items:a,loading:c,error:d}=_9(e);if(c||r)return l.jsx("div",{children:"Loading..."});if(d||i)return l.jsx("div",{className:"text-destructive",children:d||i});const h=t.find(g=>g.id===e);return h?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Files for ",h.title||h.id]}),l.jsx("p",{className:"text-muted-foreground",children:h.description})]}),l.jsx("div",{children:l.jsx(Bn,{to:"/admin/resources",children:l.jsx(ne,{variant:"ghost",children:"Back"})})})]}),l.jsxs(ve,{children:[l.jsx(qe,{children:l.jsxs(Ye,{children:["Files (",((p=h.files)==null?void 0:p.length)||0,")"]})}),l.jsx(xe,{children:a&&a.length>0?l.jsx("div",{className:"space-y-3",children:a.map(g=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Ms,{className:"h-6 w-6 text-blue-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:g.title||g.name||"Untitled File"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:g.description})]})]}),l.jsx("div",{children:l.jsx(ne,{onClick:()=>window.open(g.fileUrl||g.url||"_blank"),children:"Download"})})]},g.id))}):l.jsx("p",{className:"text-muted-foreground",children:"No files available for this lecture."})})]})]}):l.jsx(ve,{children:l.jsxs(xe,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its files."}),l.jsx("div",{className:"mt-4",children:l.jsx(Bn,{to:"/admin/years",children:l.jsx(ne,{children:"Back to Years"})})})]})})}function S9(){var p;const[n]=td(),e=n.get("lecture"),{lectures:t,loading:r,error:i}=Dp(),{items:a,loading:c,error:d}=GI(e);if(c||r)return l.jsx("div",{children:"Loading..."});if(d||i)return l.jsx("div",{className:"text-destructive",children:d||i});const h=t.find(g=>g.id===e);return h?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Quizzes for ",h.title||h.id]}),l.jsx("p",{className:"text-muted-foreground",children:h.description})]}),l.jsx("div",{children:l.jsx(Bn,{to:"/admin/resources",children:l.jsx(ne,{variant:"ghost",children:"Back"})})})]}),l.jsxs(ve,{children:[l.jsx(qe,{children:l.jsxs(Ye,{children:["Quizzes (",((p=h.quizzes)==null?void 0:p.length)||0,")"]})}),l.jsx(xe,{children:a&&a.length>0?l.jsx("div",{className:"space-y-3",children:a.map(g=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(pi,{className:"h-6 w-6 text-purple-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:g.title||"Untitled Quiz"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:g.description}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",l.jsx("strong",{children:g.type||"multiple_choice"})]})]})]}),l.jsx("div",{children:(g.type||"multiple_choice")==="flashcard"?l.jsx(ne,{onClick:()=>window.location.href=`/admin/flashcards?lecture=${e}&quiz=${g.id}`,children:"Flashcards"}):l.jsx(ne,{onClick:()=>alert("Multiple choice runner not implemented. Use Flashcards or implement MCQ runner."),children:"Start"})})]},g.id))}):l.jsx("p",{className:"text-muted-foreground",children:"No quizzes available for this lecture."})})]})]}):l.jsx(ve,{children:l.jsxs(xe,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its quizzes."}),l.jsx("div",{className:"mt-4",children:l.jsx(Bn,{to:"/admin/years",children:l.jsx(ne,{children:"Back to Years"})})})]})})}var Nx="Progress",Tx=100,[N9,rz]=Ei(Nx),[T9,C9]=N9(Nx),QI=E.forwardRef((n,e)=>{const{__scopeProgress:t,value:r=null,max:i,getValueLabel:a=I9,...c}=n;(i||i===0)&&!Tb(i)&&console.error(j9(`${i}`,"Progress"));const d=Tb(i)?i:Tx;r!==null&&!Cb(r,d)&&console.error(A9(`${r}`,"Progress"));const h=Cb(r,d)?r:null,p=Hf(h)?a(h,d):void 0;return l.jsx(T9,{scope:t,value:h,max:d,children:l.jsx(et.div,{"aria-valuemax":d,"aria-valuemin":0,"aria-valuenow":Hf(h)?h:void 0,"aria-valuetext":p,role:"progressbar","data-state":JI(h,d),"data-value":h??void 0,"data-max":d,...c,ref:e})})});QI.displayName=Nx;var YI="ProgressIndicator",XI=E.forwardRef((n,e)=>{const{__scopeProgress:t,...r}=n,i=C9(YI,t);return l.jsx(et.div,{"data-state":JI(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});XI.displayName=YI;function I9(n,e){return`${Math.round(n/e*100)}%`}function JI(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function Hf(n){return typeof n=="number"}function Tb(n){return Hf(n)&&!isNaN(n)&&n>0}function Cb(n,e){return Hf(n)&&!isNaN(n)&&n<=e&&n>=0}function j9(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Tx}\`.`}function A9(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Tx} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var ZI=QI,P9=XI;const ej=E.forwardRef(({className:n,value:e,...t},r)=>l.jsx(ZI,{ref:r,className:at("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:l.jsx(P9,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));ej.displayName=ZI.displayName;function R9(){const[n]=td(),e=n.get("lecture"),t=n.get("quiz"),{items:r,loading:i,error:a}=GI(e),c=r.find(U=>U.id===t),[d,h]=E.useState(0),[p,g]=E.useState([]);if(i)return l.jsx("div",{children:"Loading..."});if(a)return l.jsx("div",{className:"text-destructive",children:a});if(!c)return l.jsx(ve,{children:l.jsxs(xe,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Quiz not found"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a quiz to start flashcards."}),l.jsx("div",{className:"mt-4",children:l.jsx(Bn,{to:"/admin/quizzes",children:l.jsx(ne,{children:"Back"})})})]})});const y=c.questions||[],v=y.reduce((U,k)=>U+(k.weight&&Number(k.weight)||1),0),b=y[d],S=b&&(b.weight||1)||1,_=p[d]??0,[w,P]=E.useState(!1),[I,C]=E.useState([]),[M,z]=E.useState(null);E.useEffect(()=>{P(!1),C([]),z(null)},[d]);const B=(U,k)=>{const G=[...p];G[U]=k,g(G)},A=p.reduce((U,k,G)=>U+(k||0),0),R=Math.round(A/v*100),D=U=>{if(!U)return[{type:"text",value:""}];const k=[],G=/\[\[(.+?)\]\]/g;let H=0,Y;for(;(Y=G.exec(U))!==null;)Y.index>H&&k.push({type:"text",value:U.slice(H,Y.index)}),k.push({type:"blank",value:Y[1]}),H=G.lastIndex;return H<U.length&&k.push({type:"text",value:U.slice(H)}),k},O=()=>{const U=(b==null?void 0:b.question)||"",G=D(U).filter(H=>H.type==="blank");G.length>0?C(G.map(()=>"")):C([""]),z(null),P(!0)},V=()=>{const U=(b==null?void 0:b.question)||"",G=D(U).filter(W=>W.type==="blank").map(W=>W.value);let H=[];G.length>0?H=G:b&&Array.isArray(b.options)&&typeof b.correctAnswer=="number"?H=[b.options[b.correctAnswer]||""]:b&&(b.answer||b.correct)&&(H=[String(b.answer||b.correct)]);const se=I.map((W,ee)=>{const ae=(H[ee]??H[0]??"").toString().trim().toLowerCase();return W.toString().trim().toLowerCase()===ae&&ae!==""}).every(Boolean);z(se?"Correct":"Incorrect"),se&&B(d,S)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Flashcards: ",c.title]}),l.jsx("p",{className:"text-muted-foreground",children:"Fill marks per question. Total progress shows weighted score."})]}),l.jsx("div",{children:l.jsx(Bn,{to:"/admin/quizzes",children:l.jsx(ne,{variant:"ghost",children:"Back"})})})]}),l.jsxs(ve,{children:[l.jsx(qe,{children:l.jsx(Ye,{children:"Progress"})}),l.jsxs(xe,{children:[l.jsxs("div",{className:"mb-2 text-sm",children:["Total: ",v," points â€” Current: ",A," points"]}),l.jsx(ej,{value:R}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[R,"%"]})]})]}),l.jsxs(ve,{children:[l.jsx(qe,{children:l.jsxs(Ye,{children:["Question ",d+1," / ",y.length]})}),l.jsx(xe,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"font-medium",children:w?l.jsxs("div",{className:"space-y-2",children:[(()=>{const U=D(b.question||"");let k=0;return l.jsxs("div",{children:[U.map((G,H)=>{if(G.type==="text")return l.jsx("span",{children:G.value},H);const Y=k++;return l.jsx("input",{value:I[Y]??"",onChange:se=>C(W=>{const ee=[...W];return ee[Y]=se.target.value,ee}),placeholder:"Fill the blank",className:"border-b-2 border-gray-300 px-1 mx-1"},H)}),U.length===1&&U[0].type==="text"&&l.jsx("div",{children:l.jsx("input",{value:I[0]??"",onChange:G=>C(H=>{const Y=[...H];return Y[0]=G.target.value,Y}),placeholder:"Answer",className:"border-b-2 border-gray-300 px-1"})})]})})(),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsx(ne,{onClick:V,children:"Check"}),l.jsx(ne,{variant:"outline",onClick:()=>{P(!1),z(null)},children:"Cancel"}),M&&l.jsx("div",{className:"ml-2 text-sm",children:M})]})]}):l.jsx("span",{role:"button",tabIndex:0,onClick:O,onKeyDown:U=>{U.key==="Enter"&&O()},children:b.question})}),b.imageUrl&&l.jsx("img",{src:b.imageUrl,alt:"question",className:"w-full max-w-md object-contain"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Weight: ",S]}),l.jsxs("label",{className:"text-sm",children:["Mark (0 - ",S,")"]}),l.jsx("input",{type:"number",min:0,max:S,value:_,onChange:U=>B(d,Math.max(0,Math.min(S,Number(U.target.value)||0))),className:"border rounded px-2 py-1 w-24"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(ne,{disabled:d===0,onClick:()=>h(U=>Math.max(0,U-1)),children:"Previous"}),l.jsx(ne,{disabled:d===y.length-1,onClick:()=>h(U=>Math.min(y.length-1,U+1)),children:"Next"}),l.jsx(ne,{variant:"outline",onClick:()=>{g([]),h(0)},children:"Reset"})]}),l.jsx("div",{className:"mt-4",children:l.jsx(ne,{onClick:()=>alert(`Final score: ${A}/${v} (${R}%)`),children:"Finish"})})]})})]})]})}function k9(){return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),l.jsx("p",{className:"text-muted-foreground",children:"Configure application settings and preferences"})]}),l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(x1,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Application Settings"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"This section will provide configuration options for the admin panel."}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Features: User management, system configuration, backup settings, security options."})]})})]})}function O9(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[i,a]=E.useState(null);return E.useEffect(()=>{const p=Nr(ot(Be,"maps")),g=Lo(p,y=>{const v=[];y.forEach(b=>{var _,w;const S=b.data();v.push({id:b.id,name:S.name||"",location:S.location||"",description:S.description||S.desc||"",type:S.type||S.mapType||"",video_url:S.video_url||S.videoUrl||"",createdAt:((w=(_=S.createdAt)==null?void 0:_.toDate)==null?void 0:w.call(_))||void 0})}),e(v),r(!1)},y=>{console.error("Failed to load maps:",y),a("Failed to load maps"),r(!1)});return()=>g()},[]),{maps:n,loading:t,error:i,createMap:async p=>{const g={...p,createdAt:new Date};g.type&&!g.mapType&&(g.mapType=g.type),g.mapType&&!g.type&&(g.type=g.mapType),["name","location","description","video_url","type","mapType"].forEach(y=>{typeof g[y]=="string"&&(g[y]=g[y].trim())}),await Pn(ot(Be,"maps"),g)},updateMap:async(p,g)=>{const y={...g};y.type&&!y.mapType&&(y.mapType=y.type),y.mapType&&!y.type&&(y.type=y.mapType),["name","location","description","video_url","type","mapType"].forEach(v=>{typeof y[v]=="string"&&(y[v]=y[v].trim())}),await Nn(Pt(Be,"maps",p),y)},deleteMap:async p=>{await Us(Pt(Be,"maps",p))}}}function D9(){const{maps:n,loading:e,error:t,createMap:r,updateMap:i,deleteMap:a}=O9(),[c,d]=E.useState({name:"",location:"",description:"",video_url:"",type:""}),[h,p]=E.useState(!1),[g,y]=E.useState(null),v=()=>d({name:"",location:"",description:"",video_url:"",type:""}),b=async S=>{if(S.preventDefault(),!!c.name.trim()){p(!0);try{g?await i(g,c):await r(c),v(),y(null)}catch(_){console.error("Error saving map:",_),alert("Failed to save map")}finally{p(!1)}}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Tu,{className:"h-6 w-6 text-blue-600"}),l.jsx("h1",{className:"text-3xl font-bold",children:"Maps"})]}),l.jsxs(ve,{children:[l.jsx(qe,{children:l.jsx(Ye,{children:"Add Map"})}),l.jsx(xe,{children:l.jsxs("form",{onSubmit:b,className:"grid md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{children:"Name"}),l.jsx(De,{value:c.name,onChange:S=>d(_=>({..._,name:S.target.value})),placeholder:"Map name",required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{children:"Location"}),l.jsx(De,{value:c.location,onChange:S=>d(_=>({..._,location:S.target.value})),placeholder:"Location"})]}),l.jsxs("div",{className:"space-y-2 md:col-span-3",children:[l.jsx(Pe,{children:"Description"}),l.jsx("textarea",{value:c.description,onChange:S=>d(_=>({..._,description:S.target.value})),placeholder:"Short description",className:"w-full border rounded px-3 py-2",rows:3})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{children:"Type"}),l.jsxs("select",{className:"w-full border rounded px-3 py-2",value:c.type,onChange:S=>d(_=>({..._,type:S.target.value})),children:[l.jsx("option",{value:"",children:"Select type"}),l.jsx("option",{value:"Ù‚Ø§Ø¹Ø© Ø¯Ø±Ø§Ø³ÙŠØ©",children:"Ù‚Ø§Ø¹Ø© Ø¯Ø±Ø§Ø³ÙŠØ©"}),l.jsx("option",{value:"Ù„Ø§Ø¨Ø§Øª",children:"Ù„Ø§Ø¨Ø§Øª"}),l.jsx("option",{value:"Ù…Ø¯Ø±Ø¬",children:"Ù…Ø¯Ø±Ø¬"}),l.jsx("option",{value:"Ù‚Ø§Ø¹Ø§Øª Ø§Ù…ØªØ­Ø§Ù†Ø§Øª",children:"Ù‚Ø§Ø¹Ø§Øª Ø§Ù…ØªØ­Ø§Ù†Ø§Øª"}),l.jsx("option",{value:"Ù…Ø·Ø¹Ù…",children:"Ù…Ø·Ø¹Ù…"}),l.jsx("option",{value:"Ù…ØµÙ„Ù‰",children:"Ù…ØµÙ„Ù‰"}),l.jsx("option",{value:"Ø£Ø®Ø±Ù‰",children:"Ø£Ø®Ø±Ù‰"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{children:"Video URL"}),l.jsx(De,{value:c.video_url,onChange:S=>d(_=>({..._,video_url:S.target.value})),placeholder:"https://..."})]}),l.jsx("div",{className:"md:col-span-3 flex justify-end space-x-2",children:g?l.jsxs(l.Fragment,{children:[l.jsx(ne,{type:"button",variant:"outline",onClick:()=>{y(null),v()},children:"Cancel"}),l.jsxs(ne,{type:"submit",disabled:h,children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"}),h?"Saving...":"Save"]})]}):l.jsxs(ne,{type:"submit",disabled:h,children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"}),h?"Adding...":"Add"]})})]})})]}),l.jsxs(ve,{children:[l.jsx(qe,{children:l.jsxs(Ye,{children:["All Maps (",n.length,")"]})}),l.jsx(xe,{children:e?l.jsx("div",{children:"Loading..."}):t?l.jsx("div",{className:"text-destructive",children:t}):n.length===0?l.jsx("div",{className:"text-muted-foreground",children:"No maps yet."}):l.jsx("div",{className:"grid gap-3",children:n.map(S=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-medium truncate",children:S.name}),l.jsx("div",{className:"text-xs text-muted-foreground truncate",children:S.location}),S.type&&l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",l.jsx("span",{className:"font-medium",children:S.type})]}),S.description&&l.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:S.description}),S.video_url&&l.jsx("a",{className:"text-xs text-blue-600 hover:underline",href:S.video_url,target:"_blank",rel:"noreferrer",children:S.video_url})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>{y(S.id),d({name:S.name||"",location:S.location||"",description:S.description||"",video_url:S.video_url||"",type:S.type||""}),window.scrollTo({top:0,behavior:"smooth"})},className:"",children:"Edit"}),l.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>a(S.id),className:"text-destructive",children:l.jsx($n,{className:"h-4 w-4"})})]})]},S.id))})})]})]})}function L9({research:n,onClose:e,onSave:t}){const[r,i]=E.useState({projectTitle:"",abstract:"",fieldOfResearch:[],contactPerson:[],authorshipPosition:[],projectDuration:"",requiredSkills:[],supervisor:""}),[a,c]=E.useState(""),[d,h]=E.useState("");E.useEffect(()=>{n&&i({projectTitle:n.projectTitle||"",abstract:n.abstract||"",fieldOfResearch:n.fieldOfResearch||[],contactPerson:n.contactPerson||[],authorshipPosition:n.authorshipPosition||[],projectDuration:n.projectDuration||"",requiredSkills:n.requiredSkills||[],supervisor:n.supervisor||""})},[n]);const p=()=>{const S=a.trim();S&&(r.fieldOfResearch.includes(S)||i(_=>({..._,fieldOfResearch:[..._.fieldOfResearch,S]})),c(""))},g=()=>{const S=d.trim();S&&(r.requiredSkills.includes(S)||i(_=>({..._,requiredSkills:[..._.requiredSkills,S]})),h(""))},y=S=>i(_=>({..._,fieldOfResearch:_.fieldOfResearch.filter(w=>w!==S)})),v=S=>i(_=>({..._,requiredSkills:_.requiredSkills.filter(w=>w!==S)})),b=S=>{S.preventDefault();const _={projectTitle:r.projectTitle,abstract:r.abstract,fieldOfResearch:r.fieldOfResearch,contactPerson:r.contactPerson,authorshipPosition:r.authorshipPosition,projectDuration:r.projectDuration,requiredSkills:r.requiredSkills,supervisor:r.supervisor,updatedAt:new Date,...n?{}:{createdAt:new Date}};t(_)};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ne,{variant:"ghost",onClick:e,children:[l.jsx($s,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Research":"Create Research"}),l.jsx("p",{className:"text-muted-foreground",children:"Add or update research project details"})]})]})}),l.jsx("form",{onSubmit:b,className:"space-y-6",children:l.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsx(Ye,{children:"Project Details"}),l.jsx(Tt,{children:"Title and abstract"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"title",children:"Project Title *"}),l.jsx(De,{id:"title",placeholder:"Enter project title...",value:r.projectTitle,onChange:S=>i(_=>({..._,projectTitle:S.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"abstract",children:"Abstract"}),l.jsx(_i,{id:"abstract",placeholder:"Write a brief abstract...",value:r.abstract,onChange:S=>i(_=>({..._,abstract:S.target.value})),rows:8})]})]})]}),l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsx(Ye,{children:"Fields & Skills"}),l.jsx(Tt,{children:"Fields of research and required skills"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Pe,{children:"Field of Research"}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx(De,{placeholder:"Add field e.g., Oncology",value:a,onChange:S=>c(S.target.value),onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),p())}}),l.jsx(ne,{type:"button",onClick:p,variant:"outline",children:"Add"})]}),l.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.fieldOfResearch.map(S=>l.jsxs(on,{variant:"secondary",className:"flex items-center gap-2",children:[S,l.jsx("button",{type:"button",onClick:()=>y(S),className:"ml-1 hover:text-destructive",children:l.jsx(Cu,{className:"h-3 w-3"})})]},S))})]}),l.jsxs("div",{children:[l.jsx(Pe,{children:"Required Skills"}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx(De,{placeholder:"Add skill e.g., Data analysis",value:d,onChange:S=>h(S.target.value),onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),g())}}),l.jsx(ne,{type:"button",onClick:g,variant:"outline",children:"Add"})]}),l.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.requiredSkills.map(S=>l.jsxs(on,{variant:"secondary",className:"flex items-center gap-2",children:[S,l.jsx("button",{type:"button",onClick:()=>v(S),className:"ml-1 hover:text-destructive",children:l.jsx(Cu,{className:"h-3 w-3"})})]},S))})]})]})]})]}),l.jsx("div",{className:"space-y-6",children:l.jsxs(ve,{children:[l.jsxs(qe,{children:[l.jsx(Ye,{children:"Meta"}),l.jsx(Tt,{children:"Contact, supervisor and duration"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{children:"Contact Person(s)"}),l.jsx(De,{placeholder:"Comma separated names",value:r.contactPerson.join(", "),onChange:S=>i(_=>({..._,contactPerson:S.target.value.split(",").map(w=>w.trim()).filter(Boolean)}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{children:"Authorship Positions"}),l.jsx(De,{placeholder:"Comma separated positions",value:r.authorshipPosition.join(", "),onChange:S=>i(_=>({..._,authorshipPosition:S.target.value.split(",").map(w=>w.trim()).filter(Boolean)}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{children:"Supervisor"}),l.jsx(De,{placeholder:"Supervisor name",value:r.supervisor,onChange:S=>i(_=>({..._,supervisor:S.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{children:"Project Duration"}),l.jsx(De,{placeholder:"e.g., 6 months",value:r.projectDuration,onChange:S=>i(_=>({..._,projectDuration:S.target.value}))})]}),l.jsxs("div",{className:"flex justify-end",children:[l.jsx(ne,{variant:"ghost",onClick:e,className:"mr-2",children:"Cancel"}),l.jsx(ne,{type:"submit",children:"Save"})]})]})]})})]})})]})}const M9=[{id:"r1",projectTitle:"Impact of Early Clinical Exposure on Medical Students",abstract:"A study investigating how early clinical exposure affects students' clinical reasoning and confidence.",fieldOfResearch:["Medical Education","Clinical Skills"],contactPerson:["Dr. Sarah Johnson"],authorshipPosition:["Lead","Co-author"],projectDuration:"6 months",requiredSkills:["Clinical observation","Data analysis"],supervisor:"Prof. Michael Chen",createdAt:new Date,updatedAt:new Date}];function F9(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[i,a]=E.useState(null),[c,d]=E.useState(!1);E.useEffect(()=>{const y=async()=>{try{const b=Nr(ot(Be,"research"));await Gt(b);const S=Nr(ot(Be,"research"),md("createdAt","desc"));return Lo(S,w=>{const P=[];w.forEach(I=>{var M,z;const C=I.data();P.push({id:I.id,projectTitle:C.projectTitle||C.title||"",abstract:C.abstract||"",fieldOfResearch:C.fieldOfResearch||[],contactPerson:C.contactPerson||[],authorshipPosition:C.authorshipPosition||[],projectDuration:C.projectDuration||"",requiredSkills:C.requiredSkills||[],supervisor:C.supervisor||"",createdAt:(M=C.createdAt)!=null&&M.toDate?C.createdAt.toDate():C.createdAt||new Date,updatedAt:(z=C.updatedAt)!=null&&z.toDate?C.updatedAt.toDate():C.updatedAt||new Date})}),e(P),r(!1)},w=>{console.error("Error in research listener:",w),v()})}catch(b){return console.error("Firebase connection failed for research:",b),v(),null}},v=()=>{d(!0),e(M9),a(null),r(!1)};y()},[]);const h=async y=>{if(c){const v={id:`offline_${Date.now()}`,...y};e(b=>[v,...b]);return}try{await Pn(ot(Be,"research"),y)}catch(v){console.error("Error creating research:",v),d(!0),await h(y)}};return{research:n,loading:t,error:i,createResearch:h,updateResearch:async(y,v)=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(b=>b.map(S=>S.id===y?{...S,...v}:S));return}try{await Nn(Pt(Be,"research",y),v)}catch(b){console.error("Error updating research:",b),e(S=>S.map(_=>_.id===y?{..._,...v}:_))}},deleteResearch:async y=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(v=>v.filter(b=>b.id!==y));return}try{await Us(Pt(Be,"research",y))}catch(v){console.error("Error deleting research:",v),e(b=>b.filter(S=>S.id!==y))}},isOfflineMode:c}}function V9(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[i,a]=E.useState(!1),{research:c,loading:d,error:h,createResearch:p,updateResearch:g,deleteResearch:y}=F9(),v=c.filter(w=>w.projectTitle.toLowerCase().includes(n.toLowerCase())),b=()=>{r(null),a(!0)},S=w=>{r(w),a(!0)},_=async w=>{window.confirm("Are you sure you want to delete this research entry?")&&await y(w)};return i?l.jsx(L9,{research:t,onClose:()=>{a(!1),r(null)},onSave:async w=>{try{t?await g(t.id,w):await p(w),a(!1),r(null)}catch(P){console.error(P),alert("Failed to save. Please try again.")}}}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Research"}),l.jsx("p",{className:"text-muted-foreground",children:"Manage research projects and student/faculty submissions"})]}),l.jsxs(ne,{onClick:b,className:"flex items-center gap-2",children:[l.jsx(Qt,{className:"h-4 w-4"}),"Create Research"]})]}),l.jsx(ve,{children:l.jsx(xe,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(cc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(De,{placeholder:"Search by project title...",value:n,onChange:w=>e(w.target.value),className:"pl-10"})]})})}),d&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(xo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading research entries..."})]})}),h&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading research"}),l.jsx("p",{className:"text-muted-foreground",children:h})]})}),!d&&!h&&l.jsx("div",{className:"space-y-4",children:v.map(w=>l.jsx(ve,{className:"hover:shadow-md transition-shadow",children:l.jsx(xe,{className:"pt-6",children:l.jsx("div",{className:"flex gap-4",children:l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:w.projectTitle}),l.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mt-2",children:w.abstract}),l.jsx("div",{className:"flex gap-2 flex-wrap mt-3 text-xs text-muted-foreground",children:(w.fieldOfResearch||[]).map(P=>l.jsx("span",{className:"bg-muted px-2 py-1 rounded text-xs",children:P},P))})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx(ne,{variant:"ghost",onClick:()=>S(w),children:l.jsx(Xu,{className:"h-4 w-4"})}),l.jsx(ne,{variant:"ghost",onClick:()=>_(w.id),children:l.jsx($n,{className:"h-4 w-4"})})]})]})})})})},w.id))})]})}const U9=()=>{const n=Ro();return E.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),l.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),l.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},z9=new W2;function $9({children:n}){const{currentUser:e}=mx();return e?l.jsx(l.Fragment,{children:n}):l.jsx(Zh,{to:"/login"})}const Ib=()=>l.jsx(zU,{children:l.jsx(K2,{client:z9,children:l.jsxs(_2,{children:[l.jsx(aR,{}),l.jsx(FR,{}),l.jsx(KO,{basename:"/builder-stellar-world/",children:l.jsx(FU,{children:l.jsxs(FO,{children:[l.jsx(Ut,{path:"/login",element:l.jsx(JU,{})}),l.jsxs(Ut,{path:"/admin",element:l.jsx($9,{children:l.jsx(KU,{})}),children:[l.jsx(Ut,{index:!0,element:l.jsx(r6,{})}),l.jsx(Ut,{path:"news",element:l.jsx(u6,{})}),l.jsx(Ut,{path:"years",element:l.jsx(o9,{})}),l.jsx(Ut,{path:"years/:id",element:l.jsx(a9,{})}),l.jsx(Ut,{path:"subjects/:id",element:l.jsx(m9,{})}),l.jsx(Ut,{path:"resources",element:l.jsx(Nb,{})}),l.jsx(Ut,{path:"resources/*",element:l.jsx(Nb,{})}),l.jsx(Ut,{path:"VIDEOS",element:l.jsx(Zh,{to:"/admin/years",replace:!0})}),l.jsx(Ut,{path:"VIDEOS/*",element:l.jsx(Zh,{to:"/admin/years",replace:!0})}),l.jsx(Ut,{path:"professors",element:l.jsx(c9,{})}),l.jsx(Ut,{path:"users",element:l.jsx(h9,{})}),l.jsx(Ut,{path:"store",element:l.jsx(y9,{})}),l.jsx(Ut,{path:"orders",element:l.jsx(x9,{})}),l.jsx(Ut,{path:"videos",element:l.jsx(E9,{})}),l.jsx(Ut,{path:"files",element:l.jsx(b9,{})}),l.jsx(Ut,{path:"quizzes",element:l.jsx(S9,{})}),l.jsx(Ut,{path:"flashcards",element:l.jsx(R9,{})}),l.jsx(Ut,{path:"research",element:l.jsx(V9,{})}),l.jsx(Ut,{path:"maps",element:l.jsx(D9,{})}),l.jsx(Ut,{path:"settings",element:l.jsx(k9,{})})]}),l.jsx(Ut,{path:"/",element:l.jsx(Zh,{to:"/admin"})}),l.jsx(Ut,{path:"*",element:l.jsx(U9,{})})]})})})]})})}),B9=document.getElementById("root");if(window.__appRoot)window.__appRoot.render(l.jsx(Ib,{}));else{const n=cR.createRoot(B9);window.__appRoot=n,n.render(l.jsx(Ib,{}))}
