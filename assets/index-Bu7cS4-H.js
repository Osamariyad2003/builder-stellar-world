var lP=Object.defineProperty;var Y0=n=>{throw TypeError(n)};var cP=(n,e,t)=>e in n?lP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var X0=(n,e,t)=>cP(n,typeof e!="symbol"?e+"":e,t),vg=(n,e,t)=>e.has(n)||Y0("Cannot "+t);var de=(n,e,t)=>(vg(n,e,"read from private field"),t?t.call(n):e.get(n)),Et=(n,e,t)=>e.has(n)?Y0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),st=(n,e,t,r)=>(vg(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),qn=(n,e,t)=>(vg(n,e,"access private method"),t);var Lh=(n,e,t,r)=>({set _(s){st(n,e,s,t)},get _(){return de(n,e,r)}});function uP(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function i1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yg={exports:{}},mu={},xg={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0;function dP(){if(J0)return lt;J0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function y(U){return U===null||typeof U!="object"?null:(U=v&&U[v]||U["@@iterator"],typeof U=="function"?U:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function x(U,X,le){this.props=U,this.context=X,this.refs=E,this.updater=le||b}x.prototype.isReactComponent={},x.prototype.setState=function(U,X){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,X,"setState")},x.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function A(){}A.prototype=x.prototype;function I(U,X,le){this.props=U,this.context=X,this.refs=E,this.updater=le||b}var C=I.prototype=new A;C.constructor=I,S(C,x.prototype),C.isPureReactComponent=!0;var O=Array.isArray,V=Object.prototype.hasOwnProperty,B={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function R(U,X,le){var be,ve={},ce=null,me=null;if(X!=null)for(be in X.ref!==void 0&&(me=X.ref),X.key!==void 0&&(ce=""+X.key),X)V.call(X,be)&&!P.hasOwnProperty(be)&&(ve[be]=X[be]);var Ee=arguments.length-2;if(Ee===1)ve.children=le;else if(1<Ee){for(var De=Array(Ee),Te=0;Te<Ee;Te++)De[Te]=arguments[Te+2];ve.children=De}if(U&&U.defaultProps)for(be in Ee=U.defaultProps,Ee)ve[be]===void 0&&(ve[be]=Ee[be]);return{$$typeof:n,type:U,key:ce,ref:me,props:ve,_owner:B.current}}function D(U,X){return{$$typeof:n,type:U.type,key:X,ref:U.ref,props:U.props,_owner:U._owner}}function k(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function $(U){var X={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(le){return X[le]})}var z=/\/+/g;function M(U,X){return typeof U=="object"&&U!==null&&U.key!=null?$(""+U.key):X.toString(36)}function oe(U,X,le,be,ve){var ce=typeof U;(ce==="undefined"||ce==="boolean")&&(U=null);var me=!1;if(U===null)me=!0;else switch(ce){case"string":case"number":me=!0;break;case"object":switch(U.$$typeof){case n:case e:me=!0}}if(me)return me=U,ve=ve(me),U=be===""?"."+M(me,0):be,O(ve)?(le="",U!=null&&(le=U.replace(z,"$&/")+"/"),oe(ve,X,le,"",function(Te){return Te})):ve!=null&&(k(ve)&&(ve=D(ve,le+(!ve.key||me&&me.key===ve.key?"":(""+ve.key).replace(z,"$&/")+"/")+U)),X.push(ve)),1;if(me=0,be=be===""?".":be+":",O(U))for(var Ee=0;Ee<U.length;Ee++){ce=U[Ee];var De=be+M(ce,Ee);me+=oe(ce,X,le,De,ve)}else if(De=y(U),typeof De=="function")for(U=De.call(U),Ee=0;!(ce=U.next()).done;)ce=ce.value,De=be+M(ce,Ee++),me+=oe(ce,X,le,De,ve);else if(ce==="object")throw X=String(U),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return me}function H(U,X,le){if(U==null)return U;var be=[],ve=0;return oe(U,be,"","",function(ce){return X.call(le,ce,ve++)}),be}function J(U){if(U._status===-1){var X=U._result;X=X(),X.then(function(le){(U._status===0||U._status===-1)&&(U._status=1,U._result=le)},function(le){(U._status===0||U._status===-1)&&(U._status=2,U._result=le)}),U._status===-1&&(U._status=0,U._result=X)}if(U._status===1)return U._result.default;throw U._result}var Y={current:null},q={transition:null},Q={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:q,ReactCurrentOwner:B};function Z(){throw Error("act(...) is not supported in production builds of React.")}return lt.Children={map:H,forEach:function(U,X,le){H(U,function(){X.apply(this,arguments)},le)},count:function(U){var X=0;return H(U,function(){X++}),X},toArray:function(U){return H(U,function(X){return X})||[]},only:function(U){if(!k(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},lt.Component=x,lt.Fragment=t,lt.Profiler=s,lt.PureComponent=I,lt.StrictMode=r,lt.Suspense=h,lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,lt.act=Z,lt.cloneElement=function(U,X,le){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var be=S({},U.props),ve=U.key,ce=U.ref,me=U._owner;if(X!=null){if(X.ref!==void 0&&(ce=X.ref,me=B.current),X.key!==void 0&&(ve=""+X.key),U.type&&U.type.defaultProps)var Ee=U.type.defaultProps;for(De in X)V.call(X,De)&&!P.hasOwnProperty(De)&&(be[De]=X[De]===void 0&&Ee!==void 0?Ee[De]:X[De])}var De=arguments.length-2;if(De===1)be.children=le;else if(1<De){Ee=Array(De);for(var Te=0;Te<De;Te++)Ee[Te]=arguments[Te+2];be.children=Ee}return{$$typeof:n,type:U.type,key:ve,ref:ce,props:be,_owner:me}},lt.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},lt.createElement=R,lt.createFactory=function(U){var X=R.bind(null,U);return X.type=U,X},lt.createRef=function(){return{current:null}},lt.forwardRef=function(U){return{$$typeof:u,render:U}},lt.isValidElement=k,lt.lazy=function(U){return{$$typeof:g,_payload:{_status:-1,_result:U},_init:J}},lt.memo=function(U,X){return{$$typeof:m,type:U,compare:X===void 0?null:X}},lt.startTransition=function(U){var X=q.transition;q.transition={};try{U()}finally{q.transition=X}},lt.unstable_act=Z,lt.useCallback=function(U,X){return Y.current.useCallback(U,X)},lt.useContext=function(U){return Y.current.useContext(U)},lt.useDebugValue=function(){},lt.useDeferredValue=function(U){return Y.current.useDeferredValue(U)},lt.useEffect=function(U,X){return Y.current.useEffect(U,X)},lt.useId=function(){return Y.current.useId()},lt.useImperativeHandle=function(U,X,le){return Y.current.useImperativeHandle(U,X,le)},lt.useInsertionEffect=function(U,X){return Y.current.useInsertionEffect(U,X)},lt.useLayoutEffect=function(U,X){return Y.current.useLayoutEffect(U,X)},lt.useMemo=function(U,X){return Y.current.useMemo(U,X)},lt.useReducer=function(U,X,le){return Y.current.useReducer(U,X,le)},lt.useRef=function(U){return Y.current.useRef(U)},lt.useState=function(U){return Y.current.useState(U)},lt.useSyncExternalStore=function(U,X,le){return Y.current.useSyncExternalStore(U,X,le)},lt.useTransition=function(){return Y.current.useTransition()},lt.version="18.3.1",lt}var Z0;function ly(){return Z0||(Z0=1,xg.exports=dP()),xg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function hP(){if(e_)return mu;e_=1;var n=ly(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(u,h,m){var g,v={},y=null,b=null;m!==void 0&&(y=""+m),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(b=h.ref);for(g in h)r.call(h,g)&&!a.hasOwnProperty(g)&&(v[g]=h[g]);if(u&&u.defaultProps)for(g in h=u.defaultProps,h)v[g]===void 0&&(v[g]=h[g]);return{$$typeof:e,type:u,key:y,ref:b,props:v,_owner:s.current}}return mu.Fragment=t,mu.jsx=c,mu.jsxs=c,mu}var t_;function fP(){return t_||(t_=1,yg.exports=hP()),yg.exports}var l=fP();let xf=!1,mP=[],Su=0;const n_=3,vc=n=>{xf!==n&&(xf=n,console.log(`ðŸ”„ Firebase mode changed: ${n?"OFFLINE":"ONLINE"}`),mP.forEach(e=>e()))},r_=n=>{Su++,console.log(`ðŸš¨ Firebase error ${Su}/${n_}:`,n.message),Su>=n_&&(console.log("ðŸ”„ Too many Firebase errors - switching to global offline mode"),vc(!0))};if(!window.fetch.__firebasePatched){const n=window.fetch,e=(...t)=>{var a;const r=typeof t[0]=="string"?t[0]:(a=t[0])==null?void 0:a.url;if(!(!!r&&(r.includes("firestore.googleapis.com")||r.includes("firebase.googleapis.com")||r.includes("identitytoolkit.googleapis.com"))))try{return n(...t)}catch(c){return Promise.reject(c)}if(xf){const c=new Error("Firebase offline mode - request blocked");return c.isFirebaseOfflineError=!0,Promise.reject(c)}try{const c=n(...t);return Promise.resolve(c).then(u=>(u.ok&&(Su=0,xf&&(console.log("ðŸŸ¢ Firebase connection restored"),vc(!1))),u)).catch(u=>{console.log("ðŸ”´ Firebase request failed:",(u==null?void 0:u.message)||String(u));const h=String(u&&(u.stack||"")||""),m=String((u==null?void 0:u.message)||u||"").toLowerCase();throw!(h.includes("chrome-extension://")||h.includes("extension://")||m.includes("extension"))&&navigator.onLine&&r_(u),u})}catch(c){console.log("ðŸ”´ Firebase request threw synchronously:",(c==null?void 0:c.message)||String(c));const u=String(c&&(c.stack||"")||""),h=String((c==null?void 0:c.message)||c||"").toLowerCase();return!(u.includes("chrome-extension://")||u.includes("extension://")||h.includes("extension"))&&navigator.onLine&&r_(c),Promise.reject(c)}};e.__firebasePatched=!0,window.fetch=e}console.log("ðŸ”„ Initializing Firebase monitoring...");navigator.onLine||(console.log("ðŸš« No internet connection - starting in offline mode"),vc(!0));window.addEventListener("online",()=>{console.log("ðŸŸ¢ Internet connection restored"),Su=0,vc(!1)});window.addEventListener("offline",()=>{console.log("ðŸ”´ Internet connection lost"),vc(!0)});console.log("ðŸ”„ Starting Firebase monitoring in ONLINE mode");window.addEventListener("unhandledrejection",n=>{var r;const e=String(((r=n==null?void 0:n.reason)==null?void 0:r.message)||(n==null?void 0:n.reason)||""),t=String((n==null?void 0:n.reason)&&(n.reason.stack||"")||"");if((e.includes("Failed to fetch")||e.toLowerCase().includes("extension"))&&(t.includes("chrome-extension://")||t.includes("extension://")||t.includes("fullstory.com"))){n.preventDefault();return}if(t.includes("chrome-extension://")||t.includes("extension://")){n.preventDefault();return}});const pP=console.error,gP=console.warn,vP=console.log;console.error=(...n)=>{const e=n.map(s=>s&&typeof s=="object"?String(s):s).join(" "),t=n.some(s=>s&&typeof s=="object"&&s.stack&&s.stack.includes("chrome-extension://"));["Firebase offline mode - request blocked","FirebaseError: [code=unavailable]","Could not reach Cloud Firestore backend","Connection failed","The operation could not be completed","device does not have a healthy Internet connection","client will operate in offline mode","Most recent error: FirebaseError","@firebase/firestore: Firestore","fullstory.com","TypeError: Failed to fetch"].some(s=>e.includes(s))||t||e.includes("chrome-extension://")||e.includes("extension://")||pP.apply(console,n)};console.warn=(...n)=>{const e=n.join(" ");e.includes("Firebase")&&e.includes("offline")||gP.apply(console,n)};console.log=(...n)=>{const e=n.join(" ");e.includes("@firebase/firestore")&&e.includes("offline")||vP.apply(console,n)};setTimeout(()=>{navigator.onLine?console.log("ðŸŒ Internet available - Firebase enabled and ready"):(console.log("ðŸš« No internet connection detected - switching to offline mode"),vc(!0))},100);var _=ly();const Ne=i1(_),o1=uP({__proto__:null,default:Ne},[_]),yP=1,xP=1e6;let wg=0;function wP(){return wg=(wg+1)%Number.MAX_SAFE_INTEGER,wg.toString()}const _g=new Map,s_=n=>{if(_g.has(n))return;const e=setTimeout(()=>{_g.delete(n),Nu({type:"REMOVE_TOAST",toastId:n})},xP);_g.set(n,e)},_P=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,yP)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?s_(t):n.toasts.forEach(r=>{s_(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},sf=[];let of={toasts:[]};function Nu(n){of=_P(of,n),sf.forEach(e=>{e(of)})}function EP({...n}){const e=wP(),t=s=>Nu({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Nu({type:"DISMISS_TOAST",toastId:e});return Nu({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:t}}function bP(){const[n,e]=_.useState(of);return _.useEffect(()=>(sf.push(e),()=>{const t=sf.indexOf(e);t>-1&&sf.splice(t,1)}),[n]),{...n,toast:EP,dismiss:t=>Nu({type:"DISMISS_TOAST",toastId:t})}}var Eg={exports:{}},mr={},bg={exports:{}},Sg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i_;function SP(){return i_||(i_=1,function(n){function e(q,Q){var Z=q.length;q.push(Q);e:for(;0<Z;){var U=Z-1>>>1,X=q[U];if(0<s(X,Q))q[U]=Q,q[Z]=X,Z=U;else break e}}function t(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Q=q[0],Z=q.pop();if(Z!==Q){q[0]=Z;e:for(var U=0,X=q.length,le=X>>>1;U<le;){var be=2*(U+1)-1,ve=q[be],ce=be+1,me=q[ce];if(0>s(ve,Z))ce<X&&0>s(me,ve)?(q[U]=me,q[ce]=Z,U=ce):(q[U]=ve,q[be]=Z,U=be);else if(ce<X&&0>s(me,Z))q[U]=me,q[ce]=Z,U=ce;else break e}}return Q}function s(q,Q){var Z=q.sortIndex-Q.sortIndex;return Z!==0?Z:q.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var h=[],m=[],g=1,v=null,y=3,b=!1,S=!1,E=!1,x=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(q){for(var Q=t(m);Q!==null;){if(Q.callback===null)r(m);else if(Q.startTime<=q)r(m),Q.sortIndex=Q.expirationTime,e(h,Q);else break;Q=t(m)}}function O(q){if(E=!1,C(q),!S)if(t(h)!==null)S=!0,J(V);else{var Q=t(m);Q!==null&&Y(O,Q.startTime-q)}}function V(q,Q){S=!1,E&&(E=!1,A(R),R=-1),b=!0;var Z=y;try{for(C(Q),v=t(h);v!==null&&(!(v.expirationTime>Q)||q&&!$());){var U=v.callback;if(typeof U=="function"){v.callback=null,y=v.priorityLevel;var X=U(v.expirationTime<=Q);Q=n.unstable_now(),typeof X=="function"?v.callback=X:v===t(h)&&r(h),C(Q)}else r(h);v=t(h)}if(v!==null)var le=!0;else{var be=t(m);be!==null&&Y(O,be.startTime-Q),le=!1}return le}finally{v=null,y=Z,b=!1}}var B=!1,P=null,R=-1,D=5,k=-1;function $(){return!(n.unstable_now()-k<D)}function z(){if(P!==null){var q=n.unstable_now();k=q;var Q=!0;try{Q=P(!0,q)}finally{Q?M():(B=!1,P=null)}}else B=!1}var M;if(typeof I=="function")M=function(){I(z)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,H=oe.port2;oe.port1.onmessage=z,M=function(){H.postMessage(null)}}else M=function(){x(z,0)};function J(q){P=q,B||(B=!0,M())}function Y(q,Q){R=x(function(){q(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){S||b||(S=!0,J(V))},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(q){switch(y){case 1:case 2:case 3:var Q=3;break;default:Q=y}var Z=y;y=Q;try{return q()}finally{y=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,Q){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Z=y;y=q;try{return Q()}finally{y=Z}},n.unstable_scheduleCallback=function(q,Q,Z){var U=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?U+Z:U):Z=U,q){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Z+X,q={id:g++,callback:Q,priorityLevel:q,startTime:Z,expirationTime:X,sortIndex:-1},Z>U?(q.sortIndex=Z,e(m,q),t(h)===null&&q===t(m)&&(E?(A(R),R=-1):E=!0,Y(O,Z-U))):(q.sortIndex=X,e(h,q),S||b||(S=!0,J(V))),q},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(q){var Q=y;return function(){var Z=y;y=Q;try{return q.apply(this,arguments)}finally{y=Z}}}}(Sg)),Sg}var o_;function NP(){return o_||(o_=1,bg.exports=SP()),bg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a_;function TP(){if(a_)return mr;a_=1;var n=ly(),e=NP();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,d=1;d<arguments.length;d++)o+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){c(i,o),c(i+"Capture",o)}function c(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function y(i){return h.call(v,i)?!0:h.call(g,i)?!1:m.test(i)?v[i]=!0:(g[i]=!0,!1)}function b(i,o,d,p){if(d!==null&&d.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return p?!1:d!==null?!d.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function S(i,o,d,p){if(o===null||typeof o>"u"||b(i,o,d,p))return!0;if(p)return!1;if(d!==null)switch(d.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function E(i,o,d,p,w,T,L){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=p,this.attributeNamespace=w,this.mustUseProperty=d,this.propertyName=i,this.type=o,this.sanitizeURL=T,this.removeEmptyString=L}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){x[i]=new E(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];x[o]=new E(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){x[i]=new E(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){x[i]=new E(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){x[i]=new E(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){x[i]=new E(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){x[i]=new E(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){x[i]=new E(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){x[i]=new E(i,5,!1,i.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function I(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(A,I);x[o]=new E(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(A,I);x[o]=new E(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(A,I);x[o]=new E(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){x[i]=new E(i,1,!1,i.toLowerCase(),null,!1,!1)}),x.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){x[i]=new E(i,1,!1,i.toLowerCase(),null,!0,!0)});function C(i,o,d,p){var w=x.hasOwnProperty(o)?x[o]:null;(w!==null?w.type!==0:p||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(S(o,d,w,p)&&(d=null),p||w===null?y(o)&&(d===null?i.removeAttribute(o):i.setAttribute(o,""+d)):w.mustUseProperty?i[w.propertyName]=d===null?w.type===3?!1:"":d:(o=w.attributeName,p=w.attributeNamespace,d===null?i.removeAttribute(o):(w=w.type,d=w===3||w===4&&d===!0?"":""+d,p?i.setAttributeNS(p,o,d):i.setAttribute(o,d))))}var O=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),B=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),$=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),Y=Symbol.for("react.offscreen"),q=Symbol.iterator;function Q(i){return i===null||typeof i!="object"?null:(i=q&&i[q]||i["@@iterator"],typeof i=="function"?i:null)}var Z=Object.assign,U;function X(i){if(U===void 0)try{throw Error()}catch(d){var o=d.stack.trim().match(/\n( *(at )?)/);U=o&&o[1]||""}return`
`+U+i}var le=!1;function be(i,o){if(!i||le)return"";le=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(ie){var p=ie}Reflect.construct(i,[],o)}else{try{o.call()}catch(ie){p=ie}i.call(o.prototype)}else{try{throw Error()}catch(ie){p=ie}i()}}catch(ie){if(ie&&p&&typeof ie.stack=="string"){for(var w=ie.stack.split(`
`),T=p.stack.split(`
`),L=w.length-1,W=T.length-1;1<=L&&0<=W&&w[L]!==T[W];)W--;for(;1<=L&&0<=W;L--,W--)if(w[L]!==T[W]){if(L!==1||W!==1)do if(L--,W--,0>W||w[L]!==T[W]){var K=`
`+w[L].replace(" at new "," at ");return i.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",i.displayName)),K}while(1<=L&&0<=W);break}}}finally{le=!1,Error.prepareStackTrace=d}return(i=i?i.displayName||i.name:"")?X(i):""}function ve(i){switch(i.tag){case 5:return X(i.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return i=be(i.type,!1),i;case 11:return i=be(i.type.render,!1),i;case 1:return i=be(i.type,!0),i;default:return""}}function ce(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case B:return"Portal";case D:return"Profiler";case R:return"StrictMode";case M:return"Suspense";case oe:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case $:return(i.displayName||"Context")+".Consumer";case k:return(i._context.displayName||"Context")+".Provider";case z:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case H:return o=i.displayName||null,o!==null?o:ce(i.type)||"Memo";case J:o=i._payload,i=i._init;try{return ce(i(o))}catch{}}return null}function me(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(o);case 8:return o===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ee(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function De(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Te(i){var o=De(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),p=""+i[o];if(!i.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var w=d.get,T=d.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return w.call(this)},set:function(L){p=""+L,T.call(this,L)}}),Object.defineProperty(i,o,{enumerable:d.enumerable}),{getValue:function(){return p},setValue:function(L){p=""+L},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Me(i){i._valueTracker||(i._valueTracker=Te(i))}function Ke(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var d=o.getValue(),p="";return i&&(p=De(i)?i.checked?"true":"false":i.value),i=p,i!==d?(o.setValue(i),!0):!1}function dt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ct(i,o){var d=o.checked;return Z({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??i._wrapperState.initialChecked})}function on(i,o){var d=o.defaultValue==null?"":o.defaultValue,p=o.checked!=null?o.checked:o.defaultChecked;d=Ee(o.value!=null?o.value:d),i._wrapperState={initialChecked:p,initialValue:d,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Lt(i,o){o=o.checked,o!=null&&C(i,"checked",o,!1)}function Mt(i,o){Lt(i,o);var d=Ee(o.value),p=o.type;if(d!=null)p==="number"?(d===0&&i.value===""||i.value!=d)&&(i.value=""+d):i.value!==""+d&&(i.value=""+d);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?yt(i,o.type,d):o.hasOwnProperty("defaultValue")&&yt(i,o.type,Ee(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function vt(i,o,d){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var p=o.type;if(!(p!=="submit"&&p!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,d||o===i.value||(i.value=o),i.defaultValue=o}d=i.name,d!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,d!==""&&(i.name=d)}function yt(i,o,d){(o!=="number"||dt(i.ownerDocument)!==i)&&(d==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+d&&(i.defaultValue=""+d))}var an=Array.isArray;function Xn(i,o,d,p){if(i=i.options,o){o={};for(var w=0;w<d.length;w++)o["$"+d[w]]=!0;for(d=0;d<i.length;d++)w=o.hasOwnProperty("$"+i[d].value),i[d].selected!==w&&(i[d].selected=w),w&&p&&(i[d].defaultSelected=!0)}else{for(d=""+Ee(d),o=null,w=0;w<i.length;w++){if(i[w].value===d){i[w].selected=!0,p&&(i[w].defaultSelected=!0);return}o!==null||i[w].disabled||(o=i[w])}o!==null&&(o.selected=!0)}}function ti(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return Z({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Jn(i,o){var d=o.value;if(d==null){if(d=o.children,o=o.defaultValue,d!=null){if(o!=null)throw Error(t(92));if(an(d)){if(1<d.length)throw Error(t(93));d=d[0]}o=d}o==null&&(o=""),d=o}i._wrapperState={initialValue:Ee(d)}}function bn(i,o){var d=Ee(o.value),p=Ee(o.defaultValue);d!=null&&(d=""+d,d!==i.value&&(i.value=d),o.defaultValue==null&&i.defaultValue!==d&&(i.defaultValue=d)),p!=null&&(i.defaultValue=""+p)}function xs(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Ft(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nt(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Ft(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Fn,gn=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,d,p,w){MSApp.execUnsafeLocalFunction(function(){return i(o,d,p,w)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Fn=Fn||document.createElement("div"),Fn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Fn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function xr(i,o){if(o){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=o;return}}i.textContent=o}var Hr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kr=["Webkit","ms","Moz","O"];Object.keys(Hr).forEach(function(i){kr.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Hr[o]=Hr[i]})});function ws(i,o,d){return o==null||typeof o=="boolean"||o===""?"":d||typeof o!="number"||o===0||Hr.hasOwnProperty(i)&&Hr[i]?(""+o).trim():o+"px"}function ni(i,o){i=i.style;for(var d in o)if(o.hasOwnProperty(d)){var p=d.indexOf("--")===0,w=ws(d,o[d],p);d==="float"&&(d="cssFloat"),p?i.setProperty(d,w):i[d]=w}}var Kr=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vn(i,o){if(o){if(Kr[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function _s(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var He=null;function mt(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ht=null,Vt=null,te=null;function ye(i){if(i=Zc(i)){if(typeof ht!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Xd(o),ht(i.stateNode,i.type,o))}}function Oe(i){Vt?te?te.push(i):te=[i]:Vt=i}function bt(){if(Vt){var i=Vt,o=te;if(te=Vt=null,ye(i),o)for(i=0;i<o.length;i++)ye(o[i])}}function nt(i,o){return i(o)}function St(){}var je=!1;function Mi(i,o,d){if(je)return i(o,d);je=!0;try{return nt(i,o,d)}finally{je=!1,(Vt!==null||te!==null)&&(St(),bt())}}function Wt(i,o){var d=i.stateNode;if(d===null)return null;var p=Xd(d);if(p===null)return null;d=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(t(231,o,typeof d));return d}var ri=!1;if(u)try{var ir={};Object.defineProperty(ir,"passive",{get:function(){ri=!0}}),window.addEventListener("test",ir,ir),window.removeEventListener("test",ir,ir)}catch{ri=!1}function Es(i,o,d,p,w,T,L,W,K){var ie=Array.prototype.slice.call(arguments,3);try{o.apply(d,ie)}catch(pe){this.onError(pe)}}var bs=!1,si=null,or=!1,Fi=null,vn={onError:function(i){bs=!0,si=i}};function Xa(i,o,d,p,w,T,L,W,K){bs=!1,si=null,Es.apply(vn,arguments)}function Ed(i,o,d,p,w,T,L,W,K){if(Xa.apply(this,arguments),bs){if(bs){var ie=si;bs=!1,si=null}else throw Error(t(198));or||(or=!0,Fi=ie)}}function Gr(i){var o=i,d=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(d=o.return),i=o.return;while(i)}return o.tag===3?d:null}function ea(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Qr(i){if(Gr(i)!==i)throw Error(t(188))}function bd(i){var o=i.alternate;if(!o){if(o=Gr(i),o===null)throw Error(t(188));return o!==i?null:i}for(var d=i,p=o;;){var w=d.return;if(w===null)break;var T=w.alternate;if(T===null){if(p=w.return,p!==null){d=p;continue}break}if(w.child===T.child){for(T=w.child;T;){if(T===d)return Qr(w),i;if(T===p)return Qr(w),o;T=T.sibling}throw Error(t(188))}if(d.return!==p.return)d=w,p=T;else{for(var L=!1,W=w.child;W;){if(W===d){L=!0,d=w,p=T;break}if(W===p){L=!0,p=w,d=T;break}W=W.sibling}if(!L){for(W=T.child;W;){if(W===d){L=!0,d=T,p=w;break}if(W===p){L=!0,p=T,d=w;break}W=W.sibling}if(!L)throw Error(t(189))}}if(d.alternate!==p)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?i:o}function Dc(i){return i=bd(i),i!==null?Ja(i):null}function Ja(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Ja(i);if(o!==null)return o;i=i.sibling}return null}var Za=e.unstable_scheduleCallback,Oc=e.unstable_cancelCallback,Sd=e.unstable_shouldYield,Hm=e.unstable_requestPaint,kt=e.unstable_now,Nd=e.unstable_getCurrentPriorityLevel,ta=e.unstable_ImmediatePriority,Vi=e.unstable_UserBlockingPriority,Dr=e.unstable_NormalPriority,Lc=e.unstable_LowPriority,Td=e.unstable_IdlePriority,na=null,wr=null;function Cd(i){if(wr&&typeof wr.onCommitFiberRoot=="function")try{wr.onCommitFiberRoot(na,i,void 0,(i.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:jd,Mc=Math.log,Id=Math.LN2;function jd(i){return i>>>=0,i===0?32:31-(Mc(i)/Id|0)|0}var el=64,tl=4194304;function Ui(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function ra(i,o){var d=i.pendingLanes;if(d===0)return 0;var p=0,w=i.suspendedLanes,T=i.pingedLanes,L=d&268435455;if(L!==0){var W=L&~w;W!==0?p=Ui(W):(T&=L,T!==0&&(p=Ui(T)))}else L=d&~w,L!==0?p=Ui(L):T!==0&&(p=Ui(T));if(p===0)return 0;if(o!==0&&o!==p&&(o&w)===0&&(w=p&-p,T=o&-o,w>=T||w===16&&(T&4194240)!==0))return o;if((p&4)!==0&&(p|=d&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=p;0<o;)d=31-Zn(o),w=1<<d,p|=i[d],o&=~w;return p}function Km(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ii(i,o){for(var d=i.suspendedLanes,p=i.pingedLanes,w=i.expirationTimes,T=i.pendingLanes;0<T;){var L=31-Zn(T),W=1<<L,K=w[L];K===-1?((W&d)===0||(W&p)!==0)&&(w[L]=Km(W,o)):K<=o&&(i.expiredLanes|=W),T&=~W}}function _r(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function sa(){var i=el;return el<<=1,(el&4194240)===0&&(el=64),i}function $i(i){for(var o=[],d=0;31>d;d++)o.push(i);return o}function zi(i,o,d){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Zn(o),i[o]=d}function Pt(i,o){var d=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<d;){var w=31-Zn(d),T=1<<w;o[w]=0,p[w]=-1,i[w]=-1,d&=~T}}function Bi(i,o){var d=i.entangledLanes|=o;for(i=i.entanglements;d;){var p=31-Zn(d),w=1<<p;w&o|i[p]&o&&(i[p]|=o),d&=~w}}var ft=0;function qi(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Ad,nl,Pd,Rd,kd,Fc=!1,Ss=[],An=null,Yr=null,Xr=null,Wi=new Map,Or=new Map,Ns=[],Gm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dd(i,o){switch(i){case"focusin":case"focusout":An=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":Wi.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Or.delete(o.pointerId)}}function ar(i,o,d,p,w,T){return i===null||i.nativeEvent!==T?(i={blockedOn:o,domEventName:d,eventSystemFlags:p,nativeEvent:T,targetContainers:[w]},o!==null&&(o=Zc(o),o!==null&&nl(o)),i):(i.eventSystemFlags|=p,o=i.targetContainers,w!==null&&o.indexOf(w)===-1&&o.push(w),i)}function Qm(i,o,d,p,w){switch(o){case"focusin":return An=ar(An,i,o,d,p,w),!0;case"dragenter":return Yr=ar(Yr,i,o,d,p,w),!0;case"mouseover":return Xr=ar(Xr,i,o,d,p,w),!0;case"pointerover":var T=w.pointerId;return Wi.set(T,ar(Wi.get(T)||null,i,o,d,p,w)),!0;case"gotpointercapture":return T=w.pointerId,Or.set(T,ar(Or.get(T)||null,i,o,d,p,w)),!0}return!1}function Od(i){var o=ca(i.target);if(o!==null){var d=Gr(o);if(d!==null){if(o=d.tag,o===13){if(o=ea(d),o!==null){i.blockedOn=o,kd(i.priority,function(){Pd(d)});return}}else if(o===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function oi(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var d=rl(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(d===null){d=i.nativeEvent;var p=new d.constructor(d.type,d);He=p,d.target.dispatchEvent(p),He=null}else return o=Zc(d),o!==null&&nl(o),i.blockedOn=d,!1;o.shift()}return!0}function ia(i,o,d){oi(i)&&d.delete(o)}function Ld(){Fc=!1,An!==null&&oi(An)&&(An=null),Yr!==null&&oi(Yr)&&(Yr=null),Xr!==null&&oi(Xr)&&(Xr=null),Wi.forEach(ia),Or.forEach(ia)}function Jr(i,o){i.blockedOn===o&&(i.blockedOn=null,Fc||(Fc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ld)))}function Zr(i){function o(w){return Jr(w,i)}if(0<Ss.length){Jr(Ss[0],i);for(var d=1;d<Ss.length;d++){var p=Ss[d];p.blockedOn===i&&(p.blockedOn=null)}}for(An!==null&&Jr(An,i),Yr!==null&&Jr(Yr,i),Xr!==null&&Jr(Xr,i),Wi.forEach(o),Or.forEach(o),d=0;d<Ns.length;d++)p=Ns[d],p.blockedOn===i&&(p.blockedOn=null);for(;0<Ns.length&&(d=Ns[0],d.blockedOn===null);)Od(d),d.blockedOn===null&&Ns.shift()}var ai=O.ReactCurrentBatchConfig,Hi=!0;function Ht(i,o,d,p){var w=ft,T=ai.transition;ai.transition=null;try{ft=1,Vc(i,o,d,p)}finally{ft=w,ai.transition=T}}function Ym(i,o,d,p){var w=ft,T=ai.transition;ai.transition=null;try{ft=4,Vc(i,o,d,p)}finally{ft=w,ai.transition=T}}function Vc(i,o,d,p){if(Hi){var w=rl(i,o,d,p);if(w===null)ap(i,o,p,oa,d),Dd(i,p);else if(Qm(w,i,o,d,p))p.stopPropagation();else if(Dd(i,p),o&4&&-1<Gm.indexOf(i)){for(;w!==null;){var T=Zc(w);if(T!==null&&Ad(T),T=rl(i,o,d,p),T===null&&ap(i,o,p,oa,d),T===w)break;w=T}w!==null&&p.stopPropagation()}else ap(i,o,p,null,d)}}var oa=null;function rl(i,o,d,p){if(oa=null,i=mt(p),i=ca(i),i!==null)if(o=Gr(i),o===null)i=null;else if(d=o.tag,d===13){if(i=ea(o),i!==null)return i;i=null}else if(d===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return oa=i,null}function Uc(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nd()){case ta:return 1;case Vi:return 4;case Dr:case Lc:return 16;case Td:return 536870912;default:return 16}default:return 16}}var Er=null,sl=null,lr=null;function $c(){if(lr)return lr;var i,o=sl,d=o.length,p,w="value"in Er?Er.value:Er.textContent,T=w.length;for(i=0;i<d&&o[i]===w[i];i++);var L=d-i;for(p=1;p<=L&&o[d-p]===w[T-p];p++);return lr=w.slice(i,1<p?1-p:void 0)}function il(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Ts(){return!0}function zc(){return!1}function Pn(i){function o(d,p,w,T,L){this._reactName=d,this._targetInst=w,this.type=p,this.nativeEvent=T,this.target=L,this.currentTarget=null;for(var W in i)i.hasOwnProperty(W)&&(d=i[W],this[W]=d?d(T):T[W]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Ts:zc,this.isPropagationStopped=zc,this}return Z(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Ts)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Ts)},persist:function(){},isPersistent:Ts}),o}var es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ol=Pn(es),Cs=Z({},es,{view:0,detail:0}),Xm=Pn(Cs),al,li,Ki,aa=Z({},Cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Is,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ki&&(Ki&&i.type==="mousemove"?(al=i.screenX-Ki.screenX,li=i.screenY-Ki.screenY):li=al=0,Ki=i),al)},movementY:function(i){return"movementY"in i?i.movementY:li}}),ll=Pn(aa),Bc=Z({},aa,{dataTransfer:0}),Md=Pn(Bc),cl=Z({},Cs,{relatedTarget:0}),ul=Pn(cl),Fd=Z({},es,{animationName:0,elapsedTime:0,pseudoElement:0}),ci=Pn(Fd),Vd=Z({},es,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ud=Pn(Vd),$d=Z({},es,{data:0}),qc=Pn($d),dl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},er={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bd(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=zd[i])?!!o[i]:!1}function Is(){return Bd}var f=Z({},Cs,{key:function(i){if(i.key){var o=dl[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=il(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?er[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Is,charCode:function(i){return i.type==="keypress"?il(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?il(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),N=Pn(f),j=Z({},aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),F=Pn(j),ee=Z({},Cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Is}),ae=Pn(ee),Se=Z({},es,{propertyName:0,elapsedTime:0,pseudoElement:0}),It=Pn(Se),yn=Z({},aa,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),pt=Pn(yn),Sn=[9,13,27,32],ln=u&&"CompositionEvent"in window,Lr=null;u&&"documentMode"in document&&(Lr=document.documentMode);var br=u&&"TextEvent"in window&&!Lr,la=u&&(!ln||Lr&&8<Lr&&11>=Lr),hl=" ",qx=!1;function Wx(i,o){switch(i){case"keyup":return Sn.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hx(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var fl=!1;function iA(i,o){switch(i){case"compositionend":return Hx(o);case"keypress":return o.which!==32?null:(qx=!0,hl);case"textInput":return i=o.data,i===hl&&qx?null:i;default:return null}}function oA(i,o){if(fl)return i==="compositionend"||!ln&&Wx(i,o)?(i=$c(),lr=sl=Er=null,fl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return la&&o.locale!=="ko"?null:o.data;default:return null}}var aA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kx(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!aA[i.type]:o==="textarea"}function Gx(i,o,d,p){Oe(p),o=Gd(o,"onChange"),0<o.length&&(d=new ol("onChange","change",null,d,p),i.push({event:d,listeners:o}))}var Wc=null,Hc=null;function lA(i){hw(i,0)}function qd(i){var o=yl(i);if(Ke(o))return i}function cA(i,o){if(i==="change")return o}var Qx=!1;if(u){var Jm;if(u){var Zm="oninput"in document;if(!Zm){var Yx=document.createElement("div");Yx.setAttribute("oninput","return;"),Zm=typeof Yx.oninput=="function"}Jm=Zm}else Jm=!1;Qx=Jm&&(!document.documentMode||9<document.documentMode)}function Xx(){Wc&&(Wc.detachEvent("onpropertychange",Jx),Hc=Wc=null)}function Jx(i){if(i.propertyName==="value"&&qd(Hc)){var o=[];Gx(o,Hc,i,mt(i)),Mi(lA,o)}}function uA(i,o,d){i==="focusin"?(Xx(),Wc=o,Hc=d,Wc.attachEvent("onpropertychange",Jx)):i==="focusout"&&Xx()}function dA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return qd(Hc)}function hA(i,o){if(i==="click")return qd(o)}function fA(i,o){if(i==="input"||i==="change")return qd(o)}function mA(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var ts=typeof Object.is=="function"?Object.is:mA;function Kc(i,o){if(ts(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var d=Object.keys(i),p=Object.keys(o);if(d.length!==p.length)return!1;for(p=0;p<d.length;p++){var w=d[p];if(!h.call(o,w)||!ts(i[w],o[w]))return!1}return!0}function Zx(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ew(i,o){var d=Zx(i);i=0;for(var p;d;){if(d.nodeType===3){if(p=i+d.textContent.length,i<=o&&p>=o)return{node:d,offset:o-i};i=p}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Zx(d)}}function tw(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?tw(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function nw(){for(var i=window,o=dt();o instanceof i.HTMLIFrameElement;){try{var d=typeof o.contentWindow.location.href=="string"}catch{d=!1}if(d)i=o.contentWindow;else break;o=dt(i.document)}return o}function ep(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function pA(i){var o=nw(),d=i.focusedElem,p=i.selectionRange;if(o!==d&&d&&d.ownerDocument&&tw(d.ownerDocument.documentElement,d)){if(p!==null&&ep(d)){if(o=p.start,i=p.end,i===void 0&&(i=o),"selectionStart"in d)d.selectionStart=o,d.selectionEnd=Math.min(i,d.value.length);else if(i=(o=d.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var w=d.textContent.length,T=Math.min(p.start,w);p=p.end===void 0?T:Math.min(p.end,w),!i.extend&&T>p&&(w=p,p=T,T=w),w=ew(d,T);var L=ew(d,p);w&&L&&(i.rangeCount!==1||i.anchorNode!==w.node||i.anchorOffset!==w.offset||i.focusNode!==L.node||i.focusOffset!==L.offset)&&(o=o.createRange(),o.setStart(w.node,w.offset),i.removeAllRanges(),T>p?(i.addRange(o),i.extend(L.node,L.offset)):(o.setEnd(L.node,L.offset),i.addRange(o)))}}for(o=[],i=d;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<o.length;d++)i=o[d],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var gA=u&&"documentMode"in document&&11>=document.documentMode,ml=null,tp=null,Gc=null,np=!1;function rw(i,o,d){var p=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;np||ml==null||ml!==dt(p)||(p=ml,"selectionStart"in p&&ep(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Gc&&Kc(Gc,p)||(Gc=p,p=Gd(tp,"onSelect"),0<p.length&&(o=new ol("onSelect","select",null,o,d),i.push({event:o,listeners:p}),o.target=ml)))}function Wd(i,o){var d={};return d[i.toLowerCase()]=o.toLowerCase(),d["Webkit"+i]="webkit"+o,d["Moz"+i]="moz"+o,d}var pl={animationend:Wd("Animation","AnimationEnd"),animationiteration:Wd("Animation","AnimationIteration"),animationstart:Wd("Animation","AnimationStart"),transitionend:Wd("Transition","TransitionEnd")},rp={},sw={};u&&(sw=document.createElement("div").style,"AnimationEvent"in window||(delete pl.animationend.animation,delete pl.animationiteration.animation,delete pl.animationstart.animation),"TransitionEvent"in window||delete pl.transitionend.transition);function Hd(i){if(rp[i])return rp[i];if(!pl[i])return i;var o=pl[i],d;for(d in o)if(o.hasOwnProperty(d)&&d in sw)return rp[i]=o[d];return i}var iw=Hd("animationend"),ow=Hd("animationiteration"),aw=Hd("animationstart"),lw=Hd("transitionend"),cw=new Map,uw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gi(i,o){cw.set(i,o),a(o,[i])}for(var sp=0;sp<uw.length;sp++){var ip=uw[sp],vA=ip.toLowerCase(),yA=ip[0].toUpperCase()+ip.slice(1);Gi(vA,"on"+yA)}Gi(iw,"onAnimationEnd"),Gi(ow,"onAnimationIteration"),Gi(aw,"onAnimationStart"),Gi("dblclick","onDoubleClick"),Gi("focusin","onFocus"),Gi("focusout","onBlur"),Gi(lw,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qc));function dw(i,o,d){var p=i.type||"unknown-event";i.currentTarget=d,Ed(p,o,void 0,i),i.currentTarget=null}function hw(i,o){o=(o&4)!==0;for(var d=0;d<i.length;d++){var p=i[d],w=p.event;p=p.listeners;e:{var T=void 0;if(o)for(var L=p.length-1;0<=L;L--){var W=p[L],K=W.instance,ie=W.currentTarget;if(W=W.listener,K!==T&&w.isPropagationStopped())break e;dw(w,W,ie),T=K}else for(L=0;L<p.length;L++){if(W=p[L],K=W.instance,ie=W.currentTarget,W=W.listener,K!==T&&w.isPropagationStopped())break e;dw(w,W,ie),T=K}}}if(or)throw i=Fi,or=!1,Fi=null,i}function Ut(i,o){var d=o[fp];d===void 0&&(d=o[fp]=new Set);var p=i+"__bubble";d.has(p)||(fw(o,i,2,!1),d.add(p))}function op(i,o,d){var p=0;o&&(p|=4),fw(d,i,p,o)}var Kd="_reactListening"+Math.random().toString(36).slice(2);function Yc(i){if(!i[Kd]){i[Kd]=!0,r.forEach(function(d){d!=="selectionchange"&&(xA.has(d)||op(d,!1,i),op(d,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Kd]||(o[Kd]=!0,op("selectionchange",!1,o))}}function fw(i,o,d,p){switch(Uc(o)){case 1:var w=Ht;break;case 4:w=Ym;break;default:w=Vc}d=w.bind(null,o,d,i),w=void 0,!ri||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(w=!0),p?w!==void 0?i.addEventListener(o,d,{capture:!0,passive:w}):i.addEventListener(o,d,!0):w!==void 0?i.addEventListener(o,d,{passive:w}):i.addEventListener(o,d,!1)}function ap(i,o,d,p,w){var T=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var L=p.tag;if(L===3||L===4){var W=p.stateNode.containerInfo;if(W===w||W.nodeType===8&&W.parentNode===w)break;if(L===4)for(L=p.return;L!==null;){var K=L.tag;if((K===3||K===4)&&(K=L.stateNode.containerInfo,K===w||K.nodeType===8&&K.parentNode===w))return;L=L.return}for(;W!==null;){if(L=ca(W),L===null)return;if(K=L.tag,K===5||K===6){p=T=L;continue e}W=W.parentNode}}p=p.return}Mi(function(){var ie=T,pe=mt(d),ge=[];e:{var fe=cw.get(i);if(fe!==void 0){var Ae=ol,Le=i;switch(i){case"keypress":if(il(d)===0)break e;case"keydown":case"keyup":Ae=N;break;case"focusin":Le="focus",Ae=ul;break;case"focusout":Le="blur",Ae=ul;break;case"beforeblur":case"afterblur":Ae=ul;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=ll;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=Md;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=ae;break;case iw:case ow:case aw:Ae=ci;break;case lw:Ae=It;break;case"scroll":Ae=Xm;break;case"wheel":Ae=pt;break;case"copy":case"cut":case"paste":Ae=Ud;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=F}var Fe=(o&4)!==0,rn=!Fe&&i==="scroll",ne=Fe?fe!==null?fe+"Capture":null:fe;Fe=[];for(var G=ie,re;G!==null;){re=G;var xe=re.stateNode;if(re.tag===5&&xe!==null&&(re=xe,ne!==null&&(xe=Wt(G,ne),xe!=null&&Fe.push(Xc(G,xe,re)))),rn)break;G=G.return}0<Fe.length&&(fe=new Ae(fe,Le,null,d,pe),ge.push({event:fe,listeners:Fe}))}}if((o&7)===0){e:{if(fe=i==="mouseover"||i==="pointerover",Ae=i==="mouseout"||i==="pointerout",fe&&d!==He&&(Le=d.relatedTarget||d.fromElement)&&(ca(Le)||Le[ui]))break e;if((Ae||fe)&&(fe=pe.window===pe?pe:(fe=pe.ownerDocument)?fe.defaultView||fe.parentWindow:window,Ae?(Le=d.relatedTarget||d.toElement,Ae=ie,Le=Le?ca(Le):null,Le!==null&&(rn=Gr(Le),Le!==rn||Le.tag!==5&&Le.tag!==6)&&(Le=null)):(Ae=null,Le=ie),Ae!==Le)){if(Fe=ll,xe="onMouseLeave",ne="onMouseEnter",G="mouse",(i==="pointerout"||i==="pointerover")&&(Fe=F,xe="onPointerLeave",ne="onPointerEnter",G="pointer"),rn=Ae==null?fe:yl(Ae),re=Le==null?fe:yl(Le),fe=new Fe(xe,G+"leave",Ae,d,pe),fe.target=rn,fe.relatedTarget=re,xe=null,ca(pe)===ie&&(Fe=new Fe(ne,G+"enter",Le,d,pe),Fe.target=re,Fe.relatedTarget=rn,xe=Fe),rn=xe,Ae&&Le)t:{for(Fe=Ae,ne=Le,G=0,re=Fe;re;re=gl(re))G++;for(re=0,xe=ne;xe;xe=gl(xe))re++;for(;0<G-re;)Fe=gl(Fe),G--;for(;0<re-G;)ne=gl(ne),re--;for(;G--;){if(Fe===ne||ne!==null&&Fe===ne.alternate)break t;Fe=gl(Fe),ne=gl(ne)}Fe=null}else Fe=null;Ae!==null&&mw(ge,fe,Ae,Fe,!1),Le!==null&&rn!==null&&mw(ge,rn,Le,Fe,!0)}}e:{if(fe=ie?yl(ie):window,Ae=fe.nodeName&&fe.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&fe.type==="file")var Ve=cA;else if(Kx(fe))if(Qx)Ve=fA;else{Ve=dA;var Be=uA}else(Ae=fe.nodeName)&&Ae.toLowerCase()==="input"&&(fe.type==="checkbox"||fe.type==="radio")&&(Ve=hA);if(Ve&&(Ve=Ve(i,ie))){Gx(ge,Ve,d,pe);break e}Be&&Be(i,fe,ie),i==="focusout"&&(Be=fe._wrapperState)&&Be.controlled&&fe.type==="number"&&yt(fe,"number",fe.value)}switch(Be=ie?yl(ie):window,i){case"focusin":(Kx(Be)||Be.contentEditable==="true")&&(ml=Be,tp=ie,Gc=null);break;case"focusout":Gc=tp=ml=null;break;case"mousedown":np=!0;break;case"contextmenu":case"mouseup":case"dragend":np=!1,rw(ge,d,pe);break;case"selectionchange":if(gA)break;case"keydown":case"keyup":rw(ge,d,pe)}var qe;if(ln)e:{switch(i){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else fl?Wx(i,d)&&(Ze="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(Ze="onCompositionStart");Ze&&(la&&d.locale!=="ko"&&(fl||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&fl&&(qe=$c()):(Er=pe,sl="value"in Er?Er.value:Er.textContent,fl=!0)),Be=Gd(ie,Ze),0<Be.length&&(Ze=new qc(Ze,i,null,d,pe),ge.push({event:Ze,listeners:Be}),qe?Ze.data=qe:(qe=Hx(d),qe!==null&&(Ze.data=qe)))),(qe=br?iA(i,d):oA(i,d))&&(ie=Gd(ie,"onBeforeInput"),0<ie.length&&(pe=new qc("onBeforeInput","beforeinput",null,d,pe),ge.push({event:pe,listeners:ie}),pe.data=qe))}hw(ge,o)})}function Xc(i,o,d){return{instance:i,listener:o,currentTarget:d}}function Gd(i,o){for(var d=o+"Capture",p=[];i!==null;){var w=i,T=w.stateNode;w.tag===5&&T!==null&&(w=T,T=Wt(i,d),T!=null&&p.unshift(Xc(i,T,w)),T=Wt(i,o),T!=null&&p.push(Xc(i,T,w))),i=i.return}return p}function gl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function mw(i,o,d,p,w){for(var T=o._reactName,L=[];d!==null&&d!==p;){var W=d,K=W.alternate,ie=W.stateNode;if(K!==null&&K===p)break;W.tag===5&&ie!==null&&(W=ie,w?(K=Wt(d,T),K!=null&&L.unshift(Xc(d,K,W))):w||(K=Wt(d,T),K!=null&&L.push(Xc(d,K,W)))),d=d.return}L.length!==0&&i.push({event:o,listeners:L})}var wA=/\r\n?/g,_A=/\u0000|\uFFFD/g;function pw(i){return(typeof i=="string"?i:""+i).replace(wA,`
`).replace(_A,"")}function Qd(i,o,d){if(o=pw(o),pw(i)!==o&&d)throw Error(t(425))}function Yd(){}var lp=null,cp=null;function up(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var dp=typeof setTimeout=="function"?setTimeout:void 0,EA=typeof clearTimeout=="function"?clearTimeout:void 0,gw=typeof Promise=="function"?Promise:void 0,bA=typeof queueMicrotask=="function"?queueMicrotask:typeof gw<"u"?function(i){return gw.resolve(null).then(i).catch(SA)}:dp;function SA(i){setTimeout(function(){throw i})}function hp(i,o){var d=o,p=0;do{var w=d.nextSibling;if(i.removeChild(d),w&&w.nodeType===8)if(d=w.data,d==="/$"){if(p===0){i.removeChild(w),Zr(o);return}p--}else d!=="$"&&d!=="$?"&&d!=="$!"||p++;d=w}while(d);Zr(o)}function Qi(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function vw(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(o===0)return i;o--}else d==="/$"&&o++}i=i.previousSibling}return null}var vl=Math.random().toString(36).slice(2),js="__reactFiber$"+vl,Jc="__reactProps$"+vl,ui="__reactContainer$"+vl,fp="__reactEvents$"+vl,NA="__reactListeners$"+vl,TA="__reactHandles$"+vl;function ca(i){var o=i[js];if(o)return o;for(var d=i.parentNode;d;){if(o=d[ui]||d[js]){if(d=o.alternate,o.child!==null||d!==null&&d.child!==null)for(i=vw(i);i!==null;){if(d=i[js])return d;i=vw(i)}return o}i=d,d=i.parentNode}return null}function Zc(i){return i=i[js]||i[ui],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function yl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Xd(i){return i[Jc]||null}var mp=[],xl=-1;function Yi(i){return{current:i}}function $t(i){0>xl||(i.current=mp[xl],mp[xl]=null,xl--)}function Dt(i,o){xl++,mp[xl]=i.current,i.current=o}var Xi={},Un=Yi(Xi),cr=Yi(!1),ua=Xi;function wl(i,o){var d=i.type.contextTypes;if(!d)return Xi;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===o)return p.__reactInternalMemoizedMaskedChildContext;var w={},T;for(T in d)w[T]=o[T];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=w),w}function ur(i){return i=i.childContextTypes,i!=null}function Jd(){$t(cr),$t(Un)}function yw(i,o,d){if(Un.current!==Xi)throw Error(t(168));Dt(Un,o),Dt(cr,d)}function xw(i,o,d){var p=i.stateNode;if(o=o.childContextTypes,typeof p.getChildContext!="function")return d;p=p.getChildContext();for(var w in p)if(!(w in o))throw Error(t(108,me(i)||"Unknown",w));return Z({},d,p)}function Zd(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Xi,ua=Un.current,Dt(Un,i),Dt(cr,cr.current),!0}function ww(i,o,d){var p=i.stateNode;if(!p)throw Error(t(169));d?(i=xw(i,o,ua),p.__reactInternalMemoizedMergedChildContext=i,$t(cr),$t(Un),Dt(Un,i)):$t(cr),Dt(cr,d)}var di=null,eh=!1,pp=!1;function _w(i){di===null?di=[i]:di.push(i)}function CA(i){eh=!0,_w(i)}function Ji(){if(!pp&&di!==null){pp=!0;var i=0,o=ft;try{var d=di;for(ft=1;i<d.length;i++){var p=d[i];do p=p(!0);while(p!==null)}di=null,eh=!1}catch(w){throw di!==null&&(di=di.slice(i+1)),Za(ta,Ji),w}finally{ft=o,pp=!1}}return null}var _l=[],El=0,th=null,nh=0,Mr=[],Fr=0,da=null,hi=1,fi="";function ha(i,o){_l[El++]=nh,_l[El++]=th,th=i,nh=o}function Ew(i,o,d){Mr[Fr++]=hi,Mr[Fr++]=fi,Mr[Fr++]=da,da=i;var p=hi;i=fi;var w=32-Zn(p)-1;p&=~(1<<w),d+=1;var T=32-Zn(o)+w;if(30<T){var L=w-w%5;T=(p&(1<<L)-1).toString(32),p>>=L,w-=L,hi=1<<32-Zn(o)+w|d<<w|p,fi=T+i}else hi=1<<T|d<<w|p,fi=i}function gp(i){i.return!==null&&(ha(i,1),Ew(i,1,0))}function vp(i){for(;i===th;)th=_l[--El],_l[El]=null,nh=_l[--El],_l[El]=null;for(;i===da;)da=Mr[--Fr],Mr[Fr]=null,fi=Mr[--Fr],Mr[Fr]=null,hi=Mr[--Fr],Mr[Fr]=null}var Sr=null,Nr=null,Kt=!1,ns=null;function bw(i,o){var d=zr(5,null,null,0);d.elementType="DELETED",d.stateNode=o,d.return=i,o=i.deletions,o===null?(i.deletions=[d],i.flags|=16):o.push(d)}function Sw(i,o){switch(i.tag){case 5:var d=i.type;return o=o.nodeType!==1||d.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Sr=i,Nr=Qi(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Sr=i,Nr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(d=da!==null?{id:hi,overflow:fi}:null,i.memoizedState={dehydrated:o,treeContext:d,retryLane:1073741824},d=zr(18,null,null,0),d.stateNode=o,d.return=i,i.child=d,Sr=i,Nr=null,!0):!1;default:return!1}}function yp(i){return(i.mode&1)!==0&&(i.flags&128)===0}function xp(i){if(Kt){var o=Nr;if(o){var d=o;if(!Sw(i,o)){if(yp(i))throw Error(t(418));o=Qi(d.nextSibling);var p=Sr;o&&Sw(i,o)?bw(p,d):(i.flags=i.flags&-4097|2,Kt=!1,Sr=i)}}else{if(yp(i))throw Error(t(418));i.flags=i.flags&-4097|2,Kt=!1,Sr=i}}}function Nw(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Sr=i}function rh(i){if(i!==Sr)return!1;if(!Kt)return Nw(i),Kt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!up(i.type,i.memoizedProps)),o&&(o=Nr)){if(yp(i))throw Tw(),Error(t(418));for(;o;)bw(i,o),o=Qi(o.nextSibling)}if(Nw(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"){if(o===0){Nr=Qi(i.nextSibling);break e}o--}else d!=="$"&&d!=="$!"&&d!=="$?"||o++}i=i.nextSibling}Nr=null}}else Nr=Sr?Qi(i.stateNode.nextSibling):null;return!0}function Tw(){for(var i=Nr;i;)i=Qi(i.nextSibling)}function bl(){Nr=Sr=null,Kt=!1}function wp(i){ns===null?ns=[i]:ns.push(i)}var IA=O.ReactCurrentBatchConfig;function eu(i,o,d){if(i=d.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var p=d.stateNode}if(!p)throw Error(t(147,i));var w=p,T=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===T?o.ref:(o=function(L){var W=w.refs;L===null?delete W[T]:W[T]=L},o._stringRef=T,o)}if(typeof i!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,i))}return i}function sh(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Cw(i){var o=i._init;return o(i._payload)}function Iw(i){function o(ne,G){if(i){var re=ne.deletions;re===null?(ne.deletions=[G],ne.flags|=16):re.push(G)}}function d(ne,G){if(!i)return null;for(;G!==null;)o(ne,G),G=G.sibling;return null}function p(ne,G){for(ne=new Map;G!==null;)G.key!==null?ne.set(G.key,G):ne.set(G.index,G),G=G.sibling;return ne}function w(ne,G){return ne=oo(ne,G),ne.index=0,ne.sibling=null,ne}function T(ne,G,re){return ne.index=re,i?(re=ne.alternate,re!==null?(re=re.index,re<G?(ne.flags|=2,G):re):(ne.flags|=2,G)):(ne.flags|=1048576,G)}function L(ne){return i&&ne.alternate===null&&(ne.flags|=2),ne}function W(ne,G,re,xe){return G===null||G.tag!==6?(G=dg(re,ne.mode,xe),G.return=ne,G):(G=w(G,re),G.return=ne,G)}function K(ne,G,re,xe){var Ve=re.type;return Ve===P?pe(ne,G,re.props.children,xe,re.key):G!==null&&(G.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===J&&Cw(Ve)===G.type)?(xe=w(G,re.props),xe.ref=eu(ne,G,re),xe.return=ne,xe):(xe=Ih(re.type,re.key,re.props,null,ne.mode,xe),xe.ref=eu(ne,G,re),xe.return=ne,xe)}function ie(ne,G,re,xe){return G===null||G.tag!==4||G.stateNode.containerInfo!==re.containerInfo||G.stateNode.implementation!==re.implementation?(G=hg(re,ne.mode,xe),G.return=ne,G):(G=w(G,re.children||[]),G.return=ne,G)}function pe(ne,G,re,xe,Ve){return G===null||G.tag!==7?(G=wa(re,ne.mode,xe,Ve),G.return=ne,G):(G=w(G,re),G.return=ne,G)}function ge(ne,G,re){if(typeof G=="string"&&G!==""||typeof G=="number")return G=dg(""+G,ne.mode,re),G.return=ne,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case V:return re=Ih(G.type,G.key,G.props,null,ne.mode,re),re.ref=eu(ne,null,G),re.return=ne,re;case B:return G=hg(G,ne.mode,re),G.return=ne,G;case J:var xe=G._init;return ge(ne,xe(G._payload),re)}if(an(G)||Q(G))return G=wa(G,ne.mode,re,null),G.return=ne,G;sh(ne,G)}return null}function fe(ne,G,re,xe){var Ve=G!==null?G.key:null;if(typeof re=="string"&&re!==""||typeof re=="number")return Ve!==null?null:W(ne,G,""+re,xe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case V:return re.key===Ve?K(ne,G,re,xe):null;case B:return re.key===Ve?ie(ne,G,re,xe):null;case J:return Ve=re._init,fe(ne,G,Ve(re._payload),xe)}if(an(re)||Q(re))return Ve!==null?null:pe(ne,G,re,xe,null);sh(ne,re)}return null}function Ae(ne,G,re,xe,Ve){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return ne=ne.get(re)||null,W(G,ne,""+xe,Ve);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case V:return ne=ne.get(xe.key===null?re:xe.key)||null,K(G,ne,xe,Ve);case B:return ne=ne.get(xe.key===null?re:xe.key)||null,ie(G,ne,xe,Ve);case J:var Be=xe._init;return Ae(ne,G,re,Be(xe._payload),Ve)}if(an(xe)||Q(xe))return ne=ne.get(re)||null,pe(G,ne,xe,Ve,null);sh(G,xe)}return null}function Le(ne,G,re,xe){for(var Ve=null,Be=null,qe=G,Ze=G=0,Cn=null;qe!==null&&Ze<re.length;Ze++){qe.index>Ze?(Cn=qe,qe=null):Cn=qe.sibling;var _t=fe(ne,qe,re[Ze],xe);if(_t===null){qe===null&&(qe=Cn);break}i&&qe&&_t.alternate===null&&o(ne,qe),G=T(_t,G,Ze),Be===null?Ve=_t:Be.sibling=_t,Be=_t,qe=Cn}if(Ze===re.length)return d(ne,qe),Kt&&ha(ne,Ze),Ve;if(qe===null){for(;Ze<re.length;Ze++)qe=ge(ne,re[Ze],xe),qe!==null&&(G=T(qe,G,Ze),Be===null?Ve=qe:Be.sibling=qe,Be=qe);return Kt&&ha(ne,Ze),Ve}for(qe=p(ne,qe);Ze<re.length;Ze++)Cn=Ae(qe,ne,Ze,re[Ze],xe),Cn!==null&&(i&&Cn.alternate!==null&&qe.delete(Cn.key===null?Ze:Cn.key),G=T(Cn,G,Ze),Be===null?Ve=Cn:Be.sibling=Cn,Be=Cn);return i&&qe.forEach(function(ao){return o(ne,ao)}),Kt&&ha(ne,Ze),Ve}function Fe(ne,G,re,xe){var Ve=Q(re);if(typeof Ve!="function")throw Error(t(150));if(re=Ve.call(re),re==null)throw Error(t(151));for(var Be=Ve=null,qe=G,Ze=G=0,Cn=null,_t=re.next();qe!==null&&!_t.done;Ze++,_t=re.next()){qe.index>Ze?(Cn=qe,qe=null):Cn=qe.sibling;var ao=fe(ne,qe,_t.value,xe);if(ao===null){qe===null&&(qe=Cn);break}i&&qe&&ao.alternate===null&&o(ne,qe),G=T(ao,G,Ze),Be===null?Ve=ao:Be.sibling=ao,Be=ao,qe=Cn}if(_t.done)return d(ne,qe),Kt&&ha(ne,Ze),Ve;if(qe===null){for(;!_t.done;Ze++,_t=re.next())_t=ge(ne,_t.value,xe),_t!==null&&(G=T(_t,G,Ze),Be===null?Ve=_t:Be.sibling=_t,Be=_t);return Kt&&ha(ne,Ze),Ve}for(qe=p(ne,qe);!_t.done;Ze++,_t=re.next())_t=Ae(qe,ne,Ze,_t.value,xe),_t!==null&&(i&&_t.alternate!==null&&qe.delete(_t.key===null?Ze:_t.key),G=T(_t,G,Ze),Be===null?Ve=_t:Be.sibling=_t,Be=_t);return i&&qe.forEach(function(aP){return o(ne,aP)}),Kt&&ha(ne,Ze),Ve}function rn(ne,G,re,xe){if(typeof re=="object"&&re!==null&&re.type===P&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case V:e:{for(var Ve=re.key,Be=G;Be!==null;){if(Be.key===Ve){if(Ve=re.type,Ve===P){if(Be.tag===7){d(ne,Be.sibling),G=w(Be,re.props.children),G.return=ne,ne=G;break e}}else if(Be.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===J&&Cw(Ve)===Be.type){d(ne,Be.sibling),G=w(Be,re.props),G.ref=eu(ne,Be,re),G.return=ne,ne=G;break e}d(ne,Be);break}else o(ne,Be);Be=Be.sibling}re.type===P?(G=wa(re.props.children,ne.mode,xe,re.key),G.return=ne,ne=G):(xe=Ih(re.type,re.key,re.props,null,ne.mode,xe),xe.ref=eu(ne,G,re),xe.return=ne,ne=xe)}return L(ne);case B:e:{for(Be=re.key;G!==null;){if(G.key===Be)if(G.tag===4&&G.stateNode.containerInfo===re.containerInfo&&G.stateNode.implementation===re.implementation){d(ne,G.sibling),G=w(G,re.children||[]),G.return=ne,ne=G;break e}else{d(ne,G);break}else o(ne,G);G=G.sibling}G=hg(re,ne.mode,xe),G.return=ne,ne=G}return L(ne);case J:return Be=re._init,rn(ne,G,Be(re._payload),xe)}if(an(re))return Le(ne,G,re,xe);if(Q(re))return Fe(ne,G,re,xe);sh(ne,re)}return typeof re=="string"&&re!==""||typeof re=="number"?(re=""+re,G!==null&&G.tag===6?(d(ne,G.sibling),G=w(G,re),G.return=ne,ne=G):(d(ne,G),G=dg(re,ne.mode,xe),G.return=ne,ne=G),L(ne)):d(ne,G)}return rn}var Sl=Iw(!0),jw=Iw(!1),ih=Yi(null),oh=null,Nl=null,_p=null;function Ep(){_p=Nl=oh=null}function bp(i){var o=ih.current;$t(ih),i._currentValue=o}function Sp(i,o,d){for(;i!==null;){var p=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),i===d)break;i=i.return}}function Tl(i,o){oh=i,_p=Nl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(dr=!0),i.firstContext=null)}function Vr(i){var o=i._currentValue;if(_p!==i)if(i={context:i,memoizedValue:o,next:null},Nl===null){if(oh===null)throw Error(t(308));Nl=i,oh.dependencies={lanes:0,firstContext:i}}else Nl=Nl.next=i;return o}var fa=null;function Np(i){fa===null?fa=[i]:fa.push(i)}function Aw(i,o,d,p){var w=o.interleaved;return w===null?(d.next=d,Np(o)):(d.next=w.next,w.next=d),o.interleaved=d,mi(i,p)}function mi(i,o){i.lanes|=o;var d=i.alternate;for(d!==null&&(d.lanes|=o),d=i,i=i.return;i!==null;)i.childLanes|=o,d=i.alternate,d!==null&&(d.childLanes|=o),d=i,i=i.return;return d.tag===3?d.stateNode:null}var Zi=!1;function Tp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pw(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function pi(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function eo(i,o,d){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(xt&2)!==0){var w=p.pending;return w===null?o.next=o:(o.next=w.next,w.next=o),p.pending=o,mi(i,d)}return w=p.interleaved,w===null?(o.next=o,Np(p)):(o.next=w.next,w.next=o),p.interleaved=o,mi(i,d)}function ah(i,o,d){if(o=o.updateQueue,o!==null&&(o=o.shared,(d&4194240)!==0)){var p=o.lanes;p&=i.pendingLanes,d|=p,o.lanes=d,Bi(i,d)}}function Rw(i,o){var d=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,d===p)){var w=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var L={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};T===null?w=T=L:T=T.next=L,d=d.next}while(d!==null);T===null?w=T=o:T=T.next=o}else w=T=o;d={baseState:p.baseState,firstBaseUpdate:w,lastBaseUpdate:T,shared:p.shared,effects:p.effects},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=o:i.next=o,d.lastBaseUpdate=o}function lh(i,o,d,p){var w=i.updateQueue;Zi=!1;var T=w.firstBaseUpdate,L=w.lastBaseUpdate,W=w.shared.pending;if(W!==null){w.shared.pending=null;var K=W,ie=K.next;K.next=null,L===null?T=ie:L.next=ie,L=K;var pe=i.alternate;pe!==null&&(pe=pe.updateQueue,W=pe.lastBaseUpdate,W!==L&&(W===null?pe.firstBaseUpdate=ie:W.next=ie,pe.lastBaseUpdate=K))}if(T!==null){var ge=w.baseState;L=0,pe=ie=K=null,W=T;do{var fe=W.lane,Ae=W.eventTime;if((p&fe)===fe){pe!==null&&(pe=pe.next={eventTime:Ae,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var Le=i,Fe=W;switch(fe=o,Ae=d,Fe.tag){case 1:if(Le=Fe.payload,typeof Le=="function"){ge=Le.call(Ae,ge,fe);break e}ge=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=Fe.payload,fe=typeof Le=="function"?Le.call(Ae,ge,fe):Le,fe==null)break e;ge=Z({},ge,fe);break e;case 2:Zi=!0}}W.callback!==null&&W.lane!==0&&(i.flags|=64,fe=w.effects,fe===null?w.effects=[W]:fe.push(W))}else Ae={eventTime:Ae,lane:fe,tag:W.tag,payload:W.payload,callback:W.callback,next:null},pe===null?(ie=pe=Ae,K=ge):pe=pe.next=Ae,L|=fe;if(W=W.next,W===null){if(W=w.shared.pending,W===null)break;fe=W,W=fe.next,fe.next=null,w.lastBaseUpdate=fe,w.shared.pending=null}}while(!0);if(pe===null&&(K=ge),w.baseState=K,w.firstBaseUpdate=ie,w.lastBaseUpdate=pe,o=w.shared.interleaved,o!==null){w=o;do L|=w.lane,w=w.next;while(w!==o)}else T===null&&(w.shared.lanes=0);ga|=L,i.lanes=L,i.memoizedState=ge}}function kw(i,o,d){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var p=i[o],w=p.callback;if(w!==null){if(p.callback=null,p=d,typeof w!="function")throw Error(t(191,w));w.call(p)}}}var tu={},As=Yi(tu),nu=Yi(tu),ru=Yi(tu);function ma(i){if(i===tu)throw Error(t(174));return i}function Cp(i,o){switch(Dt(ru,o),Dt(nu,i),Dt(As,tu),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Nt(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Nt(o,i)}$t(As),Dt(As,o)}function Cl(){$t(As),$t(nu),$t(ru)}function Dw(i){ma(ru.current);var o=ma(As.current),d=Nt(o,i.type);o!==d&&(Dt(nu,i),Dt(As,d))}function Ip(i){nu.current===i&&($t(As),$t(nu))}var Qt=Yi(0);function ch(i){for(var o=i;o!==null;){if(o.tag===13){var d=o.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var jp=[];function Ap(){for(var i=0;i<jp.length;i++)jp[i]._workInProgressVersionPrimary=null;jp.length=0}var uh=O.ReactCurrentDispatcher,Pp=O.ReactCurrentBatchConfig,pa=0,Yt=null,xn=null,Nn=null,dh=!1,su=!1,iu=0,jA=0;function $n(){throw Error(t(321))}function Rp(i,o){if(o===null)return!1;for(var d=0;d<o.length&&d<i.length;d++)if(!ts(i[d],o[d]))return!1;return!0}function kp(i,o,d,p,w,T){if(pa=T,Yt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,uh.current=i===null||i.memoizedState===null?kA:DA,i=d(p,w),su){T=0;do{if(su=!1,iu=0,25<=T)throw Error(t(301));T+=1,Nn=xn=null,o.updateQueue=null,uh.current=OA,i=d(p,w)}while(su)}if(uh.current=mh,o=xn!==null&&xn.next!==null,pa=0,Nn=xn=Yt=null,dh=!1,o)throw Error(t(300));return i}function Dp(){var i=iu!==0;return iu=0,i}function Ps(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?Yt.memoizedState=Nn=i:Nn=Nn.next=i,Nn}function Ur(){if(xn===null){var i=Yt.alternate;i=i!==null?i.memoizedState:null}else i=xn.next;var o=Nn===null?Yt.memoizedState:Nn.next;if(o!==null)Nn=o,xn=i;else{if(i===null)throw Error(t(310));xn=i,i={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},Nn===null?Yt.memoizedState=Nn=i:Nn=Nn.next=i}return Nn}function ou(i,o){return typeof o=="function"?o(i):o}function Op(i){var o=Ur(),d=o.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=i;var p=xn,w=p.baseQueue,T=d.pending;if(T!==null){if(w!==null){var L=w.next;w.next=T.next,T.next=L}p.baseQueue=w=T,d.pending=null}if(w!==null){T=w.next,p=p.baseState;var W=L=null,K=null,ie=T;do{var pe=ie.lane;if((pa&pe)===pe)K!==null&&(K=K.next={lane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),p=ie.hasEagerState?ie.eagerState:i(p,ie.action);else{var ge={lane:pe,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null};K===null?(W=K=ge,L=p):K=K.next=ge,Yt.lanes|=pe,ga|=pe}ie=ie.next}while(ie!==null&&ie!==T);K===null?L=p:K.next=W,ts(p,o.memoizedState)||(dr=!0),o.memoizedState=p,o.baseState=L,o.baseQueue=K,d.lastRenderedState=p}if(i=d.interleaved,i!==null){w=i;do T=w.lane,Yt.lanes|=T,ga|=T,w=w.next;while(w!==i)}else w===null&&(d.lanes=0);return[o.memoizedState,d.dispatch]}function Lp(i){var o=Ur(),d=o.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=i;var p=d.dispatch,w=d.pending,T=o.memoizedState;if(w!==null){d.pending=null;var L=w=w.next;do T=i(T,L.action),L=L.next;while(L!==w);ts(T,o.memoizedState)||(dr=!0),o.memoizedState=T,o.baseQueue===null&&(o.baseState=T),d.lastRenderedState=T}return[T,p]}function Ow(){}function Lw(i,o){var d=Yt,p=Ur(),w=o(),T=!ts(p.memoizedState,w);if(T&&(p.memoizedState=w,dr=!0),p=p.queue,Mp(Vw.bind(null,d,p,i),[i]),p.getSnapshot!==o||T||Nn!==null&&Nn.memoizedState.tag&1){if(d.flags|=2048,au(9,Fw.bind(null,d,p,w,o),void 0,null),Tn===null)throw Error(t(349));(pa&30)!==0||Mw(d,o,w)}return w}function Mw(i,o,d){i.flags|=16384,i={getSnapshot:o,value:d},o=Yt.updateQueue,o===null?(o={lastEffect:null,stores:null},Yt.updateQueue=o,o.stores=[i]):(d=o.stores,d===null?o.stores=[i]:d.push(i))}function Fw(i,o,d,p){o.value=d,o.getSnapshot=p,Uw(o)&&$w(i)}function Vw(i,o,d){return d(function(){Uw(o)&&$w(i)})}function Uw(i){var o=i.getSnapshot;i=i.value;try{var d=o();return!ts(i,d)}catch{return!0}}function $w(i){var o=mi(i,1);o!==null&&os(o,i,1,-1)}function zw(i){var o=Ps();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ou,lastRenderedState:i},o.queue=i,i=i.dispatch=RA.bind(null,Yt,i),[o.memoizedState,i]}function au(i,o,d,p){return i={tag:i,create:o,destroy:d,deps:p,next:null},o=Yt.updateQueue,o===null?(o={lastEffect:null,stores:null},Yt.updateQueue=o,o.lastEffect=i.next=i):(d=o.lastEffect,d===null?o.lastEffect=i.next=i:(p=d.next,d.next=i,i.next=p,o.lastEffect=i)),i}function Bw(){return Ur().memoizedState}function hh(i,o,d,p){var w=Ps();Yt.flags|=i,w.memoizedState=au(1|o,d,void 0,p===void 0?null:p)}function fh(i,o,d,p){var w=Ur();p=p===void 0?null:p;var T=void 0;if(xn!==null){var L=xn.memoizedState;if(T=L.destroy,p!==null&&Rp(p,L.deps)){w.memoizedState=au(o,d,T,p);return}}Yt.flags|=i,w.memoizedState=au(1|o,d,T,p)}function qw(i,o){return hh(8390656,8,i,o)}function Mp(i,o){return fh(2048,8,i,o)}function Ww(i,o){return fh(4,2,i,o)}function Hw(i,o){return fh(4,4,i,o)}function Kw(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Gw(i,o,d){return d=d!=null?d.concat([i]):null,fh(4,4,Kw.bind(null,o,i),d)}function Fp(){}function Qw(i,o){var d=Ur();o=o===void 0?null:o;var p=d.memoizedState;return p!==null&&o!==null&&Rp(o,p[1])?p[0]:(d.memoizedState=[i,o],i)}function Yw(i,o){var d=Ur();o=o===void 0?null:o;var p=d.memoizedState;return p!==null&&o!==null&&Rp(o,p[1])?p[0]:(i=i(),d.memoizedState=[i,o],i)}function Xw(i,o,d){return(pa&21)===0?(i.baseState&&(i.baseState=!1,dr=!0),i.memoizedState=d):(ts(d,o)||(d=sa(),Yt.lanes|=d,ga|=d,i.baseState=!0),o)}function AA(i,o){var d=ft;ft=d!==0&&4>d?d:4,i(!0);var p=Pp.transition;Pp.transition={};try{i(!1),o()}finally{ft=d,Pp.transition=p}}function Jw(){return Ur().memoizedState}function PA(i,o,d){var p=so(i);if(d={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null},Zw(i))e0(o,d);else if(d=Aw(i,o,d,p),d!==null){var w=nr();os(d,i,p,w),t0(d,o,p)}}function RA(i,o,d){var p=so(i),w={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null};if(Zw(i))e0(o,w);else{var T=i.alternate;if(i.lanes===0&&(T===null||T.lanes===0)&&(T=o.lastRenderedReducer,T!==null))try{var L=o.lastRenderedState,W=T(L,d);if(w.hasEagerState=!0,w.eagerState=W,ts(W,L)){var K=o.interleaved;K===null?(w.next=w,Np(o)):(w.next=K.next,K.next=w),o.interleaved=w;return}}catch{}finally{}d=Aw(i,o,w,p),d!==null&&(w=nr(),os(d,i,p,w),t0(d,o,p))}}function Zw(i){var o=i.alternate;return i===Yt||o!==null&&o===Yt}function e0(i,o){su=dh=!0;var d=i.pending;d===null?o.next=o:(o.next=d.next,d.next=o),i.pending=o}function t0(i,o,d){if((d&4194240)!==0){var p=o.lanes;p&=i.pendingLanes,d|=p,o.lanes=d,Bi(i,d)}}var mh={readContext:Vr,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useInsertionEffect:$n,useLayoutEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useMutableSource:$n,useSyncExternalStore:$n,useId:$n,unstable_isNewReconciler:!1},kA={readContext:Vr,useCallback:function(i,o){return Ps().memoizedState=[i,o===void 0?null:o],i},useContext:Vr,useEffect:qw,useImperativeHandle:function(i,o,d){return d=d!=null?d.concat([i]):null,hh(4194308,4,Kw.bind(null,o,i),d)},useLayoutEffect:function(i,o){return hh(4194308,4,i,o)},useInsertionEffect:function(i,o){return hh(4,2,i,o)},useMemo:function(i,o){var d=Ps();return o=o===void 0?null:o,i=i(),d.memoizedState=[i,o],i},useReducer:function(i,o,d){var p=Ps();return o=d!==void 0?d(o):o,p.memoizedState=p.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},p.queue=i,i=i.dispatch=PA.bind(null,Yt,i),[p.memoizedState,i]},useRef:function(i){var o=Ps();return i={current:i},o.memoizedState=i},useState:zw,useDebugValue:Fp,useDeferredValue:function(i){return Ps().memoizedState=i},useTransition:function(){var i=zw(!1),o=i[0];return i=AA.bind(null,i[1]),Ps().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,d){var p=Yt,w=Ps();if(Kt){if(d===void 0)throw Error(t(407));d=d()}else{if(d=o(),Tn===null)throw Error(t(349));(pa&30)!==0||Mw(p,o,d)}w.memoizedState=d;var T={value:d,getSnapshot:o};return w.queue=T,qw(Vw.bind(null,p,T,i),[i]),p.flags|=2048,au(9,Fw.bind(null,p,T,d,o),void 0,null),d},useId:function(){var i=Ps(),o=Tn.identifierPrefix;if(Kt){var d=fi,p=hi;d=(p&~(1<<32-Zn(p)-1)).toString(32)+d,o=":"+o+"R"+d,d=iu++,0<d&&(o+="H"+d.toString(32)),o+=":"}else d=jA++,o=":"+o+"r"+d.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},DA={readContext:Vr,useCallback:Qw,useContext:Vr,useEffect:Mp,useImperativeHandle:Gw,useInsertionEffect:Ww,useLayoutEffect:Hw,useMemo:Yw,useReducer:Op,useRef:Bw,useState:function(){return Op(ou)},useDebugValue:Fp,useDeferredValue:function(i){var o=Ur();return Xw(o,xn.memoizedState,i)},useTransition:function(){var i=Op(ou)[0],o=Ur().memoizedState;return[i,o]},useMutableSource:Ow,useSyncExternalStore:Lw,useId:Jw,unstable_isNewReconciler:!1},OA={readContext:Vr,useCallback:Qw,useContext:Vr,useEffect:Mp,useImperativeHandle:Gw,useInsertionEffect:Ww,useLayoutEffect:Hw,useMemo:Yw,useReducer:Lp,useRef:Bw,useState:function(){return Lp(ou)},useDebugValue:Fp,useDeferredValue:function(i){var o=Ur();return xn===null?o.memoizedState=i:Xw(o,xn.memoizedState,i)},useTransition:function(){var i=Lp(ou)[0],o=Ur().memoizedState;return[i,o]},useMutableSource:Ow,useSyncExternalStore:Lw,useId:Jw,unstable_isNewReconciler:!1};function rs(i,o){if(i&&i.defaultProps){o=Z({},o),i=i.defaultProps;for(var d in i)o[d]===void 0&&(o[d]=i[d]);return o}return o}function Vp(i,o,d,p){o=i.memoizedState,d=d(p,o),d=d==null?o:Z({},o,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var ph={isMounted:function(i){return(i=i._reactInternals)?Gr(i)===i:!1},enqueueSetState:function(i,o,d){i=i._reactInternals;var p=nr(),w=so(i),T=pi(p,w);T.payload=o,d!=null&&(T.callback=d),o=eo(i,T,w),o!==null&&(os(o,i,w,p),ah(o,i,w))},enqueueReplaceState:function(i,o,d){i=i._reactInternals;var p=nr(),w=so(i),T=pi(p,w);T.tag=1,T.payload=o,d!=null&&(T.callback=d),o=eo(i,T,w),o!==null&&(os(o,i,w,p),ah(o,i,w))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var d=nr(),p=so(i),w=pi(d,p);w.tag=2,o!=null&&(w.callback=o),o=eo(i,w,p),o!==null&&(os(o,i,p,d),ah(o,i,p))}};function n0(i,o,d,p,w,T,L){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,T,L):o.prototype&&o.prototype.isPureReactComponent?!Kc(d,p)||!Kc(w,T):!0}function r0(i,o,d){var p=!1,w=Xi,T=o.contextType;return typeof T=="object"&&T!==null?T=Vr(T):(w=ur(o)?ua:Un.current,p=o.contextTypes,T=(p=p!=null)?wl(i,w):Xi),o=new o(d,T),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=ph,i.stateNode=o,o._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=w,i.__reactInternalMemoizedMaskedChildContext=T),o}function s0(i,o,d,p){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(d,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(d,p),o.state!==i&&ph.enqueueReplaceState(o,o.state,null)}function Up(i,o,d,p){var w=i.stateNode;w.props=d,w.state=i.memoizedState,w.refs={},Tp(i);var T=o.contextType;typeof T=="object"&&T!==null?w.context=Vr(T):(T=ur(o)?ua:Un.current,w.context=wl(i,T)),w.state=i.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(Vp(i,o,T,d),w.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(o=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),o!==w.state&&ph.enqueueReplaceState(w,w.state,null),lh(i,d,w,p),w.state=i.memoizedState),typeof w.componentDidMount=="function"&&(i.flags|=4194308)}function Il(i,o){try{var d="",p=o;do d+=ve(p),p=p.return;while(p);var w=d}catch(T){w=`
Error generating stack: `+T.message+`
`+T.stack}return{value:i,source:o,stack:w,digest:null}}function $p(i,o,d){return{value:i,source:null,stack:d??null,digest:o??null}}function zp(i,o){try{console.error(o.value)}catch(d){setTimeout(function(){throw d})}}var LA=typeof WeakMap=="function"?WeakMap:Map;function i0(i,o,d){d=pi(-1,d),d.tag=3,d.payload={element:null};var p=o.value;return d.callback=function(){Eh||(Eh=!0,rg=p),zp(i,o)},d}function o0(i,o,d){d=pi(-1,d),d.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var w=o.value;d.payload=function(){return p(w)},d.callback=function(){zp(i,o)}}var T=i.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(d.callback=function(){zp(i,o),typeof p!="function"&&(no===null?no=new Set([this]):no.add(this));var L=o.stack;this.componentDidCatch(o.value,{componentStack:L!==null?L:""})}),d}function a0(i,o,d){var p=i.pingCache;if(p===null){p=i.pingCache=new LA;var w=new Set;p.set(o,w)}else w=p.get(o),w===void 0&&(w=new Set,p.set(o,w));w.has(d)||(w.add(d),i=YA.bind(null,i,o,d),o.then(i,i))}function l0(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function c0(i,o,d,p,w){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(o=pi(-1,1),o.tag=2,eo(d,o,1))),d.lanes|=1),i):(i.flags|=65536,i.lanes=w,i)}var MA=O.ReactCurrentOwner,dr=!1;function tr(i,o,d,p){o.child=i===null?jw(o,null,d,p):Sl(o,i.child,d,p)}function u0(i,o,d,p,w){d=d.render;var T=o.ref;return Tl(o,w),p=kp(i,o,d,p,T,w),d=Dp(),i!==null&&!dr?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~w,gi(i,o,w)):(Kt&&d&&gp(o),o.flags|=1,tr(i,o,p,w),o.child)}function d0(i,o,d,p,w){if(i===null){var T=d.type;return typeof T=="function"&&!ug(T)&&T.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(o.tag=15,o.type=T,h0(i,o,T,p,w)):(i=Ih(d.type,null,p,o,o.mode,w),i.ref=o.ref,i.return=o,o.child=i)}if(T=i.child,(i.lanes&w)===0){var L=T.memoizedProps;if(d=d.compare,d=d!==null?d:Kc,d(L,p)&&i.ref===o.ref)return gi(i,o,w)}return o.flags|=1,i=oo(T,p),i.ref=o.ref,i.return=o,o.child=i}function h0(i,o,d,p,w){if(i!==null){var T=i.memoizedProps;if(Kc(T,p)&&i.ref===o.ref)if(dr=!1,o.pendingProps=p=T,(i.lanes&w)!==0)(i.flags&131072)!==0&&(dr=!0);else return o.lanes=i.lanes,gi(i,o,w)}return Bp(i,o,d,p,w)}function f0(i,o,d){var p=o.pendingProps,w=p.children,T=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt(Al,Tr),Tr|=d;else{if((d&1073741824)===0)return i=T!==null?T.baseLanes|d:d,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Dt(Al,Tr),Tr|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=T!==null?T.baseLanes:d,Dt(Al,Tr),Tr|=p}else T!==null?(p=T.baseLanes|d,o.memoizedState=null):p=d,Dt(Al,Tr),Tr|=p;return tr(i,o,w,d),o.child}function m0(i,o){var d=o.ref;(i===null&&d!==null||i!==null&&i.ref!==d)&&(o.flags|=512,o.flags|=2097152)}function Bp(i,o,d,p,w){var T=ur(d)?ua:Un.current;return T=wl(o,T),Tl(o,w),d=kp(i,o,d,p,T,w),p=Dp(),i!==null&&!dr?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~w,gi(i,o,w)):(Kt&&p&&gp(o),o.flags|=1,tr(i,o,d,w),o.child)}function p0(i,o,d,p,w){if(ur(d)){var T=!0;Zd(o)}else T=!1;if(Tl(o,w),o.stateNode===null)vh(i,o),r0(o,d,p),Up(o,d,p,w),p=!0;else if(i===null){var L=o.stateNode,W=o.memoizedProps;L.props=W;var K=L.context,ie=d.contextType;typeof ie=="object"&&ie!==null?ie=Vr(ie):(ie=ur(d)?ua:Un.current,ie=wl(o,ie));var pe=d.getDerivedStateFromProps,ge=typeof pe=="function"||typeof L.getSnapshotBeforeUpdate=="function";ge||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(W!==p||K!==ie)&&s0(o,L,p,ie),Zi=!1;var fe=o.memoizedState;L.state=fe,lh(o,p,L,w),K=o.memoizedState,W!==p||fe!==K||cr.current||Zi?(typeof pe=="function"&&(Vp(o,d,pe,p),K=o.memoizedState),(W=Zi||n0(o,d,W,p,fe,K,ie))?(ge||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(o.flags|=4194308)):(typeof L.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=K),L.props=p,L.state=K,L.context=ie,p=W):(typeof L.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{L=o.stateNode,Pw(i,o),W=o.memoizedProps,ie=o.type===o.elementType?W:rs(o.type,W),L.props=ie,ge=o.pendingProps,fe=L.context,K=d.contextType,typeof K=="object"&&K!==null?K=Vr(K):(K=ur(d)?ua:Un.current,K=wl(o,K));var Ae=d.getDerivedStateFromProps;(pe=typeof Ae=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(W!==ge||fe!==K)&&s0(o,L,p,K),Zi=!1,fe=o.memoizedState,L.state=fe,lh(o,p,L,w);var Le=o.memoizedState;W!==ge||fe!==Le||cr.current||Zi?(typeof Ae=="function"&&(Vp(o,d,Ae,p),Le=o.memoizedState),(ie=Zi||n0(o,d,ie,p,fe,Le,K)||!1)?(pe||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(p,Le,K),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(p,Le,K)),typeof L.componentDidUpdate=="function"&&(o.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof L.componentDidUpdate!="function"||W===i.memoizedProps&&fe===i.memoizedState||(o.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||W===i.memoizedProps&&fe===i.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=Le),L.props=p,L.state=Le,L.context=K,p=ie):(typeof L.componentDidUpdate!="function"||W===i.memoizedProps&&fe===i.memoizedState||(o.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||W===i.memoizedProps&&fe===i.memoizedState||(o.flags|=1024),p=!1)}return qp(i,o,d,p,T,w)}function qp(i,o,d,p,w,T){m0(i,o);var L=(o.flags&128)!==0;if(!p&&!L)return w&&ww(o,d,!1),gi(i,o,T);p=o.stateNode,MA.current=o;var W=L&&typeof d.getDerivedStateFromError!="function"?null:p.render();return o.flags|=1,i!==null&&L?(o.child=Sl(o,i.child,null,T),o.child=Sl(o,null,W,T)):tr(i,o,W,T),o.memoizedState=p.state,w&&ww(o,d,!0),o.child}function g0(i){var o=i.stateNode;o.pendingContext?yw(i,o.pendingContext,o.pendingContext!==o.context):o.context&&yw(i,o.context,!1),Cp(i,o.containerInfo)}function v0(i,o,d,p,w){return bl(),wp(w),o.flags|=256,tr(i,o,d,p),o.child}var Wp={dehydrated:null,treeContext:null,retryLane:0};function Hp(i){return{baseLanes:i,cachePool:null,transitions:null}}function y0(i,o,d){var p=o.pendingProps,w=Qt.current,T=!1,L=(o.flags&128)!==0,W;if((W=L)||(W=i!==null&&i.memoizedState===null?!1:(w&2)!==0),W?(T=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(w|=1),Dt(Qt,w&1),i===null)return xp(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(L=p.children,i=p.fallback,T?(p=o.mode,T=o.child,L={mode:"hidden",children:L},(p&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=L):T=jh(L,p,0,null),i=wa(i,p,d,null),T.return=o,i.return=o,T.sibling=i,o.child=T,o.child.memoizedState=Hp(d),o.memoizedState=Wp,i):Kp(o,L));if(w=i.memoizedState,w!==null&&(W=w.dehydrated,W!==null))return FA(i,o,L,p,W,w,d);if(T){T=p.fallback,L=o.mode,w=i.child,W=w.sibling;var K={mode:"hidden",children:p.children};return(L&1)===0&&o.child!==w?(p=o.child,p.childLanes=0,p.pendingProps=K,o.deletions=null):(p=oo(w,K),p.subtreeFlags=w.subtreeFlags&14680064),W!==null?T=oo(W,T):(T=wa(T,L,d,null),T.flags|=2),T.return=o,p.return=o,p.sibling=T,o.child=p,p=T,T=o.child,L=i.child.memoizedState,L=L===null?Hp(d):{baseLanes:L.baseLanes|d,cachePool:null,transitions:L.transitions},T.memoizedState=L,T.childLanes=i.childLanes&~d,o.memoizedState=Wp,p}return T=i.child,i=T.sibling,p=oo(T,{mode:"visible",children:p.children}),(o.mode&1)===0&&(p.lanes=d),p.return=o,p.sibling=null,i!==null&&(d=o.deletions,d===null?(o.deletions=[i],o.flags|=16):d.push(i)),o.child=p,o.memoizedState=null,p}function Kp(i,o){return o=jh({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function gh(i,o,d,p){return p!==null&&wp(p),Sl(o,i.child,null,d),i=Kp(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function FA(i,o,d,p,w,T,L){if(d)return o.flags&256?(o.flags&=-257,p=$p(Error(t(422))),gh(i,o,L,p)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(T=p.fallback,w=o.mode,p=jh({mode:"visible",children:p.children},w,0,null),T=wa(T,w,L,null),T.flags|=2,p.return=o,T.return=o,p.sibling=T,o.child=p,(o.mode&1)!==0&&Sl(o,i.child,null,L),o.child.memoizedState=Hp(L),o.memoizedState=Wp,T);if((o.mode&1)===0)return gh(i,o,L,null);if(w.data==="$!"){if(p=w.nextSibling&&w.nextSibling.dataset,p)var W=p.dgst;return p=W,T=Error(t(419)),p=$p(T,p,void 0),gh(i,o,L,p)}if(W=(L&i.childLanes)!==0,dr||W){if(p=Tn,p!==null){switch(L&-L){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(p.suspendedLanes|L))!==0?0:w,w!==0&&w!==T.retryLane&&(T.retryLane=w,mi(i,w),os(p,i,w,-1))}return cg(),p=$p(Error(t(421))),gh(i,o,L,p)}return w.data==="$?"?(o.flags|=128,o.child=i.child,o=XA.bind(null,i),w._reactRetry=o,null):(i=T.treeContext,Nr=Qi(w.nextSibling),Sr=o,Kt=!0,ns=null,i!==null&&(Mr[Fr++]=hi,Mr[Fr++]=fi,Mr[Fr++]=da,hi=i.id,fi=i.overflow,da=o),o=Kp(o,p.children),o.flags|=4096,o)}function x0(i,o,d){i.lanes|=o;var p=i.alternate;p!==null&&(p.lanes|=o),Sp(i.return,o,d)}function Gp(i,o,d,p,w){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:d,tailMode:w}:(T.isBackwards=o,T.rendering=null,T.renderingStartTime=0,T.last=p,T.tail=d,T.tailMode=w)}function w0(i,o,d){var p=o.pendingProps,w=p.revealOrder,T=p.tail;if(tr(i,o,p.children,d),p=Qt.current,(p&2)!==0)p=p&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&x0(i,d,o);else if(i.tag===19)x0(i,d,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(Dt(Qt,p),(o.mode&1)===0)o.memoizedState=null;else switch(w){case"forwards":for(d=o.child,w=null;d!==null;)i=d.alternate,i!==null&&ch(i)===null&&(w=d),d=d.sibling;d=w,d===null?(w=o.child,o.child=null):(w=d.sibling,d.sibling=null),Gp(o,!1,w,d,T);break;case"backwards":for(d=null,w=o.child,o.child=null;w!==null;){if(i=w.alternate,i!==null&&ch(i)===null){o.child=w;break}i=w.sibling,w.sibling=d,d=w,w=i}Gp(o,!0,d,null,T);break;case"together":Gp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function vh(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function gi(i,o,d){if(i!==null&&(o.dependencies=i.dependencies),ga|=o.lanes,(d&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,d=oo(i,i.pendingProps),o.child=d,d.return=o;i.sibling!==null;)i=i.sibling,d=d.sibling=oo(i,i.pendingProps),d.return=o;d.sibling=null}return o.child}function VA(i,o,d){switch(o.tag){case 3:g0(o),bl();break;case 5:Dw(o);break;case 1:ur(o.type)&&Zd(o);break;case 4:Cp(o,o.stateNode.containerInfo);break;case 10:var p=o.type._context,w=o.memoizedProps.value;Dt(ih,p._currentValue),p._currentValue=w;break;case 13:if(p=o.memoizedState,p!==null)return p.dehydrated!==null?(Dt(Qt,Qt.current&1),o.flags|=128,null):(d&o.child.childLanes)!==0?y0(i,o,d):(Dt(Qt,Qt.current&1),i=gi(i,o,d),i!==null?i.sibling:null);Dt(Qt,Qt.current&1);break;case 19:if(p=(d&o.childLanes)!==0,(i.flags&128)!==0){if(p)return w0(i,o,d);o.flags|=128}if(w=o.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),Dt(Qt,Qt.current),p)break;return null;case 22:case 23:return o.lanes=0,f0(i,o,d)}return gi(i,o,d)}var _0,Qp,E0,b0;_0=function(i,o){for(var d=o.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===o)break;for(;d.sibling===null;){if(d.return===null||d.return===o)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Qp=function(){},E0=function(i,o,d,p){var w=i.memoizedProps;if(w!==p){i=o.stateNode,ma(As.current);var T=null;switch(d){case"input":w=Ct(i,w),p=Ct(i,p),T=[];break;case"select":w=Z({},w,{value:void 0}),p=Z({},p,{value:void 0}),T=[];break;case"textarea":w=ti(i,w),p=ti(i,p),T=[];break;default:typeof w.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=Yd)}Vn(d,p);var L;d=null;for(ie in w)if(!p.hasOwnProperty(ie)&&w.hasOwnProperty(ie)&&w[ie]!=null)if(ie==="style"){var W=w[ie];for(L in W)W.hasOwnProperty(L)&&(d||(d={}),d[L]="")}else ie!=="dangerouslySetInnerHTML"&&ie!=="children"&&ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&ie!=="autoFocus"&&(s.hasOwnProperty(ie)?T||(T=[]):(T=T||[]).push(ie,null));for(ie in p){var K=p[ie];if(W=w!=null?w[ie]:void 0,p.hasOwnProperty(ie)&&K!==W&&(K!=null||W!=null))if(ie==="style")if(W){for(L in W)!W.hasOwnProperty(L)||K&&K.hasOwnProperty(L)||(d||(d={}),d[L]="");for(L in K)K.hasOwnProperty(L)&&W[L]!==K[L]&&(d||(d={}),d[L]=K[L])}else d||(T||(T=[]),T.push(ie,d)),d=K;else ie==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,W=W?W.__html:void 0,K!=null&&W!==K&&(T=T||[]).push(ie,K)):ie==="children"?typeof K!="string"&&typeof K!="number"||(T=T||[]).push(ie,""+K):ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&(s.hasOwnProperty(ie)?(K!=null&&ie==="onScroll"&&Ut("scroll",i),T||W===K||(T=[])):(T=T||[]).push(ie,K))}d&&(T=T||[]).push("style",d);var ie=T;(o.updateQueue=ie)&&(o.flags|=4)}},b0=function(i,o,d,p){d!==p&&(o.flags|=4)};function lu(i,o){if(!Kt)switch(i.tailMode){case"hidden":o=i.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function zn(i){var o=i.alternate!==null&&i.alternate.child===i.child,d=0,p=0;if(o)for(var w=i.child;w!==null;)d|=w.lanes|w.childLanes,p|=w.subtreeFlags&14680064,p|=w.flags&14680064,w.return=i,w=w.sibling;else for(w=i.child;w!==null;)d|=w.lanes|w.childLanes,p|=w.subtreeFlags,p|=w.flags,w.return=i,w=w.sibling;return i.subtreeFlags|=p,i.childLanes=d,o}function UA(i,o,d){var p=o.pendingProps;switch(vp(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(o),null;case 1:return ur(o.type)&&Jd(),zn(o),null;case 3:return p=o.stateNode,Cl(),$t(cr),$t(Un),Ap(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(rh(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ns!==null&&(og(ns),ns=null))),Qp(i,o),zn(o),null;case 5:Ip(o);var w=ma(ru.current);if(d=o.type,i!==null&&o.stateNode!=null)E0(i,o,d,p,w),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!p){if(o.stateNode===null)throw Error(t(166));return zn(o),null}if(i=ma(As.current),rh(o)){p=o.stateNode,d=o.type;var T=o.memoizedProps;switch(p[js]=o,p[Jc]=T,i=(o.mode&1)!==0,d){case"dialog":Ut("cancel",p),Ut("close",p);break;case"iframe":case"object":case"embed":Ut("load",p);break;case"video":case"audio":for(w=0;w<Qc.length;w++)Ut(Qc[w],p);break;case"source":Ut("error",p);break;case"img":case"image":case"link":Ut("error",p),Ut("load",p);break;case"details":Ut("toggle",p);break;case"input":on(p,T),Ut("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!T.multiple},Ut("invalid",p);break;case"textarea":Jn(p,T),Ut("invalid",p)}Vn(d,T),w=null;for(var L in T)if(T.hasOwnProperty(L)){var W=T[L];L==="children"?typeof W=="string"?p.textContent!==W&&(T.suppressHydrationWarning!==!0&&Qd(p.textContent,W,i),w=["children",W]):typeof W=="number"&&p.textContent!==""+W&&(T.suppressHydrationWarning!==!0&&Qd(p.textContent,W,i),w=["children",""+W]):s.hasOwnProperty(L)&&W!=null&&L==="onScroll"&&Ut("scroll",p)}switch(d){case"input":Me(p),vt(p,T,!0);break;case"textarea":Me(p),xs(p);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(p.onclick=Yd)}p=w,o.updateQueue=p,p!==null&&(o.flags|=4)}else{L=w.nodeType===9?w:w.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Ft(d)),i==="http://www.w3.org/1999/xhtml"?d==="script"?(i=L.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=L.createElement(d,{is:p.is}):(i=L.createElement(d),d==="select"&&(L=i,p.multiple?L.multiple=!0:p.size&&(L.size=p.size))):i=L.createElementNS(i,d),i[js]=o,i[Jc]=p,_0(i,o,!1,!1),o.stateNode=i;e:{switch(L=_s(d,p),d){case"dialog":Ut("cancel",i),Ut("close",i),w=p;break;case"iframe":case"object":case"embed":Ut("load",i),w=p;break;case"video":case"audio":for(w=0;w<Qc.length;w++)Ut(Qc[w],i);w=p;break;case"source":Ut("error",i),w=p;break;case"img":case"image":case"link":Ut("error",i),Ut("load",i),w=p;break;case"details":Ut("toggle",i),w=p;break;case"input":on(i,p),w=Ct(i,p),Ut("invalid",i);break;case"option":w=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},w=Z({},p,{value:void 0}),Ut("invalid",i);break;case"textarea":Jn(i,p),w=ti(i,p),Ut("invalid",i);break;default:w=p}Vn(d,w),W=w;for(T in W)if(W.hasOwnProperty(T)){var K=W[T];T==="style"?ni(i,K):T==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,K!=null&&gn(i,K)):T==="children"?typeof K=="string"?(d!=="textarea"||K!=="")&&xr(i,K):typeof K=="number"&&xr(i,""+K):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(s.hasOwnProperty(T)?K!=null&&T==="onScroll"&&Ut("scroll",i):K!=null&&C(i,T,K,L))}switch(d){case"input":Me(i),vt(i,p,!1);break;case"textarea":Me(i),xs(i);break;case"option":p.value!=null&&i.setAttribute("value",""+Ee(p.value));break;case"select":i.multiple=!!p.multiple,T=p.value,T!=null?Xn(i,!!p.multiple,T,!1):p.defaultValue!=null&&Xn(i,!!p.multiple,p.defaultValue,!0);break;default:typeof w.onClick=="function"&&(i.onclick=Yd)}switch(d){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return zn(o),null;case 6:if(i&&o.stateNode!=null)b0(i,o,i.memoizedProps,p);else{if(typeof p!="string"&&o.stateNode===null)throw Error(t(166));if(d=ma(ru.current),ma(As.current),rh(o)){if(p=o.stateNode,d=o.memoizedProps,p[js]=o,(T=p.nodeValue!==d)&&(i=Sr,i!==null))switch(i.tag){case 3:Qd(p.nodeValue,d,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Qd(p.nodeValue,d,(i.mode&1)!==0)}T&&(o.flags|=4)}else p=(d.nodeType===9?d:d.ownerDocument).createTextNode(p),p[js]=o,o.stateNode=p}return zn(o),null;case 13:if($t(Qt),p=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Kt&&Nr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Tw(),bl(),o.flags|=98560,T=!1;else if(T=rh(o),p!==null&&p.dehydrated!==null){if(i===null){if(!T)throw Error(t(318));if(T=o.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(t(317));T[js]=o}else bl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;zn(o),T=!1}else ns!==null&&(og(ns),ns=null),T=!0;if(!T)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=d,o):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(Qt.current&1)!==0?wn===0&&(wn=3):cg())),o.updateQueue!==null&&(o.flags|=4),zn(o),null);case 4:return Cl(),Qp(i,o),i===null&&Yc(o.stateNode.containerInfo),zn(o),null;case 10:return bp(o.type._context),zn(o),null;case 17:return ur(o.type)&&Jd(),zn(o),null;case 19:if($t(Qt),T=o.memoizedState,T===null)return zn(o),null;if(p=(o.flags&128)!==0,L=T.rendering,L===null)if(p)lu(T,!1);else{if(wn!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(L=ch(i),L!==null){for(o.flags|=128,lu(T,!1),p=L.updateQueue,p!==null&&(o.updateQueue=p,o.flags|=4),o.subtreeFlags=0,p=d,d=o.child;d!==null;)T=d,i=p,T.flags&=14680066,L=T.alternate,L===null?(T.childLanes=0,T.lanes=i,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=L.childLanes,T.lanes=L.lanes,T.child=L.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=L.memoizedProps,T.memoizedState=L.memoizedState,T.updateQueue=L.updateQueue,T.type=L.type,i=L.dependencies,T.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),d=d.sibling;return Dt(Qt,Qt.current&1|2),o.child}i=i.sibling}T.tail!==null&&kt()>Pl&&(o.flags|=128,p=!0,lu(T,!1),o.lanes=4194304)}else{if(!p)if(i=ch(L),i!==null){if(o.flags|=128,p=!0,d=i.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),lu(T,!0),T.tail===null&&T.tailMode==="hidden"&&!L.alternate&&!Kt)return zn(o),null}else 2*kt()-T.renderingStartTime>Pl&&d!==1073741824&&(o.flags|=128,p=!0,lu(T,!1),o.lanes=4194304);T.isBackwards?(L.sibling=o.child,o.child=L):(d=T.last,d!==null?d.sibling=L:o.child=L,T.last=L)}return T.tail!==null?(o=T.tail,T.rendering=o,T.tail=o.sibling,T.renderingStartTime=kt(),o.sibling=null,d=Qt.current,Dt(Qt,p?d&1|2:d&1),o):(zn(o),null);case 22:case 23:return lg(),p=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(o.flags|=8192),p&&(o.mode&1)!==0?(Tr&1073741824)!==0&&(zn(o),o.subtreeFlags&6&&(o.flags|=8192)):zn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function $A(i,o){switch(vp(o),o.tag){case 1:return ur(o.type)&&Jd(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Cl(),$t(cr),$t(Un),Ap(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Ip(o),null;case 13:if($t(Qt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));bl()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return $t(Qt),null;case 4:return Cl(),null;case 10:return bp(o.type._context),null;case 22:case 23:return lg(),null;case 24:return null;default:return null}}var yh=!1,Bn=!1,zA=typeof WeakSet=="function"?WeakSet:Set,ke=null;function jl(i,o){var d=i.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(p){en(i,o,p)}else d.current=null}function Yp(i,o,d){try{d()}catch(p){en(i,o,p)}}var S0=!1;function BA(i,o){if(lp=Hi,i=nw(),ep(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var p=d.getSelection&&d.getSelection();if(p&&p.rangeCount!==0){d=p.anchorNode;var w=p.anchorOffset,T=p.focusNode;p=p.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var L=0,W=-1,K=-1,ie=0,pe=0,ge=i,fe=null;t:for(;;){for(var Ae;ge!==d||w!==0&&ge.nodeType!==3||(W=L+w),ge!==T||p!==0&&ge.nodeType!==3||(K=L+p),ge.nodeType===3&&(L+=ge.nodeValue.length),(Ae=ge.firstChild)!==null;)fe=ge,ge=Ae;for(;;){if(ge===i)break t;if(fe===d&&++ie===w&&(W=L),fe===T&&++pe===p&&(K=L),(Ae=ge.nextSibling)!==null)break;ge=fe,fe=ge.parentNode}ge=Ae}d=W===-1||K===-1?null:{start:W,end:K}}else d=null}d=d||{start:0,end:0}}else d=null;for(cp={focusedElem:i,selectionRange:d},Hi=!1,ke=o;ke!==null;)if(o=ke,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,ke=i;else for(;ke!==null;){o=ke;try{var Le=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Le!==null){var Fe=Le.memoizedProps,rn=Le.memoizedState,ne=o.stateNode,G=ne.getSnapshotBeforeUpdate(o.elementType===o.type?Fe:rs(o.type,Fe),rn);ne.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var re=o.stateNode.containerInfo;re.nodeType===1?re.textContent="":re.nodeType===9&&re.documentElement&&re.removeChild(re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(xe){en(o,o.return,xe)}if(i=o.sibling,i!==null){i.return=o.return,ke=i;break}ke=o.return}return Le=S0,S0=!1,Le}function cu(i,o,d){var p=o.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var w=p=p.next;do{if((w.tag&i)===i){var T=w.destroy;w.destroy=void 0,T!==void 0&&Yp(o,d,T)}w=w.next}while(w!==p)}}function xh(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var d=o=o.next;do{if((d.tag&i)===i){var p=d.create;d.destroy=p()}d=d.next}while(d!==o)}}function Xp(i){var o=i.ref;if(o!==null){var d=i.stateNode;switch(i.tag){case 5:i=d;break;default:i=d}typeof o=="function"?o(i):o.current=i}}function N0(i){var o=i.alternate;o!==null&&(i.alternate=null,N0(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[js],delete o[Jc],delete o[fp],delete o[NA],delete o[TA])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function T0(i){return i.tag===5||i.tag===3||i.tag===4}function C0(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||T0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Jp(i,o,d){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?d.nodeType===8?d.parentNode.insertBefore(i,o):d.insertBefore(i,o):(d.nodeType===8?(o=d.parentNode,o.insertBefore(i,d)):(o=d,o.appendChild(i)),d=d._reactRootContainer,d!=null||o.onclick!==null||(o.onclick=Yd));else if(p!==4&&(i=i.child,i!==null))for(Jp(i,o,d),i=i.sibling;i!==null;)Jp(i,o,d),i=i.sibling}function Zp(i,o,d){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?d.insertBefore(i,o):d.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(Zp(i,o,d),i=i.sibling;i!==null;)Zp(i,o,d),i=i.sibling}var Rn=null,ss=!1;function to(i,o,d){for(d=d.child;d!==null;)I0(i,o,d),d=d.sibling}function I0(i,o,d){if(wr&&typeof wr.onCommitFiberUnmount=="function")try{wr.onCommitFiberUnmount(na,d)}catch{}switch(d.tag){case 5:Bn||jl(d,o);case 6:var p=Rn,w=ss;Rn=null,to(i,o,d),Rn=p,ss=w,Rn!==null&&(ss?(i=Rn,d=d.stateNode,i.nodeType===8?i.parentNode.removeChild(d):i.removeChild(d)):Rn.removeChild(d.stateNode));break;case 18:Rn!==null&&(ss?(i=Rn,d=d.stateNode,i.nodeType===8?hp(i.parentNode,d):i.nodeType===1&&hp(i,d),Zr(i)):hp(Rn,d.stateNode));break;case 4:p=Rn,w=ss,Rn=d.stateNode.containerInfo,ss=!0,to(i,o,d),Rn=p,ss=w;break;case 0:case 11:case 14:case 15:if(!Bn&&(p=d.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){w=p=p.next;do{var T=w,L=T.destroy;T=T.tag,L!==void 0&&((T&2)!==0||(T&4)!==0)&&Yp(d,o,L),w=w.next}while(w!==p)}to(i,o,d);break;case 1:if(!Bn&&(jl(d,o),p=d.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=d.memoizedProps,p.state=d.memoizedState,p.componentWillUnmount()}catch(W){en(d,o,W)}to(i,o,d);break;case 21:to(i,o,d);break;case 22:d.mode&1?(Bn=(p=Bn)||d.memoizedState!==null,to(i,o,d),Bn=p):to(i,o,d);break;default:to(i,o,d)}}function j0(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var d=i.stateNode;d===null&&(d=i.stateNode=new zA),o.forEach(function(p){var w=JA.bind(null,i,p);d.has(p)||(d.add(p),p.then(w,w))})}}function is(i,o){var d=o.deletions;if(d!==null)for(var p=0;p<d.length;p++){var w=d[p];try{var T=i,L=o,W=L;e:for(;W!==null;){switch(W.tag){case 5:Rn=W.stateNode,ss=!1;break e;case 3:Rn=W.stateNode.containerInfo,ss=!0;break e;case 4:Rn=W.stateNode.containerInfo,ss=!0;break e}W=W.return}if(Rn===null)throw Error(t(160));I0(T,L,w),Rn=null,ss=!1;var K=w.alternate;K!==null&&(K.return=null),w.return=null}catch(ie){en(w,o,ie)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)A0(o,i),o=o.sibling}function A0(i,o){var d=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(is(o,i),Rs(i),p&4){try{cu(3,i,i.return),xh(3,i)}catch(Fe){en(i,i.return,Fe)}try{cu(5,i,i.return)}catch(Fe){en(i,i.return,Fe)}}break;case 1:is(o,i),Rs(i),p&512&&d!==null&&jl(d,d.return);break;case 5:if(is(o,i),Rs(i),p&512&&d!==null&&jl(d,d.return),i.flags&32){var w=i.stateNode;try{xr(w,"")}catch(Fe){en(i,i.return,Fe)}}if(p&4&&(w=i.stateNode,w!=null)){var T=i.memoizedProps,L=d!==null?d.memoizedProps:T,W=i.type,K=i.updateQueue;if(i.updateQueue=null,K!==null)try{W==="input"&&T.type==="radio"&&T.name!=null&&Lt(w,T),_s(W,L);var ie=_s(W,T);for(L=0;L<K.length;L+=2){var pe=K[L],ge=K[L+1];pe==="style"?ni(w,ge):pe==="dangerouslySetInnerHTML"?gn(w,ge):pe==="children"?xr(w,ge):C(w,pe,ge,ie)}switch(W){case"input":Mt(w,T);break;case"textarea":bn(w,T);break;case"select":var fe=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!T.multiple;var Ae=T.value;Ae!=null?Xn(w,!!T.multiple,Ae,!1):fe!==!!T.multiple&&(T.defaultValue!=null?Xn(w,!!T.multiple,T.defaultValue,!0):Xn(w,!!T.multiple,T.multiple?[]:"",!1))}w[Jc]=T}catch(Fe){en(i,i.return,Fe)}}break;case 6:if(is(o,i),Rs(i),p&4){if(i.stateNode===null)throw Error(t(162));w=i.stateNode,T=i.memoizedProps;try{w.nodeValue=T}catch(Fe){en(i,i.return,Fe)}}break;case 3:if(is(o,i),Rs(i),p&4&&d!==null&&d.memoizedState.isDehydrated)try{Zr(o.containerInfo)}catch(Fe){en(i,i.return,Fe)}break;case 4:is(o,i),Rs(i);break;case 13:is(o,i),Rs(i),w=i.child,w.flags&8192&&(T=w.memoizedState!==null,w.stateNode.isHidden=T,!T||w.alternate!==null&&w.alternate.memoizedState!==null||(ng=kt())),p&4&&j0(i);break;case 22:if(pe=d!==null&&d.memoizedState!==null,i.mode&1?(Bn=(ie=Bn)||pe,is(o,i),Bn=ie):is(o,i),Rs(i),p&8192){if(ie=i.memoizedState!==null,(i.stateNode.isHidden=ie)&&!pe&&(i.mode&1)!==0)for(ke=i,pe=i.child;pe!==null;){for(ge=ke=pe;ke!==null;){switch(fe=ke,Ae=fe.child,fe.tag){case 0:case 11:case 14:case 15:cu(4,fe,fe.return);break;case 1:jl(fe,fe.return);var Le=fe.stateNode;if(typeof Le.componentWillUnmount=="function"){p=fe,d=fe.return;try{o=p,Le.props=o.memoizedProps,Le.state=o.memoizedState,Le.componentWillUnmount()}catch(Fe){en(p,d,Fe)}}break;case 5:jl(fe,fe.return);break;case 22:if(fe.memoizedState!==null){k0(ge);continue}}Ae!==null?(Ae.return=fe,ke=Ae):k0(ge)}pe=pe.sibling}e:for(pe=null,ge=i;;){if(ge.tag===5){if(pe===null){pe=ge;try{w=ge.stateNode,ie?(T=w.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(W=ge.stateNode,K=ge.memoizedProps.style,L=K!=null&&K.hasOwnProperty("display")?K.display:null,W.style.display=ws("display",L))}catch(Fe){en(i,i.return,Fe)}}}else if(ge.tag===6){if(pe===null)try{ge.stateNode.nodeValue=ie?"":ge.memoizedProps}catch(Fe){en(i,i.return,Fe)}}else if((ge.tag!==22&&ge.tag!==23||ge.memoizedState===null||ge===i)&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===i)break e;for(;ge.sibling===null;){if(ge.return===null||ge.return===i)break e;pe===ge&&(pe=null),ge=ge.return}pe===ge&&(pe=null),ge.sibling.return=ge.return,ge=ge.sibling}}break;case 19:is(o,i),Rs(i),p&4&&j0(i);break;case 21:break;default:is(o,i),Rs(i)}}function Rs(i){var o=i.flags;if(o&2){try{e:{for(var d=i.return;d!==null;){if(T0(d)){var p=d;break e}d=d.return}throw Error(t(160))}switch(p.tag){case 5:var w=p.stateNode;p.flags&32&&(xr(w,""),p.flags&=-33);var T=C0(i);Zp(i,T,w);break;case 3:case 4:var L=p.stateNode.containerInfo,W=C0(i);Jp(i,W,L);break;default:throw Error(t(161))}}catch(K){en(i,i.return,K)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function qA(i,o,d){ke=i,P0(i)}function P0(i,o,d){for(var p=(i.mode&1)!==0;ke!==null;){var w=ke,T=w.child;if(w.tag===22&&p){var L=w.memoizedState!==null||yh;if(!L){var W=w.alternate,K=W!==null&&W.memoizedState!==null||Bn;W=yh;var ie=Bn;if(yh=L,(Bn=K)&&!ie)for(ke=w;ke!==null;)L=ke,K=L.child,L.tag===22&&L.memoizedState!==null?D0(w):K!==null?(K.return=L,ke=K):D0(w);for(;T!==null;)ke=T,P0(T),T=T.sibling;ke=w,yh=W,Bn=ie}R0(i)}else(w.subtreeFlags&8772)!==0&&T!==null?(T.return=w,ke=T):R0(i)}}function R0(i){for(;ke!==null;){var o=ke;if((o.flags&8772)!==0){var d=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Bn||xh(5,o);break;case 1:var p=o.stateNode;if(o.flags&4&&!Bn)if(d===null)p.componentDidMount();else{var w=o.elementType===o.type?d.memoizedProps:rs(o.type,d.memoizedProps);p.componentDidUpdate(w,d.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var T=o.updateQueue;T!==null&&kw(o,T,p);break;case 3:var L=o.updateQueue;if(L!==null){if(d=null,o.child!==null)switch(o.child.tag){case 5:d=o.child.stateNode;break;case 1:d=o.child.stateNode}kw(o,L,d)}break;case 5:var W=o.stateNode;if(d===null&&o.flags&4){d=W;var K=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":K.autoFocus&&d.focus();break;case"img":K.src&&(d.src=K.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var ie=o.alternate;if(ie!==null){var pe=ie.memoizedState;if(pe!==null){var ge=pe.dehydrated;ge!==null&&Zr(ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Bn||o.flags&512&&Xp(o)}catch(fe){en(o,o.return,fe)}}if(o===i){ke=null;break}if(d=o.sibling,d!==null){d.return=o.return,ke=d;break}ke=o.return}}function k0(i){for(;ke!==null;){var o=ke;if(o===i){ke=null;break}var d=o.sibling;if(d!==null){d.return=o.return,ke=d;break}ke=o.return}}function D0(i){for(;ke!==null;){var o=ke;try{switch(o.tag){case 0:case 11:case 15:var d=o.return;try{xh(4,o)}catch(K){en(o,d,K)}break;case 1:var p=o.stateNode;if(typeof p.componentDidMount=="function"){var w=o.return;try{p.componentDidMount()}catch(K){en(o,w,K)}}var T=o.return;try{Xp(o)}catch(K){en(o,T,K)}break;case 5:var L=o.return;try{Xp(o)}catch(K){en(o,L,K)}}}catch(K){en(o,o.return,K)}if(o===i){ke=null;break}var W=o.sibling;if(W!==null){W.return=o.return,ke=W;break}ke=o.return}}var WA=Math.ceil,wh=O.ReactCurrentDispatcher,eg=O.ReactCurrentOwner,$r=O.ReactCurrentBatchConfig,xt=0,Tn=null,cn=null,kn=0,Tr=0,Al=Yi(0),wn=0,uu=null,ga=0,_h=0,tg=0,du=null,hr=null,ng=0,Pl=1/0,vi=null,Eh=!1,rg=null,no=null,bh=!1,ro=null,Sh=0,hu=0,sg=null,Nh=-1,Th=0;function nr(){return(xt&6)!==0?kt():Nh!==-1?Nh:Nh=kt()}function so(i){return(i.mode&1)===0?1:(xt&2)!==0&&kn!==0?kn&-kn:IA.transition!==null?(Th===0&&(Th=sa()),Th):(i=ft,i!==0||(i=window.event,i=i===void 0?16:Uc(i.type)),i)}function os(i,o,d,p){if(50<hu)throw hu=0,sg=null,Error(t(185));zi(i,d,p),((xt&2)===0||i!==Tn)&&(i===Tn&&((xt&2)===0&&(_h|=d),wn===4&&io(i,kn)),fr(i,p),d===1&&xt===0&&(o.mode&1)===0&&(Pl=kt()+500,eh&&Ji()))}function fr(i,o){var d=i.callbackNode;ii(i,o);var p=ra(i,i===Tn?kn:0);if(p===0)d!==null&&Oc(d),i.callbackNode=null,i.callbackPriority=0;else if(o=p&-p,i.callbackPriority!==o){if(d!=null&&Oc(d),o===1)i.tag===0?CA(L0.bind(null,i)):_w(L0.bind(null,i)),bA(function(){(xt&6)===0&&Ji()}),d=null;else{switch(qi(p)){case 1:d=ta;break;case 4:d=Vi;break;case 16:d=Dr;break;case 536870912:d=Td;break;default:d=Dr}d=q0(d,O0.bind(null,i))}i.callbackPriority=o,i.callbackNode=d}}function O0(i,o){if(Nh=-1,Th=0,(xt&6)!==0)throw Error(t(327));var d=i.callbackNode;if(Rl()&&i.callbackNode!==d)return null;var p=ra(i,i===Tn?kn:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||o)o=Ch(i,p);else{o=p;var w=xt;xt|=2;var T=F0();(Tn!==i||kn!==o)&&(vi=null,Pl=kt()+500,ya(i,o));do try{GA();break}catch(W){M0(i,W)}while(!0);Ep(),wh.current=T,xt=w,cn!==null?o=0:(Tn=null,kn=0,o=wn)}if(o!==0){if(o===2&&(w=_r(i),w!==0&&(p=w,o=ig(i,w))),o===1)throw d=uu,ya(i,0),io(i,p),fr(i,kt()),d;if(o===6)io(i,p);else{if(w=i.current.alternate,(p&30)===0&&!HA(w)&&(o=Ch(i,p),o===2&&(T=_r(i),T!==0&&(p=T,o=ig(i,T))),o===1))throw d=uu,ya(i,0),io(i,p),fr(i,kt()),d;switch(i.finishedWork=w,i.finishedLanes=p,o){case 0:case 1:throw Error(t(345));case 2:xa(i,hr,vi);break;case 3:if(io(i,p),(p&130023424)===p&&(o=ng+500-kt(),10<o)){if(ra(i,0)!==0)break;if(w=i.suspendedLanes,(w&p)!==p){nr(),i.pingedLanes|=i.suspendedLanes&w;break}i.timeoutHandle=dp(xa.bind(null,i,hr,vi),o);break}xa(i,hr,vi);break;case 4:if(io(i,p),(p&4194240)===p)break;for(o=i.eventTimes,w=-1;0<p;){var L=31-Zn(p);T=1<<L,L=o[L],L>w&&(w=L),p&=~T}if(p=w,p=kt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*WA(p/1960))-p,10<p){i.timeoutHandle=dp(xa.bind(null,i,hr,vi),p);break}xa(i,hr,vi);break;case 5:xa(i,hr,vi);break;default:throw Error(t(329))}}}return fr(i,kt()),i.callbackNode===d?O0.bind(null,i):null}function ig(i,o){var d=du;return i.current.memoizedState.isDehydrated&&(ya(i,o).flags|=256),i=Ch(i,o),i!==2&&(o=hr,hr=d,o!==null&&og(o)),i}function og(i){hr===null?hr=i:hr.push.apply(hr,i)}function HA(i){for(var o=i;;){if(o.flags&16384){var d=o.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var p=0;p<d.length;p++){var w=d[p],T=w.getSnapshot;w=w.value;try{if(!ts(T(),w))return!1}catch{return!1}}}if(d=o.child,o.subtreeFlags&16384&&d!==null)d.return=o,o=d;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function io(i,o){for(o&=~tg,o&=~_h,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var d=31-Zn(o),p=1<<d;i[d]=-1,o&=~p}}function L0(i){if((xt&6)!==0)throw Error(t(327));Rl();var o=ra(i,0);if((o&1)===0)return fr(i,kt()),null;var d=Ch(i,o);if(i.tag!==0&&d===2){var p=_r(i);p!==0&&(o=p,d=ig(i,p))}if(d===1)throw d=uu,ya(i,0),io(i,o),fr(i,kt()),d;if(d===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,xa(i,hr,vi),fr(i,kt()),null}function ag(i,o){var d=xt;xt|=1;try{return i(o)}finally{xt=d,xt===0&&(Pl=kt()+500,eh&&Ji())}}function va(i){ro!==null&&ro.tag===0&&(xt&6)===0&&Rl();var o=xt;xt|=1;var d=$r.transition,p=ft;try{if($r.transition=null,ft=1,i)return i()}finally{ft=p,$r.transition=d,xt=o,(xt&6)===0&&Ji()}}function lg(){Tr=Al.current,$t(Al)}function ya(i,o){i.finishedWork=null,i.finishedLanes=0;var d=i.timeoutHandle;if(d!==-1&&(i.timeoutHandle=-1,EA(d)),cn!==null)for(d=cn.return;d!==null;){var p=d;switch(vp(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Jd();break;case 3:Cl(),$t(cr),$t(Un),Ap();break;case 5:Ip(p);break;case 4:Cl();break;case 13:$t(Qt);break;case 19:$t(Qt);break;case 10:bp(p.type._context);break;case 22:case 23:lg()}d=d.return}if(Tn=i,cn=i=oo(i.current,null),kn=Tr=o,wn=0,uu=null,tg=_h=ga=0,hr=du=null,fa!==null){for(o=0;o<fa.length;o++)if(d=fa[o],p=d.interleaved,p!==null){d.interleaved=null;var w=p.next,T=d.pending;if(T!==null){var L=T.next;T.next=w,p.next=L}d.pending=p}fa=null}return i}function M0(i,o){do{var d=cn;try{if(Ep(),uh.current=mh,dh){for(var p=Yt.memoizedState;p!==null;){var w=p.queue;w!==null&&(w.pending=null),p=p.next}dh=!1}if(pa=0,Nn=xn=Yt=null,su=!1,iu=0,eg.current=null,d===null||d.return===null){wn=1,uu=o,cn=null;break}e:{var T=i,L=d.return,W=d,K=o;if(o=kn,W.flags|=32768,K!==null&&typeof K=="object"&&typeof K.then=="function"){var ie=K,pe=W,ge=pe.tag;if((pe.mode&1)===0&&(ge===0||ge===11||ge===15)){var fe=pe.alternate;fe?(pe.updateQueue=fe.updateQueue,pe.memoizedState=fe.memoizedState,pe.lanes=fe.lanes):(pe.updateQueue=null,pe.memoizedState=null)}var Ae=l0(L);if(Ae!==null){Ae.flags&=-257,c0(Ae,L,W,T,o),Ae.mode&1&&a0(T,ie,o),o=Ae,K=ie;var Le=o.updateQueue;if(Le===null){var Fe=new Set;Fe.add(K),o.updateQueue=Fe}else Le.add(K);break e}else{if((o&1)===0){a0(T,ie,o),cg();break e}K=Error(t(426))}}else if(Kt&&W.mode&1){var rn=l0(L);if(rn!==null){(rn.flags&65536)===0&&(rn.flags|=256),c0(rn,L,W,T,o),wp(Il(K,W));break e}}T=K=Il(K,W),wn!==4&&(wn=2),du===null?du=[T]:du.push(T),T=L;do{switch(T.tag){case 3:T.flags|=65536,o&=-o,T.lanes|=o;var ne=i0(T,K,o);Rw(T,ne);break e;case 1:W=K;var G=T.type,re=T.stateNode;if((T.flags&128)===0&&(typeof G.getDerivedStateFromError=="function"||re!==null&&typeof re.componentDidCatch=="function"&&(no===null||!no.has(re)))){T.flags|=65536,o&=-o,T.lanes|=o;var xe=o0(T,W,o);Rw(T,xe);break e}}T=T.return}while(T!==null)}U0(d)}catch(Ve){o=Ve,cn===d&&d!==null&&(cn=d=d.return);continue}break}while(!0)}function F0(){var i=wh.current;return wh.current=mh,i===null?mh:i}function cg(){(wn===0||wn===3||wn===2)&&(wn=4),Tn===null||(ga&268435455)===0&&(_h&268435455)===0||io(Tn,kn)}function Ch(i,o){var d=xt;xt|=2;var p=F0();(Tn!==i||kn!==o)&&(vi=null,ya(i,o));do try{KA();break}catch(w){M0(i,w)}while(!0);if(Ep(),xt=d,wh.current=p,cn!==null)throw Error(t(261));return Tn=null,kn=0,wn}function KA(){for(;cn!==null;)V0(cn)}function GA(){for(;cn!==null&&!Sd();)V0(cn)}function V0(i){var o=B0(i.alternate,i,Tr);i.memoizedProps=i.pendingProps,o===null?U0(i):cn=o,eg.current=null}function U0(i){var o=i;do{var d=o.alternate;if(i=o.return,(o.flags&32768)===0){if(d=UA(d,o,Tr),d!==null){cn=d;return}}else{if(d=$A(d,o),d!==null){d.flags&=32767,cn=d;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{wn=6,cn=null;return}}if(o=o.sibling,o!==null){cn=o;return}cn=o=i}while(o!==null);wn===0&&(wn=5)}function xa(i,o,d){var p=ft,w=$r.transition;try{$r.transition=null,ft=1,QA(i,o,d,p)}finally{$r.transition=w,ft=p}return null}function QA(i,o,d,p){do Rl();while(ro!==null);if((xt&6)!==0)throw Error(t(327));d=i.finishedWork;var w=i.finishedLanes;if(d===null)return null;if(i.finishedWork=null,i.finishedLanes=0,d===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var T=d.lanes|d.childLanes;if(Pt(i,T),i===Tn&&(cn=Tn=null,kn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||bh||(bh=!0,q0(Dr,function(){return Rl(),null})),T=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||T){T=$r.transition,$r.transition=null;var L=ft;ft=1;var W=xt;xt|=4,eg.current=null,BA(i,d),A0(d,i),pA(cp),Hi=!!lp,cp=lp=null,i.current=d,qA(d),Hm(),xt=W,ft=L,$r.transition=T}else i.current=d;if(bh&&(bh=!1,ro=i,Sh=w),T=i.pendingLanes,T===0&&(no=null),Cd(d.stateNode),fr(i,kt()),o!==null)for(p=i.onRecoverableError,d=0;d<o.length;d++)w=o[d],p(w.value,{componentStack:w.stack,digest:w.digest});if(Eh)throw Eh=!1,i=rg,rg=null,i;return(Sh&1)!==0&&i.tag!==0&&Rl(),T=i.pendingLanes,(T&1)!==0?i===sg?hu++:(hu=0,sg=i):hu=0,Ji(),null}function Rl(){if(ro!==null){var i=qi(Sh),o=$r.transition,d=ft;try{if($r.transition=null,ft=16>i?16:i,ro===null)var p=!1;else{if(i=ro,ro=null,Sh=0,(xt&6)!==0)throw Error(t(331));var w=xt;for(xt|=4,ke=i.current;ke!==null;){var T=ke,L=T.child;if((ke.flags&16)!==0){var W=T.deletions;if(W!==null){for(var K=0;K<W.length;K++){var ie=W[K];for(ke=ie;ke!==null;){var pe=ke;switch(pe.tag){case 0:case 11:case 15:cu(8,pe,T)}var ge=pe.child;if(ge!==null)ge.return=pe,ke=ge;else for(;ke!==null;){pe=ke;var fe=pe.sibling,Ae=pe.return;if(N0(pe),pe===ie){ke=null;break}if(fe!==null){fe.return=Ae,ke=fe;break}ke=Ae}}}var Le=T.alternate;if(Le!==null){var Fe=Le.child;if(Fe!==null){Le.child=null;do{var rn=Fe.sibling;Fe.sibling=null,Fe=rn}while(Fe!==null)}}ke=T}}if((T.subtreeFlags&2064)!==0&&L!==null)L.return=T,ke=L;else e:for(;ke!==null;){if(T=ke,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:cu(9,T,T.return)}var ne=T.sibling;if(ne!==null){ne.return=T.return,ke=ne;break e}ke=T.return}}var G=i.current;for(ke=G;ke!==null;){L=ke;var re=L.child;if((L.subtreeFlags&2064)!==0&&re!==null)re.return=L,ke=re;else e:for(L=G;ke!==null;){if(W=ke,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:xh(9,W)}}catch(Ve){en(W,W.return,Ve)}if(W===L){ke=null;break e}var xe=W.sibling;if(xe!==null){xe.return=W.return,ke=xe;break e}ke=W.return}}if(xt=w,Ji(),wr&&typeof wr.onPostCommitFiberRoot=="function")try{wr.onPostCommitFiberRoot(na,i)}catch{}p=!0}return p}finally{ft=d,$r.transition=o}}return!1}function $0(i,o,d){o=Il(d,o),o=i0(i,o,1),i=eo(i,o,1),o=nr(),i!==null&&(zi(i,1,o),fr(i,o))}function en(i,o,d){if(i.tag===3)$0(i,i,d);else for(;o!==null;){if(o.tag===3){$0(o,i,d);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(no===null||!no.has(p))){i=Il(d,i),i=o0(o,i,1),o=eo(o,i,1),i=nr(),o!==null&&(zi(o,1,i),fr(o,i));break}}o=o.return}}function YA(i,o,d){var p=i.pingCache;p!==null&&p.delete(o),o=nr(),i.pingedLanes|=i.suspendedLanes&d,Tn===i&&(kn&d)===d&&(wn===4||wn===3&&(kn&130023424)===kn&&500>kt()-ng?ya(i,0):tg|=d),fr(i,o)}function z0(i,o){o===0&&((i.mode&1)===0?o=1:(o=tl,tl<<=1,(tl&130023424)===0&&(tl=4194304)));var d=nr();i=mi(i,o),i!==null&&(zi(i,o,d),fr(i,d))}function XA(i){var o=i.memoizedState,d=0;o!==null&&(d=o.retryLane),z0(i,d)}function JA(i,o){var d=0;switch(i.tag){case 13:var p=i.stateNode,w=i.memoizedState;w!==null&&(d=w.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(o),z0(i,d)}var B0;B0=function(i,o,d){if(i!==null)if(i.memoizedProps!==o.pendingProps||cr.current)dr=!0;else{if((i.lanes&d)===0&&(o.flags&128)===0)return dr=!1,VA(i,o,d);dr=(i.flags&131072)!==0}else dr=!1,Kt&&(o.flags&1048576)!==0&&Ew(o,nh,o.index);switch(o.lanes=0,o.tag){case 2:var p=o.type;vh(i,o),i=o.pendingProps;var w=wl(o,Un.current);Tl(o,d),w=kp(null,o,p,i,w,d);var T=Dp();return o.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,ur(p)?(T=!0,Zd(o)):T=!1,o.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,Tp(o),w.updater=ph,o.stateNode=w,w._reactInternals=o,Up(o,p,i,d),o=qp(null,o,p,!0,T,d)):(o.tag=0,Kt&&T&&gp(o),tr(null,o,w,d),o=o.child),o;case 16:p=o.elementType;e:{switch(vh(i,o),i=o.pendingProps,w=p._init,p=w(p._payload),o.type=p,w=o.tag=eP(p),i=rs(p,i),w){case 0:o=Bp(null,o,p,i,d);break e;case 1:o=p0(null,o,p,i,d);break e;case 11:o=u0(null,o,p,i,d);break e;case 14:o=d0(null,o,p,rs(p.type,i),d);break e}throw Error(t(306,p,""))}return o;case 0:return p=o.type,w=o.pendingProps,w=o.elementType===p?w:rs(p,w),Bp(i,o,p,w,d);case 1:return p=o.type,w=o.pendingProps,w=o.elementType===p?w:rs(p,w),p0(i,o,p,w,d);case 3:e:{if(g0(o),i===null)throw Error(t(387));p=o.pendingProps,T=o.memoizedState,w=T.element,Pw(i,o),lh(o,p,null,d);var L=o.memoizedState;if(p=L.element,T.isDehydrated)if(T={element:p,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},o.updateQueue.baseState=T,o.memoizedState=T,o.flags&256){w=Il(Error(t(423)),o),o=v0(i,o,p,d,w);break e}else if(p!==w){w=Il(Error(t(424)),o),o=v0(i,o,p,d,w);break e}else for(Nr=Qi(o.stateNode.containerInfo.firstChild),Sr=o,Kt=!0,ns=null,d=jw(o,null,p,d),o.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(bl(),p===w){o=gi(i,o,d);break e}tr(i,o,p,d)}o=o.child}return o;case 5:return Dw(o),i===null&&xp(o),p=o.type,w=o.pendingProps,T=i!==null?i.memoizedProps:null,L=w.children,up(p,w)?L=null:T!==null&&up(p,T)&&(o.flags|=32),m0(i,o),tr(i,o,L,d),o.child;case 6:return i===null&&xp(o),null;case 13:return y0(i,o,d);case 4:return Cp(o,o.stateNode.containerInfo),p=o.pendingProps,i===null?o.child=Sl(o,null,p,d):tr(i,o,p,d),o.child;case 11:return p=o.type,w=o.pendingProps,w=o.elementType===p?w:rs(p,w),u0(i,o,p,w,d);case 7:return tr(i,o,o.pendingProps,d),o.child;case 8:return tr(i,o,o.pendingProps.children,d),o.child;case 12:return tr(i,o,o.pendingProps.children,d),o.child;case 10:e:{if(p=o.type._context,w=o.pendingProps,T=o.memoizedProps,L=w.value,Dt(ih,p._currentValue),p._currentValue=L,T!==null)if(ts(T.value,L)){if(T.children===w.children&&!cr.current){o=gi(i,o,d);break e}}else for(T=o.child,T!==null&&(T.return=o);T!==null;){var W=T.dependencies;if(W!==null){L=T.child;for(var K=W.firstContext;K!==null;){if(K.context===p){if(T.tag===1){K=pi(-1,d&-d),K.tag=2;var ie=T.updateQueue;if(ie!==null){ie=ie.shared;var pe=ie.pending;pe===null?K.next=K:(K.next=pe.next,pe.next=K),ie.pending=K}}T.lanes|=d,K=T.alternate,K!==null&&(K.lanes|=d),Sp(T.return,d,o),W.lanes|=d;break}K=K.next}}else if(T.tag===10)L=T.type===o.type?null:T.child;else if(T.tag===18){if(L=T.return,L===null)throw Error(t(341));L.lanes|=d,W=L.alternate,W!==null&&(W.lanes|=d),Sp(L,d,o),L=T.sibling}else L=T.child;if(L!==null)L.return=T;else for(L=T;L!==null;){if(L===o){L=null;break}if(T=L.sibling,T!==null){T.return=L.return,L=T;break}L=L.return}T=L}tr(i,o,w.children,d),o=o.child}return o;case 9:return w=o.type,p=o.pendingProps.children,Tl(o,d),w=Vr(w),p=p(w),o.flags|=1,tr(i,o,p,d),o.child;case 14:return p=o.type,w=rs(p,o.pendingProps),w=rs(p.type,w),d0(i,o,p,w,d);case 15:return h0(i,o,o.type,o.pendingProps,d);case 17:return p=o.type,w=o.pendingProps,w=o.elementType===p?w:rs(p,w),vh(i,o),o.tag=1,ur(p)?(i=!0,Zd(o)):i=!1,Tl(o,d),r0(o,p,w),Up(o,p,w,d),qp(null,o,p,!0,i,d);case 19:return w0(i,o,d);case 22:return f0(i,o,d)}throw Error(t(156,o.tag))};function q0(i,o){return Za(i,o)}function ZA(i,o,d,p){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(i,o,d,p){return new ZA(i,o,d,p)}function ug(i){return i=i.prototype,!(!i||!i.isReactComponent)}function eP(i){if(typeof i=="function")return ug(i)?1:0;if(i!=null){if(i=i.$$typeof,i===z)return 11;if(i===H)return 14}return 2}function oo(i,o){var d=i.alternate;return d===null?(d=zr(i.tag,o,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=o,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&14680064,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,o=i.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d}function Ih(i,o,d,p,w,T){var L=2;if(p=i,typeof i=="function")ug(i)&&(L=1);else if(typeof i=="string")L=5;else e:switch(i){case P:return wa(d.children,w,T,o);case R:L=8,w|=8;break;case D:return i=zr(12,d,o,w|2),i.elementType=D,i.lanes=T,i;case M:return i=zr(13,d,o,w),i.elementType=M,i.lanes=T,i;case oe:return i=zr(19,d,o,w),i.elementType=oe,i.lanes=T,i;case Y:return jh(d,w,T,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case k:L=10;break e;case $:L=9;break e;case z:L=11;break e;case H:L=14;break e;case J:L=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=zr(L,d,o,w),o.elementType=i,o.type=p,o.lanes=T,o}function wa(i,o,d,p){return i=zr(7,i,p,o),i.lanes=d,i}function jh(i,o,d,p){return i=zr(22,i,p,o),i.elementType=Y,i.lanes=d,i.stateNode={isHidden:!1},i}function dg(i,o,d){return i=zr(6,i,null,o),i.lanes=d,i}function hg(i,o,d){return o=zr(4,i.children!==null?i.children:[],i.key,o),o.lanes=d,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function tP(i,o,d,p,w){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$i(0),this.expirationTimes=$i(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$i(0),this.identifierPrefix=p,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function fg(i,o,d,p,w,T,L,W,K){return i=new tP(i,o,d,W,K),o===1?(o=1,T===!0&&(o|=8)):o=0,T=zr(3,null,null,o),i.current=T,T.stateNode=i,T.memoizedState={element:p,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tp(T),i}function nP(i,o,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:p==null?null:""+p,children:i,containerInfo:o,implementation:d}}function W0(i){if(!i)return Xi;i=i._reactInternals;e:{if(Gr(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(ur(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var d=i.type;if(ur(d))return xw(i,d,o)}return o}function H0(i,o,d,p,w,T,L,W,K){return i=fg(d,p,!0,i,w,T,L,W,K),i.context=W0(null),d=i.current,p=nr(),w=so(d),T=pi(p,w),T.callback=o??null,eo(d,T,w),i.current.lanes=w,zi(i,w,p),fr(i,p),i}function Ah(i,o,d,p){var w=o.current,T=nr(),L=so(w);return d=W0(d),o.context===null?o.context=d:o.pendingContext=d,o=pi(T,L),o.payload={element:i},p=p===void 0?null:p,p!==null&&(o.callback=p),i=eo(w,o,L),i!==null&&(os(i,w,L,T),ah(i,w,L)),L}function Ph(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function K0(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<o?d:o}}function mg(i,o){K0(i,o),(i=i.alternate)&&K0(i,o)}function rP(){return null}var G0=typeof reportError=="function"?reportError:function(i){console.error(i)};function pg(i){this._internalRoot=i}Rh.prototype.render=pg.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Ah(i,o,null,null)},Rh.prototype.unmount=pg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;va(function(){Ah(null,i,null,null)}),o[ui]=null}};function Rh(i){this._internalRoot=i}Rh.prototype.unstable_scheduleHydration=function(i){if(i){var o=Rd();i={blockedOn:null,target:i,priority:o};for(var d=0;d<Ns.length&&o!==0&&o<Ns[d].priority;d++);Ns.splice(d,0,i),d===0&&Od(i)}};function gg(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function kh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Q0(){}function sP(i,o,d,p,w){if(w){if(typeof p=="function"){var T=p;p=function(){var ie=Ph(L);T.call(ie)}}var L=H0(o,p,i,0,null,!1,!1,"",Q0);return i._reactRootContainer=L,i[ui]=L.current,Yc(i.nodeType===8?i.parentNode:i),va(),L}for(;w=i.lastChild;)i.removeChild(w);if(typeof p=="function"){var W=p;p=function(){var ie=Ph(K);W.call(ie)}}var K=fg(i,0,!1,null,null,!1,!1,"",Q0);return i._reactRootContainer=K,i[ui]=K.current,Yc(i.nodeType===8?i.parentNode:i),va(function(){Ah(o,K,d,p)}),K}function Dh(i,o,d,p,w){var T=d._reactRootContainer;if(T){var L=T;if(typeof w=="function"){var W=w;w=function(){var K=Ph(L);W.call(K)}}Ah(o,L,i,w)}else L=sP(d,o,i,w,p);return Ph(L)}Ad=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var d=Ui(o.pendingLanes);d!==0&&(Bi(o,d|1),fr(o,kt()),(xt&6)===0&&(Pl=kt()+500,Ji()))}break;case 13:va(function(){var p=mi(i,1);if(p!==null){var w=nr();os(p,i,1,w)}}),mg(i,1)}},nl=function(i){if(i.tag===13){var o=mi(i,134217728);if(o!==null){var d=nr();os(o,i,134217728,d)}mg(i,134217728)}},Pd=function(i){if(i.tag===13){var o=so(i),d=mi(i,o);if(d!==null){var p=nr();os(d,i,o,p)}mg(i,o)}},Rd=function(){return ft},kd=function(i,o){var d=ft;try{return ft=i,o()}finally{ft=d}},ht=function(i,o,d){switch(o){case"input":if(Mt(i,d),o=d.name,d.type==="radio"&&o!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<d.length;o++){var p=d[o];if(p!==i&&p.form===i.form){var w=Xd(p);if(!w)throw Error(t(90));Ke(p),Mt(p,w)}}}break;case"textarea":bn(i,d);break;case"select":o=d.value,o!=null&&Xn(i,!!d.multiple,o,!1)}},nt=ag,St=va;var iP={usingClientEntryPoint:!1,Events:[Zc,yl,Xd,Oe,bt,ag]},fu={findFiberByHostInstance:ca,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oP={bundleType:fu.bundleType,version:fu.version,rendererPackageName:fu.rendererPackageName,rendererConfig:fu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Dc(i),i===null?null:i.stateNode},findFiberByHostInstance:fu.findFiberByHostInstance||rP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oh.isDisabled&&Oh.supportsFiber)try{na=Oh.inject(oP),wr=Oh}catch{}}return mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iP,mr.createPortal=function(i,o){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gg(o))throw Error(t(200));return nP(i,o,null,d)},mr.createRoot=function(i,o){if(!gg(i))throw Error(t(299));var d=!1,p="",w=G0;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(w=o.onRecoverableError)),o=fg(i,1,!1,null,null,d,!1,p,w),i[ui]=o.current,Yc(i.nodeType===8?i.parentNode:i),new pg(o)},mr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Dc(o),i=i===null?null:i.stateNode,i},mr.flushSync=function(i){return va(i)},mr.hydrate=function(i,o,d){if(!kh(o))throw Error(t(200));return Dh(null,i,o,!0,d)},mr.hydrateRoot=function(i,o,d){if(!gg(i))throw Error(t(405));var p=d!=null&&d.hydratedSources||null,w=!1,T="",L=G0;if(d!=null&&(d.unstable_strictMode===!0&&(w=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onRecoverableError!==void 0&&(L=d.onRecoverableError)),o=H0(o,null,i,1,d??null,w,!1,T,L),i[ui]=o.current,Yc(i),p)for(i=0;i<p.length;i++)d=p[i],w=d._getVersion,w=w(d._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[d,w]:o.mutableSourceEagerHydrationData.push(d,w);return new Rh(o)},mr.render=function(i,o,d){if(!kh(o))throw Error(t(200));return Dh(null,i,o,!1,d)},mr.unmountComponentAtNode=function(i){if(!kh(i))throw Error(t(40));return i._reactRootContainer?(va(function(){Dh(null,null,i,!1,function(){i._reactRootContainer=null,i[ui]=null})}),!0):!1},mr.unstable_batchedUpdates=ag,mr.unstable_renderSubtreeIntoContainer=function(i,o,d,p){if(!kh(d))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Dh(i,o,d,!1,p)},mr.version="18.3.1-next-f1338f8080-20240426",mr}var l_;function a1(){if(l_)return Eg.exports;l_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Eg.exports=TP(),Eg.exports}var qa=a1();const em=i1(qa);function $e(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function CP(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function l1(...n){return e=>n.forEach(t=>CP(t,e))}function wt(...n){return _.useCallback(l1(...n),n)}function ki(n,e=[]){let t=[];function r(a,c){const u=_.createContext(c),h=t.length;t=[...t,c];function m(v){const{scope:y,children:b,...S}=v,E=(y==null?void 0:y[n][h])||u,x=_.useMemo(()=>S,Object.values(S));return l.jsx(E.Provider,{value:x,children:b})}function g(v,y){const b=(y==null?void 0:y[n][h])||u,S=_.useContext(b);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${a}\``)}return m.displayName=a+"Provider",[m,g]}const s=()=>{const a=t.map(c=>_.createContext(c));return function(u){const h=(u==null?void 0:u[n])||a;return _.useMemo(()=>({[`__scope${n}`]:{...u,[n]:h}}),[u,h])}};return s.scopeName=n,[r,IP(s,...e)]}function IP(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:m})=>{const v=h(a)[`__scope${m}`];return{...u,...v}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var Ra=_.forwardRef((n,e)=>{const{children:t,...r}=n,s=_.Children.toArray(t),a=s.find(jP);if(a){const c=a.props.children,u=s.map(h=>h===a?_.Children.count(c)>1?_.Children.only(null):_.isValidElement(c)?c.props.children:null:h);return l.jsx(ev,{...r,ref:e,children:_.isValidElement(c)?_.cloneElement(c,void 0,u):null})}return l.jsx(ev,{...r,ref:e,children:t})});Ra.displayName="Slot";var ev=_.forwardRef((n,e)=>{const{children:t,...r}=n;if(_.isValidElement(t)){const s=PP(t);return _.cloneElement(t,{...AP(r,t.props),ref:e?l1(e,s):s})}return _.Children.count(t)>1?_.Children.only(null):null});ev.displayName="SlotClone";var c1=({children:n})=>l.jsx(l.Fragment,{children:n});function jP(n){return _.isValidElement(n)&&n.type===c1}function AP(n,e){const t={...e};for(const r in e){const s=n[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?t[r]=(...u)=>{a(...u),s(...u)}:s&&(t[r]=s):r==="style"?t[r]={...s,...a}:r==="className"&&(t[r]=[s,a].filter(Boolean).join(" "))}return{...n,...t}}function PP(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function cy(n){const e=n+"CollectionProvider",[t,r]=ki(e),[s,a]=t(e,{collectionRef:{current:null},itemMap:new Map}),c=b=>{const{scope:S,children:E}=b,x=Ne.useRef(null),A=Ne.useRef(new Map).current;return l.jsx(s,{scope:S,itemMap:A,collectionRef:x,children:E})};c.displayName=e;const u=n+"CollectionSlot",h=Ne.forwardRef((b,S)=>{const{scope:E,children:x}=b,A=a(u,E),I=wt(S,A.collectionRef);return l.jsx(Ra,{ref:I,children:x})});h.displayName=u;const m=n+"CollectionItemSlot",g="data-radix-collection-item",v=Ne.forwardRef((b,S)=>{const{scope:E,children:x,...A}=b,I=Ne.useRef(null),C=wt(S,I),O=a(m,E);return Ne.useEffect(()=>(O.itemMap.set(I,{ref:I,...A}),()=>void O.itemMap.delete(I))),l.jsx(Ra,{[g]:"",ref:C,children:x})});v.displayName=m;function y(b){const S=a(n+"CollectionConsumer",b);return Ne.useCallback(()=>{const x=S.collectionRef.current;if(!x)return[];const A=Array.from(x.querySelectorAll(`[${g}]`));return Array.from(S.itemMap.values()).sort((O,V)=>A.indexOf(O.ref.current)-A.indexOf(V.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:c,Slot:h,ItemSlot:v},y,r]}var RP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],We=RP.reduce((n,e)=>{const t=_.forwardRef((r,s)=>{const{asChild:a,...c}=r,u=a?Ra:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(u,{...c,ref:s})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function tm(n,e){n&&qa.flushSync(()=>n.dispatchEvent(e))}function En(n){const e=_.useRef(n);return _.useEffect(()=>{e.current=n}),_.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function uy(n,e=globalThis==null?void 0:globalThis.document){const t=En(n);_.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var kP="DismissableLayer",tv="dismissableLayer.update",DP="dismissableLayer.pointerDownOutside",OP="dismissableLayer.focusOutside",c_,u1=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),d1=_.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=n,m=_.useContext(u1),[g,v]=_.useState(null),y=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=_.useState({}),S=wt(e,P=>v(P)),E=Array.from(m.layers),[x]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),A=E.indexOf(x),I=g?E.indexOf(g):-1,C=m.layersWithOutsidePointerEventsDisabled.size>0,O=I>=A,V=MP(P=>{const R=P.target,D=[...m.branches].some(k=>k.contains(R));!O||D||(s==null||s(P),c==null||c(P),P.defaultPrevented||u==null||u())},y),B=FP(P=>{const R=P.target;[...m.branches].some(k=>k.contains(R))||(a==null||a(P),c==null||c(P),P.defaultPrevented||u==null||u())},y);return uy(P=>{I===m.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},y),_.useEffect(()=>{if(g)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(c_=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(g)),m.layers.add(g),u_(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=c_)}},[g,y,t,m]),_.useEffect(()=>()=>{g&&(m.layers.delete(g),m.layersWithOutsidePointerEventsDisabled.delete(g),u_())},[g,m]),_.useEffect(()=>{const P=()=>b({});return document.addEventListener(tv,P),()=>document.removeEventListener(tv,P)},[]),l.jsx(We.div,{...h,ref:S,style:{pointerEvents:C?O?"auto":"none":void 0,...n.style},onFocusCapture:$e(n.onFocusCapture,B.onFocusCapture),onBlurCapture:$e(n.onBlurCapture,B.onBlurCapture),onPointerDownCapture:$e(n.onPointerDownCapture,V.onPointerDownCapture)})});d1.displayName=kP;var LP="DismissableLayerBranch",h1=_.forwardRef((n,e)=>{const t=_.useContext(u1),r=_.useRef(null),s=wt(e,r);return _.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),l.jsx(We.div,{...n,ref:s})});h1.displayName=LP;function MP(n,e=globalThis==null?void 0:globalThis.document){const t=En(n),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){f1(DP,t,m,{discrete:!0})};const m={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function FP(n,e=globalThis==null?void 0:globalThis.document){const t=En(n),r=_.useRef(!1);return _.useEffect(()=>{const s=a=>{a.target&&!r.current&&f1(OP,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function u_(){const n=new CustomEvent(tv);document.dispatchEvent(n)}function f1(n,e,t,{discrete:r}){const s=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?tm(s,a):s.dispatchEvent(a)}var VP=d1,UP=h1,Gt=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},$P="Portal",m1=_.forwardRef((n,e)=>{var u;const{container:t,...r}=n,[s,a]=_.useState(!1);Gt(()=>a(!0),[]);const c=t||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?em.createPortal(l.jsx(We.div,{...r,ref:e}),c):null});m1.displayName=$P;function zP(n,e){return _.useReducer((t,r)=>e[t][r]??t,n)}var dy=n=>{const{present:e,children:t}=n,r=BP(e),s=typeof t=="function"?t({present:r.isPresent}):_.Children.only(t),a=wt(r.ref,qP(s));return typeof t=="function"||r.isPresent?_.cloneElement(s,{ref:a}):null};dy.displayName="Presence";function BP(n){const[e,t]=_.useState(),r=_.useRef({}),s=_.useRef(n),a=_.useRef("none"),c=n?"mounted":"unmounted",[u,h]=zP(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const m=Mh(r.current);a.current=u==="mounted"?m:"none"},[u]),Gt(()=>{const m=r.current,g=s.current;if(g!==n){const y=a.current,b=Mh(m);n?h("MOUNT"):b==="none"||(m==null?void 0:m.display)==="none"?h("UNMOUNT"):h(g&&y!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,h]),Gt(()=>{if(e){const m=v=>{const b=Mh(r.current).includes(v.animationName);v.target===e&&b&&qa.flushSync(()=>h("ANIMATION_END"))},g=v=>{v.target===e&&(a.current=Mh(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:_.useCallback(m=>{m&&(r.current=getComputedStyle(m)),t(m)},[])}}function Mh(n){return(n==null?void 0:n.animationName)||"none"}function qP(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function ka({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,s]=WP({defaultProp:e,onChange:t}),a=n!==void 0,c=a?n:r,u=En(t),h=_.useCallback(m=>{if(a){const v=typeof m=="function"?m(n):m;v!==n&&u(v)}else s(m)},[a,n,s,u]);return[c,h]}function WP({defaultProp:n,onChange:e}){const t=_.useState(n),[r]=t,s=_.useRef(r),a=En(e);return _.useEffect(()=>{s.current!==r&&(a(r),s.current=r)},[r,s,a]),t}var HP="VisuallyHidden",rd=_.forwardRef((n,e)=>l.jsx(We.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));rd.displayName=HP;var KP=rd,hy="ToastProvider",[fy,GP,QP]=cy("Toast"),[p1,Cz]=ki("Toast",[QP]),[YP,nm]=p1(hy),g1=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:c}=n,[u,h]=_.useState(null),[m,g]=_.useState(0),v=_.useRef(!1),y=_.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${hy}\`. Expected non-empty \`string\`.`),l.jsx(fy.Provider,{scope:e,children:l.jsx(YP,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:m,viewport:u,onViewportChange:h,onToastAdd:_.useCallback(()=>g(b=>b+1),[]),onToastRemove:_.useCallback(()=>g(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:v,isClosePausedRef:y,children:c})})};g1.displayName=hy;var v1="ToastViewport",XP=["F8"],nv="toast.viewportPause",rv="toast.viewportResume",y1=_.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=XP,label:s="Notifications ({hotkey})",...a}=n,c=nm(v1,t),u=GP(t),h=_.useRef(null),m=_.useRef(null),g=_.useRef(null),v=_.useRef(null),y=wt(e,v,c.onViewportChange),b=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=c.toastCount>0;_.useEffect(()=>{const x=A=>{var C;r.every(O=>A[O]||A.code===O)&&((C=v.current)==null||C.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),_.useEffect(()=>{const x=h.current,A=v.current;if(S&&x&&A){const I=()=>{if(!c.isClosePausedRef.current){const B=new CustomEvent(nv);A.dispatchEvent(B),c.isClosePausedRef.current=!0}},C=()=>{if(c.isClosePausedRef.current){const B=new CustomEvent(rv);A.dispatchEvent(B),c.isClosePausedRef.current=!1}},O=B=>{!x.contains(B.relatedTarget)&&C()},V=()=>{x.contains(document.activeElement)||C()};return x.addEventListener("focusin",I),x.addEventListener("focusout",O),x.addEventListener("pointermove",I),x.addEventListener("pointerleave",V),window.addEventListener("blur",I),window.addEventListener("focus",C),()=>{x.removeEventListener("focusin",I),x.removeEventListener("focusout",O),x.removeEventListener("pointermove",I),x.removeEventListener("pointerleave",V),window.removeEventListener("blur",I),window.removeEventListener("focus",C)}}},[S,c.isClosePausedRef]);const E=_.useCallback(({tabbingDirection:x})=>{const I=u().map(C=>{const O=C.ref.current,V=[O,...uR(O)];return x==="forwards"?V:V.reverse()});return(x==="forwards"?I.reverse():I).flat()},[u]);return _.useEffect(()=>{const x=v.current;if(x){const A=I=>{var V,B,P;const C=I.altKey||I.ctrlKey||I.metaKey;if(I.key==="Tab"&&!C){const R=document.activeElement,D=I.shiftKey;if(I.target===x&&D){(V=m.current)==null||V.focus();return}const z=E({tabbingDirection:D?"backwards":"forwards"}),M=z.findIndex(oe=>oe===R);Ng(z.slice(M+1))?I.preventDefault():D?(B=m.current)==null||B.focus():(P=g.current)==null||P.focus()}};return x.addEventListener("keydown",A),()=>x.removeEventListener("keydown",A)}},[u,E]),l.jsxs(UP,{ref:h,role:"region","aria-label":s.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&l.jsx(sv,{ref:m,onFocusFromOutsideViewport:()=>{const x=E({tabbingDirection:"forwards"});Ng(x)}}),l.jsx(fy.Slot,{scope:t,children:l.jsx(We.ol,{tabIndex:-1,...a,ref:y})}),S&&l.jsx(sv,{ref:g,onFocusFromOutsideViewport:()=>{const x=E({tabbingDirection:"backwards"});Ng(x)}})]})});y1.displayName=v1;var x1="ToastFocusProxy",sv=_.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,a=nm(x1,t);return l.jsx(rd,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:c=>{var m;const u=c.relatedTarget;!((m=a.viewport)!=null&&m.contains(u))&&r()}})});sv.displayName=x1;var rm="Toast",JP="toast.swipeStart",ZP="toast.swipeMove",eR="toast.swipeCancel",tR="toast.swipeEnd",w1=_.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:a,...c}=n,[u=!0,h]=ka({prop:r,defaultProp:s,onChange:a});return l.jsx(dy,{present:t||u,children:l.jsx(sR,{open:u,...c,ref:e,onClose:()=>h(!1),onPause:En(n.onPause),onResume:En(n.onResume),onSwipeStart:$e(n.onSwipeStart,m=>{m.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:$e(n.onSwipeMove,m=>{const{x:g,y:v}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","move"),m.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${g}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:$e(n.onSwipeCancel,m=>{m.currentTarget.setAttribute("data-swipe","cancel"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:$e(n.onSwipeEnd,m=>{const{x:g,y:v}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","end"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${g}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),h(!1)})})})});w1.displayName=rm;var[nR,rR]=p1(rm,{onClose(){}}),sR=_.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:a,onClose:c,onEscapeKeyDown:u,onPause:h,onResume:m,onSwipeStart:g,onSwipeMove:v,onSwipeCancel:y,onSwipeEnd:b,...S}=n,E=nm(rm,t),[x,A]=_.useState(null),I=wt(e,oe=>A(oe)),C=_.useRef(null),O=_.useRef(null),V=s||E.duration,B=_.useRef(0),P=_.useRef(V),R=_.useRef(0),{onToastAdd:D,onToastRemove:k}=E,$=En(()=>{var H;(x==null?void 0:x.contains(document.activeElement))&&((H=E.viewport)==null||H.focus()),c()}),z=_.useCallback(oe=>{!oe||oe===1/0||(window.clearTimeout(R.current),B.current=new Date().getTime(),R.current=window.setTimeout($,oe))},[$]);_.useEffect(()=>{const oe=E.viewport;if(oe){const H=()=>{z(P.current),m==null||m()},J=()=>{const Y=new Date().getTime()-B.current;P.current=P.current-Y,window.clearTimeout(R.current),h==null||h()};return oe.addEventListener(nv,J),oe.addEventListener(rv,H),()=>{oe.removeEventListener(nv,J),oe.removeEventListener(rv,H)}}},[E.viewport,V,h,m,z]),_.useEffect(()=>{a&&!E.isClosePausedRef.current&&z(V)},[a,V,E.isClosePausedRef,z]),_.useEffect(()=>(D(),()=>k()),[D,k]);const M=_.useMemo(()=>x?C1(x):null,[x]);return E.viewport?l.jsxs(l.Fragment,{children:[M&&l.jsx(iR,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:M}),l.jsx(nR,{scope:t,onClose:$,children:qa.createPortal(l.jsx(fy.ItemSlot,{scope:t,children:l.jsx(VP,{asChild:!0,onEscapeKeyDown:$e(u,()=>{E.isFocusedToastEscapeKeyDownRef.current||$(),E.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(We.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":E.swipeDirection,...S,ref:I,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:$e(n.onKeyDown,oe=>{oe.key==="Escape"&&(u==null||u(oe.nativeEvent),oe.nativeEvent.defaultPrevented||(E.isFocusedToastEscapeKeyDownRef.current=!0,$()))}),onPointerDown:$e(n.onPointerDown,oe=>{oe.button===0&&(C.current={x:oe.clientX,y:oe.clientY})}),onPointerMove:$e(n.onPointerMove,oe=>{if(!C.current)return;const H=oe.clientX-C.current.x,J=oe.clientY-C.current.y,Y=!!O.current,q=["left","right"].includes(E.swipeDirection),Q=["left","up"].includes(E.swipeDirection)?Math.min:Math.max,Z=q?Q(0,H):0,U=q?0:Q(0,J),X=oe.pointerType==="touch"?10:2,le={x:Z,y:U},be={originalEvent:oe,delta:le};Y?(O.current=le,Fh(ZP,v,be,{discrete:!1})):d_(le,E.swipeDirection,X)?(O.current=le,Fh(JP,g,be,{discrete:!1}),oe.target.setPointerCapture(oe.pointerId)):(Math.abs(H)>X||Math.abs(J)>X)&&(C.current=null)}),onPointerUp:$e(n.onPointerUp,oe=>{const H=O.current,J=oe.target;if(J.hasPointerCapture(oe.pointerId)&&J.releasePointerCapture(oe.pointerId),O.current=null,C.current=null,H){const Y=oe.currentTarget,q={originalEvent:oe,delta:H};d_(H,E.swipeDirection,E.swipeThreshold)?Fh(tR,b,q,{discrete:!0}):Fh(eR,y,q,{discrete:!0}),Y.addEventListener("click",Q=>Q.preventDefault(),{once:!0})}})})})}),E.viewport)})]}):null}),iR=n=>{const{__scopeToast:e,children:t,...r}=n,s=nm(rm,e),[a,c]=_.useState(!1),[u,h]=_.useState(!1);return lR(()=>c(!0)),_.useEffect(()=>{const m=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(m)},[]),u?null:l.jsx(m1,{asChild:!0,children:l.jsx(rd,{...r,children:a&&l.jsxs(l.Fragment,{children:[s.label," ",t]})})})},oR="ToastTitle",_1=_.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return l.jsx(We.div,{...r,ref:e})});_1.displayName=oR;var aR="ToastDescription",E1=_.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return l.jsx(We.div,{...r,ref:e})});E1.displayName=aR;var b1="ToastAction",S1=_.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?l.jsx(T1,{altText:t,asChild:!0,children:l.jsx(my,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${b1}\`. Expected non-empty \`string\`.`),null)});S1.displayName=b1;var N1="ToastClose",my=_.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=rR(N1,t);return l.jsx(T1,{asChild:!0,children:l.jsx(We.button,{type:"button",...r,ref:e,onClick:$e(n.onClick,s.onClose)})})});my.displayName=N1;var T1=_.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return l.jsx(We.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function C1(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),cR(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const c=r.dataset.radixToastAnnounceAlt;c&&e.push(c)}else e.push(...C1(r))}}),e}function Fh(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,a=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?tm(s,a):s.dispatchEvent(a)}var d_=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),a=r>s;return e==="left"||e==="right"?a&&r>t:!a&&s>t};function lR(n=()=>{}){const e=En(n);Gt(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function cR(n){return n.nodeType===n.ELEMENT_NODE}function uR(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Ng(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var dR=g1,I1=y1,j1=w1,A1=_1,P1=E1,R1=S1,k1=my;function D1(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=D1(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function O1(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=D1(n))&&(r&&(r+=" "),r+=e);return r}const h_=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,f_=O1,sd=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return f_(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:a}=e,c=Object.keys(s).map(m=>{const g=t==null?void 0:t[m],v=a==null?void 0:a[m];if(g===null)return null;const y=h_(g)||h_(v);return s[m][y]}),u=t&&Object.entries(t).reduce((m,g)=>{let[v,y]=g;return y===void 0||(m[v]=y),m},{}),h=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((m,g)=>{let{class:v,className:y,...b}=g;return Object.entries(b).every(S=>{let[E,x]=S;return Array.isArray(x)?x.includes({...a,...u}[E]):{...a,...u}[E]===x})?[...m,v,y]:m},[]);return f_(n,c,h,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),L1=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=_.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:c,...u},h)=>_.createElement("svg",{ref:h,...fR,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:L1("lucide",s),...u},[...c.map(([m,g])=>_.createElement(m,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=(n,e)=>{const t=_.forwardRef(({className:r,...s},a)=>_.createElement(mR,{ref:a,iconNode:e,className:L1(`lucide-${hR(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=Je("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=Je("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=Je("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=Je("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=Je("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=Je("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=Je("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=Je("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=Je("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=Je("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=Je("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wf=Je("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=Je("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=Je("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=Je("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=Je("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=Je("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=Je("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=Je("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=Je("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=Je("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=Je("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=Je("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=Je("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=Je("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=Je("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=Je("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=Je("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=Je("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=Je("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=Je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=Je("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=Je("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=Je("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=Je("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=Je("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=Je("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=Je("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=Je("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=Je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=Je("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=Je("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=Je("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=Je("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=Je("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=Je("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=Je("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=Je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),gy="-",PR=n=>{const e=kR(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:c=>{const u=c.split(gy);return u[0]===""&&u.length!==1&&u.shift(),z1(u,e)||RR(c)},getConflictingClassGroupIds:(c,u)=>{const h=t[c]||[];return u&&r[c]?[...h,...r[c]]:h}}},z1=(n,e)=>{var c;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?z1(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const a=n.join(gy);return(c=e.validators.find(({validator:u})=>u(a)))==null?void 0:c.classGroupId},g_=/^\[(.+)\]$/,RR=n=>{if(g_.test(n)){const e=g_.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},kR=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return OR(Object.entries(n.classGroups),t).forEach(([a,c])=>{lv(c,r,a,e)}),r},lv=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const a=s===""?e:v_(e,s);a.classGroupId=t;return}if(typeof s=="function"){if(DR(s)){lv(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([a,c])=>{lv(c,v_(e,a),t,r)})})},v_=(n,e)=>{let t=n;return e.split(gy).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},DR=n=>n.isThemeGetter,OR=(n,e)=>e?n.map(([t,r])=>{const s=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([c,u])=>[e+c,u])):a);return[t,s]}):n,LR=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(a,c)=>{t.set(a,c),e++,e>n&&(e=0,r=t,t=new Map)};return{get(a){let c=t.get(a);if(c!==void 0)return c;if((c=r.get(a))!==void 0)return s(a,c),c},set(a,c){t.has(a)?t.set(a,c):s(a,c)}}},B1="!",MR=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],a=e.length,c=u=>{const h=[];let m=0,g=0,v;for(let x=0;x<u.length;x++){let A=u[x];if(m===0){if(A===s&&(r||u.slice(x,x+a)===e)){h.push(u.slice(g,x)),g=x+a;continue}if(A==="/"){v=x;continue}}A==="["?m++:A==="]"&&m--}const y=h.length===0?u:u.substring(g),b=y.startsWith(B1),S=b?y.substring(1):y,E=v&&v>g?v-g:void 0;return{modifiers:h,hasImportantModifier:b,baseClassName:S,maybePostfixModifierPosition:E}};return t?u=>t({className:u,parseClassName:c}):c},FR=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},VR=n=>({cache:LR(n.cacheSize),parseClassName:MR(n),...PR(n)}),UR=/\s+/,$R=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,a=[],c=n.trim().split(UR);let u="";for(let h=c.length-1;h>=0;h-=1){const m=c[h],{modifiers:g,hasImportantModifier:v,baseClassName:y,maybePostfixModifierPosition:b}=t(m);let S=!!b,E=r(S?y.substring(0,b):y);if(!E){if(!S){u=m+(u.length>0?" "+u:u);continue}if(E=r(y),!E){u=m+(u.length>0?" "+u:u);continue}S=!1}const x=FR(g).join(":"),A=v?x+B1:x,I=A+E;if(a.includes(I))continue;a.push(I);const C=s(E,S);for(let O=0;O<C.length;++O){const V=C[O];a.push(A+V)}u=m+(u.length>0?" "+u:u)}return u};function zR(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=q1(e))&&(r&&(r+=" "),r+=t);return r}const q1=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=q1(n[r]))&&(t&&(t+=" "),t+=e);return t};function BR(n,...e){let t,r,s,a=c;function c(h){const m=e.reduce((g,v)=>v(g),n());return t=VR(m),r=t.cache.get,s=t.cache.set,a=u,u(h)}function u(h){const m=r(h);if(m)return m;const g=$R(h,t);return s(h,g),g}return function(){return a(zR.apply(null,arguments))}}const zt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},W1=/^\[(?:([a-z-]+):)?(.+)\]$/i,qR=/^\d+\/\d+$/,WR=new Set(["px","full","screen"]),HR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,KR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,GR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,QR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,YR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,yi=n=>Bl(n)||WR.has(n)||qR.test(n),lo=n=>xc(n,"length",sk),Bl=n=>!!n&&!Number.isNaN(Number(n)),Tg=n=>xc(n,"number",Bl),pu=n=>!!n&&Number.isInteger(Number(n)),XR=n=>n.endsWith("%")&&Bl(n.slice(0,-1)),ot=n=>W1.test(n),co=n=>HR.test(n),JR=new Set(["length","size","percentage"]),ZR=n=>xc(n,JR,H1),ek=n=>xc(n,"position",H1),tk=new Set(["image","url"]),nk=n=>xc(n,tk,ok),rk=n=>xc(n,"",ik),gu=()=>!0,xc=(n,e,t)=>{const r=W1.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},sk=n=>KR.test(n)&&!GR.test(n),H1=()=>!1,ik=n=>QR.test(n),ok=n=>YR.test(n),ak=()=>{const n=zt("colors"),e=zt("spacing"),t=zt("blur"),r=zt("brightness"),s=zt("borderColor"),a=zt("borderRadius"),c=zt("borderSpacing"),u=zt("borderWidth"),h=zt("contrast"),m=zt("grayscale"),g=zt("hueRotate"),v=zt("invert"),y=zt("gap"),b=zt("gradientColorStops"),S=zt("gradientColorStopPositions"),E=zt("inset"),x=zt("margin"),A=zt("opacity"),I=zt("padding"),C=zt("saturate"),O=zt("scale"),V=zt("sepia"),B=zt("skew"),P=zt("space"),R=zt("translate"),D=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",ot,e],z=()=>[ot,e],M=()=>["",yi,lo],oe=()=>["auto",Bl,ot],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],J=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>["start","end","center","between","around","evenly","stretch"],Q=()=>["","0",ot],Z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[Bl,ot];return{cacheSize:500,separator:":",theme:{colors:[gu],spacing:[yi,lo],blur:["none","",co,ot],brightness:U(),borderColor:[n],borderRadius:["none","","full",co,ot],borderSpacing:z(),borderWidth:M(),contrast:U(),grayscale:Q(),hueRotate:U(),invert:Q(),gap:z(),gradientColorStops:[n],gradientColorStopPositions:[XR,lo],inset:$(),margin:$(),opacity:U(),padding:z(),saturate:U(),scale:U(),sepia:Q(),skew:U(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",ot]}],container:["container"],columns:[{columns:[co]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),ot]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[E]}],"inset-x":[{"inset-x":[E]}],"inset-y":[{"inset-y":[E]}],start:[{start:[E]}],end:[{end:[E]}],top:[{top:[E]}],right:[{right:[E]}],bottom:[{bottom:[E]}],left:[{left:[E]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",pu,ot]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ot]}],grow:[{grow:Q()}],shrink:[{shrink:Q()}],order:[{order:["first","last","none",pu,ot]}],"grid-cols":[{"grid-cols":[gu]}],"col-start-end":[{col:["auto",{span:["full",pu,ot]},ot]}],"col-start":[{"col-start":oe()}],"col-end":[{"col-end":oe()}],"grid-rows":[{"grid-rows":[gu]}],"row-start-end":[{row:["auto",{span:[pu,ot]},ot]}],"row-start":[{"row-start":oe()}],"row-end":[{"row-end":oe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ot]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ot]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",...q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[I]}],px:[{px:[I]}],py:[{py:[I]}],ps:[{ps:[I]}],pe:[{pe:[I]}],pt:[{pt:[I]}],pr:[{pr:[I]}],pb:[{pb:[I]}],pl:[{pl:[I]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ot,e]}],"min-w":[{"min-w":[ot,e,"min","max","fit"]}],"max-w":[{"max-w":[ot,e,"none","full","min","max","fit","prose",{screen:[co]},co]}],h:[{h:[ot,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ot,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ot,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ot,e,"auto","min","max","fit"]}],"font-size":[{text:["base",co,lo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Tg]}],"font-family":[{font:[gu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ot]}],"line-clamp":[{"line-clamp":["none",Bl,Tg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",yi,ot]}],"list-image":[{"list-image":["none",ot]}],"list-style-type":[{list:["none","disc","decimal",ot]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[A]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",yi,lo]}],"underline-offset":[{"underline-offset":["auto",yi,ot]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ot]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ot]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[A]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),ek]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ZR]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},nk]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[A]}],"border-style":[{border:[...J(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[A]}],"divide-style":[{divide:J()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...J()]}],"outline-offset":[{"outline-offset":[yi,ot]}],"outline-w":[{outline:[yi,lo]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[A]}],"ring-offset-w":[{"ring-offset":[yi,lo]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",co,rk]}],"shadow-color":[{shadow:[gu]}],opacity:[{opacity:[A]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",co,ot]}],grayscale:[{grayscale:[m]}],"hue-rotate":[{"hue-rotate":[g]}],invert:[{invert:[v]}],saturate:[{saturate:[C]}],sepia:[{sepia:[V]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[m]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[g]}],"backdrop-invert":[{"backdrop-invert":[v]}],"backdrop-opacity":[{"backdrop-opacity":[A]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[V]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ot]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",ot]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",ot]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[O]}],"scale-x":[{"scale-x":[O]}],"scale-y":[{"scale-y":[O]}],rotate:[{rotate:[pu,ot]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[B]}],"skew-y":[{"skew-y":[B]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ot]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ot]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ot]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[yi,lo,Tg]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},lk=BR(ak);function et(...n){return lk(O1(n))}function ck(n){if(!n||typeof n!="string")return null;const e=n.trim();try{const t=e.match(/https?:\/\/(?:drive\.google\.com)\/(?:file\/d\/([a-zA-Z0-9_-]+)\/view|open\?id=([a-zA-Z0-9_-]+))/i);if(t){const r=t[1]||t[2];if(r)return`https://drive.google.com/uc?export=view&id=${r}`}if(/dropbox\.com\//i.test(e)){if(e.includes("dl=0"))return e.replace("dl=0","dl=1");if(!e.includes("dl="))return e+"?dl=1"}return e}catch{return e}}const uk=dR,K1=_.forwardRef(({className:n,...e},t)=>l.jsx(I1,{ref:t,className:et("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));K1.displayName=I1.displayName;const dk=sd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),G1=_.forwardRef(({className:n,variant:e,...t},r)=>l.jsx(j1,{ref:r,className:et(dk({variant:e}),n),...t}));G1.displayName=j1.displayName;const hk=_.forwardRef(({className:n,...e},t)=>l.jsx(R1,{ref:t,className:et("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));hk.displayName=R1.displayName;const Q1=_.forwardRef(({className:n,...e},t)=>l.jsx(k1,{ref:t,className:et("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:l.jsx(ic,{className:"h-4 w-4"})}));Q1.displayName=k1.displayName;const Y1=_.forwardRef(({className:n,...e},t)=>l.jsx(A1,{ref:t,className:et("text-sm font-semibold",n),...e}));Y1.displayName=A1.displayName;const X1=_.forwardRef(({className:n,...e},t)=>l.jsx(P1,{ref:t,className:et("text-sm opacity-90",n),...e}));X1.displayName=P1.displayName;function fk(){const{toasts:n}=bP();return l.jsxs(uk,{children:[n.map(function({id:e,title:t,description:r,action:s,...a}){return l.jsxs(G1,{...a,children:[l.jsxs("div",{className:"grid gap-1",children:[t&&l.jsx(Y1,{children:t}),r&&l.jsx(X1,{children:r})]}),s,l.jsx(Q1,{})]},e)}),l.jsx(K1,{})]})}var Vh={},y_;function mk(){if(y_)return Vh;y_=1;var n=a1();return Vh.createRoot=n.createRoot,Vh.hydrateRoot=n.hydrateRoot,Vh}var pk=mk(),x_=["light","dark"],gk="(prefers-color-scheme: dark)",vk=_.createContext(void 0),yk={setTheme:n=>{},themes:[]},xk=()=>{var n;return(n=_.useContext(vk))!=null?n:yk};_.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:c,attrs:u,nonce:h})=>{let m=a==="system",g=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${u.map(S=>`'${S}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,v=s?x_.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",y=(S,E=!1,x=!0)=>{let A=c?c[S]:S,I=E?S+"|| ''":`'${A}'`,C="";return s&&x&&!E&&x_.includes(S)&&(C+=`d.style.colorScheme = '${S}';`),t==="class"?E||A?C+=`c.add(${I})`:C+="null":A&&(C+=`d[s](n,${I})`),C},b=n?`!function(){${g}${y(n)}}()`:r?`!function(){try{${g}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${m})){var t='${gk}',m=window.matchMedia(t);if(m.media!==t||m.matches){${y("dark")}}else{${y("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${y(c?"x[e]":"e",!0)}}${m?"":"else{"+y(a,!1,!1)+"}"}${v}}catch(e){}}()`:`!function(){try{${g}var e=localStorage.getItem('${e}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${y(c?"x[e]":"e",!0)}}else{${y(a,!1,!1)};}${v}}catch(t){}}();`;return _.createElement("script",{nonce:h,dangerouslySetInnerHTML:{__html:b}})});var wk=n=>{switch(n){case"success":return bk;case"info":return Nk;case"warning":return Sk;case"error":return Tk;default:return null}},_k=Array(12).fill(0),Ek=({visible:n})=>Ne.createElement("div",{className:"sonner-loading-wrapper","data-visible":n},Ne.createElement("div",{className:"sonner-spinner"},_k.map((e,t)=>Ne.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),bk=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Sk=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Nk=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Tk=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Ck=()=>{let[n,e]=Ne.useState(document.hidden);return Ne.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},cv=1,Ik=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...s}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:cv++,c=this.toasts.find(h=>h.id===a),u=e.dismissible===void 0?!0:e.dismissible;return c?this.toasts=this.toasts.map(h=>h.id===a?(this.publish({...h,...e,id:a,title:r}),{...h,...e,id:a,dismissible:u,title:r}):h):this.addToast({title:r,...s,dismissible:u,id:a}),a},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),a=r!==void 0;return s.then(async c=>{if(Ak(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,h=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:u,description:h})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:u,description:h})}}).catch(async c=>{if(t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:u,description:h})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),r},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||cv++;return this.create({jsx:e(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},Cr=new Ik,jk=(n,e)=>{let t=(e==null?void 0:e.id)||cv++;return Cr.addToast({title:n,...e,id:t}),t},Ak=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",Pk=jk,Rk=()=>Cr.toasts;Object.assign(Pk,{success:Cr.success,info:Cr.info,warning:Cr.warning,error:Cr.error,custom:Cr.custom,message:Cr.message,promise:Cr.promise,dismiss:Cr.dismiss,loading:Cr.loading},{getHistory:Rk});function kk(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}kk(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Uh(n){return n.label!==void 0}var Dk=3,Ok="32px",Lk=4e3,Mk=356,Fk=14,Vk=20,Uk=200;function $k(...n){return n.filter(Boolean).join(" ")}var zk=n=>{var e,t,r,s,a,c,u,h,m,g;let{invert:v,toast:y,unstyled:b,interacting:S,setHeights:E,visibleToasts:x,heights:A,index:I,toasts:C,expanded:O,removeToast:V,defaultRichColors:B,closeButton:P,style:R,cancelButtonStyle:D,actionButtonStyle:k,className:$="",descriptionClassName:z="",duration:M,position:oe,gap:H,loadingIcon:J,expandByDefault:Y,classNames:q,icons:Q,closeButtonAriaLabel:Z="Close toast",pauseWhenPageIsHidden:U,cn:X}=n,[le,be]=Ne.useState(!1),[ve,ce]=Ne.useState(!1),[me,Ee]=Ne.useState(!1),[De,Te]=Ne.useState(!1),[Me,Ke]=Ne.useState(0),[dt,Ct]=Ne.useState(0),on=Ne.useRef(null),Lt=Ne.useRef(null),Mt=I===0,vt=I+1<=x,yt=y.type,an=y.dismissible!==!1,Xn=y.className||"",ti=y.descriptionClassName||"",Jn=Ne.useMemo(()=>A.findIndex(He=>He.toastId===y.id)||0,[A,y.id]),bn=Ne.useMemo(()=>{var He;return(He=y.closeButton)!=null?He:P},[y.closeButton,P]),xs=Ne.useMemo(()=>y.duration||M||Lk,[y.duration,M]),Ft=Ne.useRef(0),Nt=Ne.useRef(0),Fn=Ne.useRef(0),gn=Ne.useRef(null),[xr,Hr]=oe.split("-"),kr=Ne.useMemo(()=>A.reduce((He,mt,ht)=>ht>=Jn?He:He+mt.height,0),[A,Jn]),ws=Ck(),ni=y.invert||v,Kr=yt==="loading";Nt.current=Ne.useMemo(()=>Jn*H+kr,[Jn,kr]),Ne.useEffect(()=>{be(!0)},[]),Ne.useLayoutEffect(()=>{if(!le)return;let He=Lt.current,mt=He.style.height;He.style.height="auto";let ht=He.getBoundingClientRect().height;He.style.height=mt,Ct(ht),E(Vt=>Vt.find(te=>te.toastId===y.id)?Vt.map(te=>te.toastId===y.id?{...te,height:ht}:te):[{toastId:y.id,height:ht,position:y.position},...Vt])},[le,y.title,y.description,E,y.id]);let Vn=Ne.useCallback(()=>{ce(!0),Ke(Nt.current),E(He=>He.filter(mt=>mt.toastId!==y.id)),setTimeout(()=>{V(y)},Uk)},[y,V,E,Nt]);Ne.useEffect(()=>{if(y.promise&&yt==="loading"||y.duration===1/0||y.type==="loading")return;let He,mt=xs;return O||S||U&&ws?(()=>{if(Fn.current<Ft.current){let ht=new Date().getTime()-Ft.current;mt=mt-ht}Fn.current=new Date().getTime()})():mt!==1/0&&(Ft.current=new Date().getTime(),He=setTimeout(()=>{var ht;(ht=y.onAutoClose)==null||ht.call(y,y),Vn()},mt)),()=>clearTimeout(He)},[O,S,Y,y,xs,Vn,y.promise,yt,U,ws]),Ne.useEffect(()=>{let He=Lt.current;if(He){let mt=He.getBoundingClientRect().height;return Ct(mt),E(ht=>[{toastId:y.id,height:mt,position:y.position},...ht]),()=>E(ht=>ht.filter(Vt=>Vt.toastId!==y.id))}},[E,y.id]),Ne.useEffect(()=>{y.delete&&Vn()},[Vn,y.delete]);function _s(){return Q!=null&&Q.loading?Ne.createElement("div",{className:"sonner-loader","data-visible":yt==="loading"},Q.loading):J?Ne.createElement("div",{className:"sonner-loader","data-visible":yt==="loading"},J):Ne.createElement(Ek,{visible:yt==="loading"})}return Ne.createElement("li",{"aria-live":y.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Lt,className:X($,Xn,q==null?void 0:q.toast,(e=y==null?void 0:y.classNames)==null?void 0:e.toast,q==null?void 0:q.default,q==null?void 0:q[yt],(t=y==null?void 0:y.classNames)==null?void 0:t[yt]),"data-sonner-toast":"","data-rich-colors":(r=y.richColors)!=null?r:B,"data-styled":!(y.jsx||y.unstyled||b),"data-mounted":le,"data-promise":!!y.promise,"data-removed":ve,"data-visible":vt,"data-y-position":xr,"data-x-position":Hr,"data-index":I,"data-front":Mt,"data-swiping":me,"data-dismissible":an,"data-type":yt,"data-invert":ni,"data-swipe-out":De,"data-expanded":!!(O||Y&&le),style:{"--index":I,"--toasts-before":I,"--z-index":C.length-I,"--offset":`${ve?Me:Nt.current}px`,"--initial-height":Y?"auto":`${dt}px`,...R,...y.style},onPointerDown:He=>{Kr||!an||(on.current=new Date,Ke(Nt.current),He.target.setPointerCapture(He.pointerId),He.target.tagName!=="BUTTON"&&(Ee(!0),gn.current={x:He.clientX,y:He.clientY}))},onPointerUp:()=>{var He,mt,ht,Vt;if(De||!an)return;gn.current=null;let te=Number(((He=Lt.current)==null?void 0:He.style.getPropertyValue("--swipe-amount").replace("px",""))||0),ye=new Date().getTime()-((mt=on.current)==null?void 0:mt.getTime()),Oe=Math.abs(te)/ye;if(Math.abs(te)>=Vk||Oe>.11){Ke(Nt.current),(ht=y.onDismiss)==null||ht.call(y,y),Vn(),Te(!0);return}(Vt=Lt.current)==null||Vt.style.setProperty("--swipe-amount","0px"),Ee(!1)},onPointerMove:He=>{var mt;if(!gn.current||!an)return;let ht=He.clientY-gn.current.y,Vt=He.clientX-gn.current.x,te=(xr==="top"?Math.min:Math.max)(0,ht),ye=He.pointerType==="touch"?10:2;Math.abs(te)>ye?(mt=Lt.current)==null||mt.style.setProperty("--swipe-amount",`${ht}px`):Math.abs(Vt)>ye&&(gn.current=null)}},bn&&!y.jsx?Ne.createElement("button",{"aria-label":Z,"data-disabled":Kr,"data-close-button":!0,onClick:Kr||!an?()=>{}:()=>{var He;Vn(),(He=y.onDismiss)==null||He.call(y,y)},className:X(q==null?void 0:q.closeButton,(s=y==null?void 0:y.classNames)==null?void 0:s.closeButton)},Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ne.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ne.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,y.jsx||Ne.isValidElement(y.title)?y.jsx||y.title:Ne.createElement(Ne.Fragment,null,yt||y.icon||y.promise?Ne.createElement("div",{"data-icon":"",className:X(q==null?void 0:q.icon,(a=y==null?void 0:y.classNames)==null?void 0:a.icon)},y.promise||y.type==="loading"&&!y.icon?y.icon||_s():null,y.type!=="loading"?y.icon||(Q==null?void 0:Q[yt])||wk(yt):null):null,Ne.createElement("div",{"data-content":"",className:X(q==null?void 0:q.content,(c=y==null?void 0:y.classNames)==null?void 0:c.content)},Ne.createElement("div",{"data-title":"",className:X(q==null?void 0:q.title,(u=y==null?void 0:y.classNames)==null?void 0:u.title)},y.title),y.description?Ne.createElement("div",{"data-description":"",className:X(z,ti,q==null?void 0:q.description,(h=y==null?void 0:y.classNames)==null?void 0:h.description)},y.description):null),Ne.isValidElement(y.cancel)?y.cancel:y.cancel&&Uh(y.cancel)?Ne.createElement("button",{"data-button":!0,"data-cancel":!0,style:y.cancelButtonStyle||D,onClick:He=>{var mt,ht;Uh(y.cancel)&&an&&((ht=(mt=y.cancel).onClick)==null||ht.call(mt,He),Vn())},className:X(q==null?void 0:q.cancelButton,(m=y==null?void 0:y.classNames)==null?void 0:m.cancelButton)},y.cancel.label):null,Ne.isValidElement(y.action)?y.action:y.action&&Uh(y.action)?Ne.createElement("button",{"data-button":!0,"data-action":!0,style:y.actionButtonStyle||k,onClick:He=>{var mt,ht;Uh(y.action)&&(He.defaultPrevented||((ht=(mt=y.action).onClick)==null||ht.call(mt,He),Vn()))},className:X(q==null?void 0:q.actionButton,(g=y==null?void 0:y.classNames)==null?void 0:g.actionButton)},y.action.label):null))};function w_(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}var Bk=n=>{let{invert:e,position:t="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:a,className:c,offset:u,theme:h="light",richColors:m,duration:g,style:v,visibleToasts:y=Dk,toastOptions:b,dir:S=w_(),gap:E=Fk,loadingIcon:x,icons:A,containerAriaLabel:I="Notifications",pauseWhenPageIsHidden:C,cn:O=$k}=n,[V,B]=Ne.useState([]),P=Ne.useMemo(()=>Array.from(new Set([t].concat(V.filter(U=>U.position).map(U=>U.position)))),[V,t]),[R,D]=Ne.useState([]),[k,$]=Ne.useState(!1),[z,M]=Ne.useState(!1),[oe,H]=Ne.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),J=Ne.useRef(null),Y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),q=Ne.useRef(null),Q=Ne.useRef(!1),Z=Ne.useCallback(U=>{var X;(X=V.find(le=>le.id===U.id))!=null&&X.delete||Cr.dismiss(U.id),B(le=>le.filter(({id:be})=>be!==U.id))},[V]);return Ne.useEffect(()=>Cr.subscribe(U=>{if(U.dismiss){B(X=>X.map(le=>le.id===U.id?{...le,delete:!0}:le));return}setTimeout(()=>{em.flushSync(()=>{B(X=>{let le=X.findIndex(be=>be.id===U.id);return le!==-1?[...X.slice(0,le),{...X[le],...U},...X.slice(le+1)]:[U,...X]})})})}),[]),Ne.useEffect(()=>{if(h!=="system"){H(h);return}h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?H("dark"):H("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:U})=>{H(U?"dark":"light")})},[h]),Ne.useEffect(()=>{V.length<=1&&$(!1)},[V]),Ne.useEffect(()=>{let U=X=>{var le,be;r.every(ve=>X[ve]||X.code===ve)&&($(!0),(le=J.current)==null||le.focus()),X.code==="Escape"&&(document.activeElement===J.current||(be=J.current)!=null&&be.contains(document.activeElement))&&$(!1)};return document.addEventListener("keydown",U),()=>document.removeEventListener("keydown",U)},[r]),Ne.useEffect(()=>{if(J.current)return()=>{q.current&&(q.current.focus({preventScroll:!0}),q.current=null,Q.current=!1)}},[J.current]),V.length?Ne.createElement("section",{"aria-label":`${I} ${Y}`,tabIndex:-1},P.map((U,X)=>{var le;let[be,ve]=U.split("-");return Ne.createElement("ol",{key:U,dir:S==="auto"?w_():S,tabIndex:-1,ref:J,className:c,"data-sonner-toaster":!0,"data-theme":oe,"data-y-position":be,"data-x-position":ve,style:{"--front-toast-height":`${((le=R[0])==null?void 0:le.height)||0}px`,"--offset":typeof u=="number"?`${u}px`:u||Ok,"--width":`${Mk}px`,"--gap":`${E}px`,...v},onBlur:ce=>{Q.current&&!ce.currentTarget.contains(ce.relatedTarget)&&(Q.current=!1,q.current&&(q.current.focus({preventScroll:!0}),q.current=null))},onFocus:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||Q.current||(Q.current=!0,q.current=ce.relatedTarget)},onMouseEnter:()=>$(!0),onMouseMove:()=>$(!0),onMouseLeave:()=>{z||$(!1)},onPointerDown:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},V.filter(ce=>!ce.position&&X===0||ce.position===U).map((ce,me)=>{var Ee,De;return Ne.createElement(zk,{key:ce.id,icons:A,index:me,toast:ce,defaultRichColors:m,duration:(Ee=b==null?void 0:b.duration)!=null?Ee:g,className:b==null?void 0:b.className,descriptionClassName:b==null?void 0:b.descriptionClassName,invert:e,visibleToasts:y,closeButton:(De=b==null?void 0:b.closeButton)!=null?De:a,interacting:z,position:U,style:b==null?void 0:b.style,unstyled:b==null?void 0:b.unstyled,classNames:b==null?void 0:b.classNames,cancelButtonStyle:b==null?void 0:b.cancelButtonStyle,actionButtonStyle:b==null?void 0:b.actionButtonStyle,removeToast:Z,toasts:V.filter(Te=>Te.position==ce.position),heights:R.filter(Te=>Te.position==ce.position),setHeights:D,expandByDefault:s,gap:E,loadingIcon:x,expanded:k,pauseWhenPageIsHidden:C,cn:O})}))})):null};const qk=({...n})=>{const{theme:e="system"}=xk();return l.jsx(Bk,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};function Wk(n,e=[]){let t=[];function r(a,c){const u=_.createContext(c),h=t.length;t=[...t,c];const m=v=>{var A;const{scope:y,children:b,...S}=v,E=((A=y==null?void 0:y[n])==null?void 0:A[h])||u,x=_.useMemo(()=>S,Object.values(S));return l.jsx(E.Provider,{value:x,children:b})};m.displayName=a+"Provider";function g(v,y){var E;const b=((E=y==null?void 0:y[n])==null?void 0:E[h])||u,S=_.useContext(b);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${a}\``)}return[m,g]}const s=()=>{const a=t.map(c=>_.createContext(c));return function(u){const h=(u==null?void 0:u[n])||a;return _.useMemo(()=>({[`__scope${n}`]:{...u,[n]:h}}),[u,h])}};return s.scopeName=n,[r,Hk(s,...e)]}function Hk(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:m})=>{const v=h(a)[`__scope${m}`];return{...u,...v}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var Kk="DismissableLayer",uv="dismissableLayer.update",Gk="dismissableLayer.pointerDownOutside",Qk="dismissableLayer.focusOutside",__,J1=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),vy=_.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=n,m=_.useContext(J1),[g,v]=_.useState(null),y=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=_.useState({}),S=wt(e,P=>v(P)),E=Array.from(m.layers),[x]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),A=E.indexOf(x),I=g?E.indexOf(g):-1,C=m.layersWithOutsidePointerEventsDisabled.size>0,O=I>=A,V=Jk(P=>{const R=P.target,D=[...m.branches].some(k=>k.contains(R));!O||D||(s==null||s(P),c==null||c(P),P.defaultPrevented||u==null||u())},y),B=Zk(P=>{const R=P.target;[...m.branches].some(k=>k.contains(R))||(a==null||a(P),c==null||c(P),P.defaultPrevented||u==null||u())},y);return uy(P=>{I===m.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},y),_.useEffect(()=>{if(g)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(__=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(g)),m.layers.add(g),E_(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=__)}},[g,y,t,m]),_.useEffect(()=>()=>{g&&(m.layers.delete(g),m.layersWithOutsidePointerEventsDisabled.delete(g),E_())},[g,m]),_.useEffect(()=>{const P=()=>b({});return document.addEventListener(uv,P),()=>document.removeEventListener(uv,P)},[]),l.jsx(We.div,{...h,ref:S,style:{pointerEvents:C?O?"auto":"none":void 0,...n.style},onFocusCapture:$e(n.onFocusCapture,B.onFocusCapture),onBlurCapture:$e(n.onBlurCapture,B.onBlurCapture),onPointerDownCapture:$e(n.onPointerDownCapture,V.onPointerDownCapture)})});vy.displayName=Kk;var Yk="DismissableLayerBranch",Xk=_.forwardRef((n,e)=>{const t=_.useContext(J1),r=_.useRef(null),s=wt(e,r);return _.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),l.jsx(We.div,{...n,ref:s})});Xk.displayName=Yk;function Jk(n,e=globalThis==null?void 0:globalThis.document){const t=En(n),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){Z1(Gk,t,m,{discrete:!0})};const m={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function Zk(n,e=globalThis==null?void 0:globalThis.document){const t=En(n),r=_.useRef(!1);return _.useEffect(()=>{const s=a=>{a.target&&!r.current&&Z1(Qk,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function E_(){const n=new CustomEvent(uv);document.dispatchEvent(n)}function Z1(n,e,t,{discrete:r}){const s=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?tm(s,a):s.dispatchEvent(a)}var e2=o1.useId||(()=>{}),t2=0;function To(n){const[e,t]=_.useState(e2());return Gt(()=>{t(r=>r??String(t2++))},[n]),e?`radix-${e}`:""}const n2=["top","right","bottom","left"],Lo=Math.min,Ir=Math.max,bf=Math.round,$h=Math.floor,Mo=n=>({x:n,y:n}),r2={left:"right",right:"left",bottom:"top",top:"bottom"},s2={start:"end",end:"start"};function dv(n,e,t){return Ir(n,Lo(e,t))}function Ti(n,e){return typeof n=="function"?n(e):n}function Ci(n){return n.split("-")[0]}function wc(n){return n.split("-")[1]}function yy(n){return n==="x"?"y":"x"}function xy(n){return n==="y"?"height":"width"}function Fo(n){return["top","bottom"].includes(Ci(n))?"y":"x"}function wy(n){return yy(Fo(n))}function i2(n,e,t){t===void 0&&(t=!1);const r=wc(n),s=wy(n),a=xy(s);let c=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(c=Sf(c)),[c,Sf(c)]}function o2(n){const e=Sf(n);return[hv(n),e,hv(e)]}function hv(n){return n.replace(/start|end/g,e=>s2[e])}function a2(n,e,t){const r=["left","right"],s=["right","left"],a=["top","bottom"],c=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:r:e?r:s;case"left":case"right":return e?a:c;default:return[]}}function l2(n,e,t,r){const s=wc(n);let a=a2(Ci(n),t==="start",r);return s&&(a=a.map(c=>c+"-"+s),e&&(a=a.concat(a.map(hv)))),a}function Sf(n){return n.replace(/left|right|bottom|top/g,e=>r2[e])}function c2(n){return{top:0,right:0,bottom:0,left:0,...n}}function eS(n){return typeof n!="number"?c2(n):{top:n,right:n,bottom:n,left:n}}function Nf(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function b_(n,e,t){let{reference:r,floating:s}=n;const a=Fo(e),c=wy(e),u=xy(c),h=Ci(e),m=a==="y",g=r.x+r.width/2-s.width/2,v=r.y+r.height/2-s.height/2,y=r[u]/2-s[u]/2;let b;switch(h){case"top":b={x:g,y:r.y-s.height};break;case"bottom":b={x:g,y:r.y+r.height};break;case"right":b={x:r.x+r.width,y:v};break;case"left":b={x:r.x-s.width,y:v};break;default:b={x:r.x,y:r.y}}switch(wc(e)){case"start":b[c]-=y*(t&&m?-1:1);break;case"end":b[c]+=y*(t&&m?-1:1);break}return b}const u2=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:c}=t,u=a.filter(Boolean),h=await(c.isRTL==null?void 0:c.isRTL(e));let m=await c.getElementRects({reference:n,floating:e,strategy:s}),{x:g,y:v}=b_(m,r,h),y=r,b={},S=0;for(let E=0;E<u.length;E++){const{name:x,fn:A}=u[E],{x:I,y:C,data:O,reset:V}=await A({x:g,y:v,initialPlacement:r,placement:y,strategy:s,middlewareData:b,rects:m,platform:c,elements:{reference:n,floating:e}});g=I??g,v=C??v,b={...b,[x]:{...b[x],...O}},V&&S<=50&&(S++,typeof V=="object"&&(V.placement&&(y=V.placement),V.rects&&(m=V.rects===!0?await c.getElementRects({reference:n,floating:e,strategy:s}):V.rects),{x:g,y:v}=b_(m,y,h)),E=-1)}return{x:g,y:v,placement:y,strategy:s,middlewareData:b}};async function Fu(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:a,rects:c,elements:u,strategy:h}=n,{boundary:m="clippingAncestors",rootBoundary:g="viewport",elementContext:v="floating",altBoundary:y=!1,padding:b=0}=Ti(e,n),S=eS(b),x=u[y?v==="floating"?"reference":"floating":v],A=Nf(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(x)))==null||t?x:x.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(u.floating)),boundary:m,rootBoundary:g,strategy:h})),I=v==="floating"?{x:r,y:s,width:c.floating.width,height:c.floating.height}:c.reference,C=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u.floating)),O=await(a.isElement==null?void 0:a.isElement(C))?await(a.getScale==null?void 0:a.getScale(C))||{x:1,y:1}:{x:1,y:1},V=Nf(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:I,offsetParent:C,strategy:h}):I);return{top:(A.top-V.top+S.top)/O.y,bottom:(V.bottom-A.bottom+S.bottom)/O.y,left:(A.left-V.left+S.left)/O.x,right:(V.right-A.right+S.right)/O.x}}const d2=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:a,platform:c,elements:u,middlewareData:h}=e,{element:m,padding:g=0}=Ti(n,e)||{};if(m==null)return{};const v=eS(g),y={x:t,y:r},b=wy(s),S=xy(b),E=await c.getDimensions(m),x=b==="y",A=x?"top":"left",I=x?"bottom":"right",C=x?"clientHeight":"clientWidth",O=a.reference[S]+a.reference[b]-y[b]-a.floating[S],V=y[b]-a.reference[b],B=await(c.getOffsetParent==null?void 0:c.getOffsetParent(m));let P=B?B[C]:0;(!P||!await(c.isElement==null?void 0:c.isElement(B)))&&(P=u.floating[C]||a.floating[S]);const R=O/2-V/2,D=P/2-E[S]/2-1,k=Lo(v[A],D),$=Lo(v[I],D),z=k,M=P-E[S]-$,oe=P/2-E[S]/2+R,H=dv(z,oe,M),J=!h.arrow&&wc(s)!=null&&oe!==H&&a.reference[S]/2-(oe<z?k:$)-E[S]/2<0,Y=J?oe<z?oe-z:oe-M:0;return{[b]:y[b]+Y,data:{[b]:H,centerOffset:oe-H-Y,...J&&{alignmentOffset:Y}},reset:J}}}),h2=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:a,rects:c,initialPlacement:u,platform:h,elements:m}=e,{mainAxis:g=!0,crossAxis:v=!0,fallbackPlacements:y,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:E=!0,...x}=Ti(n,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const A=Ci(s),I=Fo(u),C=Ci(u)===u,O=await(h.isRTL==null?void 0:h.isRTL(m.floating)),V=y||(C||!E?[Sf(u)]:o2(u)),B=S!=="none";!y&&B&&V.push(...l2(u,E,S,O));const P=[u,...V],R=await Fu(e,x),D=[];let k=((r=a.flip)==null?void 0:r.overflows)||[];if(g&&D.push(R[A]),v){const oe=i2(s,c,O);D.push(R[oe[0]],R[oe[1]])}if(k=[...k,{placement:s,overflows:D}],!D.every(oe=>oe<=0)){var $,z;const oe=((($=a.flip)==null?void 0:$.index)||0)+1,H=P[oe];if(H)return{data:{index:oe,overflows:k},reset:{placement:H}};let J=(z=k.filter(Y=>Y.overflows[0]<=0).sort((Y,q)=>Y.overflows[1]-q.overflows[1])[0])==null?void 0:z.placement;if(!J)switch(b){case"bestFit":{var M;const Y=(M=k.filter(q=>{if(B){const Q=Fo(q.placement);return Q===I||Q==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(Q=>Q>0).reduce((Q,Z)=>Q+Z,0)]).sort((q,Q)=>q[1]-Q[1])[0])==null?void 0:M[0];Y&&(J=Y);break}case"initialPlacement":J=u;break}if(s!==J)return{reset:{placement:J}}}return{}}}};function S_(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function N_(n){return n2.some(e=>n[e]>=0)}const f2=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=Ti(n,e);switch(r){case"referenceHidden":{const a=await Fu(e,{...s,elementContext:"reference"}),c=S_(a,t.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:N_(c)}}}case"escaped":{const a=await Fu(e,{...s,altBoundary:!0}),c=S_(a,t.floating);return{data:{escapedOffsets:c,escaped:N_(c)}}}default:return{}}}}};async function m2(n,e){const{placement:t,platform:r,elements:s}=n,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),c=Ci(t),u=wc(t),h=Fo(t)==="y",m=["left","top"].includes(c)?-1:1,g=a&&h?-1:1,v=Ti(e,n);let{mainAxis:y,crossAxis:b,alignmentAxis:S}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return u&&typeof S=="number"&&(b=u==="end"?S*-1:S),h?{x:b*g,y:y*m}:{x:y*m,y:b*g}}const p2=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:a,placement:c,middlewareData:u}=e,h=await m2(e,n);return c===((t=u.offset)==null?void 0:t.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+h.x,y:a+h.y,data:{...h,placement:c}}}}},g2=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:a=!0,crossAxis:c=!1,limiter:u={fn:x=>{let{x:A,y:I}=x;return{x:A,y:I}}},...h}=Ti(n,e),m={x:t,y:r},g=await Fu(e,h),v=Fo(Ci(s)),y=yy(v);let b=m[y],S=m[v];if(a){const x=y==="y"?"top":"left",A=y==="y"?"bottom":"right",I=b+g[x],C=b-g[A];b=dv(I,b,C)}if(c){const x=v==="y"?"top":"left",A=v==="y"?"bottom":"right",I=S+g[x],C=S-g[A];S=dv(I,S,C)}const E=u.fn({...e,[y]:b,[v]:S});return{...E,data:{x:E.x-t,y:E.y-r,enabled:{[y]:a,[v]:c}}}}}},v2=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:a,middlewareData:c}=e,{offset:u=0,mainAxis:h=!0,crossAxis:m=!0}=Ti(n,e),g={x:t,y:r},v=Fo(s),y=yy(v);let b=g[y],S=g[v];const E=Ti(u,e),x=typeof E=="number"?{mainAxis:E,crossAxis:0}:{mainAxis:0,crossAxis:0,...E};if(h){const C=y==="y"?"height":"width",O=a.reference[y]-a.floating[C]+x.mainAxis,V=a.reference[y]+a.reference[C]-x.mainAxis;b<O?b=O:b>V&&(b=V)}if(m){var A,I;const C=y==="y"?"width":"height",O=["top","left"].includes(Ci(s)),V=a.reference[v]-a.floating[C]+(O&&((A=c.offset)==null?void 0:A[v])||0)+(O?0:x.crossAxis),B=a.reference[v]+a.reference[C]+(O?0:((I=c.offset)==null?void 0:I[v])||0)-(O?x.crossAxis:0);S<V?S=V:S>B&&(S=B)}return{[y]:b,[v]:S}}}},y2=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:a,platform:c,elements:u}=e,{apply:h=()=>{},...m}=Ti(n,e),g=await Fu(e,m),v=Ci(s),y=wc(s),b=Fo(s)==="y",{width:S,height:E}=a.floating;let x,A;v==="top"||v==="bottom"?(x=v,A=y===(await(c.isRTL==null?void 0:c.isRTL(u.floating))?"start":"end")?"left":"right"):(A=v,x=y==="end"?"top":"bottom");const I=E-g.top-g.bottom,C=S-g.left-g.right,O=Lo(E-g[x],I),V=Lo(S-g[A],C),B=!e.middlewareData.shift;let P=O,R=V;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(R=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=I),B&&!y){const k=Ir(g.left,0),$=Ir(g.right,0),z=Ir(g.top,0),M=Ir(g.bottom,0);b?R=S-2*(k!==0||$!==0?k+$:Ir(g.left,g.right)):P=E-2*(z!==0||M!==0?z+M:Ir(g.top,g.bottom))}await h({...e,availableWidth:R,availableHeight:P});const D=await c.getDimensions(u.floating);return S!==D.width||E!==D.height?{reset:{rects:!0}}:{}}}};function sm(){return typeof window<"u"}function _c(n){return tS(n)?(n.nodeName||"").toLowerCase():"#document"}function Pr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Xs(n){var e;return(e=(tS(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function tS(n){return sm()?n instanceof Node||n instanceof Pr(n).Node:!1}function ms(n){return sm()?n instanceof Element||n instanceof Pr(n).Element:!1}function Ks(n){return sm()?n instanceof HTMLElement||n instanceof Pr(n).HTMLElement:!1}function T_(n){return!sm()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Pr(n).ShadowRoot}function od(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=ps(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(s)}function x2(n){return["table","td","th"].includes(_c(n))}function im(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function _y(n){const e=Ey(),t=ms(n)?ps(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function w2(n){let e=Vo(n);for(;Ks(e)&&!oc(e);){if(_y(e))return e;if(im(e))return null;e=Vo(e)}return null}function Ey(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function oc(n){return["html","body","#document"].includes(_c(n))}function ps(n){return Pr(n).getComputedStyle(n)}function om(n){return ms(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Vo(n){if(_c(n)==="html")return n;const e=n.assignedSlot||n.parentNode||T_(n)&&n.host||Xs(n);return T_(e)?e.host:e}function nS(n){const e=Vo(n);return oc(e)?n.ownerDocument?n.ownerDocument.body:n.body:Ks(e)&&od(e)?e:nS(e)}function Vu(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=nS(n),a=s===((r=n.ownerDocument)==null?void 0:r.body),c=Pr(s);if(a){const u=fv(c);return e.concat(c,c.visualViewport||[],od(s)?s:[],u&&t?Vu(u):[])}return e.concat(s,Vu(s,[],t))}function fv(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function rS(n){const e=ps(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ks(n),a=s?n.offsetWidth:t,c=s?n.offsetHeight:r,u=bf(t)!==a||bf(r)!==c;return u&&(t=a,r=c),{width:t,height:r,$:u}}function by(n){return ms(n)?n:n.contextElement}function ql(n){const e=by(n);if(!Ks(e))return Mo(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:a}=rS(e);let c=(a?bf(t.width):t.width)/r,u=(a?bf(t.height):t.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const _2=Mo(0);function sS(n){const e=Pr(n);return!Ey()||!e.visualViewport?_2:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function E2(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Pr(n)?!1:e}function Da(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),a=by(n);let c=Mo(1);e&&(r?ms(r)&&(c=ql(r)):c=ql(n));const u=E2(a,t,r)?sS(a):Mo(0);let h=(s.left+u.x)/c.x,m=(s.top+u.y)/c.y,g=s.width/c.x,v=s.height/c.y;if(a){const y=Pr(a),b=r&&ms(r)?Pr(r):r;let S=y,E=fv(S);for(;E&&r&&b!==S;){const x=ql(E),A=E.getBoundingClientRect(),I=ps(E),C=A.left+(E.clientLeft+parseFloat(I.paddingLeft))*x.x,O=A.top+(E.clientTop+parseFloat(I.paddingTop))*x.y;h*=x.x,m*=x.y,g*=x.x,v*=x.y,h+=C,m+=O,S=Pr(E),E=fv(S)}}return Nf({width:g,height:v,x:h,y:m})}function b2(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const a=s==="fixed",c=Xs(r),u=e?im(e.floating):!1;if(r===c||u&&a)return t;let h={scrollLeft:0,scrollTop:0},m=Mo(1);const g=Mo(0),v=Ks(r);if((v||!v&&!a)&&((_c(r)!=="body"||od(c))&&(h=om(r)),Ks(r))){const y=Da(r);m=ql(r),g.x=y.x+r.clientLeft,g.y=y.y+r.clientTop}return{width:t.width*m.x,height:t.height*m.y,x:t.x*m.x-h.scrollLeft*m.x+g.x,y:t.y*m.y-h.scrollTop*m.y+g.y}}function S2(n){return Array.from(n.getClientRects())}function mv(n,e){const t=om(n).scrollLeft;return e?e.left+t:Da(Xs(n)).left+t}function N2(n){const e=Xs(n),t=om(n),r=n.ownerDocument.body,s=Ir(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Ir(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-t.scrollLeft+mv(n);const u=-t.scrollTop;return ps(r).direction==="rtl"&&(c+=Ir(e.clientWidth,r.clientWidth)-s),{width:s,height:a,x:c,y:u}}function T2(n,e){const t=Pr(n),r=Xs(n),s=t.visualViewport;let a=r.clientWidth,c=r.clientHeight,u=0,h=0;if(s){a=s.width,c=s.height;const m=Ey();(!m||m&&e==="fixed")&&(u=s.offsetLeft,h=s.offsetTop)}return{width:a,height:c,x:u,y:h}}function C2(n,e){const t=Da(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,a=Ks(n)?ql(n):Mo(1),c=n.clientWidth*a.x,u=n.clientHeight*a.y,h=s*a.x,m=r*a.y;return{width:c,height:u,x:h,y:m}}function C_(n,e,t){let r;if(e==="viewport")r=T2(n,t);else if(e==="document")r=N2(Xs(n));else if(ms(e))r=C2(e,t);else{const s=sS(n);r={...e,x:e.x-s.x,y:e.y-s.y}}return Nf(r)}function iS(n,e){const t=Vo(n);return t===e||!ms(t)||oc(t)?!1:ps(t).position==="fixed"||iS(t,e)}function I2(n,e){const t=e.get(n);if(t)return t;let r=Vu(n,[],!1).filter(u=>ms(u)&&_c(u)!=="body"),s=null;const a=ps(n).position==="fixed";let c=a?Vo(n):n;for(;ms(c)&&!oc(c);){const u=ps(c),h=_y(c);!h&&u.position==="fixed"&&(s=null),(a?!h&&!s:!h&&u.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||od(c)&&!h&&iS(n,c))?r=r.filter(g=>g!==c):s=u,c=Vo(c)}return e.set(n,r),r}function j2(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const c=[...t==="clippingAncestors"?im(e)?[]:I2(e,this._c):[].concat(t),r],u=c[0],h=c.reduce((m,g)=>{const v=C_(e,g,s);return m.top=Ir(v.top,m.top),m.right=Lo(v.right,m.right),m.bottom=Lo(v.bottom,m.bottom),m.left=Ir(v.left,m.left),m},C_(e,u,s));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function A2(n){const{width:e,height:t}=rS(n);return{width:e,height:t}}function P2(n,e,t){const r=Ks(e),s=Xs(e),a=t==="fixed",c=Da(n,!0,a,e);let u={scrollLeft:0,scrollTop:0};const h=Mo(0);if(r||!r&&!a)if((_c(e)!=="body"||od(s))&&(u=om(e)),r){const b=Da(e,!0,a,e);h.x=b.x+e.clientLeft,h.y=b.y+e.clientTop}else s&&(h.x=mv(s));let m=0,g=0;if(s&&!r&&!a){const b=s.getBoundingClientRect();g=b.top+u.scrollTop,m=b.left+u.scrollLeft-mv(s,b)}const v=c.left+u.scrollLeft-h.x-m,y=c.top+u.scrollTop-h.y-g;return{x:v,y,width:c.width,height:c.height}}function Cg(n){return ps(n).position==="static"}function I_(n,e){if(!Ks(n)||ps(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Xs(n)===t&&(t=t.ownerDocument.body),t}function oS(n,e){const t=Pr(n);if(im(n))return t;if(!Ks(n)){let s=Vo(n);for(;s&&!oc(s);){if(ms(s)&&!Cg(s))return s;s=Vo(s)}return t}let r=I_(n,e);for(;r&&x2(r)&&Cg(r);)r=I_(r,e);return r&&oc(r)&&Cg(r)&&!_y(r)?t:r||w2(n)||t}const R2=async function(n){const e=this.getOffsetParent||oS,t=this.getDimensions,r=await t(n.floating);return{reference:P2(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function k2(n){return ps(n).direction==="rtl"}const D2={convertOffsetParentRelativeRectToViewportRelativeRect:b2,getDocumentElement:Xs,getClippingRect:j2,getOffsetParent:oS,getElementRects:R2,getClientRects:S2,getDimensions:A2,getScale:ql,isElement:ms,isRTL:k2};function O2(n,e){let t=null,r;const s=Xs(n);function a(){var u;clearTimeout(r),(u=t)==null||u.disconnect(),t=null}function c(u,h){u===void 0&&(u=!1),h===void 0&&(h=1),a();const{left:m,top:g,width:v,height:y}=n.getBoundingClientRect();if(u||e(),!v||!y)return;const b=$h(g),S=$h(s.clientWidth-(m+v)),E=$h(s.clientHeight-(g+y)),x=$h(m),I={rootMargin:-b+"px "+-S+"px "+-E+"px "+-x+"px",threshold:Ir(0,Lo(1,h))||1};let C=!0;function O(V){const B=V[0].intersectionRatio;if(B!==h){if(!C)return c();B?c(!1,B):r=setTimeout(()=>{c(!1,1e-7)},1e3)}C=!1}try{t=new IntersectionObserver(O,{...I,root:s.ownerDocument})}catch{t=new IntersectionObserver(O,I)}t.observe(n)}return c(!0),a}function L2(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:h=!1}=r,m=by(n),g=s||a?[...m?Vu(m):[],...Vu(e)]:[];g.forEach(A=>{s&&A.addEventListener("scroll",t,{passive:!0}),a&&A.addEventListener("resize",t)});const v=m&&u?O2(m,t):null;let y=-1,b=null;c&&(b=new ResizeObserver(A=>{let[I]=A;I&&I.target===m&&b&&(b.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var C;(C=b)==null||C.observe(e)})),t()}),m&&!h&&b.observe(m),b.observe(e));let S,E=h?Da(n):null;h&&x();function x(){const A=Da(n);E&&(A.x!==E.x||A.y!==E.y||A.width!==E.width||A.height!==E.height)&&t(),E=A,S=requestAnimationFrame(x)}return t(),()=>{var A;g.forEach(I=>{s&&I.removeEventListener("scroll",t),a&&I.removeEventListener("resize",t)}),v==null||v(),(A=b)==null||A.disconnect(),b=null,h&&cancelAnimationFrame(S)}}const M2=p2,F2=g2,V2=h2,U2=y2,$2=f2,j_=d2,z2=v2,B2=(n,e,t)=>{const r=new Map,s={platform:D2,...t},a={...s.platform,_c:r};return u2(n,e,{...s,platform:a})};var af=typeof document<"u"?_.useLayoutEffect:_.useEffect;function Tf(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Tf(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const a=s[r];if(!(a==="_owner"&&n.$$typeof)&&!Tf(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function aS(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function A_(n,e){const t=aS(n);return Math.round(e*t)/t}function Ig(n){const e=_.useRef(n);return af(()=>{e.current=n}),e}function q2(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:c}={},transform:u=!0,whileElementsMounted:h,open:m}=n,[g,v]=_.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[y,b]=_.useState(r);Tf(y,r)||b(r);const[S,E]=_.useState(null),[x,A]=_.useState(null),I=_.useCallback(q=>{q!==B.current&&(B.current=q,E(q))},[]),C=_.useCallback(q=>{q!==P.current&&(P.current=q,A(q))},[]),O=a||S,V=c||x,B=_.useRef(null),P=_.useRef(null),R=_.useRef(g),D=h!=null,k=Ig(h),$=Ig(s),z=Ig(m),M=_.useCallback(()=>{if(!B.current||!P.current)return;const q={placement:e,strategy:t,middleware:y};$.current&&(q.platform=$.current),B2(B.current,P.current,q).then(Q=>{const Z={...Q,isPositioned:z.current!==!1};oe.current&&!Tf(R.current,Z)&&(R.current=Z,qa.flushSync(()=>{v(Z)}))})},[y,e,t,$,z]);af(()=>{m===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,v(q=>({...q,isPositioned:!1})))},[m]);const oe=_.useRef(!1);af(()=>(oe.current=!0,()=>{oe.current=!1}),[]),af(()=>{if(O&&(B.current=O),V&&(P.current=V),O&&V){if(k.current)return k.current(O,V,M);M()}},[O,V,M,k,D]);const H=_.useMemo(()=>({reference:B,floating:P,setReference:I,setFloating:C}),[I,C]),J=_.useMemo(()=>({reference:O,floating:V}),[O,V]),Y=_.useMemo(()=>{const q={position:t,left:0,top:0};if(!J.floating)return q;const Q=A_(J.floating,g.x),Z=A_(J.floating,g.y);return u?{...q,transform:"translate("+Q+"px, "+Z+"px)",...aS(J.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:Q,top:Z}},[t,u,J.floating,g.x,g.y]);return _.useMemo(()=>({...g,update:M,refs:H,elements:J,floatingStyles:Y}),[g,M,H,J,Y])}const W2=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?j_({element:r.current,padding:s}).fn(t):{}:r?j_({element:r,padding:s}).fn(t):{}}}},H2=(n,e)=>({...M2(n),options:[n,e]}),K2=(n,e)=>({...F2(n),options:[n,e]}),G2=(n,e)=>({...z2(n),options:[n,e]}),Q2=(n,e)=>({...V2(n),options:[n,e]}),Y2=(n,e)=>({...U2(n),options:[n,e]}),X2=(n,e)=>({...$2(n),options:[n,e]}),J2=(n,e)=>({...W2(n),options:[n,e]});var Z2="Arrow",lS=_.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...a}=n;return l.jsx(We.svg,{...a,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});lS.displayName=Z2;var eD=lS;function cS(n){const[e,t]=_.useState(void 0);return Gt(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let c,u;if("borderBoxSize"in a){const h=a.borderBoxSize,m=Array.isArray(h)?h[0]:h;c=m.inlineSize,u=m.blockSize}else c=n.offsetWidth,u=n.offsetHeight;t({width:c,height:u})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var Sy="Popper",[uS,am]=ki(Sy),[tD,dS]=uS(Sy),hS=n=>{const{__scopePopper:e,children:t}=n,[r,s]=_.useState(null);return l.jsx(tD,{scope:e,anchor:r,onAnchorChange:s,children:t})};hS.displayName=Sy;var fS="PopperAnchor",mS=_.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,a=dS(fS,t),c=_.useRef(null),u=wt(e,c);return _.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||c.current)}),r?null:l.jsx(We.div,{...s,ref:u})});mS.displayName=fS;var Ny="PopperContent",[nD,rD]=uS(Ny),pS=_.forwardRef((n,e)=>{var me,Ee,De,Te,Me,Ke;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:c=0,arrowPadding:u=0,avoidCollisions:h=!0,collisionBoundary:m=[],collisionPadding:g=0,sticky:v="partial",hideWhenDetached:y=!1,updatePositionStrategy:b="optimized",onPlaced:S,...E}=n,x=dS(Ny,t),[A,I]=_.useState(null),C=wt(e,dt=>I(dt)),[O,V]=_.useState(null),B=cS(O),P=(B==null?void 0:B.width)??0,R=(B==null?void 0:B.height)??0,D=r+(a!=="center"?"-"+a:""),k=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},$=Array.isArray(m)?m:[m],z=$.length>0,M={padding:k,boundary:$.filter(iD),altBoundary:z},{refs:oe,floatingStyles:H,placement:J,isPositioned:Y,middlewareData:q}=q2({strategy:"fixed",placement:D,whileElementsMounted:(...dt)=>L2(...dt,{animationFrame:b==="always"}),elements:{reference:x.anchor},middleware:[H2({mainAxis:s+R,alignmentAxis:c}),h&&K2({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?G2():void 0,...M}),h&&Q2({...M}),Y2({...M,apply:({elements:dt,rects:Ct,availableWidth:on,availableHeight:Lt})=>{const{width:Mt,height:vt}=Ct.reference,yt=dt.floating.style;yt.setProperty("--radix-popper-available-width",`${on}px`),yt.setProperty("--radix-popper-available-height",`${Lt}px`),yt.setProperty("--radix-popper-anchor-width",`${Mt}px`),yt.setProperty("--radix-popper-anchor-height",`${vt}px`)}}),O&&J2({element:O,padding:u}),oD({arrowWidth:P,arrowHeight:R}),y&&X2({strategy:"referenceHidden",...M})]}),[Q,Z]=yS(J),U=En(S);Gt(()=>{Y&&(U==null||U())},[Y,U]);const X=(me=q.arrow)==null?void 0:me.x,le=(Ee=q.arrow)==null?void 0:Ee.y,be=((De=q.arrow)==null?void 0:De.centerOffset)!==0,[ve,ce]=_.useState();return Gt(()=>{A&&ce(window.getComputedStyle(A).zIndex)},[A]),l.jsx("div",{ref:oe.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:Y?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[(Te=q.transformOrigin)==null?void 0:Te.x,(Me=q.transformOrigin)==null?void 0:Me.y].join(" "),...((Ke=q.hide)==null?void 0:Ke.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:l.jsx(nD,{scope:t,placedSide:Q,onArrowChange:V,arrowX:X,arrowY:le,shouldHideArrow:be,children:l.jsx(We.div,{"data-side":Q,"data-align":Z,...E,ref:C,style:{...E.style,animation:Y?void 0:"none"}})})})});pS.displayName=Ny;var gS="PopperArrow",sD={top:"bottom",right:"left",bottom:"top",left:"right"},vS=_.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,a=rD(gS,r),c=sD[a.placedSide];return l.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:l.jsx(eD,{...s,ref:t,style:{...s.style,display:"block"}})})});vS.displayName=gS;function iD(n){return n!==null}var oD=n=>({name:"transformOrigin",options:n,fn(e){var x,A,I;const{placement:t,rects:r,middlewareData:s}=e,c=((x=s.arrow)==null?void 0:x.centerOffset)!==0,u=c?0:n.arrowWidth,h=c?0:n.arrowHeight,[m,g]=yS(t),v={start:"0%",center:"50%",end:"100%"}[g],y=(((A=s.arrow)==null?void 0:A.x)??0)+u/2,b=(((I=s.arrow)==null?void 0:I.y)??0)+h/2;let S="",E="";return m==="bottom"?(S=c?v:`${y}px`,E=`${-h}px`):m==="top"?(S=c?v:`${y}px`,E=`${r.floating.height+h}px`):m==="right"?(S=`${-h}px`,E=c?v:`${b}px`):m==="left"&&(S=`${r.floating.width+h}px`,E=c?v:`${b}px`),{data:{x:S,y:E}}}});function yS(n){const[e,t="center"]=n.split("-");return[e,t]}var aD=hS,xS=mS,wS=pS,_S=vS,lD="Portal",ES=_.forwardRef((n,e)=>{var u;const{container:t,...r}=n,[s,a]=_.useState(!1);Gt(()=>a(!0),[]);const c=t||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?em.createPortal(l.jsx(We.div,{...r,ref:e}),c):null});ES.displayName=lD;function cD(n,e){return _.useReducer((t,r)=>e[t][r]??t,n)}var bS=n=>{const{present:e,children:t}=n,r=uD(e),s=typeof t=="function"?t({present:r.isPresent}):_.Children.only(t),a=wt(r.ref,dD(s));return typeof t=="function"||r.isPresent?_.cloneElement(s,{ref:a}):null};bS.displayName="Presence";function uD(n){const[e,t]=_.useState(),r=_.useRef({}),s=_.useRef(n),a=_.useRef("none"),c=n?"mounted":"unmounted",[u,h]=cD(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const m=zh(r.current);a.current=u==="mounted"?m:"none"},[u]),Gt(()=>{const m=r.current,g=s.current;if(g!==n){const y=a.current,b=zh(m);n?h("MOUNT"):b==="none"||(m==null?void 0:m.display)==="none"?h("UNMOUNT"):h(g&&y!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,h]),Gt(()=>{if(e){let m;const g=e.ownerDocument.defaultView??window,v=b=>{const E=zh(r.current).includes(b.animationName);if(b.target===e&&E&&(h("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",m=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},y=b=>{b.target===e&&(a.current=zh(r.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{g.clearTimeout(m),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:_.useCallback(m=>{m&&(r.current=getComputedStyle(m)),t(m)},[])}}function zh(n){return(n==null?void 0:n.animationName)||"none"}function dD(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var[lm,jz]=Wk("Tooltip",[am]),Ty=am(),SS="TooltipProvider",hD=700,P_="tooltip.open",[fD,NS]=lm(SS),TS=n=>{const{__scopeTooltip:e,delayDuration:t=hD,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=n,[c,u]=_.useState(!0),h=_.useRef(!1),m=_.useRef(0);return _.useEffect(()=>{const g=m.current;return()=>window.clearTimeout(g)},[]),l.jsx(fD,{scope:e,isOpenDelayed:c,delayDuration:t,onOpen:_.useCallback(()=>{window.clearTimeout(m.current),u(!1)},[]),onClose:_.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>u(!0),r)},[r]),isPointerInTransitRef:h,onPointerInTransitChange:_.useCallback(g=>{h.current=g},[]),disableHoverableContent:s,children:a})};TS.displayName=SS;var CS="Tooltip",[Az,cm]=lm(CS),pv="TooltipTrigger",mD=_.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=cm(pv,t),a=NS(pv,t),c=Ty(t),u=_.useRef(null),h=wt(e,u,s.onTriggerChange),m=_.useRef(!1),g=_.useRef(!1),v=_.useCallback(()=>m.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),l.jsx(xS,{asChild:!0,...c,children:l.jsx(We.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:h,onPointerMove:$e(n.onPointerMove,y=>{y.pointerType!=="touch"&&!g.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),g.current=!0)}),onPointerLeave:$e(n.onPointerLeave,()=>{s.onTriggerLeave(),g.current=!1}),onPointerDown:$e(n.onPointerDown,()=>{m.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:$e(n.onFocus,()=>{m.current||s.onOpen()}),onBlur:$e(n.onBlur,s.onClose),onClick:$e(n.onClick,s.onClose)})})});mD.displayName=pv;var pD="TooltipPortal",[Pz,gD]=lm(pD,{forceMount:void 0}),ac="TooltipContent",IS=_.forwardRef((n,e)=>{const t=gD(ac,n.__scopeTooltip),{forceMount:r=t.forceMount,side:s="top",...a}=n,c=cm(ac,n.__scopeTooltip);return l.jsx(bS,{present:r||c.open,children:c.disableHoverableContent?l.jsx(jS,{side:s,...a,ref:e}):l.jsx(vD,{side:s,...a,ref:e})})}),vD=_.forwardRef((n,e)=>{const t=cm(ac,n.__scopeTooltip),r=NS(ac,n.__scopeTooltip),s=_.useRef(null),a=wt(e,s),[c,u]=_.useState(null),{trigger:h,onClose:m}=t,g=s.current,{onPointerInTransitChange:v}=r,y=_.useCallback(()=>{u(null),v(!1)},[v]),b=_.useCallback((S,E)=>{const x=S.currentTarget,A={x:S.clientX,y:S.clientY},I=_D(A,x.getBoundingClientRect()),C=ED(A,I),O=bD(E.getBoundingClientRect()),V=ND([...C,...O]);u(V),v(!0)},[v]);return _.useEffect(()=>()=>y(),[y]),_.useEffect(()=>{if(h&&g){const S=x=>b(x,g),E=x=>b(x,h);return h.addEventListener("pointerleave",S),g.addEventListener("pointerleave",E),()=>{h.removeEventListener("pointerleave",S),g.removeEventListener("pointerleave",E)}}},[h,g,b,y]),_.useEffect(()=>{if(c){const S=E=>{const x=E.target,A={x:E.clientX,y:E.clientY},I=(h==null?void 0:h.contains(x))||(g==null?void 0:g.contains(x)),C=!SD(A,c);I?y():C&&(y(),m())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[h,g,c,m,y]),l.jsx(jS,{...n,ref:a})}),[yD,xD]=lm(CS,{isInside:!1}),jS=_.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:c,...u}=n,h=cm(ac,t),m=Ty(t),{onClose:g}=h;return _.useEffect(()=>(document.addEventListener(P_,g),()=>document.removeEventListener(P_,g)),[g]),_.useEffect(()=>{if(h.trigger){const v=y=>{const b=y.target;b!=null&&b.contains(h.trigger)&&g()};return window.addEventListener("scroll",v,{capture:!0}),()=>window.removeEventListener("scroll",v,{capture:!0})}},[h.trigger,g]),l.jsx(vy,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:v=>v.preventDefault(),onDismiss:g,children:l.jsxs(wS,{"data-state":h.stateAttribute,...m,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(c1,{children:r}),l.jsx(yD,{scope:t,isInside:!0,children:l.jsx(KP,{id:h.contentId,role:"tooltip",children:s||r})})]})})});IS.displayName=ac;var AS="TooltipArrow",wD=_.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=Ty(t);return xD(AS,t).isInside?null:l.jsx(_S,{...s,...r,ref:e})});wD.displayName=AS;function _D(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),a=Math.abs(e.left-n.x);switch(Math.min(t,r,s,a)){case a:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function ED(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function bD(n){const{top:e,right:t,bottom:r,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:r},{x:s,y:r}]}function SD(n,e){const{x:t,y:r}=n;let s=!1;for(let a=0,c=e.length-1;a<e.length;c=a++){const u=e[a].x,h=e[a].y,m=e[c].x,g=e[c].y;h>r!=g>r&&t<(m-u)*(r-h)/(g-h)+u&&(s=!s)}return s}function ND(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),TD(e)}function TD(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const s=n[r];for(;e.length>=2;){const a=e[e.length-1],c=e[e.length-2];if((a.x-c.x)*(s.y-c.y)>=(a.y-c.y)*(s.x-c.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;t.length>=2;){const a=t[t.length-1],c=t[t.length-2];if((a.x-c.x)*(s.y-c.y)>=(a.y-c.y)*(s.x-c.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var CD=TS,PS=IS;const ID=CD,jD=_.forwardRef(({className:n,sideOffset:e=4,...t},r)=>l.jsx(PS,{ref:r,sideOffset:e,className:et("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));jD.displayName=PS.displayName;var um=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},dm=typeof window>"u"||"Deno"in globalThis;function as(){}function AD(n,e){return typeof n=="function"?n(e):n}function PD(n){return typeof n=="number"&&n>=0&&n!==1/0}function RD(n,e){return Math.max(n+(e||0)-Date.now(),0)}function gv(n,e){return typeof n=="function"?n(e):n}function kD(n,e){return typeof n=="function"?n(e):n}function R_(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:a,queryKey:c,stale:u}=n;if(c){if(r){if(e.queryHash!==Cy(c,e.options))return!1}else if(!$u(e.queryKey,c))return!1}if(t!=="all"){const h=e.isActive();if(t==="active"&&!h||t==="inactive"&&h)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||a&&!a(e))}function k_(n,e){const{exact:t,status:r,predicate:s,mutationKey:a}=n;if(a){if(!e.options.mutationKey)return!1;if(t){if(Uu(e.options.mutationKey)!==Uu(a))return!1}else if(!$u(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Cy(n,e){return((e==null?void 0:e.queryKeyHashFn)||Uu)(n)}function Uu(n){return JSON.stringify(n,(e,t)=>vv(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function $u(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>$u(n[t],e[t])):!1}function RS(n,e){if(n===e)return n;const t=D_(n)&&D_(e);if(t||vv(n)&&vv(e)){const r=t?n:Object.keys(n),s=r.length,a=t?e:Object.keys(e),c=a.length,u=t?[]:{},h=new Set(r);let m=0;for(let g=0;g<c;g++){const v=t?g:a[g];(!t&&h.has(v)||t)&&n[v]===void 0&&e[v]===void 0?(u[v]=void 0,m++):(u[v]=RS(n[v],e[v]),u[v]===n[v]&&n[v]!==void 0&&m++)}return s===c&&m===s?n:u}return e}function D_(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function vv(n){if(!O_(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!O_(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function O_(n){return Object.prototype.toString.call(n)==="[object Object]"}function DD(n){return new Promise(e=>{setTimeout(e,n)})}function OD(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?RS(n,e):e}function LD(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function MD(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var Iy=Symbol();function kS(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===Iy?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var ba,yo,Yl,Xb,FD=(Xb=class extends um{constructor(){super();Et(this,ba);Et(this,yo);Et(this,Yl);st(this,Yl,e=>{if(!dm&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){de(this,yo)||this.setEventListener(de(this,Yl))}onUnsubscribe(){var e;this.hasListeners()||((e=de(this,yo))==null||e.call(this),st(this,yo,void 0))}setEventListener(e){var t;st(this,Yl,e),(t=de(this,yo))==null||t.call(this),st(this,yo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){de(this,ba)!==e&&(st(this,ba,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof de(this,ba)=="boolean"?de(this,ba):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ba=new WeakMap,yo=new WeakMap,Yl=new WeakMap,Xb),DS=new FD,Xl,xo,Jl,Jb,VD=(Jb=class extends um{constructor(){super();Et(this,Xl,!0);Et(this,xo);Et(this,Jl);st(this,Jl,e=>{if(!dm&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){de(this,xo)||this.setEventListener(de(this,Jl))}onUnsubscribe(){var e;this.hasListeners()||((e=de(this,xo))==null||e.call(this),st(this,xo,void 0))}setEventListener(e){var t;st(this,Jl,e),(t=de(this,xo))==null||t.call(this),st(this,xo,e(this.setOnline.bind(this)))}setOnline(e){de(this,Xl)!==e&&(st(this,Xl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return de(this,Xl)}},Xl=new WeakMap,xo=new WeakMap,Jl=new WeakMap,Jb),Cf=new VD;function UD(){let n,e;const t=new Promise((s,a)=>{n=s,e=a});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function $D(n){return Math.min(1e3*2**n,3e4)}function OS(n){return(n??"online")==="online"?Cf.isOnline():!0}var LS=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function jg(n){return n instanceof LS}function MS(n){let e=!1,t=0,r=!1,s;const a=UD(),c=E=>{var x;r||(y(new LS(E)),(x=n.abort)==null||x.call(n))},u=()=>{e=!0},h=()=>{e=!1},m=()=>DS.isFocused()&&(n.networkMode==="always"||Cf.isOnline())&&n.canRun(),g=()=>OS(n.networkMode)&&n.canRun(),v=E=>{var x;r||(r=!0,(x=n.onSuccess)==null||x.call(n,E),s==null||s(),a.resolve(E))},y=E=>{var x;r||(r=!0,(x=n.onError)==null||x.call(n,E),s==null||s(),a.reject(E))},b=()=>new Promise(E=>{var x;s=A=>{(r||m())&&E(A)},(x=n.onPause)==null||x.call(n)}).then(()=>{var E;s=void 0,r||(E=n.onContinue)==null||E.call(n)}),S=()=>{if(r)return;let E;const x=t===0?n.initialPromise:void 0;try{E=x??n.fn()}catch(A){E=Promise.reject(A)}Promise.resolve(E).then(v).catch(A=>{var B;if(r)return;const I=n.retry??(dm?0:3),C=n.retryDelay??$D,O=typeof C=="function"?C(t,A):C,V=I===!0||typeof I=="number"&&t<I||typeof I=="function"&&I(t,A);if(e||!V){y(A);return}t++,(B=n.onFail)==null||B.call(n,t,A),DD(O).then(()=>m()?void 0:b()).then(()=>{e?y(A):S()})})};return{promise:a,cancel:c,continue:()=>(s==null||s(),a),cancelRetry:u,continueRetry:h,canStart:g,start:()=>(g()?S():b().then(S),a)}}var zD=n=>setTimeout(n,0);function BD(){let n=[],e=0,t=u=>{u()},r=u=>{u()},s=zD;const a=u=>{e?n.push(u):s(()=>{t(u)})},c=()=>{const u=n;n=[],u.length&&s(()=>{r(()=>{u.forEach(h=>{t(h)})})})};return{batch:u=>{let h;e++;try{h=u()}finally{e--,e||c()}return h},batchCalls:u=>(...h)=>{a(()=>{u(...h)})},schedule:a,setNotifyFunction:u=>{t=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var sr=BD(),Sa,Zb,FS=(Zb=class{constructor(){Et(this,Sa)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),PD(this.gcTime)&&st(this,Sa,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(dm?1/0:5*60*1e3))}clearGcTimeout(){de(this,Sa)&&(clearTimeout(de(this,Sa)),st(this,Sa,void 0))}},Sa=new WeakMap,Zb),Zl,Na,Br,Ta,Hn,td,Ca,ls,xi,e1,qD=(e1=class extends FS{constructor(t){super();Et(this,ls);Et(this,Zl);Et(this,Na);Et(this,Br);Et(this,Ta);Et(this,Hn);Et(this,td);Et(this,Ca);st(this,Ca,!1),st(this,td,t.defaultOptions),this.setOptions(t.options),this.observers=[],st(this,Ta,t.client),st(this,Br,de(this,Ta).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,st(this,Zl,HD(this.options)),this.state=t.state??de(this,Zl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=de(this,Hn))==null?void 0:t.promise}setOptions(t){this.options={...de(this,td),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&de(this,Br).remove(this)}setData(t,r){const s=OD(this.state.data,t,this.options);return qn(this,ls,xi).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){qn(this,ls,xi).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,a;const r=(s=de(this,Hn))==null?void 0:s.promise;return(a=de(this,Hn))==null||a.cancel(t),r?r.then(as).catch(as):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(de(this,Zl))}isActive(){return this.observers.some(t=>kD(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Iy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>gv(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!RD(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=de(this,Hn))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=de(this,Hn))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),de(this,Br).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(de(this,Hn)&&(de(this,Ca)?de(this,Hn).cancel({revert:!0}):de(this,Hn).cancelRetry()),this.scheduleGc()),de(this,Br).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||qn(this,ls,xi).call(this,{type:"invalidate"})}fetch(t,r){var g,v,y;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(de(this,Hn))return de(this,Hn).continueRetry(),de(this,Hn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const b=this.observers.find(S=>S.options.queryFn);b&&this.setOptions(b.options)}const s=new AbortController,a=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(st(this,Ca,!0),s.signal)})},c=()=>{const b=kS(this.options,r),E=(()=>{const x={client:de(this,Ta),queryKey:this.queryKey,meta:this.meta};return a(x),x})();return st(this,Ca,!1),this.options.persister?this.options.persister(b,E,this):b(E)},h=(()=>{const b={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:de(this,Ta),state:this.state,fetchFn:c};return a(b),b})();(g=this.options.behavior)==null||g.onFetch(h,this),st(this,Na,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((v=h.fetchOptions)==null?void 0:v.meta))&&qn(this,ls,xi).call(this,{type:"fetch",meta:(y=h.fetchOptions)==null?void 0:y.meta});const m=b=>{var S,E,x,A;jg(b)&&b.silent||qn(this,ls,xi).call(this,{type:"error",error:b}),jg(b)||((E=(S=de(this,Br).config).onError)==null||E.call(S,b,this),(A=(x=de(this,Br).config).onSettled)==null||A.call(x,this.state.data,b,this)),this.scheduleGc()};return st(this,Hn,MS({initialPromise:r==null?void 0:r.initialPromise,fn:h.fetchFn,abort:s.abort.bind(s),onSuccess:b=>{var S,E,x,A;if(b===void 0){m(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(b)}catch(I){m(I);return}(E=(S=de(this,Br).config).onSuccess)==null||E.call(S,b,this),(A=(x=de(this,Br).config).onSettled)==null||A.call(x,b,this.state.error,this),this.scheduleGc()},onError:m,onFail:(b,S)=>{qn(this,ls,xi).call(this,{type:"failed",failureCount:b,error:S})},onPause:()=>{qn(this,ls,xi).call(this,{type:"pause"})},onContinue:()=>{qn(this,ls,xi).call(this,{type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0})),de(this,Hn).start()}},Zl=new WeakMap,Na=new WeakMap,Br=new WeakMap,Ta=new WeakMap,Hn=new WeakMap,td=new WeakMap,Ca=new WeakMap,ls=new WeakSet,xi=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...WD(s.data,this.options),fetchMeta:t.meta??null};case"success":return st(this,Na,void 0),{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return jg(a)&&a.revert&&de(this,Na)?{...de(this,Na),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),sr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),de(this,Br).notify({query:this,type:"updated",action:t})})},e1);function WD(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:OS(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function HD(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Ds,t1,KD=(t1=class extends um{constructor(e={}){super();Et(this,Ds);this.config=e,st(this,Ds,new Map)}build(e,t,r){const s=t.queryKey,a=t.queryHash??Cy(s,t);let c=this.get(a);return c||(c=new qD({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(c)),c}add(e){de(this,Ds).has(e.queryHash)||(de(this,Ds).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=de(this,Ds).get(e.queryHash);t&&(e.destroy(),t===e&&de(this,Ds).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){sr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return de(this,Ds).get(e)}getAll(){return[...de(this,Ds).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>R_(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>R_(e,r)):t}notify(e){sr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){sr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){sr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ds=new WeakMap,t1),Os,rr,Ia,Ls,ho,n1,GD=(n1=class extends FS{constructor(t){super();Et(this,Ls);Et(this,Os);Et(this,rr);Et(this,Ia);this.mutationId=t.mutationId,st(this,rr,t.mutationCache),st(this,Os,[]),this.state=t.state||QD(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){de(this,Os).includes(t)||(de(this,Os).push(t),this.clearGcTimeout(),de(this,rr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){st(this,Os,de(this,Os).filter(r=>r!==t)),this.scheduleGc(),de(this,rr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){de(this,Os).length||(this.state.status==="pending"?this.scheduleGc():de(this,rr).remove(this))}continue(){var t;return((t=de(this,Ia))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var c,u,h,m,g,v,y,b,S,E,x,A,I,C,O,V,B,P,R,D;const r=()=>{qn(this,Ls,ho).call(this,{type:"continue"})};st(this,Ia,MS({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(k,$)=>{qn(this,Ls,ho).call(this,{type:"failed",failureCount:k,error:$})},onPause:()=>{qn(this,Ls,ho).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>de(this,rr).canRun(this)}));const s=this.state.status==="pending",a=!de(this,Ia).canStart();try{if(s)r();else{qn(this,Ls,ho).call(this,{type:"pending",variables:t,isPaused:a}),await((u=(c=de(this,rr).config).onMutate)==null?void 0:u.call(c,t,this));const $=await((m=(h=this.options).onMutate)==null?void 0:m.call(h,t));$!==this.state.context&&qn(this,Ls,ho).call(this,{type:"pending",context:$,variables:t,isPaused:a})}const k=await de(this,Ia).start();return await((v=(g=de(this,rr).config).onSuccess)==null?void 0:v.call(g,k,t,this.state.context,this)),await((b=(y=this.options).onSuccess)==null?void 0:b.call(y,k,t,this.state.context)),await((E=(S=de(this,rr).config).onSettled)==null?void 0:E.call(S,k,null,this.state.variables,this.state.context,this)),await((A=(x=this.options).onSettled)==null?void 0:A.call(x,k,null,t,this.state.context)),qn(this,Ls,ho).call(this,{type:"success",data:k}),k}catch(k){try{throw await((C=(I=de(this,rr).config).onError)==null?void 0:C.call(I,k,t,this.state.context,this)),await((V=(O=this.options).onError)==null?void 0:V.call(O,k,t,this.state.context)),await((P=(B=de(this,rr).config).onSettled)==null?void 0:P.call(B,void 0,k,this.state.variables,this.state.context,this)),await((D=(R=this.options).onSettled)==null?void 0:D.call(R,void 0,k,t,this.state.context)),k}finally{qn(this,Ls,ho).call(this,{type:"error",error:k})}}finally{de(this,rr).runNext(this)}}},Os=new WeakMap,rr=new WeakMap,Ia=new WeakMap,Ls=new WeakSet,ho=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),sr.batch(()=>{de(this,Os).forEach(s=>{s.onMutationUpdate(t)}),de(this,rr).notify({mutation:this,type:"updated",action:t})})},n1);function QD(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _i,cs,nd,r1,YD=(r1=class extends um{constructor(e={}){super();Et(this,_i);Et(this,cs);Et(this,nd);this.config=e,st(this,_i,new Set),st(this,cs,new Map),st(this,nd,0)}build(e,t,r){const s=new GD({mutationCache:this,mutationId:++Lh(this,nd)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){de(this,_i).add(e);const t=Bh(e);if(typeof t=="string"){const r=de(this,cs).get(t);r?r.push(e):de(this,cs).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(de(this,_i).delete(e)){const t=Bh(e);if(typeof t=="string"){const r=de(this,cs).get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&de(this,cs).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Bh(e);if(typeof t=="string"){const r=de(this,cs).get(t),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const t=Bh(e);if(typeof t=="string"){const s=(r=de(this,cs).get(t))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){sr.batch(()=>{de(this,_i).forEach(e=>{this.notify({type:"removed",mutation:e})}),de(this,_i).clear(),de(this,cs).clear()})}getAll(){return Array.from(de(this,_i))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>k_(t,r))}findAll(e={}){return this.getAll().filter(t=>k_(e,t))}notify(e){sr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return sr.batch(()=>Promise.all(e.map(t=>t.continue().catch(as))))}},_i=new WeakMap,cs=new WeakMap,nd=new WeakMap,r1);function Bh(n){var e;return(e=n.options.scope)==null?void 0:e.id}function L_(n){return{onFetch:(e,t)=>{var g,v,y,b,S;const r=e.options,s=(y=(v=(g=e.fetchOptions)==null?void 0:g.meta)==null?void 0:v.fetchMore)==null?void 0:y.direction,a=((b=e.state.data)==null?void 0:b.pages)||[],c=((S=e.state.data)==null?void 0:S.pageParams)||[];let u={pages:[],pageParams:[]},h=0;const m=async()=>{let E=!1;const x=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?E=!0:e.signal.addEventListener("abort",()=>{E=!0}),e.signal)})},A=kS(e.options,e.fetchOptions),I=async(C,O,V)=>{if(E)return Promise.reject();if(O==null&&C.pages.length)return Promise.resolve(C);const P=(()=>{const $={client:e.client,queryKey:e.queryKey,pageParam:O,direction:V?"backward":"forward",meta:e.options.meta};return x($),$})(),R=await A(P),{maxPages:D}=e.options,k=V?MD:LD;return{pages:k(C.pages,R,D),pageParams:k(C.pageParams,O,D)}};if(s&&a.length){const C=s==="backward",O=C?XD:M_,V={pages:a,pageParams:c},B=O(r,V);u=await I(V,B,C)}else{const C=n??a.length;do{const O=h===0?c[0]??r.initialPageParam:M_(r,u);if(h>0&&O==null)break;u=await I(u,O),h++}while(h<C)}return u};e.options.persister?e.fetchFn=()=>{var E,x;return(x=(E=e.options).persister)==null?void 0:x.call(E,m,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=m}}}function M_(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function XD(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var tn,wo,_o,ec,tc,Eo,nc,rc,s1,JD=(s1=class{constructor(n={}){Et(this,tn);Et(this,wo);Et(this,_o);Et(this,ec);Et(this,tc);Et(this,Eo);Et(this,nc);Et(this,rc);st(this,tn,n.queryCache||new KD),st(this,wo,n.mutationCache||new YD),st(this,_o,n.defaultOptions||{}),st(this,ec,new Map),st(this,tc,new Map),st(this,Eo,0)}mount(){Lh(this,Eo)._++,de(this,Eo)===1&&(st(this,nc,DS.subscribe(async n=>{n&&(await this.resumePausedMutations(),de(this,tn).onFocus())})),st(this,rc,Cf.subscribe(async n=>{n&&(await this.resumePausedMutations(),de(this,tn).onOnline())})))}unmount(){var n,e;Lh(this,Eo)._--,de(this,Eo)===0&&((n=de(this,nc))==null||n.call(this),st(this,nc,void 0),(e=de(this,rc))==null||e.call(this),st(this,rc,void 0))}isFetching(n){return de(this,tn).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return de(this,wo).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=de(this,tn).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=de(this,tn).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(gv(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return de(this,tn).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=de(this,tn).get(r.queryHash),a=s==null?void 0:s.state.data,c=AD(e,a);if(c!==void 0)return de(this,tn).build(this,r).setData(c,{...t,manual:!0})}setQueriesData(n,e,t){return sr.batch(()=>de(this,tn).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=de(this,tn).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=de(this,tn);sr.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=de(this,tn);return sr.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=sr.batch(()=>de(this,tn).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(as).catch(as)}invalidateQueries(n,e={}){return sr.batch(()=>(de(this,tn).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=sr.batch(()=>de(this,tn).findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,t);return t.throwOnError||(a=a.catch(as)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(as)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=de(this,tn).build(this,e);return t.isStaleByTime(gv(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(as).catch(as)}fetchInfiniteQuery(n){return n.behavior=L_(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(as).catch(as)}ensureInfiniteQueryData(n){return n.behavior=L_(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Cf.isOnline()?de(this,wo).resumePausedMutations():Promise.resolve()}getQueryCache(){return de(this,tn)}getMutationCache(){return de(this,wo)}getDefaultOptions(){return de(this,_o)}setDefaultOptions(n){st(this,_o,n)}setQueryDefaults(n,e){de(this,ec).set(Uu(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...de(this,ec).values()],t={};return e.forEach(r=>{$u(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){de(this,tc).set(Uu(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...de(this,tc).values()],t={};return e.forEach(r=>{$u(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...de(this,_o).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Cy(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Iy&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...de(this,_o).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){de(this,tn).clear(),de(this,wo).clear()}},tn=new WeakMap,wo=new WeakMap,_o=new WeakMap,ec=new WeakMap,tc=new WeakMap,Eo=new WeakMap,nc=new WeakMap,rc=new WeakMap,s1),ZD=_.createContext(void 0),eO=({client:n,children:e})=>(_.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),l.jsx(ZD.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zu(){return zu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},zu.apply(this,arguments)}var So;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(So||(So={}));const F_="popstate";function tO(n){n===void 0&&(n={});function e(r,s){let{pathname:a,search:c,hash:u}=r.location;return yv("",{pathname:a,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:If(s)}return rO(e,t,null,n)}function Jt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function VS(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nO(){return Math.random().toString(36).substr(2,8)}function V_(n,e){return{usr:n.state,key:n.key,idx:e}}function yv(n,e,t,r){return t===void 0&&(t=null),zu({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ec(e):e,{state:t,key:e&&e.key||r||nO()})}function If(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ec(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function rO(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,c=s.history,u=So.Pop,h=null,m=g();m==null&&(m=0,c.replaceState(zu({},c.state,{idx:m}),""));function g(){return(c.state||{idx:null}).idx}function v(){u=So.Pop;let x=g(),A=x==null?null:x-m;m=x,h&&h({action:u,location:E.location,delta:A})}function y(x,A){u=So.Push;let I=yv(E.location,x,A);m=g()+1;let C=V_(I,m),O=E.createHref(I);try{c.pushState(C,"",O)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(O)}a&&h&&h({action:u,location:E.location,delta:1})}function b(x,A){u=So.Replace;let I=yv(E.location,x,A);m=g();let C=V_(I,m),O=E.createHref(I);c.replaceState(C,"",O),a&&h&&h({action:u,location:E.location,delta:0})}function S(x){let A=s.location.origin!=="null"?s.location.origin:s.location.href,I=typeof x=="string"?x:If(x);return I=I.replace(/ $/,"%20"),Jt(A,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,A)}let E={get action(){return u},get location(){return n(s,c)},listen(x){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(F_,v),h=x,()=>{s.removeEventListener(F_,v),h=null}},createHref(x){return e(s,x)},createURL:S,encodeLocation(x){let A=S(x);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:y,replace:b,go(x){return c.go(x)}};return E}var U_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(U_||(U_={}));function sO(n,e,t){return t===void 0&&(t="/"),iO(n,e,t)}function iO(n,e,t,r){let s=typeof e=="string"?Ec(e):e,a=lc(s.pathname||"/",t);if(a==null)return null;let c=US(n);oO(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let m=vO(a);u=pO(c[h],m)}return u}function US(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(a,c,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};h.relativePath.startsWith("/")&&(Jt(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let m=Co([r,h.relativePath]),g=t.concat(h);a.children&&a.children.length>0&&(Jt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),US(a.children,e,g,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:fO(m,a.index),routesMeta:g})};return n.forEach((a,c)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))s(a,c);else for(let h of $S(a.path))s(a,c,h)}),e}function $S(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let c=$S(r.join("/")),u=[];return u.push(...c.map(h=>h===""?a:[a,h].join("/"))),s&&u.push(...c),u.map(h=>n.startsWith("/")&&h===""?"/":h)}function oO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:mO(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const aO=/^:[\w-]+$/,lO=3,cO=2,uO=1,dO=10,hO=-2,$_=n=>n==="*";function fO(n,e){let t=n.split("/"),r=t.length;return t.some($_)&&(r+=hO),e&&(r+=cO),t.filter(s=>!$_(s)).reduce((s,a)=>s+(aO.test(a)?lO:a===""?uO:dO),r)}function mO(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function pO(n,e,t){let{routesMeta:r}=n,s={},a="/",c=[];for(let u=0;u<r.length;++u){let h=r[u],m=u===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",v=xv({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},g),y=h.route;if(!v)return null;Object.assign(s,v.params),c.push({params:s,pathname:Co([a,v.pathname]),pathnameBase:_O(Co([a,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(a=Co([a,v.pathnameBase]))}return c}function xv(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=gO(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],c=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((m,g,v)=>{let{paramName:y,isOptional:b}=g;if(y==="*"){let E=u[v]||"";c=a.slice(0,a.length-E.length).replace(/(.)\/+$/,"$1")}const S=u[v];return b&&!S?m[y]=void 0:m[y]=(S||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:c,pattern:n}}function gO(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),VS(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function vO(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return VS(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function lc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function yO(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Ec(n):n;return{pathname:t?t.startsWith("/")?t:xO(t,e):e,search:EO(r),hash:bO(s)}}function xO(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Ag(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function jy(n,e){let t=wO(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Ay(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=Ec(n):(s=zu({},n),Jt(!s.pathname||!s.pathname.includes("?"),Ag("?","pathname","search",s)),Jt(!s.pathname||!s.pathname.includes("#"),Ag("#","pathname","hash",s)),Jt(!s.search||!s.search.includes("#"),Ag("#","search","hash",s)));let a=n===""||s.pathname==="",c=a?"/":s.pathname,u;if(c==null)u=t;else{let v=e.length-1;if(!r&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),v-=1;s.pathname=y.join("/")}u=v>=0?e[v]:"/"}let h=yO(s,u),m=c&&c!=="/"&&c.endsWith("/"),g=(a||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(m||g)&&(h.pathname+="/"),h}const Co=n=>n.join("/").replace(/\/\/+/g,"/"),_O=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),EO=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,bO=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function SO(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const zS=["post","put","patch","delete"];new Set(zS);const NO=["get",...zS];new Set(NO);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bu(){return Bu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bu.apply(this,arguments)}const hm=_.createContext(null),BS=_.createContext(null),Di=_.createContext(null),fm=_.createContext(null),Js=_.createContext({outlet:null,matches:[],isDataRoute:!1}),qS=_.createContext(null);function TO(n,e){let{relative:t}=e===void 0?{}:e;bc()||Jt(!1);let{basename:r,navigator:s}=_.useContext(Di),{hash:a,pathname:c,search:u}=mm(n,{relative:t}),h=c;return r!=="/"&&(h=c==="/"?r:Co([r,c])),s.createHref({pathname:h,search:u,hash:a})}function bc(){return _.useContext(fm)!=null}function Oi(){return bc()||Jt(!1),_.useContext(fm).location}function WS(n){_.useContext(Di).static||_.useLayoutEffect(n)}function Sc(){let{isDataRoute:n}=_.useContext(Js);return n?$O():CO()}function CO(){bc()||Jt(!1);let n=_.useContext(hm),{basename:e,future:t,navigator:r}=_.useContext(Di),{matches:s}=_.useContext(Js),{pathname:a}=Oi(),c=JSON.stringify(jy(s,t.v7_relativeSplatPath)),u=_.useRef(!1);return WS(()=>{u.current=!0}),_.useCallback(function(m,g){if(g===void 0&&(g={}),!u.current)return;if(typeof m=="number"){r.go(m);return}let v=Ay(m,JSON.parse(c),a,g.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Co([e,v.pathname])),(g.replace?r.replace:r.push)(v,g.state,g)},[e,r,c,a,n])}const IO=_.createContext(null);function jO(n){let e=_.useContext(Js).outlet;return e&&_.createElement(IO.Provider,{value:n},e)}function HS(){let{matches:n}=_.useContext(Js),e=n[n.length-1];return e?e.params:{}}function mm(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=_.useContext(Di),{matches:s}=_.useContext(Js),{pathname:a}=Oi(),c=JSON.stringify(jy(s,r.v7_relativeSplatPath));return _.useMemo(()=>Ay(n,JSON.parse(c),a,t==="path"),[n,c,a,t])}function AO(n,e){return PO(n,e)}function PO(n,e,t,r){bc()||Jt(!1);let{navigator:s}=_.useContext(Di),{matches:a}=_.useContext(Js),c=a[a.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let m=Oi(),g;if(e){var v;let x=typeof e=="string"?Ec(e):e;h==="/"||(v=x.pathname)!=null&&v.startsWith(h)||Jt(!1),g=x}else g=m;let y=g.pathname||"/",b=y;if(h!=="/"){let x=h.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(x.length).join("/")}let S=sO(n,{pathname:b}),E=LO(S&&S.map(x=>Object.assign({},x,{params:Object.assign({},u,x.params),pathname:Co([h,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?h:Co([h,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),a,t,r);return e&&E?_.createElement(fm.Provider,{value:{location:Bu({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:So.Pop}},E):E}function RO(){let n=UO(),e=SO(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),t?_.createElement("pre",{style:s},t):null,null)}const kO=_.createElement(RO,null);class DO extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?_.createElement(Js.Provider,{value:this.props.routeContext},_.createElement(qS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function OO(n){let{routeContext:e,match:t,children:r}=n,s=_.useContext(hm);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),_.createElement(Js.Provider,{value:e},r)}function LO(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,u=(s=t)==null?void 0:s.errors;if(u!=null){let g=c.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);g>=0||Jt(!1),c=c.slice(0,Math.min(c.length,g+1))}let h=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let g=0;g<c.length;g++){let v=c[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=g),v.route.id){let{loaderData:y,errors:b}=t,S=v.route.loader&&y[v.route.id]===void 0&&(!b||b[v.route.id]===void 0);if(v.route.lazy||S){h=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}return c.reduceRight((g,v,y)=>{let b,S=!1,E=null,x=null;t&&(b=u&&v.route.id?u[v.route.id]:void 0,E=v.route.errorElement||kO,h&&(m<0&&y===0?(zO("route-fallback"),S=!0,x=null):m===y&&(S=!0,x=v.route.hydrateFallbackElement||null)));let A=e.concat(c.slice(0,y+1)),I=()=>{let C;return b?C=E:S?C=x:v.route.Component?C=_.createElement(v.route.Component,null):v.route.element?C=v.route.element:C=g,_.createElement(OO,{match:v,routeContext:{outlet:g,matches:A,isDataRoute:t!=null},children:C})};return t&&(v.route.ErrorBoundary||v.route.errorElement||y===0)?_.createElement(DO,{location:t.location,revalidation:t.revalidation,component:E,error:b,children:I(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):I()},null)}var KS=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(KS||{}),GS=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(GS||{});function MO(n){let e=_.useContext(hm);return e||Jt(!1),e}function FO(n){let e=_.useContext(BS);return e||Jt(!1),e}function VO(n){let e=_.useContext(Js);return e||Jt(!1),e}function QS(n){let e=VO(),t=e.matches[e.matches.length-1];return t.route.id||Jt(!1),t.route.id}function UO(){var n;let e=_.useContext(qS),t=FO(),r=QS();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function $O(){let{router:n}=MO(KS.UseNavigateStable),e=QS(GS.UseNavigateStable),t=_.useRef(!1);return WS(()=>{t.current=!0}),_.useCallback(function(s,a){a===void 0&&(a={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,Bu({fromRouteId:e},a)))},[n,e])}const z_={};function zO(n,e,t){z_[n]||(z_[n]=!0)}function lf(n){let{to:e,replace:t,state:r,relative:s}=n;bc()||Jt(!1);let{future:a,static:c}=_.useContext(Di),{matches:u}=_.useContext(Js),{pathname:h}=Oi(),m=Sc(),g=Ay(e,jy(u,a.v7_relativeSplatPath),h,s==="path"),v=JSON.stringify(g);return _.useEffect(()=>m(JSON.parse(v),{replace:t,state:r,relative:s}),[m,v,s,t,r]),null}function BO(n){return jO(n.context)}function Bt(n){Jt(!1)}function qO(n){let{basename:e="/",children:t=null,location:r,navigationType:s=So.Pop,navigator:a,static:c=!1,future:u}=n;bc()&&Jt(!1);let h=e.replace(/^\/*/,"/"),m=_.useMemo(()=>({basename:h,navigator:a,static:c,future:Bu({v7_relativeSplatPath:!1},u)}),[h,u,a,c]);typeof r=="string"&&(r=Ec(r));let{pathname:g="/",search:v="",hash:y="",state:b=null,key:S="default"}=r,E=_.useMemo(()=>{let x=lc(g,h);return x==null?null:{location:{pathname:x,search:v,hash:y,state:b,key:S},navigationType:s}},[h,g,v,y,b,S,s]);return E==null?null:_.createElement(Di.Provider,{value:m},_.createElement(fm.Provider,{children:t,value:E}))}function WO(n){let{children:e,location:t}=n;return AO(wv(e),t)}new Promise(()=>{});function wv(n,e){e===void 0&&(e=[]);let t=[];return _.Children.forEach(n,(r,s)=>{if(!_.isValidElement(r))return;let a=[...e,s];if(r.type===_.Fragment){t.push.apply(t,wv(r.props.children,a));return}r.type!==Bt&&Jt(!1),!r.props.index||!r.props.children||Jt(!1);let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=wv(r.props.children,a)),t.push(c)}),t}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jf(){return jf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jf.apply(this,arguments)}function YS(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function HO(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function KO(n,e){return n.button===0&&(!e||e==="_self")&&!HO(n)}function _v(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(s=>[t,s]):[[t,r]])},[]))}function GO(n,e){let t=_v(n);return e&&e.forEach((r,s)=>{t.has(s)||e.getAll(s).forEach(a=>{t.append(s,a)})}),t}const QO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],YO=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],XO="6";try{window.__reactRouterVersion=XO}catch{}const JO=_.createContext({isTransitioning:!1}),ZO="startTransition",B_=o1[ZO];function eL(n){let{basename:e,children:t,future:r,window:s}=n,a=_.useRef();a.current==null&&(a.current=tO({window:s,v5Compat:!0}));let c=a.current,[u,h]=_.useState({action:c.action,location:c.location}),{v7_startTransition:m}=r||{},g=_.useCallback(v=>{m&&B_?B_(()=>h(v)):h(v)},[h,m]);return _.useLayoutEffect(()=>c.listen(g),[c,g]),_.createElement(qO,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:c,future:r})}const tL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qn=_.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:a,replace:c,state:u,target:h,to:m,preventScrollReset:g,unstable_viewTransition:v}=e,y=YS(e,QO),{basename:b}=_.useContext(Di),S,E=!1;if(typeof m=="string"&&nL.test(m)&&(S=m,tL))try{let C=new URL(window.location.href),O=m.startsWith("//")?new URL(C.protocol+m):new URL(m),V=lc(O.pathname,b);O.origin===C.origin&&V!=null?m=V+O.search+O.hash:E=!0}catch{}let x=TO(m,{relative:s}),A=sL(m,{replace:c,state:u,target:h,preventScrollReset:g,relative:s,unstable_viewTransition:v});function I(C){r&&r(C),C.defaultPrevented||A(C)}return _.createElement("a",jf({},y,{href:S||x,onClick:E||a?r:I,ref:t,target:h}))}),q_=_.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:s=!1,className:a="",end:c=!1,style:u,to:h,unstable_viewTransition:m,children:g}=e,v=YS(e,YO),y=mm(h,{relative:v.relative}),b=Oi(),S=_.useContext(BS),{navigator:E,basename:x}=_.useContext(Di),A=S!=null&&iL(y)&&m===!0,I=E.encodeLocation?E.encodeLocation(y).pathname:y.pathname,C=b.pathname,O=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;s||(C=C.toLowerCase(),O=O?O.toLowerCase():null,I=I.toLowerCase()),O&&x&&(O=lc(O,x)||O);const V=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let B=C===I||!c&&C.startsWith(I)&&C.charAt(V)==="/",P=O!=null&&(O===I||!c&&O.startsWith(I)&&O.charAt(I.length)==="/"),R={isActive:B,isPending:P,isTransitioning:A},D=B?r:void 0,k;typeof a=="function"?k=a(R):k=[a,B?"active":null,P?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let $=typeof u=="function"?u(R):u;return _.createElement(Qn,jf({},v,{"aria-current":D,className:k,ref:t,style:$,to:h,unstable_viewTransition:m}),typeof g=="function"?g(R):g)});var Ev;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Ev||(Ev={}));var W_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(W_||(W_={}));function rL(n){let e=_.useContext(hm);return e||Jt(!1),e}function sL(n,e){let{target:t,replace:r,state:s,preventScrollReset:a,relative:c,unstable_viewTransition:u}=e===void 0?{}:e,h=Sc(),m=Oi(),g=mm(n,{relative:c});return _.useCallback(v=>{if(KO(v,t)){v.preventDefault();let y=r!==void 0?r:If(m)===If(g);h(n,{replace:y,state:s,preventScrollReset:a,relative:c,unstable_viewTransition:u})}},[m,h,g,r,s,t,n,a,c,u])}function ad(n){let e=_.useRef(_v(n)),t=_.useRef(!1),r=Oi(),s=_.useMemo(()=>GO(r.search,t.current?null:e.current),[r.search]),a=Sc(),c=_.useCallback((u,h)=>{const m=_v(typeof u=="function"?u(s):u);t.current=!0,a("?"+m,h)},[a,s]);return[s,c]}function iL(n,e){e===void 0&&(e={});let t=_.useContext(JO);t==null&&Jt(!1);let{basename:r}=rL(Ev.useViewTransitionState),s=mm(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=lc(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=lc(t.nextLocation.pathname,r)||t.nextLocation.pathname;return xv(s.pathname,c)!=null||xv(s.pathname,a)!=null}const oL=()=>{};var H_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},aL=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],c=n[t++],u=n[t++],h=((s&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|c&63)}}return e.join("")},JS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],c=s+1<n.length,u=c?n[s+1]:0,h=s+2<n.length,m=h?n[s+2]:0,g=a>>2,v=(a&3)<<4|u>>4;let y=(u&15)<<2|m>>6,b=m&63;h||(b=64,c||(y=64)),r.push(t[g],t[v],t[y],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(XS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):aL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||u==null||m==null||v==null)throw new lL;const y=a<<2|u>>4;if(r.push(y),m!==64){const b=u<<4&240|m>>2;if(r.push(b),v!==64){const S=m<<6&192|v;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class lL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cL=function(n){const e=XS(n);return JS.encodeByteArray(e,!0)},Af=function(n){return cL(n).replace(/\./g,"")},ZS=function(n){try{return JS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=()=>uL().__FIREBASE_DEFAULTS__,hL=()=>{if(typeof process>"u"||typeof H_>"u")return;const n=H_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},fL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&ZS(n[1]);return e&&JSON.parse(e)},pm=()=>{try{return oL()||dL()||hL()||fL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},eN=n=>{var e,t;return(t=(e=pm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},mL=n=>{const e=eN(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},tN=()=>{var n;return(n=pm())===null||n===void 0?void 0:n.config},nN=n=>{var e;return(e=pm())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Py(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Af(JSON.stringify(t)),Af(JSON.stringify(c)),""].join(".")}const ju={};function vL(){const n={prod:[],emulator:[]};for(const e of Object.keys(ju))ju[e]?n.emulator.push(e):n.prod.push(e);return n}function yL(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let K_=!1;function rN(n,e){if(typeof window>"u"||typeof document>"u"||!Wa(window.location.host)||ju[n]===e||ju[n]||K_)return;ju[n]=e;function t(y){return`__firebase__banner__${y}`}const r="__firebase__banner",a=vL().prod.length>0;function c(){const y=document.getElementById(r);y&&y.remove()}function u(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function h(y,b){y.setAttribute("width","24"),y.setAttribute("id",b),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function m(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{K_=!0,c()},y}function g(y,b){y.setAttribute("id",b),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function v(){const y=yL(r),b=t("text"),S=document.getElementById(b)||document.createElement("span"),E=t("learnmore"),x=document.getElementById(E)||document.createElement("a"),A=t("preprendIcon"),I=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const C=y.element;u(C),g(x,E);const O=m();h(I,A),C.append(I,S,x,O),document.body.appendChild(C)}a?(S.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yn())}function wL(){var n;const e=(n=pm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _L(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function EL(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function bL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SL(){const n=Yn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function NL(){return!wL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TL(){try{return typeof indexedDB=="object"}catch{return!1}}function CL(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL="FirebaseError";class Zs extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=IL,Object.setPrototypeOf(this,Zs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ld.prototype.create)}}class ld{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],c=a?jL(a,r):"Error",u=`${this.serviceName}: ${c} (${s}).`;return new Zs(s,u,r)}}function jL(n,e){return n.replace(AL,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const AL=/\{\$([^}]+)}/g;function PL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Oa(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],c=e[s];if(G_(a)&&G_(c)){if(!Oa(a,c))return!1}else if(a!==c)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function G_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function vu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function yu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function RL(n,e){const t=new kL(n,e);return t.subscribe.bind(t)}class kL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");DL(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Pg),s.error===void 0&&(s.error=Pg),s.complete===void 0&&(s.complete=Pg);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Pg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(n){return n&&n._delegate?n._delegate:n}class Uo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new pL;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ML(e))try{this.getOrInitializeService({instanceIdentifier:_a})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=_a){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_a){return this.instances.has(e)}getOptions(e=_a){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&c.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_a){return this.component?this.component.multipleInstances?e:_a:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LL(n){return n===_a?void 0:n}function ML(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new OL(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ct||(ct={}));const VL={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},UL=ct.INFO,$L={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},zL=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=$L[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ry{constructor(e){this.name=e,this._logLevel=UL,this._logHandler=zL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...e),this._logHandler(this,ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...e),this._logHandler(this,ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...e),this._logHandler(this,ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...e),this._logHandler(this,ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...e),this._logHandler(this,ct.ERROR,...e)}}const BL=(n,e)=>e.some(t=>n instanceof t);let Q_,Y_;function qL(){return Q_||(Q_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WL(){return Y_||(Y_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sN=new WeakMap,bv=new WeakMap,iN=new WeakMap,Rg=new WeakMap,ky=new WeakMap;function HL(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(Io(n.result)),s()},c=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&sN.set(t,n)}).catch(()=>{}),ky.set(e,n),e}function KL(n){if(bv.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),s()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});bv.set(n,e)}let Sv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return bv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||iN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Io(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function GL(n){Sv=n(Sv)}function QL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(kg(this),e,...t);return iN.set(r,e.sort?e.sort():[e]),Io(r)}:WL().includes(n)?function(...e){return n.apply(kg(this),e),Io(sN.get(this))}:function(...e){return Io(n.apply(kg(this),e))}}function YL(n){return typeof n=="function"?QL(n):(n instanceof IDBTransaction&&KL(n),BL(n,qL())?new Proxy(n,Sv):n)}function Io(n){if(n instanceof IDBRequest)return HL(n);if(Rg.has(n))return Rg.get(n);const e=YL(n);return e!==n&&(Rg.set(n,e),ky.set(e,n)),e}const kg=n=>ky.get(n);function XL(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const c=indexedDB.open(n,e),u=Io(c);return r&&c.addEventListener("upgradeneeded",h=>{r(Io(c.result),h.oldVersion,h.newVersion,Io(c.transaction),h)}),t&&c.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{a&&h.addEventListener("close",()=>a()),s&&h.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),u}const JL=["get","getKey","getAll","getAllKeys","count"],ZL=["put","add","delete","clear"],Dg=new Map;function X_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Dg.get(e))return Dg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=ZL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||JL.includes(t)))return;const a=async function(c,...u){const h=this.transaction(c,s?"readwrite":"readonly");let m=h.store;return r&&(m=m.index(u.shift())),(await Promise.all([m[t](...u),s&&h.done]))[0]};return Dg.set(e,a),a}GL(n=>({...n,get:(e,t,r)=>X_(e,t)||n.get(e,t,r),has:(e,t)=>!!X_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(tM(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function tM(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Nv="@firebase/app",J_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii=new Ry("@firebase/app"),nM="@firebase/app-compat",rM="@firebase/analytics-compat",sM="@firebase/analytics",iM="@firebase/app-check-compat",oM="@firebase/app-check",aM="@firebase/auth",lM="@firebase/auth-compat",cM="@firebase/database",uM="@firebase/data-connect",dM="@firebase/database-compat",hM="@firebase/functions",fM="@firebase/functions-compat",mM="@firebase/installations",pM="@firebase/installations-compat",gM="@firebase/messaging",vM="@firebase/messaging-compat",yM="@firebase/performance",xM="@firebase/performance-compat",wM="@firebase/remote-config",_M="@firebase/remote-config-compat",EM="@firebase/storage",bM="@firebase/storage-compat",SM="@firebase/firestore",NM="@firebase/ai",TM="@firebase/firestore-compat",CM="firebase",IM="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="[DEFAULT]",jM={[Nv]:"fire-core",[nM]:"fire-core-compat",[sM]:"fire-analytics",[rM]:"fire-analytics-compat",[oM]:"fire-app-check",[iM]:"fire-app-check-compat",[aM]:"fire-auth",[lM]:"fire-auth-compat",[cM]:"fire-rtdb",[uM]:"fire-data-connect",[dM]:"fire-rtdb-compat",[hM]:"fire-fn",[fM]:"fire-fn-compat",[mM]:"fire-iid",[pM]:"fire-iid-compat",[gM]:"fire-fcm",[vM]:"fire-fcm-compat",[yM]:"fire-perf",[xM]:"fire-perf-compat",[wM]:"fire-rc",[_M]:"fire-rc-compat",[EM]:"fire-gcs",[bM]:"fire-gcs-compat",[SM]:"fire-fst",[TM]:"fire-fst-compat",[NM]:"fire-vertex","fire-js":"fire-js",[CM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=new Map,AM=new Map,Cv=new Map;function Z_(n,e){try{n.container.addComponent(e)}catch(t){Ii.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function La(n){const e=n.name;if(Cv.has(e))return Ii.debug(`There were multiple attempts to register component ${e}.`),!1;Cv.set(e,n);for(const t of Pf.values())Z_(t,n);for(const t of AM.values())Z_(t,n);return!0}function gm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function qr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jo=new ld("app","Firebase",PM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Uo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha=IM;function oN(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Tv,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw jo.create("bad-app-name",{appName:String(s)});if(t||(t=tN()),!t)throw jo.create("no-options");const a=Pf.get(s);if(a){if(Oa(t,a.options)&&Oa(r,a.config))return a;throw jo.create("duplicate-app",{appName:s})}const c=new FL(s);for(const h of Cv.values())c.addComponent(h);const u=new RM(t,r,c);return Pf.set(s,u),u}function aN(n=Tv){const e=Pf.get(n);if(!e&&n===Tv&&tN())return oN();if(!e)throw jo.create("no-app",{appName:n});return e}function Fs(n,e,t){var r;let s=(r=jM[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ii.warn(u.join(" "));return}La(new Uo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM="firebase-heartbeat-database",DM=1,qu="firebase-heartbeat-store";let Og=null;function lN(){return Og||(Og=XL(kM,DM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(qu)}catch(t){console.warn(t)}}}}).catch(n=>{throw jo.create("idb-open",{originalErrorMessage:n.message})})),Og}async function OM(n){try{const t=(await lN()).transaction(qu),r=await t.objectStore(qu).get(cN(n));return await t.done,r}catch(e){if(e instanceof Zs)Ii.warn(e.message);else{const t=jo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ii.warn(t.message)}}}async function eE(n,e){try{const r=(await lN()).transaction(qu,"readwrite");await r.objectStore(qu).put(e,cN(n)),await r.done}catch(t){if(t instanceof Zs)Ii.warn(t.message);else{const r=jo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ii.warn(r.message)}}}function cN(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=1024,MM=30;class FM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new UM(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=tE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>MM){const c=$M(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ii.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=tE(),{heartbeatsToSend:r,unsentEntries:s}=VM(this._heartbeatsCache.heartbeats),a=Af(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Ii.warn(t),""}}}function tE(){return new Date().toISOString().substring(0,10)}function VM(n,e=LM){const t=[];let r=n.slice();for(const s of n){const a=t.find(c=>c.agent===s.agent);if(a){if(a.dates.push(s.date),nE(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),nE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class UM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TL()?CL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await OM(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return eE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return eE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function nE(n){return Af(JSON.stringify({version:2,heartbeats:n})).length}function $M(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(n){La(new Uo("platform-logger",e=>new eM(e),"PRIVATE")),La(new Uo("heartbeat",e=>new FM(e),"PRIVATE")),Fs(Nv,J_,n),Fs(Nv,J_,"esm2017"),Fs("fire-js","")}zM("");var Gn=function(){return Gn=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Gn.apply(this,arguments)};function Nc(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function uN(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}function dN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BM=dN,hN=new ld("auth","Firebase",dN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf=new Ry("@firebase/auth");function qM(n,...e){Rf.logLevel<=ct.WARN&&Rf.warn(`Auth (${Ha}): ${n}`,...e)}function cf(n,...e){Rf.logLevel<=ct.ERROR&&Rf.error(`Auth (${Ha}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(n,...e){throw Dy(n,...e)}function Vs(n,...e){return Dy(n,...e)}function fN(n,e,t){const r=Object.assign(Object.assign({},BM()),{[e]:t});return new ld("auth","Firebase",r).create(e,{appName:n.name})}function Ao(n){return fN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dy(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return hN.create(n,...e)}function Qe(n,e,...t){if(!n)throw Dy(e,...t)}function Ei(n){const e="INTERNAL ASSERTION FAILED: "+n;throw cf(e),new Error(e)}function ji(n,e){n||Ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function WM(){return rE()==="http:"||rE()==="https:"}function rE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WM()||EL()||"connection"in navigator)?navigator.onLine:!0}function KM(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t){this.shortDelay=e,this.longDelay=t,ji(t>e,"Short delay should be less than long delay!"),this.isMobile=xL()||bL()}get(){return HM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(n,e){ji(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],YM=new ud(3e4,6e4);function Ka(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Go(n,e,t,r,s={}){return pN(n,s,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const u=cd(Object.assign({key:n.config.apiKey},c)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:h},a);return _L()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Wa(n.emulatorConfig.host)&&(m.credentials="include"),mN.fetch()(await gN(n,n.config.apiHost,t,u),m)})}async function pN(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},GM),e);try{const s=new JM(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw qh(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const u=a.ok?c.errorMessage:c.error.message,[h,m]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw qh(n,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw qh(n,"email-already-in-use",c);if(h==="USER_DISABLED")throw qh(n,"user-disabled",c);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw fN(n,g,m);gs(n,g)}}catch(s){if(s instanceof Zs)throw s;gs(n,"network-request-failed",{message:String(s)})}}async function vm(n,e,t,r,s={}){const a=await Go(n,e,t,r,s);return"mfaPendingCredential"in a&&gs(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function gN(n,e,t,r){const s=`${e}${t}?${r}`,a=n,c=a.config.emulator?Oy(n.config,s):`${n.config.apiScheme}://${s}`;return QM.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function XM(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Vs(this.auth,"network-request-failed")),YM.get())})}}function qh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Vs(n,e,r);return s.customData._tokenResponse=t,s}function sE(n){return n!==void 0&&n.enterprise!==void 0}class ZM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return XM(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function e4(n,e){return Go(n,"GET","/v2/recaptchaConfig",Ka(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t4(n,e){return Go(n,"POST","/v1/accounts:delete",e)}async function kf(n,e){return Go(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function n4(n,e=!1){const t=pn(n),r=await t.getIdToken(e),s=Ly(r);Qe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Au(Lg(s.auth_time)),issuedAtTime:Au(Lg(s.iat)),expirationTime:Au(Lg(s.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Lg(n){return Number(n)*1e3}function Ly(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return cf("JWT malformed, contained fewer than 3 sections"),null;try{const s=ZS(t);return s?JSON.parse(s):(cf("Failed to decode base64 JWT payload"),null)}catch(s){return cf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function iE(n){const e=Ly(n);return Qe(e,"internal-error"),Qe(typeof e.exp<"u","internal-error"),Qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Zs&&r4(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function r4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Au(this.lastLoginAt),this.creationTime=Au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Df(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Wu(n,kf(t,{idToken:r}));Qe(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?vN(a.providerUserInfo):[],u=o4(n.providerData,c),h=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(u!=null&&u.length),g=h?m:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new jv(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function i4(n){const e=pn(n);await Df(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function o4(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function vN(n){return n.map(e=>{var{providerId:t}=e,r=Nc(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a4(n,e){const t=await pN(n,{},async()=>{const r=cd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,c=await gN(n,s,"/v1/token",`key=${a}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return n.emulatorConfig&&Wa(n.emulatorConfig.host)&&(h.credentials="include"),mN.fetch()(c,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function l4(n,e){return Go(n,"POST","/v2/accounts:revokeToken",Ka(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qe(e.idToken,"internal-error"),Qe(typeof e.idToken<"u","internal-error"),Qe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Qe(e.length!==0,"internal-error");const t=iE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await a4(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,c=new Wl;return r&&(Qe(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(Qe(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),a&&(Qe(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wl,this.toJSON())}_performRefresh(){return Ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(n,e){Qe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ds{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=Nc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new s4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new jv(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Wu(this,this.stsTokenManager.getToken(this.auth,e));return Qe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return n4(this,e)}reload(){return i4(this)}_assign(e){this!==e&&(Qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ds(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Df(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qr(this.auth.app))return Promise.reject(Ao(this.auth));const e=await this.getIdToken();return await Wu(this,t4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,c,u,h,m,g;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(s=t.email)!==null&&s!==void 0?s:void 0,b=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,S=(c=t.photoURL)!==null&&c!==void 0?c:void 0,E=(u=t.tenantId)!==null&&u!==void 0?u:void 0,x=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,A=(m=t.createdAt)!==null&&m!==void 0?m:void 0,I=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:C,emailVerified:O,isAnonymous:V,providerData:B,stsTokenManager:P}=t;Qe(C&&P,e,"internal-error");const R=Wl.fromJSON(this.name,P);Qe(typeof C=="string",e,"internal-error"),uo(v,e.name),uo(y,e.name),Qe(typeof O=="boolean",e,"internal-error"),Qe(typeof V=="boolean",e,"internal-error"),uo(b,e.name),uo(S,e.name),uo(E,e.name),uo(x,e.name),uo(A,e.name),uo(I,e.name);const D=new ds({uid:C,auth:e,email:y,emailVerified:O,displayName:v,isAnonymous:V,photoURL:S,phoneNumber:b,tenantId:E,stsTokenManager:R,createdAt:A,lastLoginAt:I});return B&&Array.isArray(B)&&(D.providerData=B.map(k=>Object.assign({},k))),x&&(D._redirectEventId=x),D}static async _fromIdTokenResponse(e,t,r=!1){const s=new Wl;s.updateFromServerResponse(t);const a=new ds({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Df(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Qe(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?vN(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),u=new Wl;u.updateFromIdToken(r);const h=new ds({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:c}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new jv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,m),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE=new Map;function bi(n){ji(n instanceof Function,"Expected a class definition");let e=oE.get(n);return e?(ji(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,oE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yN.type="NONE";const aE=yN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(n,e,t){return`firebase:${n}:${e}:${t}`}class Hl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=uf(this.userKey,s.apiKey,a),this.fullPersistenceKey=uf("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await kf(this.auth,{idToken:e}).catch(()=>{});return t?ds._fromGetAccountInfoResponse(this.auth,t,e):null}return ds._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Hl(bi(aE),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||bi(aE);const c=uf(r,e.config.apiKey,e.name);let u=null;for(const m of t)try{const g=await m._get(c);if(g){let v;if(typeof g=="string"){const y=await kf(e,{idToken:g}).catch(()=>{});if(!y)break;v=await ds._fromGetAccountInfoResponse(e,y,g)}else v=ds._fromJSON(e,g);m!==a&&(u=v),a=m;break}}catch{}const h=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new Hl(a,e,r):(a=h[0],u&&await a._set(c,u.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(c)}catch{}})),new Hl(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(EN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(SN(e))return"Blackberry";if(NN(e))return"Webos";if(wN(e))return"Safari";if((e.includes("chrome/")||_N(e))&&!e.includes("edge/"))return"Chrome";if(bN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function xN(n=Yn()){return/firefox\//i.test(n)}function wN(n=Yn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _N(n=Yn()){return/crios\//i.test(n)}function EN(n=Yn()){return/iemobile/i.test(n)}function bN(n=Yn()){return/android/i.test(n)}function SN(n=Yn()){return/blackberry/i.test(n)}function NN(n=Yn()){return/webos/i.test(n)}function My(n=Yn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function c4(n=Yn()){var e;return My(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function u4(){return SL()&&document.documentMode===10}function TN(n=Yn()){return My(n)||bN(n)||NN(n)||SN(n)||/windows phone/i.test(n)||EN(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(n,e=[]){let t;switch(n){case"Browser":t=lE(Yn());break;case"Worker":t=`${lE(Yn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ha}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,u)=>{try{const h=e(a);c(h)}catch(h){u(h)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h4(n,e={}){return Go(n,"GET","/v2/passwordPolicy",Ka(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=6;class m4{constructor(e){var t,r,s,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:f4,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,c,u;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(s=h.containsLowercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsUppercaseLetter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(c=h.containsNumericCharacter)!==null&&c!==void 0?c:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cE(this),this.idTokenSubscription=new cE(this),this.beforeStateQueue=new d4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bi(t)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await Hl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await kf(this,{idToken:e}),r=await ds._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(qr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=s==null?void 0:s._redirectEventId,h=await this.tryRedirectSignIn(e);(!c||c===u)&&(h!=null&&h.user)&&(s=h.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Df(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qr(this.app))return Promise.reject(Ao(this));const t=e?pn(e):null;return t&&Qe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qr(this.app)?Promise.reject(Ao(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qr(this.app)?Promise.reject(Ao(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await h4(this),t=new m4(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ld("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await l4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&bi(e)||this._popupRedirectResolver;Qe(t,this,"argument-error"),this.redirectPersistenceManager=await Hl.create(this,[bi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qe(u,this,"internal-error"),u.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,s);return()=>{c=!0,h()}}else{const h=e.addObserver(t);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(qr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&qM(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Tc(n){return pn(n)}class cE{constructor(e){this.auth=e,this.observer=null,this.addObserver=RL(t=>this.observer=t)}get next(){return Qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ym={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function g4(n){ym=n}function IN(n){return ym.loadJS(n)}function v4(){return ym.recaptchaEnterpriseScript}function y4(){return ym.gapiScript}function x4(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class w4{constructor(){this.enterprise=new _4}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class _4{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const E4="recaptcha-enterprise",jN="NO_RECAPTCHA";class b4{constructor(e){this.type=E4,this.auth=Tc(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,u)=>{e4(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const m=new ZM(h);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,c(m.siteKey)}}).catch(h=>{u(h)})})}function s(a,c,u){const h=window.grecaptcha;sE(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(m=>{c(m)}).catch(()=>{c(jN)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new w4().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(u=>{if(!t&&sE(window.grecaptcha))s(u,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=v4();h.length!==0&&(h+=u),IN(h).then(()=>{s(u,a,c)}).catch(m=>{c(m)})}}).catch(u=>{c(u)})})}}async function uE(n,e,t,r=!1,s=!1){const a=new b4(n);let c;if(s)c=jN;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,m=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function dE(n,e,t,r,s){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await uE(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await uE(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(n,e){const t=gm(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(Oa(a,e??{}))return s;gs(s,"already-initialized")}return t.initialize({options:e})}function N4(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(bi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function T4(n,e,t){const r=Tc(n);Qe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=AN(e),{host:c,port:u}=C4(e),h=u===null?"":`:${u}`,m={url:`${a}//${c}${h}/`},g=Object.freeze({host:c,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Qe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Qe(Oa(m,r.config.emulator)&&Oa(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Wa(c)?(Py(`${a}//${c}${h}`),rN("Auth",!0)):I4()}function AN(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function C4(n){const e=AN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:hE(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:hE(c)}}}function hE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function I4(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ei("not implemented")}_getIdTokenResponse(e){return Ei("not implemented")}_linkToIdToken(e,t){return Ei("not implemented")}_getReauthenticationResolver(e){return Ei("not implemented")}}async function j4(n,e){return Go(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A4(n,e){return vm(n,"POST","/v1/accounts:signInWithPassword",Ka(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P4(n,e){return vm(n,"POST","/v1/accounts:signInWithEmailLink",Ka(n,e))}async function R4(n,e){return vm(n,"POST","/v1/accounts:signInWithEmailLink",Ka(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu extends Fy{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Hu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Hu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dE(e,t,"signInWithPassword",A4);case"emailLink":return P4(e,{email:this._email,oobCode:this._password});default:gs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dE(e,r,"signUpPassword",j4);case"emailLink":return R4(e,{idToken:t,email:this._email,oobCode:this._password});default:gs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kl(n,e){return vm(n,"POST","/v1/accounts:signInWithIdp",Ka(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4="http://localhost";class Ma extends Fy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ma(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=Nc(t,["providerId","signInMethod"]);if(!r||!s)return null;const c=new Ma(r,s);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Kl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Kl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Kl(e,t)}buildRequest(){const e={requestUri:k4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=cd(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function O4(n){const e=vu(yu(n)).link,t=e?vu(yu(e)).deep_link_id:null,r=vu(yu(n)).deep_link_id;return(r?vu(yu(r)).link:null)||r||t||e||n}class Vy{constructor(e){var t,r,s,a,c,u;const h=vu(yu(e)),m=(t=h.apiKey)!==null&&t!==void 0?t:null,g=(r=h.oobCode)!==null&&r!==void 0?r:null,v=D4((s=h.mode)!==null&&s!==void 0?s:null);Qe(m&&g&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=g,this.continueUrl=(a=h.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=h.lang)!==null&&c!==void 0?c:null,this.tenantId=(u=h.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=O4(e);try{return new Vy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(){this.providerId=Cc.PROVIDER_ID}static credential(e,t){return Hu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Vy.parseLink(t);return Qe(r,"argument-error"),Hu._fromEmailAndCode(e,r.code,r.tenantId)}}Cc.PROVIDER_ID="password";Cc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Cc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd extends PN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo extends dd{constructor(){super("facebook.com")}static credential(e){return Ma._fromParams({providerId:mo.PROVIDER_ID,signInMethod:mo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mo.credentialFromTaggedObject(e)}static credentialFromError(e){return mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mo.credential(e.oauthAccessToken)}catch{return null}}}mo.FACEBOOK_SIGN_IN_METHOD="facebook.com";mo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po extends dd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ma._fromParams({providerId:po.PROVIDER_ID,signInMethod:po.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return po.credentialFromTaggedObject(e)}static credentialFromError(e){return po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return po.credential(t,r)}catch{return null}}}po.GOOGLE_SIGN_IN_METHOD="google.com";po.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go extends dd{constructor(){super("github.com")}static credential(e){return Ma._fromParams({providerId:go.PROVIDER_ID,signInMethod:go.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return go.credentialFromTaggedObject(e)}static credentialFromError(e){return go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return go.credential(e.oauthAccessToken)}catch{return null}}}go.GITHUB_SIGN_IN_METHOD="github.com";go.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo extends dd{constructor(){super("twitter.com")}static credential(e,t){return Ma._fromParams({providerId:vo.PROVIDER_ID,signInMethod:vo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vo.credentialFromTaggedObject(e)}static credentialFromError(e){return vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return vo.credential(t,r)}catch{return null}}}vo.TWITTER_SIGN_IN_METHOD="twitter.com";vo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await ds._fromIdTokenResponse(e,r,s),c=fE(r);return new cc({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=fE(r);return new cc({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function fE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of extends Zs{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Of.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Of(e,t,r,s)}}function RN(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Of._fromErrorAndOperation(n,a,e,r):a})}async function L4(n,e,t=!1){const r=await Wu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return cc._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M4(n,e,t=!1){const{auth:r}=n;if(qr(r.app))return Promise.reject(Ao(r));const s="reauthenticate";try{const a=await Wu(n,RN(r,s,e,n),t);Qe(a.idToken,r,"internal-error");const c=Ly(a.idToken);Qe(c,r,"internal-error");const{sub:u}=c;return Qe(n.uid===u,r,"user-mismatch"),cc._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&gs(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(n,e,t=!1){if(qr(n.app))return Promise.reject(Ao(n));const r="signIn",s=await RN(n,r,e),a=await cc._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}async function F4(n,e){return kN(Tc(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V4(n){const e=Tc(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function U4(n,e,t){return qr(n.app)?Promise.reject(Ao(n)):F4(pn(n),Cc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&V4(n),r})}function $4(n,e,t,r){return pn(n).onIdTokenChanged(e,t,r)}function z4(n,e,t){return pn(n).beforeAuthStateChanged(e,t)}function B4(n,e,t,r){return pn(n).onAuthStateChanged(e,t,r)}function q4(n){return pn(n).signOut()}const Lf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Lf,"1"),this.storage.removeItem(Lf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4=1e3,H4=10;class ON extends DN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);u4()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,H4):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},W4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ON.type="LOCAL";const K4=ON;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN extends DN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}LN.type="SESSION";const MN=LN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new xm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(c).map(async m=>m(t.origin,a)),h=await G4(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,c;return new Promise((u,h)=>{const m=Uy("",20);s.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(v){const y=v;if(y.data.eventId===m)switch(y.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(y.data.response);break;default:clearTimeout(g),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(){return window}function Y4(n){Us().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(){return typeof Us().WorkerGlobalScope<"u"&&typeof Us().importScripts=="function"}async function X4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function J4(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Z4(){return FN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="firebaseLocalStorageDb",eF=1,Mf="firebaseLocalStorage",UN="fbase_key";class hd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function wm(n,e){return n.transaction([Mf],e?"readwrite":"readonly").objectStore(Mf)}function tF(){const n=indexedDB.deleteDatabase(VN);return new hd(n).toPromise()}function Av(){const n=indexedDB.open(VN,eF);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Mf,{keyPath:UN})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Mf)?e(r):(r.close(),await tF(),e(await Av()))})})}async function mE(n,e,t){const r=wm(n,!0).put({[UN]:e,value:t});return new hd(r).toPromise()}async function nF(n,e){const t=wm(n,!1).get(e),r=await new hd(t).toPromise();return r===void 0?null:r.value}function pE(n,e){const t=wm(n,!0).delete(e);return new hd(t).toPromise()}const rF=800,sF=3;class $N{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Av(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>sF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xm._getInstance(Z4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await X4(),!this.activeServiceWorker)return;this.sender=new Q4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||J4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Av();return await mE(e,Lf,"1"),await pE(e,Lf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>mE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>nF(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>pE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=wm(s,!1).getAll();return new hd(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$N.type="LOCAL";const iF=$N;new ud(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(n,e){return e?bi(e):(Qe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y extends Fy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Kl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Kl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function aF(n){return kN(n.auth,new $y(n),n.bypassAuthState)}function lF(n){const{auth:e,user:t}=n;return Qe(t,e,"internal-error"),M4(t,new $y(n),n.bypassAuthState)}async function cF(n){const{auth:e,user:t}=n;return Qe(t,e,"internal-error"),L4(t,new $y(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:c,type:u}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aF;case"linkViaPopup":case"linkViaRedirect":return cF;case"reauthViaPopup":case"reauthViaRedirect":return lF;default:gs(this.auth,"internal-error")}}resolve(e){ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF=new ud(2e3,1e4);class zl extends zN{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,zl.currentPopupAction&&zl.currentPopupAction.cancel(),zl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qe(e,this.auth,"internal-error"),e}async onExecution(){ji(this.filter.length===1,"Popup operations only handle one event");const e=Uy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Vs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Vs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uF.get())};e()}}zl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF="pendingRedirect",df=new Map;class hF extends zN{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=df.get(this.auth._key());if(!e){try{const r=await fF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}df.set(this.auth._key(),e)}return this.bypassAuthState||df.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fF(n,e){const t=gF(e),r=pF(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function mF(n,e){df.set(n._key(),e)}function pF(n){return bi(n._redirectPersistence)}function gF(n){return uf(dF,n.config.apiKey,n.name)}async function vF(n,e,t=!1){if(qr(n.app))return Promise.reject(Ao(n));const r=Tc(n),s=oF(r,e),c=await new hF(r,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yF=10*60*1e3;class xF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wF(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!BN(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Vs(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yF&&this.cachedEventUids.clear(),this.cachedEventUids.has(gE(e))}saveEventToCache(e){this.cachedEventUids.add(gE(e)),this.lastProcessedEventTime=Date.now()}}function gE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function BN({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wF(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BN(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _F(n,e={}){return Go(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bF=/^https?/;async function SF(n){if(n.config.emulator)return;const{authorizedDomains:e}=await _F(n);for(const t of e)try{if(NF(t))return}catch{}gs(n,"unauthorized-domain")}function NF(n){const e=Iv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!bF.test(t))return!1;if(EF.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF=new ud(3e4,6e4);function vE(){const n=Us().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function CF(n){return new Promise((e,t)=>{var r,s,a;function c(){vE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vE(),t(Vs(n,"network-request-failed"))},timeout:TF.get()})}if(!((s=(r=Us().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Us().gapi)===null||a===void 0)&&a.load)c();else{const u=x4("iframefcb");return Us()[u]=()=>{gapi.load?c():t(Vs(n,"network-request-failed"))},IN(`${y4()}?onload=${u}`).catch(h=>t(h))}}).catch(e=>{throw hf=null,e})}let hf=null;function IF(n){return hf=hf||CF(n),hf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF=new ud(5e3,15e3),AF="__/auth/iframe",PF="emulator/auth/iframe",RF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DF(n){const e=n.config;Qe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Oy(e,PF):`https://${n.config.authDomain}/${AF}`,r={apiKey:e.apiKey,appName:n.name,v:Ha},s=kF.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${cd(r).slice(1)}`}async function OF(n){const e=await IF(n),t=Us().gapi;return Qe(t,n,"internal-error"),e.open({where:document.body,url:DF(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RF,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const c=Vs(n,"network-request-failed"),u=Us().setTimeout(()=>{a(c)},jF.get());function h(){Us().clearTimeout(u),s(r)}r.ping(h).then(h,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MF=500,FF=600,VF="_blank",UF="http://localhost";class yE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $F(n,e,t,r=MF,s=FF){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h=Object.assign(Object.assign({},LF),{width:r.toString(),height:s.toString(),top:a,left:c}),m=Yn().toLowerCase();t&&(u=_N(m)?VF:t),xN(m)&&(e=e||UF,h.scrollbars="yes");const g=Object.entries(h).reduce((y,[b,S])=>`${y}${b}=${S},`,"");if(c4(m)&&u!=="_self")return zF(e||"",u),new yE(null);const v=window.open(e||"",u,g);Qe(v,n,"popup-blocked");try{v.focus()}catch{}return new yE(v)}function zF(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF="__/auth/handler",qF="emulator/auth/handler",WF=encodeURIComponent("fac");async function xE(n,e,t,r,s,a){Qe(n.config.authDomain,n,"auth-domain-config-required"),Qe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ha,eventId:s};if(e instanceof PN){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",PL(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))c[g]=v}if(e instanceof dd){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(c.scopes=g.join(","))}n.tenantId&&(c.tid=n.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await n._getAppCheckToken(),m=h?`#${WF}=${encodeURIComponent(h)}`:"";return`${HF(n)}?${cd(u).slice(1)}${m}`}function HF({config:n}){return n.emulator?Oy(n,qF):`https://${n.authDomain}/${BF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="webStorageSupport";class KF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=MN,this._completeRedirectFn=vF,this._overrideRedirectResult=mF}async _openPopup(e,t,r,s){var a;ji((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await xE(e,t,r,Iv(),s);return $F(e,c,Uy())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await xE(e,t,r,Iv(),s);return Y4(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(ji(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await OF(e),r=new xF(e);return t.register("authEvent",s=>(Qe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mg,{type:Mg},s=>{var a;const c=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Mg];c!==void 0&&t(!!c),gs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=SF(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return TN()||wN()||My()}}const GF=KF;var wE="@firebase/auth",_E="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XF(n){La(new Uo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;Qe(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CN(n)},m=new p4(r,s,a,h);return N4(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),La(new Uo("auth-internal",e=>{const t=Tc(e.getProvider("auth").getImmediate());return(r=>new QF(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fs(wE,_E,YF(n)),Fs(wE,_E,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF=5*60,ZF=nN("authIdTokenMaxAge")||JF;let EE=null;const eV=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>ZF)return;const s=t==null?void 0:t.token;EE!==s&&(EE=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function tV(n=aN()){const e=gm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=S4(n,{popupRedirectResolver:GF,persistence:[iF,K4,MN]}),r=nN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=eV(a.toString());z4(t,c,()=>c(t.currentUser)),$4(t,u=>c(u))}}const s=eN("auth");return s&&T4(t,`http://${s}`),t}function nV(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}g4({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=Vs("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",nV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XF("Browser");var rV="firebase",sV="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fs(rV,sV,"app");var bE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Po,qN;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,R){function D(){}D.prototype=R.prototype,P.D=R.prototype,P.prototype=new D,P.prototype.constructor=P,P.C=function(k,$,z){for(var M=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)M[oe-2]=arguments[oe];return R.prototype[$].apply(k,M)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,R,D){D||(D=0);var k=Array(16);if(typeof R=="string")for(var $=0;16>$;++$)k[$]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for($=0;16>$;++$)k[$]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=P.g[0],D=P.g[1],$=P.g[2];var z=P.g[3],M=R+(z^D&($^z))+k[0]+3614090360&4294967295;R=D+(M<<7&4294967295|M>>>25),M=z+($^R&(D^$))+k[1]+3905402710&4294967295,z=R+(M<<12&4294967295|M>>>20),M=$+(D^z&(R^D))+k[2]+606105819&4294967295,$=z+(M<<17&4294967295|M>>>15),M=D+(R^$&(z^R))+k[3]+3250441966&4294967295,D=$+(M<<22&4294967295|M>>>10),M=R+(z^D&($^z))+k[4]+4118548399&4294967295,R=D+(M<<7&4294967295|M>>>25),M=z+($^R&(D^$))+k[5]+1200080426&4294967295,z=R+(M<<12&4294967295|M>>>20),M=$+(D^z&(R^D))+k[6]+2821735955&4294967295,$=z+(M<<17&4294967295|M>>>15),M=D+(R^$&(z^R))+k[7]+4249261313&4294967295,D=$+(M<<22&4294967295|M>>>10),M=R+(z^D&($^z))+k[8]+1770035416&4294967295,R=D+(M<<7&4294967295|M>>>25),M=z+($^R&(D^$))+k[9]+2336552879&4294967295,z=R+(M<<12&4294967295|M>>>20),M=$+(D^z&(R^D))+k[10]+4294925233&4294967295,$=z+(M<<17&4294967295|M>>>15),M=D+(R^$&(z^R))+k[11]+2304563134&4294967295,D=$+(M<<22&4294967295|M>>>10),M=R+(z^D&($^z))+k[12]+1804603682&4294967295,R=D+(M<<7&4294967295|M>>>25),M=z+($^R&(D^$))+k[13]+4254626195&4294967295,z=R+(M<<12&4294967295|M>>>20),M=$+(D^z&(R^D))+k[14]+2792965006&4294967295,$=z+(M<<17&4294967295|M>>>15),M=D+(R^$&(z^R))+k[15]+1236535329&4294967295,D=$+(M<<22&4294967295|M>>>10),M=R+($^z&(D^$))+k[1]+4129170786&4294967295,R=D+(M<<5&4294967295|M>>>27),M=z+(D^$&(R^D))+k[6]+3225465664&4294967295,z=R+(M<<9&4294967295|M>>>23),M=$+(R^D&(z^R))+k[11]+643717713&4294967295,$=z+(M<<14&4294967295|M>>>18),M=D+(z^R&($^z))+k[0]+3921069994&4294967295,D=$+(M<<20&4294967295|M>>>12),M=R+($^z&(D^$))+k[5]+3593408605&4294967295,R=D+(M<<5&4294967295|M>>>27),M=z+(D^$&(R^D))+k[10]+38016083&4294967295,z=R+(M<<9&4294967295|M>>>23),M=$+(R^D&(z^R))+k[15]+3634488961&4294967295,$=z+(M<<14&4294967295|M>>>18),M=D+(z^R&($^z))+k[4]+3889429448&4294967295,D=$+(M<<20&4294967295|M>>>12),M=R+($^z&(D^$))+k[9]+568446438&4294967295,R=D+(M<<5&4294967295|M>>>27),M=z+(D^$&(R^D))+k[14]+3275163606&4294967295,z=R+(M<<9&4294967295|M>>>23),M=$+(R^D&(z^R))+k[3]+4107603335&4294967295,$=z+(M<<14&4294967295|M>>>18),M=D+(z^R&($^z))+k[8]+1163531501&4294967295,D=$+(M<<20&4294967295|M>>>12),M=R+($^z&(D^$))+k[13]+2850285829&4294967295,R=D+(M<<5&4294967295|M>>>27),M=z+(D^$&(R^D))+k[2]+4243563512&4294967295,z=R+(M<<9&4294967295|M>>>23),M=$+(R^D&(z^R))+k[7]+1735328473&4294967295,$=z+(M<<14&4294967295|M>>>18),M=D+(z^R&($^z))+k[12]+2368359562&4294967295,D=$+(M<<20&4294967295|M>>>12),M=R+(D^$^z)+k[5]+4294588738&4294967295,R=D+(M<<4&4294967295|M>>>28),M=z+(R^D^$)+k[8]+2272392833&4294967295,z=R+(M<<11&4294967295|M>>>21),M=$+(z^R^D)+k[11]+1839030562&4294967295,$=z+(M<<16&4294967295|M>>>16),M=D+($^z^R)+k[14]+4259657740&4294967295,D=$+(M<<23&4294967295|M>>>9),M=R+(D^$^z)+k[1]+2763975236&4294967295,R=D+(M<<4&4294967295|M>>>28),M=z+(R^D^$)+k[4]+1272893353&4294967295,z=R+(M<<11&4294967295|M>>>21),M=$+(z^R^D)+k[7]+4139469664&4294967295,$=z+(M<<16&4294967295|M>>>16),M=D+($^z^R)+k[10]+3200236656&4294967295,D=$+(M<<23&4294967295|M>>>9),M=R+(D^$^z)+k[13]+681279174&4294967295,R=D+(M<<4&4294967295|M>>>28),M=z+(R^D^$)+k[0]+3936430074&4294967295,z=R+(M<<11&4294967295|M>>>21),M=$+(z^R^D)+k[3]+3572445317&4294967295,$=z+(M<<16&4294967295|M>>>16),M=D+($^z^R)+k[6]+76029189&4294967295,D=$+(M<<23&4294967295|M>>>9),M=R+(D^$^z)+k[9]+3654602809&4294967295,R=D+(M<<4&4294967295|M>>>28),M=z+(R^D^$)+k[12]+3873151461&4294967295,z=R+(M<<11&4294967295|M>>>21),M=$+(z^R^D)+k[15]+530742520&4294967295,$=z+(M<<16&4294967295|M>>>16),M=D+($^z^R)+k[2]+3299628645&4294967295,D=$+(M<<23&4294967295|M>>>9),M=R+($^(D|~z))+k[0]+4096336452&4294967295,R=D+(M<<6&4294967295|M>>>26),M=z+(D^(R|~$))+k[7]+1126891415&4294967295,z=R+(M<<10&4294967295|M>>>22),M=$+(R^(z|~D))+k[14]+2878612391&4294967295,$=z+(M<<15&4294967295|M>>>17),M=D+(z^($|~R))+k[5]+4237533241&4294967295,D=$+(M<<21&4294967295|M>>>11),M=R+($^(D|~z))+k[12]+1700485571&4294967295,R=D+(M<<6&4294967295|M>>>26),M=z+(D^(R|~$))+k[3]+2399980690&4294967295,z=R+(M<<10&4294967295|M>>>22),M=$+(R^(z|~D))+k[10]+4293915773&4294967295,$=z+(M<<15&4294967295|M>>>17),M=D+(z^($|~R))+k[1]+2240044497&4294967295,D=$+(M<<21&4294967295|M>>>11),M=R+($^(D|~z))+k[8]+1873313359&4294967295,R=D+(M<<6&4294967295|M>>>26),M=z+(D^(R|~$))+k[15]+4264355552&4294967295,z=R+(M<<10&4294967295|M>>>22),M=$+(R^(z|~D))+k[6]+2734768916&4294967295,$=z+(M<<15&4294967295|M>>>17),M=D+(z^($|~R))+k[13]+1309151649&4294967295,D=$+(M<<21&4294967295|M>>>11),M=R+($^(D|~z))+k[4]+4149444226&4294967295,R=D+(M<<6&4294967295|M>>>26),M=z+(D^(R|~$))+k[11]+3174756917&4294967295,z=R+(M<<10&4294967295|M>>>22),M=$+(R^(z|~D))+k[2]+718787259&4294967295,$=z+(M<<15&4294967295|M>>>17),M=D+(z^($|~R))+k[9]+3951481745&4294967295,P.g[0]=P.g[0]+R&4294967295,P.g[1]=P.g[1]+($+(M<<21&4294967295|M>>>11))&4294967295,P.g[2]=P.g[2]+$&4294967295,P.g[3]=P.g[3]+z&4294967295}r.prototype.u=function(P,R){R===void 0&&(R=P.length);for(var D=R-this.blockSize,k=this.B,$=this.h,z=0;z<R;){if($==0)for(;z<=D;)s(this,P,z),z+=this.blockSize;if(typeof P=="string"){for(;z<R;)if(k[$++]=P.charCodeAt(z++),$==this.blockSize){s(this,k),$=0;break}}else for(;z<R;)if(k[$++]=P[z++],$==this.blockSize){s(this,k),$=0;break}}this.h=$,this.o+=R},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var R=1;R<P.length-8;++R)P[R]=0;var D=8*this.o;for(R=P.length-8;R<P.length;++R)P[R]=D&255,D/=256;for(this.u(P),P=Array(16),R=D=0;4>R;++R)for(var k=0;32>k;k+=8)P[D++]=this.g[R]>>>k&255;return P};function a(P,R){var D=u;return Object.prototype.hasOwnProperty.call(D,P)?D[P]:D[P]=R(P)}function c(P,R){this.h=R;for(var D=[],k=!0,$=P.length-1;0<=$;$--){var z=P[$]|0;k&&z==R||(D[$]=z,k=!1)}this.g=D}var u={};function h(P){return-128<=P&&128>P?a(P,function(R){return new c([R|0],0>R?-1:0)}):new c([P|0],0>P?-1:0)}function m(P){if(isNaN(P)||!isFinite(P))return v;if(0>P)return x(m(-P));for(var R=[],D=1,k=0;P>=D;k++)R[k]=P/D|0,D*=4294967296;return new c(R,0)}function g(P,R){if(P.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(P.charAt(0)=="-")return x(g(P.substring(1),R));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=m(Math.pow(R,8)),k=v,$=0;$<P.length;$+=8){var z=Math.min(8,P.length-$),M=parseInt(P.substring($,$+z),R);8>z?(z=m(Math.pow(R,z)),k=k.j(z).add(m(M))):(k=k.j(D),k=k.add(m(M)))}return k}var v=h(0),y=h(1),b=h(16777216);n=c.prototype,n.m=function(){if(E(this))return-x(this).m();for(var P=0,R=1,D=0;D<this.g.length;D++){var k=this.i(D);P+=(0<=k?k:4294967296+k)*R,R*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(S(this))return"0";if(E(this))return"-"+x(this).toString(P);for(var R=m(Math.pow(P,6)),D=this,k="";;){var $=O(D,R).g;D=A(D,$.j(R));var z=((0<D.g.length?D.g[0]:D.h)>>>0).toString(P);if(D=$,S(D))return z+k;for(;6>z.length;)z="0"+z;k=z+k}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function S(P){if(P.h!=0)return!1;for(var R=0;R<P.g.length;R++)if(P.g[R]!=0)return!1;return!0}function E(P){return P.h==-1}n.l=function(P){return P=A(this,P),E(P)?-1:S(P)?0:1};function x(P){for(var R=P.g.length,D=[],k=0;k<R;k++)D[k]=~P.g[k];return new c(D,~P.h).add(y)}n.abs=function(){return E(this)?x(this):this},n.add=function(P){for(var R=Math.max(this.g.length,P.g.length),D=[],k=0,$=0;$<=R;$++){var z=k+(this.i($)&65535)+(P.i($)&65535),M=(z>>>16)+(this.i($)>>>16)+(P.i($)>>>16);k=M>>>16,z&=65535,M&=65535,D[$]=M<<16|z}return new c(D,D[D.length-1]&-2147483648?-1:0)};function A(P,R){return P.add(x(R))}n.j=function(P){if(S(this)||S(P))return v;if(E(this))return E(P)?x(this).j(x(P)):x(x(this).j(P));if(E(P))return x(this.j(x(P)));if(0>this.l(b)&&0>P.l(b))return m(this.m()*P.m());for(var R=this.g.length+P.g.length,D=[],k=0;k<2*R;k++)D[k]=0;for(k=0;k<this.g.length;k++)for(var $=0;$<P.g.length;$++){var z=this.i(k)>>>16,M=this.i(k)&65535,oe=P.i($)>>>16,H=P.i($)&65535;D[2*k+2*$]+=M*H,I(D,2*k+2*$),D[2*k+2*$+1]+=z*H,I(D,2*k+2*$+1),D[2*k+2*$+1]+=M*oe,I(D,2*k+2*$+1),D[2*k+2*$+2]+=z*oe,I(D,2*k+2*$+2)}for(k=0;k<R;k++)D[k]=D[2*k+1]<<16|D[2*k];for(k=R;k<2*R;k++)D[k]=0;return new c(D,0)};function I(P,R){for(;(P[R]&65535)!=P[R];)P[R+1]+=P[R]>>>16,P[R]&=65535,R++}function C(P,R){this.g=P,this.h=R}function O(P,R){if(S(R))throw Error("division by zero");if(S(P))return new C(v,v);if(E(P))return R=O(x(P),R),new C(x(R.g),x(R.h));if(E(R))return R=O(P,x(R)),new C(x(R.g),R.h);if(30<P.g.length){if(E(P)||E(R))throw Error("slowDivide_ only works with positive integers.");for(var D=y,k=R;0>=k.l(P);)D=V(D),k=V(k);var $=B(D,1),z=B(k,1);for(k=B(k,2),D=B(D,2);!S(k);){var M=z.add(k);0>=M.l(P)&&($=$.add(D),z=M),k=B(k,1),D=B(D,1)}return R=A(P,$.j(R)),new C($,R)}for($=v;0<=P.l(R);){for(D=Math.max(1,Math.floor(P.m()/R.m())),k=Math.ceil(Math.log(D)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),z=m(D),M=z.j(R);E(M)||0<M.l(P);)D-=k,z=m(D),M=z.j(R);S(z)&&(z=y),$=$.add(z),P=A(P,M)}return new C($,P)}n.A=function(P){return O(this,P).h},n.and=function(P){for(var R=Math.max(this.g.length,P.g.length),D=[],k=0;k<R;k++)D[k]=this.i(k)&P.i(k);return new c(D,this.h&P.h)},n.or=function(P){for(var R=Math.max(this.g.length,P.g.length),D=[],k=0;k<R;k++)D[k]=this.i(k)|P.i(k);return new c(D,this.h|P.h)},n.xor=function(P){for(var R=Math.max(this.g.length,P.g.length),D=[],k=0;k<R;k++)D[k]=this.i(k)^P.i(k);return new c(D,this.h^P.h)};function V(P){for(var R=P.g.length+1,D=[],k=0;k<R;k++)D[k]=P.i(k)<<1|P.i(k-1)>>>31;return new c(D,P.h)}function B(P,R){var D=R>>5;R%=32;for(var k=P.g.length-D,$=[],z=0;z<k;z++)$[z]=0<R?P.i(z+D)>>>R|P.i(z+D+1)<<32-R:P.i(z+D);return new c($,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qN=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=g,Po=c}).apply(typeof bE<"u"?bE:typeof self<"u"?self:typeof window<"u"?window:{});var Wh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WN,xu,HN,ff,Pv,KN,GN,QN;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,N,j){return f==Array.prototype||f==Object.prototype||(f[N]=j.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wh=="object"&&Wh];for(var N=0;N<f.length;++N){var j=f[N];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var r=t(this);function s(f,N){if(N)e:{var j=r;f=f.split(".");for(var F=0;F<f.length-1;F++){var ee=f[F];if(!(ee in j))break e;j=j[ee]}f=f[f.length-1],F=j[f],N=N(F),N!=F&&N!=null&&e(j,f,{configurable:!0,writable:!0,value:N})}}function a(f,N){f instanceof String&&(f+="");var j=0,F=!1,ee={next:function(){if(!F&&j<f.length){var ae=j++;return{value:N(ae,f[ae]),done:!1}}return F=!0,{done:!0,value:void 0}}};return ee[Symbol.iterator]=function(){return ee},ee}s("Array.prototype.values",function(f){return f||function(){return a(this,function(N,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function h(f){var N=typeof f;return N=N!="object"?N:f?Array.isArray(f)?"array":N:"null",N=="array"||N=="object"&&typeof f.length=="number"}function m(f){var N=typeof f;return N=="object"&&f!=null||N=="function"}function g(f,N,j){return f.call.apply(f.bind,arguments)}function v(f,N,j){if(!f)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var ee=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ee,F),f.apply(N,ee)}}return function(){return f.apply(N,arguments)}}function y(f,N,j){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:v,y.apply(null,arguments)}function b(f,N){var j=Array.prototype.slice.call(arguments,1);return function(){var F=j.slice();return F.push.apply(F,arguments),f.apply(this,F)}}function S(f,N){function j(){}j.prototype=N.prototype,f.aa=N.prototype,f.prototype=new j,f.prototype.constructor=f,f.Qb=function(F,ee,ae){for(var Se=Array(arguments.length-2),It=2;It<arguments.length;It++)Se[It-2]=arguments[It];return N.prototype[ee].apply(F,Se)}}function E(f){const N=f.length;if(0<N){const j=Array(N);for(let F=0;F<N;F++)j[F]=f[F];return j}return[]}function x(f,N){for(let j=1;j<arguments.length;j++){const F=arguments[j];if(h(F)){const ee=f.length||0,ae=F.length||0;f.length=ee+ae;for(let Se=0;Se<ae;Se++)f[ee+Se]=F[Se]}else f.push(F)}}class A{constructor(N,j){this.i=N,this.j=j,this.h=0,this.g=null}get(){let N;return 0<this.h?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function I(f){return/^[\s\xa0]*$/.test(f)}function C(){var f=u.navigator;return f&&(f=f.userAgent)?f:""}function O(f){return O[" "](f),f}O[" "]=function(){};var V=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function B(f,N,j){for(const F in f)N.call(j,f[F],F,f)}function P(f,N){for(const j in f)N.call(void 0,f[j],j,f)}function R(f){const N={};for(const j in f)N[j]=f[j];return N}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(f,N){let j,F;for(let ee=1;ee<arguments.length;ee++){F=arguments[ee];for(j in F)f[j]=F[j];for(let ae=0;ae<D.length;ae++)j=D[ae],Object.prototype.hasOwnProperty.call(F,j)&&(f[j]=F[j])}}function $(f){var N=1;f=f.split(":");const j=[];for(;0<N&&f.length;)j.push(f.shift()),N--;return f.length&&j.push(f.join(":")),j}function z(f){u.setTimeout(()=>{throw f},0)}function M(){var f=Q;let N=null;return f.g&&(N=f.g,f.g=f.g.next,f.g||(f.h=null),N.next=null),N}class oe{constructor(){this.h=this.g=null}add(N,j){const F=H.get();F.set(N,j),this.h?this.h.next=F:this.g=F,this.h=F}}var H=new A(()=>new J,f=>f.reset());class J{constructor(){this.next=this.g=this.h=null}set(N,j){this.h=N,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,q=!1,Q=new oe,Z=()=>{const f=u.Promise.resolve(void 0);Y=()=>{f.then(U)}};var U=()=>{for(var f;f=M();){try{f.h.call(f.g)}catch(j){z(j)}var N=H;N.j(f),100>N.h&&(N.h++,f.next=N.g,N.g=f)}q=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(f,N){this.type=f,this.g=this.target=N,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var f=!1,N=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const j=()=>{};u.addEventListener("test",j,N),u.removeEventListener("test",j,N)}catch{}return f}();function ve(f,N){if(le.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var j=this.type=f.type,F=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=N,N=f.relatedTarget){if(V){e:{try{O(N.nodeName);var ee=!0;break e}catch{}ee=!1}ee||(N=null)}}else j=="mouseover"?N=f.fromElement:j=="mouseout"&&(N=f.toElement);this.relatedTarget=N,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ce[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ve.aa.h.call(this)}}S(ve,le);var ce={2:"touch",3:"pen",4:"mouse"};ve.prototype.h=function(){ve.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var me="closure_listenable_"+(1e6*Math.random()|0),Ee=0;function De(f,N,j,F,ee){this.listener=f,this.proxy=null,this.src=N,this.type=j,this.capture=!!F,this.ha=ee,this.key=++Ee,this.da=this.fa=!1}function Te(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Me(f){this.src=f,this.g={},this.h=0}Me.prototype.add=function(f,N,j,F,ee){var ae=f.toString();f=this.g[ae],f||(f=this.g[ae]=[],this.h++);var Se=dt(f,N,F,ee);return-1<Se?(N=f[Se],j||(N.fa=!1)):(N=new De(N,this.src,ae,!!F,ee),N.fa=j,f.push(N)),N};function Ke(f,N){var j=N.type;if(j in f.g){var F=f.g[j],ee=Array.prototype.indexOf.call(F,N,void 0),ae;(ae=0<=ee)&&Array.prototype.splice.call(F,ee,1),ae&&(Te(N),f.g[j].length==0&&(delete f.g[j],f.h--))}}function dt(f,N,j,F){for(var ee=0;ee<f.length;++ee){var ae=f[ee];if(!ae.da&&ae.listener==N&&ae.capture==!!j&&ae.ha==F)return ee}return-1}var Ct="closure_lm_"+(1e6*Math.random()|0),on={};function Lt(f,N,j,F,ee){if(Array.isArray(N)){for(var ae=0;ae<N.length;ae++)Lt(f,N[ae],j,F,ee);return null}return j=xs(j),f&&f[me]?f.K(N,j,m(F)?!!F.capture:!1,ee):Mt(f,N,j,!1,F,ee)}function Mt(f,N,j,F,ee,ae){if(!N)throw Error("Invalid event type");var Se=m(ee)?!!ee.capture:!!ee,It=Jn(f);if(It||(f[Ct]=It=new Me(f)),j=It.add(N,j,F,Se,ae),j.proxy)return j;if(F=vt(),j.proxy=F,F.src=f,F.listener=j,f.addEventListener)be||(ee=Se),ee===void 0&&(ee=!1),f.addEventListener(N.toString(),F,ee);else if(f.attachEvent)f.attachEvent(Xn(N.toString()),F);else if(f.addListener&&f.removeListener)f.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return j}function vt(){function f(j){return N.call(f.src,f.listener,j)}const N=ti;return f}function yt(f,N,j,F,ee){if(Array.isArray(N))for(var ae=0;ae<N.length;ae++)yt(f,N[ae],j,F,ee);else F=m(F)?!!F.capture:!!F,j=xs(j),f&&f[me]?(f=f.i,N=String(N).toString(),N in f.g&&(ae=f.g[N],j=dt(ae,j,F,ee),-1<j&&(Te(ae[j]),Array.prototype.splice.call(ae,j,1),ae.length==0&&(delete f.g[N],f.h--)))):f&&(f=Jn(f))&&(N=f.g[N.toString()],f=-1,N&&(f=dt(N,j,F,ee)),(j=-1<f?N[f]:null)&&an(j))}function an(f){if(typeof f!="number"&&f&&!f.da){var N=f.src;if(N&&N[me])Ke(N.i,f);else{var j=f.type,F=f.proxy;N.removeEventListener?N.removeEventListener(j,F,f.capture):N.detachEvent?N.detachEvent(Xn(j),F):N.addListener&&N.removeListener&&N.removeListener(F),(j=Jn(N))?(Ke(j,f),j.h==0&&(j.src=null,N[Ct]=null)):Te(f)}}}function Xn(f){return f in on?on[f]:on[f]="on"+f}function ti(f,N){if(f.da)f=!0;else{N=new ve(N,this);var j=f.listener,F=f.ha||f.src;f.fa&&an(f),f=j.call(F,N)}return f}function Jn(f){return f=f[Ct],f instanceof Me?f:null}var bn="__closure_events_fn_"+(1e9*Math.random()>>>0);function xs(f){return typeof f=="function"?f:(f[bn]||(f[bn]=function(N){return f.handleEvent(N)}),f[bn])}function Ft(){X.call(this),this.i=new Me(this),this.M=this,this.F=null}S(Ft,X),Ft.prototype[me]=!0,Ft.prototype.removeEventListener=function(f,N,j,F){yt(this,f,N,j,F)};function Nt(f,N){var j,F=f.F;if(F)for(j=[];F;F=F.F)j.push(F);if(f=f.M,F=N.type||N,typeof N=="string")N=new le(N,f);else if(N instanceof le)N.target=N.target||f;else{var ee=N;N=new le(F,f),k(N,ee)}if(ee=!0,j)for(var ae=j.length-1;0<=ae;ae--){var Se=N.g=j[ae];ee=Fn(Se,F,!0,N)&&ee}if(Se=N.g=f,ee=Fn(Se,F,!0,N)&&ee,ee=Fn(Se,F,!1,N)&&ee,j)for(ae=0;ae<j.length;ae++)Se=N.g=j[ae],ee=Fn(Se,F,!1,N)&&ee}Ft.prototype.N=function(){if(Ft.aa.N.call(this),this.i){var f=this.i,N;for(N in f.g){for(var j=f.g[N],F=0;F<j.length;F++)Te(j[F]);delete f.g[N],f.h--}}this.F=null},Ft.prototype.K=function(f,N,j,F){return this.i.add(String(f),N,!1,j,F)},Ft.prototype.L=function(f,N,j,F){return this.i.add(String(f),N,!0,j,F)};function Fn(f,N,j,F){if(N=f.i.g[String(N)],!N)return!0;N=N.concat();for(var ee=!0,ae=0;ae<N.length;++ae){var Se=N[ae];if(Se&&!Se.da&&Se.capture==j){var It=Se.listener,yn=Se.ha||Se.src;Se.fa&&Ke(f.i,Se),ee=It.call(yn,F)!==!1&&ee}}return ee&&!F.defaultPrevented}function gn(f,N,j){if(typeof f=="function")j&&(f=y(f,j));else if(f&&typeof f.handleEvent=="function")f=y(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(N)?-1:u.setTimeout(f,N||0)}function xr(f){f.g=gn(()=>{f.g=null,f.i&&(f.i=!1,xr(f))},f.l);const N=f.h;f.h=null,f.m.apply(null,N)}class Hr extends X{constructor(N,j){super(),this.m=N,this.l=j,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:xr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kr(f){X.call(this),this.h=f,this.g={}}S(kr,X);var ws=[];function ni(f){B(f.g,function(N,j){this.g.hasOwnProperty(j)&&an(N)},f),f.g={}}kr.prototype.N=function(){kr.aa.N.call(this),ni(this)},kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kr=u.JSON.stringify,Vn=u.JSON.parse,_s=class{stringify(f){return u.JSON.stringify(f,void 0)}parse(f){return u.JSON.parse(f,void 0)}};function He(){}He.prototype.h=null;function mt(f){return f.h||(f.h=f.i())}function ht(){}var Vt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function te(){le.call(this,"d")}S(te,le);function ye(){le.call(this,"c")}S(ye,le);var Oe={},bt=null;function nt(){return bt=bt||new Ft}Oe.La="serverreachability";function St(f){le.call(this,Oe.La,f)}S(St,le);function je(f){const N=nt();Nt(N,new St(N))}Oe.STAT_EVENT="statevent";function Mi(f,N){le.call(this,Oe.STAT_EVENT,f),this.stat=N}S(Mi,le);function Wt(f){const N=nt();Nt(N,new Mi(N,f))}Oe.Ma="timingevent";function ri(f,N){le.call(this,Oe.Ma,f),this.size=N}S(ri,le);function ir(f,N){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){f()},N)}function Es(){this.g=!0}Es.prototype.xa=function(){this.g=!1};function bs(f,N,j,F,ee,ae){f.info(function(){if(f.g)if(ae)for(var Se="",It=ae.split("&"),yn=0;yn<It.length;yn++){var pt=It[yn].split("=");if(1<pt.length){var Sn=pt[0];pt=pt[1];var ln=Sn.split("_");Se=2<=ln.length&&ln[1]=="type"?Se+(Sn+"="+pt+"&"):Se+(Sn+"=redacted&")}}else Se=null;else Se=ae;return"XMLHTTP REQ ("+F+") [attempt "+ee+"]: "+N+`
`+j+`
`+Se})}function si(f,N,j,F,ee,ae,Se){f.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+ee+"]: "+N+`
`+j+`
`+ae+" "+Se})}function or(f,N,j,F){f.info(function(){return"XMLHTTP TEXT ("+N+"): "+vn(f,j)+(F?" "+F:"")})}function Fi(f,N){f.info(function(){return"TIMEOUT: "+N})}Es.prototype.info=function(){};function vn(f,N){if(!f.g)return N;if(!N)return null;try{var j=JSON.parse(N);if(j){for(f=0;f<j.length;f++)if(Array.isArray(j[f])){var F=j[f];if(!(2>F.length)){var ee=F[1];if(Array.isArray(ee)&&!(1>ee.length)){var ae=ee[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(var Se=1;Se<ee.length;Se++)ee[Se]=""}}}}return Kr(j)}catch{return N}}var Xa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ed={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gr;function ea(){}S(ea,He),ea.prototype.g=function(){return new XMLHttpRequest},ea.prototype.i=function(){return{}},Gr=new ea;function Qr(f,N,j,F){this.j=f,this.i=N,this.l=j,this.R=F||1,this.U=new kr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bd}function bd(){this.i=null,this.g="",this.h=!1}var Dc={},Ja={};function Za(f,N,j){f.L=1,f.v=Bi(_r(N)),f.m=j,f.P=!0,Oc(f,null)}function Oc(f,N){f.F=Date.now(),kt(f),f.A=_r(f.v);var j=f.A,F=f.R;Array.isArray(F)||(F=[String(F)]),Wi(j.i,"t",F),f.C=0,j=f.j.J,f.h=new bd,f.g=$d(f.j,j?N:null,!f.m),0<f.O&&(f.M=new Hr(y(f.Y,f,f.g),f.O)),N=f.U,j=f.g,F=f.ca;var ee="readystatechange";Array.isArray(ee)||(ee&&(ws[0]=ee.toString()),ee=ws);for(var ae=0;ae<ee.length;ae++){var Se=Lt(j,ee[ae],F||N.handleEvent,!1,N.h||N);if(!Se)break;N.g[Se.key]=Se}N=f.H?R(f.H):{},f.m?(f.u||(f.u="POST"),N["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,N)):(f.u="GET",f.g.ea(f.A,f.u,null,N)),je(),bs(f.i,f.u,f.A,f.l,f.R,f.m)}Qr.prototype.ca=function(f){f=f.target;const N=this.M;N&&lr(f)==3?N.j():this.Y(f)},Qr.prototype.Y=function(f){try{if(f==this.g)e:{const ln=lr(this.g);var N=this.g.Ba();const Lr=this.g.Z();if(!(3>ln)&&(ln!=3||this.g&&(this.h.h||this.g.oa()||$c(this.g)))){this.J||ln!=4||N==7||(N==8||0>=Lr?je(3):je(2)),ta(this);var j=this.g.Z();this.X=j;t:if(Sd(this)){var F=$c(this.g);f="";var ee=F.length,ae=lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Dr(this),Vi(this);var Se="";break t}this.h.i=new u.TextDecoder}for(N=0;N<ee;N++)this.h.h=!0,f+=this.h.i.decode(F[N],{stream:!(ae&&N==ee-1)});F.length=0,this.h.g+=f,this.C=0,Se=this.h.g}else Se=this.g.oa();if(this.o=j==200,si(this.i,this.u,this.A,this.l,this.R,ln,j),this.o){if(this.T&&!this.K){t:{if(this.g){var It,yn=this.g;if((It=yn.g?yn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(It)){var pt=It;break t}}pt=null}if(j=pt)or(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lc(this,j);else{this.o=!1,this.s=3,Wt(12),Dr(this),Vi(this);break e}}if(this.P){j=!0;let br;for(;!this.J&&this.C<Se.length;)if(br=Hm(this,Se),br==Ja){ln==4&&(this.s=4,Wt(14),j=!1),or(this.i,this.l,null,"[Incomplete Response]");break}else if(br==Dc){this.s=4,Wt(15),or(this.i,this.l,Se,"[Invalid Chunk]"),j=!1;break}else or(this.i,this.l,br,null),Lc(this,br);if(Sd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ln!=4||Se.length!=0||this.h.h||(this.s=1,Wt(16),j=!1),this.o=this.o&&j,!j)or(this.i,this.l,Se,"[Invalid Chunked Response]"),Dr(this),Vi(this);else if(0<Se.length&&!this.W){this.W=!0;var Sn=this.j;Sn.g==this&&Sn.ba&&!Sn.M&&(Sn.j.info("Great, no buffering proxy detected. Bytes received: "+Se.length),Bc(Sn),Sn.M=!0,Wt(11))}}else or(this.i,this.l,Se,null),Lc(this,Se);ln==4&&Dr(this),this.o&&!this.J&&(ln==4?ul(this.j,this):(this.o=!1,kt(this)))}else il(this.g),j==400&&0<Se.indexOf("Unknown SID")?(this.s=3,Wt(12)):(this.s=0,Wt(13)),Dr(this),Vi(this)}}}catch{}finally{}};function Sd(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Hm(f,N){var j=f.C,F=N.indexOf(`
`,j);return F==-1?Ja:(j=Number(N.substring(j,F)),isNaN(j)?Dc:(F+=1,F+j>N.length?Ja:(N=N.slice(F,F+j),f.C=F+j,N)))}Qr.prototype.cancel=function(){this.J=!0,Dr(this)};function kt(f){f.S=Date.now()+f.I,Nd(f,f.I)}function Nd(f,N){if(f.B!=null)throw Error("WatchDog timer not null");f.B=ir(y(f.ba,f),N)}function ta(f){f.B&&(u.clearTimeout(f.B),f.B=null)}Qr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Fi(this.i,this.A),this.L!=2&&(je(),Wt(17)),Dr(this),this.s=2,Vi(this)):Nd(this,this.S-f)};function Vi(f){f.j.G==0||f.J||ul(f.j,f)}function Dr(f){ta(f);var N=f.M;N&&typeof N.ma=="function"&&N.ma(),f.M=null,ni(f.U),f.g&&(N=f.g,f.g=null,N.abort(),N.ma())}function Lc(f,N){try{var j=f.j;if(j.G!=0&&(j.g==f||Zn(j.h,f))){if(!f.K&&Zn(j.h,f)&&j.G==3){try{var F=j.Da.g.parse(N)}catch{F=null}if(Array.isArray(F)&&F.length==3){var ee=F;if(ee[0]==0){e:if(!j.u){if(j.g)if(j.g.F+3e3<f.F)cl(j),es(j);else break e;ll(j),Wt(18)}}else j.za=ee[1],0<j.za-j.T&&37500>ee[2]&&j.F&&j.v==0&&!j.C&&(j.C=ir(y(j.Za,j),6e3));if(1>=Cd(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else ci(j,11)}else if((f.K||j.g==f)&&cl(j),!I(N))for(ee=j.Da.g.parse(N),N=0;N<ee.length;N++){let pt=ee[N];if(j.T=pt[0],pt=pt[1],j.G==2)if(pt[0]=="c"){j.K=pt[1],j.ia=pt[2];const Sn=pt[3];Sn!=null&&(j.la=Sn,j.j.info("VER="+j.la));const ln=pt[4];ln!=null&&(j.Aa=ln,j.j.info("SVER="+j.Aa));const Lr=pt[5];Lr!=null&&typeof Lr=="number"&&0<Lr&&(F=1.5*Lr,j.L=F,j.j.info("backChannelRequestTimeoutMs_="+F)),F=j;const br=f.g;if(br){const la=br.g?br.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(la){var ae=F.h;ae.g||la.indexOf("spdy")==-1&&la.indexOf("quic")==-1&&la.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(Mc(ae,ae.h),ae.h=null))}if(F.D){const hl=br.g?br.g.getResponseHeader("X-HTTP-Session-Id"):null;hl&&(F.ya=hl,Pt(F.I,F.D,hl))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-f.F,j.j.info("Handshake RTT: "+j.R+"ms")),F=j;var Se=f;if(F.qa=Ud(F,F.J?F.ia:null,F.W),Se.K){Id(F.h,Se);var It=Se,yn=F.L;yn&&(It.I=yn),It.B&&(ta(It),kt(It)),F.g=Se}else aa(F);0<j.i.length&&Cs(j)}else pt[0]!="stop"&&pt[0]!="close"||ci(j,7);else j.G==3&&(pt[0]=="stop"||pt[0]=="close"?pt[0]=="stop"?ci(j,7):Pn(j):pt[0]!="noop"&&j.l&&j.l.ta(pt),j.v=0)}}je(4)}catch{}}var Td=class{constructor(f,N){this.g=f,this.map=N}};function na(f){this.l=f||10,u.PerformanceNavigationTiming?(f=u.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wr(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Cd(f){return f.h?1:f.g?f.g.size:0}function Zn(f,N){return f.h?f.h==N:f.g?f.g.has(N):!1}function Mc(f,N){f.g?f.g.add(N):f.h=N}function Id(f,N){f.h&&f.h==N?f.h=null:f.g&&f.g.has(N)&&f.g.delete(N)}na.prototype.cancel=function(){if(this.i=jd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function jd(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let N=f.i;for(const j of f.g.values())N=N.concat(j.D);return N}return E(f.i)}function el(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(h(f)){for(var N=[],j=f.length,F=0;F<j;F++)N.push(f[F]);return N}N=[],j=0;for(F in f)N[j++]=f[F];return N}function tl(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(h(f)||typeof f=="string"){var N=[];f=f.length;for(var j=0;j<f;j++)N.push(j);return N}N=[],j=0;for(const F in f)N[j++]=F;return N}}}function Ui(f,N){if(f.forEach&&typeof f.forEach=="function")f.forEach(N,void 0);else if(h(f)||typeof f=="string")Array.prototype.forEach.call(f,N,void 0);else for(var j=tl(f),F=el(f),ee=F.length,ae=0;ae<ee;ae++)N.call(void 0,F[ae],j&&j[ae],f)}var ra=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Km(f,N){if(f){f=f.split("&");for(var j=0;j<f.length;j++){var F=f[j].indexOf("="),ee=null;if(0<=F){var ae=f[j].substring(0,F);ee=f[j].substring(F+1)}else ae=f[j];N(ae,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function ii(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof ii){this.h=f.h,sa(this,f.j),this.o=f.o,this.g=f.g,$i(this,f.s),this.l=f.l;var N=f.i,j=new Ss;j.i=N.i,N.g&&(j.g=new Map(N.g),j.h=N.h),zi(this,j),this.m=f.m}else f&&(N=String(f).match(ra))?(this.h=!1,sa(this,N[1]||"",!0),this.o=ft(N[2]||""),this.g=ft(N[3]||"",!0),$i(this,N[4]),this.l=ft(N[5]||"",!0),zi(this,N[6]||"",!0),this.m=ft(N[7]||"")):(this.h=!1,this.i=new Ss(null,this.h))}ii.prototype.toString=function(){var f=[],N=this.j;N&&f.push(qi(N,nl,!0),":");var j=this.g;return(j||N=="file")&&(f.push("//"),(N=this.o)&&f.push(qi(N,nl,!0),"@"),f.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&f.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&f.push("/"),f.push(qi(j,j.charAt(0)=="/"?Rd:Pd,!0))),(j=this.i.toString())&&f.push("?",j),(j=this.m)&&f.push("#",qi(j,Fc)),f.join("")};function _r(f){return new ii(f)}function sa(f,N,j){f.j=j?ft(N,!0):N,f.j&&(f.j=f.j.replace(/:$/,""))}function $i(f,N){if(N){if(N=Number(N),isNaN(N)||0>N)throw Error("Bad port number "+N);f.s=N}else f.s=null}function zi(f,N,j){N instanceof Ss?(f.i=N,Ns(f.i,f.h)):(j||(N=qi(N,kd)),f.i=new Ss(N,f.h))}function Pt(f,N,j){f.i.set(N,j)}function Bi(f){return Pt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function ft(f,N){return f?N?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function qi(f,N,j){return typeof f=="string"?(f=encodeURI(f).replace(N,Ad),j&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Ad(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var nl=/[#\/\?@]/g,Pd=/[#\?:]/g,Rd=/[#\?]/g,kd=/[#\?@]/g,Fc=/#/g;function Ss(f,N){this.h=this.g=null,this.i=f||null,this.j=!!N}function An(f){f.g||(f.g=new Map,f.h=0,f.i&&Km(f.i,function(N,j){f.add(decodeURIComponent(N.replace(/\+/g," ")),j)}))}n=Ss.prototype,n.add=function(f,N){An(this),this.i=null,f=Or(this,f);var j=this.g.get(f);return j||this.g.set(f,j=[]),j.push(N),this.h+=1,this};function Yr(f,N){An(f),N=Or(f,N),f.g.has(N)&&(f.i=null,f.h-=f.g.get(N).length,f.g.delete(N))}function Xr(f,N){return An(f),N=Or(f,N),f.g.has(N)}n.forEach=function(f,N){An(this),this.g.forEach(function(j,F){j.forEach(function(ee){f.call(N,ee,F,this)},this)},this)},n.na=function(){An(this);const f=Array.from(this.g.values()),N=Array.from(this.g.keys()),j=[];for(let F=0;F<N.length;F++){const ee=f[F];for(let ae=0;ae<ee.length;ae++)j.push(N[F])}return j},n.V=function(f){An(this);let N=[];if(typeof f=="string")Xr(this,f)&&(N=N.concat(this.g.get(Or(this,f))));else{f=Array.from(this.g.values());for(let j=0;j<f.length;j++)N=N.concat(f[j])}return N},n.set=function(f,N){return An(this),this.i=null,f=Or(this,f),Xr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[N]),this.h+=1,this},n.get=function(f,N){return f?(f=this.V(f),0<f.length?String(f[0]):N):N};function Wi(f,N,j){Yr(f,N),0<j.length&&(f.i=null,f.g.set(Or(f,N),E(j)),f.h+=j.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],N=Array.from(this.g.keys());for(var j=0;j<N.length;j++){var F=N[j];const ae=encodeURIComponent(String(F)),Se=this.V(F);for(F=0;F<Se.length;F++){var ee=ae;Se[F]!==""&&(ee+="="+encodeURIComponent(String(Se[F]))),f.push(ee)}}return this.i=f.join("&")};function Or(f,N){return N=String(N),f.j&&(N=N.toLowerCase()),N}function Ns(f,N){N&&!f.j&&(An(f),f.i=null,f.g.forEach(function(j,F){var ee=F.toLowerCase();F!=ee&&(Yr(this,F),Wi(this,ee,j))},f)),f.j=N}function Gm(f,N){const j=new Es;if(u.Image){const F=new Image;F.onload=b(ar,j,"TestLoadImage: loaded",!0,N,F),F.onerror=b(ar,j,"TestLoadImage: error",!1,N,F),F.onabort=b(ar,j,"TestLoadImage: abort",!1,N,F),F.ontimeout=b(ar,j,"TestLoadImage: timeout",!1,N,F),u.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=f}else N(!1)}function Dd(f,N){const j=new Es,F=new AbortController,ee=setTimeout(()=>{F.abort(),ar(j,"TestPingServer: timeout",!1,N)},1e4);fetch(f,{signal:F.signal}).then(ae=>{clearTimeout(ee),ae.ok?ar(j,"TestPingServer: ok",!0,N):ar(j,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(ee),ar(j,"TestPingServer: error",!1,N)})}function ar(f,N,j,F,ee){try{ee&&(ee.onload=null,ee.onerror=null,ee.onabort=null,ee.ontimeout=null),F(j)}catch{}}function Qm(){this.g=new _s}function Od(f,N,j){const F=j||"";try{Ui(f,function(ee,ae){let Se=ee;m(ee)&&(Se=Kr(ee)),N.push(F+ae+"="+encodeURIComponent(Se))})}catch(ee){throw N.push(F+"type="+encodeURIComponent("_badmap")),ee}}function oi(f){this.l=f.Ub||null,this.j=f.eb||!1}S(oi,He),oi.prototype.g=function(){return new ia(this.l,this.j)},oi.prototype.i=function(f){return function(){return f}}({});function ia(f,N){Ft.call(this),this.D=f,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(ia,Ft),n=ia.prototype,n.open=function(f,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=N,this.readyState=1,Zr(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const N={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(N.body=f),(this.D||u).fetch(new Request(this.A,N)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jr(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Zr(this)),this.g&&(this.readyState=3,Zr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ld(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ld(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var N=f.value?f.value:new Uint8Array(0);(N=this.v.decode(N,{stream:!f.done}))&&(this.response=this.responseText+=N)}f.done?Jr(this):Zr(this),this.readyState==3&&Ld(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Jr(this))},n.Qa=function(f){this.g&&(this.response=f,Jr(this))},n.ga=function(){this.g&&Jr(this)};function Jr(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Zr(f)}n.setRequestHeader=function(f,N){this.u.append(f,N)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],N=this.h.entries();for(var j=N.next();!j.done;)j=j.value,f.push(j[0]+": "+j[1]),j=N.next();return f.join(`\r
`)};function Zr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(ia.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ai(f){let N="";return B(f,function(j,F){N+=F,N+=":",N+=j,N+=`\r
`}),N}function Hi(f,N,j){e:{for(F in j){var F=!1;break e}F=!0}F||(j=ai(j),typeof f=="string"?j!=null&&encodeURIComponent(String(j)):Pt(f,N,j))}function Ht(f){Ft.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ht,Ft);var Ym=/^https?$/i,Vc=["POST","PUT"];n=Ht.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,N,j,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);N=N?N.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gr.g(),this.v=this.o?mt(this.o):mt(Gr),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(N,String(f),!0),this.B=!1}catch(ae){oa(this,ae);return}if(f=j||"",j=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var ee in F)j.set(ee,F[ee]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const ae of F.keys())j.set(ae,F.get(ae));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(j.keys()).find(ae=>ae.toLowerCase()=="content-type"),ee=u.FormData&&f instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Vc,N,void 0))||F||ee||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,Se]of j)this.g.setRequestHeader(ae,Se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sl(this),this.u=!0,this.g.send(f),this.u=!1}catch(ae){oa(this,ae)}};function oa(f,N){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=N,f.m=5,rl(f),Er(f)}function rl(f){f.A||(f.A=!0,Nt(f,"complete"),Nt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Nt(this,"complete"),Nt(this,"abort"),Er(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Er(this,!0)),Ht.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Uc(this):this.bb())},n.bb=function(){Uc(this)};function Uc(f){if(f.h&&typeof c<"u"&&(!f.v[1]||lr(f)!=4||f.Z()!=2)){if(f.u&&lr(f)==4)gn(f.Ea,0,f);else if(Nt(f,"readystatechange"),lr(f)==4){f.h=!1;try{const Se=f.Z();e:switch(Se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var j;if(!(j=N)){var F;if(F=Se===0){var ee=String(f.D).match(ra)[1]||null;!ee&&u.self&&u.self.location&&(ee=u.self.location.protocol.slice(0,-1)),F=!Ym.test(ee?ee.toLowerCase():"")}j=F}if(j)Nt(f,"complete"),Nt(f,"success");else{f.m=6;try{var ae=2<lr(f)?f.g.statusText:""}catch{ae=""}f.l=ae+" ["+f.Z()+"]",rl(f)}}finally{Er(f)}}}}function Er(f,N){if(f.g){sl(f);const j=f.g,F=f.v[0]?()=>{}:null;f.g=null,f.v=null,N||Nt(f,"ready");try{j.onreadystatechange=F}catch{}}}function sl(f){f.I&&(u.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function lr(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<lr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var N=this.g.responseText;return f&&N.indexOf(f)==0&&(N=N.substring(f.length)),Vn(N)}};function $c(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function il(f){const N={};f=(f.g&&2<=lr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<f.length;F++){if(I(f[F]))continue;var j=$(f[F]);const ee=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const ae=N[ee]||[];N[ee]=ae,ae.push(j)}P(N,function(F){return F.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ts(f,N,j){return j&&j.internalChannelParams&&j.internalChannelParams[f]||N}function zc(f){this.Aa=0,this.i=[],this.j=new Es,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ts("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ts("baseRetryDelayMs",5e3,f),this.cb=Ts("retryDelaySeedMs",1e4,f),this.Wa=Ts("forwardChannelMaxRetries",2,f),this.wa=Ts("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new na(f&&f.concurrentRequestLimit),this.Da=new Qm,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=zc.prototype,n.la=8,n.G=1,n.connect=function(f,N,j,F){Wt(0),this.W=f,this.H=N||{},j&&F!==void 0&&(this.H.OSID=j,this.H.OAID=F),this.F=this.X,this.I=Ud(this,null,this.W),Cs(this)};function Pn(f){if(ol(f),f.G==3){var N=f.U++,j=_r(f.I);if(Pt(j,"SID",f.K),Pt(j,"RID",N),Pt(j,"TYPE","terminate"),li(f,j),N=new Qr(f,f.j,N),N.L=2,N.v=Bi(_r(j)),j=!1,u.navigator&&u.navigator.sendBeacon)try{j=u.navigator.sendBeacon(N.v.toString(),"")}catch{}!j&&u.Image&&(new Image().src=N.v,j=!0),j||(N.g=$d(N.j,null),N.g.ea(N.v)),N.F=Date.now(),kt(N)}Vd(f)}function es(f){f.g&&(Bc(f),f.g.cancel(),f.g=null)}function ol(f){es(f),f.u&&(u.clearTimeout(f.u),f.u=null),cl(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&u.clearTimeout(f.s),f.s=null)}function Cs(f){if(!wr(f.h)&&!f.s){f.s=!0;var N=f.Ga;Y||Z(),q||(Y(),q=!0),Q.add(N,f),f.B=0}}function Xm(f,N){return Cd(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=N.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=ir(y(f.Ga,f,N),Fd(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const ee=new Qr(this,this.j,f);let ae=this.o;if(this.S&&(ae?(ae=R(ae),k(ae,this.S)):ae=this.S),this.m!==null||this.O||(ee.H=ae,ae=null),this.P)e:{for(var N=0,j=0;j<this.i.length;j++){t:{var F=this.i[j];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(N+=F,4096<N){N=j;break e}if(N===4096||j===this.i.length-1){N=j+1;break e}}N=1e3}else N=1e3;N=Ki(this,ee,N),j=_r(this.I),Pt(j,"RID",f),Pt(j,"CVER",22),this.D&&Pt(j,"X-HTTP-Session-Id",this.D),li(this,j),ae&&(this.O?N="headers="+encodeURIComponent(String(ai(ae)))+"&"+N:this.m&&Hi(j,this.m,ae)),Mc(this.h,ee),this.Ua&&Pt(j,"TYPE","init"),this.P?(Pt(j,"$req",N),Pt(j,"SID","null"),ee.T=!0,Za(ee,j,null)):Za(ee,j,N),this.G=2}}else this.G==3&&(f?al(this,f):this.i.length==0||wr(this.h)||al(this))};function al(f,N){var j;N?j=N.l:j=f.U++;const F=_r(f.I);Pt(F,"SID",f.K),Pt(F,"RID",j),Pt(F,"AID",f.T),li(f,F),f.m&&f.o&&Hi(F,f.m,f.o),j=new Qr(f,f.j,j,f.B+1),f.m===null&&(j.H=f.o),N&&(f.i=N.D.concat(f.i)),N=Ki(f,j,1e3),j.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Mc(f.h,j),Za(j,F,N)}function li(f,N){f.H&&B(f.H,function(j,F){Pt(N,F,j)}),f.l&&Ui({},function(j,F){Pt(N,F,j)})}function Ki(f,N,j){j=Math.min(f.i.length,j);var F=f.l?y(f.l.Na,f.l,f):null;e:{var ee=f.i;let ae=-1;for(;;){const Se=["count="+j];ae==-1?0<j?(ae=ee[0].g,Se.push("ofs="+ae)):ae=0:Se.push("ofs="+ae);let It=!0;for(let yn=0;yn<j;yn++){let pt=ee[yn].g;const Sn=ee[yn].map;if(pt-=ae,0>pt)ae=Math.max(0,ee[yn].g-100),It=!1;else try{Od(Sn,Se,"req"+pt+"_")}catch{F&&F(Sn)}}if(It){F=Se.join("&");break e}}}return f=f.i.splice(0,j),N.D=f,F}function aa(f){if(!f.g&&!f.u){f.Y=1;var N=f.Fa;Y||Z(),q||(Y(),q=!0),Q.add(N,f),f.v=0}}function ll(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=ir(y(f.Fa,f),Fd(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Md(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=ir(y(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Wt(10),es(this),Md(this))};function Bc(f){f.A!=null&&(u.clearTimeout(f.A),f.A=null)}function Md(f){f.g=new Qr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var N=_r(f.qa);Pt(N,"RID","rpc"),Pt(N,"SID",f.K),Pt(N,"AID",f.T),Pt(N,"CI",f.F?"0":"1"),!f.F&&f.ja&&Pt(N,"TO",f.ja),Pt(N,"TYPE","xmlhttp"),li(f,N),f.m&&f.o&&Hi(N,f.m,f.o),f.L&&(f.g.I=f.L);var j=f.g;f=f.ia,j.L=1,j.v=Bi(_r(N)),j.m=null,j.P=!0,Oc(j,f)}n.Za=function(){this.C!=null&&(this.C=null,es(this),ll(this),Wt(19))};function cl(f){f.C!=null&&(u.clearTimeout(f.C),f.C=null)}function ul(f,N){var j=null;if(f.g==N){cl(f),Bc(f),f.g=null;var F=2}else if(Zn(f.h,N))j=N.D,Id(f.h,N),F=1;else return;if(f.G!=0){if(N.o)if(F==1){j=N.m?N.m.length:0,N=Date.now()-N.F;var ee=f.B;F=nt(),Nt(F,new ri(F,j)),Cs(f)}else aa(f);else if(ee=N.s,ee==3||ee==0&&0<N.X||!(F==1&&Xm(f,N)||F==2&&ll(f)))switch(j&&0<j.length&&(N=f.h,N.i=N.i.concat(j)),ee){case 1:ci(f,5);break;case 4:ci(f,10);break;case 3:ci(f,6);break;default:ci(f,2)}}}function Fd(f,N){let j=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(j*=2),j*N}function ci(f,N){if(f.j.info("Error code "+N),N==2){var j=y(f.fb,f),F=f.Xa;const ee=!F;F=new ii(F||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||sa(F,"https"),Bi(F),ee?Gm(F.toString(),j):Dd(F.toString(),j)}else Wt(2);f.G=0,f.l&&f.l.sa(N),Vd(f),ol(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function Vd(f){if(f.G=0,f.ka=[],f.l){const N=jd(f.h);(N.length!=0||f.i.length!=0)&&(x(f.ka,N),x(f.ka,f.i),f.h.i.length=0,E(f.i),f.i.length=0),f.l.ra()}}function Ud(f,N,j){var F=j instanceof ii?_r(j):new ii(j);if(F.g!="")N&&(F.g=N+"."+F.g),$i(F,F.s);else{var ee=u.location;F=ee.protocol,N=N?N+"."+ee.hostname:ee.hostname,ee=+ee.port;var ae=new ii(null);F&&sa(ae,F),N&&(ae.g=N),ee&&$i(ae,ee),j&&(ae.l=j),F=ae}return j=f.D,N=f.ya,j&&N&&Pt(F,j,N),Pt(F,"VER",f.la),li(f,F),F}function $d(f,N,j){if(N&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return N=f.Ca&&!f.pa?new Ht(new oi({eb:j})):new Ht(f.pa),N.Ha(f.J),N}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qc(){}n=qc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function dl(){}dl.prototype.g=function(f,N){return new er(f,N)};function er(f,N){Ft.call(this),this.g=new zc(N),this.l=f,this.h=N&&N.messageUrlParams||null,f=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(f?f["X-WebChannel-Content-Type"]=N.messageContentType:f={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.va&&(f?f["X-WebChannel-Client-Profile"]=N.va:f={"X-WebChannel-Client-Profile":N.va}),this.g.S=f,(f=N&&N.Sb)&&!I(f)&&(this.g.m=f),this.v=N&&N.supportsCrossDomainXhr||!1,this.u=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!I(N)&&(this.g.D=N,f=this.h,f!==null&&N in f&&(f=this.h,N in f&&delete f[N])),this.j=new Is(this)}S(er,Ft),er.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){Pn(this.g)},er.prototype.o=function(f){var N=this.g;if(typeof f=="string"){var j={};j.__data__=f,f=j}else this.u&&(j={},j.__data__=Kr(f),f=j);N.i.push(new Td(N.Ya++,f)),N.G==3&&Cs(N)},er.prototype.N=function(){this.g.l=null,delete this.j,Pn(this.g),delete this.g,er.aa.N.call(this)};function zd(f){te.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var N=f.__sm__;if(N){e:{for(const j in N){f=j;break e}f=void 0}(this.i=f)&&(f=this.i,N=N!==null&&f in N?N[f]:void 0),this.data=N}else this.data=f}S(zd,te);function Bd(){ye.call(this),this.status=1}S(Bd,ye);function Is(f){this.g=f}S(Is,qc),Is.prototype.ua=function(){Nt(this.g,"a")},Is.prototype.ta=function(f){Nt(this.g,new zd(f))},Is.prototype.sa=function(f){Nt(this.g,new Bd)},Is.prototype.ra=function(){Nt(this.g,"b")},dl.prototype.createWebChannel=dl.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,QN=function(){return new dl},GN=function(){return nt()},KN=Oe,Pv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xa.NO_ERROR=0,Xa.TIMEOUT=8,Xa.HTTP_ERROR=6,ff=Xa,Ed.COMPLETE="complete",HN=Ed,ht.EventType=Vt,Vt.OPEN="a",Vt.CLOSE="b",Vt.ERROR="c",Vt.MESSAGE="d",Ft.prototype.listen=Ft.prototype.K,xu=ht,Ht.prototype.listenOnce=Ht.prototype.L,Ht.prototype.getLastError=Ht.prototype.Ka,Ht.prototype.getLastErrorCode=Ht.prototype.Ba,Ht.prototype.getStatus=Ht.prototype.Z,Ht.prototype.getResponseJson=Ht.prototype.Oa,Ht.prototype.getResponseText=Ht.prototype.oa,Ht.prototype.send=Ht.prototype.ea,Ht.prototype.setWithCredentials=Ht.prototype.Ha,WN=Ht}).apply(typeof Wh<"u"?Wh:typeof self<"u"?self:typeof window<"u"?window:{});const SE="@firebase/firestore",NE="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pr.UNAUTHENTICATED=new pr(null),pr.GOOGLE_CREDENTIALS=new pr("google-credentials-uid"),pr.FIRST_PARTY=new pr("first-party-uid"),pr.MOCK_USER=new pr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ic="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=new Ry("@firebase/firestore");function Fl(){return Fa.logLevel}function Pe(n,...e){if(Fa.logLevel<=ct.DEBUG){const t=e.map(zy);Fa.debug(`Firestore (${Ic}): ${n}`,...t)}}function Ai(n,...e){if(Fa.logLevel<=ct.ERROR){const t=e.map(zy);Fa.error(`Firestore (${Ic}): ${n}`,...t)}}function Va(n,...e){if(Fa.logLevel<=ct.WARN){const t=e.map(zy);Fa.warn(`Firestore (${Ic}): ${n}`,...t)}}function zy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,YN(n,r,t)}function YN(n,e,t){let r=`FIRESTORE (${Ic}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ai(r),new Error(r)}function Tt(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||YN(e,s,r)}function rt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends Zs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pr.UNAUTHENTICATED))}shutdown(){}}class aV{constructor(e){this.t=e,this.currentUser=pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Tt(this.o===void 0,42304);let r=this.i;const s=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let a=new Ro;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ro,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const h=a;e.enqueueRetryable(async()=>{await h.promise,await s(this.currentUser)})},u=h=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ro)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt(typeof r.accessToken=="string",31837,{l:r}),new iV(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Tt(e===null||typeof e=="string",2055,{h:e}),new pr(e)}}class lV{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=pr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cV{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new lV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(pr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class TE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Tt(this.o===void 0,3512);const r=a=>{a.error!=null&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,Pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new TE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new TE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=dV(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function at(n,e){return n<e?-1:n>e?1:0}function Rv(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return at(r,s);{const a=XN(),c=hV(a.encode(CE(n,t)),a.encode(CE(e,t)));return c!==0?c:at(r,s)}}t+=r>65535?2:1}return at(n.length,e.length)}function CE(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function hV(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return at(n[t],e[t]);return at(n.length,e.length)}function uc(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="__name__";class ks{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ye(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ye(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ks.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ks?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=ks.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return at(e.length,t.length)}static compareSegments(e,t){const r=ks.isNumericId(e),s=ks.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?ks.extractNumericId(e).compare(ks.extractNumericId(t)):Rv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Po.fromString(e.substring(4,e.length-2))}}class Rt extends ks{construct(e,t,r){return new Rt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ce(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Rt(t)}static emptyPath(){return new Rt([])}}const fV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class On extends ks{construct(e,t,r){return new On(e,t,r)}static isValidIdentifier(e){return fV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),On.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kv}static keyField(){return new On([kv])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new Ce(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Ce(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Ce(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else u==="`"?(c=!c,s++):u!=="."||c?(r+=u,s++):(a(),s++)}if(a(),c)throw new Ce(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new On(t)}static emptyPath(){return new On([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.path=e}static fromPath(e){return new ze(Rt.fromString(e))}static fromName(e){return new ze(Rt.fromString(e).popFirst(5))}static empty(){return new ze(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new Rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(n,e,t){if(!t)throw new Ce(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function mV(n,e,t,r){if(e===!0&&r===!0)throw new Ce(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function IE(n){if(!ze.isDocumentKey(n))throw new Ce(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function jE(n){if(ze.isDocumentKey(n))throw new Ce(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function JN(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function _m(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ye(12329,{type:typeof n})}function $s(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ce(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_m(n);throw new Ce(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(n,e){const t={typeString:n};return e&&(t.value=e),t}function fd(n,e){if(!JN(n))throw new Ce(ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(s&&typeof c!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new Ce(ue.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=-62135596800,PE=1e6;class qt{static now(){return qt.fromMillis(Date.now())}static fromDate(e){return qt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*PE);return new qt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ce(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ce(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<AE)throw new Ce(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/PE}_compareTo(e){return this.seconds===e.seconds?at(this.nanoseconds,e.nanoseconds):at(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fd(e,qt._jsonSchema))return new qt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-AE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qt._jsonSchemaVersion="firestore/timestamp/1.0",qt._jsonSchema={type:fn("string",qt._jsonSchemaVersion),seconds:fn("number"),nanoseconds:fn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{static fromTimestamp(e){return new tt(e)}static min(){return new tt(new qt(0,0))}static max(){return new tt(new qt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku=-1;function pV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=tt.fromTimestamp(r===1e9?new qt(t+1,0):new qt(t,r));return new $o(s,ze.empty(),e)}function gV(n){return new $o(n.readTime,n.key,Ku)}class $o{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new $o(tt.min(),ze.empty(),Ku)}static max(){return new $o(tt.max(),ze.empty(),Ku)}}function vV(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ze.comparator(n.documentKey,e.documentKey),t!==0?t:at(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jc(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==yV)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let s=0,a=0,c=!1;e.forEach(u=>{++s,u.next(()=>{++a,c&&a===s&&t()},h=>r(h))}),c=!0,a===s&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(s=>s?he.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,a)=>{r.push(t.call(this,s,a))}),this.waitFor(r)}static mapArray(e,t){return new he((r,s)=>{const a=e.length,c=new Array(a);let u=0;for(let h=0;h<a;h++){const m=h;t(e[m]).next(g=>{c[m]=g,++u,u===a&&r(c)},g=>s(g))}})}static doWhile(e,t){return new he((r,s)=>{const a=()=>{e()===!0?t().next(()=>{a()},s):r()};a()})}}function wV(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ac(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Em.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=-1;function bm(n){return n==null}function Ff(n){return n===0&&1/n==-1/0}function _V(n){return typeof n=="number"&&Number.isInteger(n)&&!Ff(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN="";function EV(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=RE(e)),e=bV(n.get(t),e);return RE(e)}function bV(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case ZN:t+="";break;default:t+=a}}return t}function RE(n){return n+ZN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Qo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function eT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,t){this.comparator=e,this.root=t||Dn.EMPTY}insert(e,t){return new Zt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(e){return new Zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hh(this.root,e,this.comparator,!0)}}class Hh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dn{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??Dn.RED,this.left=s??Dn.EMPTY,this.right=a??Dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new Dn(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Dn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ye(27949);return e+(this.isRed()?0:1)}}Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1;Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ye(57766)}get value(){throw Ye(16141)}get color(){throw Ye(16727)}get left(){throw Ye(29726)}get right(){throw Ye(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new Dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.comparator=e,this.data=new Zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new DE(this.data.getIterator())}getIteratorFrom(e){return new DE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _n(this.comparator);return t.data=e,t}}class DE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.fields=e,e.sort(On.comparator)}static empty(){return new Ar([])}unionWith(e){let t=new _n(On.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ar(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return uc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new tT("Invalid base64 string: "+a):a}}(e);return new Mn(t)}static fromUint8Array(e){const t=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new Mn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return at(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mn.EMPTY_BYTE_STRING=new Mn("");const SV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zo(n){if(Tt(!!n,39018),typeof n=="string"){let e=0;const t=SV.exec(n);if(Tt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:sn(n.seconds),nanos:sn(n.nanos)}}function sn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Bo(n){return typeof n=="string"?Mn.fromBase64String(n):Mn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="server_timestamp",rT="__type__",sT="__previous_value__",iT="__local_write_time__";function Hy(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[rT])===null||t===void 0?void 0:t.stringValue)===nT}function Sm(n){const e=n.mapValue.fields[sT];return Hy(e)?Sm(e):e}function Gu(n){const e=zo(n.mapValue.fields[iT].timestampValue);return new qt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e,t,r,s,a,c,u,h,m,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=m,this.isUsingEmulator=g}}const Vf="(default)";class Qu{constructor(e,t){this.projectId=e,this.database=t||Vf}static empty(){return new Qu("","")}get isDefaultDatabase(){return this.database===Vf}isEqual(e){return e instanceof Qu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="__type__",TV="__max__",Kh={mapValue:{}},aT="__vector__",Uf="value";function qo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hy(n)?4:IV(n)?9007199254740991:CV(n)?10:11:Ye(28295,{value:n})}function Gs(n,e){if(n===e)return!0;const t=qo(n);if(t!==qo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Gu(n).isEqual(Gu(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=zo(s.timestampValue),u=zo(a.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,a){return Bo(s.bytesValue).isEqual(Bo(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return sn(s.geoPointValue.latitude)===sn(a.geoPointValue.latitude)&&sn(s.geoPointValue.longitude)===sn(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return sn(s.integerValue)===sn(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=sn(s.doubleValue),u=sn(a.doubleValue);return c===u?Ff(c)===Ff(u):isNaN(c)&&isNaN(u)}return!1}(n,e);case 9:return uc(n.arrayValue.values||[],e.arrayValue.values||[],Gs);case 10:case 11:return function(s,a){const c=s.mapValue.fields||{},u=a.mapValue.fields||{};if(kE(c)!==kE(u))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(u[h]===void 0||!Gs(c[h],u[h])))return!1;return!0}(n,e);default:return Ye(52216,{left:n})}}function Yu(n,e){return(n.values||[]).find(t=>Gs(t,e))!==void 0}function dc(n,e){if(n===e)return 0;const t=qo(n),r=qo(e);if(t!==r)return at(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return at(n.booleanValue,e.booleanValue);case 2:return function(a,c){const u=sn(a.integerValue||a.doubleValue),h=sn(c.integerValue||c.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return OE(n.timestampValue,e.timestampValue);case 4:return OE(Gu(n),Gu(e));case 5:return Rv(n.stringValue,e.stringValue);case 6:return function(a,c){const u=Bo(a),h=Bo(c);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const u=a.split("/"),h=c.split("/");for(let m=0;m<u.length&&m<h.length;m++){const g=at(u[m],h[m]);if(g!==0)return g}return at(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const u=at(sn(a.latitude),sn(c.latitude));return u!==0?u:at(sn(a.longitude),sn(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return LE(n.arrayValue,e.arrayValue);case 10:return function(a,c){var u,h,m,g;const v=a.fields||{},y=c.fields||{},b=(u=v[Uf])===null||u===void 0?void 0:u.arrayValue,S=(h=y[Uf])===null||h===void 0?void 0:h.arrayValue,E=at(((m=b==null?void 0:b.values)===null||m===void 0?void 0:m.length)||0,((g=S==null?void 0:S.values)===null||g===void 0?void 0:g.length)||0);return E!==0?E:LE(b,S)}(n.mapValue,e.mapValue);case 11:return function(a,c){if(a===Kh.mapValue&&c===Kh.mapValue)return 0;if(a===Kh.mapValue)return 1;if(c===Kh.mapValue)return-1;const u=a.fields||{},h=Object.keys(u),m=c.fields||{},g=Object.keys(m);h.sort(),g.sort();for(let v=0;v<h.length&&v<g.length;++v){const y=Rv(h[v],g[v]);if(y!==0)return y;const b=dc(u[h[v]],m[g[v]]);if(b!==0)return b}return at(h.length,g.length)}(n.mapValue,e.mapValue);default:throw Ye(23264,{le:t})}}function OE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return at(n,e);const t=zo(n),r=zo(e),s=at(t.seconds,r.seconds);return s!==0?s:at(t.nanos,r.nanos)}function LE(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=dc(t[s],r[s]);if(a)return a}return at(t.length,r.length)}function hc(n){return Dv(n)}function Dv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=zo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Bo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ze.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Dv(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const c of r)a?a=!1:s+=",",s+=`${c}:${Dv(t.fields[c])}`;return s+"}"}(n.mapValue):Ye(61005,{value:n})}function mf(n){switch(qo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sm(n);return e?16+mf(e):16;case 5:return 2*n.stringValue.length;case 6:return Bo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+mf(a),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return Qo(r.fields,(a,c)=>{s+=a.length+mf(c)}),s}(n.mapValue);default:throw Ye(13486,{value:n})}}function ME(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ov(n){return!!n&&"integerValue"in n}function Ky(n){return!!n&&"arrayValue"in n}function FE(n){return!!n&&"nullValue"in n}function VE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function pf(n){return!!n&&"mapValue"in n}function CV(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[oT])===null||t===void 0?void 0:t.stringValue)===aT}function Pu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Qo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Pu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function IV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===TV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.value=e}static empty(){return new vr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!pf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pu(t)}setAll(e){let t=On.emptyPath(),r={},s=[];e.forEach((c,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,r,s),r={},s=[],t=u.popLast()}c?r[u.lastSegment()]=Pu(c):s.push(u.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());pf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];pf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Qo(t,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new vr(Pu(this.value))}}function lT(n){const e=[];return Qo(n.fields,(t,r)=>{const s=new On([t]);if(pf(r)){const a=lT(r.mapValue).fields;if(a.length===0)e.push(s);else for(const c of a)e.push(s.child(c))}else e.push(s)}),new Ar(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,t,r,s,a,c,u){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=c,this.documentState=u}static newInvalidDocument(e){return new Kn(e,0,tt.min(),tt.min(),tt.min(),vr.empty(),0)}static newFoundDocument(e,t,r,s){return new Kn(e,1,t,tt.min(),r,s,0)}static newNoDocument(e,t){return new Kn(e,2,t,tt.min(),tt.min(),vr.empty(),0)}static newUnknownDocument(e,t){return new Kn(e,3,t,tt.min(),tt.min(),vr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,t){this.position=e,this.inclusive=t}}function UE(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],c=n.position[s];if(a.field.isKeyField()?r=ze.comparator(ze.fromName(c.referenceValue),t.key):r=dc(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function $E(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,t="asc"){this.field=e,this.dir=t}}function jV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{}class hn extends cT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new PV(e,t,r):t==="array-contains"?new DV(e,r):t==="in"?new OV(e,r):t==="not-in"?new LV(e,r):t==="array-contains-any"?new MV(e,r):new hn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new RV(e,r):new kV(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(dc(t,this.value)):t!==null&&qo(this.value)===qo(t)&&this.matchesComparison(dc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vs extends cT{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new vs(e,t)}matches(e){return uT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function uT(n){return n.op==="and"}function dT(n){return AV(n)&&uT(n)}function AV(n){for(const e of n.filters)if(e instanceof vs)return!1;return!0}function Lv(n){if(n instanceof hn)return n.field.canonicalString()+n.op.toString()+hc(n.value);if(dT(n))return n.filters.map(e=>Lv(e)).join(",");{const e=n.filters.map(t=>Lv(t)).join(",");return`${n.op}(${e})`}}function hT(n,e){return n instanceof hn?function(r,s){return s instanceof hn&&r.op===s.op&&r.field.isEqual(s.field)&&Gs(r.value,s.value)}(n,e):n instanceof vs?function(r,s){return s instanceof vs&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,c,u)=>a&&hT(c,s.filters[u]),!0):!1}(n,e):void Ye(19439)}function fT(n){return n instanceof hn?function(t){return`${t.field.canonicalString()} ${t.op} ${hc(t.value)}`}(n):n instanceof vs?function(t){return t.op.toString()+" {"+t.getFilters().map(fT).join(" ,")+"}"}(n):"Filter"}class PV extends hn{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class RV extends hn{constructor(e,t){super(e,"in",t),this.keys=mT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kV extends hn{constructor(e,t){super(e,"not-in",t),this.keys=mT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function mT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class DV extends hn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ky(t)&&Yu(t.arrayValue,this.value)}}class OV extends hn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Yu(this.value.arrayValue,t)}}class LV extends hn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Yu(this.value.arrayValue,t)}}class MV extends hn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ky(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Yu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e,t=null,r=[],s=[],a=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=c,this.endAt=u,this.Pe=null}}function zE(n,e=null,t=[],r=[],s=null,a=null,c=null){return new FV(n,e,t,r,s,a,c)}function Gy(n){const e=rt(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Lv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),bm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hc(r)).join(",")),e.Pe=t}return e.Pe}function Qy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!jV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!hT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$E(n.startAt,e.startAt)&&$E(n.endAt,e.endAt)}function Mv(n){return ze.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,t=null,r=[],s=[],a=null,c="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=c,this.startAt=u,this.endAt=h,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function VV(n,e,t,r,s,a,c,u){return new Ga(n,e,t,r,s,a,c,u)}function Yy(n){return new Ga(n)}function BE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pT(n){return n.collectionGroup!==null}function Ru(n){const e=rt(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new _n(On.comparator);return c.filters.forEach(h=>{h.getFlattenedFilters().forEach(m=>{m.isInequality()&&(u=u.add(m.field))})}),u})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Xu(a,r))}),t.has(On.keyField().canonicalString())||e.Te.push(new Xu(On.keyField(),r))}return e.Te}function zs(n){const e=rt(n);return e.Ie||(e.Ie=UV(e,Ru(n))),e.Ie}function UV(n,e){if(n.limitType==="F")return zE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Xu(s.field,a)});const t=n.endAt?new $f(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new $f(n.startAt.position,n.startAt.inclusive):null;return zE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Fv(n,e){const t=n.filters.concat([e]);return new Ga(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Vv(n,e,t){return new Ga(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nm(n,e){return Qy(zs(n),zs(e))&&n.limitType===e.limitType}function gT(n){return`${Gy(zs(n))}|lt:${n.limitType}`}function Vl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>fT(s)).join(", ")}]`),bm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>hc(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>hc(s)).join(",")),`Target(${r})`}(zs(n))}; limitType=${n.limitType})`}function Tm(n,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ze.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,s){for(const a of Ru(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(c,u,h){const m=UE(c,u,h);return c.inclusive?m<=0:m<0}(r.startAt,Ru(r),s)||r.endAt&&!function(c,u,h){const m=UE(c,u,h);return c.inclusive?m>=0:m>0}(r.endAt,Ru(r),s))}(n,e)}function $V(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vT(n){return(e,t)=>{let r=!1;for(const s of Ru(n)){const a=zV(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function zV(n,e,t){const r=n.field.isKeyField()?ze.comparator(e.key,t.key):function(a,c,u){const h=c.data.field(a),m=u.data.field(a);return h!==null&&m!==null?dc(h,m):Ye(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ye(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Qo(this.inner,(t,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return eT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV=new Zt(ze.comparator);function Pi(){return BV}const yT=new Zt(ze.comparator);function wu(...n){let e=yT;for(const t of n)e=e.insert(t.key,t);return e}function xT(n){let e=yT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ea(){return ku()}function wT(){return ku()}function ku(){return new Qa(n=>n.toString(),(n,e)=>n.isEqual(e))}const qV=new Zt(ze.comparator),WV=new _n(ze.comparator);function ut(...n){let e=WV;for(const t of n)e=e.add(t);return e}const HV=new _n(at);function KV(){return HV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ff(e)?"-0":e}}function _T(n){return{integerValue:""+n}}function GV(n,e){return _V(e)?_T(e):Xy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(){this._=void 0}}function QV(n,e,t){return n instanceof zf?function(s,a){const c={fields:{[rT]:{stringValue:nT},[iT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Hy(a)&&(a=Sm(a)),a&&(c.fields[sT]=a),{mapValue:c}}(t,e):n instanceof Ju?bT(n,e):n instanceof Zu?ST(n,e):function(s,a){const c=ET(s,a),u=qE(c)+qE(s.Ee);return Ov(c)&&Ov(s.Ee)?_T(u):Xy(s.serializer,u)}(n,e)}function YV(n,e,t){return n instanceof Ju?bT(n,e):n instanceof Zu?ST(n,e):t}function ET(n,e){return n instanceof Bf?function(r){return Ov(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class zf extends Cm{}class Ju extends Cm{constructor(e){super(),this.elements=e}}function bT(n,e){const t=NT(e);for(const r of n.elements)t.some(s=>Gs(s,r))||t.push(r);return{arrayValue:{values:t}}}class Zu extends Cm{constructor(e){super(),this.elements=e}}function ST(n,e){let t=NT(e);for(const r of n.elements)t=t.filter(s=>!Gs(s,r));return{arrayValue:{values:t}}}class Bf extends Cm{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function qE(n){return sn(n.integerValue||n.doubleValue)}function NT(n){return Ky(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function XV(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Ju&&s instanceof Ju||r instanceof Zu&&s instanceof Zu?uc(r.elements,s.elements,Gs):r instanceof Bf&&s instanceof Bf?Gs(r.Ee,s.Ee):r instanceof zf&&s instanceof zf}(n.transform,e.transform)}class JV{constructor(e,t){this.version=e,this.transformResults=t}}class fs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fs}static exists(e){return new fs(void 0,e)}static updateTime(e){return new fs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Im{}function TT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Jy(n.key,fs.none()):new md(n.key,n.data,fs.none());{const t=n.data,r=vr.empty();let s=new _n(On.comparator);for(let a of e.fields)if(!s.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),s=s.add(a)}return new Yo(n.key,r,new Ar(s.toArray()),fs.none())}}function ZV(n,e,t){n instanceof md?function(s,a,c){const u=s.value.clone(),h=HE(s.fieldTransforms,a,c.transformResults);u.setAll(h),a.convertToFoundDocument(c.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Yo?function(s,a,c){if(!gf(s.precondition,a))return void a.convertToUnknownDocument(c.version);const u=HE(s.fieldTransforms,a,c.transformResults),h=a.data;h.setAll(CT(s)),h.setAll(u),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):function(s,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Du(n,e,t,r){return n instanceof md?function(a,c,u,h){if(!gf(a.precondition,c))return u;const m=a.value.clone(),g=KE(a.fieldTransforms,h,c);return m.setAll(g),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof Yo?function(a,c,u,h){if(!gf(a.precondition,c))return u;const m=KE(a.fieldTransforms,h,c),g=c.data;return g.setAll(CT(a)),g.setAll(m),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(a,c,u){return gf(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u}(n,e,t)}function e3(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=ET(r.transform,s||null);a!=null&&(t===null&&(t=vr.empty()),t.set(r.field,a))}return t||null}function WE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&uc(r,s,(a,c)=>XV(a,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class md extends Im{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Yo extends Im{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function CT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function HE(n,e,t){const r=new Map;Tt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const a=n[s],c=a.transform,u=e.data.field(a.field);r.set(a.field,YV(c,u,t[s]))}return r}function KE(n,e,t){const r=new Map;for(const s of n){const a=s.transform,c=t.data.field(s.field);r.set(s.field,QV(a,c,e))}return r}class Jy extends Im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class t3 extends Im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&ZV(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Du(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Du(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=wT();return this.mutations.forEach(s=>{const a=e.get(s.key),c=a.overlayedDocument;let u=this.applyToLocalView(c,a.mutatedFields);u=t.has(s.key)?null:u;const h=TT(c,u);h!==null&&r.set(s.key,h),c.isValidDocument()||c.convertToNoDocument(tt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ut())}isEqual(e){return this.batchId===e.batchId&&uc(this.mutations,e.mutations,(t,r)=>WE(t,r))&&uc(this.baseMutations,e.baseMutations,(t,r)=>WE(t,r))}}class Zy{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Tt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return qV}();const a=e.mutations;for(let c=0;c<a.length;c++)s=s.insert(a[c].key,r[c].version);return new Zy(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r3=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var un,gt;function i3(n){switch(n){case ue.OK:return Ye(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Ye(15467,{code:n})}}function IT(n){if(n===void 0)return Ai("GRPC error has no .code"),ue.UNKNOWN;switch(n){case un.OK:return ue.OK;case un.CANCELLED:return ue.CANCELLED;case un.UNKNOWN:return ue.UNKNOWN;case un.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case un.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case un.INTERNAL:return ue.INTERNAL;case un.UNAVAILABLE:return ue.UNAVAILABLE;case un.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case un.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case un.NOT_FOUND:return ue.NOT_FOUND;case un.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case un.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case un.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case un.ABORTED:return ue.ABORTED;case un.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case un.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case un.DATA_LOSS:return ue.DATA_LOSS;default:return Ye(39323,{code:n})}}(gt=un||(un={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3=new Po([4294967295,4294967295],0);function GE(n){const e=XN().encode(n),t=new qN;return t.update(e),new Uint8Array(t.digest())}function QE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Po([t,r],0),new Po([s,a],0)]}class ex{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new _u(`Invalid padding: ${t}`);if(r<0)throw new _u(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _u(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new _u(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Po.fromNumber(this.fe)}pe(e,t,r){let s=e.add(t.multiply(Po.fromNumber(r)));return s.compare(o3)===1&&(s=new Po([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=GE(e),[r,s]=QE(t);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,s,a);if(!this.ye(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new ex(a,s,t);return r.forEach(u=>c.insert(u)),c}insert(e){if(this.fe===0)return;const t=GE(e),[r,s]=QE(t);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,s,a);this.we(c)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class _u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,pd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new jm(tt.min(),s,new Zt(at),Pi(),ut())}}class pd{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new pd(r,t,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=s}}class jT{constructor(e,t){this.targetId=e,this.De=t}}class AT{constructor(e,t,r=Mn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class YE{constructor(){this.ve=0,this.Ce=XE(),this.Fe=Mn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ut(),t=ut(),r=ut();return this.Ce.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ye(38017,{changeType:a})}}),new pd(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=XE()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Tt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class a3{constructor(e){this.We=e,this.Ge=new Map,this.ze=Pi(),this.je=Gh(),this.Je=Gh(),this.He=new Zt(at)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Ye(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,s)=>{this.nt(s)&&t(s)})}it(e){const t=e.targetId,r=e.De.count,s=this.st(t);if(s){const a=s.target;if(Mv(a))if(r===0){const c=new ze(a.path);this.Xe(t,c,Kn.newNoDocument(c,tt.min()))}else Tt(r===1,20013,{expectedCount:r});else{const c=this.ot(t);if(c!==r){const u=this._t(e),h=u?this.ut(u,e,c):1;if(h!==0){this.rt(t);const m=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let c,u;try{c=Bo(r).toUint8Array()}catch(h){if(h instanceof tT)return Va("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new ex(c,s,a)}catch(h){return Va(h instanceof _u?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.fe===0?null:u}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let s=0;return r.forEach(a=>{const c=this.We.lt(),u=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.Xe(t,a,null),s++)}),s}Pt(e){const t=new Map;this.Ge.forEach((a,c)=>{const u=this.st(c);if(u){if(a.current&&Mv(u.target)){const h=new ze(u.target.path);this.Tt(h).has(c)||this.It(c,h)||this.Xe(c,h,Kn.newNoDocument(h,e))}a.Ne&&(t.set(c,a.Le()),a.ke())}});let r=ut();this.Je.forEach((a,c)=>{let u=!0;c.forEachWhile(h=>{const m=this.st(h);return!m||m.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(a))}),this.ze.forEach((a,c)=>c.setReadTime(e));const s=new jm(e,t,this.He,this.ze,r);return this.ze=Pi(),this.je=Gh(),this.Je=Gh(),this.He=new Zt(at),s}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new YE,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new _n(at),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new _n(at),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new YE),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Gh(){return new Zt(ze.comparator)}function XE(){return new Zt(ze.comparator)}const l3={asc:"ASCENDING",desc:"DESCENDING"},c3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},u3={and:"AND",or:"OR"};class d3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Uv(n,e){return n.useProto3Json||bm(e)?e:{value:e}}function qf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function h3(n,e){return qf(n,e.toTimestamp())}function Bs(n){return Tt(!!n,49232),tt.fromTimestamp(function(t){const r=zo(t);return new qt(r.seconds,r.nanos)}(n))}function tx(n,e){return $v(n,e).canonicalString()}function $v(n,e){const t=function(s){return new Rt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function RT(n){const e=Rt.fromString(n);return Tt(MT(e),10190,{key:e.toString()}),e}function zv(n,e){return tx(n.databaseId,e.path)}function Fg(n,e){const t=RT(e);if(t.get(1)!==n.databaseId.projectId)throw new Ce(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ce(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ze(DT(t))}function kT(n,e){return tx(n.databaseId,e)}function f3(n){const e=RT(n);return e.length===4?Rt.emptyPath():DT(e)}function Bv(n){return new Rt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function DT(n){return Tt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function JE(n,e,t){return{name:zv(n,e),fields:t.value.mapValue.fields}}function m3(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ye(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(m,g){return m.useProto3Json?(Tt(g===void 0||typeof g=="string",58123),Mn.fromBase64String(g||"")):(Tt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Mn.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&function(m){const g=m.code===void 0?ue.UNKNOWN:IT(m.code);return new Ce(g,m.message||"")}(c);t=new AT(r,s,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Fg(n,r.document.name),a=Bs(r.document.updateTime),c=r.document.createTime?Bs(r.document.createTime):tt.min(),u=new vr({mapValue:{fields:r.document.fields}}),h=Kn.newFoundDocument(s,a,c,u),m=r.targetIds||[],g=r.removedTargetIds||[];t=new vf(m,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Fg(n,r.document),a=r.readTime?Bs(r.readTime):tt.min(),c=Kn.newNoDocument(s,a),u=r.removedTargetIds||[];t=new vf([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Fg(n,r.document),a=r.removedTargetIds||[];t=new vf([],a,s,null)}else{if(!("filter"in e))return Ye(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,c=new s3(s,a),u=r.targetId;t=new jT(u,c)}}return t}function p3(n,e){let t;if(e instanceof md)t={update:JE(n,e.key,e.value)};else if(e instanceof Jy)t={delete:zv(n,e.key)};else if(e instanceof Yo)t={update:JE(n,e.key,e.data),updateMask:S3(e.fieldMask)};else{if(!(e instanceof t3))return Ye(16599,{Rt:e.type});t={verify:zv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const u=c.transform;if(u instanceof zf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ju)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Zu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Bf)return{fieldPath:c.field.canonicalString(),increment:u.Ee};throw Ye(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:h3(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ye(27497)}(n,e.precondition)),t}function g3(n,e){return n&&n.length>0?(Tt(e!==void 0,14353),n.map(t=>function(s,a){let c=s.updateTime?Bs(s.updateTime):Bs(a);return c.isEqual(tt.min())&&(c=Bs(a)),new JV(c,s.transformResults||[])}(t,e))):[]}function v3(n,e){return{documents:[kT(n,e.path)]}}function y3(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=kT(n,s);const a=function(m){if(m.length!==0)return LT(vs.create(m,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(m){if(m.length!==0)return m.map(g=>function(y){return{field:Ul(y.field),direction:_3(y.dir)}}(g))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=Uv(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{Vt:t,parent:s}}function x3(n){let e=f3(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Tt(r===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let a=[];t.where&&(a=function(v){const y=OT(v);return y instanceof vs&&dT(y)?y.getFilters():[y]}(t.where));let c=[];t.orderBy&&(c=function(v){return v.map(y=>function(S){return new Xu($l(S.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(y))}(t.orderBy));let u=null;t.limit&&(u=function(v){let y;return y=typeof v=="object"?v.value:v,bm(y)?null:y}(t.limit));let h=null;t.startAt&&(h=function(v){const y=!!v.before,b=v.values||[];return new $f(b,y)}(t.startAt));let m=null;return t.endAt&&(m=function(v){const y=!v.before,b=v.values||[];return new $f(b,y)}(t.endAt)),VV(e,s,c,a,u,"F",h,m)}function w3(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ye(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function OT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=$l(t.unaryFilter.field);return hn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=$l(t.unaryFilter.field);return hn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=$l(t.unaryFilter.field);return hn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=$l(t.unaryFilter.field);return hn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ye(61313);default:return Ye(60726)}}(n):n.fieldFilter!==void 0?function(t){return hn.create($l(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ye(58110);default:return Ye(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return vs.create(t.compositeFilter.filters.map(r=>OT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ye(1026)}}(t.compositeFilter.op))}(n):Ye(30097,{filter:n})}function _3(n){return l3[n]}function E3(n){return c3[n]}function b3(n){return u3[n]}function Ul(n){return{fieldPath:n.canonicalString()}}function $l(n){return On.fromServerFormat(n.fieldPath)}function LT(n){return n instanceof hn?function(t){if(t.op==="=="){if(VE(t.value))return{unaryFilter:{field:Ul(t.field),op:"IS_NAN"}};if(FE(t.value))return{unaryFilter:{field:Ul(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(VE(t.value))return{unaryFilter:{field:Ul(t.field),op:"IS_NOT_NAN"}};if(FE(t.value))return{unaryFilter:{field:Ul(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ul(t.field),op:E3(t.op),value:t.value}}}(n):n instanceof vs?function(t){const r=t.getFilters().map(s=>LT(s));return r.length===1?r[0]:{compositeFilter:{op:b3(t.op),filters:r}}}(n):Ye(54877,{filter:n})}function S3(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function MT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,t,r,s,a=tt.min(),c=tt.min(),u=Mn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new No(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new No(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new No(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new No(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e){this.gt=e}}function T3(n){const e=x3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Vv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(){this.Dn=new I3}addToCollectionParentIndex(e,t){return this.Dn.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve($o.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve($o.min())}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class I3{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new _n(Rt.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new _n(Rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FT=41943040;class gr{static withCacheSize(e){return new gr(e,gr.DEFAULT_COLLECTION_PERCENTILE,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gr.DEFAULT_COLLECTION_PERCENTILE=10,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gr.DEFAULT=new gr(FT,gr.DEFAULT_COLLECTION_PERCENTILE,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gr.DISABLED=new gr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new fc(0)}static ur(){return new fc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="LruGarbageCollector",VT=1048576;function tb([n,e],[t,r]){const s=at(n,t);return s===0?at(e,r):s}class j3{constructor(e){this.Tr=e,this.buffer=new _n(tb),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();tb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class A3{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Pe(eb,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ac(t)?Pe(eb,"Ignoring IndexedDB error during garbage collection: ",t):await jc(t)}await this.Rr(3e5)})}}class P3{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return he.resolve(Em.ue);const r=new j3(t);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(ZE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZE):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,s,a,c,u,h,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,c=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,u=Date.now(),this.removeTargets(e,r,t))).next(v=>(a=v,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(m=Date.now(),Fl()<=ct.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(u-c)+`ms
	Removed ${a} targets in `+(h-u)+`ms
	Removed ${v} documents in `+(m-h)+`ms
Total Duration: ${m-g}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:v})))}}function R3(n,e){return new P3(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(){this.changes=new Qa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&Du(r.mutation,s,Ar.empty(),qt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ut()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ut()){const s=Ea();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(a=>{let c=wu();return a.forEach((u,h)=>{c=c.insert(u,h.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Ea();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ut()))}populateOverlays(e,t,r){const s=[];return r.forEach(a=>{t.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((c,u)=>{t.set(c,u)})})}computeViews(e,t,r,s){let a=Pi();const c=ku(),u=function(){return ku()}();return t.forEach((h,m)=>{const g=r.get(m.key);s.has(m.key)&&(g===void 0||g.mutation instanceof Yo)?a=a.insert(m.key,m):g!==void 0?(c.set(m.key,g.mutation.getFieldMask()),Du(g.mutation,m,g.mutation.getFieldMask(),qt.now())):c.set(m.key,Ar.empty())}),this.recalculateAndSaveOverlays(e,a).next(h=>(h.forEach((m,g)=>c.set(m,g)),t.forEach((m,g)=>{var v;return u.set(m,new D3(g,(v=c.get(m))!==null&&v!==void 0?v:null))}),u))}recalculateAndSaveOverlays(e,t){const r=ku();let s=new Zt((c,u)=>c-u),a=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const u of c)u.keys().forEach(h=>{const m=t.get(h);if(m===null)return;let g=r.get(h)||Ar.empty();g=u.applyToLocalView(m,g),r.set(h,g);const v=(s.get(u.batchId)||ut()).add(h);s=s.insert(u.batchId,v)})}).next(()=>{const c=[],u=s.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),m=h.key,g=h.value,v=wT();g.forEach(y=>{if(!a.has(y)){const b=TT(t.get(y),r.get(y));b!==null&&v.set(y,b),a=a.add(y)}}),c.push(this.documentOverlayCache.saveOverlays(e,m,v))}return he.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(c){return ze.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(a=>{const c=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):he.resolve(Ea());let u=Ku,h=a;return c.next(m=>he.forEach(m,(g,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),a.get(g)?he.resolve():this.remoteDocumentCache.getEntry(e,g).next(y=>{h=h.insert(g,y)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,h,m,ut())).next(g=>({batchId:u,changes:xT(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ze(t)).next(r=>{let s=wu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let c=wu();return this.indexManager.getCollectionParents(e,a).next(u=>he.forEach(u,h=>{const m=function(v,y){return new Ga(y,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next(g=>{g.forEach((v,y)=>{c=c.insert(v,y)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s))).next(c=>{a.forEach((h,m)=>{const g=m.getKey();c.get(g)===null&&(c=c.insert(g,Kn.newInvalidDocument(g)))});let u=wu();return c.forEach((h,m)=>{const g=a.get(h);g!==void 0&&Du(g.mutation,m,Ar.empty(),qt.now()),Tm(t,m)&&(u=u.insert(h,m))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return he.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Bs(s.createTime)}}(t)),he.resolve()}getNamedQuery(e,t){return he.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(s){return{name:s.name,query:T3(s.bundledQuery),readTime:Bs(s.readTime)}}(t)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(){this.overlays=new Zt(ze.comparator),this.kr=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ea();return he.forEach(t,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,a)=>{this.wt(e,t,a)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const s=Ea(),a=t.length+1,c=new ze(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const h=u.getNext().value,m=h.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&h.largestBatchId>r&&s.set(h.getKey(),h)}return he.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new Zt((m,g)=>m-g);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let g=a.get(m.largestBatchId);g===null&&(g=Ea(),a=a.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const u=Ea(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((m,g)=>u.set(m,g)),!(u.size()>=s)););return he.resolve(u)}wt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new r3(t,r));let a=this.kr.get(t);a===void 0&&(a=ut(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(){this.sessionToken=Mn.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(){this.qr=new _n(In.Qr),this.$r=new _n(In.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new In(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new In(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){const t=new ze(new Rt([])),r=new In(t,e),s=new In(t,e+1),a=[];return this.$r.forEachInRange([r,s],c=>{this.Wr(c),a.push(c.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new ze(new Rt([])),r=new In(t,e),s=new In(t,e+1);let a=ut();return this.$r.forEachInRange([r,s],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new In(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class In{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ze.comparator(e.key,t.key)||at(e.Hr,t.Hr)}static Ur(e,t){return at(e.Hr,t.Hr)||ze.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new _n(In.Qr)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new n3(a,t,r,s);this.mutationQueue.push(c);for(const u of s)this.Yr=this.Yr.add(new In(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return he.resolve(c)}lookupMutationBatch(e,t){return he.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),a=s<0?0:s;return he.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?Wy:this.er-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new In(t,0),s=new In(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,s],c=>{const u=this.Zr(c.Hr);a.push(u)}),he.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(at);return t.forEach(s=>{const a=new In(s,0),c=new In(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,c],u=>{r=r.add(u.Hr)})}),he.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;ze.isDocumentKey(a)||(a=a.child(""));const c=new In(new ze(a),0);let u=new _n(at);return this.Yr.forEachWhile(h=>{const m=h.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(u=u.add(h.Hr)),!0)},c),he.resolve(this.ei(u))}ei(e){const t=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Tt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return he.forEach(t.mutations,s=>{const a=new In(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){const r=new In(t,0),s=this.Yr.firstAfterOrEqual(r);return he.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this.ni=e,this.docs=function(){return new Zt(ze.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,c=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():Kn.newInvalidDocument(t))}getEntries(e,t){let r=Pi();return t.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Kn.newInvalidDocument(s))}),he.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=Pi();const c=t.path,u=new ze(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:m,value:{document:g}}=h.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||vV(gV(g),r)<=0||(s.has(g.key)||Tm(t,g))&&(a=a.insert(g.key,g.mutableCopy()))}return he.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Ye(9500)}ri(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new $3(this)}getSize(e){return he.resolve(this.size)}}class $3 extends k3{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e){this.persistence=e,this.ii=new Qa(t=>Gy(t),Qy),this.lastRemoteSnapshotVersion=tt.min(),this.highestTargetId=0,this.si=0,this.oi=new nx,this.targetCount=0,this._i=fc.ar()}forEachTarget(e,t){return this.ii.forEach((r,s)=>t(s)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),he.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new fc(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.hr(t),he.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ii.forEach((c,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.ii.delete(c),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),he.waitFor(a).next(()=>s)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach(c=>{a.push(s.markPotentiallyOrphaned(e,c))}),he.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,t){this.ai={},this.overlays={},this.ui=new Em(0),this.ci=!1,this.ci=!0,this.li=new F3,this.referenceDelegate=e(this),this.hi=new z3(this),this.indexManager=new C3,this.remoteDocumentCache=function(s){return new U3(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new N3(t),this.Ti=new L3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new M3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new V3(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const s=new B3(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ei(e,t){return he.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class B3 extends xV{constructor(e){super(),this.currentSequenceNumber=e}}class rx{constructor(e){this.persistence=e,this.Ai=new nx,this.Ri=null}static Vi(e){return new rx(e)}get mi(){if(this.Ri)return this.Ri;throw Ye(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.mi,r=>{const s=ze.fromPath(r);return this.fi(e,s).next(a=>{a||t.removeEntry(s,tt.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return he.or([()=>he.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Wf{constructor(e,t){this.persistence=e,this.gi=new Qa(r=>EV(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=R3(this,t)}static Vi(e,t){return new Wf(e,t)}Ii(){}di(e){return he.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return he.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(a=>a?he.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,c=>this.Sr(e,c,t).next(u=>{u||(r++,a.removeEntry(c,tt.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),he.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),he.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),he.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mf(e.data.value)),t}Sr(e,t,r){return he.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return he.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=s}static Es(e,t){let r=ut(),s=ut();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new sx(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return NL()?8:wV(Yn())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.ps(e,t).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.ys(e,t,s,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new q3;return this.ws(e,t,c).next(u=>{if(a.result=u,this.Rs)return this.Ss(e,t,c,u.size)})}).next(()=>a.result)}Ss(e,t,r,s){return r.documentReadCount<this.Vs?(Fl()<=ct.DEBUG&&Pe("QueryEngine","SDK will not create cache indexes for query:",Vl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),he.resolve()):(Fl()<=ct.DEBUG&&Pe("QueryEngine","Query:",Vl(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Fl()<=ct.DEBUG&&Pe("QueryEngine","The SDK decides to create cache indexes for query:",Vl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zs(t))):he.resolve())}ps(e,t){if(BE(t))return he.resolve(null);let r=zs(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Vv(t,null,"F"),r=zs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=ut(...a);return this.gs.getDocuments(e,c).next(u=>this.indexManager.getMinOffset(e,r).next(h=>{const m=this.bs(t,u);return this.Ds(t,m,c,h.readTime)?this.ps(e,Vv(t,null,"F")):this.vs(e,m,t,h)}))})))}ys(e,t,r,s){return BE(t)||s.isEqual(tt.min())?he.resolve(null):this.gs.getDocuments(e,r).next(a=>{const c=this.bs(t,a);return this.Ds(t,c,r,s)?he.resolve(null):(Fl()<=ct.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Vl(t)),this.vs(e,c,t,pV(s,Ku)).next(u=>u))})}bs(e,t){let r=new _n(vT(e));return t.forEach((s,a)=>{Tm(e,a)&&(r=r.add(a))}),r}Ds(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,t,r){return Fl()<=ct.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",Vl(t)),this.gs.getDocumentsMatchingQuery(e,t,$o.min(),r)}vs(e,t,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="LocalStore",H3=3e8;class K3{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new Zt(at),this.Ms=new Qa(a=>Gy(a),Qy),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new O3(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function G3(n,e,t,r){return new K3(n,e,t,r)}async function $T(n,e){const t=rt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],u=[];let h=ut();for(const m of s){c.push(m.batchId);for(const g of m.mutations)h=h.add(g.key)}for(const m of a){u.push(m.batchId);for(const g of m.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(r,h).next(m=>({Bs:m,removedBatchIds:c,addedBatchIds:u}))})})}function Q3(n,e){const t=rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return function(u,h,m,g){const v=m.batch,y=v.keys();let b=he.resolve();return y.forEach(S=>{b=b.next(()=>g.getEntry(h,S)).next(E=>{const x=m.docVersions.get(S);Tt(x!==null,48541),E.version.compareTo(x)<0&&(v.applyToRemoteDocument(E,m),E.isValidDocument()&&(E.setReadTime(m.commitVersion),g.addEntry(E)))})}),b.next(()=>u.mutationQueue.removeMutationBatch(h,v))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=ut();for(let m=0;m<u.mutationResults.length;++m)u.mutationResults[m].transformResults.length>0&&(h=h.add(u.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function zT(n){const e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Y3(n,e){const t=rt(n),r=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const u=[];e.targetChanges.forEach((g,v)=>{const y=s.get(v);if(!y)return;u.push(t.hi.removeMatchingKeys(a,g.removedDocuments,v).next(()=>t.hi.addMatchingKeys(a,g.addedDocuments,v)));let b=y.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(Mn.EMPTY_BYTE_STRING,tt.min()).withLastLimboFreeSnapshotVersion(tt.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,r)),s=s.insert(v,b),function(E,x,A){return E.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=H3?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(y,b,g)&&u.push(t.hi.updateTargetData(a,b))});let h=Pi(),m=ut();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(a,g))}),u.push(X3(a,c,e.documentUpdates).next(g=>{h=g.Ls,m=g.ks})),!r.isEqual(tt.min())){const g=t.hi.getLastRemoteSnapshotVersion(a).next(v=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));u.push(g)}return he.waitFor(u).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,h,m)).next(()=>h)}).then(a=>(t.Fs=s,a))}function X3(n,e,t){let r=ut(),s=ut();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=Pi();return t.forEach((u,h)=>{const m=a.get(u);h.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(u)),h.isNoDocument()&&h.version.isEqual(tt.min())?(e.removeEntry(u,h.readTime),c=c.insert(u,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||h.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(h),c=c.insert(u,h)):Pe(ix,"Ignoring outdated watch update for ",u,". Current version:",m.version," Watch version:",h.version)}),{Ls:c,ks:s}})}function J3(n,e){const t=rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Wy),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Z3(n,e){const t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.hi.getTargetData(r,e).next(a=>a?(s=a,he.resolve(s)):t.hi.allocateTargetId(r).next(c=>(s=new No(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function qv(n,e,t){const r=rt(n),s=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!Ac(c))throw c;Pe(ix,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function nb(n,e,t){const r=rt(n);let s=tt.min(),a=ut();return r.persistence.runTransaction("Execute query","readwrite",c=>function(h,m,g){const v=rt(h),y=v.Ms.get(g);return y!==void 0?he.resolve(v.Fs.get(y)):v.hi.getTargetData(m,g)}(r,c,zs(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,u.targetId).next(h=>{a=h})}).next(()=>r.Cs.getDocumentsMatchingQuery(c,e,t?s:tt.min(),t?a:ut())).next(u=>(eU(r,$V(e),u),{documents:u,qs:a})))}function eU(n,e,t){let r=n.xs.get(e)||tt.min();t.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.xs.set(e,r)}class rb{constructor(){this.activeTargetIds=KV()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tU{constructor(){this.Fo=new rb,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new rb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="ConnectivityMonitor";class ib{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Pe(sb,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Pe(sb,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh=null;function Wv(){return Qh===null?Qh=function(){return 268435456+Math.round(2147483648*Math.random())}():Qh++,"0x"+Qh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="RestConnection",rU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sU{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Vf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,a){const c=Wv(),u=this.Go(e,t.toUriEncodedString());Pe(Vg,`Sending RPC '${e}' ${c}:`,u,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(h,s,a);const{host:m}=new URL(u),g=Wa(m);return this.jo(e,u,h,r,g).then(v=>(Pe(Vg,`Received RPC '${e}' ${c}: `,v),v),v=>{throw Va(Vg,`RPC '${e}' ${c} failed with error: `,v,"url: ",u,"request:",r),v})}Jo(e,t,r,s,a,c){return this.Wo(e,t,r,s,a)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ic}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}Go(e,t){const r=rU[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wn="WebChannelConnection";class oU extends sU{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,s,a){const c=Wv();return new Promise((u,h)=>{const m=new WN;m.setWithCredentials(!0),m.listenOnce(HN.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case ff.NO_ERROR:const v=m.getResponseJson();Pe(Wn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),u(v);break;case ff.TIMEOUT:Pe(Wn,`RPC '${e}' ${c} timed out`),h(new Ce(ue.DEADLINE_EXCEEDED,"Request time out"));break;case ff.HTTP_ERROR:const y=m.getStatus();if(Pe(Wn,`RPC '${e}' ${c} failed with status:`,y,"response text:",m.getResponseText()),y>0){let b=m.getResponseJson();Array.isArray(b)&&(b=b[0]);const S=b==null?void 0:b.error;if(S&&S.status&&S.message){const E=function(A){const I=A.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(I)>=0?I:ue.UNKNOWN}(S.status);h(new Ce(E,S.message))}else h(new Ce(ue.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Ce(ue.UNAVAILABLE,"Connection failed."));break;default:Ye(9055,{c_:e,streamId:c,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{Pe(Wn,`RPC '${e}' ${c} completed.`)}});const g=JSON.stringify(s);Pe(Wn,`RPC '${e}' ${c} sending request:`,s),m.send(t,"POST",g,r,15)})}P_(e,t,r){const s=Wv(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=QN(),u=GN(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(h.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(h.useFetchStreams=!0),this.zo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const g=a.join("");Pe(Wn,`Creating RPC '${e}' stream ${s}: ${g}`,h);const v=c.createWebChannel(g,h);this.T_(v);let y=!1,b=!1;const S=new iU({Ho:x=>{b?Pe(Wn,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(y||(Pe(Wn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),y=!0),Pe(Wn,`RPC '${e}' stream ${s} sending:`,x),v.send(x))},Yo:()=>v.close()}),E=(x,A,I)=>{x.listen(A,C=>{try{I(C)}catch(O){setTimeout(()=>{throw O},0)}})};return E(v,xu.EventType.OPEN,()=>{b||(Pe(Wn,`RPC '${e}' stream ${s} transport opened.`),S.s_())}),E(v,xu.EventType.CLOSE,()=>{b||(b=!0,Pe(Wn,`RPC '${e}' stream ${s} transport closed`),S.__(),this.I_(v))}),E(v,xu.EventType.ERROR,x=>{b||(b=!0,Va(Wn,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),S.__(new Ce(ue.UNAVAILABLE,"The operation could not be completed")))}),E(v,xu.EventType.MESSAGE,x=>{var A;if(!b){const I=x.data[0];Tt(!!I,16349);const C=I,O=(C==null?void 0:C.error)||((A=C[0])===null||A===void 0?void 0:A.error);if(O){Pe(Wn,`RPC '${e}' stream ${s} received error:`,O);const V=O.status;let B=function(D){const k=un[D];if(k!==void 0)return IT(k)}(V),P=O.message;B===void 0&&(B=ue.INTERNAL,P="Unknown error status: "+V+" with message "+O.message),b=!0,S.__(new Ce(B,P)),v.close()}else Pe(Wn,`RPC '${e}' stream ${s} received:`,I),S.a_(I)}}),E(u,KN.STAT_EVENT,x=>{x.stat===Pv.PROXY?Pe(Wn,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===Pv.NOPROXY&&Pe(Wn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Ug(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(n){return new d3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-r);s>0&&Pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="PersistentStream";class qT{constructor(e,t,r,s,a,c,u,h){this.Fi=e,this.w_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new BT(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Ai(t.toString()),Ai("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===t&&this.W_(r,s)},r=>{e(()=>{const s=new Ce(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Pe(ob,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(Pe(ob,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aU extends qT{constructor(e,t,r,s,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=m3(this.serializer,e),r=function(a){if(!("targetChange"in a))return tt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?tt.min():c.readTime?Bs(c.readTime):tt.min()}(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=Bv(this.serializer),t.addTarget=function(a,c){let u;const h=c.target;if(u=Mv(h)?{documents:v3(a,h)}:{query:y3(a,h).Vt},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=PT(a,c.resumeToken);const m=Uv(a,c.expectedCount);m!==null&&(u.expectedCount=m)}else if(c.snapshotVersion.compareTo(tt.min())>0){u.readTime=qf(a,c.snapshotVersion.toTimestamp());const m=Uv(a,c.expectedCount);m!==null&&(u.expectedCount=m)}return u}(this.serializer,e);const r=w3(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=Bv(this.serializer),t.removeTarget=e,this.k_(t)}}class lU extends qT{constructor(e,t,r,s,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=g3(e.writeResults,e.commitTime),r=Bs(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=Bv(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>p3(this.serializer,r))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{}class uU extends cU{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Ce(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Wo(e,$v(t,r),s,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ce(ue.UNKNOWN,a.toString())})}Jo(e,t,r,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.Jo(e,$v(t,r),s,c,u,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ce(ue.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class dU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ai(t),this._a=!1):Pe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua="RemoteStore";class hU{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(c=>{r.enqueueAndForget(async()=>{Ya(this)&&(Pe(Ua,"Restarting streams for network reachability change."),await async function(h){const m=rt(h);m.Ia.add(4),await gd(m),m.Aa.set("Unknown"),m.Ia.delete(4),await Pm(m)}(this))})}),this.Aa=new dU(r,s)}}async function Pm(n){if(Ya(n))for(const e of n.da)await e(!0)}async function gd(n){for(const e of n.da)await e(!1)}function WT(n,e){const t=rt(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),cx(t)?lx(t):Pc(t).x_()&&ax(t,e))}function ox(n,e){const t=rt(n),r=Pc(t);t.Ta.delete(e),r.x_()&&HT(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ya(t)&&t.Aa.set("Unknown"))}function ax(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(tt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pc(n).H_(e)}function HT(n,e){n.Ra.$e(e),Pc(n).Y_(e)}function lx(n){n.Ra=new a3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Pc(n).start(),n.Aa.aa()}function cx(n){return Ya(n)&&!Pc(n).M_()&&n.Ta.size>0}function Ya(n){return rt(n).Ia.size===0}function KT(n){n.Ra=void 0}async function fU(n){n.Aa.set("Online")}async function mU(n){n.Ta.forEach((e,t)=>{ax(n,e)})}async function pU(n,e){KT(n),cx(n)?(n.Aa.la(e),lx(n)):n.Aa.set("Unknown")}async function gU(n,e,t){if(n.Aa.set("Online"),e instanceof AT&&e.state===2&&e.cause)try{await async function(s,a){const c=a.cause;for(const u of a.targetIds)s.Ta.has(u)&&(await s.remoteSyncer.rejectListen(u,c),s.Ta.delete(u),s.Ra.removeTarget(u))}(n,e)}catch(r){Pe(Ua,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Hf(n,r)}else if(e instanceof vf?n.Ra.Ye(e):e instanceof jT?n.Ra.it(e):n.Ra.et(e),!t.isEqual(tt.min()))try{const r=await zT(n.localStore);t.compareTo(r)>=0&&await function(a,c){const u=a.Ra.Pt(c);return u.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const g=a.Ta.get(m);g&&a.Ta.set(m,g.withResumeToken(h.resumeToken,c))}}),u.targetMismatches.forEach((h,m)=>{const g=a.Ta.get(h);if(!g)return;a.Ta.set(h,g.withResumeToken(Mn.EMPTY_BYTE_STRING,g.snapshotVersion)),HT(a,h);const v=new No(g.target,h,m,g.sequenceNumber);ax(a,v)}),a.remoteSyncer.applyRemoteEvent(u)}(n,t)}catch(r){Pe(Ua,"Failed to raise snapshot:",r),await Hf(n,r)}}async function Hf(n,e,t){if(!Ac(e))throw e;n.Ia.add(1),await gd(n),n.Aa.set("Offline"),t||(t=()=>zT(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Pe(Ua,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Pm(n)})}function GT(n,e){return e().catch(t=>Hf(n,t,e))}async function Rm(n){const e=rt(n),t=Wo(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Wy;for(;vU(e);)try{const s=await J3(e.localStore,r);if(s===null){e.Pa.length===0&&t.B_();break}r=s.batchId,yU(e,s)}catch(s){await Hf(e,s)}QT(e)&&YT(e)}function vU(n){return Ya(n)&&n.Pa.length<10}function yU(n,e){n.Pa.push(e);const t=Wo(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function QT(n){return Ya(n)&&!Wo(n).M_()&&n.Pa.length>0}function YT(n){Wo(n).start()}async function xU(n){Wo(n).na()}async function wU(n){const e=Wo(n);for(const t of n.Pa)e.X_(t.mutations)}async function _U(n,e,t){const r=n.Pa.shift(),s=Zy.from(r,e,t);await GT(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Rm(n)}async function EU(n,e){e&&Wo(n).Z_&&await async function(r,s){if(function(c){return i3(c)&&c!==ue.ABORTED}(s.code)){const a=r.Pa.shift();Wo(r).N_(),await GT(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Rm(r)}}(n,e),QT(n)&&YT(n)}async function ab(n,e){const t=rt(n);t.asyncQueue.verifyOperationInProgress(),Pe(Ua,"RemoteStore received new credentials");const r=Ya(t);t.Ia.add(3),await gd(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Pm(t)}async function bU(n,e){const t=rt(n);e?(t.Ia.delete(2),await Pm(t)):e||(t.Ia.add(2),await gd(t),t.Aa.set("Unknown"))}function Pc(n){return n.Va||(n.Va=function(t,r,s){const a=rt(t);return a.ia(),new aU(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Zo:fU.bind(null,n),e_:mU.bind(null,n),n_:pU.bind(null,n),J_:gU.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),cx(n)?lx(n):n.Aa.set("Unknown")):(await n.Va.stop(),KT(n))})),n.Va}function Wo(n){return n.ma||(n.ma=function(t,r,s){const a=rt(t);return a.ia(),new lU(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:xU.bind(null,n),n_:EU.bind(null,n),ea:wU.bind(null,n),ta:_U.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Rm(n)):(await n.ma.stop(),n.Pa.length>0&&(Pe(Ua,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Ro,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const c=Date.now()+r,u=new ux(e,t,c,s,a);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ce(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dx(n,e){if(Ai("AsyncQueue",`${e}: ${n}`),Ac(n))return new Ce(ue.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{static emptySet(e){return new Gl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=wu(),this.sortedSet=new Zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Gl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Gl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(){this.fa=new Zt(ze.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ye(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class mc{constructor(e,t,r,s,a,c,u,h,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const c=[];return t.forEach(u=>{c.push({type:0,doc:u})}),new mc(e,t,Gl.emptySet(t),c,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class NU{constructor(){this.queries=cb(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const s=rt(t),a=s.queries;s.queries=cb(),a.forEach((c,u)=>{for(const h of u.wa)h.onError(r)})})(this,new Ce(ue.ABORTED,"Firestore shutting down"))}}function cb(){return new Qa(n=>gT(n),Nm)}async function XT(n,e){const t=rt(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.ba()&&(r=2):(a=new SU,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(s,!0);break;case 1:a.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const u=dx(c,`Initialization of query '${Vl(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&hx(t)}async function JT(n,e){const t=rt(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const c=a.wa.indexOf(e);c>=0&&(a.wa.splice(c,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function TU(n,e){const t=rt(n);let r=!1;for(const s of e){const a=s.query,c=t.queries.get(a);if(c){for(const u of c.wa)u.Ca(s)&&(r=!0);c.ya=s}}r&&hx(t)}function CU(n,e,t){const r=rt(n),s=r.queries.get(e);if(s)for(const a of s.wa)a.onError(t);r.queries.delete(e)}function hx(n){n.Da.forEach(e=>{e.next()})}var Hv,ub;(ub=Hv||(Hv={})).Fa="default",ub.Cache="cache";class ZT{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new mc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=mc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Hv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.key=e}}class tC{constructor(e){this.key=e}}class IU{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ut(),this.mutatedKeys=ut(),this.Xa=vT(e),this.eu=new Gl(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new lb,s=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,c=s,u=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,v)=>{const y=s.get(g),b=Tm(this.query,v)?v:null,S=!!y&&this.mutatedKeys.has(y.key),E=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let x=!1;y&&b?y.data.isEqual(b.data)?S!==E&&(r.track({type:3,doc:b}),x=!0):this.iu(y,b)||(r.track({type:2,doc:b}),x=!0,(h&&this.Xa(b,h)>0||m&&this.Xa(b,m)<0)&&(u=!0)):!y&&b?(r.track({type:0,doc:b}),x=!0):y&&!b&&(r.track({type:1,doc:y}),x=!0,(h||m)&&(u=!0)),x&&(b?(c=c.add(b),a=E?a.add(g):a.delete(g)):(c=c.delete(g),a=a.delete(g)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{eu:c,ru:r,Ds:u,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((g,v)=>function(b,S){const E=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ye(20277,{At:x})}};return E(b)-E(S)}(g.type,v.type)||this.Xa(g.doc,v.doc)),this.su(r),s=s!=null&&s;const u=t&&!s?this.ou():[],h=this.Za.size===0&&this.current&&!s?1:0,m=h!==this.Ya;return this.Ya=h,c.length!==0||m?{snapshot:new mc(this.query,e.eu,a,c,e.mutatedKeys,h===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new lb,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ut(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new tC(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new eC(r))}),t}uu(e){this.Ha=e.qs,this.Za=ut();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return mc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const fx="SyncEngine";class jU{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class AU{constructor(e){this.key=e,this.lu=!1}}class PU{constructor(e,t,r,s,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Qa(u=>gT(u),Nm),this.Tu=new Map,this.Iu=new Set,this.du=new Zt(ze.comparator),this.Eu=new Map,this.Au=new nx,this.Ru={},this.Vu=new Map,this.mu=fc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function RU(n,e,t=!0){const r=aC(n);let s;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await nC(r,e,t,!0),s}async function kU(n,e){const t=aC(n);await nC(t,e,!0,!1)}async function nC(n,e,t,r){const s=await Z3(n.localStore,zs(e)),a=s.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let u;return r&&(u=await DU(n,e,a,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&WT(n.remoteStore,s),u}async function DU(n,e,t,r,s){n.gu=(v,y,b)=>async function(E,x,A,I){let C=x.view.nu(A);C.Ds&&(C=await nb(E.localStore,x.query,!1).then(({documents:P})=>x.view.nu(P,C)));const O=I&&I.targetChanges.get(x.targetId),V=I&&I.targetMismatches.get(x.targetId)!=null,B=x.view.applyChanges(C,E.isPrimaryClient,O,V);return hb(E,x.targetId,B._u),B.snapshot}(n,v,y,b);const a=await nb(n.localStore,e,!0),c=new IU(e,a.qs),u=c.nu(a.documents),h=pd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=c.applyChanges(u,n.isPrimaryClient,h);hb(n,t,m._u);const g=new jU(e,t,c);return n.Pu.set(e,g),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function OU(n,e,t){const r=rt(n),s=r.Pu.get(e),a=r.Tu.get(s.targetId);if(a.length>1)return r.Tu.set(s.targetId,a.filter(c=>!Nm(c,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await qv(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&ox(r.remoteStore,s.targetId),Kv(r,s.targetId)}).catch(jc)):(Kv(r,s.targetId),await qv(r.localStore,s.targetId,!0))}async function LU(n,e){const t=rt(n),r=t.Pu.get(e),s=t.Tu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ox(t.remoteStore,r.targetId))}async function MU(n,e,t){const r=qU(n);try{const s=await function(c,u){const h=rt(c),m=qt.now(),g=u.reduce((b,S)=>b.add(S.key),ut());let v,y;return h.persistence.runTransaction("Locally write mutations","readwrite",b=>{let S=Pi(),E=ut();return h.Os.getEntries(b,g).next(x=>{S=x,S.forEach((A,I)=>{I.isValidDocument()||(E=E.add(A))})}).next(()=>h.localDocuments.getOverlayedDocuments(b,S)).next(x=>{v=x;const A=[];for(const I of u){const C=e3(I,v.get(I.key).overlayedDocument);C!=null&&A.push(new Yo(I.key,C,lT(C.value.mapValue),fs.exists(!0)))}return h.mutationQueue.addMutationBatch(b,m,A,u)}).next(x=>{y=x;const A=x.applyToLocalDocumentSet(v,E);return h.documentOverlayCache.saveOverlays(b,x.batchId,A)})}).then(()=>({batchId:y.batchId,changes:xT(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(c,u,h){let m=c.Ru[c.currentUser.toKey()];m||(m=new Zt(at)),m=m.insert(u,h),c.Ru[c.currentUser.toKey()]=m}(r,s.batchId,t),await vd(r,s.changes),await Rm(r.remoteStore)}catch(s){const a=dx(s,"Failed to persist write");t.reject(a)}}async function rC(n,e){const t=rt(n);try{const r=await Y3(t.localStore,e);e.targetChanges.forEach((s,a)=>{const c=t.Eu.get(a);c&&(Tt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.lu=!0:s.modifiedDocuments.size>0?Tt(c.lu,14607):s.removedDocuments.size>0&&(Tt(c.lu,42227),c.lu=!1))}),await vd(t,r,e)}catch(r){await jc(r)}}function db(n,e,t){const r=rt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Pu.forEach((a,c)=>{const u=c.view.va(e);u.snapshot&&s.push(u.snapshot)}),function(c,u){const h=rt(c);h.onlineState=u;let m=!1;h.queries.forEach((g,v)=>{for(const y of v.wa)y.va(u)&&(m=!0)}),m&&hx(h)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function FU(n,e,t){const r=rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Eu.get(e),a=s&&s.key;if(a){let c=new Zt(ze.comparator);c=c.insert(a,Kn.newNoDocument(a,tt.min()));const u=ut().add(a),h=new jm(tt.min(),new Map,new Zt(at),c,u);await rC(r,h),r.du=r.du.remove(a),r.Eu.delete(e),mx(r)}else await qv(r.localStore,e,!1).then(()=>Kv(r,e,t)).catch(jc)}async function VU(n,e){const t=rt(n),r=e.batch.batchId;try{const s=await Q3(t.localStore,e);iC(t,r,null),sC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await vd(t,s)}catch(s){await jc(s)}}async function UU(n,e,t){const r=rt(n);try{const s=await function(c,u){const h=rt(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let g;return h.mutationQueue.lookupMutationBatch(m,u).next(v=>(Tt(v!==null,37113),g=v.keys(),h.mutationQueue.removeMutationBatch(m,v))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,g,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g)).next(()=>h.localDocuments.getDocuments(m,g))})}(r.localStore,e);iC(r,e,t),sC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await vd(r,s)}catch(s){await jc(s)}}function sC(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function iC(n,e,t){const r=rt(n);let s=r.Ru[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function Kv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||oC(n,r)})}function oC(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(ox(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),mx(n))}function hb(n,e,t){for(const r of t)r instanceof eC?(n.Au.addReference(r.key,e),$U(n,r)):r instanceof tC?(Pe(fx,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||oC(n,r.key)):Ye(19791,{yu:r})}function $U(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(Pe(fx,"New document in limbo: "+t),n.Iu.add(r),mx(n))}function mx(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new ze(Rt.fromString(e)),r=n.mu.next();n.Eu.set(r,new AU(t)),n.du=n.du.insert(t,r),WT(n.remoteStore,new No(zs(Yy(t.path)),r,"TargetPurposeLimboResolution",Em.ue))}}async function vd(n,e,t){const r=rt(n),s=[],a=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach((u,h)=>{c.push(r.gu(h,e,t).then(m=>{var g;if((m||t)&&r.isPrimaryClient){const v=m?!m.fromCache:(g=t==null?void 0:t.targetChanges.get(h.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(h.targetId,v?"current":"not-current")}if(m){s.push(m);const v=sx.Es(h.targetId,m);a.push(v)}}))}),await Promise.all(c),r.hu.J_(s),await async function(h,m){const g=rt(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>he.forEach(m,y=>he.forEach(y.Is,b=>g.persistence.referenceDelegate.addReference(v,y.targetId,b)).next(()=>he.forEach(y.ds,b=>g.persistence.referenceDelegate.removeReference(v,y.targetId,b)))))}catch(v){if(!Ac(v))throw v;Pe(ix,"Failed to update sequence numbers: "+v)}for(const v of m){const y=v.targetId;if(!v.fromCache){const b=g.Fs.get(y),S=b.snapshotVersion,E=b.withLastLimboFreeSnapshotVersion(S);g.Fs=g.Fs.insert(y,E)}}}(r.localStore,a))}async function zU(n,e){const t=rt(n);if(!t.currentUser.isEqual(e)){Pe(fx,"User change. New user:",e.toKey());const r=await $T(t.localStore,e);t.currentUser=e,function(a,c){a.Vu.forEach(u=>{u.forEach(h=>{h.reject(new Ce(ue.CANCELLED,c))})}),a.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vd(t,r.Bs)}}function BU(n,e){const t=rt(n),r=t.Eu.get(e);if(r&&r.lu)return ut().add(r.key);{let s=ut();const a=t.Tu.get(e);if(!a)return s;for(const c of a){const u=t.Pu.get(c);s=s.unionWith(u.view.tu)}return s}}function aC(n){const e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FU.bind(null,e),e.hu.J_=TU.bind(null,e.eventManager),e.hu.pu=CU.bind(null,e.eventManager),e}function qU(n){const e=rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UU.bind(null,e),e}class Kf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Am(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return G3(this.persistence,new W3,e.initialUser,this.serializer)}Du(e){return new UT(rx.Vi,this.serializer)}bu(e){return new tU}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kf.provider={build:()=>new Kf};class WU extends Kf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Tt(this.persistence.referenceDelegate instanceof Wf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new A3(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?gr.withCacheSize(this.cacheSizeBytes):gr.DEFAULT;return new UT(r=>Wf.Vi(r,t),this.serializer)}}class Gv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>db(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zU.bind(null,this.syncEngine),await bU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new NU}()}createDatastore(e){const t=Am(e.databaseInfo.databaseId),r=function(a){return new oU(a)}(e.databaseInfo);return function(a,c,u,h){return new uU(a,c,u,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,a,c,u){return new hU(r,s,a,c,u)}(this.localStore,this.datastore,e.asyncQueue,t=>db(this.syncEngine,t,0),function(){return ib.C()?new ib:new nU}())}createSyncEngine(e,t){return function(s,a,c,u,h,m,g){const v=new PU(s,a,c,u,h,m);return g&&(v.fu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const a=rt(s);Pe(Ua,"RemoteStore shutting down."),a.Ia.add(5),await gd(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Gv.provider={build:()=>new Gv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ai("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="FirestoreClient";class HU{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=pr.UNAUTHENTICATED,this.clientId=By.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{Pe(Ho,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Pe(Ho,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ro;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=dx(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $g(n,e){n.asyncQueue.verifyOperationInProgress(),Pe(Ho,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await $T(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{Va("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{Pe("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{Va("Terminating Firestore due to IndexedDb database deletion failed",s)})}),n._offlineComponents=e}async function fb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await KU(n);Pe(Ho,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>ab(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>ab(e.remoteStore,s)),n._onlineComponents=e}async function KU(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Pe(Ho,"Using user provided OfflineComponentProvider");try{await $g(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===ue.FAILED_PRECONDITION||s.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Va("Error using user provided cache. Falling back to memory cache: "+t),await $g(n,new Kf)}}else Pe(Ho,"Using default OfflineComponentProvider"),await $g(n,new WU(void 0));return n._offlineComponents}async function cC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Pe(Ho,"Using user provided OnlineComponentProvider"),await fb(n,n._uninitializedComponentsProvider._online)):(Pe(Ho,"Using default OnlineComponentProvider"),await fb(n,new Gv))),n._onlineComponents}function GU(n){return cC(n).then(e=>e.syncEngine)}async function Qv(n){const e=await cC(n),t=e.eventManager;return t.onListen=RU.bind(null,e.syncEngine),t.onUnlisten=OU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=LU.bind(null,e.syncEngine),t}function QU(n,e,t={}){const r=new Ro;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,u,h,m){const g=new lC({next:y=>{g.Ou(),c.enqueueAndForget(()=>JT(a,v)),y.fromCache&&h.source==="server"?m.reject(new Ce(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(y)},error:y=>m.reject(y)}),v=new ZT(u,g,{includeMetadataChanges:!0,ka:!0});return XT(a,v)}(await Qv(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU="firestore.googleapis.com",pb=!0;class gb{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ce(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=YU,this.ssl=pb}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:pb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=FT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VT)throw new Ce(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ce(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ce(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ce(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class km{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ce(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ce(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new oV;switch(r.type){case"firstParty":return new cV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ce(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=mb.get(t);r&&(Pe("ComponentProvider","Removing Datastore"),mb.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Li(this.firestore,e,this._query)}}class mn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ko(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}toJSON(){return{type:mn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(fd(t,mn._jsonSchema))return new mn(e,r||null,new ze(Rt.fromString(t.referencePath)))}}mn._jsonSchemaVersion="firestore/documentReference/1.0",mn._jsonSchema={type:fn("string",mn._jsonSchemaVersion),referencePath:fn("string")};class ko extends Li{constructor(e,t,r){super(e,t,Yy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new ze(e))}withConverter(e){return new ko(this.firestore,e,this._path)}}function it(n,e,...t){if(n=pn(n),qy("collection","path",e),n instanceof km){const r=Rt.fromString(e,...t);return jE(r),new ko(n,null,r)}{if(!(n instanceof mn||n instanceof ko))throw new Ce(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rt.fromString(e,...t));return jE(r),new ko(n.firestore,null,r)}}function Si(n,e){if(n=$s(n,km),qy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ce(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Li(n,null,function(r){return new Ga(Rt.emptyPath(),r)}(e))}function jt(n,e,...t){if(n=pn(n),arguments.length===1&&(e=By.newId()),qy("doc","path",e),n instanceof km){const r=Rt.fromString(e,...t);return IE(r),new mn(n,null,new ze(r))}{if(!(n instanceof mn||n instanceof ko))throw new Ce(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rt.fromString(e,...t));return IE(r),new mn(n.firestore,n instanceof ko?n.converter:null,new ze(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb="AsyncQueue";class yb{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new BT(this,"async_queue_retry"),this.oc=()=>{const r=Ug();r&&Pe(vb,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=Ug();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Ug();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new Ro;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ac(e))throw e;Pe(vb,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ai("INTERNAL UNHANDLED ERROR: ",xb(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=ux.createAndSchedule(this,e,t,r,a=>this.lc(a));return this.ec.push(s),s}ac(){this.tc&&Ye(47125,{hc:xb(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function xb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(n,["next","error","complete"])}class $a extends km{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new yb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yb(e),this._firestoreClient=void 0,await e}}}function XU(n,e,t){t||(t=Vf);const r=gm(n,"firestore");if(r.isInitialized(t)){const s=r.getImmediate({identifier:t}),a=r.getOptions(t);if(Oa(a,e))return s;throw new Ce(ue.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Ce(ue.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VT)throw new Ce(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Wa(e.host)&&Py(e.host),r.initialize({options:e,instanceIdentifier:t})}function px(n){if(n._terminated)throw new Ce(ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||JU(n),n._firestoreClient}function JU(n){var e,t,r;const s=n._freezeSettings(),a=function(u,h,m,g){return new NV(u,h,m,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,uC(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new HU(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wr(Mn.fromBase64String(e))}catch(t){throw new Ce(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wr(Mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fd(e,Wr._jsonSchema))return Wr.fromBase64String(e.bytes)}}Wr._jsonSchemaVersion="firestore/bytes/1.0",Wr._jsonSchema={type:fn("string",Wr._jsonSchemaVersion),bytes:fn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ce(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new On(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function ZU(){return new yd(kv)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ce(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ce(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return at(this._lat,e._lat)||at(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qs._jsonSchemaVersion}}static fromJSON(e){if(fd(e,qs._jsonSchema))return new qs(e.latitude,e.longitude)}}qs._jsonSchemaVersion="firestore/geoPoint/1.0",qs._jsonSchema={type:fn("string",qs._jsonSchemaVersion),latitude:fn("number"),longitude:fn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ws._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fd(e,Ws._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Ws(e.vectorValues);throw new Ce(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ws._jsonSchemaVersion="firestore/vectorValue/1.0",Ws._jsonSchema={type:fn("string",Ws._jsonSchemaVersion),vectorValues:fn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=/^__.*__$/;class t6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Yo(e,this.data,this.fieldMask,t,this.fieldTransforms):new md(e,this.data,t,this.fieldTransforms)}}class dC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Yo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ye(40011,{Ec:n})}}class vx{constructor(e,t,r,s,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new vx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Gf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(hC(this.Ec)&&e6.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class n6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Am(e)}Dc(e,t,r,s=!1){return new vx({Ec:e,methodName:t,bc:r,path:On.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yx(n){const e=n._freezeSettings(),t=Am(n._databaseId);return new n6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function r6(n,e,t,r,s,a={}){const c=n.Dc(a.merge||a.mergeFields?2:0,e,t,s);xx("Data must be an object, but it was:",c,r);const u=fC(r,c);let h,m;if(a.merge)h=new Ar(c.fieldMask),m=c.fieldTransforms;else if(a.mergeFields){const g=[];for(const v of a.mergeFields){const y=Yv(e,v,t);if(!c.contains(y))throw new Ce(ue.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);pC(g,y)||g.push(y)}h=new Ar(g),m=c.fieldTransforms.filter(v=>h.covers(v.field))}else h=null,m=c.fieldTransforms;return new t6(new vr(u),h,m)}class Dm extends gx{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dm}}function s6(n,e,t,r){const s=n.Dc(1,e,t);xx("Data must be an object, but it was:",s,r);const a=[],c=vr.empty();Qo(r,(h,m)=>{const g=wx(e,h,t);m=pn(m);const v=s.gc(g);if(m instanceof Dm)a.push(g);else{const y=xd(m,v);y!=null&&(a.push(g),c.set(g,y))}});const u=new Ar(a);return new dC(c,u,s.fieldTransforms)}function i6(n,e,t,r,s,a){const c=n.Dc(1,e,t),u=[Yv(e,r,t)],h=[s];if(a.length%2!=0)throw new Ce(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<a.length;y+=2)u.push(Yv(e,a[y])),h.push(a[y+1]);const m=[],g=vr.empty();for(let y=u.length-1;y>=0;--y)if(!pC(m,u[y])){const b=u[y];let S=h[y];S=pn(S);const E=c.gc(b);if(S instanceof Dm)m.push(b);else{const x=xd(S,E);x!=null&&(m.push(b),g.set(b,x))}}const v=new Ar(m);return new dC(g,v,c.fieldTransforms)}function o6(n,e,t,r=!1){return xd(t,n.Dc(r?4:3,e))}function xd(n,e){if(mC(n=pn(n)))return xx("Unsupported field value:",e,n),fC(n,e);if(n instanceof gx)return function(r,s){if(!hC(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const a=[];let c=0;for(const u of r){let h=xd(u,s.yc(c));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),c++}return{arrayValue:{values:a}}}(n,e)}return function(r,s){if((r=pn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return GV(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=qt.fromDate(r);return{timestampValue:qf(s.serializer,a)}}if(r instanceof qt){const a=new qt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qf(s.serializer,a)}}if(r instanceof qs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wr)return{bytesValue:PT(s.serializer,r._byteString)};if(r instanceof mn){const a=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw s.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:tx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ws)return function(c,u){return{mapValue:{fields:{[oT]:{stringValue:aT},[Uf]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw u.wc("VectorValues must only contain numeric values.");return Xy(u.serializer,m)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${_m(r)}`)}(n,e)}function fC(n,e){const t={};return eT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qo(n,(r,s)=>{const a=xd(s,e.Vc(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function mC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof qt||n instanceof qs||n instanceof Wr||n instanceof mn||n instanceof gx||n instanceof Ws)}function xx(n,e,t){if(!mC(t)||!JN(t)){const r=_m(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Yv(n,e,t){if((e=pn(e))instanceof yd)return e._internalPath;if(typeof e=="string")return wx(n,e);throw Gf("Field path arguments must be of type string or ",n,!1,void 0,t)}const a6=new RegExp("[~\\*/\\[\\]]");function wx(n,e,t){if(e.search(a6)>=0)throw Gf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new yd(...e.split("."))._internalPath}catch{throw Gf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Gf(n,e,t,r,s){const a=r&&!r.isEmpty(),c=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(a||c)&&(h+=" (found",a&&(h+=` in field ${r}`),c&&(h+=` in document ${s}`),h+=")"),new Ce(ue.INVALID_ARGUMENT,u+n+h)}function pC(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new l6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Om("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class l6 extends gC{data(){return super.data()}}function Om(n,e){return typeof e=="string"?wx(n,e):e instanceof yd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ce(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _x{}class yC extends _x{}function Rr(n,e,...t){let r=[];e instanceof _x&&r.push(e),r=r.concat(t),function(a){const c=a.filter(h=>h instanceof Ex).length,u=a.filter(h=>h instanceof Lm).length;if(c>1||c>0&&u>0)throw new Ce(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Lm extends yC{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Lm(e,t,r)}_apply(e){const t=this._parse(e);return xC(e._query,t),new Li(e.firestore,e.converter,Fv(e._query,t))}_parse(e){const t=yx(e.firestore);return function(a,c,u,h,m,g,v){let y;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new Ce(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Eb(v,g);const S=[];for(const E of v)S.push(_b(h,a,E));y={arrayValue:{values:S}}}else y=_b(h,a,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Eb(v,g),y=o6(u,c,v,g==="in"||g==="not-in");return hn.create(m,g,y)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function c6(n,e,t){const r=e,s=Om("where",n);return Lm._create(s,r,t)}class Ex extends _x{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ex(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:vs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,a){let c=s;const u=a.getFlattenedFilters();for(const h of u)xC(c,h),c=Fv(c,h)}(e._query,t),new Li(e.firestore,e.converter,Fv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bx extends yC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new bx(e,t)}_apply(e){const t=function(s,a,c){if(s.startAt!==null)throw new Ce(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ce(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xu(a,c)}(e._query,this._field,this._direction);return new Li(e.firestore,e.converter,function(s,a){const c=s.explicitOrderBy.concat([a]);return new Ga(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function wd(n,e="asc"){const t=e,r=Om("orderBy",n);return bx._create(r,t)}function _b(n,e,t){if(typeof(t=pn(t))=="string"){if(t==="")throw new Ce(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pT(e)&&t.indexOf("/")!==-1)throw new Ce(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Rt.fromString(t));if(!ze.isDocumentKey(r))throw new Ce(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ME(n,new ze(r))}if(t instanceof mn)return ME(n,t._key);throw new Ce(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_m(t)}.`)}function Eb(n,e){if(!Array.isArray(n)||n.length===0)throw new Ce(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xC(n,e){const t=function(s,a){for(const c of s)for(const u of c.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Ce(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ce(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class u6{convertValue(e,t="none"){switch(qo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Qo(e,(s,a)=>{r[s]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[Uf].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(c=>sn(c.doubleValue));return new Ws(a)}convertGeoPoint(e){return new qs(sn(e.latitude),sn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Sm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Gu(e));default:return null}}convertTimestamp(e){const t=zo(e);return new qt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Rt.fromString(e);Tt(MT(r),9688,{name:e});const s=new Qu(r.get(1),r.get(3)),a=new ze(r.popFirst(5));return s.isEqual(t)||Ai(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Eu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ja extends gC{constructor(e,t,r,s,a,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Om("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ja._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ja._jsonSchemaVersion="firestore/documentSnapshot/1.0",ja._jsonSchema={type:fn("string",ja._jsonSchemaVersion),bundleSource:fn("string","DocumentSnapshot"),bundleName:fn("string"),bundle:fn("string")};class yf extends ja{data(e={}){return super.data(e)}}class Aa{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Eu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new yf(this._firestore,this._userDataWriter,r.key,r,new Eu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ce(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(u=>{const h=new yf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Eu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>a||u.type!==3).map(u=>{const h=new yf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Eu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,g=-1;return u.type!==0&&(m=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:h6(u.type),doc:h,oldIndex:m,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Aa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=By.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function h6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ye(61501,{type:n})}}Aa._jsonSchemaVersion="firestore/querySnapshot/1.0",Aa._jsonSchema={type:fn("string",Aa._jsonSchemaVersion),bundleSource:fn("string","QuerySnapshot"),bundleName:fn("string"),bundle:fn("string")};class Sx extends u6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,t)}}function Ot(n){n=$s(n,Li);const e=$s(n.firestore,$a),t=px(e),r=new Sx(e);return vC(n._query),QU(t,n._query).then(s=>new Aa(e,r,n,s))}function dn(n,e,t,...r){n=$s(n,mn);const s=$s(n.firestore,$a),a=yx(s);let c;return c=typeof(e=pn(e))=="string"||e instanceof yd?i6(a,"updateDoc",n._key,e,t,r):s6(a,"updateDoc",n._key,e),Nx(s,[c.toMutation(n._key,fs.exists(!0))])}function jr(n){return Nx($s(n.firestore,$a),[new Jy(n._key,fs.none())])}function jn(n,e){const t=$s(n.firestore,$a),r=jt(n),s=d6(n.converter,e);return Nx(t,[r6(yx(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,fs.exists(!1))]).then(()=>r)}function Xo(n,...e){var t,r,s;n=pn(n);let a={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||wb(e[c])||(a=e[c++]);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(wb(e[c])){const v=e[c];e[c]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[c+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[c+2]=(s=v.complete)===null||s===void 0?void 0:s.bind(v)}let h,m,g;if(n instanceof mn)m=$s(n.firestore,$a),g=Yy(n._key.path),h={next:v=>{e[c]&&e[c](f6(m,n,v))},error:e[c+1],complete:e[c+2]};else{const v=$s(n,Li);m=$s(v.firestore,$a),g=v._query;const y=new Sx(m);h={next:b=>{e[c]&&e[c](new Aa(m,y,v,b))},error:e[c+1],complete:e[c+2]},vC(n._query)}return function(y,b,S,E){const x=new lC(E),A=new ZT(b,x,S);return y.asyncQueue.enqueueAndForget(async()=>XT(await Qv(y),A)),()=>{x.Ou(),y.asyncQueue.enqueueAndForget(async()=>JT(await Qv(y),A))}}(px(m),g,u,h)}function Nx(n,e){return function(r,s){const a=new Ro;return r.asyncQueue.enqueueAndForget(async()=>MU(await GU(r),s,a)),a.promise}(px(n),e)}function f6(n,e,t){const r=t.docs.get(e._key),s=new Sx(n);return new ja(n,s,e._key,r,new Eu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){Ic=s})(Ha),La(new Uo("firestore",(r,{instanceIdentifier:s,options:a})=>{const c=r.getProvider("app").getImmediate(),u=new $a(new aV(r.getProvider("auth-internal")),new uV(c,r.getProvider("app-check-internal")),function(m,g){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ce(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qu(m.options.projectId,g)}(c,s),c);return a=Object.assign({useFetchStreams:t},a),u._setSettings(a),u},"PUBLIC").setMultipleInstances(!0)),Fs(SE,NE,e),Fs(SE,NE,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="firebasestorage.googleapis.com",m6="storageBucket",p6=2*60*1e3,g6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends Zs{constructor(e,t,r=0){super(zg(e),`Firebase Storage: ${t} (${zg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ei.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Qs;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qs||(Qs={}));function zg(n){return"storage/"+n}function v6(){const n="An unknown error occurred, please check the error payload for server response.";return new ei(Qs.UNKNOWN,n)}function y6(){return new ei(Qs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function x6(){return new ei(Qs.CANCELED,"User canceled the upload/download.")}function w6(n){return new ei(Qs.INVALID_URL,"Invalid URL '"+n+"'.")}function _6(n){return new ei(Qs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function bb(n){return new ei(Qs.INVALID_ARGUMENT,n)}function _C(){return new ei(Qs.APP_DELETED,"The Firebase app was deleted.")}function E6(n){return new ei(Qs.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=hs.makeFromUrl(e,t)}catch{return new hs(e,"")}if(r.path==="")return r;throw _6(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+s+c,"i"),h={bucket:1,path:3};function m(O){O.path_=decodeURIComponent(O.path)}const g="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",b=new RegExp(`^https?://${v}/${g}/b/${s}/o${y}`,"i"),S={bucket:1,path:3},E=t===wC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,x="([^?#]*)",A=new RegExp(`^https?://${E}/${s}/${x}`,"i"),C=[{regex:u,indices:h,postModify:a},{regex:b,indices:S,postModify:m},{regex:A,indices:{bucket:1,path:2},postModify:m}];for(let O=0;O<C.length;O++){const V=C[O],B=V.regex.exec(e);if(B){const P=B[V.indices.bucket];let R=B[V.indices.path];R||(R=""),r=new hs(P,R),V.postModify(r);break}}if(r==null)throw w6(e);return r}}class b6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(n,e,t){let r=1,s=null,a=null,c=!1,u=0;function h(){return u===2}let m=!1;function g(...x){m||(m=!0,e.apply(null,x))}function v(x){s=setTimeout(()=>{s=null,n(b,h())},x)}function y(){a&&clearTimeout(a)}function b(x,...A){if(m){y();return}if(x){y(),g.call(null,x,...A);return}if(h()||c){y(),g.call(null,x,...A);return}r<64&&(r*=2);let C;u===1?(u=2,C=0):C=(r+Math.random())*1e3,v(C)}let S=!1;function E(x){S||(S=!0,y(),!m&&(s!==null?(x||(u=2),clearTimeout(s),v(0)):x||(u=1)))}return v(0),a=setTimeout(()=>{c=!0,E(!0)},t),E}function N6(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T6(n){return n!==void 0}function Sb(n,e,t,r){if(r<e)throw bb(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw bb(`Invalid value for '${n}'. Expected ${t} or less.`)}function C6(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Qf;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Qf||(Qf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,t,r,s,a,c,u,h,m,g,v,y=!0,b=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=h,this.timeout_=m,this.progressCallback_=g,this.connectionFactory_=v,this.retry=y,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,E)=>{this.resolve_=S,this.reject_=E,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Yh(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const c=u=>{const h=u.loaded,m=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,m)};this.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const u=a.getErrorCode()===Qf.NO_ERROR,h=a.getStatus();if(!u||I6(h,this.additionalRetryCodes_)&&this.retry){const g=a.getErrorCode()===Qf.ABORT;r(!1,new Yh(!1,null,g));return}const m=this.successCodes_.indexOf(h)!==-1;r(!0,new Yh(m,a))})},t=(r,s)=>{const a=this.resolve_,c=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());T6(h)?a(h):a()}catch(h){c(h)}else if(u!==null){const h=v6();h.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,h)):c(h)}else if(s.canceled){const h=this.appDelete_?_C():x6();c(h)}else{const h=y6();c(h)}};this.canceled_?t(!1,new Yh(!1,null,!0)):this.backoffId_=S6(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&N6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function A6(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function P6(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function R6(n,e){e&&(n["X-Firebase-GMPID"]=e)}function k6(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function D6(n,e,t,r,s,a,c=!0,u=!1){const h=C6(n.urlParams),m=n.url+h,g=Object.assign({},n.headers);return R6(g,e),A6(g,t),P6(g,a),k6(g,r),new j6(m,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,c,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function L6(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,t){this._service=e,t instanceof hs?this._location=t:this._location=hs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Yf(e,t)}get root(){const e=new hs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return L6(this._location.path)}get storage(){return this._service}get parent(){const e=O6(this._location.path);if(e===null)return null;const t=new hs(this._location.bucket,e);return new Yf(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw E6(e)}}function Nb(n,e){const t=e==null?void 0:e[m6];return t==null?null:hs.makeFromBucketSpec(t,n)}function M6(n,e,t,r={}){n.host=`${e}:${t}`;const s=Wa(e);s&&(Py(`https://${n.host}/b`),rN("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:gL(a,n.app.options.projectId))}class F6{constructor(e,t,r,s,a,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=c,this._bucket=null,this._host=wC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=p6,this._maxUploadRetryTime=g6,this._requests=new Set,s!=null?this._bucket=hs.makeFromBucketSpec(s,this._host):this._bucket=Nb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=hs.makeFromBucketSpec(this._url,e):this._bucket=Nb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Sb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Sb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(qr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yf(this,e)}_makeRequest(e,t,r,s,a=!0){if(this._deleted)return new b6(_C());{const c=D6(e,this._appId,r,s,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const Tb="@firebase/storage",Cb="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="storage";function V6(n=aN(),e){n=pn(n);const r=gm(n,EC).getImmediate({identifier:e}),s=mL("storage");return s&&U6(r,...s),r}function U6(n,e,t,r={}){M6(n,e,t,r)}function $6(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new F6(t,r,s,e,Ha)}function z6(){La(new Uo(EC,$6,"PUBLIC").setMultipleInstances(!0)),Fs(Tb,Cb,""),Fs(Tb,Cb,"esm2017")}z6();const B6={apiKey:"AIzaSyDUR89i6kvh3bp51GCgBX0fTwh3bFt1Ksg",authDomain:"medjust-d26eb.firebaseapp.com",projectId:"medjust-d26eb",storageBucket:"medjust-d26eb.appspot.com",messagingSenderId:"631362355665",appId:"1:631362355665:web:4d7f8eadba1bca0969e0f0"},Tx=oN(B6),Bg=tV(Tx),Ue=XU(Tx,{experimentalForceLongPolling:!0,useFetchStreams:!1});V6(Tx);const bC=_.createContext(void 0);function Cx(){const n=_.useContext(bC);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function q6({children:n}){const[e,t]=_.useState(null),[r,s]=_.useState(!0),[a,c]=_.useState(null),u=v=>new Promise(y=>setTimeout(y,v)),h=async(v,y)=>{if(typeof navigator<"u"&&!navigator.onLine){const x=new Error("No network connection (navigator offline)");throw console.error("Login pre-check failed:",x),c("No network connection - please connect to the internet"),x}const b=3;let S=0,E=null;for(;S<b;){S+=1;try{await U4(Bg,v,y),c(null);return}catch(x){if(E=x,console.error(`Login attempt ${S} failed:`,x),!((x==null?void 0:x.code)==="auth/network-request-failed"||(x==null?void 0:x.message)&&x.message.toLowerCase().includes("fetch")))throw(x==null?void 0:x.code)==="auth/wrong-password"||(x==null?void 0:x.code)==="auth/user-not-found"?c("Invalid email or password"):c("Authentication error - see console for details"),x;if(c(`Network error (attempt ${S} of ${b}) - checking connection...`),S<b){const I=500*Math.pow(2,S-1);console.log(`Retrying login in ${I}ms...`),await u(I);continue}}}throw console.error("Login failed after retries:",E),c("Network error - unable to reach Firebase. Check your internet connection, disabling browser extensions (adblockers), or ensure your site domain is added to Firebase Authentication -> Authorized domains."),E},m=async()=>{try{await q4(Bg),c(null)}catch(v){console.error("Logout error:",v),t(null)}};_.useEffect(()=>{const v=setTimeout(()=>{r&&(console.log("ðŸ”„ Auth taking too long - continuing without authentication"),s(!1))},5e3),y=B4(Bg,b=>{clearTimeout(v),t(b),s(!1),c(null)},b=>{clearTimeout(v),console.error("Auth state change error:",b),c("Authentication error - working offline"),s(!1)});return()=>{clearTimeout(v),y()}},[]);const g={currentUser:e,login:h,logout:m,loading:r,authError:a};return l.jsx(bC.Provider,{value:g,children:!r&&n})}const W6=sd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),se=_.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},a)=>{const c=r?Ra:"button";return l.jsx(c,{className:et(W6({variant:e,size:t,className:n})),ref:a,...s})});se.displayName="Button";const we=_.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:et("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));we.displayName="Card";const Ge=_.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:et("flex flex-col space-y-1.5 p-6",n),...e}));Ge.displayName="CardHeader";const Xe=_.forwardRef(({className:n,...e},t)=>l.jsx("h3",{ref:t,className:et("text-2xl font-semibold leading-none tracking-tight",n),...e}));Xe.displayName="CardTitle";const At=_.forwardRef(({className:n,...e},t)=>l.jsx("p",{ref:t,className:et("text-sm text-muted-foreground",n),...e}));At.displayName="CardDescription";const _e=_.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:et("p-6 pt-0",n),...e}));_e.displayName="CardContent";const H6=_.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:et("flex items-center p-6 pt-0",n),...e}));H6.displayName="CardFooter";class K6 extends Ne.Component{constructor(t){super(t);X0(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),window.location.replace(window.location.href)});this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("ErrorBoundary caught an error:",t,r),(t.message.includes("fetch")||t.message.includes("Firebase")||t.message.includes("Firestore"))&&console.log("ðŸ”„ Firebase error detected - this is a known connectivity issue"),this.setState({error:t,errorInfo:r})}render(){var t,r,s;if(this.state.hasError){const a=((t=this.state.error)==null?void 0:t.message.includes("fetch"))||((r=this.state.error)==null?void 0:r.message.includes("Firebase"))||((s=this.state.error)==null?void 0:s.message.includes("Firestore"));return l.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:l.jsxs(we,{className:"max-w-md w-full",children:[l.jsx(Ge,{children:l.jsxs(Xe,{className:"flex items-center gap-2 text-destructive",children:[l.jsx(IR,{className:"h-5 w-5"}),a?"Connection Error":"Application Error"]})}),l.jsxs(_e,{className:"space-y-4",children:[l.jsx("p",{className:"text-muted-foreground",children:a?"There's a connectivity issue with Firebase services. The app will work in offline mode.":"Something went wrong. Please try refreshing the page."}),!1,l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(se,{onClick:this.handleRetry,className:"flex-1",children:[l.jsx(NR,{className:"h-4 w-4 mr-2"}),"Retry"]}),l.jsx(se,{variant:"outline",onClick:()=>window.location.href="/admin/years",className:"flex-1",children:"Go to Years"})]})]})]})})}return this.props.children}}var Ix="Avatar",[G6,Lz]=ki(Ix),[Q6,SC]=G6(Ix),NC=_.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,a]=_.useState("idle");return l.jsx(Q6,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:l.jsx(We.span,{...r,ref:e})})});NC.displayName=Ix;var TC="AvatarImage",CC=_.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...a}=n,c=SC(TC,t),u=Y6(r),h=En(m=>{s(m),c.onImageLoadingStatusChange(m)});return Gt(()=>{u!=="idle"&&h(u)},[u,h]),u==="loaded"?l.jsx(We.img,{...a,ref:e,src:r}):null});CC.displayName=TC;var IC="AvatarFallback",jC=_.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,a=SC(IC,t),[c,u]=_.useState(r===void 0);return _.useEffect(()=>{if(r!==void 0){const h=window.setTimeout(()=>u(!0),r);return()=>window.clearTimeout(h)}},[r]),c&&a.imageLoadingStatus!=="loaded"?l.jsx(We.span,{...s,ref:e}):null});jC.displayName=IC;function Y6(n){const[e,t]=_.useState("idle");return Gt(()=>{if(!n){t("error");return}let r=!0;const s=new window.Image,a=c=>()=>{r&&t(c)};return t("loading"),s.onload=a("loaded"),s.onerror=a("error"),s.src=n,()=>{r=!1}},[n]),e}var AC=NC,PC=CC,RC=jC;const pc=_.forwardRef(({className:n,...e},t)=>l.jsx(AC,{ref:t,className:et("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));pc.displayName=AC.displayName;const ed=_.forwardRef(({className:n,...e},t)=>l.jsx(PC,{ref:t,className:et("aspect-square h-full w-full",n),...e}));ed.displayName=PC.displayName;const gc=_.forwardRef(({className:n,...e},t)=>l.jsx(RC,{ref:t,className:et("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));gc.displayName=RC.displayName;const X6=[{icon:_R,label:"Dashboard",path:"/admin"},{icon:Ef,label:"News",path:"/admin/news"},{icon:us,label:"Years",path:"/admin/years"},{icon:sc,label:"Users",path:"/admin/users"},{icon:sc,label:"Professors",path:"/admin/professors"},{icon:py,label:"Store",path:"/admin/store"},{icon:Hs,label:"Orders",path:"/admin/orders"},{icon:Ni,label:"Research",path:"/admin/research"},{icon:Mu,label:"Maps",path:"/admin/maps"},{icon:$1,label:"Settings",path:"/admin/settings"}];function J6({isOpen:n}){return l.jsx("div",{className:et("fixed left-0 top-16 h-[calc(100vh-4rem)] bg-card border-r transition-all duration-300 z-40",n?"w-64":"w-16"),children:l.jsx("nav",{className:"p-4 space-y-2",children:X6.map(e=>l.jsxs("div",{children:[l.jsxs(q_,{to:e.path,className:({isActive:t})=>et("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors","hover:bg-accent hover:text-accent-foreground",t&&"bg-primary text-primary-foreground hover:bg-primary/90",!n&&"justify-center"),children:[l.jsx(e.icon,{className:"h-5 w-5 flex-shrink-0"}),n&&l.jsx("span",{className:"font-medium",children:e.label})]}),e.children&&n&&l.jsx("div",{className:"ml-6 mt-2 space-y-1",children:e.children.map(t=>l.jsxs(q_,{to:t.path,className:({isActive:r})=>et("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors text-sm","hover:bg-accent hover:text-accent-foreground",r&&"bg-primary text-primary-foreground hover:bg-primary/90"),children:[l.jsx(t.icon,{className:"h-4 w-4 flex-shrink-0"}),l.jsx("span",{children:t.label})]},t.path))})]},e.path))})})}function Z6(){var a;const[n,e]=_.useState(!0),{currentUser:t,logout:r}=Cx(),s=async()=>{try{await r()}catch(c){console.error("Error logging out:",c)}};return l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-card shadow-sm",children:l.jsxs("div",{className:"flex h-16 items-center px-4",children:[l.jsx(se,{variant:"ghost",size:"icon",onClick:()=>e(!n),className:"mr-4",children:l.jsx(SR,{className:"h-5 w-5"})}),l.jsx("div",{className:"flex-1",children:l.jsx("h1",{className:"text-xl font-semibold text-primary",children:"MedJust Admin Dashboard"})}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(pc,{className:"h-8 w-8",children:l.jsx(gc,{children:l.jsx(bo,{className:"h-4 w-4"})})}),l.jsx("span",{className:"text-sm font-medium",children:((a=t==null?void 0:t.email)==null?void 0:a.split("@")[0])||"Admin"})]}),l.jsx(se,{variant:"ghost",size:"icon",onClick:s,className:"text-muted-foreground hover:text-destructive",children:l.jsx(bR,{className:"h-4 w-4"})})]})]})}),l.jsxs("div",{className:"flex",children:[l.jsx(J6,{isOpen:n}),l.jsx("main",{className:`flex-1 transition-all duration-300 ${n?"ml-64":"ml-16"}`,children:l.jsx("div",{className:"p-6",children:l.jsx(BO,{})})})]})]})}const Ie=_.forwardRef(({className:n,type:e,...t},r)=>l.jsx("input",{type:e,className:et("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));Ie.displayName="Input";var e5="Label",kC=_.forwardRef((n,e)=>l.jsx(We.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));kC.displayName=e5;var DC=kC;const t5=sd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Re=_.forwardRef(({className:n,...e},t)=>l.jsx(DC,{ref:t,className:et(t5(),n),...e}));Re.displayName=DC.displayName;const n5=sd("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),OC=_.forwardRef(({className:n,variant:e,...t},r)=>l.jsx("div",{ref:r,role:"alert",className:et(n5({variant:e}),n),...t}));OC.displayName="Alert";const r5=_.forwardRef(({className:n,...e},t)=>l.jsx("h5",{ref:t,className:et("mb-1 font-medium leading-none tracking-tight",n),...e}));r5.displayName="AlertTitle";const LC=_.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:et("text-sm [&_p]:leading-relaxed",n),...e}));LC.displayName="AlertDescription";function s5(){const[n,e]=_.useState(""),[t,r]=_.useState(""),[s,a]=_.useState(""),[c,u]=_.useState(!1),{login:h,authError:m}=Cx(),g=Sc(),v=async y=>{if(y.preventDefault(),!n||!t){a("Please fill in all fields");return}try{if(typeof navigator<"u"&&!navigator.onLine){a("No network connection. Please connect to the internet and try again.");return}a(""),u(!0),await h(n,t),g("/admin")}catch(b){console.error("Login error:",b),m?a(m):(b==null?void 0:b.code)==="auth/network-request-failed"?a("Network error - check your connection and try again."):(b==null?void 0:b.code)==="auth/wrong-password"||(b==null?void 0:b.code)==="auth/user-not-found"?a("Invalid email or password."):a("Failed to log in. Please check your credentials.")}finally{u(!1)}};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-secondary/20 flex items-center justify-center p-4",children:l.jsxs(we,{className:"w-full max-w-md shadow-xl",children:[l.jsxs(Ge,{className:"space-y-1 text-center",children:[l.jsx("div",{className:"mx-auto w-12 h-12 bg-primary rounded-lg flex items-center justify-center mb-4",children:l.jsx(p_,{className:"h-6 w-6 text-primary-foreground"})}),l.jsx(Xe,{className:"text-2xl font-bold",children:"MedJust Admin"}),l.jsx(At,{children:"Sign in to access the admin dashboard"})]}),l.jsx(_e,{children:l.jsxs("form",{onSubmit:v,className:"space-y-4",children:[s&&l.jsx(OC,{variant:"destructive",children:l.jsx(LC,{children:s})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"email",children:"Email"}),l.jsxs("div",{className:"relative",children:[l.jsx(_f,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Ie,{id:"email",type:"email",placeholder:"MedAdmin@gmail.com",value:n,onChange:y=>e(y.target.value),className:"pl-10",required:!0})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"password",children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(p_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Ie,{id:"password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:t,onChange:y=>r(y.target.value),className:"pl-10",required:!0})]})]}),l.jsx(se,{type:"submit",className:"w-full",disabled:c,children:c?l.jsxs(l.Fragment,{children:[l.jsx(Oo,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})})]})})}const i5=sd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function nn({className:n,variant:e,...t}){return l.jsx("div",{className:et(i5({variant:e}),n),...t})}function jx(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,a]=_.useState(null);return _.useEffect(()=>{const m=Rr(it(Ue,"news"),wd("updatedAt","desc")),g=Xo(m,v=>{const y=[];v.forEach(b=>{var E,x;const S=b.data();y.push({id:b.id,title:S.title||"",content:S.content||"",imageUrl:S.imageUrl||"",videoUrl:S.videoUrl||"",createdAt:((E=S.createdAt)==null?void 0:E.toDate())||new Date,updatedAt:((x=S.updatedAt)==null?void 0:x.toDate())||new Date,authorName:S.authorName||"",authorId:S.newsId||b.id,tags:S.tags||[],isPinned:S.isPinned||!1,viewsCount:S.viewsCount||0,attachments:S.attachments||[],yearId:S.yearId||"",yearNumber:S.yearNumber||void 0})}),e(y),r(!1)},v=>{console.error("Error fetching news:",v),a(v.message||"Failed to fetch news from Firebase"),r(!1)});return()=>g()},[]),{news:n,loading:t,error:s,createNews:async m=>{try{await jn(it(Ue,"news"),m)}catch(g){throw console.error("Error creating news:",g),new Error("Failed to create news article. Check Firebase permissions.")}},updateNews:async(m,g)=>{try{await dn(jt(Ue,"news",m),g)}catch(v){throw console.error("Error updating news:",v),new Error("Failed to update news article. Check Firebase permissions.")}},deleteNews:async m=>{try{await jr(jt(Ue,"news",m))}catch(g){throw console.error("Error deleting news:",g),new Error("Failed to delete news article. Check Firebase permissions.")}}}}function MC(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,a]=_.useState(null),[c,u]=_.useState(!1),h=[{id:"product1",productId:"product1",name:"Medical Textbook",description:"Comprehensive medical textbook for students",price:89.99,images:["https://example.com/book1.jpg"],categoryId:"books",createdAt:new Date},{id:"product2",productId:"product2",name:"Stethoscope",description:"Professional grade stethoscope",price:120,images:["https://example.com/stethoscope.jpg"],categoryId:"equipment",createdAt:new Date}];_.useEffect(()=>{(async()=>{const S=setTimeout(()=>{t&&!c&&(console.log("ðŸ”„ Firebase taking too long - switching to offline mode"),u(!0),r(!1),a("Working in offline mode - Firebase unavailable"),e(h))},3e3);try{console.log("ðŸ”„ Fetching products from Firebase...");const E=await Ot(it(Ue,"products")),x=[];E.forEach(A=>{var C;const I=A.data();x.push({id:A.id,productId:I.productId||A.id,name:I.name||"",description:I.description||"",price:I.price||0,types:I.types||(I.price?[{name:"Default",price:I.price}]:[]),images:I.images||[],categoryId:I.categoryId||"",createdAt:((C=I.createdAt)==null?void 0:C.toDate())||new Date})}),clearTimeout(S),e(x.sort((A,I)=>I.createdAt.getTime()-A.createdAt.getTime())),r(!1),a(null),console.log("âœ… Products loaded successfully:",x.length)}catch(E){clearTimeout(S),E.isFirebaseOfflineError?console.log("ðŸ”„ Firebase offline mode detected - using mock data"):console.error("Firebase error - switching to offline mode:",E.message),u(!0),r(!1),a("Working in offline mode - Firebase unavailable"),e(h)}})()},[]);const m=async b=>{var S,E;if(c){const x={id:`product_${Date.now()}`,productId:`product_${Date.now()}`,...b,createdAt:new Date};e(A=>[x,...A]),console.log("âœ… Added product to offline mode:",x.name);return}try{const x={name:b.name,description:b.description,price:b.price||((E=(S=b.types)==null?void 0:S[0])==null?void 0:E.price)||0,types:b.types||(b.price?[{name:"Default",price:b.price}]:[]),images:b.images,categoryId:b.categoryId||"",createdAt:new Date,productId:""};console.log("ðŸ“ Creating new product:",x);const A=await jn(it(Ue,"products"),x);await dn(A,{productId:A.id}),console.log("âœ… Created product with ID:",A.id),window.location.replace(window.location.href)}catch(x){console.error("Error creating product:",x),u(!0),await m(b)}};return{products:n,loading:t,error:s,isOfflineMode:c,createProduct:m,updateProduct:async(b,S)=>{var E;if(c){e(x=>x.map(A=>A.id===b?{...A,...S}:A)),console.log("âœ… Updated product in offline mode");return}try{const x=jt(Ue,"products",b),A={...S};S.types&&(A.types=S.types,A.price=((E=S.types[0])==null?void 0:E.price)||S.price||0),await dn(x,A),console.log("âœ… Updated product in Firebase:",b),window.location.replace(window.location.href)}catch(x){console.error("Error updating product:",x)}},deleteProduct:async b=>{if(c){e(S=>S.filter(E=>E.id!==b)),console.log("âœ… Deleted product from offline mode");return}try{await jr(jt(Ue,"products",b)),console.log("âœ… Deleted product from Firebase:",b),window.location.replace(window.location.href)}catch(S){console.error("Error deleting product:",S)}},retryConnection:()=>{console.log("ðŸ”„ Retrying Firebase connection..."),r(!0),a(null),u(!1),window.location.replace(window.location.href)}}}const o5=[{id:"1",name:"Dr. Sarah Johnson",department:"Internal Medicine",email:"sarah.johnson@medjust.com",officeLocation:"Medical Building, Room 301",imageUrl:"https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=300&h=300&fit=crop&crop=face"},{id:"2",name:"Prof. Michael Chen",department:"Surgery",email:"michael.chen@medjust.com",officeLocation:"Surgical Wing, Room 205",imageUrl:"https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=300&h=300&fit=crop&crop=face"},{id:"3",name:"Dr. Emily Rodriguez",department:"Emergency Medicine",email:"emily.rodriguez@medjust.com",officeLocation:"Emergency Department, Office 12",imageUrl:"https://images.unsplash.com/photo-1594824928909-90ad1d93d7c3?w=300&h=300&fit=crop&crop=face"}];function FC(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,a]=_.useState(null),[c,u]=_.useState(!1);_.useEffect(()=>{const v=async()=>{try{const b=Rr(it(Ue,"professors"));await Ot(b);const S=Rr(it(Ue,"professors"),wd("name","asc"));return Xo(S,x=>{const A=[];x.forEach(I=>{const C=I.data();A.push({id:I.id,name:C.name||"",title:C.title||"",department:C.department||"",email:C.email||"",phone:C.phone||"",officeLocation:C.officeLocation||"",bio:C.bio||"",researchAreas:C.researchAreas||[],website:C.website||"",linkedin:C.linkedin||"",imageUrl:C.imageUrl||""})}),e(A),r(!1)},x=>{console.error("Error in Firebase listener:",x),y()})}catch(b){return console.error("Firebase connection failed:",b),y(),null}},y=()=>{console.log("ðŸ”„ Switching to offline mode with mock data"),u(!0),e(o5),a(null),r(!1)};v()},[]);const h=async v=>{if(c){const y={id:`offline_${Date.now()}`,...v};e(b=>[...b,y]),console.log("âœ… Added professor in offline mode:",y.name);return}try{await jn(it(Ue,"professors"),{...v,professorId:`prof_${Date.now()}`}),console.log("âœ… Added professor to Firebase:",v.name)}catch(y){console.error("Error creating professor:",y),u(!0),await h(v)}};return{professors:n,loading:t,error:s,createProfessor:h,updateProfessor:async(v,y)=>{if(c||v.startsWith("offline_")||v.startsWith("mock_")){e(b=>b.map(S=>S.id===v?{...S,...y}:S)),console.log("âœ… Updated professor in offline mode");return}try{await dn(jt(Ue,"professors",v),y),console.log("âœ… Updated professor in Firebase")}catch(b){console.error("Error updating professor:",b),e(S=>S.map(E=>E.id===v?{...E,...y}:E)),console.log("âœ… Updated professor locally (Firebase failed)")}},deleteProfessor:async v=>{if(c||v.startsWith("offline_")||v.startsWith("mock_")){e(y=>y.filter(b=>b.id!==v)),console.log("âœ… Deleted professor in offline mode");return}try{await jr(jt(Ue,"professors",v)),console.log("âœ… Deleted professor from Firebase")}catch(y){console.error("Error deleting professor:",y),e(b=>b.filter(S=>S.id!==v)),console.log("âœ… Deleted professor locally (Firebase failed)")}},isOfflineMode:c}}function Rc(){const[n,e]=_.useState([]),[t,r]=_.useState([]),[s,a]=_.useState([]),[c,u]=_.useState(!0),[h,m]=_.useState(null),[g,v]=_.useState(!1),[y,b]=_.useState(1),[S,E]=_.useState("connecting"),x=()=>{console.log("ðŸ”„ Activating offline mode immediately"),v(!0),E("offline"),u(!1),m(null),e([{id:"offline_year1",yearNumber:1,type:"basic",batchName:"",subjects:[]},{id:"offline_year2",yearNumber:2,type:"basic",batchName:"",subjects:[]},{id:"offline_year3",yearNumber:3,type:"basic",batchName:"",subjects:[]},{id:"offline_year4",yearNumber:4,type:"clinical",batchName:"",subjects:[]},{id:"offline_year5",yearNumber:5,type:"clinical",batchName:"",subjects:[]},{id:"offline_year6",yearNumber:6,type:"clinical",batchName:"",subjects:[]}]),a([])};_.useEffect(()=>{},[]),_.useEffect(()=>{(async()=>{var J,Y,q;if(!navigator.onLine){console.log("ðŸš« No internet connection detected - activating offline mode"),x();return}E("connecting"),u(!0);try{console.log("ðŸ”„ Attempting Firebase connection...");const Q=await Ot(it(Ue,"batches"));let Z=[];const U=[];for(const ve of Q.docs){const ce=ve.data(),me=ve.id,Ee=ce.batch_name||ce.batchName||"";U.push({id:me,batchName:Ee,imageUrl:ce.image_url||ce.imageUrl||"",aca_supervisor:ce.aca_supervisor||ce.acadmic_supervisor||ce.academic_supervisor||"",cr:ce.cr||"",actor:ce.actor||"",group_link:ce.group_link||ce.groupUrl||ce.group_url||""});try{(await Ot(it(ve.ref,"years"))).forEach(Te=>{const Me=Te.data();let Ke=Me.order||1;if(Me.name){const dt=String(Me.name).match(/\d+/);dt&&(Ke=parseInt(dt[0]))}Z.push({id:Te.id,yearNumber:Ke,name:Me.name||Me.title||"",type:Ke<=3?"basic":"clinical",batchName:Ee,imageUrl:Me.imageUrl||Me.image_url||"",academicSupervisor:Me.aca_supervisor||Me.acadmic_supervisor||Me.academic_supervisor||"",actor:Me.actor||"",cr:Me.cr||"",groupUrl:Me.group_link||Me.group_url||Me.groupUrl||"",subjects:[],batchId:me})})}catch(De){console.warn("Failed to fetch years for batch",me,De)}}r(U),typeof yearsSnapshot<"u"&&yearsSnapshot&&!yearsSnapshot.empty&&yearsSnapshot.forEach(ve=>{const ce=ve.data();let me=ce.order||1;if(ce.name){const Ee=ce.name.match(/\d+/);Ee&&(me=parseInt(Ee[0]))}Z.push({id:ve.id,yearNumber:me,name:ce.name||ce.title||"",type:me<=3?"basic":"clinical",batchName:ce.batch_name||ce.batchName||"",imageUrl:ce.imageUrl||ce.image_url||"",academicSupervisor:ce.aca_supervisor||ce.acadmic_supervisor||ce.academic_supervisor||"",actor:ce.actor||"",cr:ce.cr||"",groupUrl:ce.group_url||ce.groupUrl||"",subjects:[]})});const X=await Ot(it(Ue,"Subjects")),le=[];for(const ve of X.docs){const ce=ve.data(),me=await Ot(it(ve.ref,"lectures")),Ee=[];for(const De of me.docs){const Te=De.data(),Me=await Ot(it(De.ref,"videos")),Ke=[];Me.forEach(Mt=>{var yt;const vt=Mt.data();Ke.push({id:Mt.id,title:vt.title||vt.name||"",url:vt.url||"",thumbnailUrl:vt.thumbnailUrl||"",description:vt.description||"",uploadedAt:((yt=vt.uploadedAt)==null?void 0:yt.toDate())||new Date})});const dt=await Ot(it(De.ref,"files")),Ct=[];dt.forEach(Mt=>{var yt;const vt=Mt.data();Ct.push({id:Mt.id,title:vt.title||vt.name||"",url:vt.url||"",description:vt.description||"",uploadedAt:((yt=vt.uploadedAt)==null?void 0:yt.toDate())||new Date})});const on=await Ot(it(De.ref,"quizzes")),Lt=[];on.forEach(Mt=>{const vt=Mt.data();Lt.push({id:Mt.id,title:vt.title||vt.name||"",description:vt.description||"",duration:vt.duration||30,passRate:vt.passRate||70,questions:vt.questions||[]})}),Ee.push({id:De.id,name:Te.name||Te.title||"",description:Te.description||"",subjectId:ve.id,order:Te.order||1,imageUrl:Te.imageUrl||"",createdAt:((J=Te.createdAt)==null?void 0:J.toDate())||new Date,uploadedBy:Te.uploadedBy||"Unknown",videos:Ke,files:Ct,quizzes:Lt})}le.push({id:ve.id,name:ce.name||"",subjectId:ce.subjectId||ve.id,yearId:ce.yearId||"",imageUrl:ce.imageUrl||"",lectures:Ee.sort((De,Te)=>De.order-Te.order)})}const be=Z.map(ve=>({...ve,subjects:le.filter(ce=>ce.yearId===ve.id).sort((ce,me)=>ce.name.localeCompare(me.name))}));e(be.sort((ve,ce)=>ve.yearNumber-ce.yearNumber)),a(be.flatMap(ve=>ve.subjects)),u(!1),v(!1),E("connected"),m(null),console.log("âœ… Firebase data loaded successfully");try{if(navigator.onLine)for(const ve of Q.docs)try{const ce=await Ot(it(ve.ref,"years"));for(const me of ce.docs){const Ee=me.data(),De=jt(it(ve.ref,"years"),me.id),Te={};if(Ee.imageUrl===void 0&&(Te.imageUrl=""),Ee.batch_name===void 0&&Ee.batchName===void 0&&(Te.batch_name=((Y=ve.data())==null?void 0:Y.batch_name)||((q=ve.data())==null?void 0:q.batchName)||""),Object.keys(Te).length>0)try{await dn(De,Te),console.log(`ðŸ”„ Set missing fields for year ${me.id}:`,Te)}catch(Me){console.warn(`Failed to set defaults for ${me.id}:`,Me)}}}catch(ce){console.warn("Could not ensure fields for years under batch",ve.id,ce)}}catch(ve){console.warn("Could not ensure imageUrl fields:",ve)}}catch{console.log("âŒ Firebase connection failed - staying in offline mode"),x()}})()},[y]);const A=()=>{console.log("ï¿½ï¿½ï¿½ Retrying Firebase connection..."),u(!0),m(null),v(!1),E("connecting"),b(H=>H+1)},I=async(H,J)=>{if(H){if(g||!navigator.onLine){e(Y=>Y.map(q=>q.id===H?{...q,...J}:q));return}try{const Y=Si(Ue,"years"),Q=(await Ot(Y)).docs.find(Z=>Z.id===H);if(Q){await dn(Q.ref,{...J,updatedAt:new Date}),b(Z=>Z+1);return}e(Z=>Z.map(U=>U.id===H?{...U,...J}:U))}catch(Y){console.error("Error updating year:",Y),e(q=>q.map(Q=>Q.id===H?{...Q,...J}:Q))}}},C=async(H,J)=>{if(H){if(g||!navigator.onLine){r(Y=>Y.map(q=>q.id===H?{...q,...J}:q));return}try{const Y=jt(Ue,"batches",H);await dn(Y,{...J,updatedAt:new Date}),b(q=>q+1)}catch(Y){console.error("Failed to update batch:",Y),r(q=>q.map(Q=>Q.id===H?{...Q,...J}:Q))}}},O=async(H,J=3)=>{for(let Y=0;Y<J;Y++)try{return await H()}catch(q){if(console.log(`Attempt ${Y+1} failed:`,q.message),Y===J-1)throw q;await new Promise(Q=>setTimeout(Q,1e3*(Y+1)))}},V=async H=>{if(g||!navigator.onLine){const J={id:`subject_${Date.now()}`,name:H.name,subjectId:`subject_${Date.now()}`,yearId:H.yearId,imageUrl:H.imageUrl||"",lectures:[]};a(Y=>[...Y,J]),e(Y=>Y.map(q=>q.id===H.yearId?{...q,subjects:[...q.subjects,J]}:q)),console.log("âœ… Added subject to offline mode:",J.name);return}try{console.log("ðŸ”„ Creating subject with data:",H),await O(async()=>{const J="7RpQaRoWKFLKiPA7A9Aq",Y=jt(Ue,"Subjects",J);await dn(Y,{name:H.name,imageUrl:H.imageUrl||"",hours:H.hours||3,yearId:H.yearId,subjectId:J,updatedAt:new Date}),console.log("âœ… Updated existing subject document:",J);const q=it(Y,"lectures");if((await Ot(q)).empty){const U=await jn(q,{name:"Sample Lecture",title:"Sample Lecture",description:"",imageUrl:"",order:1,uploadedBy:"System",createdAt:new Date,lectureId:""});await dn(U,{lectureId:U.id});const X=["videos","files","quizzes"];for(const le of X){const be=it(U,le);let ve={};le==="videos"?ve={title:"Sample Video",description:"",thumbnailUrl:"",url:"",uploadedAt:new Date,videoId:""}:le==="files"?ve={title:"Sample File",description:"",url:"",uploadedAt:new Date,fileId:""}:le==="quizzes"&&(ve={title:"Sample Quiz",description:"",duration:30,passRate:70,questions:[],quizId:""});const ce=await jn(be,ve),me=`${le.slice(0,-1)}Id`;await dn(ce,{[me]:ce.id})}console.log("âœ… Created complete lecture structure for subject:",J)}b(Z=>Z+1)})}catch(J){console.error("Error creating subject:",J),v(!0),await V(H)}},B=async H=>{if(g){const J={id:`lecture_${Date.now()}`,...H};a(Y=>Y.map(q=>q.id===H.subjectId?{...q,lectures:[...q.lectures,J]}:q)),e(Y=>Y.map(q=>({...q,subjects:q.subjects.map(Q=>Q.id===H.subjectId?{...Q,lectures:[...Q.lectures,J]}:Q)}))),console.log("âœ… Added lecture to offline mode:",J.name);return}try{await O(async()=>{const J=jt(Ue,"Subjects",H.subjectId),Y=it(J,"lectures"),q={title:H.name,description:H.description||"",imageUrl:H.imageUrl||"",order:H.order||1,uploadedBy:H.uploadedBy||"Current User",createdAt:new Date,lectureId:""};console.log("ðŸ“ Creating lecture in subcollection:",q);const Q=await jn(Y,q);await dn(Q,{lectureId:Q.id}),console.log("âœ… Created lecture document with ID:",Q.id),console.log("ðŸ“ Path: /Subjects/"+H.subjectId+"/lectures/"+Q.id),b(Z=>Z+1)})}catch(J){console.error("Error creating lecture:",J),v(!0),await B(H)}},P=async(H,J)=>{if(g){a(Y=>Y.map(q=>q.id===H?{...q,lectures:q.lectures.filter(Q=>Q.id!==J)}:q)),e(Y=>Y.map(q=>({...q,subjects:q.subjects.map(Q=>Q.id===H?{...Q,lectures:Q.lectures.filter(Z=>Z.id!==J)}:Q)}))),console.log("âœ… Deleted lecture from offline mode");return}try{const Y=jt(Ue,"Subjects",H),q=jt(Y,"lectures",J);await jr(q),console.log("âœ… Deleted lecture from Firebase"),b(Q=>Q+1)}catch(Y){console.error("Error deleting lecture:",Y)}},R=async H=>{if(H){if(g){a(J=>J.filter(Y=>Y.id!==H)),e(J=>J.map(Y=>({...Y,subjects:Y.subjects.filter(q=>q.id!==H)}))),console.log("âœ… Deleted subject in offline mode");return}try{const J=jt(Ue,"Subjects",H);await jr(J),console.log("âœ… Deleted subject from Firebase"),b(Y=>Y+1)}catch(J){console.error("Error deleting subject:",J)}}},D=async(H,J,Y)=>{if(!(!H||!J)){if(g){e(q=>q.map(Q=>({...Q,subjects:Q.subjects.map(Z=>Z.id===H?{...Z,lectures:Z.lectures.map(U=>U.id===J?{...U,videos:[...U.videos||[],{id:`video_${Date.now()}`,title:Y.title,url:Y.url,thumbnailUrl:Y.thumbnailUrl||"",description:Y.description||"",uploadedAt:new Date}]}:U)}:Z)})));return}try{const q=jt(Ue,"Subjects",H,"lectures",J);await jn(it(q,"videos"),{title:Y.title,description:Y.description||"",url:Y.url,duration:Y.duration||"",thumbnailUrl:Y.thumbnailUrl||"",platform:Y.platform||"",uploadedAt:new Date,uploadedBy:"Current User"}),b(Q=>Q+1)}catch(q){console.error("Error adding video:",q)}}},k=async(H,J,Y)=>{if(!(!H||!J)){if(g){e(q=>q.map(Q=>({...Q,subjects:Q.subjects.map(Z=>Z.id===H?{...Z,lectures:Z.lectures.map(U=>U.id===J?{...U,files:[...U.files||[],{id:`file_${Date.now()}`,title:Y.title,url:Y.fileUrl,description:Y.description||"",uploadedAt:new Date}]}:U)}:Z)})));return}try{const q=jt(Ue,"Subjects",H,"lectures",J);await jn(it(q,"files"),{title:Y.title,description:Y.description||"",url:Y.fileUrl,fileType:Y.fileType||"",fileSize:Y.fileSize||"",uploadedAt:new Date,uploadedBy:"Current User"}),b(Q=>Q+1)}catch(q){console.error("Error adding file:",q)}}},$=async(H,J,Y)=>{if(!(!H||!J)){if(g){e(q=>q.map(Q=>({...Q,subjects:Q.subjects.map(Z=>Z.id===H?{...Z,lectures:Z.lectures.map(U=>U.id===J?{...U,quizzes:[...U.quizzes||[],{id:`quiz_${Date.now()}`,title:Y.title,description:Y.description||"",duration:Y.timeLimit||30,passRate:Y.passingScore||70,questions:Y.questions||[]}]}:U)}:Z)})));return}try{const q=jt(Ue,"Subjects",H,"lectures",J);await jn(it(q,"quizzes"),{title:Y.title,description:Y.description||"",duration:Y.timeLimit||30,passRate:Y.passingScore||70,questions:Y.questions||[],createdAt:new Date,uploadedBy:"Current User"}),b(Q=>Q+1)}catch(q){console.error("Error adding quiz:",q)}}},z=async(H,J={})=>{const Y=J.yearNumber||1,q=J.name||`Year ${Y}`,Q=J.type||(Y<=3?"basic":"clinical");if(g||!navigator.onLine){const Z={id:`year_${Date.now()}`,yearNumber:Y,name:q,type:Q,batchName:"",batchId:H||void 0,imageUrl:"",academicSupervisor:"",actor:"",cr:"",groupUrl:"",subjects:[]};e(U=>[...U,Z]),H&&r(U=>U.map(X=>X.id===H?{...X}:X)),console.log("âœ… Added year in offline mode:",Z);return}try{await O(async()=>{if(H){const Z=jt(Ue,"batches",H),U=it(Z,"years"),X=await jn(U,{name:q,order:Y,imageUrl:"",batch_name:q,createdAt:new Date});try{await dn(X,{yearId:X.id})}catch{}}else{const Z=it(Ue,"years"),U=await jn(Z,{name:q,order:Y,imageUrl:"",batch_name:q,createdAt:new Date});try{await dn(U,{yearId:U.id})}catch{}}b(Z=>Z+1)})}catch(Z){console.error("Error creating year:",Z),v(!0),await z(H,J)}};return{years:n,batches:t,subjects:s,loading:c,error:h,isOfflineMode:g,connectionStatus:S,retryConnection:A,updateYear:I,updateBatch:C,createSubject:V,createLecture:B,createYear:z,createBatch:async(H={})=>{const J=H.batchName||"New Batch",Y=H.imageUrl||"",q=H.cr||"",Q=`batch_temp_${Date.now()}`,Z={id:Q,batchName:J,imageUrl:Y,cr:q};if(r(U=>[Z,...U]),g||!navigator.onLine){console.log("âœ… Added batch in offline mode:",Z);return}try{await O(async()=>{const U=it(Ue,"batches"),X=await jn(U,{batch_name:J,image_url:Y,cr:q,createdAt:new Date});try{await dn(X,{batchId:X.id})}catch{}const le={id:X.id,batchName:J,imageUrl:Y,cr:q};r(be=>[le,...be.filter(ve=>ve.id!==Q)]),b(be=>be+1)})}catch(U){console.error("Error creating batch:",U),r(le=>le.filter(be=>be.id!==Q)),v(!0);const X={id:`batch_${Date.now()}`,batchName:J,imageUrl:Y,cr:q};r(le=>[X,...le])}},deleteBatch:async(H,J={deleteYears:!0})=>{if(!H)return;const Y=t,q=n;if(r(Q=>Q.filter(Z=>Z.id!==H)),e(Q=>Q.filter(Z=>(Z.batchId||Z.batch_name)!==H)),g||!navigator.onLine){console.log("âœ… Removed batch in offline mode:",H);return}try{await O(async()=>{const Q=jt(Ue,"batches",H);if(J.deleteYears)try{const Z=it(Q,"years"),U=await Ot(Z);for(const X of U.docs)await jr(X.ref)}catch{const U=Si(Ue,"years"),X=await Ot(U);for(const le of X.docs){const be=le.data();(be.batchId||be.batch_id)===H&&await jr(le.ref)}}else{const Z=Si(Ue,"years"),U=await Ot(Z);for(const X of U.docs){const le=X.data();if((le.batchId||le.batch_id)===H)try{await dn(X.ref,{batchId:null,batch_name:null})}catch{}}}await jr(Q),b(Z=>Z+1)})}catch(Q){throw console.error("Error deleting batch:",Q),r(Y||[]),e(q||[]),Q}},deleteLecture:P,deleteSubject:R,addVideo:D,addFile:k,addQuiz:$}}const a5=[{id:1,type:"news",title:"New cardiology study published",time:"2 hours ago",author:"Dr. Smith"},{id:2,type:"video",title:"Anatomy lecture uploaded",time:"4 hours ago",author:"Prof. Johnson"},{id:3,type:"quiz",title:"Pharmacology quiz created",time:"6 hours ago",author:"Dr. Brown"},{id:4,type:"product",title:"New stethoscope added to store",time:"1 day ago",author:"Admin"}];function l5(){const{news:n,loading:e}=jx(),{products:t,loading:r}=MC(),{professors:s,loading:a}=FC(),{years:c,loading:u}=Rc(),h=n.length,m=s.length,g=t.reduce((b,S)=>b+(S.price||0),0);c.reduce((b,S)=>b+S.subjects.reduce((E,x)=>E+x.lectures.reduce((A,I)=>{var C;return A+(((C=I.videos)==null?void 0:C.length)||0)},0),0),0);const v=c.reduce((b,S)=>{var E;return b+(((E=S.subjects)==null?void 0:E.length)||0)},0),y=[{title:"Total News Articles",value:e?"...":String(h),change:"+12%",icon:Ef,color:"text-blue-600"},{title:"Subjects",value:u?"...":String(v),change:"+5%",icon:us,color:"text-green-600"},{title:"Active Professors",value:a?"...":String(m),change:"+2%",icon:sc,color:"text-purple-600"},{title:"Store Revenue",value:r?"...":`$${g.toLocaleString()}`,change:"+18%",icon:V1,color:"text-emerald-600"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard"}),l.jsx("p",{className:"text-muted-foreground",children:"Welcome to the MedJust Admin Dashboard"})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:y.map(b=>l.jsxs(we,{children:[l.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Xe,{className:"text-sm font-medium",children:b.title}),l.jsx(b.icon,{className:`h-4 w-4 ${b.color}`})]}),l.jsxs(_e,{children:[l.jsx("div",{className:"text-2xl font-bold",children:b.value}),l.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[l.jsxs(nn,{variant:"secondary",className:"text-green-600",children:[l.jsx(CR,{className:"h-3 w-3 mr-1"}),b.change]}),l.jsx("span",{className:"text-muted-foreground",children:"from last month"})]})]})]},b.title))}),l.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Recent Activity"}),l.jsx(At,{children:"Latest updates across all modules"})]}),l.jsx(_e,{children:l.jsx("div",{className:"space-y-4",children:a5.map(b=>l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium",children:b.title}),l.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[l.jsx("span",{children:b.author}),l.jsx("span",{children:"â€¢"}),l.jsx("span",{children:b.time})]})]})]},b.id))})})]}),l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Quick Actions"}),l.jsx(At,{children:"Common administrative tasks"})]}),l.jsx(_e,{children:l.jsxs("div",{className:"grid gap-2",children:[l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(Ef,{className:"h-5 w-5 text-blue-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Create News Article"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Publish new content"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(Ms,{className:"h-5 w-5 text-green-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Upload Video"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Add learning resource"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(sc,{className:"h-5 w-5 text-purple-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Add Professor"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Register new faculty"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(py,{className:"h-5 w-5 text-emerald-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Add Product"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Expand store catalog"})]})]})]})})]})]})]})}const Ri=_.forwardRef(({className:n,...e},t)=>l.jsx("textarea",{className:et("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));Ri.displayName="Textarea";function VC(n){const e=_.useRef({value:n,previous:n});return _.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var Ax="Switch",[c5,Mz]=ki(Ax),[u5,d5]=c5(Ax),UC=_.forwardRef((n,e)=>{const{__scopeSwitch:t,name:r,checked:s,defaultChecked:a,required:c,disabled:u,value:h="on",onCheckedChange:m,...g}=n,[v,y]=_.useState(null),b=wt(e,I=>y(I)),S=_.useRef(!1),E=v?!!v.closest("form"):!0,[x=!1,A]=ka({prop:s,defaultProp:a,onChange:m});return l.jsxs(u5,{scope:t,checked:x,disabled:u,children:[l.jsx(We.button,{type:"button",role:"switch","aria-checked":x,"aria-required":c,"data-state":BC(x),"data-disabled":u?"":void 0,disabled:u,value:h,...g,ref:b,onClick:$e(n.onClick,I=>{A(C=>!C),E&&(S.current=I.isPropagationStopped(),S.current||I.stopPropagation())})}),E&&l.jsx(h5,{control:v,bubbles:!S.current,name:r,value:h,checked:x,required:c,disabled:u,style:{transform:"translateX(-100%)"}})]})});UC.displayName=Ax;var $C="SwitchThumb",zC=_.forwardRef((n,e)=>{const{__scopeSwitch:t,...r}=n,s=d5($C,t);return l.jsx(We.span,{"data-state":BC(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});zC.displayName=$C;var h5=n=>{const{control:e,checked:t,bubbles:r=!0,...s}=n,a=_.useRef(null),c=VC(t),u=cS(e);return _.useEffect(()=>{const h=a.current,m=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==t&&v){const y=new Event("click",{bubbles:r});v.call(h,t),h.dispatchEvent(y)}},[c,t,r]),l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...s,tabIndex:-1,ref:a,style:{...n.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function BC(n){return n?"checked":"unchecked"}var qC=UC,f5=zC;const WC=_.forwardRef(({className:n,...e},t)=>l.jsx(qC,{className:et("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...e,ref:t,children:l.jsx(f5,{className:et("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));WC.displayName=qC.displayName;function m5({news:n,onClose:e,onSave:t}){var x,A,I;const{years:r}=Rc(),[s,a]=_.useState(null),[c,u]=_.useState({title:"",content:"",imageUrl:"",videoUrl:"",tags:[],isPinned:!1,attachments:[],yearId:"",subjectId:""}),[h,m]=_.useState(""),[g,v]=_.useState(!1);_.useEffect(()=>{n&&u({title:n.title||"",content:n.content||"",imageUrl:n.imageUrl||"",videoUrl:n.videoUrl||"",tags:n.tags||[],isPinned:n.isPinned||!1,attachments:n.attachments||[],yearId:n.yearId||"",subjectId:n.subjectId||""})},[n]),_.useEffect(()=>{let C=!0;return(async()=>{try{if(r&&r.length>0||s)return;const V=await Ot(Si(Ue,"years")),B=[];V.forEach(P=>{const R=P.data();let D=R.order||1;if(R.name){const k=String(R.name).match(/\d+/);k&&(D=parseInt(k[0]))}B.push({id:P.id,yearNumber:D,type:D<=3?"basic":"clinical",subjects:R.subjects||[]})}),C&&B.length>0&&a(B)}catch{}})(),()=>{C=!1}},[r,s]);const y=async C=>{C.preventDefault(),v(!0);try{const O={...c,yearNumber:void 0,updatedAt:new Date,...n?{}:{createdAt:new Date,authorName:"Current User",authorId:"current-user-id",viewsCount:0}};if(c.yearId){const V=r.find(B=>B.id===c.yearId);V&&(O.yearNumber=V.yearNumber)}c.subjectId&&(O.subjectId=c.subjectId),t(O)}catch(O){console.error("Error saving news:",O)}finally{v(!1)}},b=()=>{h.trim()&&!c.tags.includes(h.trim())&&(u(C=>({...C,tags:[...C.tags,h.trim()]})),m(""))},S=C=>{u(O=>({...O,tags:O.tags.filter(V=>V!==C)}))},E=C=>{C.key==="Enter"&&(C.preventDefault(),b())};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(se,{variant:"ghost",onClick:e,children:[l.jsx(Ys,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Article":"Create Article"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update the news article details":"Create a new news article for medical students"})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(WC,{id:"pinned",checked:c.isPinned,onCheckedChange:C=>u(O=>({...O,isPinned:C}))}),l.jsxs(Re,{htmlFor:"pinned",className:"flex items-center gap-2",children:[l.jsx(U1,{className:"h-4 w-4"}),"Pin Article"]})]})})]}),l.jsx("form",{onSubmit:y,className:"space-y-6",children:l.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Article Content"}),l.jsx(At,{children:"Main article information and content"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"title",children:"Title *"}),l.jsx(Ie,{id:"title",placeholder:"Enter article title...",value:c.title,onChange:C=>u(O=>({...O,title:C.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"content",children:"Content *"}),l.jsx(Ri,{id:"content",placeholder:"Write your article content here...",value:c.content,onChange:C=>u(O=>({...O,content:C.target.value})),rows:12,required:!0})]})]})]}),l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Tags"}),l.jsx(At,{children:"Add relevant tags to help categorize this article"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Ie,{placeholder:"Add a tag...",value:h,onChange:C=>m(C.target.value),onKeyPress:E}),l.jsxs(se,{type:"button",onClick:b,variant:"outline",children:[l.jsx(Iu,{className:"h-4 w-4 mr-2"}),"Add"]})]}),c.tags.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map(C=>l.jsxs(nn,{variant:"secondary",className:"flex items-center gap-1",children:[C,l.jsx("button",{type:"button",onClick:()=>S(C),className:"ml-1 hover:text-destructive",children:l.jsx(ic,{className:"h-3 w-3"})})]},C))})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Media"}),l.jsx(At,{children:"Add images and videos to your article"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"imageUrl",children:"Featured Image URL"}),l.jsx(Ie,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:c.imageUrl,onChange:C=>u(O=>({...O,imageUrl:C.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"videoUrl",children:"Video URL"}),l.jsx(Ie,{id:"videoUrl",placeholder:"https://youtube.com/watch?v=...",value:c.videoUrl,onChange:C=>u(O=>({...O,videoUrl:C.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"yearId",children:"Related Year"}),l.jsxs("select",{id:"yearId",value:c.yearId,onChange:C=>u(O=>({...O,yearId:C.target.value,subjectId:""})),className:"w-full border rounded px-3 py-2",children:[l.jsx("option",{value:"",children:"-- Not related to a specific year --"}),(s&&s.length>0?s:r)&&(s&&s.length>0?s:r).length>0?(s&&s.length>0?s:r).map(C=>l.jsx("option",{value:C.id,children:`Year ${C.yearNumber}`},C.id)):l.jsx("option",{value:"",children:"No years available"})]})]}),c.yearId&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(Re,{htmlFor:"subjectId",children:"Related Subject"}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Selected year: ",(x=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))!=null&&x.yearNumber?`Year ${(A=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))==null?void 0:A.yearNumber}`:""]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{id:"subjectId",value:c.subjectId,onChange:C=>u(O=>({...O,subjectId:C.target.value})),className:"flex-1 border rounded px-3 py-2",children:[l.jsx("option",{value:"",children:"-- Not related to a specific subject --"}),(((I=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))==null?void 0:I.subjects)||[]).map(C=>l.jsx("option",{value:C.id,children:C.name},C.id))]}),l.jsx(se,{type:"button",variant:"outline",size:"sm",onClick:()=>{var C;(C=navigator.clipboard)==null||C.writeText(c.yearId||""),alert("Year id copied")},children:"Copy ID"})]})]}),c.imageUrl&&l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{children:"Preview"}),l.jsx("img",{src:c.imageUrl,alt:"Preview",className:"w-full h-32 object-cover rounded-lg border",onError:C=>{C.currentTarget.style.display="none"}})]})]})]}),l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsx(Xe,{children:"Actions"})}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs(se,{type:"submit",className:"w-full",disabled:g,children:[l.jsx(Ko,{className:"h-4 w-4 mr-2"}),g?"Saving...":n?"Update Article":"Create Article"]}),l.jsx(se,{type:"button",variant:"outline",className:"w-full",onClick:e,children:"Cancel"})]})]})]})]})})]})}function p5(){const[n,e]=_.useState(""),[t,r]=_.useState(null),[s,a]=_.useState(!1),[c,u]=_.useState("all"),{news:h,loading:m,error:g,createNews:v,updateNews:y,deleteNews:b}=jx(),S=h.filter(I=>I.title.toLowerCase().includes(n.toLowerCase())||I.tags.some(C=>C.toLowerCase().includes(n.toLowerCase()))),E=I=>{r(I),a(!0)},x=async I=>{if(window.confirm("Are you sure you want to delete this article?"))try{await b(I)}catch(C){console.error("Error deleting news:",C),alert("Failed to delete article. Please try again.")}},A=()=>{r(null),a(!0)};return s?l.jsx(m5,{news:t,onClose:()=>{a(!1),r(null)},onSave:async I=>{try{t?await y(t.id,I):await v(I),a(!1),r(null)}catch(C){console.error("Error saving news:",C),alert("Failed to save article. Please try again.")}}}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"News Management"}),l.jsx("p",{className:"text-muted-foreground",children:"Create and manage news articles for medical students"})]}),l.jsxs(se,{onClick:A,className:"flex items-center gap-2",children:[l.jsx(Xt,{className:"h-4 w-4"}),"Create Article"]})]}),l.jsx(we,{children:l.jsx(_e,{className:"pt-6",children:l.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:l.jsxs("div",{className:"relative flex-1",children:[l.jsx(yc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Ie,{placeholder:"Search articles by title or tags...",value:n,onChange:I=>e(I.target.value),className:"pl-10"})]})})})}),m&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(Oo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading news articles..."})]})}),g&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading news"}),l.jsx("p",{className:"text-muted-foreground",children:g})]})}),!m&&!g&&l.jsx("div",{className:"space-y-4",children:S.map(I=>l.jsx(we,{className:"hover:shadow-md transition-shadow",children:l.jsx(_e,{className:"pt-6",children:l.jsxs("div",{className:"flex gap-4",children:[I.imageUrl&&l.jsx("img",{src:I.imageUrl,alt:I.title,className:"w-24 h-24 object-cover rounded-lg flex-shrink-0"}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:I.title}),I.isPinned&&l.jsx(U1,{className:"h-4 w-4 text-yellow-500"})]}),l.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mb-3",children:I.content}),l.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:I.tags.map(C=>l.jsxs(nn,{variant:"secondary",className:"text-xs",children:[l.jsx(Iu,{className:"h-3 w-3 mr-1"}),C]},C))}),l.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(bo,{className:"h-3 w-3"}),I.authorName]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(M1,{className:"h-3 w-3"}),I.createdAt.toLocaleDateString()]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(xR,{className:"h-3 w-3"}),I.viewsCount," views"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx(se,{variant:"ghost",size:"icon",onClick:()=>E(I),children:l.jsx(id,{className:"h-4 w-4"})}),l.jsx(se,{variant:"ghost",size:"icon",onClick:()=>x(I.id),className:"text-destructive hover:text-destructive",children:l.jsx(Ln,{className:"h-4 w-4"})})]})]})})]})})},I.id))}),!m&&!g&&S.length===0&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(Ef,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No articles found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No articles match your search criteria.":"Start by creating your first news article."}),l.jsxs(se,{onClick:A,children:[l.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Create Article"]})]})})]})}function g5(n,e){const t=_.createContext(e),r=a=>{const{children:c,...u}=a,h=_.useMemo(()=>u,Object.values(u));return l.jsx(t.Provider,{value:h,children:c})};r.displayName=n+"Provider";function s(a){const c=_.useContext(t);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${n}\``)}return[r,s]}function v5(n,e=[]){let t=[];function r(a,c){const u=_.createContext(c),h=t.length;t=[...t,c];const m=v=>{var A;const{scope:y,children:b,...S}=v,E=((A=y==null?void 0:y[n])==null?void 0:A[h])||u,x=_.useMemo(()=>S,Object.values(S));return l.jsx(E.Provider,{value:x,children:b})};m.displayName=a+"Provider";function g(v,y){var E;const b=((E=y==null?void 0:y[n])==null?void 0:E[h])||u,S=_.useContext(b);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${a}\``)}return[m,g]}const s=()=>{const a=t.map(c=>_.createContext(c));return function(u){const h=(u==null?void 0:u[n])||a;return _.useMemo(()=>({[`__scope${n}`]:{...u,[n]:h}}),[u,h])}};return s.scopeName=n,[r,y5(s,...e)]}function y5(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:m})=>{const v=h(a)[`__scope${m}`];return{...u,...v}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var qg="focusScope.autoFocusOnMount",Wg="focusScope.autoFocusOnUnmount",Ib={bubbles:!1,cancelable:!0},x5="FocusScope",Px=_.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...c}=n,[u,h]=_.useState(null),m=En(s),g=En(a),v=_.useRef(null),y=wt(e,E=>h(E)),b=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let E=function(C){if(b.paused||!u)return;const O=C.target;u.contains(O)?v.current=O:fo(v.current,{select:!0})},x=function(C){if(b.paused||!u)return;const O=C.relatedTarget;O!==null&&(u.contains(O)||fo(v.current,{select:!0}))},A=function(C){if(document.activeElement===document.body)for(const V of C)V.removedNodes.length>0&&fo(u)};document.addEventListener("focusin",E),document.addEventListener("focusout",x);const I=new MutationObserver(A);return u&&I.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",E),document.removeEventListener("focusout",x),I.disconnect()}}},[r,u,b.paused]),_.useEffect(()=>{if(u){Ab.add(b);const E=document.activeElement;if(!u.contains(E)){const A=new CustomEvent(qg,Ib);u.addEventListener(qg,m),u.dispatchEvent(A),A.defaultPrevented||(w5(N5(HC(u)),{select:!0}),document.activeElement===E&&fo(u))}return()=>{u.removeEventListener(qg,m),setTimeout(()=>{const A=new CustomEvent(Wg,Ib);u.addEventListener(Wg,g),u.dispatchEvent(A),A.defaultPrevented||fo(E??document.body,{select:!0}),u.removeEventListener(Wg,g),Ab.remove(b)},0)}}},[u,m,g,b]);const S=_.useCallback(E=>{if(!t&&!r||b.paused)return;const x=E.key==="Tab"&&!E.altKey&&!E.ctrlKey&&!E.metaKey,A=document.activeElement;if(x&&A){const I=E.currentTarget,[C,O]=_5(I);C&&O?!E.shiftKey&&A===O?(E.preventDefault(),t&&fo(C,{select:!0})):E.shiftKey&&A===C&&(E.preventDefault(),t&&fo(O,{select:!0})):A===I&&E.preventDefault()}},[t,r,b.paused]);return l.jsx(We.div,{tabIndex:-1,...c,ref:y,onKeyDown:S})});Px.displayName=x5;function w5(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(fo(r,{select:e}),document.activeElement!==t)return}function _5(n){const e=HC(n),t=jb(e,n),r=jb(e.reverse(),n);return[t,r]}function HC(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function jb(n,e){for(const t of n)if(!E5(t,{upTo:e}))return t}function E5(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function b5(n){return n instanceof HTMLInputElement&&"select"in n}function fo(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&b5(n)&&e&&n.select()}}var Ab=S5();function S5(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=Pb(n,e),n.unshift(e)},remove(e){var t;n=Pb(n,e),(t=n[0])==null||t.resume()}}}function Pb(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function N5(n){return n.filter(e=>e.tagName!=="A")}function T5(n,e){return _.useReducer((t,r)=>e[t][r]??t,n)}var Mm=n=>{const{present:e,children:t}=n,r=C5(e),s=typeof t=="function"?t({present:r.isPresent}):_.Children.only(t),a=wt(r.ref,I5(s));return typeof t=="function"||r.isPresent?_.cloneElement(s,{ref:a}):null};Mm.displayName="Presence";function C5(n){const[e,t]=_.useState(),r=_.useRef({}),s=_.useRef(n),a=_.useRef("none"),c=n?"mounted":"unmounted",[u,h]=T5(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const m=Xh(r.current);a.current=u==="mounted"?m:"none"},[u]),Gt(()=>{const m=r.current,g=s.current;if(g!==n){const y=a.current,b=Xh(m);n?h("MOUNT"):b==="none"||(m==null?void 0:m.display)==="none"?h("UNMOUNT"):h(g&&y!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,h]),Gt(()=>{if(e){let m;const g=e.ownerDocument.defaultView??window,v=b=>{const E=Xh(r.current).includes(b.animationName);if(b.target===e&&E&&(h("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",m=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},y=b=>{b.target===e&&(a.current=Xh(r.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{g.clearTimeout(m),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:_.useCallback(m=>{m&&(r.current=getComputedStyle(m)),t(m)},[])}}function Xh(n){return(n==null?void 0:n.animationName)||"none"}function I5(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Hg=0;function j5(){_.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??Rb()),document.body.insertAdjacentElement("beforeend",n[1]??Rb()),Hg++,()=>{Hg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Hg--}},[])}function Rb(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Ou="right-scroll-bar-position",Lu="width-before-scroll-bar",A5="with-scroll-bars-hidden",P5="--removed-body-scroll-bar-size";function Kg(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function R5(n,e){var t=_.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var k5=typeof window<"u"?_.useLayoutEffect:_.useEffect,kb=new WeakMap;function KC(n,e){var t=R5(null,function(r){return n.forEach(function(s){return Kg(s,r)})});return k5(function(){var r=kb.get(t);if(r){var s=new Set(r),a=new Set(n),c=t.current;s.forEach(function(u){a.has(u)||Kg(u,null)}),a.forEach(function(u){s.has(u)||Kg(u,c)})}kb.set(t,n)},[n]),t}function D5(n){return n}function O5(n,e){e===void 0&&(e=D5);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(a){var c=e(a,r);return t.push(c),function(){t=t.filter(function(u){return u!==c})}},assignSyncMedium:function(a){for(r=!0;t.length;){var c=t;t=[],c.forEach(a)}t={push:function(u){return a(u)},filter:function(){return t}}},assignMedium:function(a){r=!0;var c=[];if(t.length){var u=t;t=[],u.forEach(a),c=t}var h=function(){var g=c;c=[],g.forEach(a)},m=function(){return Promise.resolve().then(h)};m(),t={push:function(g){c.push(g),m()},filter:function(g){return c=c.filter(g),t}}}};return s}function GC(n){n===void 0&&(n={});var e=O5(null);return e.options=Gn({async:!0,ssr:!1},n),e}var QC=function(n){var e=n.sideCar,t=Nc(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,Gn({},t))};QC.isSideCarExport=!0;function YC(n,e){return n.useMedium(e),QC}var XC=GC(),Gg=function(){},Fm=_.forwardRef(function(n,e){var t=_.useRef(null),r=_.useState({onScrollCapture:Gg,onWheelCapture:Gg,onTouchMoveCapture:Gg}),s=r[0],a=r[1],c=n.forwardProps,u=n.children,h=n.className,m=n.removeScrollBar,g=n.enabled,v=n.shards,y=n.sideCar,b=n.noIsolation,S=n.inert,E=n.allowPinchZoom,x=n.as,A=x===void 0?"div":x,I=n.gapMode,C=Nc(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=y,V=KC([t,e]),B=Gn(Gn({},C),s);return _.createElement(_.Fragment,null,g&&_.createElement(O,{sideCar:XC,removeScrollBar:m,shards:v,noIsolation:b,inert:S,setCallbacks:a,allowPinchZoom:!!E,lockRef:t,gapMode:I}),c?_.cloneElement(_.Children.only(u),Gn(Gn({},B),{ref:V})):_.createElement(A,Gn({},B,{className:h,ref:V}),u))});Fm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Fm.classNames={fullWidth:Lu,zeroRight:Ou};var L5=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function M5(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=L5();return e&&n.setAttribute("nonce",e),n}function F5(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function V5(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var U5=function(){var n=0,e=null;return{add:function(t){n==0&&(e=M5())&&(F5(e,t),V5(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},$5=function(){var n=U5();return function(e,t){_.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},Rx=function(){var n=$5(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},z5={left:0,top:0,right:0,gap:0},Qg=function(n){return parseInt(n||"",10)||0},B5=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[Qg(t),Qg(r),Qg(s)]},q5=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return z5;var e=B5(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},W5=Rx(),Ql="data-scroll-locked",H5=function(n,e,t,r){var s=n.left,a=n.top,c=n.right,u=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(A5,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(Ql,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ou,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Lu,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Ou," .").concat(Ou,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Lu," .").concat(Lu,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ql,`] {
    `).concat(P5,": ").concat(u,`px;
  }
`)},Db=function(){var n=parseInt(document.body.getAttribute(Ql)||"0",10);return isFinite(n)?n:0},K5=function(){_.useEffect(function(){return document.body.setAttribute(Ql,(Db()+1).toString()),function(){var n=Db()-1;n<=0?document.body.removeAttribute(Ql):document.body.setAttribute(Ql,n.toString())}},[])},JC=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;K5();var a=_.useMemo(function(){return q5(s)},[s]);return _.createElement(W5,{styles:H5(a,!e,s,t?"":"!important")})},Xv=!1;if(typeof window<"u")try{var Jh=Object.defineProperty({},"passive",{get:function(){return Xv=!0,!0}});window.addEventListener("test",Jh,Jh),window.removeEventListener("test",Jh,Jh)}catch{Xv=!1}var kl=Xv?{passive:!1}:!1,G5=function(n){return n.tagName==="TEXTAREA"},ZC=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!G5(n)&&t[e]==="visible")},Q5=function(n){return ZC(n,"overflowY")},Y5=function(n){return ZC(n,"overflowX")},Ob=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=eI(n,r);if(s){var a=tI(n,r),c=a[1],u=a[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},X5=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},J5=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},eI=function(n,e){return n==="v"?Q5(e):Y5(e)},tI=function(n,e){return n==="v"?X5(e):J5(e)},Z5=function(n,e){return n==="h"&&e==="rtl"?-1:1},e9=function(n,e,t,r,s){var a=Z5(n,window.getComputedStyle(e).direction),c=a*r,u=t.target,h=e.contains(u),m=!1,g=c>0,v=0,y=0;do{var b=tI(n,u),S=b[0],E=b[1],x=b[2],A=E-x-a*S;(S||A)&&eI(n,u)&&(v+=A,y+=S),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(g&&Math.abs(v)<1||!g&&Math.abs(y)<1)&&(m=!0),m},Zh=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Lb=function(n){return[n.deltaX,n.deltaY]},Mb=function(n){return n&&"current"in n?n.current:n},t9=function(n,e){return n[0]===e[0]&&n[1]===e[1]},n9=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},r9=0,Dl=[];function s9(n){var e=_.useRef([]),t=_.useRef([0,0]),r=_.useRef(),s=_.useState(r9++)[0],a=_.useState(Rx)[0],c=_.useRef(n);_.useEffect(function(){c.current=n},[n]),_.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var E=uN([n.lockRef.current],(n.shards||[]).map(Mb),!0).filter(Boolean);return E.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),E.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var u=_.useCallback(function(E,x){if("touches"in E&&E.touches.length===2||E.type==="wheel"&&E.ctrlKey)return!c.current.allowPinchZoom;var A=Zh(E),I=t.current,C="deltaX"in E?E.deltaX:I[0]-A[0],O="deltaY"in E?E.deltaY:I[1]-A[1],V,B=E.target,P=Math.abs(C)>Math.abs(O)?"h":"v";if("touches"in E&&P==="h"&&B.type==="range")return!1;var R=Ob(P,B);if(!R)return!0;if(R?V=P:(V=P==="v"?"h":"v",R=Ob(P,B)),!R)return!1;if(!r.current&&"changedTouches"in E&&(C||O)&&(r.current=V),!V)return!0;var D=r.current||V;return e9(D,x,E,D==="h"?C:O)},[]),h=_.useCallback(function(E){var x=E;if(!(!Dl.length||Dl[Dl.length-1]!==a)){var A="deltaY"in x?Lb(x):Zh(x),I=e.current.filter(function(V){return V.name===x.type&&(V.target===x.target||x.target===V.shadowParent)&&t9(V.delta,A)})[0];if(I&&I.should){x.cancelable&&x.preventDefault();return}if(!I){var C=(c.current.shards||[]).map(Mb).filter(Boolean).filter(function(V){return V.contains(x.target)}),O=C.length>0?u(x,C[0]):!c.current.noIsolation;O&&x.cancelable&&x.preventDefault()}}},[]),m=_.useCallback(function(E,x,A,I){var C={name:E,delta:x,target:A,should:I,shadowParent:i9(A)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(O){return O!==C})},1)},[]),g=_.useCallback(function(E){t.current=Zh(E),r.current=void 0},[]),v=_.useCallback(function(E){m(E.type,Lb(E),E.target,u(E,n.lockRef.current))},[]),y=_.useCallback(function(E){m(E.type,Zh(E),E.target,u(E,n.lockRef.current))},[]);_.useEffect(function(){return Dl.push(a),n.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:y}),document.addEventListener("wheel",h,kl),document.addEventListener("touchmove",h,kl),document.addEventListener("touchstart",g,kl),function(){Dl=Dl.filter(function(E){return E!==a}),document.removeEventListener("wheel",h,kl),document.removeEventListener("touchmove",h,kl),document.removeEventListener("touchstart",g,kl)}},[]);var b=n.removeScrollBar,S=n.inert;return _.createElement(_.Fragment,null,S?_.createElement(a,{styles:n9(s)}):null,b?_.createElement(JC,{gapMode:n.gapMode}):null)}function i9(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const o9=YC(XC,s9);var nI=_.forwardRef(function(n,e){return _.createElement(Fm,Gn({},n,{ref:e,sideCar:o9}))});nI.classNames=Fm.classNames;var a9=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Ol=new WeakMap,ef=new WeakMap,tf={},Yg=0,rI=function(n){return n&&(n.host||rI(n.parentNode))},l9=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=rI(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},c9=function(n,e,t,r){var s=l9(e,Array.isArray(n)?n:[n]);tf[t]||(tf[t]=new WeakMap);var a=tf[t],c=[],u=new Set,h=new Set(s),m=function(v){!v||u.has(v)||(u.add(v),m(v.parentNode))};s.forEach(m);var g=function(v){!v||h.has(v)||Array.prototype.forEach.call(v.children,function(y){if(u.has(y))g(y);else try{var b=y.getAttribute(r),S=b!==null&&b!=="false",E=(Ol.get(y)||0)+1,x=(a.get(y)||0)+1;Ol.set(y,E),a.set(y,x),c.push(y),E===1&&S&&ef.set(y,!0),x===1&&y.setAttribute(t,"true"),S||y.setAttribute(r,"true")}catch(A){console.error("aria-hidden: cannot operate on ",y,A)}})};return g(e),u.clear(),Yg++,function(){c.forEach(function(v){var y=Ol.get(v)-1,b=a.get(v)-1;Ol.set(v,y),a.set(v,b),y||(ef.has(v)||v.removeAttribute(r),ef.delete(v)),b||v.removeAttribute(t)}),Yg--,Yg||(Ol=new WeakMap,Ol=new WeakMap,ef=new WeakMap,tf={})}},sI=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=a9(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),c9(r,s,t,"aria-hidden")):function(){return null}},kx="Dialog",[iI,Fz]=v5(kx),[u9,ys]=iI(kx),oI=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:a,modal:c=!0}=n,u=_.useRef(null),h=_.useRef(null),[m=!1,g]=ka({prop:r,defaultProp:s,onChange:a});return l.jsx(u9,{scope:e,triggerRef:u,contentRef:h,contentId:To(),titleId:To(),descriptionId:To(),open:m,onOpenChange:g,onOpenToggle:_.useCallback(()=>g(v=>!v),[g]),modal:c,children:t})};oI.displayName=kx;var aI="DialogTrigger",lI=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=ys(aI,t),a=wt(e,s.triggerRef);return l.jsx(We.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Lx(s.open),...r,ref:a,onClick:$e(n.onClick,s.onOpenToggle)})});lI.displayName=aI;var Dx="DialogPortal",[d9,cI]=iI(Dx,{forceMount:void 0}),uI=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,a=ys(Dx,e);return l.jsx(d9,{scope:e,forceMount:t,children:_.Children.map(r,c=>l.jsx(Mm,{present:t||a.open,children:l.jsx(ES,{asChild:!0,container:s,children:c})}))})};uI.displayName=Dx;var Xf="DialogOverlay",dI=_.forwardRef((n,e)=>{const t=cI(Xf,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,a=ys(Xf,n.__scopeDialog);return a.modal?l.jsx(Mm,{present:r||a.open,children:l.jsx(h9,{...s,ref:e})}):null});dI.displayName=Xf;var h9=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=ys(Xf,t);return l.jsx(nI,{as:Ra,allowPinchZoom:!0,shards:[s.contentRef],children:l.jsx(We.div,{"data-state":Lx(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),za="DialogContent",hI=_.forwardRef((n,e)=>{const t=cI(za,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,a=ys(za,n.__scopeDialog);return l.jsx(Mm,{present:r||a.open,children:a.modal?l.jsx(f9,{...s,ref:e}):l.jsx(m9,{...s,ref:e})})});hI.displayName=za;var f9=_.forwardRef((n,e)=>{const t=ys(za,n.__scopeDialog),r=_.useRef(null),s=wt(e,t.contentRef,r);return _.useEffect(()=>{const a=r.current;if(a)return sI(a)},[]),l.jsx(fI,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e(n.onCloseAutoFocus,a=>{var c;a.preventDefault(),(c=t.triggerRef.current)==null||c.focus()}),onPointerDownOutside:$e(n.onPointerDownOutside,a=>{const c=a.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&a.preventDefault()}),onFocusOutside:$e(n.onFocusOutside,a=>a.preventDefault())})}),m9=_.forwardRef((n,e)=>{const t=ys(za,n.__scopeDialog),r=_.useRef(!1),s=_.useRef(!1);return l.jsx(fI,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var c,u;(c=n.onCloseAutoFocus)==null||c.call(n,a),a.defaultPrevented||(r.current||(u=t.triggerRef.current)==null||u.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var h,m;(h=n.onInteractOutside)==null||h.call(n,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const c=a.target;((m=t.triggerRef.current)==null?void 0:m.contains(c))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),fI=_.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...c}=n,u=ys(za,t),h=_.useRef(null),m=wt(e,h);return j5(),l.jsxs(l.Fragment,{children:[l.jsx(Px,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:l.jsx(vy,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Lx(u.open),...c,ref:m,onDismiss:()=>u.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(p9,{titleId:u.titleId}),l.jsx(v9,{contentRef:h,descriptionId:u.descriptionId})]})]})}),Ox="DialogTitle",mI=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=ys(Ox,t);return l.jsx(We.h2,{id:s.titleId,...r,ref:e})});mI.displayName=Ox;var pI="DialogDescription",gI=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=ys(pI,t);return l.jsx(We.p,{id:s.descriptionId,...r,ref:e})});gI.displayName=pI;var vI="DialogClose",yI=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=ys(vI,t);return l.jsx(We.button,{type:"button",...r,ref:e,onClick:$e(n.onClick,()=>s.onOpenChange(!1))})});yI.displayName=vI;function Lx(n){return n?"open":"closed"}var xI="DialogTitleWarning",[Vz,wI]=g5(xI,{contentName:za,titleName:Ox,docsSlug:"dialog"}),p9=({titleId:n})=>{const e=wI(xI),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return _.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},g9="DialogDescriptionWarning",v9=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${wI(g9).contentName}}.`;return _.useEffect(()=>{var a;const s=(a=n.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},y9=oI,x9=lI,w9=uI,_I=dI,EI=hI,bI=mI,SI=gI,NI=yI;const _9=y9,E9=x9,b9=w9,S9=NI,TI=_.forwardRef(({className:n,...e},t)=>l.jsx(_I,{ref:t,className:et("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));TI.displayName=_I.displayName;const CI=_.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(b9,{children:[l.jsx(TI,{}),l.jsxs(EI,{ref:r,className:et("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,l.jsxs(NI,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[l.jsx(ic,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));CI.displayName=EI.displayName;const II=({className:n,...e})=>l.jsx("div",{className:et("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});II.displayName="DialogHeader";const jI=({className:n,...e})=>l.jsx("div",{className:et("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});jI.displayName="DialogFooter";const AI=_.forwardRef(({className:n,...e},t)=>l.jsx(bI,{ref:t,className:et("text-lg font-semibold leading-none tracking-tight",n),...e}));AI.displayName=bI.displayName;const PI=_.forwardRef(({className:n,...e},t)=>l.jsx(SI,{ref:t,className:et("text-sm text-muted-foreground",n),...e}));PI.displayName=SI.displayName;function RI({quiz:n,onClose:e,onSave:t}){const[r,s]=_.useState({title:"",description:"",timeLimit:30,passingScore:70,questions:[]}),[a,c]=_.useState({question:"",options:["","","",""],correctAnswer:0,imageUrl:"",weight:1}),[u,h]=_.useState(!1);_.useEffect(()=>{n&&s({title:n.title||"",description:n.description||"",timeLimit:n.timeLimit||30,passingScore:n.passingScore||70,questions:n.questions||[],type:n.type||"multiple_choice"})},[n]);const m=async E=>{E.preventDefault(),h(!0);try{const x={...r,...n?{}:{createdAt:new Date,createdBy:"Current User"}};x.type||(x.type="multiple_choice"),t(x)}catch(x){console.error("Error saving quiz:",x)}finally{h(!1)}},g=()=>{var A;const E=r.type==="flashcard",x=a.question.trim();if(E){const I=a.options&&String(a.options[0]).trim()||a.answer;if(x&&I){const C={...a,options:[String(((A=a.options)==null?void 0:A[0])||a.answer||"").trim()],correctAnswer:0};s(O=>({...O,questions:[...O.questions,C]})),c({question:"",options:[""],correctAnswer:0,imageUrl:"",weight:1})}return}x&&Array.isArray(a.options)&&a.options.filter(I=>String(I).trim()).length>=2&&typeof a.correctAnswer=="number"&&String(a.options[a.correctAnswer]||"").trim()&&(s(I=>({...I,questions:[...I.questions,{...a}]})),c({question:"",options:["","","",""],correctAnswer:0,imageUrl:"",weight:1}))},v=E=>{s(x=>({...x,questions:x.questions.filter((A,I)=>I!==E)}))},y=(E,x)=>{const A=[...a.options||[]];A[E]=x,c(I=>({...I,options:A}))},b=()=>{c(E=>({...E,options:[...E.options||[],""]}))},S=E=>{c(x=>{const A=[...x.options||[]];A.splice(E,1);let I=x.correctAnswer;return I>=A.length&&(I=Math.max(0,A.length-1)),{...x,options:A,correctAnswer:I}})};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(se,{variant:"ghost",onClick:e,children:[l.jsx(Ys,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Quiz":"Create Quiz"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update the quiz details and questions":"Create a new quiz for students"})]})]})}),l.jsxs("form",{onSubmit:m,className:"space-y-6",children:[l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsxs(Xe,{className:"flex items-center gap-2",children:[l.jsx(Ni,{className:"h-5 w-5"}),"Quiz Information"]}),l.jsx(At,{children:"Basic information about the quiz"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"title",children:"Quiz Title *"}),l.jsx(Ie,{id:"title",placeholder:"Enter quiz title...",value:r.title,onChange:E=>s(x=>({...x,title:E.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"description",children:"Description"}),l.jsx(Ri,{id:"description",placeholder:"Describe what this quiz covers...",value:r.description,onChange:E=>s(x=>({...x,description:E.target.value})),rows:3})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Re,{htmlFor:"timeLimit",className:"flex items-center gap-2",children:[l.jsx(wf,{className:"h-4 w-4"}),"Time Limit (minutes)"]}),l.jsx(Ie,{id:"timeLimit",type:"number",min:"1",value:r.timeLimit,onChange:E=>s(x=>({...x,timeLimit:parseInt(E.target.value)||30}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Re,{htmlFor:"passingScore",className:"flex items-center gap-2",children:[l.jsx(TR,{className:"h-4 w-4"}),"Passing Score (%)"]}),l.jsx(Ie,{id:"passingScore",type:"number",min:"0",max:"100",value:r.passingScore,onChange:E=>s(x=>({...x,passingScore:parseInt(E.target.value)||70}))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"quizType",children:"Quiz Type"}),l.jsxs("select",{id:"quizType",value:r.type||"multiple_choice",onChange:E=>s(x=>({...x,type:E.target.value})),className:"w-full border rounded px-3 py-2",children:[l.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),l.jsx("option",{value:"flashcard",children:"Flashcard"})]}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose how this quiz will be presented to students."})]})]})]}),l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Add Question"}),l.jsx(At,{children:"Create multiple choice questions for the quiz"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"question",children:"Question"}),l.jsx(Ri,{id:"question",placeholder:"Enter your question...",value:a.question,onChange:E=>c(x=>({...x,question:E.target.value})),rows:3})]}),l.jsx("div",{className:"space-y-2",children:r.type==="flashcard"?l.jsxs(l.Fragment,{children:[l.jsx(Re,{children:"Correct Answer"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ie,{placeholder:"Correct answer",value:a.options[0]??a.answer??"",onChange:E=>{c(x=>({...x,options:[E.target.value]}))}}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"For flashcards enter the correct answer (single). Use [[answer]] in the question to create blanks."})]})]}):l.jsxs(l.Fragment,{children:[l.jsx(Re,{children:"Answer Options"}),l.jsxs("div",{className:"space-y-2",children:[a.options.map((E,x)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[l.jsx(Re,{className:"w-8 h-8 rounded-full bg-secondary flex items-center justify-center text-sm",children:String.fromCharCode(65+x)}),l.jsx(Ie,{placeholder:`Option ${String.fromCharCode(65+x)}`,value:E,onChange:A=>y(x,A.target.value),className:a.correctAnswer===x?"ring-2 ring-green-500":""})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(se,{type:"button",variant:a.correctAnswer===x?"default":"outline",size:"sm",onClick:()=>c(A=>({...A,correctAnswer:x})),children:a.correctAnswer===x?"Correct":"Mark Correct"}),a.options.length>2&&l.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:()=>S(x),children:"Remove"})]})]},x)),l.jsx("div",{children:l.jsx(se,{type:"button",variant:"outline",onClick:b,className:"mt-2",children:"Add Option"})})]})]})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),l.jsx(Ie,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:a.imageUrl,onChange:E=>c(x=>({...x,imageUrl:E.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"weight",children:"Question Weight"}),l.jsx(Ie,{id:"weight",type:"number",min:1,value:a.weight,onChange:E=>c(x=>({...x,weight:parseFloat(E.target.value)||1}))})]}),l.jsxs(se,{type:"button",onClick:g,className:"w-full",children:[l.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Add Question"]})]})]}),r.questions.length>0&&l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsxs(Xe,{children:["Quiz Questions (",r.questions.length,")"]})}),l.jsx(_e,{children:l.jsx("div",{className:"space-y-4",children:r.questions.map((E,x)=>l.jsx("div",{className:"p-4 border rounded-lg space-y-3",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("p",{className:"font-medium",children:[x+1,". ",E.question]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Re,{className:"text-sm",children:"Weight"}),l.jsx(Ie,{type:"number",min:1,value:E.weight||1,onChange:A=>{const I=parseFloat(A.target.value)||1;s(C=>({...C,questions:C.questions.map((O,V)=>V===x?{...O,weight:I}:O)}))},className:"w-20 text-sm"})]})]}),l.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:E.options.map((A,I)=>l.jsxs("div",{className:`flex items-center gap-2 p-2 rounded ${E.correctAnswer===I?"bg-green-100 text-green-800":"bg-secondary/50"}`,children:[l.jsx("span",{className:"w-6 h-6 rounded-full bg-white flex items-center justify-center text-sm font-medium",children:String.fromCharCode(65+I)}),l.jsx("span",{className:"text-sm",children:A}),E.correctAnswer===I&&l.jsx(nn,{variant:"outline",className:"ml-auto text-xs bg-green-200",children:"Correct"})]},I))})]}),l.jsx("div",{className:"flex flex-col items-end gap-2",children:l.jsx(se,{type:"button",variant:"ghost",size:"icon",onClick:()=>v(x),className:"text-destructive hover:text-destructive",children:l.jsx(Ln,{className:"h-4 w-4"})})})]})},x))})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(se,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(se,{type:"submit",disabled:u||r.questions.length===0,children:[l.jsx(Ko,{className:"h-4 w-4 mr-2"}),u?"Saving...":n?"Update Quiz":"Create Quiz"]})]})]})]})}function kI({year:n,yearType:e,onClose:t,onSave:r}){const[s,a]=_.useState({name:"",imageUrl:"",hours:3}),[c,u]=_.useState(!1),h=async m=>{m.preventDefault(),u(!0);try{const g={name:s.name,imageUrl:s.imageUrl||"",hours:s.hours||3,createdAt:new Date};r(g)}catch(g){console.error("Error saving subject:",g)}finally{u(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(se,{variant:"ghost",onClick:t,children:[l.jsx(Ys,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Add Subject to Year ",n]}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e==="basic"?l.jsx(Tu,{className:"h-4 w-4 text-blue-600"}):l.jsx(Cu,{className:"h-4 w-4 text-red-600"}),l.jsxs("p",{className:"text-muted-foreground",children:["Adding to ",e==="basic"?"Basic":"Clinical"," Years â€¢ Year ",n]})]})]})]})}),l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l.jsx(we,{className:`border-l-4 ${e==="basic"?"border-l-blue-500 bg-blue-50/50":"border-l-red-500 bg-red-50/50"}`,children:l.jsx(_e,{className:"pt-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[e==="basic"?l.jsx(Tu,{className:"h-8 w-8 text-blue-600"}):l.jsx(Cu,{className:"h-8 w-8 text-red-600"}),l.jsxs("div",{children:[l.jsxs("h3",{className:"font-semibold text-lg",children:["Year ",n]}),l.jsx("p",{className:"text-sm text-muted-foreground",children:e==="basic"?"Basic Years":"Clinical Years"})]})]})})}),l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsxs(Xe,{className:"flex items-center gap-2",children:[e==="basic"?l.jsx(Tu,{className:"h-5 w-5 text-blue-600"}):l.jsx(Cu,{className:"h-5 w-5 text-red-600"}),"Subject Information"]}),l.jsx(At,{children:"Basic information about the subject"})]}),l.jsx(_e,{className:"space-y-4",children:l.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"year",children:"Year"}),l.jsx(Ie,{id:"year",value:`Year ${n} (${e==="basic"?"Basic":"Clinical"})`,disabled:!0,className:"bg-muted"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"name",children:"Subject Name *"}),l.jsx(Ie,{id:"name",placeholder:"e.g., Anatomy & Physiology",value:s.name,onChange:m=>a(g=>({...g,name:m.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"hours",children:"Credit Hours"}),l.jsx(Ie,{id:"hours",type:"number",placeholder:"3",value:s.hours,onChange:m=>a(g=>({...g,hours:parseInt(m.target.value)||3})),min:"1",max:"12"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),l.jsx(Ie,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:s.imageUrl,onChange:m=>a(g=>({...g,imageUrl:m.target.value}))})]})]})})]}),s.name&&l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Preview"}),l.jsxs(At,{children:["How the subject will appear in Year ",n]})]}),l.jsx(_e,{children:l.jsxs("div",{className:"p-4 border rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.imageUrl?l.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-8 h-8 object-cover rounded",onError:m=>{m.currentTarget.style.display="none"}}):l.jsx(us,{className:"h-5 w-5 text-primary"}),l.jsx("h3",{className:"font-semibold text-lg",children:s.name})]}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Year ",n," â€¢ ",e," years"]})]})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(se,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),l.jsxs(se,{type:"submit",disabled:c,children:[l.jsx(Ko,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add Subject"]})]})]})]})}function Fb(n,[e,t]){return Math.min(t,Math.max(e,n))}var N9=_.createContext(void 0);function Mx(n){const e=_.useContext(N9);return n||e||"ltr"}var T9="DismissableLayer",Jv="dismissableLayer.update",C9="dismissableLayer.pointerDownOutside",I9="dismissableLayer.focusOutside",Vb,DI=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),OI=_.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=n,m=_.useContext(DI),[g,v]=_.useState(null),y=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=_.useState({}),S=wt(e,P=>v(P)),E=Array.from(m.layers),[x]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),A=E.indexOf(x),I=g?E.indexOf(g):-1,C=m.layersWithOutsidePointerEventsDisabled.size>0,O=I>=A,V=P9(P=>{const R=P.target,D=[...m.branches].some(k=>k.contains(R));!O||D||(s==null||s(P),c==null||c(P),P.defaultPrevented||u==null||u())},y),B=R9(P=>{const R=P.target;[...m.branches].some(k=>k.contains(R))||(a==null||a(P),c==null||c(P),P.defaultPrevented||u==null||u())},y);return uy(P=>{I===m.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},y),_.useEffect(()=>{if(g)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(Vb=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(g)),m.layers.add(g),Ub(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=Vb)}},[g,y,t,m]),_.useEffect(()=>()=>{g&&(m.layers.delete(g),m.layersWithOutsidePointerEventsDisabled.delete(g),Ub())},[g,m]),_.useEffect(()=>{const P=()=>b({});return document.addEventListener(Jv,P),()=>document.removeEventListener(Jv,P)},[]),l.jsx(We.div,{...h,ref:S,style:{pointerEvents:C?O?"auto":"none":void 0,...n.style},onFocusCapture:$e(n.onFocusCapture,B.onFocusCapture),onBlurCapture:$e(n.onBlurCapture,B.onBlurCapture),onPointerDownCapture:$e(n.onPointerDownCapture,V.onPointerDownCapture)})});OI.displayName=T9;var j9="DismissableLayerBranch",A9=_.forwardRef((n,e)=>{const t=_.useContext(DI),r=_.useRef(null),s=wt(e,r);return _.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),l.jsx(We.div,{...n,ref:s})});A9.displayName=j9;function P9(n,e=globalThis==null?void 0:globalThis.document){const t=En(n),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){LI(C9,t,m,{discrete:!0})};const m={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function R9(n,e=globalThis==null?void 0:globalThis.document){const t=En(n),r=_.useRef(!1);return _.useEffect(()=>{const s=a=>{a.target&&!r.current&&LI(I9,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Ub(){const n=new CustomEvent(Jv);document.dispatchEvent(n)}function LI(n,e,t,{discrete:r}){const s=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?tm(s,a):s.dispatchEvent(a)}var Xg=0;function k9(){_.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??$b()),document.body.insertAdjacentElement("beforeend",n[1]??$b()),Xg++,()=>{Xg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Xg--}},[])}function $b(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",n}var D9="Portal",MI=_.forwardRef((n,e)=>{var u;const{container:t,...r}=n,[s,a]=_.useState(!1);Gt(()=>a(!0),[]);const c=t||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?em.createPortal(l.jsx(We.div,{...r,ref:e}),c):null});MI.displayName=D9;var FI=GC(),Jg=function(){},Vm=_.forwardRef(function(n,e){var t=_.useRef(null),r=_.useState({onScrollCapture:Jg,onWheelCapture:Jg,onTouchMoveCapture:Jg}),s=r[0],a=r[1],c=n.forwardProps,u=n.children,h=n.className,m=n.removeScrollBar,g=n.enabled,v=n.shards,y=n.sideCar,b=n.noIsolation,S=n.inert,E=n.allowPinchZoom,x=n.as,A=x===void 0?"div":x,I=n.gapMode,C=Nc(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=y,V=KC([t,e]),B=Gn(Gn({},C),s);return _.createElement(_.Fragment,null,g&&_.createElement(O,{sideCar:FI,removeScrollBar:m,shards:v,noIsolation:b,inert:S,setCallbacks:a,allowPinchZoom:!!E,lockRef:t,gapMode:I}),c?_.cloneElement(_.Children.only(u),Gn(Gn({},B),{ref:V})):_.createElement(A,Gn({},B,{className:h,ref:V}),u))});Vm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Vm.classNames={fullWidth:Lu,zeroRight:Ou};var Zv=!1;if(typeof window<"u")try{var nf=Object.defineProperty({},"passive",{get:function(){return Zv=!0,!0}});window.addEventListener("test",nf,nf),window.removeEventListener("test",nf,nf)}catch{Zv=!1}var Ll=Zv?{passive:!1}:!1,O9=function(n){return n.tagName==="TEXTAREA"},VI=function(n,e){var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!O9(n)&&t[e]==="visible")},L9=function(n){return VI(n,"overflowY")},M9=function(n){return VI(n,"overflowX")},zb=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=UI(n,r);if(s){var a=$I(n,r),c=a[1],u=a[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},F9=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},V9=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},UI=function(n,e){return n==="v"?L9(e):M9(e)},$I=function(n,e){return n==="v"?F9(e):V9(e)},U9=function(n,e){return n==="h"&&e==="rtl"?-1:1},$9=function(n,e,t,r,s){var a=U9(n,window.getComputedStyle(e).direction),c=a*r,u=t.target,h=e.contains(u),m=!1,g=c>0,v=0,y=0;do{var b=$I(n,u),S=b[0],E=b[1],x=b[2],A=E-x-a*S;(S||A)&&UI(n,u)&&(v+=A,y+=S),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(g&&Math.abs(v)<1||!g&&Math.abs(y)<1)&&(m=!0),m},rf=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Bb=function(n){return[n.deltaX,n.deltaY]},qb=function(n){return n&&"current"in n?n.current:n},z9=function(n,e){return n[0]===e[0]&&n[1]===e[1]},B9=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},q9=0,Ml=[];function W9(n){var e=_.useRef([]),t=_.useRef([0,0]),r=_.useRef(),s=_.useState(q9++)[0],a=_.useState(Rx)[0],c=_.useRef(n);_.useEffect(function(){c.current=n},[n]),_.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var E=uN([n.lockRef.current],(n.shards||[]).map(qb),!0).filter(Boolean);return E.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),E.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var u=_.useCallback(function(E,x){if("touches"in E&&E.touches.length===2)return!c.current.allowPinchZoom;var A=rf(E),I=t.current,C="deltaX"in E?E.deltaX:I[0]-A[0],O="deltaY"in E?E.deltaY:I[1]-A[1],V,B=E.target,P=Math.abs(C)>Math.abs(O)?"h":"v";if("touches"in E&&P==="h"&&B.type==="range")return!1;var R=zb(P,B);if(!R)return!0;if(R?V=P:(V=P==="v"?"h":"v",R=zb(P,B)),!R)return!1;if(!r.current&&"changedTouches"in E&&(C||O)&&(r.current=V),!V)return!0;var D=r.current||V;return $9(D,x,E,D==="h"?C:O)},[]),h=_.useCallback(function(E){var x=E;if(!(!Ml.length||Ml[Ml.length-1]!==a)){var A="deltaY"in x?Bb(x):rf(x),I=e.current.filter(function(V){return V.name===x.type&&(V.target===x.target||x.target===V.shadowParent)&&z9(V.delta,A)})[0];if(I&&I.should){x.cancelable&&x.preventDefault();return}if(!I){var C=(c.current.shards||[]).map(qb).filter(Boolean).filter(function(V){return V.contains(x.target)}),O=C.length>0?u(x,C[0]):!c.current.noIsolation;O&&x.cancelable&&x.preventDefault()}}},[]),m=_.useCallback(function(E,x,A,I){var C={name:E,delta:x,target:A,should:I,shadowParent:H9(A)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(O){return O!==C})},1)},[]),g=_.useCallback(function(E){t.current=rf(E),r.current=void 0},[]),v=_.useCallback(function(E){m(E.type,Bb(E),E.target,u(E,n.lockRef.current))},[]),y=_.useCallback(function(E){m(E.type,rf(E),E.target,u(E,n.lockRef.current))},[]);_.useEffect(function(){return Ml.push(a),n.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:y}),document.addEventListener("wheel",h,Ll),document.addEventListener("touchmove",h,Ll),document.addEventListener("touchstart",g,Ll),function(){Ml=Ml.filter(function(E){return E!==a}),document.removeEventListener("wheel",h,Ll),document.removeEventListener("touchmove",h,Ll),document.removeEventListener("touchstart",g,Ll)}},[]);var b=n.removeScrollBar,S=n.inert;return _.createElement(_.Fragment,null,S?_.createElement(a,{styles:B9(s)}):null,b?_.createElement(JC,{gapMode:n.gapMode}):null)}function H9(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const K9=YC(FI,W9);var zI=_.forwardRef(function(n,e){return _.createElement(Vm,Gn({},n,{ref:e,sideCar:K9}))});zI.classNames=Vm.classNames;var G9=[" ","Enter","ArrowUp","ArrowDown"],Q9=[" ","Enter"],_d="Select",[Um,$m,Y9]=cy(_d),[kc,Uz]=ki(_d,[Y9,am]),zm=am(),[X9,Jo]=kc(_d),[J9,Z9]=kc(_d),BI=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:a,value:c,defaultValue:u,onValueChange:h,dir:m,name:g,autoComplete:v,disabled:y,required:b}=n,S=zm(e),[E,x]=_.useState(null),[A,I]=_.useState(null),[C,O]=_.useState(!1),V=Mx(m),[B=!1,P]=ka({prop:r,defaultProp:s,onChange:a}),[R,D]=ka({prop:c,defaultProp:u,onChange:h}),k=_.useRef(null),$=E?!!E.closest("form"):!0,[z,M]=_.useState(new Set),oe=Array.from(z).map(H=>H.props.value).join(";");return l.jsx(aD,{...S,children:l.jsxs(X9,{required:b,scope:e,trigger:E,onTriggerChange:x,valueNode:A,onValueNodeChange:I,valueNodeHasChildren:C,onValueNodeHasChildrenChange:O,contentId:To(),value:R,onValueChange:D,open:B,onOpenChange:P,dir:V,triggerPointerDownPosRef:k,disabled:y,children:[l.jsx(Um.Provider,{scope:e,children:l.jsx(J9,{scope:n.__scopeSelect,onNativeOptionAdd:_.useCallback(H=>{M(J=>new Set(J).add(H))},[]),onNativeOptionRemove:_.useCallback(H=>{M(J=>{const Y=new Set(J);return Y.delete(H),Y})},[]),children:t})}),$?l.jsxs(mj,{"aria-hidden":!0,required:b,tabIndex:-1,name:g,autoComplete:v,value:R,onChange:H=>D(H.target.value),disabled:y,children:[R===void 0?l.jsx("option",{value:""}):null,Array.from(z)]},oe):null]})})};BI.displayName=_d;var qI="SelectTrigger",WI=_.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,a=zm(t),c=Jo(qI,t),u=c.disabled||r,h=wt(e,c.onTriggerChange),m=$m(t),[g,v,y]=pj(S=>{const E=m().filter(I=>!I.disabled),x=E.find(I=>I.value===c.value),A=gj(E,S,x);A!==void 0&&c.onValueChange(A.value)}),b=()=>{u||(c.onOpenChange(!0),y())};return l.jsx(xS,{asChild:!0,...a,children:l.jsx(We.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":fj(c.value)?"":void 0,...s,ref:h,onClick:$e(s.onClick,S=>{S.currentTarget.focus()}),onPointerDown:$e(s.onPointerDown,S=>{const E=S.target;E.hasPointerCapture(S.pointerId)&&E.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&(b(),c.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)},S.preventDefault())}),onKeyDown:$e(s.onKeyDown,S=>{const E=g.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&v(S.key),!(E&&S.key===" ")&&G9.includes(S.key)&&(b(),S.preventDefault())})})})});WI.displayName=qI;var HI="SelectValue",KI=_.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:a,placeholder:c="",...u}=n,h=Jo(HI,t),{onValueNodeHasChildrenChange:m}=h,g=a!==void 0,v=wt(e,h.onValueNodeChange);return Gt(()=>{m(g)},[m,g]),l.jsx(We.span,{...u,ref:v,style:{pointerEvents:"none"},children:fj(h.value)?l.jsx(l.Fragment,{children:c}):a})});KI.displayName=HI;var e$="SelectIcon",GI=_.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return l.jsx(We.span,{"aria-hidden":!0,...s,ref:e,children:r||"â–¼"})});GI.displayName=e$;var t$="SelectPortal",QI=n=>l.jsx(MI,{asChild:!0,...n});QI.displayName=t$;var Ba="SelectContent",YI=_.forwardRef((n,e)=>{const t=Jo(Ba,n.__scopeSelect),[r,s]=_.useState();if(Gt(()=>{s(new DocumentFragment)},[]),!t.open){const a=r;return a?qa.createPortal(l.jsx(XI,{scope:n.__scopeSelect,children:l.jsx(Um.Slot,{scope:n.__scopeSelect,children:l.jsx("div",{children:n.children})})}),a):null}return l.jsx(JI,{...n,ref:e})});YI.displayName=Ba;var wi=10,[XI,Zo]=kc(Ba),n$="SelectContentImpl",JI=_.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:c,side:u,sideOffset:h,align:m,alignOffset:g,arrowPadding:v,collisionBoundary:y,collisionPadding:b,sticky:S,hideWhenDetached:E,avoidCollisions:x,...A}=n,I=Jo(Ba,t),[C,O]=_.useState(null),[V,B]=_.useState(null),P=wt(e,me=>O(me)),[R,D]=_.useState(null),[k,$]=_.useState(null),z=$m(t),[M,oe]=_.useState(!1),H=_.useRef(!1);_.useEffect(()=>{if(C)return sI(C)},[C]),k9();const J=_.useCallback(me=>{const[Ee,...De]=z().map(Ke=>Ke.ref.current),[Te]=De.slice(-1),Me=document.activeElement;for(const Ke of me)if(Ke===Me||(Ke==null||Ke.scrollIntoView({block:"nearest"}),Ke===Ee&&V&&(V.scrollTop=0),Ke===Te&&V&&(V.scrollTop=V.scrollHeight),Ke==null||Ke.focus(),document.activeElement!==Me))return},[z,V]),Y=_.useCallback(()=>J([R,C]),[J,R,C]);_.useEffect(()=>{M&&Y()},[M,Y]);const{onOpenChange:q,triggerPointerDownPosRef:Q}=I;_.useEffect(()=>{if(C){let me={x:0,y:0};const Ee=Te=>{var Me,Ke;me={x:Math.abs(Math.round(Te.pageX)-(((Me=Q.current)==null?void 0:Me.x)??0)),y:Math.abs(Math.round(Te.pageY)-(((Ke=Q.current)==null?void 0:Ke.y)??0))}},De=Te=>{me.x<=10&&me.y<=10?Te.preventDefault():C.contains(Te.target)||q(!1),document.removeEventListener("pointermove",Ee),Q.current=null};return Q.current!==null&&(document.addEventListener("pointermove",Ee),document.addEventListener("pointerup",De,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ee),document.removeEventListener("pointerup",De,{capture:!0})}}},[C,q,Q]),_.useEffect(()=>{const me=()=>q(!1);return window.addEventListener("blur",me),window.addEventListener("resize",me),()=>{window.removeEventListener("blur",me),window.removeEventListener("resize",me)}},[q]);const[Z,U]=pj(me=>{const Ee=z().filter(Me=>!Me.disabled),De=Ee.find(Me=>Me.ref.current===document.activeElement),Te=gj(Ee,me,De);Te&&setTimeout(()=>Te.ref.current.focus())}),X=_.useCallback((me,Ee,De)=>{const Te=!H.current&&!De;(I.value!==void 0&&I.value===Ee||Te)&&(D(me),Te&&(H.current=!0))},[I.value]),le=_.useCallback(()=>C==null?void 0:C.focus(),[C]),be=_.useCallback((me,Ee,De)=>{const Te=!H.current&&!De;(I.value!==void 0&&I.value===Ee||Te)&&$(me)},[I.value]),ve=r==="popper"?ey:ZI,ce=ve===ey?{side:u,sideOffset:h,align:m,alignOffset:g,arrowPadding:v,collisionBoundary:y,collisionPadding:b,sticky:S,hideWhenDetached:E,avoidCollisions:x}:{};return l.jsx(XI,{scope:t,content:C,viewport:V,onViewportChange:B,itemRefCallback:X,selectedItem:R,onItemLeave:le,itemTextRefCallback:be,focusSelectedItem:Y,selectedItemText:k,position:r,isPositioned:M,searchRef:Z,children:l.jsx(zI,{as:Ra,allowPinchZoom:!0,children:l.jsx(Px,{asChild:!0,trapped:I.open,onMountAutoFocus:me=>{me.preventDefault()},onUnmountAutoFocus:$e(s,me=>{var Ee;(Ee=I.trigger)==null||Ee.focus({preventScroll:!0}),me.preventDefault()}),children:l.jsx(OI,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:me=>me.preventDefault(),onDismiss:()=>I.onOpenChange(!1),children:l.jsx(ve,{role:"listbox",id:I.contentId,"data-state":I.open?"open":"closed",dir:I.dir,onContextMenu:me=>me.preventDefault(),...A,...ce,onPlaced:()=>oe(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...A.style},onKeyDown:$e(A.onKeyDown,me=>{const Ee=me.ctrlKey||me.altKey||me.metaKey;if(me.key==="Tab"&&me.preventDefault(),!Ee&&me.key.length===1&&U(me.key),["ArrowUp","ArrowDown","Home","End"].includes(me.key)){let Te=z().filter(Me=>!Me.disabled).map(Me=>Me.ref.current);if(["ArrowUp","End"].includes(me.key)&&(Te=Te.slice().reverse()),["ArrowUp","ArrowDown"].includes(me.key)){const Me=me.target,Ke=Te.indexOf(Me);Te=Te.slice(Ke+1)}setTimeout(()=>J(Te)),me.preventDefault()}})})})})})})});JI.displayName=n$;var r$="SelectItemAlignedPosition",ZI=_.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,a=Jo(Ba,t),c=Zo(Ba,t),[u,h]=_.useState(null),[m,g]=_.useState(null),v=wt(e,P=>g(P)),y=$m(t),b=_.useRef(!1),S=_.useRef(!0),{viewport:E,selectedItem:x,selectedItemText:A,focusSelectedItem:I}=c,C=_.useCallback(()=>{if(a.trigger&&a.valueNode&&u&&m&&E&&x&&A){const P=a.trigger.getBoundingClientRect(),R=m.getBoundingClientRect(),D=a.valueNode.getBoundingClientRect(),k=A.getBoundingClientRect();if(a.dir!=="rtl"){const Me=k.left-R.left,Ke=D.left-Me,dt=P.left-Ke,Ct=P.width+dt,on=Math.max(Ct,R.width),Lt=window.innerWidth-wi,Mt=Fb(Ke,[wi,Lt-on]);u.style.minWidth=Ct+"px",u.style.left=Mt+"px"}else{const Me=R.right-k.right,Ke=window.innerWidth-D.right-Me,dt=window.innerWidth-P.right-Ke,Ct=P.width+dt,on=Math.max(Ct,R.width),Lt=window.innerWidth-wi,Mt=Fb(Ke,[wi,Lt-on]);u.style.minWidth=Ct+"px",u.style.right=Mt+"px"}const $=y(),z=window.innerHeight-wi*2,M=E.scrollHeight,oe=window.getComputedStyle(m),H=parseInt(oe.borderTopWidth,10),J=parseInt(oe.paddingTop,10),Y=parseInt(oe.borderBottomWidth,10),q=parseInt(oe.paddingBottom,10),Q=H+J+M+q+Y,Z=Math.min(x.offsetHeight*5,Q),U=window.getComputedStyle(E),X=parseInt(U.paddingTop,10),le=parseInt(U.paddingBottom,10),be=P.top+P.height/2-wi,ve=z-be,ce=x.offsetHeight/2,me=x.offsetTop+ce,Ee=H+J+me,De=Q-Ee;if(Ee<=be){const Me=x===$[$.length-1].ref.current;u.style.bottom="0px";const Ke=m.clientHeight-E.offsetTop-E.offsetHeight,dt=Math.max(ve,ce+(Me?le:0)+Ke+Y),Ct=Ee+dt;u.style.height=Ct+"px"}else{const Me=x===$[0].ref.current;u.style.top="0px";const dt=Math.max(be,H+E.offsetTop+(Me?X:0)+ce)+De;u.style.height=dt+"px",E.scrollTop=Ee-be+E.offsetTop}u.style.margin=`${wi}px 0`,u.style.minHeight=Z+"px",u.style.maxHeight=z+"px",r==null||r(),requestAnimationFrame(()=>b.current=!0)}},[y,a.trigger,a.valueNode,u,m,E,x,A,a.dir,r]);Gt(()=>C(),[C]);const[O,V]=_.useState();Gt(()=>{m&&V(window.getComputedStyle(m).zIndex)},[m]);const B=_.useCallback(P=>{P&&S.current===!0&&(C(),I==null||I(),S.current=!1)},[C,I]);return l.jsx(i$,{scope:t,contentWrapper:u,shouldExpandOnScrollRef:b,onScrollButtonChange:B,children:l.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:O},children:l.jsx(We.div,{...s,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});ZI.displayName=r$;var s$="SelectPopperPosition",ey=_.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=wi,...a}=n,c=zm(t);return l.jsx(wS,{...c,...a,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ey.displayName=s$;var[i$,Fx]=kc(Ba,{}),ty="SelectViewport",ej=_.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,a=Zo(ty,t),c=Fx(ty,t),u=wt(e,a.onViewportChange),h=_.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(Um.Slot,{scope:t,children:l.jsx(We.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:u,style:{position:"relative",flex:1,overflow:"auto",...s.style},onScroll:$e(s.onScroll,m=>{const g=m.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:y}=c;if(y!=null&&y.current&&v){const b=Math.abs(h.current-g.scrollTop);if(b>0){const S=window.innerHeight-wi*2,E=parseFloat(v.style.minHeight),x=parseFloat(v.style.height),A=Math.max(E,x);if(A<S){const I=A+b,C=Math.min(S,I),O=I-C;v.style.height=C+"px",v.style.bottom==="0px"&&(g.scrollTop=O>0?O:0,v.style.justifyContent="flex-end")}}}h.current=g.scrollTop})})})]})});ej.displayName=ty;var tj="SelectGroup",[o$,a$]=kc(tj),l$=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=To();return l.jsx(o$,{scope:t,id:s,children:l.jsx(We.div,{role:"group","aria-labelledby":s,...r,ref:e})})});l$.displayName=tj;var nj="SelectLabel",rj=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=a$(nj,t);return l.jsx(We.div,{id:s.id,...r,ref:e})});rj.displayName=nj;var Jf="SelectItem",[c$,sj]=kc(Jf),ij=_.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:a,...c}=n,u=Jo(Jf,t),h=Zo(Jf,t),m=u.value===r,[g,v]=_.useState(a??""),[y,b]=_.useState(!1),S=wt(e,A=>{var I;return(I=h.itemRefCallback)==null?void 0:I.call(h,A,r,s)}),E=To(),x=()=>{s||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(c$,{scope:t,value:r,disabled:s,textId:E,isSelected:m,onItemTextChange:_.useCallback(A=>{v(I=>I||((A==null?void 0:A.textContent)??"").trim())},[]),children:l.jsx(Um.ItemSlot,{scope:t,value:r,disabled:s,textValue:g,children:l.jsx(We.div,{role:"option","aria-labelledby":E,"data-highlighted":y?"":void 0,"aria-selected":m&&y,"data-state":m?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...c,ref:S,onFocus:$e(c.onFocus,()=>b(!0)),onBlur:$e(c.onBlur,()=>b(!1)),onPointerUp:$e(c.onPointerUp,x),onPointerMove:$e(c.onPointerMove,A=>{var I;s?(I=h.onItemLeave)==null||I.call(h):A.currentTarget.focus({preventScroll:!0})}),onPointerLeave:$e(c.onPointerLeave,A=>{var I;A.currentTarget===document.activeElement&&((I=h.onItemLeave)==null||I.call(h))}),onKeyDown:$e(c.onKeyDown,A=>{var C;((C=h.searchRef)==null?void 0:C.current)!==""&&A.key===" "||(Q9.includes(A.key)&&x(),A.key===" "&&A.preventDefault())})})})})});ij.displayName=Jf;var bu="SelectItemText",oj=_.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...a}=n,c=Jo(bu,t),u=Zo(bu,t),h=sj(bu,t),m=Z9(bu,t),[g,v]=_.useState(null),y=wt(e,A=>v(A),h.onItemTextChange,A=>{var I;return(I=u.itemTextRefCallback)==null?void 0:I.call(u,A,h.value,h.disabled)}),b=g==null?void 0:g.textContent,S=_.useMemo(()=>l.jsx("option",{value:h.value,disabled:h.disabled,children:b},h.value),[h.disabled,h.value,b]),{onNativeOptionAdd:E,onNativeOptionRemove:x}=m;return Gt(()=>(E(S),()=>x(S)),[E,x,S]),l.jsxs(l.Fragment,{children:[l.jsx(We.span,{id:h.textId,...a,ref:y}),h.isSelected&&c.valueNode&&!c.valueNodeHasChildren?qa.createPortal(a.children,c.valueNode):null]})});oj.displayName=bu;var aj="SelectItemIndicator",lj=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return sj(aj,t).isSelected?l.jsx(We.span,{"aria-hidden":!0,...r,ref:e}):null});lj.displayName=aj;var ny="SelectScrollUpButton",cj=_.forwardRef((n,e)=>{const t=Zo(ny,n.__scopeSelect),r=Fx(ny,n.__scopeSelect),[s,a]=_.useState(!1),c=wt(e,r.onScrollButtonChange);return Gt(()=>{if(t.viewport&&t.isPositioned){let u=function(){const m=h.scrollTop>0;a(m)};const h=t.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),s?l.jsx(dj,{...n,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=t;u&&h&&(u.scrollTop=u.scrollTop-h.offsetHeight)}}):null});cj.displayName=ny;var ry="SelectScrollDownButton",uj=_.forwardRef((n,e)=>{const t=Zo(ry,n.__scopeSelect),r=Fx(ry,n.__scopeSelect),[s,a]=_.useState(!1),c=wt(e,r.onScrollButtonChange);return Gt(()=>{if(t.viewport&&t.isPositioned){let u=function(){const m=h.scrollHeight-h.clientHeight,g=Math.ceil(h.scrollTop)<m;a(g)};const h=t.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),s?l.jsx(dj,{...n,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=t;u&&h&&(u.scrollTop=u.scrollTop+h.offsetHeight)}}):null});uj.displayName=ry;var dj=_.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,a=Zo("SelectScrollButton",t),c=_.useRef(null),u=$m(t),h=_.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return _.useEffect(()=>()=>h(),[h]),Gt(()=>{var g;const m=u().find(v=>v.ref.current===document.activeElement);(g=m==null?void 0:m.ref.current)==null||g.scrollIntoView({block:"nearest"})},[u]),l.jsx(We.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:$e(s.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:$e(s.onPointerMove,()=>{var m;(m=a.onItemLeave)==null||m.call(a),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:$e(s.onPointerLeave,()=>{h()})})}),u$="SelectSeparator",hj=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return l.jsx(We.div,{"aria-hidden":!0,...r,ref:e})});hj.displayName=u$;var sy="SelectArrow",d$=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=zm(t),a=Jo(sy,t),c=Zo(sy,t);return a.open&&c.position==="popper"?l.jsx(_S,{...s,...r,ref:e}):null});d$.displayName=sy;function fj(n){return n===""||n===void 0}var mj=_.forwardRef((n,e)=>{const{value:t,...r}=n,s=_.useRef(null),a=wt(e,s),c=VC(t);return _.useEffect(()=>{const u=s.current,h=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(h,"value").set;if(c!==t&&g){const v=new Event("change",{bubbles:!0});g.call(u,t),u.dispatchEvent(v)}},[c,t]),l.jsx(rd,{asChild:!0,children:l.jsx("select",{...r,ref:a,defaultValue:t})})});mj.displayName="BubbleSelect";function pj(n){const e=En(n),t=_.useRef(""),r=_.useRef(0),s=_.useCallback(c=>{const u=t.current+c;e(u),function h(m){t.current=m,window.clearTimeout(r.current),m!==""&&(r.current=window.setTimeout(()=>h(""),1e3))}(u)},[e]),a=_.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,a]}function gj(n,e,t){const s=e.length>1&&Array.from(e).every(m=>m===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let c=h$(n,Math.max(a,0));s.length===1&&(c=c.filter(m=>m!==t));const h=c.find(m=>m.textValue.toLowerCase().startsWith(s.toLowerCase()));return h!==t?h:void 0}function h$(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var f$=BI,vj=WI,m$=KI,p$=GI,g$=QI,yj=YI,v$=ej,xj=rj,wj=ij,y$=oj,x$=lj,_j=cj,Ej=uj,bj=hj;const w$=f$,_$=m$,Sj=_.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(vj,{ref:r,className:et("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,l.jsx(p$,{asChild:!0,children:l.jsx(F1,{className:"h-4 w-4 opacity-50"})})]}));Sj.displayName=vj.displayName;const Nj=_.forwardRef(({className:n,...e},t)=>l.jsx(_j,{ref:t,className:et("flex cursor-default items-center justify-center py-1",n),...e,children:l.jsx(vR,{className:"h-4 w-4"})}));Nj.displayName=_j.displayName;const Tj=_.forwardRef(({className:n,...e},t)=>l.jsx(Ej,{ref:t,className:et("flex cursor-default items-center justify-center py-1",n),...e,children:l.jsx(F1,{className:"h-4 w-4"})}));Tj.displayName=Ej.displayName;const Cj=_.forwardRef(({className:n,children:e,position:t="popper",...r},s)=>l.jsx(g$,{children:l.jsxs(yj,{ref:s,className:et("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[l.jsx(Nj,{}),l.jsx(v$,{className:et("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),l.jsx(Tj,{})]})}));Cj.displayName=yj.displayName;const E$=_.forwardRef(({className:n,...e},t)=>l.jsx(xj,{ref:t,className:et("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));E$.displayName=xj.displayName;const Ij=_.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(wj,{ref:r,className:et("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(x$,{children:l.jsx(gR,{className:"h-4 w-4"})})}),l.jsx(y$,{children:e})]}));Ij.displayName=wj.displayName;const b$=_.forwardRef(({className:n,...e},t)=>l.jsx(bj,{ref:t,className:et("-mx-1 my-1 h-px bg-muted",n),...e}));b$.displayName=bj.displayName;function jj({lectureId:n,onClose:e,onSave:t}){const[r,s]=_.useState({title:"",description:"",fileUrl:"",fileType:"",fileSize:""}),[a,c]=_.useState(!1),u=["PDF","DOCX","PPTX","XLSX","TXT","ZIP","MP3","MP4","JPG","PNG"],h=async m=>{m.preventDefault(),c(!0);try{const g={...r,id:`file_${Date.now()}`,lectureId:n,uploadedAt:new Date,uploadedBy:"Current User"};t(g)}catch(g){console.error("Error saving file:",g)}finally{c(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(se,{variant:"ghost",onClick:e,children:[l.jsx(Ys,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Add File"}),l.jsx("p",{className:"text-muted-foreground",children:"Add a file resource to the lecture"})]})]})}),l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsxs(Xe,{className:"flex items-center gap-2",children:[l.jsx(Hs,{className:"h-5 w-5 text-blue-600"}),"File Information"]}),l.jsx(At,{children:"Upload or link to educational files"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"title",children:"File Title *"}),l.jsx(Ie,{id:"title",placeholder:"e.g., Anatomy Reference Guide",value:r.title,onChange:m=>s(g=>({...g,title:m.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"description",children:"Description"}),l.jsx(Ri,{id:"description",placeholder:"Describe the file content...",value:r.description,onChange:m=>s(g=>({...g,description:m.target.value})),rows:3})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"fileType",children:"File Type *"}),l.jsxs(w$,{value:r.fileType,onValueChange:m=>s(g=>({...g,fileType:m})),children:[l.jsx(Sj,{children:l.jsx(_$,{placeholder:"Select file type"})}),l.jsx(Cj,{children:u.map(m=>l.jsx(Ij,{value:m,children:m},m))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"fileSize",children:"File Size"}),l.jsx(Ie,{id:"fileSize",placeholder:"e.g., 2.5 MB",value:r.fileSize,onChange:m=>s(g=>({...g,fileSize:m.target.value}))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"fileUrl",children:"File URL *"}),l.jsx(Ie,{id:"fileUrl",placeholder:"https://example.com/file.pdf or /uploads/file.pdf",value:r.fileUrl,onChange:m=>s(g=>({...g,fileUrl:m.target.value})),required:!0}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"You can upload to Firebase Storage or use external links"})]})]})]}),r.title&&l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Preview"}),l.jsx(At,{children:"How the file will appear in the lecture"})]}),l.jsx(_e,{children:l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Hs,{className:"h-8 w-8 text-blue-600"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-medium",children:r.title}),r.description&&l.jsx("p",{className:"text-sm text-muted-foreground",children:r.description}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.fileType&&l.jsx(nn,{variant:"secondary",children:r.fileType}),r.fileSize&&l.jsx(nn,{variant:"outline",children:r.fileSize})]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(se,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(se,{type:"submit",disabled:a,children:[l.jsx(Ko,{className:"h-4 w-4 mr-2"}),a?"Adding...":"Add File"]})]})]})]})}function Aj({lectureId:n,onClose:e,onSave:t}){const[r,s]=_.useState({title:"",description:"",url:"",duration:"",thumbnailUrl:"",platform:"YouTube"}),[a,c]=_.useState(!1),u=async v=>{v.preventDefault(),c(!0);try{const y={...r,id:`video_${Date.now()}`,lectureId:n,uploadedAt:new Date,uploadedBy:"Current User"};t(y)}catch(y){console.error("Error saving video:",y)}finally{c(!1)}},h=v=>{const y=v.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);return y?y[1]:null},m=v=>{const y=h(v);return y?`https://img.youtube.com/vi/${y}/maxresdefault.jpg`:""},g=v=>{s(y=>({...y,url:v,thumbnailUrl:m(v)}))};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(se,{variant:"ghost",onClick:e,children:[l.jsx(Ys,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Add Video"}),l.jsx("p",{className:"text-muted-foreground",children:"Add a video resource to the lecture"})]})]})}),l.jsxs("form",{onSubmit:u,className:"space-y-6",children:[l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsxs(Xe,{className:"flex items-center gap-2",children:[l.jsx(Ms,{className:"h-5 w-5 text-green-600"}),"Video Information"]}),l.jsx(At,{children:"Add YouTube videos or other video links"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"title",children:"Video Title *"}),l.jsx(Ie,{id:"title",placeholder:"e.g., Introduction to Human Anatomy",value:r.title,onChange:v=>s(y=>({...y,title:v.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"description",children:"Description"}),l.jsx(Ri,{id:"description",placeholder:"Describe the video content...",value:r.description,onChange:v=>s(y=>({...y,description:v.target.value})),rows:3})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"url",children:"Video URL *"}),l.jsx(Ie,{id:"url",placeholder:"https://youtube.com/watch?v=... or https://vimeo.com/...",value:r.url,onChange:v=>g(v.target.value),required:!0}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Supports YouTube, Vimeo, and direct video links"})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"duration",children:"Duration"}),l.jsx(Ie,{id:"duration",placeholder:"e.g., 45:30",value:r.duration,onChange:v=>s(y=>({...y,duration:v.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"platform",children:"Platform"}),l.jsx(Ie,{id:"platform",value:r.platform,onChange:v=>s(y=>({...y,platform:v.target.value})),disabled:!0})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"thumbnailUrl",children:"Thumbnail URL"}),l.jsx(Ie,{id:"thumbnailUrl",placeholder:"Auto-generated for YouTube videos",value:r.thumbnailUrl,onChange:v=>s(y=>({...y,thumbnailUrl:v.target.value}))})]})]})]}),r.title&&l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Preview"}),l.jsx(At,{children:"How the video will appear in the lecture"})]}),l.jsx(_e,{children:l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"relative",children:[r.thumbnailUrl?l.jsx("img",{src:r.thumbnailUrl,alt:r.title,className:"w-24 h-16 object-cover rounded"}):l.jsx("div",{className:"w-24 h-16 bg-gray-200 rounded flex items-center justify-center",children:l.jsx(av,{className:"h-6 w-6 text-gray-400"})}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx(Ms,{className:"h-8 w-8 text-white opacity-80"})})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-medium",children:r.title}),r.description&&l.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:r.description}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.duration&&l.jsxs(nn,{variant:"secondary",className:"text-xs",children:[l.jsx(wf,{className:"h-3 w-3 mr-1"}),r.duration]}),l.jsxs(nn,{variant:"outline",className:"text-xs",children:[l.jsx(ER,{className:"h-3 w-3 mr-1"}),r.platform]})]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(se,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(se,{type:"submit",disabled:a,children:[l.jsx(Ko,{className:"h-4 w-4 mr-2"}),a?"Adding...":"Add Video"]})]})]})]})}function Bm({subjectId:n,subjectName:e,yearType:t,onClose:r,onSave:s}){const[a,c]=_.useState({name:"",description:"",order:1,imageUrl:""}),[u,h]=_.useState(!1),m=async g=>{g.preventDefault(),h(!0);try{const v={...a,subjectId:n,createdAt:new Date,uploadedBy:"Current User"};s(v)}catch(v){console.error("Error saving lecture:",v)}finally{h(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(se,{variant:"ghost",onClick:r,children:[l.jsx(Ys,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Add Lecture"}),l.jsxs("p",{className:"text-muted-foreground",children:["Add a new lecture to ",e]})]})]})}),l.jsxs("form",{onSubmit:m,className:"space-y-6",children:[l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsxs(Xe,{className:"flex items-center gap-2",children:[t==="basic"?l.jsx(Tu,{className:"h-5 w-5 text-blue-600"}):l.jsx(Cu,{className:"h-5 w-5 text-red-600"}),"Lecture Information"]}),l.jsx(At,{children:"Basic information about the lecture"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"name",children:"Lecture Name *"}),l.jsx(Ie,{id:"name",placeholder:"e.g., Introduction to Cell Biology",value:a.name,onChange:g=>c(v=>({...v,name:g.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"description",children:"Description"}),l.jsx(Ri,{id:"description",placeholder:"Describe what this lecture covers...",value:a.description,onChange:g=>c(v=>({...v,description:g.target.value})),rows:4})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"order",children:"Order"}),l.jsx(Ie,{id:"order",type:"number",min:"1",value:a.order,onChange:g=>c(v=>({...v,order:parseInt(g.target.value)||1}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),l.jsx(Ie,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:a.imageUrl,onChange:g=>c(v=>({...v,imageUrl:g.target.value}))})]})]})]})]}),a.name&&l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Preview"}),l.jsxs(At,{children:["How the lecture will appear in ",e]})]}),l.jsx(_e,{children:l.jsx("div",{className:"p-4 border rounded-lg bg-secondary/20",children:l.jsxs("div",{className:"flex items-start gap-3",children:[a.imageUrl?l.jsx("img",{src:a.imageUrl,alt:a.name,className:"w-16 h-16 object-cover rounded",onError:g=>{g.currentTarget.style.display="none"}}):l.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center",children:l.jsx(us,{className:"h-6 w-6 text-gray-400"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-lg",children:a.name}),a.description&&l.jsx("p",{className:"text-sm text-muted-foreground",children:a.description}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Lecture ",a.order," â€¢ ",e]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(se,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),l.jsxs(se,{type:"submit",disabled:u,children:[l.jsx(Ko,{className:"h-4 w-4 mr-2"}),u?"Adding...":"Add Lecture"]})]})]})]})}async function yr(n){let e="dflp2vxn2",t="Med_just";const r="".replace(/\/$/,"");try{const I=await fetch(`${r}/api/cloudinary/config`);if(I.ok)try{const C=await I.json();e=C.cloudName||e,t=C.uploadPreset||C.upload_preset||t}catch{const C=I.headers.get("x-cloudinary-cloudname"),O=I.headers.get("x-cloudinary-upload-preset");C&&(e=e||C),O&&(t=t||O)}}catch{}if(!e)try{const I=localStorage.getItem("cloudinary.cloudName"),C=localStorage.getItem("cloudinary.uploadPreset");I&&(e=I,t=t||C||t)}catch{}if(!e)throw new Error("Cloudinary cloud name is not configured. Set VITE_CLOUDINARY_CLOUD_NAME in your environment or provide server config.");const s=`https://api.cloudinary.com/v1_1/${e}/upload`;try{const I=await Wb(n);if(I&&typeof I=="string"&&I.startsWith("http"))return I}catch(I){const C=String((I==null?void 0:I.message)||I||"");console.warn("Server upload failed, falling back to client upload:",C)}async function a(I){if(I.bodyUsed)throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.");try{const C=I.clone();try{return{json:await C.json(),text:null}}catch{}}catch{if(I.bodyUsed)throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.")}try{const C=await I.text();try{return{json:JSON.parse(C),text:C}}catch{return{json:null,text:C}}}catch(C){throw new Error("Could not read response body: "+String(C))}}async function c(I,C){const O=async(B,P)=>{const R=await fetch(B,P),D=await a(R).catch(k=>{throw k});return{res:R,body:D}},V=typeof I=="string"?I:I.url;try{return await O(V,C)}catch(B){const P=String((B==null?void 0:B.message)||B||"").toLowerCase();if(P.includes("response body already read")||P.includes("body already read")){const R=V+(V.includes("?")?`&_retry=${Date.now()}`:`?_retry=${Date.now()}`);try{return await O(R,C)}catch{}}if(P.includes("failed to fetch")||P.includes("networkerror")||P.includes("network request failed")||P.includes("script error")||P.includes("response body already read")||P.includes("body already read"))try{return await(async()=>await new Promise((R,D)=>{const k=new XMLHttpRequest;let $=C&&C.method||"GET",z=!1;try{if(k.open($,V,!0),C&&C.headers){const M=C.headers;Object.keys(M).forEach(oe=>{try{k.setRequestHeader(oe,M[oe])}catch{}})}if(k.onreadystatechange=()=>{if(k.readyState!==4)return;const M=k.status||0,oe={};(k.getAllResponseHeaders()||"").split(`\r
`).forEach(Z=>{const U=Z.indexOf(":");if(U>0){const X=Z.substring(0,U).trim().toLowerCase(),le=Z.substring(U+1).trim();oe[X]=le}});const J={ok:M>=200&&M<400,status:M,headers:{get:Z=>oe[Z.toLowerCase()]||null}},Y=k.responseText;let q=null;try{q=Y?JSON.parse(Y):null}catch{q=null}R({res:J,body:{json:q,text:Y}})},k.onerror=()=>D(new Error("XHR network error")),k.ontimeout=()=>D(new Error("XHR timeout")),C&&C.body)try{if(C.body instanceof FormData)z=!0,k.send(C.body);else if(typeof C.body=="string")k.send(C.body);else try{k.send(JSON.stringify(C.body))}catch{k.send(String(C.body))}}catch(M){D(M)}else k.send()}catch(M){D(M)}}))()}catch{}throw B}}if(t){const I=new FormData;I.append("file",n),I.append("upload_preset",t);const{res:C,body:O}=await c(s,{method:"POST",body:I});if(!C.ok){const V=O!=null&&O.json?JSON.stringify(O.json):(O==null?void 0:O.text)||"";throw new Error(`Cloudinary upload failed: ${C.status} ${V}`)}if(O.json&&(O.json.secure_url||O.json.url))return O.json.secure_url||O.json.url;if(O.text&&typeof O.text=="string"&&O.text.startsWith("http"))return O.text;throw new Error("Cloudinary upload returned unexpected response.")}const u="686641252611351";let h,m;try{const I=await c(`${r}/api/cloudinary/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:u})});h=I.res,m=I.body}catch(I){const C=String((I==null?void 0:I.message)||I||"");if(C.toLowerCase().includes("response body already read")||C.toLowerCase().includes("body already read")){try{const O=await fetch(`${r}/api/cloudinary/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:u})}),V=O.headers.get("x-cloudinary-signature"),B=O.headers.get("x-cloudinary-timestamp"),P=O.headers.get("x-cloudinary-apikey"),R=O.headers.get("x-cloudinary-cloudname"),D=O.headers.get("x-cloudinary-upload-preset");if(V&&B){const k=P||u||null,$=V,z=Number(B);R&&(e=e||R);const M=new FormData;M.append("file",n),k&&M.append("api_key",k),M.append("timestamp",String(z)),M.append("signature",$);const{res:oe,body:H}=await c(s,{method:"POST",body:M});if(!oe.ok){const J=H!=null&&H.json?JSON.stringify(H.json):(H==null?void 0:H.text)||"",Y=(J||"").toLowerCase();if(Y.includes("missing required parameter - api_key")||Y.includes("missing required parameter - api key")||Y.includes("missing required parameter 'api_key'")){const q=u||(()=>{try{return localStorage.getItem("cloudinary.apiKey")}catch{return null}})();if(q){const Q=new FormData;Q.append("file",n),Q.append("api_key",q),Q.append("timestamp",String(z)),Q.append("signature",$);const{res:Z,body:U}=await c(s,{method:"POST",body:Q});if(!Z.ok){const X=U!=null&&U.json?JSON.stringify(U.json):(U==null?void 0:U.text)||"";throw new Error(`Cloudinary signed upload retry failed: ${Z.status} ${X}`)}if(U.json&&(U.json.secure_url||U.json.url))return U.json.secure_url||U.json.url;if(U.text&&typeof U.text=="string"&&U.text.startsWith("http"))return U.text;throw new Error("Cloudinary signed upload retry returned unexpected response.")}if(t){const Q=new FormData;Q.append("file",n),Q.append("upload_preset",t);const Z=await fetch(s,{method:"POST",body:Q});if(!Z.ok){const le=await Z.text().catch(()=>"");throw new Error(`Cloudinary unsigned fallback failed: ${Z.status} ${le}`)}const U=await Z.json().catch(()=>null);if(U&&(U.secure_url||U.url))return U.secure_url||U.url;const X=await Z.text().catch(()=>"");if(X&&X.startsWith("http"))return X;throw new Error("Cloudinary unsigned fallback returned unexpected response.")}}throw new Error(`Cloudinary signed upload failed: ${oe.status} ${J}`)}if(H.json&&(H.json.secure_url||H.json.url))return H.json.secure_url||H.json.url;if(H.text&&typeof H.text=="string"&&H.text.startsWith("http"))return H.text;throw new Error("Cloudinary signed upload returned unexpected response.")}if(D){const k=new FormData;k.append("file",n),k.append("upload_preset",D);const $=await fetch(s,{method:"POST",body:k});if(!$.ok){const oe=await $.text().catch(()=>"");throw new Error(`Cloudinary upload fallback failed: ${$.status} ${oe}`)}const z=await $.json().catch(()=>null);if(z&&(z.secure_url||z.url))return z.secure_url||z.url;const M=await $.text().catch(()=>"");if(M&&M.startsWith("http"))return M;throw new Error("Cloudinary fallback upload returned unexpected response.")}}catch{}try{const O=await Wb(n);if(O&&typeof O=="string"&&O.startsWith("http"))return O}catch{}throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.")}throw I}if(!h.ok){const I=m!=null&&m.json?JSON.stringify(m.json):(m==null?void 0:m.text)||"";throw new Error(`Cloudinary signing failed: ${h.status} ${I}`)}const g=m.json||{},{signature:v,apiKey:y,timestamp:b}=g,S=y||u;if(!v||!b)throw new Error("Cloudinary signing endpoint returned invalid data.");const E=new FormData;E.append("file",n),E.append("api_key",S),E.append("timestamp",String(b)),E.append("signature",v);const{res:x,body:A}=await c(s,{method:"POST",body:E});if(!x.ok){const I=A!=null&&A.json?JSON.stringify(A.json):(A==null?void 0:A.text)||"",C=(I||"").toLowerCase();if(C.includes("missing required parameter - api_key")||C.includes("missing required parameter - api key")||C.includes("missing required parameter 'api_key'")){const O=u;{const V=new FormData;V.append("file",n),V.append("api_key",O),V.append("timestamp",String(b)),V.append("signature",v);const{res:B,body:P}=await c(s,{method:"POST",body:V});if(!B.ok){const R=P!=null&&P.json?JSON.stringify(P.json):(P==null?void 0:P.text)||"";throw new Error(`Cloudinary signed upload retry failed: ${B.status} ${R}`)}if(P.json&&(P.json.secure_url||P.json.url))return P.json.secure_url||P.json.url;if(P.text&&typeof P.text=="string"&&P.text.startsWith("http"))return P.text;throw new Error("Cloudinary signed upload retry returned unexpected response.")}}throw new Error(`Cloudinary signed upload failed: ${x.status} ${I}`)}if(A.json&&(A.json.secure_url||A.json.url))return A.json.secure_url||A.json.url;if(A.text&&typeof A.text=="string"&&A.text.startsWith("http"))return A.text;throw new Error("Cloudinary signed upload returned unexpected response.")}async function Wb(n){const e=await new Promise((t,r)=>{const s=new FileReader;s.onload=()=>t(s.result),s.onerror=()=>r(new Error("Failed to read file")),s.readAsDataURL(n)});return await new Promise((t,r)=>{try{const s=new XMLHttpRequest;s.open("POST",`${API_BASE}/api/cloudinary/upload`,!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(s.readyState!==4)return;const a=s.status||0,c=s.responseText||"";if(a<200||a>=400){let u=c;try{const h=c?JSON.parse(c):null;h&&h.error&&(u=h.error)}catch{}return r(new Error(`Server upload failed: ${a} ${u}`))}try{const u=c?JSON.parse(c):{};return u&&(u.secure_url||u.url)?t(u.secure_url||u.url):r(new Error("Server upload returned unexpected response"))}catch{return r(new Error("Server upload returned non-JSON response"))}},s.onerror=()=>r(new Error("Server upload XHR error")),s.send(JSON.stringify({file:e,filename:n.name}))}catch(s){r(s)}}).catch(async t=>{try{const r=String((t==null?void 0:t.message)||"").toLowerCase();if(r.includes("cloudinary not configured")||r.includes("404")||r.includes("server upload failed"))return await new Promise((s,a)=>{try{const c=new XMLHttpRequest;c.open("POST",`${API_BASE}/api/imagekit/upload`,!0),c.setRequestHeader("Content-Type","application/json"),c.onreadystatechange=()=>{if(c.readyState!==4)return;const u=c.status||0,h=c.responseText||"";if(u<200||u>=400){let m=h;try{const g=h?JSON.parse(h):null;g&&g.error&&(m=g.error)}catch{}return a(new Error(`ImageKit server upload failed: ${u} ${m}`))}try{const m=h?JSON.parse(h):{};return m&&(m.url||m.filePath)?s(m.url||m.filePath):a(new Error("ImageKit server upload returned unexpected response"))}catch{return a(new Error("ImageKit server upload returned non-JSON response"))}},c.onerror=()=>a(new Error("ImageKit server upload XHR error")),c.send(JSON.stringify({file:e,filename:n.name}))}catch(c){a(c)}})}catch{}throw t})}function Pa(n,e,t){try{n&&localStorage.setItem("cloudinary.cloudName",n),e&&localStorage.setItem("cloudinary.uploadPreset",e),t&&localStorage.setItem("cloudinary.apiKey",t)}catch(r){console.warn("Could not persist Cloudinary config to localStorage",r)}}async function Hb(n,e){if(!n)throw new Error("No URL provided");return await new Promise((t,r)=>{try{const s=new XMLHttpRequest;s.open("POST",`${API_BASE}/api/cloudinary/upload`,!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(s.readyState!==4)return;const a=s.status||0,c=s.responseText||"";if(a<200||a>=400){let u=c;try{const h=c?JSON.parse(c):null;h&&h.error&&(u=h.error)}catch{}return r(new Error(`Server upload failed: ${a} ${u}`))}try{const u=c?JSON.parse(c):{};return u&&(u.secure_url||u.url)?t(u.secure_url||u.url):r(new Error("Server upload returned unexpected response"))}catch{return r(new Error("Server upload returned non-JSON response"))}},s.onerror=()=>r(new Error("Server upload XHR error")),s.send(JSON.stringify({file:n,filename:e||"remote"}))}catch(s){r(new Error("Failed to call server upload endpoint: "+String(s)))}})}const S$="".replace(/\/$/,"");async function N$(n,e){const t=await fetch(n,e);let r=null,s="";try{r=await t.json()}catch{try{s=await t.text()}catch{}}return{res:t,json:r,text:s}}async function Do(n,e){let t;typeof n=="string"?t=n:t=await new Promise((u,h)=>{const m=new FileReader;m.onload=()=>u(m.result),m.onerror=()=>h(new Error("Failed to read file")),m.readAsDataURL(n)});const r=`${S$}/api/imagekit/upload`,{res:s,json:a,text:c}=await N$(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:t,filename:e})});if(!s.ok){const u=a?JSON.stringify(a):c||"";throw new Error(`ImageKit server upload failed: ${s.status} ${u}`)}if(a&&(a.url||a.filePath||a.name))return a.url||a.filePath||a.name;throw new Error("ImageKit server upload returned unexpected response.")}function T$(){const[n,e]=_.useState(""),[t,r]=_.useState(null),[s,a]=_.useState(!1),[c,u]=_.useState(!1),[h,m]=_.useState(!1),[g,v]=_.useState(!1),[y,b]=_.useState(!1),[S,E]=_.useState(null),[x,A]=_.useState(null),[I,C]=_.useState(null),[O,V]=_.useState("basic"),[B,P]=_.useState({}),[R,D]=_.useState(null),[k,$]=_.useState(""),[z,M]=_.useState(""),[oe,H]=_.useState(""),[J,Y]=_.useState(""),[q,Q]=_.useState(""),[Z,U]=_.useState(""),[X,le]=_.useState(""),[be,ve]=_.useState(""),[ce,me]=_.useState(""),[Ee,De]=_.useState(""),[Te,Me]=_.useState(""),[Ke,dt]=_.useState(null),Ct=Sc(),on=Oi();Ne.useEffect(()=>{const ye=new URLSearchParams(on.search).get("batch");dt(ye)},[on.search]);const Lt=(te,ye)=>{P(Oe=>{var bt;return{...Oe,[te]:{videos:!1,files:!1,quizzes:!1,...Oe[te]||{},[ye]:!((bt=Oe[te])!=null&&bt[ye])}}})},{years:Mt,batches:vt,loading:yt,error:an,connectionStatus:Xn,retryConnection:ti,updateYear:Jn,updateBatch:bn,createSubject:xs,createLecture:Ft,createYear:Nt,createBatch:Fn,deleteBatch:gn,deleteLecture:xr,deleteSubject:Hr,addVideo:kr,addFile:ws,addQuiz:ni}=Rc(),{news:Kr}=jx(),Vn=(te,ye)=>{C(te),A(ye),r(null),a(!0)},_s=(te,ye)=>{console.log("ðŸ”„ Opening subject form for year:",te.yearNumber,"type:",ye),E({id:te.id,number:te.yearNumber}),V(ye),u(!0)},He=(te,ye)=>{C(te),V(ye),b(!0)},mt=(te,ye)=>{C(te),A(ye),m(!0)},ht=(te,ye)=>{C(te),A(ye),v(!0)};if(s)return l.jsx(RI,{quiz:t,onClose:()=>{a(!1),r(null),A(null)},onSave:async te=>{I!=null&&I.id&&x&&await ni(I.id,x,{title:te.title,description:te.description,questions:te.questions||[],timeLimit:te.timeLimit,passingScore:te.passingScore}),a(!1),r(null),A(null)}});if(console.log("ðŸ” Render check - isSubjectFormOpen:",c,"selectedYear:",S),c)return console.log("ðŸ“ Rendering SubjectForm"),l.jsx(kI,{year:S==null?void 0:S.number,yearType:O,onClose:()=>{u(!1),E(null)},onSave:async te=>{try{await xs({...te,yearId:(S==null?void 0:S.id)||"",order:1}),u(!1),E(null)}catch(ye){console.error("Error saving subject:",ye),alert("Failed to save subject. Please try again.")}}});if(y)return l.jsx(Bm,{subjectId:I==null?void 0:I.id,subjectName:I==null?void 0:I.name,yearType:O,onClose:()=>{b(!1),C(null)},onSave:async te=>{try{await Ft(te),b(!1),C(null)}catch(ye){console.error("Error saving lecture:",ye),alert("Failed to save lecture. Please try again.")}}});if(h)return l.jsx(jj,{lectureId:x,onClose:()=>{m(!1),A(null)},onSave:async te=>{I!=null&&I.id&&x&&await ws(I.id,x,te),m(!1),A(null)}});if(g)return l.jsx(Aj,{lectureId:x,onClose:()=>{v(!1),A(null)},onSave:async te=>{I!=null&&I.id&&x&&await kr(I.id,x,te),v(!1),A(null)}});const Vt=(te,ye)=>{var Oe,bt;return l.jsxs(we,{className:`border-l-4 ${ye==="basic"?"border-l-blue-500":"border-l-red-500"}`,children:[l.jsx(Ge,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[te.imageUrl?l.jsx("img",{src:te.imageUrl,alt:`Year ${te.yearNumber}`,className:"w-24 h-24 object-cover rounded-md flex-shrink-0",onError:nt=>{nt.currentTarget.style.display="none"}}):l.jsx("div",{className:"w-24 h-24 rounded-md flex-shrink-0 bg-muted flex items-center justify-center",children:ye==="basic"?l.jsx(Tu,{className:"h-6 w-6 text-blue-600"}):l.jsx(Cu,{className:"h-6 w-6 text-red-600"})}),l.jsx(Xe,{className:"flex flex-col",children:R===te.id?l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx(Ie,{value:k,onChange:nt=>$(nt.target.value),className:"w-48",placeholder:"Batch name"}),l.jsx(se,{size:"sm",onClick:async()=>{try{await(Jn==null?void 0:Jn(te.id,{batchName:k,batch_name:k})),D(null),$("")}catch(nt){console.error(nt),alert("Failed to save batch name")}},children:"Save"}),l.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{D(null),$("")},children:"Cancel"})]}):l.jsx(l.Fragment,{children:te.batchName?l.jsxs(l.Fragment,{children:[l.jsx(Qn,{to:`/admin/years/${te.id}`,className:"text-lg font-bold text-foreground hover:underline",children:te.batchName}),l.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[l.jsxs("span",{className:"text-sm text-muted",children:["Year ",te.yearNumber]}),te.name&&l.jsxs("span",{className:"ml-2",children:["â€¢ ",te.name]}),te.academicSupervisor&&l.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Academic Supervisor: ",te.academicSupervisor]}),te.cr&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["CR: ",te.cr]}),te.actor&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actor: ",te.actor]})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs(Qn,{to:`/admin/years/${te.id}`,className:"text-lg font-medium text-blue-600 hover:underline",children:["Year ",te.yearNumber]}),l.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[te.name?l.jsx("span",{className:"mr-2",children:te.name}):l.jsx("span",{className:"italic",children:"No batch name"}),te.academicSupervisor&&l.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Academic Supervisor: ",te.academicSupervisor]}),te.cr&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["CR: ",te.cr]}),te.actor&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actor: ",te.actor]})]})]})})})]}),l.jsx("div",{className:"flex items-center gap-2"})]})}),l.jsx(_e,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(us,{className:"h-4 w-4 text-blue-600"}),l.jsx("span",{className:"font-semibold",children:"Subjects"}),l.jsxs(nn,{variant:"secondary",children:[((Oe=te.subjects)==null?void 0:Oe.length)||0," subjects"]}),l.jsxs(nn,{variant:"outline",children:[(Kr||[]).filter(nt=>nt.yearId===te.id).length," ","news"]})]}),l.jsxs(se,{variant:"ghost",size:"sm",onClick:()=>_s(te,ye),className:"flex items-center gap-1",children:[l.jsx(Xt,{className:"h-3 w-3"}),"Add Subject"]})]}),!te.subjects||te.subjects.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(us,{className:"h-8 w-8 mx-auto mb-3 text-muted-foreground"}),l.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No subjects added yet"}),l.jsx(se,{variant:"outline",size:"sm",onClick:()=>_s(te,ye),children:"Add first subject"})]}):l.jsx("div",{className:"grid gap-4",children:(bt=te.subjects)==null?void 0:bt.map(nt=>{var St;return l.jsxs(we,{className:"bg-secondary/10",children:[l.jsx(Ge,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[nt.imageUrl?l.jsx("img",{src:nt.imageUrl,alt:nt.name,className:"w-8 h-8 object-cover rounded",onError:je=>{je.currentTarget.style.display="none"}}):l.jsx(us,{className:"h-5 w-5 text-blue-600"}),l.jsx(Qn,{to:`/admin/subjects/${nt.id}`,className:"font-medium text-lg text-blue-600 hover:underline",children:nt.name}),l.jsxs(nn,{variant:"outline",className:"text-xs",children:[((St=nt.lectures)==null?void 0:St.length)||0," lectures"]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsxs(se,{variant:"ghost",size:"sm",onClick:()=>He(nt,ye),className:"h-8 px-3 text-xs",children:[l.jsx(Xt,{className:"h-3 w-3 mr-1"}),"Add Lecture"]}),l.jsx(se,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:async()=>{if(confirm(`Delete subject "${nt.name}"? This will remove its lectures.`))try{await Hr(nt.id)}catch(je){console.error(je),alert("Failed to delete subject")}},children:l.jsx(Ln,{className:"h-3 w-3"})})]})]})}),nt.lectures&&nt.lectures.length>0&&l.jsx(_e,{className:"pt-0",children:l.jsxs("div",{className:"grid gap-3",children:[nt.lectures.slice(0,3).map(je=>{var Mi,Wt,ri,ir,Es,bs,si,or,Fi;return l.jsx(we,{className:"bg-background border",children:l.jsx(_e,{className:"p-3",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:je.imageUrl?l.jsx("img",{src:je.imageUrl,alt:je.name,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(Ms,{className:"h-6 w-6 text-muted-foreground"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:je.name}),l.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:je.description||"No description available"}),l.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[l.jsxs(se,{variant:"ghost",size:"sm",onClick:()=>Lt(je.id,"videos"),className:`h-6 px-2 text-xs ${(Mi=B[je.id])!=null&&Mi.videos?"bg-accent":""}`,children:[l.jsx(av,{className:"h-3 w-3 mr-1"}),"Videos (",((Wt=je.videos)==null?void 0:Wt.length)||0,")"]}),l.jsxs(se,{variant:"ghost",size:"sm",onClick:()=>Lt(je.id,"files"),className:`h-6 px-2 text-xs ${(ri=B[je.id])!=null&&ri.files?"bg-accent":""}`,children:[l.jsx(Hs,{className:"h-3 w-3 mr-1"}),"Files (",((ir=je.files)==null?void 0:ir.length)||0,")"]}),l.jsxs(se,{variant:"ghost",size:"sm",onClick:()=>Lt(je.id,"quizzes"),className:`h-6 px-2 text-xs ${(Es=B[je.id])!=null&&Es.quizzes?"bg-accent":""}`,children:[l.jsx(Ni,{className:"h-3 w-3 mr-1"}),"Quizzes (",((bs=je.quizzes)==null?void 0:bs.length)||0,")"]}),l.jsx(se,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${je.name}"?`))try{await xr(nt.id,je.id)}catch(vn){console.error(vn),alert("Failed to delete lecture")}},children:l.jsx(Ln,{className:"h-3 w-3"})})]}),((si=B[je.id])==null?void 0:si.videos)&&l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Videos:"}),l.jsxs(se,{variant:"ghost",size:"xs",onClick:()=>ht(nt,je.id),className:"h-6 px-2 text-xs",children:[l.jsx(Xt,{className:"h-3 w-3 mr-1"})," Add"]})]}),l.jsxs("div",{className:"space-y-1",children:[je.videos&&je.videos.length>0?je.videos.slice(0,4).map(vn=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(av,{className:"h-3 w-3 text-blue-600"}),l.jsx("a",{href:vn.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline truncate",children:vn.title||vn.name||"Untitled Video"})]},vn.id)):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"}),je.videos&&je.videos.length>4&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",je.videos.length-4," more videos"]})]})]}),((or=B[je.id])==null?void 0:or.files)&&l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Files:"}),l.jsxs(se,{variant:"ghost",size:"xs",onClick:()=>mt(nt,je.id),className:"h-6 px-2 text-xs",children:[l.jsx(Xt,{className:"h-3 w-3 mr-1"})," Add"]})]}),l.jsxs("div",{className:"space-y-1",children:[je.files&&je.files.length>0?je.files.slice(0,4).map(vn=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Hs,{className:"h-3 w-3 text-green-600"}),l.jsx("a",{href:vn.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-green-600 hover:underline truncate",children:vn.title||vn.name||"Untitled File"})]},vn.id)):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"}),je.files&&je.files.length>4&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",je.files.length-4," more files"]})]})]}),((Fi=B[je.id])==null?void 0:Fi.quizzes)&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Quizzes:"}),l.jsxs(se,{variant:"ghost",size:"xs",onClick:()=>Vn(nt,je.id),className:"h-6 px-2 text-xs",children:[l.jsx(Xt,{className:"h-3 w-3 mr-1"})," Add"]})]}),l.jsxs("div",{className:"space-y-1",children:[je.quizzes&&je.quizzes.length>0?je.quizzes.slice(0,4).map(vn=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ni,{className:"h-3 w-3 text-purple-600"}),l.jsx("span",{className:"text-xs text-purple-600",children:vn.title||vn.name||"Untitled Quiz"})]},vn.id)):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"}),je.quizzes&&je.quizzes.length>4&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",je.quizzes.length-4," more quizzes"]})]})]})]})]})})},je.id)}),nt.lectures.length>3&&l.jsxs("div",{className:"text-center text-muted-foreground text-xs pt-2",children:["+",nt.lectures.length-3," more lectures"]})]})})]},nt.id)})})]})})]},te.yearNumber)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Academic Years Management"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-muted-foreground",children:"Manage curriculum by academic years, subjects, and lectures"}),Xn==="connecting"&&l.jsxs("span",{className:"flex items-center gap-1 text-blue-600 font-medium text-sm",children:[l.jsx(Oo,{className:"h-3 w-3 animate-spin"}),"Connecting..."]}),Xn==="connected"&&l.jsxs("span",{className:"flex items-center gap-1 text-green-600 font-medium text-sm",children:[l.jsx("div",{className:"h-2 w-2 bg-green-600 rounded-full"}),"Connected"]}),Xn==="offline"&&l.jsxs("span",{className:"flex items-center gap-1 text-orange-600 font-medium text-sm",children:[l.jsx("div",{className:"h-2 w-2 bg-orange-600 rounded-full"}),"Offline Mode"]})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs(_9,{children:[l.jsx(E9,{asChild:!0,children:l.jsxs(se,{children:[l.jsx(wR,{className:"h-4 w-4 mr-2"})," Add Batch"]})}),l.jsxs(CI,{children:[l.jsxs(II,{children:[l.jsx(AI,{children:"Add Batch"}),l.jsx(PI,{children:"Create a new batch for grouping years"})]}),l.jsxs("div",{className:"space-y-3 mt-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Batch name"}),l.jsx(Ie,{value:X,onChange:te=>le(te.target.value),placeholder:"e.g., Batch A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"CR (optional)"}),l.jsx(Ie,{value:be,onChange:te=>ve(te.target.value),placeholder:"Class representative"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Group Link (optional)"}),l.jsx(Ie,{value:ce,onChange:te=>me(te.target.value),placeholder:"WhatsApp/Telegram group link"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Graduate Date (optional)"}),l.jsx(Ie,{value:Ee,onChange:te=>De(te.target.value),placeholder:"e.g., 2025-06-15",type:"date"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Academic Supervisor (optional)"}),l.jsx(Ie,{value:Te,onChange:te=>Me(te.target.value),placeholder:"e.g., Dr. Ahmed Hassan"})]})]}),l.jsxs(jI,{className:"mt-4",children:[l.jsx(se,{onClick:async()=>{try{if(!X||!X.trim()){alert("Please provide a batch name");return}await(Fn==null?void 0:Fn({batchName:X.trim(),cr:be==null?void 0:be.trim(),groupLink:ce==null?void 0:ce.trim(),group_link:ce==null?void 0:ce.trim(),graduateDate:Ee==null?void 0:Ee.trim(),graduate_date:Ee==null?void 0:Ee.trim(),academicSupervisor:Te==null?void 0:Te.trim(),academic_supervisor:Te==null?void 0:Te.trim()})),le(""),ve(""),me(""),De(""),Me("");const te=document.querySelector("[data-dialog-close]");te&&te.click(),alert("Batch created")}catch(te){console.error(te),alert("Failed to create batch")}},children:"Create"}),l.jsx(S9,{asChild:!0,children:l.jsx(se,{variant:"ghost",className:"ml-2","data-dialog-close":!0,children:"Cancel"})})]})]})]})})]}),yt&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(Oo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading academic years..."})]})}),an&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading years"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:an}),l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx(se,{onClick:ti,variant:"outline",children:"Retry Connection"}),l.jsx(se,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!yt&&!an&&l.jsxs(l.Fragment,{children:[l.jsx(we,{children:l.jsx(_e,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(yc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Ie,{placeholder:"Search lectures, subjects, or content...",value:n,onChange:te=>e(te.target.value),className:"pl-10"})]})})}),l.jsx("div",{className:"space-y-6",children:!vt||vt.length===0?l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(us,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No batches found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"Create a batch to start adding academic years."})]})}):Ke?(()=>{const te=(vt||[]).find(Oe=>Oe.id===Ke)||null,ye=(Mt||[]).filter(Oe=>(Oe.batchId||Oe.batch_name)===Ke);return l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[te!=null&&te.imageUrl?l.jsx("img",{src:te.imageUrl,alt:te.batchName,className:"w-40 h-40 object-cover rounded-md flex-shrink-0"}):l.jsx("div",{className:"w-40 h-40 rounded-md flex-shrink-0 bg-muted flex items-center justify-center",children:l.jsx(us,{className:"h-6 w-6 text-muted-foreground"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold",children:(te==null?void 0:te.batchName)||"Batch"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:te!=null&&te.cr?`CR: ${te.cr}`:""})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(se,{onClick:()=>{dt(null),Ct("/admin/years")},children:"Back to Batches"}),l.jsx(se,{size:"sm",variant:"ghost",onClick:async()=>{try{const Oe=document.createElement("input");Oe.type="file",Oe.accept="image/*",Oe.onchange=async()=>{var nt;const bt=(nt=Oe.files)==null?void 0:nt[0];if(bt)try{let St=null;try{St=await yr(bt)}catch(je){console.warn("Cloudinary upload failed, trying ImageKit",(je==null?void 0:je.message)||je),St=await Do(bt,bt.name)}if(!St){alert("Upload failed");return}await(bn==null?void 0:bn(te==null?void 0:te.id,{image_url:St,imageUrl:St})),alert("Image updated")}catch(St){console.error(St),alert("Failed to upload image")}},Oe.click()}catch(Oe){console.error(Oe),alert("Could not open file dialog")}},children:"Change Image"}),l.jsxs(se,{onClick:async()=>{try{const Oe=window.prompt("Enter year number for this batch:");if(!Oe)return;const bt=parseInt(Oe,10);if(isNaN(bt)){alert("Invalid");return}await(Nt==null?void 0:Nt((te==null?void 0:te.id)||null,{yearNumber:bt})),alert("Year created")}catch(Oe){console.error(Oe),alert("Failed")}},children:[l.jsx(Xt,{className:"h-4 w-4 mr-2"})," Add Year"]}),l.jsxs(se,{variant:"destructive",onClick:async()=>{try{if(!confirm("Delete this batch and all its years?"))return;await(gn==null?void 0:gn(te==null?void 0:te.id)),dt(null),Ct("/admin/years"),alert("Batch deleted")}catch(Oe){console.error(Oe),alert("Failed to delete batch")}},children:[l.jsx(Ln,{className:"h-4 w-4"})," Delete"]})]})]}),l.jsx("div",{className:"mt-4 space-y-4",children:ye.length===0?l.jsx(we,{children:l.jsx(_e,{className:"p-6 text-center",children:"No years in this batch yet."})}):ye.sort((Oe,bt)=>Oe.yearNumber-bt.yearNumber).map(Oe=>l.jsx("div",{children:Vt(Oe,Oe.type)},Oe.id))})]})})():l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:(vt||[]).map(te=>l.jsxs(we,{className:"cursor-pointer flex flex-col overflow-hidden",onClick:()=>{Ct(`/admin/years?batch=${te.id}`),dt(te.id)},children:[l.jsx(Ge,{className:"flex-1",onClick:ye=>R===te.id&&ye.stopPropagation(),children:l.jsxs("div",{className:"flex items-start gap-4",children:[te.imageUrl?l.jsx("img",{src:te.imageUrl,alt:te.batchName,className:"w-56 h-56 object-cover rounded-md flex-shrink-0"}):l.jsx("div",{className:"w-56 h-56 rounded-md flex-shrink-0 bg-muted"}),l.jsx("div",{className:"flex-1 min-w-0",children:R===te.id?l.jsxs("div",{className:"flex flex-col gap-2 w-full",onClick:ye=>ye.stopPropagation(),children:[l.jsx(Ie,{value:k,onChange:ye=>$(ye.target.value),placeholder:"Batch name",className:"w-full",onClick:ye=>ye.stopPropagation()}),l.jsx(Ie,{value:z||"",onChange:ye=>M(ye.target.value),placeholder:"CR",className:"w-full",onClick:ye=>ye.stopPropagation()}),l.jsx(Ie,{value:oe,onChange:ye=>H(ye.target.value),placeholder:"Image URL (or upload)",className:"w-full",onClick:ye=>ye.stopPropagation()}),l.jsx(Ie,{value:J||"",onChange:ye=>Y(ye.target.value),placeholder:"Group Link",className:"w-full",onClick:ye=>ye.stopPropagation()}),l.jsx(Ie,{value:q||"",onChange:ye=>Q(ye.target.value),placeholder:"Graduate Date (e.g., 2025-06-15)",type:"date",className:"w-full",onClick:ye=>ye.stopPropagation()}),l.jsx(Ie,{value:Z||"",onChange:ye=>U(ye.target.value),placeholder:"Academic Supervisor",className:"w-full",onClick:ye=>ye.stopPropagation()}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(se,{size:"sm",onClick:ye=>{ye.stopPropagation();try{const Oe=document.createElement("input");Oe.type="file",Oe.accept="image/*",Oe.onchange=async()=>{var nt;const bt=(nt=Oe.files)==null?void 0:nt[0];if(bt)try{let St=null;try{St=await yr(bt)}catch(je){console.warn("Cloudinary upload failed, trying ImageKit",(je==null?void 0:je.message)||je),St=await Do(bt,bt.name)}if(!St){alert("Upload failed");return}H(St)}catch(St){console.error(St),alert("Upload failed")}},Oe.click()}catch(Oe){console.error(Oe),alert("Could not open file dialog")}},children:"Upload"}),l.jsx(se,{size:"sm",onClick:async ye=>{ye.stopPropagation();try{await(bn==null?void 0:bn(te.id,{batch_name:k,batchName:k,cr:z,image_url:oe,imageUrl:oe,group_link:J,groupLink:J,graduate_date:q,graduateDate:q,academic_supervisor:Z,academicSupervisor:Z})),D(null),$(""),M(""),H(""),Y(""),Q(""),U(""),alert("Saved")}catch(Oe){console.error(Oe),alert("Failed to save")}},children:"Save"}),l.jsx(se,{size:"sm",variant:"ghost",onClick:ye=>{ye.stopPropagation(),D(null),$(""),M(""),H(""),Y(""),Q(""),U("")},children:"Cancel"})]})]}):l.jsxs(l.Fragment,{children:[l.jsx(Xe,{className:"text-lg",children:te.batchName||"Batch"}),l.jsxs(At,{className:"text-sm text-muted-foreground space-y-1",children:[te.cr&&l.jsxs("div",{children:["CR: ",te.cr]}),(te.academicSupervisor||te.academic_supervisor)&&l.jsxs("div",{children:["Supervisor: ",te.academicSupervisor||te.academic_supervisor]}),te.graduateDate&&l.jsxs("div",{children:["Graduate: ",te.graduateDate]}),te.groupLink&&l.jsx("a",{href:te.groupLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline flex items-center gap-1",onClick:ye=>ye.stopPropagation(),children:"ðŸ“± Group Link"})]})]})})]})}),l.jsx(_e,{className:"mt-auto",onClick:ye=>R===te.id&&ye.stopPropagation(),children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Years:"," ",(Mt||[]).filter(ye=>(ye.batchId||ye.batch_name)===te.id).length]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(se,{size:"sm",variant:"outline",onClick:ye=>{ye.stopPropagation(),Ct(`/admin/years?batch=${te.id}`),dt(te.id)},children:"View Years"}),l.jsx(se,{size:"sm",variant:"ghost",onClick:ye=>{ye.stopPropagation(),D(te.id),$(te.batchName||""),M(te.cr||""),H(te.imageUrl||""),Y(te.groupLink||te.group_link||""),Q(te.graduateDate||te.graduate_date||""),U(te.academicSupervisor||te.academic_supervisor||"")},children:"Edit"}),l.jsx(se,{size:"sm",variant:"ghost",onClick:async ye=>{ye.stopPropagation();try{const Oe=document.createElement("input");Oe.type="file",Oe.accept="image/*",Oe.onchange=async()=>{var nt;const bt=(nt=Oe.files)==null?void 0:nt[0];if(bt)try{let St=null;try{St=await yr(bt)}catch(je){console.warn("Cloudinary upload failed, trying ImageKit",(je==null?void 0:je.message)||je),St=await Do(bt,bt.name)}if(!St){alert("Upload failed");return}await(bn==null?void 0:bn(te.id,{image_url:St,imageUrl:St})),alert("Image updated")}catch(St){console.error(St),alert("Failed to upload image")}},Oe.click()}catch(Oe){console.error(Oe),alert("Could not open file dialog")}},children:"Change Image"}),l.jsx(se,{size:"sm",variant:"destructive",onClick:async ye=>{ye.stopPropagation();try{if(!confirm("Delete this batch and all its years? This cannot be undone."))return;await(gn==null?void 0:gn(te.id)),alert("Batch deleted")}catch(Oe){console.error(Oe),alert("Failed to delete batch")}},children:"Delete"})]})]})})]},te.id))})})]})]})}function C$(){var V;const{id:n}=HS(),[e,t]=_.useState(!1),[r,s]=_.useState(!1),[a,c]=_.useState(null),[u,h]=_.useState(null),[m,g]=_.useState(""),{years:v,loading:y,updateYear:b,createSubject:S,createLecture:E,deleteSubject:x,deleteLecture:A}=Rc(),I=v.find(B=>B.id===n);if(y)return l.jsx(we,{children:l.jsx(_e,{className:"text-center py-12",children:"Loading..."})});if(!I)return l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"Year not found"}),l.jsx("div",{className:"flex gap-2 justify-center",children:l.jsx(Qn,{to:"/admin/years",children:l.jsx(se,{variant:"outline",children:"Back to Years"})})})]})});const C=async B=>{try{await S({...B,yearId:I.id}),t(!1)}catch(P){console.error(P),alert("Failed to add subject")}},O=async B=>{try{await E(B),s(!1),c(null)}catch(P){console.error(P),alert("Failed to add lecture")}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Qn,{to:"/admin/years",children:l.jsxs(se,{variant:"ghost",children:[l.jsx(Ys,{className:"h-4 w-4 mr-2"})," Back"]})}),l.jsxs("div",{children:[I.batchName?l.jsxs(l.Fragment,{children:[l.jsx("h1",{className:"text-2xl font-bold",children:I.batchName}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Year ",I.yearNumber]})]}):l.jsxs("h1",{className:"text-2xl font-bold",children:["Year ",I.yearNumber]}),l.jsx("p",{className:"text-muted-foreground",children:"Manage subjects and lectures for this year"})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:!window.__yearEditing&&l.jsxs(l.Fragment,{children:[l.jsxs(se,{variant:"ghost",onClick:async()=>{try{const B=document.createElement("input");B.type="file",B.accept="image/*",B.onchange=async()=>{var R;const P=(R=B.files)==null?void 0:R[0];if(P)try{let D=null;try{D=await yr(P)}catch(k){console.warn("Cloudinary upload failed, attempting ImageKit fallback:",(k==null?void 0:k.message)||k);try{D=await Do(P,P.name)}catch($){throw console.error("ImageKit upload also failed:",$),k}}if(!D||typeof D!="string"||!D.startsWith("http")){console.error("Invalid upload response:",D),alert("Image upload failed: unexpected response from upload provider"),window.__yearEditing=!1;return}await(b==null?void 0:b(I.id,{imageUrl:D,image_url:D})),window.__yearEditing=!1}catch(D){console.error(D);const $=((D==null?void 0:D.message)||String(D)||"").toLowerCase();if($.includes("cloudinary cloud name is not configured")){const z=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!z){alert("No cloud name provided. Upload cancelled."),window.__yearEditing=!1;return}const M=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),oe=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");try{Pa(z,M||null,oe||null);const H=await yr(P);if(console.log("Cloudinary upload result after config:",H),!H||typeof H!="string"||!H.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(b==null?void 0:b(I.id,{imageUrl:H,image_url:H}))}catch(H){console.error(H),alert("Image upload failed after configuring Cloudinary: "+(H.message||H))}window.__yearEditing=!1;return}else if($.includes("cloudinary signing did not return an api key")||$.includes("missing required parameter - api_key")||$.includes("missing required parameter 'api_key'")){const z=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(z&&z.trim())try{Pa(null,null,z.trim());const M=await yr(P);if(!M||typeof M!="string"||!M.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(b==null?void 0:b(I.id,{imageUrl:M,image_url:M})),window.__yearEditing=!1;return}catch(M){console.error(M),alert("Image upload failed after setting API key: "+(M.message||M)),window.__yearEditing=!1;return}}alert("Image upload failed: "+(D.message||D))}},B.click()}catch(B){console.error(B),alert("Could not open file dialog")}},children:[l.jsx(jR,{className:"h-4 w-4 mr-2"})," ",I.imageUrl?"Change Image":"Add Image"]}),l.jsx(se,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("academicSupervisor"),g(I.academicSupervisor||I.acadmic_supervisor||"")},children:"Academic Supervisor"}),l.jsx(se,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("actor"),g(I.actor||"")},children:"Actor"}),l.jsx(se,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("groupUrl"),g(I.groupUrl||I.group_url||"")},children:"Group URL"}),l.jsx(se,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("batchName"),g(I.batchName||I.batch_name||"")},children:"Batch Name"}),I.imageUrl&&l.jsx(se,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm("Remove year image?"))try{await(b==null?void 0:b(I.id,{imageUrl:""}))}catch(B){console.error(B),alert("Failed to remove year image")}},children:l.jsx(Ln,{className:"h-3 w-3"})})]})})]}),u&&l.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[l.jsx(Ie,{placeholder:u==="image"?"Image URL":u==="groupUrl"?"Group URL":u==="academicSupervisor"?"Academic Supervisor":"Actor",value:m,onChange:B=>g(B.target.value),className:"w-full max-w-2xl"}),l.jsx(se,{onClick:async()=>{try{const B={};u==="image"?B.imageUrl=m:u==="academicSupervisor"?(B.academicSupervisor=m,B.acadmic_supervisor=m):u==="actor"?B.actor=m:u==="groupUrl"?(B.groupUrl=m,B.group_url=m):u==="batchName"&&(B.batchName=m,B.batch_name=m),await(b==null?void 0:b(I.id,B)),h(null),g(""),window.__yearEditing=!1}catch(B){console.error(B),alert("Failed to save field")}},children:"Save"}),l.jsx(se,{variant:"ghost",onClick:()=>{h(null),g(""),window.__yearEditing=!1},children:"Cancel"})]}),l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsxs(Xe,{className:"flex items-center gap-2",children:["Subjects",l.jsxs(nn,{variant:"secondary",children:[((V=I.subjects)==null?void 0:V.length)||0," subjects"]})]})}),l.jsxs(_e,{children:[l.jsx("div",{className:"flex justify-end mb-4",children:l.jsxs(se,{onClick:()=>t(!0),className:"flex items-center gap-2",children:[l.jsx(Xt,{className:"h-3 w-3"})," Add Subject"]})}),!I.subjects||I.subjects.length===0?l.jsx("div",{className:"text-center py-8",children:"No subjects added yet."}):l.jsx("div",{className:"grid gap-4",children:I.subjects.map(B=>l.jsxs(we,{className:"bg-secondary/10",children:[l.jsx(Ge,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[B.imageUrl?l.jsx("img",{src:B.imageUrl,alt:B.name,className:"w-8 h-8 object-cover rounded"}):l.jsx("div",{className:"w-8 h-8 bg-muted rounded"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-lg",children:B.name}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:[(B.lectures||[]).length," lectures"]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(se,{onClick:()=>{c(B),s(!0)},variant:"ghost",size:"sm",children:"Add Lecture"}),l.jsx(se,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete subject "${B.name}"?`))try{await x(B.id)}catch(P){console.error(P),alert("Failed to delete subject")}},children:l.jsx(Ln,{className:"h-3 w-3"})})]})]})}),B.lectures&&B.lectures.length>0&&l.jsx(_e,{children:l.jsx("div",{className:"grid gap-3",children:B.lectures.map(P=>l.jsx(we,{className:"bg-background border",children:l.jsx(_e,{className:"p-3",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:P.imageUrl?l.jsx("img",{src:P.imageUrl,alt:P.name,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"No image"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:P.name}),l.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:P.description||"No description available"})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(se,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${P.name}"?`))try{await A(B.id,P.id)}catch(R){console.error(R),alert("Failed to delete lecture")}},children:l.jsx(Ln,{className:"h-3 w-3"})})})]})})},P.id))})})]},B.id))})]})]}),e&&l.jsx(kI,{year:I.yearNumber,yearType:I.type,onClose:()=>t(!1),onSave:C}),r&&a&&l.jsx(Bm,{subjectId:a.id,subjectName:a.name,yearType:I.type,onClose:()=>{s(!1),c(null)},onSave:O})]})}function qm(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,a]=_.useState(null);return _.useEffect(()=>{const m=Rr(Si(Ue,"lectures")),g=Xo(m,async v=>{var b;const y=[];for(const S of v.docs){const E=S.data(),x=S.id,A=S.ref,I=await Ot(it(A,"files")),C=[];I.forEach(R=>{var k;const D=R.data();C.push({id:R.id,title:D.title||"",fileUrl:D.fileUrl||"",fileType:D.fileType||"",fileSize:D.fileSize||"",description:D.description||"",uploadedAt:((k=D.uploadedAt)==null?void 0:k.toDate())||new Date,uploadedBy:D.uploadedBy||""})});const O=await Ot(it(A,"quizzes")),V=[];O.forEach(R=>{var k;const D=R.data();V.push({id:R.id,title:D.title||"",description:D.description||"",questions:D.questions||[],timeLimit:D.duration||30,passingScore:D.passRate||70,createdAt:((k=D.createdAt)==null?void 0:k.toDate())||new Date,createdBy:D.uploadedBy||""})});const B=await Ot(it(A,"videos")),P=[];B.empty?(E.videos||[]).forEach(D=>{var k,$;P.push({id:D.id||D.videoId||"",title:D.title||D.name||"",youtubeUrl:D.url||D.youtubeUrl||"",thumbnailUrl:D.thumbnailUrl||D.thumbnail||"",duration:D.duration||D.time||"",description:D.description||"",uploadedAt:(($=(k=D.uploadedAt)==null?void 0:k.toDate)==null?void 0:$.call(k))||new Date,uploadedBy:D.uploadedBy||D.uploader||"",imageUrl:D.thumbnailUrl||""})}):B.forEach(R=>{var k,$;const D=R.data();P.push({id:R.id,title:D.title||D.name||"",youtubeUrl:D.url||D.youtubeUrl||"",thumbnailUrl:D.thumbnailUrl||D.thumbnail||"",duration:D.duration||D.time||"",description:D.description||"",uploadedAt:(($=(k=D.uploadedAt)==null?void 0:k.toDate)==null?void 0:$.call(k))||new Date,uploadedBy:D.uploadedBy||D.uploader||"",imageUrl:D.thumbnailUrl||""})}),y.push({id:x,title:E.title||"",description:E.description||"",subject:E.subjectId||"Unknown",order:E.order||1,createdAt:((b=E.createdAt)==null?void 0:b.toDate())||new Date,createdBy:E.uploadedBy||"",videos:P,files:C,quizzes:V})}y.sort((S,E)=>(S.order||0)-(E.order||0)),e(y),r(!1)},v=>{console.error("Error fetching lectures:",v),a("Failed to fetch lectures"),r(!1)});return()=>g()},[]),{lectures:n,loading:t,error:s,createLecture:async(m,g)=>{try{const v=jt(Ue,"Subjects",g),y=it(v,"lectures"),{videos:b,files:S,quizzes:E,...x}=m,A=await jn(y,{...x,videos:b,subjectId:g});if(S&&S.length>0){const I=it(A,"files");for(const C of S)await jn(I,C)}if(E&&E.length>0){const I=it(A,"quizzes");for(const C of E)await jn(I,C)}}catch(v){throw console.error("Error creating lecture:",v),v}},updateLecture:async(m,g)=>{try{const v=Rr(Si(Ue,"lectures")),y=await Ot(v);for(const b of y.docs)if(b.id===m){await dn(b.ref,g);break}}catch(v){throw console.error("Error updating lecture:",v),v}},deleteLecture:async m=>{try{const g=Rr(Si(Ue,"lectures")),v=await Ot(g);for(const y of v.docs)if(y.id===m){await jr(y.ref);break}}catch(g){throw console.error("Error deleting lecture:",g),g}}}}function Kb(){const[n,e]=_.useState(""),[t,r]=_.useState(null),[s,a]=_.useState(!1),{lectures:c,loading:u,error:h,createLecture:m,updateLecture:g}=qm(),[v]=ad(),y=v.get("lecture");v.get("tab");let b=c.filter(x=>x.title.toLowerCase().includes(n.toLowerCase())||x.subject.toLowerCase().includes(n.toLowerCase()));y&&(b=c.filter(x=>x.id===y));const S=()=>{r(null),a(!0)},E=x=>{r(x),a(!0)};return s?l.jsx(Bm,{lecture:t,onClose:()=>{a(!1),r(null)},onSave:async x=>{try{t?await g(t.id,x):await m(x,"default-subject"),a(!1),r(null)}catch(A){console.error("Error saving lecture:",A)}}}):(y&&c.find(x=>x.id===y),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Resources Management"}),l.jsx("p",{className:"text-muted-foreground",children:"Organize educational content by lectures with videos, files, and quizzes"})]}),l.jsxs(se,{onClick:S,className:"flex items-center gap-2",children:[l.jsx(Xt,{className:"h-4 w-4"}),"Create Lecture"]})]}),l.jsx(we,{children:l.jsx(_e,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(yc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Ie,{placeholder:"Search lectures by title or subject...",value:n,onChange:x=>e(x.target.value),className:"pl-10"})]})})}),u&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(Oo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading lectures..."})]})}),h&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading lectures"}),l.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&l.jsx("div",{className:"space-y-6",children:b.map(x=>l.jsxs(we,{className:`hover:shadow-lg transition-all duration-200 border-l-4 ${y===x.id?"border-l-primary bg-primary/5":"border-l-primary/20 hover:border-l-primary"}`,children:[l.jsx(Ge,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx(us,{className:"h-5 w-5 text-primary"}),l.jsx(Xe,{className:"text-xl",children:x.title}),l.jsx(nn,{variant:"secondary",children:x.subject})]}),l.jsx(At,{className:"text-base",children:x.description}),l.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(sc,{className:"h-3 w-3"}),x.createdBy]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(M1,{className:"h-3 w-3"}),x.createdAt.toLocaleDateString()]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(se,{variant:"ghost",size:"icon",onClick:()=>E(x),children:l.jsx(id,{className:"h-4 w-4"})}),l.jsx(se,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",children:l.jsx(Ln,{className:"h-4 w-4"})})]})]})}),l.jsx(_e,{children:l.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(Ms,{className:"h-4 w-4 text-green-600"}),"Videos (",x.videos.length,")"]}),x.videos.length>0&&l.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{x.videos.forEach(A=>window.open(A.youtubeUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Play All"})]}),x.videos.length>0?l.jsx("div",{className:"space-y-2",children:x.videos.map(A=>l.jsx("button",{onClick:()=>window.open(A.youtubeUrl,"_blank"),className:"w-full p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"relative",children:[A.thumbnailUrl&&l.jsx("img",{src:A.thumbnailUrl,alt:A.title,className:"w-16 h-12 object-cover rounded"}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx(Ms,{className:"h-6 w-6 text-white"})})]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:A.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(wf,{className:"h-3 w-3"}),A.duration]})]})]})},A.id))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(Hs,{className:"h-4 w-4 text-blue-600"}),"Files (",x.files.length,")"]}),x.files.length>0&&l.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{x.files.forEach(A=>window.open(A.fileUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Download All"})]}),x.files.length>0?l.jsx("div",{className:"space-y-2",children:x.files.map(A=>l.jsx("button",{onClick:()=>window.open(A.fileUrl,"_blank"),className:"w-full p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(Hs,{className:"h-4 w-4 text-blue-600 mt-1 flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:A.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(nn,{variant:"outline",className:"text-xs",children:A.fileType}),l.jsx("span",{children:A.fileSize})]})]})]})},A.id))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(Ni,{className:"h-4 w-4 text-purple-600"}),"Quizzes (",x.quizzes.length,")"]}),x.quizzes.length>0&&l.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{alert(`Starting all ${x.quizzes.length} quizzes for: ${x.title}`)},className:"h-6 px-2 text-xs",children:"Start All"})]}),x.quizzes.length>0?l.jsx("div",{className:"space-y-2",children:x.quizzes.map(A=>l.jsx("button",{onClick:()=>{alert(`Starting quiz: ${A.title}
Time limit: ${A.timeLimit} minutes
Passing score: ${A.passingScore}%`)},className:"w-full p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(Ni,{className:"h-4 w-4 text-purple-600 mt-1 flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:A.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(wf,{className:"h-3 w-3"}),A.timeLimit,"min",l.jsx("span",{children:"â€¢"}),l.jsxs("span",{children:[A.passingScore,"% pass"]})]})]})]})},A.id))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"})]})]})})]},x.id))}),!u&&!h&&b.length===0&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(us,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No lectures found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No lectures match your search criteria.":"Start by creating your first lecture with videos, files, and quizzes."}),l.jsxs(se,{onClick:S,children:[l.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Create Lecture"]})]})})]}))}function I$({professor:n,onClose:e,onSave:t}){const[r,s]=_.useState({name:"",title:"",department:"",email:"",others:"",officeLocation:"",researchAreas:"",imageUrl:""}),[a,c]=_.useState(!1);_.useEffect(()=>{n&&s({name:n.name||"",title:n.title||"",department:n.department||"",email:n.email||"",others:n.others||"",officeLocation:n.officeLocation||"",researchAreas:(n.researchAreas||[]).join(", "),imageUrl:n.imageUrl||""})},[n]);const u=async h=>{h.preventDefault(),c(!0);try{const m={...r,researchAreas:r.researchAreas?r.researchAreas.split(",").map(g=>g.trim()).filter(Boolean):[]};t(m)}catch(m){console.error("Error saving professor:",m)}finally{c(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(se,{variant:"ghost",onClick:e,children:[l.jsx(Ys,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Professor":"Add Professor"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update professor information":"Add a new professor to the faculty"})]})]})}),l.jsxs("form",{onSubmit:u,className:"space-y-6",children:[l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsxs(Xe,{className:"flex items-center gap-2",children:[l.jsx(bo,{className:"h-5 w-5"}),"Professor Information"]}),l.jsx(At,{children:"Basic information about the professor"})]}),l.jsxs(_e,{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsxs(pc,{className:"w-20 h-20",children:[l.jsx(ed,{src:r.imageUrl,alt:r.name}),l.jsx(gc,{children:l.jsx(bo,{className:"w-8 h-8"})})]}),l.jsxs("div",{className:"space-y-2 flex-1",children:[l.jsx(Re,{htmlFor:"imageUrl",children:"Profile Image URL"}),l.jsx(Ie,{id:"imageUrl",placeholder:"https://example.com/profile.jpg",value:r.imageUrl,onChange:h=>s(m=>({...m,imageUrl:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"name",children:"Full Name *"}),l.jsx(Ie,{id:"name",placeholder:"Dr. John Smith",value:r.name,onChange:h=>s(m=>({...m,name:h.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"title",children:"Title"}),l.jsx(Ie,{id:"title",placeholder:"e.g., Associate Professor",value:r.title,onChange:h=>s(m=>({...m,title:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Re,{htmlFor:"department",className:"flex items-center gap-2",children:[l.jsx(pR,{className:"h-4 w-4"}),"Department"]}),l.jsx(Ie,{id:"department",placeholder:"Internal Medicine",value:r.department,onChange:h=>s(m=>({...m,department:h.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"others",children:"Others"}),l.jsx(Ie,{id:"others",placeholder:"Other contact or notes",value:r.others,onChange:h=>s(m=>({...m,others:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Re,{htmlFor:"email",className:"flex items-center gap-2",children:[l.jsx(_f,{className:"h-4 w-4"}),"Email Address"]}),l.jsx(Ie,{id:"email",type:"email",placeholder:"john.smith@university.edu",value:r.email,onChange:h=>s(m=>({...m,email:h.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Re,{htmlFor:"officeLocation",className:"flex items-center gap-2",children:[l.jsx(Mu,{className:"h-4 w-4"}),"Office Location"]}),l.jsx(Ie,{id:"officeLocation",placeholder:"Medical Building, Room 301",value:r.officeLocation,onChange:h=>s(m=>({...m,officeLocation:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"researchAreas",children:"Research Areas"}),l.jsx(Ie,{id:"researchAreas",placeholder:"e.g., Cardiology, Epidemiology",value:r.researchAreas,onChange:h=>s(m=>({...m,researchAreas:h.target.value}))})]}),l.jsx("div",{className:"space-y-2",children:l.jsx("div",{})})]})]})]}),r.name&&l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Preview"}),l.jsx(At,{children:"How the professor will appear in the system"})]}),l.jsx(_e,{children:l.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[l.jsxs(pc,{className:"h-12 w-12",children:[l.jsx(ed,{src:r.imageUrl,alt:r.name}),l.jsx(gc,{children:l.jsx(bo,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold",children:r.name}),l.jsx("p",{className:"text-sm text-muted-foreground",children:r.department}),l.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-sm text-muted-foreground",children:[r.email&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(_f,{className:"h-3 w-3"}),l.jsx("span",{children:r.email})]}),r.officeLocation&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Mu,{className:"h-3 w-3"}),l.jsx("span",{children:r.officeLocation})]}),r.others&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(bo,{className:"h-3 w-3"}),l.jsx("span",{children:r.others})]})]})]})]})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(se,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(se,{type:"submit",disabled:a,children:[l.jsx(Ko,{className:"h-4 w-4 mr-2"}),a?"Saving...":n?"Update Professor":"Add Professor"]})]})]})]})}function j$(){const[n,e]=_.useState(""),[t,r]=_.useState(null),[s,a]=_.useState(!1),{professors:c,loading:u,error:h,createProfessor:m,updateProfessor:g,deleteProfessor:v,isOfflineMode:y}=FC(),b=c.filter(E=>E.name.toLowerCase().includes(n.toLowerCase())||E.department.toLowerCase().includes(n.toLowerCase())||E.email.toLowerCase().includes(n.toLowerCase())),S=async E=>{if(window.confirm("Are you sure you want to delete this professor?"))try{await v(E)}catch(x){console.error("Error deleting professor:",x),alert("Failed to delete professor. Please try again.")}};return s?l.jsx(I$,{professor:t,onClose:()=>{a(!1),r(null)},onSave:async E=>{try{t?await g(t.id,E):await m(E),a(!1),r(null)}catch(x){console.error("Error saving professor:",x),alert("Failed to save professor. Please try again.")}}}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Professors Management"}),l.jsxs("p",{className:"text-muted-foreground",children:["Manage faculty information and profiles",y&&l.jsx("span",{className:"ml-2 text-orange-600 font-medium",children:"â€¢ Working in offline mode"})]})]}),l.jsxs(se,{onClick:()=>a(!0),children:[l.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]}),l.jsx(we,{children:l.jsx(_e,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(yc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Ie,{placeholder:"Search professors by name, department, or email...",value:n,onChange:E=>e(E.target.value),className:"pl-10"})]})})}),u&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(Oo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading professors..."})]})}),h&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading professors"}),l.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:b.map(E=>l.jsxs(we,{className:"hover:shadow-md transition-shadow",children:[l.jsx(Ge,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs(pc,{className:"h-12 w-12",children:[l.jsx(ed,{src:E.imageUrl,alt:E.name}),l.jsx(gc,{children:l.jsx(bo,{className:"h-6 w-6"})})]}),l.jsxs("div",{children:[l.jsx(Xe,{className:"text-lg",children:E.name}),l.jsx(nn,{variant:"secondary",className:"text-xs",children:E.department})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(se,{variant:"ghost",size:"icon",onClick:()=>{r(E),a(!0)},children:l.jsx(id,{className:"h-4 w-4"})}),l.jsx(se,{variant:"ghost",size:"icon",onClick:()=>S(E.id),className:"text-destructive hover:text-destructive",children:l.jsx(Ln,{className:"h-4 w-4"})})]})]})}),l.jsx(_e,{children:l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsxs("div",{className:"",children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:E.title}),l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mt-1",children:[l.jsx(_f,{className:"h-4 w-4"}),l.jsx("span",{children:E.email})]})]}),E.phone&&l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[l.jsx(bo,{className:"h-4 w-4"}),l.jsx("span",{children:E.phone})]}),E.officeLocation&&l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[l.jsx(Mu,{className:"h-4 w-4"}),l.jsx("span",{children:E.officeLocation})]}),E.bio&&l.jsx("div",{className:"text-sm text-muted-foreground line-clamp-3",children:E.bio}),E.researchAreas&&E.researchAreas.length>0&&l.jsx("div",{className:"flex gap-2 flex-wrap",children:E.researchAreas.map(x=>l.jsx(nn,{children:x},x))}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[E.website&&l.jsx("a",{href:E.website,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"Website"}),E.linkedin&&l.jsx("a",{href:E.linkedin,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"LinkedIn"})]})]})})]},E.id))}),!u&&!h&&b.length===0&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(sc,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No professors found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No professors match your search criteria.":"Start by adding your first professor."}),l.jsxs(se,{onClick:()=>a(!0),children:[l.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]})})]})}const A$=[{id:"user_1",displayName:"Ali Ahmed",email:"ali.ahmed@example.com",role:"student",photoURL:"",createdAt:new Date},{id:"user_2",displayName:"Mona Hassan",email:"mona.hassan@example.com",role:"staff",photoURL:"",createdAt:new Date(Date.now()-1e3*60*60*24)}];function P$(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,a]=_.useState(null),[c,u]=_.useState(!1),{years:h}=Rc();return _.useEffect(()=>{const v=async()=>{try{const b=Rr(it(Ue,"users"));await Ot(b);const S=Rr(it(Ue,"users"),wd("createdAt","desc")),E=Xo(S,x=>{const A=[];x.forEach(C=>{var R,D;const O=C.data(),V=O.yearId||O.year||O.year_id||O.yearId||null;let B=V,P="-";if(typeof V=="string"&&V.includes(":")){const[k,$]=V.split(":",2);B=k||null,$&&$.trim()&&(P=$.trim())}if(B&&P==="-"){const k=h.find($=>$.id===B);k&&(k.batchName?P=k.batchName:P=`Year ${{1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six"}[k.yearNumber]||String(k.yearNumber)}`)}A.push({id:C.id,displayName:O.displayName||O.name||"",email:O.email||"",role:O.role||"student",photoURL:O.photoURL||O.avatar||"",createdAt:((D=(R=O.createdAt)==null?void 0:R.toDate)==null?void 0:D.call(R))||void 0,yearId:B||void 0,yearLabel:P})}),e(A);const I=Array.from(new Set(A.map(C=>C.yearId).filter(Boolean).filter(C=>!h.find(O=>O.id===C))));I.length>0&&Promise.all(I.map(async C=>{try{const V=(await Ot(Si(Ue,"years"))).docs.find(D=>D.id===C);if(!V)return null;const B=V.data(),P=B.yearNumber||B.order||(()=>{const D=(B.name||"").match(/\d+/);return D?parseInt(D[0]):void 0})(),R=B.batchName||(P?`Year ${P}`:void 0)||void 0;return{id:C,label:R}}catch{return null}})).then(C=>{const O={};C.forEach(V=>{V&&V.id&&V.label&&(O[V.id]=V.label)}),Object.keys(O).length>0&&e(V=>V.map(B=>B.yearId&&O[B.yearId]?{...B,yearLabel:O[B.yearId]}:B))}),r(!1)},x=>{console.error("Failed to listen to users:",x),y()});return()=>E()}catch(b){console.error("Failed to load users, entering offline mode:",b),y()}},y=()=>{u(!0),e(A$),r(!1),a(null)};v()},[]),_.useEffect(()=>{!h||h.length===0||e(v=>v.map(y=>{if(!y)return y;const b=y.yearId||null;if(!b)return y;const S=h.find(I=>I.id===b);if(!S)return y;const x={1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six"}[S.yearNumber]||String(S.yearNumber),A=S.batchName?S.batchName:`Year ${x}`;return{...y,yearLabel:A}}))},[h]),{users:n,loading:t,error:s,updateUser:async(v,y)=>{if(c||v.startsWith("mock_")||v.startsWith("offline_")){e(b=>b.map(S=>S.id===v?{...S,...y}:S));return}try{await dn(jt(Ue,"users",v),y)}catch(b){console.error("Failed to update user:",b),e(S=>S.map(E=>E.id===v?{...E,...y}:E))}},deleteUser:async v=>{if(c||v.startsWith("mock_")||v.startsWith("offline_")){e(y=>y.filter(b=>b.id!==v));return}try{await jr(jt(Ue,"users",v))}catch(y){console.error("Failed to delete user:",y),e(b=>b.filter(S=>S.id!==v))}},isOfflineMode:c}}function R$(){const{users:n,loading:e,error:t,updateUser:r,deleteUser:s}=P$(),a=async u=>{const h=u.role==="admin"?"user":"admin";await r(u.id,{role:h})},c=(u,h)=>{if(!u)return"-";const m=u.match(/(19|20)\d{2}/);if(m)return m[0];if(h)try{const g=new Date(h);if(!isNaN(g.getTime()))return String(g.getFullYear())}catch{}return"-"};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(AR,{className:"h-6 w-6 text-blue-600"}),l.jsx("h1",{className:"text-3xl font-bold",children:"Users"})]}),l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsxs(Xe,{children:["All Users (",n.length,")"]})}),l.jsx(_e,{children:e?l.jsx("div",{children:"Loading..."}):t?l.jsx("div",{className:"text-destructive",children:t}):n.length===0?l.jsx("div",{className:"text-muted-foreground",children:"No users found."}):(()=>{const u={};n.forEach(m=>{const g=m.yearLabel&&String(m.yearLabel).trim()!==""?String(m.yearLabel):"Unassigned";u[g]||(u[g]=[]),u[g].push(m)});const h=Object.keys(u).sort((m,g)=>{const v=m.match(/Year\s*(\d+)/i),y=g.match(/Year\s*(\d+)/i);return v&&y?parseInt(v[1],10)-parseInt(y[1],10):v?-1:y||m==="Unassigned"?1:g==="Unassigned"?-1:m.localeCompare(g)});return l.jsx("div",{className:"space-y-6",children:h.map(m=>l.jsxs("div",{children:[l.jsx("div",{className:"flex items-center justify-between mb-2",children:l.jsxs("h3",{className:"text-lg font-semibold",children:[m," ",l.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",u[m].length,")"]})]})}),l.jsx("div",{className:"space-y-2",children:u[m].map(g=>{var v;return l.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[l.jsx(pc,{className:"h-12 w-12",children:g.photoURL?l.jsx(ed,{src:g.photoURL,alt:g.displayName}):l.jsx(gc,{children:((v=g.displayName)==null?void 0:v[0])||"U"})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-medium truncate",children:g.displayName}),l.jsx("div",{className:"text-xs text-muted-foreground truncate",children:g.email}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Created: ",g.createdAt?new Date(g.createdAt).toLocaleString():"-",l.jsxs("span",{className:"ml-3",children:["Year: ",g.yearLabel||c(g.id,g.createdAt)]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(nn,{children:g.role||"user"}),l.jsx(se,{size:"sm",variant:"outline",onClick:()=>a(g),children:g.role==="admin"?"Demote":"Make Admin"}),l.jsx(se,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>s(g.id),children:l.jsx(Ln,{className:"h-4 w-4"})})]})]},g.id)})})]},m))})})()})]})]})}function k$(n){if(!n)return 0;if(typeof n=="number")return n;const e=String(n).trim();if(/^\d+$/.test(e))return parseInt(e,10);const t=e.split(":").map(r=>parseInt(r,10));return t.length===3?t[0]*3600+(t[1]||0)*60+(t[2]||0):t.length===2?(t[0]||0)*60+(t[1]||0):0}function D$(n){if(!n||n<=0)return"0:00";const e=Math.floor(n/3600),t=Math.floor(n%3600/60),r=n%60;return e>0?`${e}:${String(t).padStart(2,"0")}:${String(r).padStart(2,"0")}`:`${t}:${String(r).padStart(2,"0")}`}function O$(){var D;const{id:n}=HS(),e=Sc(),{years:t,subjects:r,loading:s,createLecture:a,deleteLecture:c,deleteSubject:u,addVideo:h,addFile:m,addQuiz:g}=Rc(),[v,y]=_.useState(null),[b,S]=_.useState(!1),[E,x]=_.useState(!1),[A,I]=_.useState(!1),[C,O]=_.useState(!1),V=r.find(k=>k.id===n),B=k=>{y(k||null),S(!0)},P=k=>{y(k||null),x(!0)},R=k=>{y(k||null),I(!0)};return b&&v?l.jsx(Aj,{lectureId:v,onClose:()=>{S(!1),y(null)},onSave:async k=>{V!=null&&V.id&&v&&await h(V.id,v,k),S(!1),y(null)}}):E&&v?l.jsx(jj,{lectureId:v,onClose:()=>{x(!1),y(null)},onSave:async k=>{V!=null&&V.id&&v&&await m(V.id,v,k),x(!1),y(null)}}):A&&v?l.jsx(RI,{lectureId:v,onClose:()=>{I(!1),y(null)},onSave:async k=>{V!=null&&V.id&&v&&await g(V.id,v,k),I(!1),y(null)}}):C?l.jsx(Bm,{subjectId:(V==null?void 0:V.id)||null,subjectName:V==null?void 0:V.name,yearType:(D=t.find(k=>k.id===(V==null?void 0:V.yearId)))==null?void 0:D.type,onClose:()=>O(!1),onSave:async k=>{V!=null&&V.id&&await a(k),O(!1)}}):s?l.jsx("div",{children:"Loading..."}):V?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:V.name}),l.jsx("p",{className:"text-muted-foreground",children:"Subject details and lectures"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(se,{variant:"outline",size:"sm",onClick:()=>O(!0),className:"flex items-center gap-2",children:[l.jsx(Xt,{className:"h-4 w-4"}),"Add Lecture"]}),l.jsx(se,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if(V&&confirm(`Delete subject "${V.name}"? This will remove all lectures.`))try{await u(V.id),e("/admin/years")}catch(k){console.error(k),alert("Failed to delete subject")}},children:l.jsx(Ln,{className:"h-4 w-4"})}),l.jsx(Qn,{to:"/admin/years",children:l.jsx(se,{variant:"ghost",children:"Back"})})]})]}),l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Lectures"}),l.jsx(At,{children:"All lectures for this subject"})]}),l.jsx(_e,{children:l.jsx("div",{className:"grid gap-4",children:V.lectures&&V.lectures.length>0?V.lectures.map(k=>{var z,M;const $=k.imageUrl||k.videos&&k.videos[0]&&k.videos[0].thumbnailUrl||"";return l.jsxs("div",{className:"p-3 border rounded-md flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[$?l.jsx("img",{src:$,alt:k.name,width:1280,height:720,style:{width:160,height:90,objectFit:"cover"},className:"rounded"}):l.jsx("div",{className:"w-40 h-24 bg-muted rounded flex items-center justify-center text-xs",children:"No image"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:k.name}),l.jsx("div",{className:"text-sm text-muted-foreground",children:k.description})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(se,{variant:"ghost",size:"sm",onClick:()=>B(k.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Video",children:[l.jsx(Ms,{className:"h-3 w-3 text-blue-600"}),l.jsx("span",{children:"Add Video"})]}),l.jsxs(se,{variant:"ghost",size:"sm",onClick:()=>P(k.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add File",children:[l.jsx(Hs,{className:"h-3 w-3 text-green-600"}),l.jsx("span",{children:"Add File"})]}),l.jsxs(se,{variant:"ghost",size:"sm",onClick:()=>R(k.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Quiz",children:[l.jsx(Ni,{className:"h-3 w-3 text-purple-600"}),l.jsx("span",{children:"Add Quiz"})]}),l.jsx(se,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if(V&&confirm(`Delete lecture "${k.name}"?`))try{await c(V.id,k.id)}catch(oe){console.error(oe),alert("Failed to delete lecture")}},children:l.jsx(Ln,{className:"h-3 w-3"})}),l.jsxs("div",{className:"flex items-center gap-2",children:[k.videos&&k.videos.length>0?(()=>{const oe=(k.videos||[]).reduce((H,J)=>H+k$(J.duration||J.time||J.durationSeconds||J.length),0);return l.jsxs("button",{onClick:()=>e(`/admin/videos?lecture=${k.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:[l.jsx(Ms,{className:"h-4 w-4"}),l.jsxs("span",{children:["(",k.videos.length,")"]}),l.jsx("span",{className:"text-muted-foreground",children:D$(oe)})]})})():l.jsx("button",{onClick:()=>e(`/admin/videos?lecture=${k.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:l.jsx(Ms,{className:"h-4 w-4"})}),l.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${k.id}&tab=files`),className:"text-xs text-green-600 flex items-center gap-1 px-2",title:"Files",children:[l.jsx(Hs,{className:"h-4 w-4"}),l.jsxs("span",{children:["(",((z=k.files)==null?void 0:z.length)||0,")"]})]}),l.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${k.id}&tab=quizzes`),className:"text-xs text-purple-600 flex items-center gap-1 px-2",title:"Quizzes",children:[l.jsx(Ni,{className:"h-4 w-4"}),l.jsxs("span",{children:["(",((M=k.quizzes)==null?void 0:M.length)||0,")"]})]})]})]})]},k.id)}):l.jsx("div",{className:"text-muted-foreground",children:"No lectures yet for this subject."})})})]})]}):l.jsx(we,{children:l.jsxs(_e,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Subject not found"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"The subject you requested does not exist."}),l.jsx("div",{className:"mt-4",children:l.jsx(Qn,{to:"/admin/years",children:l.jsx(se,{children:"Back to Years"})})})]})})}var Zg="rovingFocusGroup.onEntryFocus",L$={bubbles:!1,cancelable:!0},Wm="RovingFocusGroup",[iy,Pj,M$]=cy(Wm),[F$,Rj]=ki(Wm,[M$]),[V$,U$]=F$(Wm),kj=_.forwardRef((n,e)=>l.jsx(iy.Provider,{scope:n.__scopeRovingFocusGroup,children:l.jsx(iy.Slot,{scope:n.__scopeRovingFocusGroup,children:l.jsx($$,{...n,ref:e})})}));kj.displayName=Wm;var $$=_.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:a,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:h,onEntryFocus:m,preventScrollOnEntryFocus:g=!1,...v}=n,y=_.useRef(null),b=wt(e,y),S=Mx(a),[E=null,x]=ka({prop:c,defaultProp:u,onChange:h}),[A,I]=_.useState(!1),C=En(m),O=Pj(t),V=_.useRef(!1),[B,P]=_.useState(0);return _.useEffect(()=>{const R=y.current;if(R)return R.addEventListener(Zg,C),()=>R.removeEventListener(Zg,C)},[C]),l.jsx(V$,{scope:t,orientation:r,dir:S,loop:s,currentTabStopId:E,onItemFocus:_.useCallback(R=>x(R),[x]),onItemShiftTab:_.useCallback(()=>I(!0),[]),onFocusableItemAdd:_.useCallback(()=>P(R=>R+1),[]),onFocusableItemRemove:_.useCallback(()=>P(R=>R-1),[]),children:l.jsx(We.div,{tabIndex:A||B===0?-1:0,"data-orientation":r,...v,ref:b,style:{outline:"none",...n.style},onMouseDown:$e(n.onMouseDown,()=>{V.current=!0}),onFocus:$e(n.onFocus,R=>{const D=!V.current;if(R.target===R.currentTarget&&D&&!A){const k=new CustomEvent(Zg,L$);if(R.currentTarget.dispatchEvent(k),!k.defaultPrevented){const $=O().filter(J=>J.focusable),z=$.find(J=>J.active),M=$.find(J=>J.id===E),H=[z,M,...$].filter(Boolean).map(J=>J.ref.current);Lj(H,g)}}V.current=!1}),onBlur:$e(n.onBlur,()=>I(!1))})})}),Dj="RovingFocusGroupItem",Oj=_.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:a,...c}=n,u=To(),h=a||u,m=U$(Dj,t),g=m.currentTabStopId===h,v=Pj(t),{onFocusableItemAdd:y,onFocusableItemRemove:b}=m;return _.useEffect(()=>{if(r)return y(),()=>b()},[r,y,b]),l.jsx(iy.ItemSlot,{scope:t,id:h,focusable:r,active:s,children:l.jsx(We.span,{tabIndex:g?0:-1,"data-orientation":m.orientation,...c,ref:e,onMouseDown:$e(n.onMouseDown,S=>{r?m.onItemFocus(h):S.preventDefault()}),onFocus:$e(n.onFocus,()=>m.onItemFocus(h)),onKeyDown:$e(n.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){m.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const E=q$(S,m.orientation,m.dir);if(E!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let A=v().filter(I=>I.focusable).map(I=>I.ref.current);if(E==="last")A.reverse();else if(E==="prev"||E==="next"){E==="prev"&&A.reverse();const I=A.indexOf(S.currentTarget);A=m.loop?W$(A,I+1):A.slice(I+1)}setTimeout(()=>Lj(A))}})})})});Oj.displayName=Dj;var z$={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function B$(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function q$(n,e,t){const r=B$(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return z$[r]}function Lj(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function W$(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var H$=kj,K$=Oj,Vx="Tabs",[G$,$z]=ki(Vx,[Rj]),Mj=Rj(),[Q$,Ux]=G$(Vx),Fj=_.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:s,defaultValue:a,orientation:c="horizontal",dir:u,activationMode:h="automatic",...m}=n,g=Mx(u),[v,y]=ka({prop:r,onChange:s,defaultProp:a});return l.jsx(Q$,{scope:t,baseId:To(),value:v,onValueChange:y,orientation:c,dir:g,activationMode:h,children:l.jsx(We.div,{dir:g,"data-orientation":c,...m,ref:e})})});Fj.displayName=Vx;var Vj="TabsList",Uj=_.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...s}=n,a=Ux(Vj,t),c=Mj(t);return l.jsx(H$,{asChild:!0,...c,orientation:a.orientation,dir:a.dir,loop:r,children:l.jsx(We.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});Uj.displayName=Vj;var $j="TabsTrigger",zj=_.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:s=!1,...a}=n,c=Ux($j,t),u=Mj(t),h=Wj(c.baseId,r),m=Hj(c.baseId,r),g=r===c.value;return l.jsx(K$,{asChild:!0,...u,focusable:!s,active:g,children:l.jsx(We.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":m,"data-state":g?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:h,...a,ref:e,onMouseDown:$e(n.onMouseDown,v=>{!s&&v.button===0&&v.ctrlKey===!1?c.onValueChange(r):v.preventDefault()}),onKeyDown:$e(n.onKeyDown,v=>{[" ","Enter"].includes(v.key)&&c.onValueChange(r)}),onFocus:$e(n.onFocus,()=>{const v=c.activationMode!=="manual";!g&&!s&&v&&c.onValueChange(r)})})})});zj.displayName=$j;var Bj="TabsContent",qj=_.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:s,children:a,...c}=n,u=Ux(Bj,t),h=Wj(u.baseId,r),m=Hj(u.baseId,r),g=r===u.value,v=_.useRef(g);return _.useEffect(()=>{const y=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(y)},[]),l.jsx(dy,{present:s||g,children:({present:y})=>l.jsx(We.div,{"data-state":g?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!y,id:m,tabIndex:0,...c,ref:e,style:{...n.style,animationDuration:v.current?"0s":void 0},children:y&&a})})});qj.displayName=Bj;function Wj(n,e){return`${n}-trigger-${e}`}function Hj(n,e){return`${n}-content-${e}`}var Y$=Fj,Kj=Uj,Gj=zj,Qj=qj;const X$=Y$,Yj=_.forwardRef(({className:n,...e},t)=>l.jsx(Kj,{ref:t,className:et("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));Yj.displayName=Kj.displayName;const oy=_.forwardRef(({className:n,...e},t)=>l.jsx(Gj,{ref:t,className:et("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));oy.displayName=Gj.displayName;const ay=_.forwardRef(({className:n,...e},t)=>l.jsx(Qj,{ref:t,className:et("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));ay.displayName=Qj.displayName;function J$({product:n,onClose:e,onSave:t}){const[r,s]=_.useState({name:(n==null?void 0:n.name)||"",description:(n==null?void 0:n.description)||"",price:(n==null?void 0:n.price)||0,types:(n==null?void 0:n.types)||(n!=null&&n.price?[{name:"Default",price:n.price}]:[]),images:(n==null?void 0:n.images)||[""],categoryId:(n==null?void 0:n.categoryId)||""}),[a,c]=_.useState(!1),[u,h]=_.useState(null),m=async b=>{b.preventDefault(),c(!0);try{const S={...r,images:r.images.filter(E=>E.trim()!=="")};S.types&&S.types.length>0?(S.types=S.types.map(E=>({name:String(E.name||"").trim(),price:parseFloat(E.price)||0})),S.price=S.types[0].price||0):S.types=[],t(S)}catch(S){console.error("Error saving product:",S)}finally{c(!1)}},g=()=>{s(b=>({...b,images:[...b.images,""]}))},v=(b,S)=>{s(E=>({...E,images:E.images.map((x,A)=>A===b?S:x)}))},y=b=>{s(S=>({...S,images:S.images.filter((E,x)=>x!==b)}))};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(se,{variant:"ghost",onClick:e,children:[l.jsx(Ys,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Product":"Add Product"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update product details":"Create a new product"})]})]})}),l.jsxs("form",{onSubmit:m,className:"space-y-6",children:[l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsxs(Xe,{className:"flex items-center gap-2",children:[l.jsx(ov,{className:"h-5 w-5 text-blue-600"}),"Product Information"]}),l.jsx(At,{children:"Basic information about the product"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"name",children:"Product Name *"}),l.jsx(Ie,{id:"name",placeholder:"e.g., Medical Textbook",value:r.name,onChange:b=>s(S=>({...S,name:b.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{children:"Types & Prices"}),l.jsxs("div",{className:"space-y-2",children:[r.types&&r.types.length>0?r.types.map((b,S)=>l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Ie,{placeholder:"Type name (e.g., Pen)",value:b.name,onChange:E=>s(x=>({...x,types:x.types.map((A,I)=>I===S?{...A,name:E.target.value}:A)})),required:!0}),l.jsx(Ie,{type:"number",step:"0.01",placeholder:"0.00",value:b.price,onChange:E=>s(x=>({...x,types:x.types.map((A,I)=>I===S?{...A,price:parseFloat(E.target.value)||0}:A)})),required:!0,className:"w-32"}),l.jsx(se,{type:"button",variant:"ghost",onClick:()=>s(E=>({...E,types:E.types.filter((x,A)=>A!==S)})),children:"Remove"})]},S)):l.jsx("div",{className:"text-muted-foreground",children:"No types defined."}),l.jsx("div",{children:l.jsxs(se,{type:"button",variant:"outline",onClick:()=>s(b=>({...b,types:[...b.types||[],{name:"Default",price:0}]})),children:[l.jsx(Xt,{className:"h-4 w-4 mr-2"})," Add Type"]})})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"description",children:"Description"}),l.jsx(Ri,{id:"description",placeholder:"Describe the product...",value:r.description,onChange:b=>s(S=>({...S,description:b.target.value})),rows:4})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"categoryId",children:"Category ID (Optional)"}),l.jsx(Ie,{id:"categoryId",placeholder:"e.g., books, equipment",value:r.categoryId,onChange:b=>s(S=>({...S,categoryId:b.target.value}))})]})]})]}),l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx(Xe,{children:"Product Images"}),l.jsx(At,{children:"Add image URLs for the product"})]}),l.jsxs(se,{type:"button",variant:"outline",onClick:g,children:[l.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Add Image"]})]})}),l.jsx(_e,{className:"space-y-4",children:r.images.map((b,S)=>l.jsxs("div",{className:`flex gap-2 items-center ${u===S?"border-2 border-dashed p-2 rounded":""}`,onDragOver:E=>{E.preventDefault(),h(S)},onDragEnter:E=>{E.preventDefault(),h(S)},onDragLeave:()=>{h(null)},onDrop:async E=>{E.preventDefault(),h(null);try{const x=E.dataTransfer;if(!x)return;if(x.files&&x.files.length>0){const I=x.files[0];try{let C=null;try{C=await yr(I)}catch(O){console.warn("Cloudinary upload failed, trying ImageKit fallback",(O==null?void 0:O.message)||O),C=await Do(I,I.name)}C&&typeof C=="string"&&C.startsWith("http")?v(S,C):alert("Upload failed: unexpected response from upload provider")}catch(C){console.error("Drop upload error:",C);const V=((C==null?void 0:C.message)||String(C)||"").toLowerCase();if(V.includes("cloudinary signing did not return an api key")||V.includes("missing required parameter - api_key")||V.includes("missing required parameter 'api_key'")){const B=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(B&&B.trim())try{Pa(null,null,B.trim());const P=await yr(I);if(P&&typeof P=="string"&&P.startsWith("http")){v(S,P);return}}catch(P){console.error("Retry after API key failed:",P)}}alert("Upload failed: "+((C==null?void 0:C.message)||C))}return}const A=x.getData("text/uri-list")||x.getData("text/plain");if(A&&A.startsWith("http")){if(!window.confirm(`Upload the dragged URL to Cloudinary and replace it?
`+A))return;const C=await Hb(A);C&&typeof C=="string"&&C.startsWith("http")?v(S,C):alert("Upload failed: unexpected response from server")}}catch(x){console.error("Drop upload error:",x),alert("Image upload failed: "+((x==null?void 0:x.message)||x))}},children:[l.jsx(Ie,{placeholder:"https://example.com/image.jpg",value:b,onChange:E=>v(S,E.target.value)}),l.jsx(se,{type:"button",variant:"ghost",size:"icon",onClick:async()=>{var E;try{const x=(E=r.images[S])==null?void 0:E.trim();if(x&&(x.startsWith("http://")||x.startsWith("https://"))){try{if(!window.confirm(`Upload the current URL to Cloudinary/ImageKit and replace it?
`+x))return;try{const C=await Hb(x);if(C&&typeof C=="string"&&C.startsWith("http")){v(S,C);return}}catch(C){console.warn("uploadUrlToServer failed, will try ImageKit:",(C==null?void 0:C.message)||C)}try{const C=await Do(x);if(C&&typeof C=="string"&&C.startsWith("http")){v(S,C);return}else alert("Upload failed: unexpected response from ImageKit")}catch(C){console.error("ImageKit URL upload error:",C),alert("URL upload failed: "+((C==null?void 0:C.message)||C))}}catch(I){console.error("URL upload error:",I),alert("URL upload failed: "+((I==null?void 0:I.message)||I))}return}const A=document.createElement("input");A.type="file",A.accept="image/*",A.onchange=async()=>{var C;const I=(C=A.files)==null?void 0:C[0];if(I)try{let O=null;try{O=await yr(I)}catch(V){console.warn("Cloudinary upload failed, trying ImageKit fallback",(V==null?void 0:V.message)||V);try{O=await Do(I,I.name)}catch(B){throw console.error("ImageKit upload failed:",B),V}}if(!O||typeof O!="string"||!O.startsWith("http")){alert("Upload failed: unexpected response from upload provider");return}v(S,O)}catch(O){const V=(O==null?void 0:O.message)||String(O);console.error("Upload error:",O);const B=(V||"").toLowerCase();if(B.includes("cloudinary cloud name is not configured")){const P=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!P){alert("No cloud name provided.");return}const R=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),D=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");Pa(P,R||null,D||null);try{const k=await yr(I);if(!k||typeof k!="string"||!k.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}v(S,k)}catch(k){console.error("Retry upload error:",k),alert("Upload failed after configuring Cloudinary: "+(k.message||k))}}else if(B.includes("cloudinary signing did not return an api key")||B.includes("missing required parameter - api_key")||B.includes("missing required parameter 'api_key'")){const P=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(P&&P.trim())try{Pa(null,null,P.trim());const R=await yr(I);if(!R||typeof R!="string"||!R.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}v(S,R);return}catch(R){console.error("Retry upload error:",R),alert("Upload failed after setting API key: "+(R.message||R));return}}else alert("Image upload failed: "+(O.message||O))}},A.click()}catch(x){console.error(x),alert("Could not open file dialog")}},children:l.jsx(iv,{className:"h-4 w-4"})}),r.images.length>1&&l.jsx(se,{type:"button",variant:"outline",size:"icon",onClick:()=>y(S),children:l.jsx(ic,{className:"h-4 w-4"})})]},S))})]}),r.name&&l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Preview"}),l.jsx(At,{children:"How the product will appear"})]}),l.jsx(_e,{children:l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex items-start gap-4",children:[r.images[0]&&r.images[0].trim()&&(()=>{const b=ck(r.images[0]);return l.jsx("img",{src:b||void 0,alt:r.name,className:"w-20 h-20 object-cover rounded",onError:S=>{S.currentTarget.style.display="none",console.warn("Product preview image failed to load:",b||r.images[0])}})})(),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-lg",children:r.name}),l.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-1",children:["$",r.price.toFixed(2)]}),r.description&&l.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:r.description}),r.categoryId&&l.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Category: ",r.categoryId]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(se,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(se,{type:"submit",disabled:a,children:[l.jsx(Ko,{className:"h-4 w-4 mr-2"}),a?"Saving...":n?"Update Product":"Add Product"]})]})]})]})}function Xj(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,a]=_.useState(null);return _.useEffect(()=>{const m=Rr(it(Ue,"orders"),wd("orderDate","desc")),g=Xo(m,async v=>{try{const y=await Ot(it(Ue,"products")),b={};y.forEach(E=>{const x=E.data();b[E.id]={id:E.id,name:x.name||x.title||"",price:x.price||0}});const S=[];v.forEach(E=>{var B,P;const x=E.data();let A=[];x.items&&Array.isArray(x.items)&&x.items.length>0?A=x.items:x.productsIds&&Array.isArray(x.productsIds)&&(A=x.productsIds.map(R=>{var D,k;return{productId:R,name:((D=b[R])==null?void 0:D.name)||R,quantity:1,price:((k=b[R])==null?void 0:k.price)||0}}));const I=x.total||x.totalAmount||x.totalPrice||0,C=x.address||x.shippingaddress||x.shippingAddress||"",O=x.userPhone||x.user_phone||x.phone||"";let V=new Date;x.createdAt&&typeof x.createdAt.toDate=="function"?V=x.createdAt.toDate():x.orderDate&&typeof x.orderDate.toDate=="function"?V=x.orderDate.toDate():x.orderDate&&(V=new Date(x.orderDate)),S.push({id:E.id,userId:x.userId||x.user_id||"",username:x.username||x.userName||x.user_name||x.customerName||"",userName:x.userName||x.user_name||x.customerName||"",userEmail:x.userEmail||x.email||"",userPhone:O,address:C,items:A,total:I,iscompleted:x.iscompleted===!0||x.isCompleted===!0||!1,status:x.status||(x.iscompleted===!0?"completed":"pending"),createdAt:V,updatedAt:(P=(B=x.updatedAt)==null?void 0:B.toDate)==null?void 0:P.call(B)})}),e(S),r(!1)}catch(y){console.error("Error processing orders:",y),a("Failed to load orders"),r(!1)}},v=>{console.error("Failed to load orders:",v),a("Failed to load orders"),r(!1)});return()=>g()},[]),{orders:n,loading:t,error:s,createOrder:async m=>{try{await jn(it(Ue,"orders"),{...m,createdAt:new Date})}catch(g){console.error("Error creating order:",g)}},updateOrder:async(m,g)=>{try{const v={...g,updatedAt:new Date};(g.status==="completed"||g.isCompleted)&&(v.isCompleted=!0,v.iscompleted=!0,v.completedAt=new Date,v.status="completed"),await dn(jt(Ue,"orders",m),v)}catch(v){console.error("Error updating order:",v)}},deleteOrder:async m=>{try{await jr(jt(Ue,"orders",m))}catch(g){console.error("Error deleting order:",g)}}}}function Z$(){const[n,e]=_.useState(""),[t,r]=_.useState(!1),[s,a]=_.useState(null),{products:c,loading:u,error:h,isOfflineMode:m,createProduct:g,updateProduct:v,deleteProduct:y,retryConnection:b}=MC(),{createOrder:S}=Xj(),E=()=>{a(null),r(!0)},x=C=>{a(C),r(!0)},A=async(C,O)=>{confirm(`Are you sure you want to delete "${O}"?`)&&await y(C)};if(t)return l.jsx(J$,{product:s,onClose:()=>{r(!1),a(null)},onSave:async C=>{try{s?await v(s.id,C):await g(C),r(!1),a(null)}catch(O){console.error("Error saving product:",O),alert("Failed to save product. Please try again.")}}});const I=c.filter(C=>C.name.toLowerCase().includes(n.toLowerCase())||C.description.toLowerCase().includes(n.toLowerCase()));return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Store Management"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-muted-foreground",children:"Manage store products and categories"}),m&&l.jsxs("span",{className:"flex items-center gap-1 text-orange-600 font-medium text-sm",children:[l.jsx("div",{className:"h-2 w-2 bg-orange-600 rounded-full"}),"Offline Mode"]})]})]})}),u&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(Oo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading products..."})]})}),h&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading products"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:h}),l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx(se,{onClick:b,variant:"outline",children:"Retry Connection"}),l.jsx(se,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!u&&!h&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[l.jsxs(we,{children:[l.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Xe,{className:"text-sm font-medium",children:"Total Products"}),l.jsx(ov,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(_e,{children:l.jsx("div",{className:"text-2xl font-bold",children:c.length})})]}),l.jsxs(we,{children:[l.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Xe,{className:"text-sm font-medium",children:"Average Price"}),l.jsx(V1,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(_e,{children:l.jsxs("div",{className:"text-2xl font-bold",children:["$",c.length>0?(c.reduce((C,O)=>{const V=O.types&&O.types.length>0?O.types[0].price:O.price||0;return C+V},0)/c.length).toFixed(2):"0.00"]})})]}),l.jsxs(we,{children:[l.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Xe,{className:"text-sm font-medium",children:"Categories"}),l.jsx(Iu,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(_e,{children:l.jsx("div",{className:"text-2xl font-bold",children:new Set(c.map(C=>C.categoryId).filter(C=>C&&C.trim())).size})})]})]}),l.jsxs(X$,{defaultValue:"products",className:"space-y-6",children:[l.jsxs(Yj,{className:"grid w-full grid-cols-2",children:[l.jsxs(oy,{value:"products",className:"flex items-center gap-2",children:[l.jsx(py,{className:"h-4 w-4"}),"Products (",c.length,")"]}),l.jsxs(oy,{value:"categories",className:"flex items-center gap-2",children:[l.jsx(Iu,{className:"h-4 w-4"}),"Categories"]})]}),l.jsxs(ay,{value:"products",className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"relative flex-1 max-w-sm",children:[l.jsx(yc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Ie,{placeholder:"Search products...",value:n,onChange:C=>e(C.target.value),className:"pl-10"})]}),l.jsxs(se,{onClick:E,children:[l.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),I.length===0?l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(ov,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:n?"No products found":"No products yet"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"Try adjusting your search terms":"Add your first product to get started"}),!n&&l.jsxs(se,{onClick:E,children:[l.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Add First Product"]})]})}):l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:I.map(C=>l.jsxs(we,{className:"overflow-hidden",children:[l.jsxs("div",{className:"aspect-video bg-muted relative",children:[C.images&&C.images[0]?l.jsx("img",{src:C.images[0],alt:C.name,className:"w-full h-full object-cover",onError:O=>{O.currentTarget.style.display="none";const V=O.currentTarget.nextElementSibling;V&&(V.style.display="flex")}}):null,l.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{display:C.images&&C.images[0]?"none":"flex"},children:l.jsx(iv,{className:"h-12 w-12 text-muted-foreground"})})]}),l.jsxs(Ge,{className:"pb-2",children:[l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx(Xe,{className:"text-lg line-clamp-1",children:C.name}),C.types&&C.types.length>1&&l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[C.types.length," options available"]})]}),l.jsx("div",{className:"mt-2",children:C.types&&C.types.length>0?l.jsx("div",{className:"flex gap-2 flex-wrap",children:C.types.map((O,V)=>l.jsxs(nn,{variant:"secondary",className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium",children:O.name}),l.jsxs("span",{className:"text-sm text-muted-foreground",children:["$",O.price.toFixed(2)]})]},V))}):l.jsxs("div",{className:"text-xl font-bold",children:["$",(C.price||0).toFixed(2)]})}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(se,{variant:"ghost",size:"icon",onClick:()=>x(C),className:"h-8 w-8",children:l.jsx(id,{className:"h-3 w-3"})}),l.jsx(se,{variant:"ghost",size:"icon",onClick:async()=>{try{const O=document.createElement("input");O.type="file",O.accept="image/*",O.onchange=async()=>{var B;const V=(B=O.files)==null?void 0:B[0];if(V)try{let P=null;try{P=await yr(V)}catch(R){console.warn("Cloudinary upload failed, trying ImageKit fallback",(R==null?void 0:R.message)||R);try{P=await Do(V,V.name)}catch(D){throw console.error("ImageKit upload failed:",D),R}}if(!P||typeof P!="string"||!P.startsWith("http")){console.error("Invalid upload response:",P),alert("Image upload failed: unexpected response from upload provider");return}await v(C.id,{images:[P]})}catch(P){console.error(P);const D=((P==null?void 0:P.message)||String(P)||"").toLowerCase();if(D.includes("cloudinary cloud name is not configured")){const k=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!k){alert("No cloud name provided. Upload cancelled.");return}const $=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),z=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");try{Pa(k,$||null,z||null);const M=await yr(V);if(console.log("Cloudinary upload result after config:",M),!M||typeof M!="string"||!M.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await v(C.id,{images:[M]})}catch(M){console.error(M),alert("Image upload failed after configuring Cloudinary: "+(M.message||M))}return}else if(D.includes("cloudinary signing did not return an api key")||D.includes("missing required parameter - api_key")||D.includes("missing required parameter 'api_key'")){const k=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(k&&k.trim())try{Pa(null,null,k.trim());const $=await yr(V);if(!$||typeof $!="string"||!$.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await v(C.id,{images:[$]});return}catch($){console.error($),alert("Image upload failed after setting API key: "+($.message||$));return}}alert("Image upload failed: "+(P.message||P))}},O.click()}catch(O){console.error(O),alert("Could not open file dialog")}},className:"h-8 w-8",children:l.jsx(iv,{className:"h-3 w-3"})}),l.jsx(se,{variant:"ghost",size:"icon",onClick:()=>A(C.id,C.name),className:"h-8 w-8 text-destructive hover:text-destructive",children:l.jsx(Ln,{className:"h-3 w-3"})}),l.jsx(se,{variant:"default",size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:async()=>{try{let O,V;if(C.types&&C.types.length>0)if(C.types.length===1)O=C.types[0].name,V=C.types[0].price;else{const M=C.types.map((J,Y)=>`${Y+1}. ${J.name} - $${J.price.toFixed(2)}`).join(`
`),oe=window.prompt(`Select a type for "${C.name}":

${M}

Enter the number (1-${C.types.length}):`,"1");if(!oe)return;const H=parseInt(oe)-1;if(H<0||H>=C.types.length){alert("Invalid selection. Please try again.");return}O=C.types[H].name,V=C.types[H].price}else V=C.price||0;const B=window.prompt("Your full name:");if(!B)return;const P=window.prompt("Your email:");if(!P)return;const R=window.prompt("Quantity:","1")||"1",D=parseInt(R)||1,k=window.prompt("Phone (optional):","")||"",$=window.prompt("Address (optional):","")||"",z=O?`${C.name} (${O})`:C.name;await S({username:B,userName:B,userEmail:P,userPhone:k,address:$,items:[{productId:C.id,name:z,quantity:D,price:V,selectedType:O}],total:V*D,status:"pending",createdAt:new Date}),alert(`Order placed successfully!

Product: ${z}
Quantity: ${D}
Total: $${(V*D).toFixed(2)}`)}catch(O){console.error(O),alert("Failed to place order")}},children:C.types&&C.types.length>1?"Select & Buy":"Buy Now"})]})]}),l.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",(C.types&&C.types.length>0?C.types[0].price:C.price||0).toFixed(2)]})]}),l.jsxs(_e,{className:"pt-0",children:[C.description&&l.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:C.description}),l.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[l.jsx("span",{children:C.createdAt.toLocaleDateString()}),C.categoryId&&l.jsx(nn,{variant:"secondary",className:"text-xs",children:C.categoryId})]})]})]},C.id))})]}),l.jsxs(ay,{value:"categories",className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Categories"}),l.jsxs(se,{disabled:!0,children:[l.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Add Category"]})]}),l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(Iu,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Category Management"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"Category management will be implemented in the future."}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"For now, you can specify category IDs when creating products."})]})})]})]})]})]})}function ez({order:n,onChangeStatus:e,onDelete:t}){var r,s;return l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(Xe,{children:["Order for ",n.username||n.userName,l.jsx("div",{className:"text-xs text-muted-foreground",children:(s=(r=n.createdAt)==null?void 0:r.toLocaleString)==null?void 0:s.call(r)})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(nn,{variant:n.status==="completed"||n.iscompleted?"default":"secondary",children:[n.status,n.iscompleted?" â€¢ completed":""]}),l.jsxs(se,{variant:"ghost",size:"sm",onClick:()=>e(n.id,"completed"),children:[l.jsx(m_,{className:"h-4 w-4 mr-1"})," Complete"]}),l.jsx(se,{variant:"ghost",size:"icon",onClick:()=>t(n.id),className:"text-destructive",children:l.jsx(Ln,{className:"h-4 w-4"})})]})]})}),l.jsxs(_e,{children:[l.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact"}),l.jsx("div",{className:"font-medium",children:n.username||n.userName}),l.jsx("div",{className:"text-sm",children:n.userEmail}),n.userPhone&&l.jsx("div",{className:"text-sm",children:n.userPhone}),n.address&&l.jsx("div",{className:"text-sm",children:n.address})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Items"}),l.jsxs("div",{className:"space-y-2 mt-2",children:[n.items&&n.items.length>0?n.items.map((a,c)=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-sm",children:[a.name," x",a.quantity]}),l.jsxs("div",{className:"font-medium",children:["$",(a.price*a.quantity).toFixed(2)]})]},c)):l.jsx("div",{className:"text-sm text-muted-foreground",children:"No item details. Products IDs may be attached in the raw order."}),n.productsIds&&n.productsIds.length>0&&l.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Product IDs: ",(n.productsIds||[]).join(", ")]}),l.jsxs("div",{className:"flex items-center justify-between pt-2 border-t mt-2",children:[l.jsx("div",{className:"font-medium",children:"Total"}),l.jsxs("div",{className:"font-bold",children:["$",(n.total||0).toFixed(2)]})]})]})]})]}),l.jsxs("div",{className:"flex gap-2 mt-4",children:[l.jsxs(se,{onClick:()=>e(n.id,"paid"),children:[l.jsx(m_,{className:"h-4 w-4 mr-2"})," Mark Paid"]}),l.jsxs(se,{variant:"outline",onClick:()=>e(n.id,"cancelled"),children:[l.jsx(yR,{className:"h-4 w-4 mr-2"})," Cancel"]})]})]})]},n.id)}function tz(){const{orders:n,loading:e,error:t,updateOrder:r,deleteOrder:s}=Xj(),a=async(u,h)=>{u&&await r(u,{status:h})},c=async u=>{u&&confirm("Delete this order?")&&await s(u)};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Orders"}),l.jsx("p",{className:"text-muted-foreground",children:"View and manage store orders"})]})}),e&&l.jsx("div",{children:"Loading..."}),t&&l.jsx("div",{className:"text-destructive",children:t}),!e&&!t&&l.jsx("div",{className:"grid gap-4",children:n.map(u=>l.jsx(ez,{order:u,onChangeStatus:a,onDelete:c},u.id))})]})}function $x(n,e){const[t,r]=_.useState([]),[s,a]=_.useState(!0),[c,u]=_.useState(null);return _.useEffect(()=>{let h=null,m=!0;return(async()=>{if(!n){r([]),a(!1);return}try{const v=Rr(Si(Ue,"lectures"),c6(ZU(),"==",n)),y=await Ot(v);if(y.empty){m&&(r([]),a(!1));return}const b=y.docs[0],S=it(b.ref,e);h=Xo(S,E=>{if(!m)return;const x=[];E.forEach(A=>{const I=A.data();x.push({id:A.id,...I})}),r(x),a(!1)},E=>{console.error(`Failed to subscribe to ${e}:`,E),u(`Failed to load ${e}`),a(!1)})}catch(v){console.error(`Error resolving lecture for ${e}:`,v),m&&(u(v.message||String(v)),a(!1))}})(),()=>{m=!1,h&&h()}},[n,e]),{items:t,loading:s,error:c}}function nz(n){return $x(n,"videos")}function rz(n){return $x(n,"files")}function Jj(n){return $x(n,"quizzes")}function sz(){var m;const[n]=ad(),e=n.get("lecture"),{lectures:t,loading:r,error:s}=qm(),{items:a,loading:c,error:u}=nz(e);if(c||r)return l.jsx("div",{children:"Loading..."});if(u||s)return l.jsx("div",{className:"text-destructive",children:u||s});const h=t.find(g=>g.id===e);return h?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Videos for ",h.title||h.id]}),l.jsx("p",{className:"text-muted-foreground",children:h.description})]}),l.jsx("div",{children:l.jsx(Qn,{to:"/admin/resources",children:l.jsx(se,{variant:"ghost",children:"Back"})})})]}),l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsxs(Xe,{children:["Videos (",((m=h.videos)==null?void 0:m.length)||0,")"]})}),l.jsx(_e,{children:a&&a.length>0?l.jsx("div",{className:"space-y-3",children:a.map(g=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[g.thumbnailUrl?l.jsx("img",{src:g.thumbnailUrl,alt:g.title,className:"w-32 h-18 object-cover rounded"}):l.jsx("div",{className:"w-32 h-18 bg-muted rounded"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:g.title||"Untitled"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:g.description})]})]}),l.jsx("div",{children:l.jsxs(se,{onClick:()=>window.open(g.url||g.youtubeUrl||"","_blank"),children:[" ",l.jsx(Ms,{className:"h-4 w-4 mr-2"})," Play "]})})]},g.id))}):l.jsx("p",{className:"text-muted-foreground",children:"No videos available for this lecture."})})]})]}):l.jsx(we,{children:l.jsxs(_e,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its videos."}),l.jsx("div",{className:"mt-4",children:l.jsx(Qn,{to:"/admin/years",children:l.jsx(se,{children:"Back to Years"})})})]})})}function iz(){var m;const[n]=ad(),e=n.get("lecture"),{lectures:t,loading:r,error:s}=qm(),{items:a,loading:c,error:u}=rz(e);if(c||r)return l.jsx("div",{children:"Loading..."});if(u||s)return l.jsx("div",{className:"text-destructive",children:u||s});const h=t.find(g=>g.id===e);return h?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Files for ",h.title||h.id]}),l.jsx("p",{className:"text-muted-foreground",children:h.description})]}),l.jsx("div",{children:l.jsx(Qn,{to:"/admin/resources",children:l.jsx(se,{variant:"ghost",children:"Back"})})})]}),l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsxs(Xe,{children:["Files (",((m=h.files)==null?void 0:m.length)||0,")"]})}),l.jsx(_e,{children:a&&a.length>0?l.jsx("div",{className:"space-y-3",children:a.map(g=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Hs,{className:"h-6 w-6 text-blue-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:g.title||g.name||"Untitled File"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:g.description})]})]}),l.jsx("div",{children:l.jsx(se,{onClick:()=>window.open(g.fileUrl||g.url||"_blank"),children:"Download"})})]},g.id))}):l.jsx("p",{className:"text-muted-foreground",children:"No files available for this lecture."})})]})]}):l.jsx(we,{children:l.jsxs(_e,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its files."}),l.jsx("div",{className:"mt-4",children:l.jsx(Qn,{to:"/admin/years",children:l.jsx(se,{children:"Back to Years"})})})]})})}function oz(){var m;const[n]=ad(),e=n.get("lecture"),{lectures:t,loading:r,error:s}=qm(),{items:a,loading:c,error:u}=Jj(e);if(c||r)return l.jsx("div",{children:"Loading..."});if(u||s)return l.jsx("div",{className:"text-destructive",children:u||s});const h=t.find(g=>g.id===e);return h?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Quizzes for ",h.title||h.id]}),l.jsx("p",{className:"text-muted-foreground",children:h.description})]}),l.jsx("div",{children:l.jsx(Qn,{to:"/admin/resources",children:l.jsx(se,{variant:"ghost",children:"Back"})})})]}),l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsxs(Xe,{children:["Quizzes (",((m=h.quizzes)==null?void 0:m.length)||0,")"]})}),l.jsx(_e,{children:a&&a.length>0?l.jsx("div",{className:"space-y-3",children:a.map(g=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Ni,{className:"h-6 w-6 text-purple-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:g.title||"Untitled Quiz"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:g.description}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",l.jsx("strong",{children:g.type||"multiple_choice"})]})]})]}),l.jsx("div",{children:(g.type||"multiple_choice")==="flashcard"?l.jsx(se,{onClick:()=>window.location.href=`/admin/flashcards?lecture=${e}&quiz=${g.id}`,children:"Flashcards"}):l.jsx(se,{onClick:()=>alert("Multiple choice runner not implemented. Use Flashcards or implement MCQ runner."),children:"Start"})})]},g.id))}):l.jsx("p",{className:"text-muted-foreground",children:"No quizzes available for this lecture."})})]})]}):l.jsx(we,{children:l.jsxs(_e,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its quizzes."}),l.jsx("div",{className:"mt-4",children:l.jsx(Qn,{to:"/admin/years",children:l.jsx(se,{children:"Back to Years"})})})]})})}var zx="Progress",Bx=100,[az,zz]=ki(zx),[lz,cz]=az(zx),Zj=_.forwardRef((n,e)=>{const{__scopeProgress:t,value:r=null,max:s,getValueLabel:a=uz,...c}=n;(s||s===0)&&!Gb(s)&&console.error(dz(`${s}`,"Progress"));const u=Gb(s)?s:Bx;r!==null&&!Qb(r,u)&&console.error(hz(`${r}`,"Progress"));const h=Qb(r,u)?r:null,m=Zf(h)?a(h,u):void 0;return l.jsx(lz,{scope:t,value:h,max:u,children:l.jsx(We.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":Zf(h)?h:void 0,"aria-valuetext":m,role:"progressbar","data-state":nA(h,u),"data-value":h??void 0,"data-max":u,...c,ref:e})})});Zj.displayName=zx;var eA="ProgressIndicator",tA=_.forwardRef((n,e)=>{const{__scopeProgress:t,...r}=n,s=cz(eA,t);return l.jsx(We.div,{"data-state":nA(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});tA.displayName=eA;function uz(n,e){return`${Math.round(n/e*100)}%`}function nA(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function Zf(n){return typeof n=="number"}function Gb(n){return Zf(n)&&!isNaN(n)&&n>0}function Qb(n,e){return Zf(n)&&!isNaN(n)&&n<=e&&n>=0}function dz(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Bx}\`.`}function hz(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Bx} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var rA=Zj,fz=tA;const sA=_.forwardRef(({className:n,value:e,...t},r)=>l.jsx(rA,{ref:r,className:et("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:l.jsx(fz,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));sA.displayName=rA.displayName;function mz(){const[n]=ad(),e=n.get("lecture"),t=n.get("quiz"),{items:r,loading:s,error:a}=Jj(e),c=r.find(z=>z.id===t),[u,h]=_.useState(0),[m,g]=_.useState([]);if(s)return l.jsx("div",{children:"Loading..."});if(a)return l.jsx("div",{className:"text-destructive",children:a});if(!c)return l.jsx(we,{children:l.jsxs(_e,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Quiz not found"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a quiz to start flashcards."}),l.jsx("div",{className:"mt-4",children:l.jsx(Qn,{to:"/admin/quizzes",children:l.jsx(se,{children:"Back"})})})]})});const v=c.questions||[],y=v.reduce((z,M)=>z+(M.weight&&Number(M.weight)||1),0),b=v[u],S=b&&(b.weight||1)||1,E=m[u]??0,[x,A]=_.useState(!1),[I,C]=_.useState([]),[O,V]=_.useState(null);_.useEffect(()=>{A(!1),C([]),V(null)},[u]);const B=(z,M)=>{const oe=[...m];oe[z]=M,g(oe)},P=m.reduce((z,M,oe)=>z+(M||0),0),R=Math.round(P/y*100),D=z=>{if(!z)return[{type:"text",value:""}];const M=[],oe=/\[\[(.+?)\]\]/g;let H=0,J;for(;(J=oe.exec(z))!==null;)J.index>H&&M.push({type:"text",value:z.slice(H,J.index)}),M.push({type:"blank",value:J[1]}),H=oe.lastIndex;return H<z.length&&M.push({type:"text",value:z.slice(H)}),M},k=()=>{const z=(b==null?void 0:b.question)||"",oe=D(z).filter(H=>H.type==="blank");oe.length>0?C(oe.map(()=>"")):C([""]),V(null),A(!0)},$=()=>{const z=(b==null?void 0:b.question)||"",oe=D(z).filter(q=>q.type==="blank").map(q=>q.value);let H=[];oe.length>0?H=oe:b&&Array.isArray(b.options)&&typeof b.correctAnswer=="number"?H=[b.options[b.correctAnswer]||""]:b&&(b.answer||b.correct)&&(H=[String(b.answer||b.correct)]);const Y=I.map((q,Q)=>{const Z=(H[Q]??H[0]??"").toString().trim().toLowerCase();return q.toString().trim().toLowerCase()===Z&&Z!==""}).every(Boolean);V(Y?"Correct":"Incorrect"),Y&&B(u,S)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Flashcards: ",c.title]}),l.jsx("p",{className:"text-muted-foreground",children:"Fill marks per question. Total progress shows weighted score."})]}),l.jsx("div",{children:l.jsx(Qn,{to:"/admin/quizzes",children:l.jsx(se,{variant:"ghost",children:"Back"})})})]}),l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsx(Xe,{children:"Progress"})}),l.jsxs(_e,{children:[l.jsxs("div",{className:"mb-2 text-sm",children:["Total: ",y," points â€” Current: ",P," points"]}),l.jsx(sA,{value:R}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[R,"%"]})]})]}),l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsxs(Xe,{children:["Question ",u+1," / ",v.length]})}),l.jsx(_e,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"font-medium",children:x?l.jsxs("div",{className:"space-y-2",children:[(()=>{const z=D(b.question||"");let M=0;return l.jsxs("div",{children:[z.map((oe,H)=>{if(oe.type==="text")return l.jsx("span",{children:oe.value},H);const J=M++;return l.jsx("input",{value:I[J]??"",onChange:Y=>C(q=>{const Q=[...q];return Q[J]=Y.target.value,Q}),placeholder:"Fill the blank",className:"border-b-2 border-gray-300 px-1 mx-1"},H)}),z.length===1&&z[0].type==="text"&&l.jsx("div",{children:l.jsx("input",{value:I[0]??"",onChange:oe=>C(H=>{const J=[...H];return J[0]=oe.target.value,J}),placeholder:"Answer",className:"border-b-2 border-gray-300 px-1"})})]})})(),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsx(se,{onClick:$,children:"Check"}),l.jsx(se,{variant:"outline",onClick:()=>{A(!1),V(null)},children:"Cancel"}),O&&l.jsx("div",{className:"ml-2 text-sm",children:O})]})]}):l.jsx("span",{role:"button",tabIndex:0,onClick:k,onKeyDown:z=>{z.key==="Enter"&&k()},children:b.question})}),b.imageUrl&&l.jsx("img",{src:b.imageUrl,alt:"question",className:"w-full max-w-md object-contain"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Weight: ",S]}),l.jsxs("label",{className:"text-sm",children:["Mark (0 - ",S,")"]}),l.jsx("input",{type:"number",min:0,max:S,value:E,onChange:z=>B(u,Math.max(0,Math.min(S,Number(z.target.value)||0))),className:"border rounded px-2 py-1 w-24"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(se,{disabled:u===0,onClick:()=>h(z=>Math.max(0,z-1)),children:"Previous"}),l.jsx(se,{disabled:u===v.length-1,onClick:()=>h(z=>Math.min(v.length-1,z+1)),children:"Next"}),l.jsx(se,{variant:"outline",onClick:()=>{g([]),h(0)},children:"Reset"})]}),l.jsx("div",{className:"mt-4",children:l.jsx(se,{onClick:()=>alert(`Final score: ${P}/${y} (${R}%)`),children:"Finish"})})]})})]})]})}function pz(){return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),l.jsx("p",{className:"text-muted-foreground",children:"Configure application settings and preferences"})]}),l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx($1,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Application Settings"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"This section will provide configuration options for the admin panel."}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Features: User management, system configuration, backup settings, security options."})]})})]})}function gz(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,a]=_.useState(null);return _.useEffect(()=>{const m=Rr(it(Ue,"maps")),g=Xo(m,v=>{const y=[];v.forEach(b=>{var E,x;const S=b.data();y.push({id:b.id,name:S.name||"",location:S.location||"",description:S.description||S.desc||"",type:S.type||S.mapType||"",video_url:S.video_url||S.videoUrl||"",createdAt:((x=(E=S.createdAt)==null?void 0:E.toDate)==null?void 0:x.call(E))||void 0})}),e(y),r(!1)},v=>{console.error("Failed to load maps:",v),a("Failed to load maps"),r(!1)});return()=>g()},[]),{maps:n,loading:t,error:s,createMap:async m=>{const g={...m,createdAt:new Date};g.type&&!g.mapType&&(g.mapType=g.type),g.mapType&&!g.type&&(g.type=g.mapType),["name","location","description","video_url","type","mapType"].forEach(v=>{typeof g[v]=="string"&&(g[v]=g[v].trim())}),await jn(it(Ue,"maps"),g)},updateMap:async(m,g)=>{const v={...g};v.type&&!v.mapType&&(v.mapType=v.type),v.mapType&&!v.type&&(v.type=v.mapType),["name","location","description","video_url","type","mapType"].forEach(y=>{typeof v[y]=="string"&&(v[y]=v[y].trim())}),await dn(jt(Ue,"maps",m),v)},deleteMap:async m=>{await jr(jt(Ue,"maps",m))}}}function vz(){const{maps:n,loading:e,error:t,createMap:r,updateMap:s,deleteMap:a}=gz(),[c,u]=_.useState({name:"",location:"",description:"",video_url:"",type:""}),[h,m]=_.useState(!1),[g,v]=_.useState(null),y=()=>u({name:"",location:"",description:"",video_url:"",type:""}),b=async S=>{if(S.preventDefault(),!!c.name.trim()){m(!0);try{g?await s(g,c):await r(c),y(),v(null)}catch(E){console.error("Error saving map:",E),alert("Failed to save map")}finally{m(!1)}}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Mu,{className:"h-6 w-6 text-blue-600"}),l.jsx("h1",{className:"text-3xl font-bold",children:"Maps"})]}),l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsx(Xe,{children:"Add Map"})}),l.jsx(_e,{children:l.jsxs("form",{onSubmit:b,className:"grid md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{children:"Name"}),l.jsx(Ie,{value:c.name,onChange:S=>u(E=>({...E,name:S.target.value})),placeholder:"Map name",required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{children:"Location"}),l.jsx(Ie,{value:c.location,onChange:S=>u(E=>({...E,location:S.target.value})),placeholder:"Location"})]}),l.jsxs("div",{className:"space-y-2 md:col-span-3",children:[l.jsx(Re,{children:"Description"}),l.jsx("textarea",{value:c.description,onChange:S=>u(E=>({...E,description:S.target.value})),placeholder:"Short description",className:"w-full border rounded px-3 py-2",rows:3})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{children:"Type"}),l.jsxs("select",{className:"w-full border rounded px-3 py-2",value:c.type,onChange:S=>u(E=>({...E,type:S.target.value})),children:[l.jsx("option",{value:"",children:"Select type"}),l.jsx("option",{value:"Ù‚Ø§Ø¹Ø© Ø¯Ø±Ø§Ø³ÙŠØ©",children:"Ù‚Ø§Ø¹Ø© Ø¯Ø±Ø§Ø³ÙŠØ©"}),l.jsx("option",{value:"Ù„Ø§Ø¨Ø§Øª",children:"Ù„Ø§Ø¨Ø§Øª"}),l.jsx("option",{value:"Ù…Ø¯Ø±Ø¬",children:"Ù…Ø¯Ø±Ø¬"}),l.jsx("option",{value:"Ù‚Ø§Ø¹Ø§Øª Ø§Ù…ØªØ­Ø§Ù†Ø§Øª",children:"Ù‚Ø§Ø¹Ø§Øª Ø§Ù…ØªØ­Ø§Ù†Ø§Øª"}),l.jsx("option",{value:"Ù…Ø·Ø¹Ù…",children:"Ù…Ø·Ø¹Ù…"}),l.jsx("option",{value:"Ù…ØµÙ„Ù‰",children:"Ù…ØµÙ„Ù‰"}),l.jsx("option",{value:"Ø£Ø®Ø±Ù‰",children:"Ø£Ø®Ø±Ù‰"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{children:"Video URL"}),l.jsx(Ie,{value:c.video_url,onChange:S=>u(E=>({...E,video_url:S.target.value})),placeholder:"https://..."})]}),l.jsx("div",{className:"md:col-span-3 flex justify-end space-x-2",children:g?l.jsxs(l.Fragment,{children:[l.jsx(se,{type:"button",variant:"outline",onClick:()=>{v(null),y()},children:"Cancel"}),l.jsxs(se,{type:"submit",disabled:h,children:[l.jsx(Xt,{className:"h-4 w-4 mr-2"}),h?"Saving...":"Save"]})]}):l.jsxs(se,{type:"submit",disabled:h,children:[l.jsx(Xt,{className:"h-4 w-4 mr-2"}),h?"Adding...":"Add"]})})]})})]}),l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsxs(Xe,{children:["All Maps (",n.length,")"]})}),l.jsx(_e,{children:e?l.jsx("div",{children:"Loading..."}):t?l.jsx("div",{className:"text-destructive",children:t}):n.length===0?l.jsx("div",{className:"text-muted-foreground",children:"No maps yet."}):l.jsx("div",{className:"grid gap-3",children:n.map(S=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-medium truncate",children:S.name}),l.jsx("div",{className:"text-xs text-muted-foreground truncate",children:S.location}),S.type&&l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",l.jsx("span",{className:"font-medium",children:S.type})]}),S.description&&l.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:S.description}),S.video_url&&l.jsx("a",{className:"text-xs text-blue-600 hover:underline",href:S.video_url,target:"_blank",rel:"noreferrer",children:S.video_url})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{v(S.id),u({name:S.name||"",location:S.location||"",description:S.description||"",video_url:S.video_url||"",type:S.type||""}),window.scrollTo({top:0,behavior:"smooth"})},className:"",children:"Edit"}),l.jsx(se,{variant:"ghost",size:"icon",onClick:()=>a(S.id),className:"text-destructive",children:l.jsx(Ln,{className:"h-4 w-4"})})]})]},S.id))})})]})]})}function yz({research:n,onClose:e,onSave:t}){const[r,s]=_.useState({projectTitle:"",abstract:"",fieldOfResearch:[],contactPerson:[],authorshipPosition:[],projectDuration:"",requiredSkills:[],supervisor:""}),[a,c]=_.useState(""),[u,h]=_.useState("");_.useEffect(()=>{n&&s({projectTitle:n.projectTitle||"",abstract:n.abstract||"",fieldOfResearch:n.fieldOfResearch||[],contactPerson:n.contactPerson||[],authorshipPosition:n.authorshipPosition||[],projectDuration:n.projectDuration||"",requiredSkills:n.requiredSkills||[],supervisor:n.supervisor||""})},[n]);const m=()=>{const S=a.trim();S&&(r.fieldOfResearch.includes(S)||s(E=>({...E,fieldOfResearch:[...E.fieldOfResearch,S]})),c(""))},g=()=>{const S=u.trim();S&&(r.requiredSkills.includes(S)||s(E=>({...E,requiredSkills:[...E.requiredSkills,S]})),h(""))},v=S=>s(E=>({...E,fieldOfResearch:E.fieldOfResearch.filter(x=>x!==S)})),y=S=>s(E=>({...E,requiredSkills:E.requiredSkills.filter(x=>x!==S)})),b=S=>{S.preventDefault();const E={projectTitle:r.projectTitle,abstract:r.abstract,fieldOfResearch:r.fieldOfResearch,contactPerson:r.contactPerson,authorshipPosition:r.authorshipPosition,projectDuration:r.projectDuration,requiredSkills:r.requiredSkills,supervisor:r.supervisor,updatedAt:new Date,...n?{}:{createdAt:new Date}};t(E)};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(se,{variant:"ghost",onClick:e,children:[l.jsx(Ys,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Research":"Create Research"}),l.jsx("p",{className:"text-muted-foreground",children:"Add or update research project details"})]})]})}),l.jsx("form",{onSubmit:b,className:"space-y-6",children:l.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Project Details"}),l.jsx(At,{children:"Title and abstract"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"title",children:"Project Title *"}),l.jsx(Ie,{id:"title",placeholder:"Enter project title...",value:r.projectTitle,onChange:S=>s(E=>({...E,projectTitle:S.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{htmlFor:"abstract",children:"Abstract"}),l.jsx(Ri,{id:"abstract",placeholder:"Write a brief abstract...",value:r.abstract,onChange:S=>s(E=>({...E,abstract:S.target.value})),rows:8})]})]})]}),l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Fields & Skills"}),l.jsx(At,{children:"Fields of research and required skills"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Re,{children:"Field of Research"}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx(Ie,{placeholder:"Add field e.g., Oncology",value:a,onChange:S=>c(S.target.value),onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),m())}}),l.jsx(se,{type:"button",onClick:m,variant:"outline",children:"Add"})]}),l.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.fieldOfResearch.map(S=>l.jsxs(nn,{variant:"secondary",className:"flex items-center gap-2",children:[S,l.jsx("button",{type:"button",onClick:()=>v(S),className:"ml-1 hover:text-destructive",children:l.jsx(ic,{className:"h-3 w-3"})})]},S))})]}),l.jsxs("div",{children:[l.jsx(Re,{children:"Required Skills"}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx(Ie,{placeholder:"Add skill e.g., Data analysis",value:u,onChange:S=>h(S.target.value),onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),g())}}),l.jsx(se,{type:"button",onClick:g,variant:"outline",children:"Add"})]}),l.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.requiredSkills.map(S=>l.jsxs(nn,{variant:"secondary",className:"flex items-center gap-2",children:[S,l.jsx("button",{type:"button",onClick:()=>y(S),className:"ml-1 hover:text-destructive",children:l.jsx(ic,{className:"h-3 w-3"})})]},S))})]})]})]})]}),l.jsx("div",{className:"space-y-6",children:l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Meta"}),l.jsx(At,{children:"Contact, supervisor and duration"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{children:"Contact Person(s)"}),l.jsx(Ie,{placeholder:"Comma separated names",value:r.contactPerson.join(", "),onChange:S=>s(E=>({...E,contactPerson:S.target.value.split(",").map(x=>x.trim()).filter(Boolean)}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{children:"Authorship Positions"}),l.jsx(Ie,{placeholder:"Comma separated positions",value:r.authorshipPosition.join(", "),onChange:S=>s(E=>({...E,authorshipPosition:S.target.value.split(",").map(x=>x.trim()).filter(Boolean)}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{children:"Supervisor"}),l.jsx(Ie,{placeholder:"Supervisor name",value:r.supervisor,onChange:S=>s(E=>({...E,supervisor:S.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Re,{children:"Project Duration"}),l.jsx(Ie,{placeholder:"e.g., 6 months",value:r.projectDuration,onChange:S=>s(E=>({...E,projectDuration:S.target.value}))})]}),l.jsxs("div",{className:"flex justify-end",children:[l.jsx(se,{variant:"ghost",onClick:e,className:"mr-2",children:"Cancel"}),l.jsx(se,{type:"submit",children:"Save"})]})]})]})})]})})]})}const xz=[{id:"r1",projectTitle:"Impact of Early Clinical Exposure on Medical Students",abstract:"A study investigating how early clinical exposure affects students' clinical reasoning and confidence.",fieldOfResearch:["Medical Education","Clinical Skills"],contactPerson:["Dr. Sarah Johnson"],authorshipPosition:["Lead","Co-author"],projectDuration:"6 months",requiredSkills:["Clinical observation","Data analysis"],supervisor:"Prof. Michael Chen",createdAt:new Date,updatedAt:new Date}];function wz(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,a]=_.useState(null),[c,u]=_.useState(!1);_.useEffect(()=>{const v=async()=>{try{const b=Rr(it(Ue,"research"));await Ot(b);const S=Rr(it(Ue,"research"),wd("createdAt","desc"));return Xo(S,x=>{const A=[];x.forEach(I=>{var O,V;const C=I.data();A.push({id:I.id,projectTitle:C.projectTitle||C.title||"",abstract:C.abstract||"",fieldOfResearch:C.fieldOfResearch||[],contactPerson:C.contactPerson||[],authorshipPosition:C.authorshipPosition||[],projectDuration:C.projectDuration||"",requiredSkills:C.requiredSkills||[],supervisor:C.supervisor||"",createdAt:(O=C.createdAt)!=null&&O.toDate?C.createdAt.toDate():C.createdAt||new Date,updatedAt:(V=C.updatedAt)!=null&&V.toDate?C.updatedAt.toDate():C.updatedAt||new Date})}),e(A),r(!1)},x=>{console.error("Error in research listener:",x),y()})}catch(b){return console.error("Firebase connection failed for research:",b),y(),null}},y=()=>{u(!0),e(xz),a(null),r(!1)};v()},[]);const h=async v=>{if(c){const y={id:`offline_${Date.now()}`,...v};e(b=>[y,...b]);return}try{await jn(it(Ue,"research"),v)}catch(y){console.error("Error creating research:",y),u(!0),await h(v)}};return{research:n,loading:t,error:s,createResearch:h,updateResearch:async(v,y)=>{if(c||v.startsWith("offline_")||v.startsWith("mock_")){e(b=>b.map(S=>S.id===v?{...S,...y}:S));return}try{await dn(jt(Ue,"research",v),y)}catch(b){console.error("Error updating research:",b),e(S=>S.map(E=>E.id===v?{...E,...y}:E))}},deleteResearch:async v=>{if(c||v.startsWith("offline_")||v.startsWith("mock_")){e(y=>y.filter(b=>b.id!==v));return}try{await jr(jt(Ue,"research",v))}catch(y){console.error("Error deleting research:",y),e(b=>b.filter(S=>S.id!==v))}},isOfflineMode:c}}function _z(){const[n,e]=_.useState(""),[t,r]=_.useState(null),[s,a]=_.useState(!1),{research:c,loading:u,error:h,createResearch:m,updateResearch:g,deleteResearch:v}=wz(),y=c.filter(x=>x.projectTitle.toLowerCase().includes(n.toLowerCase())),b=()=>{r(null),a(!0)},S=x=>{r(x),a(!0)},E=async x=>{window.confirm("Are you sure you want to delete this research entry?")&&await v(x)};return s?l.jsx(yz,{research:t,onClose:()=>{a(!1),r(null)},onSave:async x=>{try{t?await g(t.id,x):await m(x),a(!1),r(null)}catch(A){console.error(A),alert("Failed to save. Please try again.")}}}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Research"}),l.jsx("p",{className:"text-muted-foreground",children:"Manage research projects and student/faculty submissions"})]}),l.jsxs(se,{onClick:b,className:"flex items-center gap-2",children:[l.jsx(Xt,{className:"h-4 w-4"}),"Create Research"]})]}),l.jsx(we,{children:l.jsx(_e,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(yc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Ie,{placeholder:"Search by project title...",value:n,onChange:x=>e(x.target.value),className:"pl-10"})]})})}),u&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(Oo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading research entries..."})]})}),h&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading research"}),l.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&l.jsx("div",{className:"space-y-4",children:y.map(x=>l.jsx(we,{className:"hover:shadow-md transition-shadow",children:l.jsx(_e,{className:"pt-6",children:l.jsx("div",{className:"flex gap-4",children:l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:x.projectTitle}),l.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mt-2",children:x.abstract}),l.jsx("div",{className:"flex gap-2 flex-wrap mt-3 text-xs text-muted-foreground",children:(x.fieldOfResearch||[]).map(A=>l.jsx("span",{className:"bg-muted px-2 py-1 rounded text-xs",children:A},A))})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx(se,{variant:"ghost",onClick:()=>S(x),children:l.jsx(id,{className:"h-4 w-4"})}),l.jsx(se,{variant:"ghost",onClick:()=>E(x.id),children:l.jsx(Ln,{className:"h-4 w-4"})})]})]})})})})},x.id))})]})}const Ez=()=>{const n=Oi();return _.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),l.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),l.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},bz=new JD;function Sz({children:n}){const{currentUser:e}=Cx();return e?l.jsx(l.Fragment,{children:n}):l.jsx(lf,{to:"/login"})}const Yb=()=>l.jsx(K6,{children:l.jsx(eO,{client:bz,children:l.jsxs(ID,{children:[l.jsx(fk,{}),l.jsx(qk,{}),l.jsx(eL,{basename:"/builder-stellar-world/",children:l.jsx(q6,{children:l.jsxs(WO,{children:[l.jsx(Bt,{path:"/login",element:l.jsx(s5,{})}),l.jsxs(Bt,{path:"/admin",element:l.jsx(Sz,{children:l.jsx(Z6,{})}),children:[l.jsx(Bt,{index:!0,element:l.jsx(l5,{})}),l.jsx(Bt,{path:"news",element:l.jsx(p5,{})}),l.jsx(Bt,{path:"years",element:l.jsx(T$,{})}),l.jsx(Bt,{path:"years/:id",element:l.jsx(C$,{})}),l.jsx(Bt,{path:"subjects/:id",element:l.jsx(O$,{})}),l.jsx(Bt,{path:"resources",element:l.jsx(Kb,{})}),l.jsx(Bt,{path:"resources/*",element:l.jsx(Kb,{})}),l.jsx(Bt,{path:"VIDEOS",element:l.jsx(lf,{to:"/admin/years",replace:!0})}),l.jsx(Bt,{path:"VIDEOS/*",element:l.jsx(lf,{to:"/admin/years",replace:!0})}),l.jsx(Bt,{path:"professors",element:l.jsx(j$,{})}),l.jsx(Bt,{path:"users",element:l.jsx(R$,{})}),l.jsx(Bt,{path:"store",element:l.jsx(Z$,{})}),l.jsx(Bt,{path:"orders",element:l.jsx(tz,{})}),l.jsx(Bt,{path:"videos",element:l.jsx(sz,{})}),l.jsx(Bt,{path:"files",element:l.jsx(iz,{})}),l.jsx(Bt,{path:"quizzes",element:l.jsx(oz,{})}),l.jsx(Bt,{path:"flashcards",element:l.jsx(mz,{})}),l.jsx(Bt,{path:"research",element:l.jsx(_z,{})}),l.jsx(Bt,{path:"maps",element:l.jsx(vz,{})}),l.jsx(Bt,{path:"settings",element:l.jsx(pz,{})})]}),l.jsx(Bt,{path:"/",element:l.jsx(lf,{to:"/admin"})}),l.jsx(Bt,{path:"*",element:l.jsx(Ez,{})})]})})})]})})}),Nz=document.getElementById("root");if(window.__appRoot)window.__appRoot.render(l.jsx(Yb,{}));else{const n=pk.createRoot(Nz);window.__appRoot=n,n.render(l.jsx(Yb,{}))}
