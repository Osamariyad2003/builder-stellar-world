var a2=Object.defineProperty;var nE=t=>{throw TypeError(t)};var l2=(t,e,n)=>e in t?a2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Mf=(t,e,n)=>l2(t,typeof e!="symbol"?e+"":e,n),My=(t,e,n)=>e.has(t)||nE("Cannot "+n);var Z=(t,e,n)=>(My(t,e,"read from private field"),n?n.call(t):e.get(t)),it=(t,e,n)=>e.has(t)?nE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Me=(t,e,n,r)=>(My(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Nt=(t,e,n)=>(My(t,e,"access private method"),n);var Ff=(t,e,n,r)=>({set _(s){Me(t,e,s,n)},get _(){return Z(t,e,r)}});function c2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const u2="modulepreload",d2=function(t){return"/builder-stellar-world/"+t},rE={},_S=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let c=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=c(n.map(f=>{if(f=d2(f),f in rE)return;rE[f]=!0;const p=f.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":u2,p||(v.as="script"),v.crossOrigin="",v.href=f,h&&v.setAttribute("nonce",h),document.head.appendChild(v),p)return new Promise((x,E)=>{v.addEventListener("load",x),v.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return s.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};function bS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fy={exports:{}},rd={},Vy={exports:{}},vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sE;function h2(){if(sE)return vt;sE=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function v(U){return U===null||typeof U!="object"?null:(U=y&&U[y]||U["@@iterator"],typeof U=="function"?U:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,w={};function b(U,H,le){this.props=U,this.context=H,this.refs=w,this.updater=le||x}b.prototype.isReactComponent={},b.prototype.setState=function(U,H){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,H,"setState")},b.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function A(){}A.prototype=b.prototype;function j(U,H,le){this.props=U,this.context=H,this.refs=w,this.updater=le||x}var T=j.prototype=new A;T.constructor=j,E(T,b.prototype),T.isPureReactComponent=!0;var M=Array.isArray,$=Object.prototype.hasOwnProperty,z={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function I(U,H,le){var ue,ke={},Te=null,_e=null;if(H!=null)for(ue in H.ref!==void 0&&(_e=H.ref),H.key!==void 0&&(Te=""+H.key),H)$.call(H,ue)&&!R.hasOwnProperty(ue)&&(ke[ue]=H[ue]);var Ae=arguments.length-2;if(Ae===1)ke.children=le;else if(1<Ae){for(var He=Array(Ae),Ve=0;Ve<Ae;Ve++)He[Ve]=arguments[Ve+2];ke.children=He}if(U&&U.defaultProps)for(ue in Ae=U.defaultProps,Ae)ke[ue]===void 0&&(ke[ue]=Ae[ue]);return{$$typeof:t,type:U,key:Te,ref:_e,props:ke,_owner:z.current}}function k(U,H){return{$$typeof:t,type:U.type,key:H,ref:U.ref,props:U.props,_owner:U._owner}}function L(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function D(U){var H={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(le){return H[le]})}var O=/\/+/g;function F(U,H){return typeof U=="object"&&U!==null&&U.key!=null?D(""+U.key):H.toString(36)}function ne(U,H,le,ue,ke){var Te=typeof U;(Te==="undefined"||Te==="boolean")&&(U=null);var _e=!1;if(U===null)_e=!0;else switch(Te){case"string":case"number":_e=!0;break;case"object":switch(U.$$typeof){case t:case e:_e=!0}}if(_e)return _e=U,ke=ke(_e),U=ue===""?"."+F(_e,0):ue,M(ke)?(le="",U!=null&&(le=U.replace(O,"$&/")+"/"),ne(ke,H,le,"",function(Ve){return Ve})):ke!=null&&(L(ke)&&(ke=k(ke,le+(!ke.key||_e&&_e.key===ke.key?"":(""+ke.key).replace(O,"$&/")+"/")+U)),H.push(ke)),1;if(_e=0,ue=ue===""?".":ue+":",M(U))for(var Ae=0;Ae<U.length;Ae++){Te=U[Ae];var He=ue+F(Te,Ae);_e+=ne(Te,H,le,He,ke)}else if(He=v(U),typeof He=="function")for(U=He.call(U),Ae=0;!(Te=U.next()).done;)Te=Te.value,He=ue+F(Te,Ae++),_e+=ne(Te,H,le,He,ke);else if(Te==="object")throw H=String(U),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return _e}function oe(U,H,le){if(U==null)return U;var ue=[],ke=0;return ne(U,ue,"","",function(Te){return H.call(le,Te,ke++)}),ue}function Q(U){if(U._status===-1){var H=U._result;H=H(),H.then(function(le){(U._status===0||U._status===-1)&&(U._status=1,U._result=le)},function(le){(U._status===0||U._status===-1)&&(U._status=2,U._result=le)}),U._status===-1&&(U._status=0,U._result=H)}if(U._status===1)return U._result.default;throw U._result}var ee={current:null},q={transition:null},K={ReactCurrentDispatcher:ee,ReactCurrentBatchConfig:q,ReactCurrentOwner:z};function Y(){throw Error("act(...) is not supported in production builds of React.")}return vt.Children={map:oe,forEach:function(U,H,le){oe(U,function(){H.apply(this,arguments)},le)},count:function(U){var H=0;return oe(U,function(){H++}),H},toArray:function(U){return oe(U,function(H){return H})||[]},only:function(U){if(!L(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},vt.Component=b,vt.Fragment=n,vt.Profiler=s,vt.PureComponent=j,vt.StrictMode=r,vt.Suspense=h,vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,vt.act=Y,vt.cloneElement=function(U,H,le){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var ue=E({},U.props),ke=U.key,Te=U.ref,_e=U._owner;if(H!=null){if(H.ref!==void 0&&(Te=H.ref,_e=z.current),H.key!==void 0&&(ke=""+H.key),U.type&&U.type.defaultProps)var Ae=U.type.defaultProps;for(He in H)$.call(H,He)&&!R.hasOwnProperty(He)&&(ue[He]=H[He]===void 0&&Ae!==void 0?Ae[He]:H[He])}var He=arguments.length-2;if(He===1)ue.children=le;else if(1<He){Ae=Array(He);for(var Ve=0;Ve<He;Ve++)Ae[Ve]=arguments[Ve+2];ue.children=Ae}return{$$typeof:t,type:U.type,key:ke,ref:Te,props:ue,_owner:_e}},vt.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},vt.createElement=I,vt.createFactory=function(U){var H=I.bind(null,U);return H.type=U,H},vt.createRef=function(){return{current:null}},vt.forwardRef=function(U){return{$$typeof:u,render:U}},vt.isValidElement=L,vt.lazy=function(U){return{$$typeof:p,_payload:{_status:-1,_result:U},_init:Q}},vt.memo=function(U,H){return{$$typeof:f,type:U,compare:H===void 0?null:H}},vt.startTransition=function(U){var H=q.transition;q.transition={};try{U()}finally{q.transition=H}},vt.unstable_act=Y,vt.useCallback=function(U,H){return ee.current.useCallback(U,H)},vt.useContext=function(U){return ee.current.useContext(U)},vt.useDebugValue=function(){},vt.useDeferredValue=function(U){return ee.current.useDeferredValue(U)},vt.useEffect=function(U,H){return ee.current.useEffect(U,H)},vt.useId=function(){return ee.current.useId()},vt.useImperativeHandle=function(U,H,le){return ee.current.useImperativeHandle(U,H,le)},vt.useInsertionEffect=function(U,H){return ee.current.useInsertionEffect(U,H)},vt.useLayoutEffect=function(U,H){return ee.current.useLayoutEffect(U,H)},vt.useMemo=function(U,H){return ee.current.useMemo(U,H)},vt.useReducer=function(U,H,le){return ee.current.useReducer(U,H,le)},vt.useRef=function(U){return ee.current.useRef(U)},vt.useState=function(U){return ee.current.useState(U)},vt.useSyncExternalStore=function(U,H,le){return ee.current.useSyncExternalStore(U,H,le)},vt.useTransition=function(){return ee.current.useTransition()},vt.version="18.3.1",vt}var iE;function Yx(){return iE||(iE=1,Vy.exports=h2()),Vy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oE;function f2(){if(oE)return rd;oE=1;var t=Yx(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(u,h,f){var p,y={},v=null,x=null;f!==void 0&&(v=""+f),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(x=h.ref);for(p in h)r.call(h,p)&&!a.hasOwnProperty(p)&&(y[p]=h[p]);if(u&&u.defaultProps)for(p in h=u.defaultProps,h)y[p]===void 0&&(y[p]=h[p]);return{$$typeof:e,type:u,key:v,ref:x,props:y,_owner:s.current}}return rd.Fragment=n,rd.jsx=c,rd.jsxs=c,rd}var aE;function m2(){return aE||(aE=1,Fy.exports=f2()),Fy.exports}var o=m2(),_=Yx();const Se=bS(_),ES=c2({__proto__:null,default:Se},[_]),p2=1,g2=1e6;let Uy=0;function y2(){return Uy=(Uy+1)%Number.MAX_SAFE_INTEGER,Uy.toString()}const $y=new Map,lE=t=>{if($y.has(t))return;const e=setTimeout(()=>{$y.delete(t),md({type:"REMOVE_TOAST",toastId:t})},g2);$y.set(t,e)},v2=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,p2)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?lE(n):t.toasts.forEach(r=>{lE(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},am=[];let lm={toasts:[]};function md(t){lm=v2(lm,t),am.forEach(e=>{e(lm)})}function x2({...t}){const e=y2(),n=s=>md({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>md({type:"DISMISS_TOAST",toastId:e});return md({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function w2(){const[t,e]=_.useState(lm);return _.useEffect(()=>(am.push(e),()=>{const n=am.indexOf(e);n>-1&&am.splice(n,1)}),[t]),{...t,toast:x2,dismiss:n=>md({type:"DISMISS_TOAST",toastId:n})}}var zy={exports:{}},Cr={},By={exports:{}},qy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cE;function _2(){return cE||(cE=1,function(t){function e(q,K){var Y=q.length;q.push(K);e:for(;0<Y;){var U=Y-1>>>1,H=q[U];if(0<s(H,K))q[U]=K,q[Y]=H,Y=U;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var K=q[0],Y=q.pop();if(Y!==K){q[0]=Y;e:for(var U=0,H=q.length,le=H>>>1;U<le;){var ue=2*(U+1)-1,ke=q[ue],Te=ue+1,_e=q[Te];if(0>s(ke,Y))Te<H&&0>s(_e,ke)?(q[U]=_e,q[Te]=Y,U=Te):(q[U]=ke,q[ue]=Y,U=ue);else if(Te<H&&0>s(_e,Y))q[U]=_e,q[Te]=Y,U=Te;else break e}}return K}function s(q,K){var Y=q.sortIndex-K.sortIndex;return Y!==0?Y:q.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var h=[],f=[],p=1,y=null,v=3,x=!1,E=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(q){for(var K=n(f);K!==null;){if(K.callback===null)r(f);else if(K.startTime<=q)r(f),K.sortIndex=K.expirationTime,e(h,K);else break;K=n(f)}}function M(q){if(w=!1,T(q),!E)if(n(h)!==null)E=!0,Q($);else{var K=n(f);K!==null&&ee(M,K.startTime-q)}}function $(q,K){E=!1,w&&(w=!1,A(I),I=-1),x=!0;var Y=v;try{for(T(K),y=n(h);y!==null&&(!(y.expirationTime>K)||q&&!D());){var U=y.callback;if(typeof U=="function"){y.callback=null,v=y.priorityLevel;var H=U(y.expirationTime<=K);K=t.unstable_now(),typeof H=="function"?y.callback=H:y===n(h)&&r(h),T(K)}else r(h);y=n(h)}if(y!==null)var le=!0;else{var ue=n(f);ue!==null&&ee(M,ue.startTime-K),le=!1}return le}finally{y=null,v=Y,x=!1}}var z=!1,R=null,I=-1,k=5,L=-1;function D(){return!(t.unstable_now()-L<k)}function O(){if(R!==null){var q=t.unstable_now();L=q;var K=!0;try{K=R(!0,q)}finally{K?F():(z=!1,R=null)}}else z=!1}var F;if(typeof j=="function")F=function(){j(O)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,oe=ne.port2;ne.port1.onmessage=O,F=function(){oe.postMessage(null)}}else F=function(){b(O,0)};function Q(q){R=q,z||(z=!0,F())}function ee(q,K){I=b(function(){q(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){E||x||(E=!0,Q($))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(q){switch(v){case 1:case 2:case 3:var K=3;break;default:K=v}var Y=v;v=K;try{return q()}finally{v=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,K){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Y=v;v=q;try{return K()}finally{v=Y}},t.unstable_scheduleCallback=function(q,K,Y){var U=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?U+Y:U):Y=U,q){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Y+H,q={id:p++,callback:K,priorityLevel:q,startTime:Y,expirationTime:H,sortIndex:-1},Y>U?(q.sortIndex=Y,e(f,q),n(h)===null&&q===n(f)&&(w?(A(I),I=-1):w=!0,ee(M,Y-U))):(q.sortIndex=H,e(h,q),E||x||(E=!0,Q($))),q},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(q){var K=v;return function(){var Y=v;v=K;try{return q.apply(this,arguments)}finally{v=Y}}}}(qy)),qy}var uE;function b2(){return uE||(uE=1,By.exports=_2()),By.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dE;function E2(){if(dE)return Cr;dE=1;var t=Yx(),e=b2();function n(i){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+i,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,l){c(i,l),c(i+"Capture",l)}function c(i,l){for(s[i]=l,i=0;i<l.length;i++)r.add(l[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},y={};function v(i){return h.call(y,i)?!0:h.call(p,i)?!1:f.test(i)?y[i]=!0:(p[i]=!0,!1)}function x(i,l,d,g){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:d!==null?!d.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function E(i,l,d,g){if(l===null||typeof l>"u"||x(i,l,d,g))return!0;if(g)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function w(i,l,d,g,N,C,V){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=N,this.mustUseProperty=d,this.propertyName=i,this.type=l,this.sanitizeURL=C,this.removeEmptyString=V}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){b[i]=new w(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var l=i[0];b[l]=new w(l,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){b[i]=new w(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){b[i]=new w(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){b[i]=new w(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){b[i]=new w(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){b[i]=new w(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){b[i]=new w(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){b[i]=new w(i,5,!1,i.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function j(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var l=i.replace(A,j);b[l]=new w(l,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var l=i.replace(A,j);b[l]=new w(l,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var l=i.replace(A,j);b[l]=new w(l,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){b[i]=new w(i,1,!1,i.toLowerCase(),null,!1,!1)}),b.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){b[i]=new w(i,1,!1,i.toLowerCase(),null,!0,!0)});function T(i,l,d,g){var N=b.hasOwnProperty(l)?b[l]:null;(N!==null?N.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(E(l,d,N,g)&&(d=null),g||N===null?v(l)&&(d===null?i.removeAttribute(l):i.setAttribute(l,""+d)):N.mustUseProperty?i[N.propertyName]=d===null?N.type===3?!1:"":d:(l=N.attributeName,g=N.attributeNamespace,d===null?i.removeAttribute(l):(N=N.type,d=N===3||N===4&&d===!0?"":""+d,g?i.setAttributeNS(g,l,d):i.setAttribute(l,d))))}var M=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),z=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),D=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),ee=Symbol.for("react.offscreen"),q=Symbol.iterator;function K(i){return i===null||typeof i!="object"?null:(i=q&&i[q]||i["@@iterator"],typeof i=="function"?i:null)}var Y=Object.assign,U;function H(i){if(U===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);U=l&&l[1]||""}return`
`+U+i}var le=!1;function ue(i,l){if(!i||le)return"";le=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(ae){var g=ae}Reflect.construct(i,[],l)}else{try{l.call()}catch(ae){g=ae}i.call(l.prototype)}else{try{throw Error()}catch(ae){g=ae}i()}}catch(ae){if(ae&&g&&typeof ae.stack=="string"){for(var N=ae.stack.split(`
`),C=g.stack.split(`
`),V=N.length-1,W=C.length-1;1<=V&&0<=W&&N[V]!==C[W];)W--;for(;1<=V&&0<=W;V--,W--)if(N[V]!==C[W]){if(V!==1||W!==1)do if(V--,W--,0>W||N[V]!==C[W]){var G=`
`+N[V].replace(" at new "," at ");return i.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",i.displayName)),G}while(1<=V&&0<=W);break}}}finally{le=!1,Error.prepareStackTrace=d}return(i=i?i.displayName||i.name:"")?H(i):""}function ke(i){switch(i.tag){case 5:return H(i.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return i=ue(i.type,!1),i;case 11:return i=ue(i.type.render,!1),i;case 1:return i=ue(i.type,!0),i;default:return""}}function Te(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case R:return"Fragment";case z:return"Portal";case k:return"Profiler";case I:return"StrictMode";case F:return"Suspense";case ne:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case D:return(i.displayName||"Context")+".Consumer";case L:return(i._context.displayName||"Context")+".Provider";case O:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case oe:return l=i.displayName||null,l!==null?l:Te(i.type)||"Memo";case Q:l=i._payload,i=i._init;try{return Te(i(l))}catch{}}return null}function _e(i){var l=i.type;switch(i.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=l.render,i=i.displayName||i.name||"",l.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Te(l);case 8:return l===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ae(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function He(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ve(i){var l=He(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,l),g=""+i[l];if(!i.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var N=d.get,C=d.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return N.call(this)},set:function(V){g=""+V,C.call(this,V)}}),Object.defineProperty(i,l,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(V){g=""+V},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function me(i){i._valueTracker||(i._valueTracker=Ve(i))}function Ue(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return i&&(g=He(i)?i.checked?"true":"false":i.value),i=g,i!==d?(l.setValue(i),!0):!1}function ht(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ft(i,l){var d=l.checked;return Y({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??i._wrapperState.initialChecked})}function fe(i,l){var d=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;d=Ae(l.value!=null?l.value:d),i._wrapperState={initialChecked:g,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Ce(i,l){l=l.checked,l!=null&&T(i,"checked",l,!1)}function ct(i,l){Ce(i,l);var d=Ae(l.value),g=l.type;if(d!=null)g==="number"?(d===0&&i.value===""||i.value!=d)&&(i.value=""+d):i.value!==""+d&&(i.value=""+d);else if(g==="submit"||g==="reset"){i.removeAttribute("value");return}l.hasOwnProperty("value")?Mt(i,l.type,d):l.hasOwnProperty("defaultValue")&&Mt(i,l.type,Ae(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(i.defaultChecked=!!l.defaultChecked)}function Ht(i,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+i._wrapperState.initialValue,d||l===i.value||(i.value=l),i.defaultValue=l}d=i.name,d!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,d!==""&&(i.name=d)}function Mt(i,l,d){(l!=="number"||ht(i.ownerDocument)!==i)&&(d==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+d&&(i.defaultValue=""+d))}var vn=Array.isArray;function Or(i,l,d,g){if(i=i.options,l){l={};for(var N=0;N<d.length;N++)l["$"+d[N]]=!0;for(d=0;d<i.length;d++)N=l.hasOwnProperty("$"+i[d].value),i[d].selected!==N&&(i[d].selected=N),N&&g&&(i[d].defaultSelected=!0)}else{for(d=""+Ae(d),l=null,N=0;N<i.length;N++){if(i[N].value===d){i[N].selected=!0,g&&(i[N].defaultSelected=!0);return}l!==null||i[N].disabled||(l=i[N])}l!==null&&(l.selected=!0)}}function wi(i,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return Y({},l,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function or(i,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(n(92));if(vn(d)){if(1<d.length)throw Error(n(93));d=d[0]}l=d}l==null&&(l=""),d=l}i._wrapperState={initialValue:Ae(d)}}function In(i,l){var d=Ae(l.value),g=Ae(l.defaultValue);d!=null&&(d=""+d,d!==i.value&&(i.value=d),l.defaultValue==null&&i.defaultValue!==d&&(i.defaultValue=d)),g!=null&&(i.defaultValue=""+g)}function Ws(i){var l=i.textContent;l===i._wrapperState.initialValue&&l!==""&&l!==null&&(i.value=l)}function Kt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vt(i,l){return i==null||i==="http://www.w3.org/1999/xhtml"?Kt(l):i==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Wn,Hn=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,g,N){MSApp.execUnsafeLocalFunction(function(){return i(l,d,g,N)})}:i}(function(i,l){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=l;else{for(Wn=Wn||document.createElement("div"),Wn.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Wn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;l.firstChild;)i.appendChild(l.firstChild)}});function An(i,l){if(l){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=l;return}}i.textContent=l}var fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qr=["Webkit","ms","Moz","O"];Object.keys(fs).forEach(function(i){Qr.forEach(function(l){l=l+i.charAt(0).toUpperCase()+i.substring(1),fs[l]=fs[i]})});function Hs(i,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||fs.hasOwnProperty(i)&&fs[i]?(""+l).trim():l+"px"}function _i(i,l){i=i.style;for(var d in l)if(l.hasOwnProperty(d)){var g=d.indexOf("--")===0,N=Hs(d,l[d],g);d==="float"&&(d="cssFloat"),g?i.setProperty(d,N):i[d]=N}}var ms=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kn(i,l){if(l){if(ms[i]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function bi(i,l){if(i.indexOf("-")===-1)return typeof l.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tt=null;function _t(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var bt=null,Gt=null,on=null;function Lr(i){if(i=zu(i)){if(typeof bt!="function")throw Error(n(280));var l=i.stateNode;l&&(l=Xh(l),bt(i.stateNode,i.type,l))}}function ar(i){Gt?on?on.push(i):on=[i]:Gt=i}function ie(){if(Gt){var i=Gt,l=on;if(on=Gt=null,Lr(i),l)for(i=0;i<l.length;i++)Lr(l[i])}}function be(i,l){return i(l)}function qe(){}var It=!1;function ot(i,l,d){if(It)return i(l,d);It=!0;try{return be(i,l,d)}finally{It=!1,(Gt!==null||on!==null)&&(qe(),ie())}}function nt(i,l){var d=i.stateNode;if(d===null)return null;var g=Xh(d);if(g===null)return null;d=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(i=i.type,g=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!g;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(n(231,l,typeof d));return d}var Re=!1;if(u)try{var Zt={};Object.defineProperty(Zt,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Zt,Zt),window.removeEventListener("test",Zt,Zt)}catch{Re=!1}function yr(i,l,d,g,N,C,V,W,G){var ae=Array.prototype.slice.call(arguments,3);try{l.apply(d,ae)}catch(ve){this.onError(ve)}}var Ks=!1,Ei=null,vr=!1,ao=null,Al={onError:function(i){Ks=!0,Ei=i}};function Ni(i,l,d,g,N,C,V,W,G){Ks=!1,Ei=null,yr.apply(Al,arguments)}function Sa(i,l,d,g,N,C,V,W,G){if(Ni.apply(this,arguments),Ks){if(Ks){var ae=Ei;Ks=!1,Ei=null}else throw Error(n(198));vr||(vr=!0,ao=ae)}}function Dt(i){var l=i,d=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(d=l.return),i=l.return;while(i)}return l.tag===3?d:null}function Si(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function ps(i){if(Dt(i)!==i)throw Error(n(188))}function Eh(i){var l=i.alternate;if(!l){if(l=Dt(i),l===null)throw Error(n(188));return l!==i?null:i}for(var d=i,g=l;;){var N=d.return;if(N===null)break;var C=N.alternate;if(C===null){if(g=N.return,g!==null){d=g;continue}break}if(N.child===C.child){for(C=N.child;C;){if(C===d)return ps(N),i;if(C===g)return ps(N),l;C=C.sibling}throw Error(n(188))}if(d.return!==g.return)d=N,g=C;else{for(var V=!1,W=N.child;W;){if(W===d){V=!0,d=N,g=C;break}if(W===g){V=!0,g=N,d=C;break}W=W.sibling}if(!V){for(W=C.child;W;){if(W===d){V=!0,d=C,g=N;break}if(W===g){V=!0,g=C,d=N;break}W=W.sibling}if(!V)throw Error(n(189))}}if(d.alternate!==g)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?i:l}function Eu(i){return i=Eh(i),i!==null?kl(i):null}function kl(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var l=kl(i);if(l!==null)return l;i=i.sibling}return null}var Pl=e.unstable_scheduleCallback,Nu=e.unstable_cancelCallback,Nh=e.unstable_shouldYield,hg=e.unstable_requestPaint,qt=e.unstable_now,Sh=e.unstable_getCurrentPriorityLevel,Ca=e.unstable_ImmediatePriority,lo=e.unstable_UserBlockingPriority,Yr=e.unstable_NormalPriority,Su=e.unstable_LowPriority,Ch=e.unstable_IdlePriority,ja=null,Mr=null;function jh(i){if(Mr&&typeof Mr.onCommitFiberRoot=="function")try{Mr.onCommitFiberRoot(ja,i,void 0,(i.current.flags&128)===128)}catch{}}var lr=Math.clz32?Math.clz32:Ih,Cu=Math.log,Th=Math.LN2;function Ih(i){return i>>>=0,i===0?32:31-(Cu(i)/Th|0)|0}var Rl=64,Dl=4194304;function co(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Ta(i,l){var d=i.pendingLanes;if(d===0)return 0;var g=0,N=i.suspendedLanes,C=i.pingedLanes,V=d&268435455;if(V!==0){var W=V&~N;W!==0?g=co(W):(C&=V,C!==0&&(g=co(C)))}else V=d&~N,V!==0?g=co(V):C!==0&&(g=co(C));if(g===0)return 0;if(l!==0&&l!==g&&(l&N)===0&&(N=g&-g,C=l&-l,N>=C||N===16&&(C&4194240)!==0))return l;if((g&4)!==0&&(g|=d&16),l=i.entangledLanes,l!==0)for(i=i.entanglements,l&=g;0<l;)d=31-lr(l),N=1<<d,g|=i[d],l&=~N;return g}function fg(i,l){switch(i){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ci(i,l){for(var d=i.suspendedLanes,g=i.pingedLanes,N=i.expirationTimes,C=i.pendingLanes;0<C;){var V=31-lr(C),W=1<<V,G=N[V];G===-1?((W&d)===0||(W&g)!==0)&&(N[V]=fg(W,l)):G<=l&&(i.expiredLanes|=W),C&=~W}}function Fr(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Ia(){var i=Rl;return Rl<<=1,(Rl&4194240)===0&&(Rl=64),i}function uo(i){for(var l=[],d=0;31>d;d++)l.push(i);return l}function ho(i,l,d){i.pendingLanes|=l,l!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,l=31-lr(l),i[l]=d}function Ut(i,l){var d=i.pendingLanes&~l;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=l,i.mutableReadLanes&=l,i.entangledLanes&=l,l=i.entanglements;var g=i.eventTimes;for(i=i.expirationTimes;0<d;){var N=31-lr(d),C=1<<N;l[N]=0,g[N]=-1,i[N]=-1,d&=~C}}function fo(i,l){var d=i.entangledLanes|=l;for(i=i.entanglements;d;){var g=31-lr(d),N=1<<g;N&l|i[g]&l&&(i[g]|=l),d&=~N}}var Et=0;function mo(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Ah,Ol,kh,Ph,Rh,ju=!1,Gs=[],Vn=null,gs=null,ys=null,po=new Map,Xr=new Map,Qs=[],mg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dh(i,l){switch(i){case"focusin":case"focusout":Vn=null;break;case"dragenter":case"dragleave":gs=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":po.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xr.delete(l.pointerId)}}function xr(i,l,d,g,N,C){return i===null||i.nativeEvent!==C?(i={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:C,targetContainers:[N]},l!==null&&(l=zu(l),l!==null&&Ol(l)),i):(i.eventSystemFlags|=g,l=i.targetContainers,N!==null&&l.indexOf(N)===-1&&l.push(N),i)}function pg(i,l,d,g,N){switch(l){case"focusin":return Vn=xr(Vn,i,l,d,g,N),!0;case"dragenter":return gs=xr(gs,i,l,d,g,N),!0;case"mouseover":return ys=xr(ys,i,l,d,g,N),!0;case"pointerover":var C=N.pointerId;return po.set(C,xr(po.get(C)||null,i,l,d,g,N)),!0;case"gotpointercapture":return C=N.pointerId,Xr.set(C,xr(Xr.get(C)||null,i,l,d,g,N)),!0}return!1}function Oh(i){var l=Da(i.target);if(l!==null){var d=Dt(l);if(d!==null){if(l=d.tag,l===13){if(l=Si(d),l!==null){i.blockedOn=l,Rh(i.priority,function(){kh(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ji(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var d=Ll(i.domEventName,i.eventSystemFlags,l[0],i.nativeEvent);if(d===null){d=i.nativeEvent;var g=new d.constructor(d.type,d);tt=g,d.target.dispatchEvent(g),tt=null}else return l=zu(d),l!==null&&Ol(l),i.blockedOn=d,!1;l.shift()}return!0}function Aa(i,l,d){ji(i)&&d.delete(l)}function Lh(){ju=!1,Vn!==null&&ji(Vn)&&(Vn=null),gs!==null&&ji(gs)&&(gs=null),ys!==null&&ji(ys)&&(ys=null),po.forEach(Aa),Xr.forEach(Aa)}function vs(i,l){i.blockedOn===l&&(i.blockedOn=null,ju||(ju=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Lh)))}function xs(i){function l(N){return vs(N,i)}if(0<Gs.length){vs(Gs[0],i);for(var d=1;d<Gs.length;d++){var g=Gs[d];g.blockedOn===i&&(g.blockedOn=null)}}for(Vn!==null&&vs(Vn,i),gs!==null&&vs(gs,i),ys!==null&&vs(ys,i),po.forEach(l),Xr.forEach(l),d=0;d<Qs.length;d++)g=Qs[d],g.blockedOn===i&&(g.blockedOn=null);for(;0<Qs.length&&(d=Qs[0],d.blockedOn===null);)Oh(d),d.blockedOn===null&&Qs.shift()}var Ti=M.ReactCurrentBatchConfig,go=!0;function en(i,l,d,g){var N=Et,C=Ti.transition;Ti.transition=null;try{Et=1,Tu(i,l,d,g)}finally{Et=N,Ti.transition=C}}function gg(i,l,d,g){var N=Et,C=Ti.transition;Ti.transition=null;try{Et=4,Tu(i,l,d,g)}finally{Et=N,Ti.transition=C}}function Tu(i,l,d,g){if(go){var N=Ll(i,l,d,g);if(N===null)jg(i,l,g,ka,d),Dh(i,g);else if(pg(N,i,l,d,g))g.stopPropagation();else if(Dh(i,g),l&4&&-1<mg.indexOf(i)){for(;N!==null;){var C=zu(N);if(C!==null&&Ah(C),C=Ll(i,l,d,g),C===null&&jg(i,l,g,ka,d),C===N)break;N=C}N!==null&&g.stopPropagation()}else jg(i,l,g,null,d)}}var ka=null;function Ll(i,l,d,g){if(ka=null,i=_t(g),i=Da(i),i!==null)if(l=Dt(i),l===null)i=null;else if(d=l.tag,d===13){if(i=Si(l),i!==null)return i;i=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null);return ka=i,null}function Iu(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sh()){case Ca:return 1;case lo:return 4;case Yr:case Su:return 16;case Ch:return 536870912;default:return 16}default:return 16}}var Vr=null,Ml=null,wr=null;function Au(){if(wr)return wr;var i,l=Ml,d=l.length,g,N="value"in Vr?Vr.value:Vr.textContent,C=N.length;for(i=0;i<d&&l[i]===N[i];i++);var V=d-i;for(g=1;g<=V&&l[d-g]===N[C-g];g++);return wr=N.slice(i,1<g?1-g:void 0)}function Fl(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function Ys(){return!0}function ku(){return!1}function Un(i){function l(d,g,N,C,V){this._reactName=d,this._targetInst=N,this.type=g,this.nativeEvent=C,this.target=V,this.currentTarget=null;for(var W in i)i.hasOwnProperty(W)&&(d=i[W],this[W]=d?d(C):C[W]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Ys:ku,this.isPropagationStopped=ku,this}return Y(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Ys)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Ys)},persist:function(){},isPersistent:Ys}),l}var ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vl=Un(ws),Xs=Y({},ws,{view:0,detail:0}),yg=Un(Xs),Ul,Ii,yo,Pa=Y({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Js,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yo&&(yo&&i.type==="mousemove"?(Ul=i.screenX-yo.screenX,Ii=i.screenY-yo.screenY):Ii=Ul=0,yo=i),Ul)},movementY:function(i){return"movementY"in i?i.movementY:Ii}}),$l=Un(Pa),Pu=Y({},Pa,{dataTransfer:0}),Mh=Un(Pu),zl=Y({},Xs,{relatedTarget:0}),Bl=Un(zl),Fh=Y({},ws,{animationName:0,elapsedTime:0,pseudoElement:0}),Ai=Un(Fh),Vh=Y({},ws,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Uh=Un(Vh),$h=Y({},ws,{data:0}),Ru=Un($h),ql={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bh(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=zh[i])?!!l[i]:!1}function Js(){return Bh}var m=Y({},Xs,{key:function(i){if(i.key){var l=ql[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=Fl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?cr[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Js,charCode:function(i){return i.type==="keypress"?Fl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Fl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),S=Un(m),P=Y({},Pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),B=Un(P),te=Y({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Js}),ce=Un(te),je=Y({},ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ft=Un(je),Nn=Y({},Pa,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),jt=Un(Nn),kn=[9,13,27,32],xn=u&&"CompositionEvent"in window,Jr=null;u&&"documentMode"in document&&(Jr=document.documentMode);var Ur=u&&"TextEvent"in window&&!Jr,Ra=u&&(!xn||Jr&&8<Jr&&11>=Jr),Wl=" ",Y0=!1;function X0(i,l){switch(i){case"keyup":return kn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function J0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Hl=!1;function sR(i,l){switch(i){case"compositionend":return J0(l);case"keypress":return l.which!==32?null:(Y0=!0,Wl);case"textInput":return i=l.data,i===Wl&&Y0?null:i;default:return null}}function iR(i,l){if(Hl)return i==="compositionend"||!xn&&X0(i,l)?(i=Au(),wr=Ml=Vr=null,Hl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Ra&&l.locale!=="ko"?null:l.data;default:return null}}var oR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z0(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!oR[i.type]:l==="textarea"}function e_(i,l,d,g){ar(g),l=Gh(l,"onChange"),0<l.length&&(d=new Vl("onChange","change",null,d,g),i.push({event:d,listeners:l}))}var Du=null,Ou=null;function aR(i){v_(i,0)}function qh(i){var l=Xl(i);if(Ue(l))return i}function lR(i,l){if(i==="change")return l}var t_=!1;if(u){var vg;if(u){var xg="oninput"in document;if(!xg){var n_=document.createElement("div");n_.setAttribute("oninput","return;"),xg=typeof n_.oninput=="function"}vg=xg}else vg=!1;t_=vg&&(!document.documentMode||9<document.documentMode)}function r_(){Du&&(Du.detachEvent("onpropertychange",s_),Ou=Du=null)}function s_(i){if(i.propertyName==="value"&&qh(Ou)){var l=[];e_(l,Ou,i,_t(i)),ot(aR,l)}}function cR(i,l,d){i==="focusin"?(r_(),Du=l,Ou=d,Du.attachEvent("onpropertychange",s_)):i==="focusout"&&r_()}function uR(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return qh(Ou)}function dR(i,l){if(i==="click")return qh(l)}function hR(i,l){if(i==="input"||i==="change")return qh(l)}function fR(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var _s=typeof Object.is=="function"?Object.is:fR;function Lu(i,l){if(_s(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var d=Object.keys(i),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var N=d[g];if(!h.call(l,N)||!_s(i[N],l[N]))return!1}return!0}function i_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function o_(i,l){var d=i_(i);i=0;for(var g;d;){if(d.nodeType===3){if(g=i+d.textContent.length,i<=l&&g>=l)return{node:d,offset:l-i};i=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=i_(d)}}function a_(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?a_(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function l_(){for(var i=window,l=ht();l instanceof i.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)i=l.contentWindow;else break;l=ht(i.document)}return l}function wg(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}function mR(i){var l=l_(),d=i.focusedElem,g=i.selectionRange;if(l!==d&&d&&d.ownerDocument&&a_(d.ownerDocument.documentElement,d)){if(g!==null&&wg(d)){if(l=g.start,i=g.end,i===void 0&&(i=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(i,d.value.length);else if(i=(l=d.ownerDocument||document)&&l.defaultView||window,i.getSelection){i=i.getSelection();var N=d.textContent.length,C=Math.min(g.start,N);g=g.end===void 0?C:Math.min(g.end,N),!i.extend&&C>g&&(N=g,g=C,C=N),N=o_(d,C);var V=o_(d,g);N&&V&&(i.rangeCount!==1||i.anchorNode!==N.node||i.anchorOffset!==N.offset||i.focusNode!==V.node||i.focusOffset!==V.offset)&&(l=l.createRange(),l.setStart(N.node,N.offset),i.removeAllRanges(),C>g?(i.addRange(l),i.extend(V.node,V.offset)):(l.setEnd(V.node,V.offset),i.addRange(l)))}}for(l=[],i=d;i=i.parentNode;)i.nodeType===1&&l.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)i=l[d],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var pR=u&&"documentMode"in document&&11>=document.documentMode,Kl=null,_g=null,Mu=null,bg=!1;function c_(i,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;bg||Kl==null||Kl!==ht(g)||(g=Kl,"selectionStart"in g&&wg(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Mu&&Lu(Mu,g)||(Mu=g,g=Gh(_g,"onSelect"),0<g.length&&(l=new Vl("onSelect","select",null,l,d),i.push({event:l,listeners:g}),l.target=Kl)))}function Wh(i,l){var d={};return d[i.toLowerCase()]=l.toLowerCase(),d["Webkit"+i]="webkit"+l,d["Moz"+i]="moz"+l,d}var Gl={animationend:Wh("Animation","AnimationEnd"),animationiteration:Wh("Animation","AnimationIteration"),animationstart:Wh("Animation","AnimationStart"),transitionend:Wh("Transition","TransitionEnd")},Eg={},u_={};u&&(u_=document.createElement("div").style,"AnimationEvent"in window||(delete Gl.animationend.animation,delete Gl.animationiteration.animation,delete Gl.animationstart.animation),"TransitionEvent"in window||delete Gl.transitionend.transition);function Hh(i){if(Eg[i])return Eg[i];if(!Gl[i])return i;var l=Gl[i],d;for(d in l)if(l.hasOwnProperty(d)&&d in u_)return Eg[i]=l[d];return i}var d_=Hh("animationend"),h_=Hh("animationiteration"),f_=Hh("animationstart"),m_=Hh("transitionend"),p_=new Map,g_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vo(i,l){p_.set(i,l),a(l,[i])}for(var Ng=0;Ng<g_.length;Ng++){var Sg=g_[Ng],gR=Sg.toLowerCase(),yR=Sg[0].toUpperCase()+Sg.slice(1);vo(gR,"on"+yR)}vo(d_,"onAnimationEnd"),vo(h_,"onAnimationIteration"),vo(f_,"onAnimationStart"),vo("dblclick","onDoubleClick"),vo("focusin","onFocus"),vo("focusout","onBlur"),vo(m_,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fu));function y_(i,l,d){var g=i.type||"unknown-event";i.currentTarget=d,Sa(g,l,void 0,i),i.currentTarget=null}function v_(i,l){l=(l&4)!==0;for(var d=0;d<i.length;d++){var g=i[d],N=g.event;g=g.listeners;e:{var C=void 0;if(l)for(var V=g.length-1;0<=V;V--){var W=g[V],G=W.instance,ae=W.currentTarget;if(W=W.listener,G!==C&&N.isPropagationStopped())break e;y_(N,W,ae),C=G}else for(V=0;V<g.length;V++){if(W=g[V],G=W.instance,ae=W.currentTarget,W=W.listener,G!==C&&N.isPropagationStopped())break e;y_(N,W,ae),C=G}}}if(vr)throw i=ao,vr=!1,ao=null,i}function Qt(i,l){var d=l[Rg];d===void 0&&(d=l[Rg]=new Set);var g=i+"__bubble";d.has(g)||(x_(l,i,2,!1),d.add(g))}function Cg(i,l,d){var g=0;l&&(g|=4),x_(d,i,g,l)}var Kh="_reactListening"+Math.random().toString(36).slice(2);function Vu(i){if(!i[Kh]){i[Kh]=!0,r.forEach(function(d){d!=="selectionchange"&&(vR.has(d)||Cg(d,!1,i),Cg(d,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[Kh]||(l[Kh]=!0,Cg("selectionchange",!1,l))}}function x_(i,l,d,g){switch(Iu(l)){case 1:var N=en;break;case 4:N=gg;break;default:N=Tu}d=N.bind(null,l,d,i),N=void 0,!Re||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(N=!0),g?N!==void 0?i.addEventListener(l,d,{capture:!0,passive:N}):i.addEventListener(l,d,!0):N!==void 0?i.addEventListener(l,d,{passive:N}):i.addEventListener(l,d,!1)}function jg(i,l,d,g,N){var C=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var V=g.tag;if(V===3||V===4){var W=g.stateNode.containerInfo;if(W===N||W.nodeType===8&&W.parentNode===N)break;if(V===4)for(V=g.return;V!==null;){var G=V.tag;if((G===3||G===4)&&(G=V.stateNode.containerInfo,G===N||G.nodeType===8&&G.parentNode===N))return;V=V.return}for(;W!==null;){if(V=Da(W),V===null)return;if(G=V.tag,G===5||G===6){g=C=V;continue e}W=W.parentNode}}g=g.return}ot(function(){var ae=C,ve=_t(d),xe=[];e:{var ge=p_.get(i);if(ge!==void 0){var De=Vl,$e=i;switch(i){case"keypress":if(Fl(d)===0)break e;case"keydown":case"keyup":De=S;break;case"focusin":$e="focus",De=Bl;break;case"focusout":$e="blur",De=Bl;break;case"beforeblur":case"afterblur":De=Bl;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=$l;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=Mh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=ce;break;case d_:case h_:case f_:De=Ai;break;case m_:De=Ft;break;case"scroll":De=yg;break;case"wheel":De=jt;break;case"copy":case"cut":case"paste":De=Uh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=B}var ze=(l&4)!==0,gn=!ze&&i==="scroll",re=ze?ge!==null?ge+"Capture":null:ge;ze=[];for(var J=ae,se;J!==null;){se=J;var Ee=se.stateNode;if(se.tag===5&&Ee!==null&&(se=Ee,re!==null&&(Ee=nt(J,re),Ee!=null&&ze.push(Uu(J,Ee,se)))),gn)break;J=J.return}0<ze.length&&(ge=new De(ge,$e,null,d,ve),xe.push({event:ge,listeners:ze}))}}if((l&7)===0){e:{if(ge=i==="mouseover"||i==="pointerover",De=i==="mouseout"||i==="pointerout",ge&&d!==tt&&($e=d.relatedTarget||d.fromElement)&&(Da($e)||$e[ki]))break e;if((De||ge)&&(ge=ve.window===ve?ve:(ge=ve.ownerDocument)?ge.defaultView||ge.parentWindow:window,De?($e=d.relatedTarget||d.toElement,De=ae,$e=$e?Da($e):null,$e!==null&&(gn=Dt($e),$e!==gn||$e.tag!==5&&$e.tag!==6)&&($e=null)):(De=null,$e=ae),De!==$e)){if(ze=$l,Ee="onMouseLeave",re="onMouseEnter",J="mouse",(i==="pointerout"||i==="pointerover")&&(ze=B,Ee="onPointerLeave",re="onPointerEnter",J="pointer"),gn=De==null?ge:Xl(De),se=$e==null?ge:Xl($e),ge=new ze(Ee,J+"leave",De,d,ve),ge.target=gn,ge.relatedTarget=se,Ee=null,Da(ve)===ae&&(ze=new ze(re,J+"enter",$e,d,ve),ze.target=se,ze.relatedTarget=gn,Ee=ze),gn=Ee,De&&$e)t:{for(ze=De,re=$e,J=0,se=ze;se;se=Ql(se))J++;for(se=0,Ee=re;Ee;Ee=Ql(Ee))se++;for(;0<J-se;)ze=Ql(ze),J--;for(;0<se-J;)re=Ql(re),se--;for(;J--;){if(ze===re||re!==null&&ze===re.alternate)break t;ze=Ql(ze),re=Ql(re)}ze=null}else ze=null;De!==null&&w_(xe,ge,De,ze,!1),$e!==null&&gn!==null&&w_(xe,gn,$e,ze,!0)}}e:{if(ge=ae?Xl(ae):window,De=ge.nodeName&&ge.nodeName.toLowerCase(),De==="select"||De==="input"&&ge.type==="file")var We=lR;else if(Z0(ge))if(t_)We=hR;else{We=uR;var Je=cR}else(De=ge.nodeName)&&De.toLowerCase()==="input"&&(ge.type==="checkbox"||ge.type==="radio")&&(We=dR);if(We&&(We=We(i,ae))){e_(xe,We,d,ve);break e}Je&&Je(i,ge,ae),i==="focusout"&&(Je=ge._wrapperState)&&Je.controlled&&ge.type==="number"&&Mt(ge,"number",ge.value)}switch(Je=ae?Xl(ae):window,i){case"focusin":(Z0(Je)||Je.contentEditable==="true")&&(Kl=Je,_g=ae,Mu=null);break;case"focusout":Mu=_g=Kl=null;break;case"mousedown":bg=!0;break;case"contextmenu":case"mouseup":case"dragend":bg=!1,c_(xe,d,ve);break;case"selectionchange":if(pR)break;case"keydown":case"keyup":c_(xe,d,ve)}var Ze;if(xn)e:{switch(i){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else Hl?X0(i,d)&&(at="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(at="onCompositionStart");at&&(Ra&&d.locale!=="ko"&&(Hl||at!=="onCompositionStart"?at==="onCompositionEnd"&&Hl&&(Ze=Au()):(Vr=ve,Ml="value"in Vr?Vr.value:Vr.textContent,Hl=!0)),Je=Gh(ae,at),0<Je.length&&(at=new Ru(at,i,null,d,ve),xe.push({event:at,listeners:Je}),Ze?at.data=Ze:(Ze=J0(d),Ze!==null&&(at.data=Ze)))),(Ze=Ur?sR(i,d):iR(i,d))&&(ae=Gh(ae,"onBeforeInput"),0<ae.length&&(ve=new Ru("onBeforeInput","beforeinput",null,d,ve),xe.push({event:ve,listeners:ae}),ve.data=Ze))}v_(xe,l)})}function Uu(i,l,d){return{instance:i,listener:l,currentTarget:d}}function Gh(i,l){for(var d=l+"Capture",g=[];i!==null;){var N=i,C=N.stateNode;N.tag===5&&C!==null&&(N=C,C=nt(i,d),C!=null&&g.unshift(Uu(i,C,N)),C=nt(i,l),C!=null&&g.push(Uu(i,C,N))),i=i.return}return g}function Ql(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function w_(i,l,d,g,N){for(var C=l._reactName,V=[];d!==null&&d!==g;){var W=d,G=W.alternate,ae=W.stateNode;if(G!==null&&G===g)break;W.tag===5&&ae!==null&&(W=ae,N?(G=nt(d,C),G!=null&&V.unshift(Uu(d,G,W))):N||(G=nt(d,C),G!=null&&V.push(Uu(d,G,W)))),d=d.return}V.length!==0&&i.push({event:l,listeners:V})}var xR=/\r\n?/g,wR=/\u0000|\uFFFD/g;function __(i){return(typeof i=="string"?i:""+i).replace(xR,`
`).replace(wR,"")}function Qh(i,l,d){if(l=__(l),__(i)!==l&&d)throw Error(n(425))}function Yh(){}var Tg=null,Ig=null;function Ag(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var kg=typeof setTimeout=="function"?setTimeout:void 0,_R=typeof clearTimeout=="function"?clearTimeout:void 0,b_=typeof Promise=="function"?Promise:void 0,bR=typeof queueMicrotask=="function"?queueMicrotask:typeof b_<"u"?function(i){return b_.resolve(null).then(i).catch(ER)}:kg;function ER(i){setTimeout(function(){throw i})}function Pg(i,l){var d=l,g=0;do{var N=d.nextSibling;if(i.removeChild(d),N&&N.nodeType===8)if(d=N.data,d==="/$"){if(g===0){i.removeChild(N),xs(l);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=N}while(d);xs(l)}function xo(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return i}function E_(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return i;l--}else d==="/$"&&l++}i=i.previousSibling}return null}var Yl=Math.random().toString(36).slice(2),Zs="__reactFiber$"+Yl,$u="__reactProps$"+Yl,ki="__reactContainer$"+Yl,Rg="__reactEvents$"+Yl,NR="__reactListeners$"+Yl,SR="__reactHandles$"+Yl;function Da(i){var l=i[Zs];if(l)return l;for(var d=i.parentNode;d;){if(l=d[ki]||d[Zs]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(i=E_(i);i!==null;){if(d=i[Zs])return d;i=E_(i)}return l}i=d,d=i.parentNode}return null}function zu(i){return i=i[Zs]||i[ki],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Xl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function Xh(i){return i[$u]||null}var Dg=[],Jl=-1;function wo(i){return{current:i}}function Yt(i){0>Jl||(i.current=Dg[Jl],Dg[Jl]=null,Jl--)}function Wt(i,l){Jl++,Dg[Jl]=i.current,i.current=l}var _o={},Gn=wo(_o),_r=wo(!1),Oa=_o;function Zl(i,l){var d=i.type.contextTypes;if(!d)return _o;var g=i.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var N={},C;for(C in d)N[C]=l[C];return g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=l,i.__reactInternalMemoizedMaskedChildContext=N),N}function br(i){return i=i.childContextTypes,i!=null}function Jh(){Yt(_r),Yt(Gn)}function N_(i,l,d){if(Gn.current!==_o)throw Error(n(168));Wt(Gn,l),Wt(_r,d)}function S_(i,l,d){var g=i.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return d;g=g.getChildContext();for(var N in g)if(!(N in l))throw Error(n(108,_e(i)||"Unknown",N));return Y({},d,g)}function Zh(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||_o,Oa=Gn.current,Wt(Gn,i),Wt(_r,_r.current),!0}function C_(i,l,d){var g=i.stateNode;if(!g)throw Error(n(169));d?(i=S_(i,l,Oa),g.__reactInternalMemoizedMergedChildContext=i,Yt(_r),Yt(Gn),Wt(Gn,i)):Yt(_r),Wt(_r,d)}var Pi=null,ef=!1,Og=!1;function j_(i){Pi===null?Pi=[i]:Pi.push(i)}function CR(i){ef=!0,j_(i)}function bo(){if(!Og&&Pi!==null){Og=!0;var i=0,l=Et;try{var d=Pi;for(Et=1;i<d.length;i++){var g=d[i];do g=g(!0);while(g!==null)}Pi=null,ef=!1}catch(N){throw Pi!==null&&(Pi=Pi.slice(i+1)),Pl(Ca,bo),N}finally{Et=l,Og=!1}}return null}var ec=[],tc=0,tf=null,nf=0,Zr=[],es=0,La=null,Ri=1,Di="";function Ma(i,l){ec[tc++]=nf,ec[tc++]=tf,tf=i,nf=l}function T_(i,l,d){Zr[es++]=Ri,Zr[es++]=Di,Zr[es++]=La,La=i;var g=Ri;i=Di;var N=32-lr(g)-1;g&=~(1<<N),d+=1;var C=32-lr(l)+N;if(30<C){var V=N-N%5;C=(g&(1<<V)-1).toString(32),g>>=V,N-=V,Ri=1<<32-lr(l)+N|d<<N|g,Di=C+i}else Ri=1<<C|d<<N|g,Di=i}function Lg(i){i.return!==null&&(Ma(i,1),T_(i,1,0))}function Mg(i){for(;i===tf;)tf=ec[--tc],ec[tc]=null,nf=ec[--tc],ec[tc]=null;for(;i===La;)La=Zr[--es],Zr[es]=null,Di=Zr[--es],Zr[es]=null,Ri=Zr[--es],Zr[es]=null}var $r=null,zr=null,tn=!1,bs=null;function I_(i,l){var d=ss(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=i,l=i.deletions,l===null?(i.deletions=[d],i.flags|=16):l.push(d)}function A_(i,l){switch(i.tag){case 5:var d=i.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(i.stateNode=l,$r=i,zr=xo(l.firstChild),!0):!1;case 6:return l=i.pendingProps===""||l.nodeType!==3?null:l,l!==null?(i.stateNode=l,$r=i,zr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=La!==null?{id:Ri,overflow:Di}:null,i.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=ss(18,null,null,0),d.stateNode=l,d.return=i,i.child=d,$r=i,zr=null,!0):!1;default:return!1}}function Fg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Vg(i){if(tn){var l=zr;if(l){var d=l;if(!A_(i,l)){if(Fg(i))throw Error(n(418));l=xo(d.nextSibling);var g=$r;l&&A_(i,l)?I_(g,d):(i.flags=i.flags&-4097|2,tn=!1,$r=i)}}else{if(Fg(i))throw Error(n(418));i.flags=i.flags&-4097|2,tn=!1,$r=i}}}function k_(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;$r=i}function rf(i){if(i!==$r)return!1;if(!tn)return k_(i),tn=!0,!1;var l;if((l=i.tag!==3)&&!(l=i.tag!==5)&&(l=i.type,l=l!=="head"&&l!=="body"&&!Ag(i.type,i.memoizedProps)),l&&(l=zr)){if(Fg(i))throw P_(),Error(n(418));for(;l;)I_(i,l),l=xo(l.nextSibling)}if(k_(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,l=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"){if(l===0){zr=xo(i.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}i=i.nextSibling}zr=null}}else zr=$r?xo(i.stateNode.nextSibling):null;return!0}function P_(){for(var i=zr;i;)i=xo(i.nextSibling)}function nc(){zr=$r=null,tn=!1}function Ug(i){bs===null?bs=[i]:bs.push(i)}var jR=M.ReactCurrentBatchConfig;function Bu(i,l,d){if(i=d.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var g=d.stateNode}if(!g)throw Error(n(147,i));var N=g,C=""+i;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===C?l.ref:(l=function(V){var W=N.refs;V===null?delete W[C]:W[C]=V},l._stringRef=C,l)}if(typeof i!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,i))}return i}function sf(i,l){throw i=Object.prototype.toString.call(l),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i))}function R_(i){var l=i._init;return l(i._payload)}function D_(i){function l(re,J){if(i){var se=re.deletions;se===null?(re.deletions=[J],re.flags|=16):se.push(J)}}function d(re,J){if(!i)return null;for(;J!==null;)l(re,J),J=J.sibling;return null}function g(re,J){for(re=new Map;J!==null;)J.key!==null?re.set(J.key,J):re.set(J.index,J),J=J.sibling;return re}function N(re,J){return re=Ao(re,J),re.index=0,re.sibling=null,re}function C(re,J,se){return re.index=se,i?(se=re.alternate,se!==null?(se=se.index,se<J?(re.flags|=2,J):se):(re.flags|=2,J)):(re.flags|=1048576,J)}function V(re){return i&&re.alternate===null&&(re.flags|=2),re}function W(re,J,se,Ee){return J===null||J.tag!==6?(J=ky(se,re.mode,Ee),J.return=re,J):(J=N(J,se),J.return=re,J)}function G(re,J,se,Ee){var We=se.type;return We===R?ve(re,J,se.props.children,Ee,se.key):J!==null&&(J.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===Q&&R_(We)===J.type)?(Ee=N(J,se.props),Ee.ref=Bu(re,J,se),Ee.return=re,Ee):(Ee=If(se.type,se.key,se.props,null,re.mode,Ee),Ee.ref=Bu(re,J,se),Ee.return=re,Ee)}function ae(re,J,se,Ee){return J===null||J.tag!==4||J.stateNode.containerInfo!==se.containerInfo||J.stateNode.implementation!==se.implementation?(J=Py(se,re.mode,Ee),J.return=re,J):(J=N(J,se.children||[]),J.return=re,J)}function ve(re,J,se,Ee,We){return J===null||J.tag!==7?(J=Wa(se,re.mode,Ee,We),J.return=re,J):(J=N(J,se),J.return=re,J)}function xe(re,J,se){if(typeof J=="string"&&J!==""||typeof J=="number")return J=ky(""+J,re.mode,se),J.return=re,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case $:return se=If(J.type,J.key,J.props,null,re.mode,se),se.ref=Bu(re,null,J),se.return=re,se;case z:return J=Py(J,re.mode,se),J.return=re,J;case Q:var Ee=J._init;return xe(re,Ee(J._payload),se)}if(vn(J)||K(J))return J=Wa(J,re.mode,se,null),J.return=re,J;sf(re,J)}return null}function ge(re,J,se,Ee){var We=J!==null?J.key:null;if(typeof se=="string"&&se!==""||typeof se=="number")return We!==null?null:W(re,J,""+se,Ee);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case $:return se.key===We?G(re,J,se,Ee):null;case z:return se.key===We?ae(re,J,se,Ee):null;case Q:return We=se._init,ge(re,J,We(se._payload),Ee)}if(vn(se)||K(se))return We!==null?null:ve(re,J,se,Ee,null);sf(re,se)}return null}function De(re,J,se,Ee,We){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return re=re.get(se)||null,W(J,re,""+Ee,We);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case $:return re=re.get(Ee.key===null?se:Ee.key)||null,G(J,re,Ee,We);case z:return re=re.get(Ee.key===null?se:Ee.key)||null,ae(J,re,Ee,We);case Q:var Je=Ee._init;return De(re,J,se,Je(Ee._payload),We)}if(vn(Ee)||K(Ee))return re=re.get(se)||null,ve(J,re,Ee,We,null);sf(J,Ee)}return null}function $e(re,J,se,Ee){for(var We=null,Je=null,Ze=J,at=J=0,Dn=null;Ze!==null&&at<se.length;at++){Ze.index>at?(Dn=Ze,Ze=null):Dn=Ze.sibling;var Pt=ge(re,Ze,se[at],Ee);if(Pt===null){Ze===null&&(Ze=Dn);break}i&&Ze&&Pt.alternate===null&&l(re,Ze),J=C(Pt,J,at),Je===null?We=Pt:Je.sibling=Pt,Je=Pt,Ze=Dn}if(at===se.length)return d(re,Ze),tn&&Ma(re,at),We;if(Ze===null){for(;at<se.length;at++)Ze=xe(re,se[at],Ee),Ze!==null&&(J=C(Ze,J,at),Je===null?We=Ze:Je.sibling=Ze,Je=Ze);return tn&&Ma(re,at),We}for(Ze=g(re,Ze);at<se.length;at++)Dn=De(Ze,re,at,se[at],Ee),Dn!==null&&(i&&Dn.alternate!==null&&Ze.delete(Dn.key===null?at:Dn.key),J=C(Dn,J,at),Je===null?We=Dn:Je.sibling=Dn,Je=Dn);return i&&Ze.forEach(function(ko){return l(re,ko)}),tn&&Ma(re,at),We}function ze(re,J,se,Ee){var We=K(se);if(typeof We!="function")throw Error(n(150));if(se=We.call(se),se==null)throw Error(n(151));for(var Je=We=null,Ze=J,at=J=0,Dn=null,Pt=se.next();Ze!==null&&!Pt.done;at++,Pt=se.next()){Ze.index>at?(Dn=Ze,Ze=null):Dn=Ze.sibling;var ko=ge(re,Ze,Pt.value,Ee);if(ko===null){Ze===null&&(Ze=Dn);break}i&&Ze&&ko.alternate===null&&l(re,Ze),J=C(ko,J,at),Je===null?We=ko:Je.sibling=ko,Je=ko,Ze=Dn}if(Pt.done)return d(re,Ze),tn&&Ma(re,at),We;if(Ze===null){for(;!Pt.done;at++,Pt=se.next())Pt=xe(re,Pt.value,Ee),Pt!==null&&(J=C(Pt,J,at),Je===null?We=Pt:Je.sibling=Pt,Je=Pt);return tn&&Ma(re,at),We}for(Ze=g(re,Ze);!Pt.done;at++,Pt=se.next())Pt=De(Ze,re,at,Pt.value,Ee),Pt!==null&&(i&&Pt.alternate!==null&&Ze.delete(Pt.key===null?at:Pt.key),J=C(Pt,J,at),Je===null?We=Pt:Je.sibling=Pt,Je=Pt);return i&&Ze.forEach(function(o2){return l(re,o2)}),tn&&Ma(re,at),We}function gn(re,J,se,Ee){if(typeof se=="object"&&se!==null&&se.type===R&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case $:e:{for(var We=se.key,Je=J;Je!==null;){if(Je.key===We){if(We=se.type,We===R){if(Je.tag===7){d(re,Je.sibling),J=N(Je,se.props.children),J.return=re,re=J;break e}}else if(Je.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===Q&&R_(We)===Je.type){d(re,Je.sibling),J=N(Je,se.props),J.ref=Bu(re,Je,se),J.return=re,re=J;break e}d(re,Je);break}else l(re,Je);Je=Je.sibling}se.type===R?(J=Wa(se.props.children,re.mode,Ee,se.key),J.return=re,re=J):(Ee=If(se.type,se.key,se.props,null,re.mode,Ee),Ee.ref=Bu(re,J,se),Ee.return=re,re=Ee)}return V(re);case z:e:{for(Je=se.key;J!==null;){if(J.key===Je)if(J.tag===4&&J.stateNode.containerInfo===se.containerInfo&&J.stateNode.implementation===se.implementation){d(re,J.sibling),J=N(J,se.children||[]),J.return=re,re=J;break e}else{d(re,J);break}else l(re,J);J=J.sibling}J=Py(se,re.mode,Ee),J.return=re,re=J}return V(re);case Q:return Je=se._init,gn(re,J,Je(se._payload),Ee)}if(vn(se))return $e(re,J,se,Ee);if(K(se))return ze(re,J,se,Ee);sf(re,se)}return typeof se=="string"&&se!==""||typeof se=="number"?(se=""+se,J!==null&&J.tag===6?(d(re,J.sibling),J=N(J,se),J.return=re,re=J):(d(re,J),J=ky(se,re.mode,Ee),J.return=re,re=J),V(re)):d(re,J)}return gn}var rc=D_(!0),O_=D_(!1),of=wo(null),af=null,sc=null,$g=null;function zg(){$g=sc=af=null}function Bg(i){var l=of.current;Yt(of),i._currentValue=l}function qg(i,l,d){for(;i!==null;){var g=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),i===d)break;i=i.return}}function ic(i,l){af=i,$g=sc=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&l)!==0&&(Er=!0),i.firstContext=null)}function ts(i){var l=i._currentValue;if($g!==i)if(i={context:i,memoizedValue:l,next:null},sc===null){if(af===null)throw Error(n(308));sc=i,af.dependencies={lanes:0,firstContext:i}}else sc=sc.next=i;return l}var Fa=null;function Wg(i){Fa===null?Fa=[i]:Fa.push(i)}function L_(i,l,d,g){var N=l.interleaved;return N===null?(d.next=d,Wg(l)):(d.next=N.next,N.next=d),l.interleaved=d,Oi(i,g)}function Oi(i,l){i.lanes|=l;var d=i.alternate;for(d!==null&&(d.lanes|=l),d=i,i=i.return;i!==null;)i.childLanes|=l,d=i.alternate,d!==null&&(d.childLanes|=l),d=i,i=i.return;return d.tag===3?d.stateNode:null}var Eo=!1;function Hg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function M_(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Li(i,l){return{eventTime:i,lane:l,tag:0,payload:null,callback:null,next:null}}function No(i,l,d){var g=i.updateQueue;if(g===null)return null;if(g=g.shared,(At&2)!==0){var N=g.pending;return N===null?l.next=l:(l.next=N.next,N.next=l),g.pending=l,Oi(i,d)}return N=g.interleaved,N===null?(l.next=l,Wg(g)):(l.next=N.next,N.next=l),g.interleaved=l,Oi(i,d)}function lf(i,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var g=l.lanes;g&=i.pendingLanes,d|=g,l.lanes=d,fo(i,d)}}function F_(i,l){var d=i.updateQueue,g=i.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var N=null,C=null;if(d=d.firstBaseUpdate,d!==null){do{var V={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};C===null?N=C=V:C=C.next=V,d=d.next}while(d!==null);C===null?N=C=l:C=C.next=l}else N=C=l;d={baseState:g.baseState,firstBaseUpdate:N,lastBaseUpdate:C,shared:g.shared,effects:g.effects},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=l:i.next=l,d.lastBaseUpdate=l}function cf(i,l,d,g){var N=i.updateQueue;Eo=!1;var C=N.firstBaseUpdate,V=N.lastBaseUpdate,W=N.shared.pending;if(W!==null){N.shared.pending=null;var G=W,ae=G.next;G.next=null,V===null?C=ae:V.next=ae,V=G;var ve=i.alternate;ve!==null&&(ve=ve.updateQueue,W=ve.lastBaseUpdate,W!==V&&(W===null?ve.firstBaseUpdate=ae:W.next=ae,ve.lastBaseUpdate=G))}if(C!==null){var xe=N.baseState;V=0,ve=ae=G=null,W=C;do{var ge=W.lane,De=W.eventTime;if((g&ge)===ge){ve!==null&&(ve=ve.next={eventTime:De,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var $e=i,ze=W;switch(ge=l,De=d,ze.tag){case 1:if($e=ze.payload,typeof $e=="function"){xe=$e.call(De,xe,ge);break e}xe=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=ze.payload,ge=typeof $e=="function"?$e.call(De,xe,ge):$e,ge==null)break e;xe=Y({},xe,ge);break e;case 2:Eo=!0}}W.callback!==null&&W.lane!==0&&(i.flags|=64,ge=N.effects,ge===null?N.effects=[W]:ge.push(W))}else De={eventTime:De,lane:ge,tag:W.tag,payload:W.payload,callback:W.callback,next:null},ve===null?(ae=ve=De,G=xe):ve=ve.next=De,V|=ge;if(W=W.next,W===null){if(W=N.shared.pending,W===null)break;ge=W,W=ge.next,ge.next=null,N.lastBaseUpdate=ge,N.shared.pending=null}}while(!0);if(ve===null&&(G=xe),N.baseState=G,N.firstBaseUpdate=ae,N.lastBaseUpdate=ve,l=N.shared.interleaved,l!==null){N=l;do V|=N.lane,N=N.next;while(N!==l)}else C===null&&(N.shared.lanes=0);$a|=V,i.lanes=V,i.memoizedState=xe}}function V_(i,l,d){if(i=l.effects,l.effects=null,i!==null)for(l=0;l<i.length;l++){var g=i[l],N=g.callback;if(N!==null){if(g.callback=null,g=d,typeof N!="function")throw Error(n(191,N));N.call(g)}}}var qu={},ei=wo(qu),Wu=wo(qu),Hu=wo(qu);function Va(i){if(i===qu)throw Error(n(174));return i}function Kg(i,l){switch(Wt(Hu,l),Wt(Wu,i),Wt(ei,qu),i=l.nodeType,i){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Vt(null,"");break;default:i=i===8?l.parentNode:l,l=i.namespaceURI||null,i=i.tagName,l=Vt(l,i)}Yt(ei),Wt(ei,l)}function oc(){Yt(ei),Yt(Wu),Yt(Hu)}function U_(i){Va(Hu.current);var l=Va(ei.current),d=Vt(l,i.type);l!==d&&(Wt(Wu,i),Wt(ei,d))}function Gg(i){Wu.current===i&&(Yt(ei),Yt(Wu))}var an=wo(0);function uf(i){for(var l=i;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Qg=[];function Yg(){for(var i=0;i<Qg.length;i++)Qg[i]._workInProgressVersionPrimary=null;Qg.length=0}var df=M.ReactCurrentDispatcher,Xg=M.ReactCurrentBatchConfig,Ua=0,ln=null,Sn=null,Pn=null,hf=!1,Ku=!1,Gu=0,TR=0;function Qn(){throw Error(n(321))}function Jg(i,l){if(l===null)return!1;for(var d=0;d<l.length&&d<i.length;d++)if(!_s(i[d],l[d]))return!1;return!0}function Zg(i,l,d,g,N,C){if(Ua=C,ln=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,df.current=i===null||i.memoizedState===null?PR:RR,i=d(g,N),Ku){C=0;do{if(Ku=!1,Gu=0,25<=C)throw Error(n(301));C+=1,Pn=Sn=null,l.updateQueue=null,df.current=DR,i=d(g,N)}while(Ku)}if(df.current=pf,l=Sn!==null&&Sn.next!==null,Ua=0,Pn=Sn=ln=null,hf=!1,l)throw Error(n(300));return i}function ey(){var i=Gu!==0;return Gu=0,i}function ti(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?ln.memoizedState=Pn=i:Pn=Pn.next=i,Pn}function ns(){if(Sn===null){var i=ln.alternate;i=i!==null?i.memoizedState:null}else i=Sn.next;var l=Pn===null?ln.memoizedState:Pn.next;if(l!==null)Pn=l,Sn=i;else{if(i===null)throw Error(n(310));Sn=i,i={memoizedState:Sn.memoizedState,baseState:Sn.baseState,baseQueue:Sn.baseQueue,queue:Sn.queue,next:null},Pn===null?ln.memoizedState=Pn=i:Pn=Pn.next=i}return Pn}function Qu(i,l){return typeof l=="function"?l(i):l}function ty(i){var l=ns(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=i;var g=Sn,N=g.baseQueue,C=d.pending;if(C!==null){if(N!==null){var V=N.next;N.next=C.next,C.next=V}g.baseQueue=N=C,d.pending=null}if(N!==null){C=N.next,g=g.baseState;var W=V=null,G=null,ae=C;do{var ve=ae.lane;if((Ua&ve)===ve)G!==null&&(G=G.next={lane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),g=ae.hasEagerState?ae.eagerState:i(g,ae.action);else{var xe={lane:ve,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null};G===null?(W=G=xe,V=g):G=G.next=xe,ln.lanes|=ve,$a|=ve}ae=ae.next}while(ae!==null&&ae!==C);G===null?V=g:G.next=W,_s(g,l.memoizedState)||(Er=!0),l.memoizedState=g,l.baseState=V,l.baseQueue=G,d.lastRenderedState=g}if(i=d.interleaved,i!==null){N=i;do C=N.lane,ln.lanes|=C,$a|=C,N=N.next;while(N!==i)}else N===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function ny(i){var l=ns(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=i;var g=d.dispatch,N=d.pending,C=l.memoizedState;if(N!==null){d.pending=null;var V=N=N.next;do C=i(C,V.action),V=V.next;while(V!==N);_s(C,l.memoizedState)||(Er=!0),l.memoizedState=C,l.baseQueue===null&&(l.baseState=C),d.lastRenderedState=C}return[C,g]}function $_(){}function z_(i,l){var d=ln,g=ns(),N=l(),C=!_s(g.memoizedState,N);if(C&&(g.memoizedState=N,Er=!0),g=g.queue,ry(W_.bind(null,d,g,i),[i]),g.getSnapshot!==l||C||Pn!==null&&Pn.memoizedState.tag&1){if(d.flags|=2048,Yu(9,q_.bind(null,d,g,N,l),void 0,null),Rn===null)throw Error(n(349));(Ua&30)!==0||B_(d,l,N)}return N}function B_(i,l,d){i.flags|=16384,i={getSnapshot:l,value:d},l=ln.updateQueue,l===null?(l={lastEffect:null,stores:null},ln.updateQueue=l,l.stores=[i]):(d=l.stores,d===null?l.stores=[i]:d.push(i))}function q_(i,l,d,g){l.value=d,l.getSnapshot=g,H_(l)&&K_(i)}function W_(i,l,d){return d(function(){H_(l)&&K_(i)})}function H_(i){var l=i.getSnapshot;i=i.value;try{var d=l();return!_s(i,d)}catch{return!0}}function K_(i){var l=Oi(i,1);l!==null&&Cs(l,i,1,-1)}function G_(i){var l=ti();return typeof i=="function"&&(i=i()),l.memoizedState=l.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qu,lastRenderedState:i},l.queue=i,i=i.dispatch=kR.bind(null,ln,i),[l.memoizedState,i]}function Yu(i,l,d,g){return i={tag:i,create:l,destroy:d,deps:g,next:null},l=ln.updateQueue,l===null?(l={lastEffect:null,stores:null},ln.updateQueue=l,l.lastEffect=i.next=i):(d=l.lastEffect,d===null?l.lastEffect=i.next=i:(g=d.next,d.next=i,i.next=g,l.lastEffect=i)),i}function Q_(){return ns().memoizedState}function ff(i,l,d,g){var N=ti();ln.flags|=i,N.memoizedState=Yu(1|l,d,void 0,g===void 0?null:g)}function mf(i,l,d,g){var N=ns();g=g===void 0?null:g;var C=void 0;if(Sn!==null){var V=Sn.memoizedState;if(C=V.destroy,g!==null&&Jg(g,V.deps)){N.memoizedState=Yu(l,d,C,g);return}}ln.flags|=i,N.memoizedState=Yu(1|l,d,C,g)}function Y_(i,l){return ff(8390656,8,i,l)}function ry(i,l){return mf(2048,8,i,l)}function X_(i,l){return mf(4,2,i,l)}function J_(i,l){return mf(4,4,i,l)}function Z_(i,l){if(typeof l=="function")return i=i(),l(i),function(){l(null)};if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function eb(i,l,d){return d=d!=null?d.concat([i]):null,mf(4,4,Z_.bind(null,l,i),d)}function sy(){}function tb(i,l){var d=ns();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&Jg(l,g[1])?g[0]:(d.memoizedState=[i,l],i)}function nb(i,l){var d=ns();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&Jg(l,g[1])?g[0]:(i=i(),d.memoizedState=[i,l],i)}function rb(i,l,d){return(Ua&21)===0?(i.baseState&&(i.baseState=!1,Er=!0),i.memoizedState=d):(_s(d,l)||(d=Ia(),ln.lanes|=d,$a|=d,i.baseState=!0),l)}function IR(i,l){var d=Et;Et=d!==0&&4>d?d:4,i(!0);var g=Xg.transition;Xg.transition={};try{i(!1),l()}finally{Et=d,Xg.transition=g}}function sb(){return ns().memoizedState}function AR(i,l,d){var g=To(i);if(d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},ib(i))ob(l,d);else if(d=L_(i,l,d,g),d!==null){var N=dr();Cs(d,i,g,N),ab(d,l,g)}}function kR(i,l,d){var g=To(i),N={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(ib(i))ob(l,N);else{var C=i.alternate;if(i.lanes===0&&(C===null||C.lanes===0)&&(C=l.lastRenderedReducer,C!==null))try{var V=l.lastRenderedState,W=C(V,d);if(N.hasEagerState=!0,N.eagerState=W,_s(W,V)){var G=l.interleaved;G===null?(N.next=N,Wg(l)):(N.next=G.next,G.next=N),l.interleaved=N;return}}catch{}finally{}d=L_(i,l,N,g),d!==null&&(N=dr(),Cs(d,i,g,N),ab(d,l,g))}}function ib(i){var l=i.alternate;return i===ln||l!==null&&l===ln}function ob(i,l){Ku=hf=!0;var d=i.pending;d===null?l.next=l:(l.next=d.next,d.next=l),i.pending=l}function ab(i,l,d){if((d&4194240)!==0){var g=l.lanes;g&=i.pendingLanes,d|=g,l.lanes=d,fo(i,d)}}var pf={readContext:ts,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useInsertionEffect:Qn,useLayoutEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useMutableSource:Qn,useSyncExternalStore:Qn,useId:Qn,unstable_isNewReconciler:!1},PR={readContext:ts,useCallback:function(i,l){return ti().memoizedState=[i,l===void 0?null:l],i},useContext:ts,useEffect:Y_,useImperativeHandle:function(i,l,d){return d=d!=null?d.concat([i]):null,ff(4194308,4,Z_.bind(null,l,i),d)},useLayoutEffect:function(i,l){return ff(4194308,4,i,l)},useInsertionEffect:function(i,l){return ff(4,2,i,l)},useMemo:function(i,l){var d=ti();return l=l===void 0?null:l,i=i(),d.memoizedState=[i,l],i},useReducer:function(i,l,d){var g=ti();return l=d!==void 0?d(l):l,g.memoizedState=g.baseState=l,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:l},g.queue=i,i=i.dispatch=AR.bind(null,ln,i),[g.memoizedState,i]},useRef:function(i){var l=ti();return i={current:i},l.memoizedState=i},useState:G_,useDebugValue:sy,useDeferredValue:function(i){return ti().memoizedState=i},useTransition:function(){var i=G_(!1),l=i[0];return i=IR.bind(null,i[1]),ti().memoizedState=i,[l,i]},useMutableSource:function(){},useSyncExternalStore:function(i,l,d){var g=ln,N=ti();if(tn){if(d===void 0)throw Error(n(407));d=d()}else{if(d=l(),Rn===null)throw Error(n(349));(Ua&30)!==0||B_(g,l,d)}N.memoizedState=d;var C={value:d,getSnapshot:l};return N.queue=C,Y_(W_.bind(null,g,C,i),[i]),g.flags|=2048,Yu(9,q_.bind(null,g,C,d,l),void 0,null),d},useId:function(){var i=ti(),l=Rn.identifierPrefix;if(tn){var d=Di,g=Ri;d=(g&~(1<<32-lr(g)-1)).toString(32)+d,l=":"+l+"R"+d,d=Gu++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=TR++,l=":"+l+"r"+d.toString(32)+":";return i.memoizedState=l},unstable_isNewReconciler:!1},RR={readContext:ts,useCallback:tb,useContext:ts,useEffect:ry,useImperativeHandle:eb,useInsertionEffect:X_,useLayoutEffect:J_,useMemo:nb,useReducer:ty,useRef:Q_,useState:function(){return ty(Qu)},useDebugValue:sy,useDeferredValue:function(i){var l=ns();return rb(l,Sn.memoizedState,i)},useTransition:function(){var i=ty(Qu)[0],l=ns().memoizedState;return[i,l]},useMutableSource:$_,useSyncExternalStore:z_,useId:sb,unstable_isNewReconciler:!1},DR={readContext:ts,useCallback:tb,useContext:ts,useEffect:ry,useImperativeHandle:eb,useInsertionEffect:X_,useLayoutEffect:J_,useMemo:nb,useReducer:ny,useRef:Q_,useState:function(){return ny(Qu)},useDebugValue:sy,useDeferredValue:function(i){var l=ns();return Sn===null?l.memoizedState=i:rb(l,Sn.memoizedState,i)},useTransition:function(){var i=ny(Qu)[0],l=ns().memoizedState;return[i,l]},useMutableSource:$_,useSyncExternalStore:z_,useId:sb,unstable_isNewReconciler:!1};function Es(i,l){if(i&&i.defaultProps){l=Y({},l),i=i.defaultProps;for(var d in i)l[d]===void 0&&(l[d]=i[d]);return l}return l}function iy(i,l,d,g){l=i.memoizedState,d=d(g,l),d=d==null?l:Y({},l,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var gf={isMounted:function(i){return(i=i._reactInternals)?Dt(i)===i:!1},enqueueSetState:function(i,l,d){i=i._reactInternals;var g=dr(),N=To(i),C=Li(g,N);C.payload=l,d!=null&&(C.callback=d),l=No(i,C,N),l!==null&&(Cs(l,i,N,g),lf(l,i,N))},enqueueReplaceState:function(i,l,d){i=i._reactInternals;var g=dr(),N=To(i),C=Li(g,N);C.tag=1,C.payload=l,d!=null&&(C.callback=d),l=No(i,C,N),l!==null&&(Cs(l,i,N,g),lf(l,i,N))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var d=dr(),g=To(i),N=Li(d,g);N.tag=2,l!=null&&(N.callback=l),l=No(i,N,g),l!==null&&(Cs(l,i,g,d),lf(l,i,g))}};function lb(i,l,d,g,N,C,V){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(g,C,V):l.prototype&&l.prototype.isPureReactComponent?!Lu(d,g)||!Lu(N,C):!0}function cb(i,l,d){var g=!1,N=_o,C=l.contextType;return typeof C=="object"&&C!==null?C=ts(C):(N=br(l)?Oa:Gn.current,g=l.contextTypes,C=(g=g!=null)?Zl(i,N):_o),l=new l(d,C),i.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=gf,i.stateNode=l,l._reactInternals=i,g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=N,i.__reactInternalMemoizedMaskedChildContext=C),l}function ub(i,l,d,g){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==i&&gf.enqueueReplaceState(l,l.state,null)}function oy(i,l,d,g){var N=i.stateNode;N.props=d,N.state=i.memoizedState,N.refs={},Hg(i);var C=l.contextType;typeof C=="object"&&C!==null?N.context=ts(C):(C=br(l)?Oa:Gn.current,N.context=Zl(i,C)),N.state=i.memoizedState,C=l.getDerivedStateFromProps,typeof C=="function"&&(iy(i,l,C,d),N.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(l=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),l!==N.state&&gf.enqueueReplaceState(N,N.state,null),cf(i,d,N,g),N.state=i.memoizedState),typeof N.componentDidMount=="function"&&(i.flags|=4194308)}function ac(i,l){try{var d="",g=l;do d+=ke(g),g=g.return;while(g);var N=d}catch(C){N=`
Error generating stack: `+C.message+`
`+C.stack}return{value:i,source:l,stack:N,digest:null}}function ay(i,l,d){return{value:i,source:null,stack:d??null,digest:l??null}}function ly(i,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var OR=typeof WeakMap=="function"?WeakMap:Map;function db(i,l,d){d=Li(-1,d),d.tag=3,d.payload={element:null};var g=l.value;return d.callback=function(){Ef||(Ef=!0,Ey=g),ly(i,l)},d}function hb(i,l,d){d=Li(-1,d),d.tag=3;var g=i.type.getDerivedStateFromError;if(typeof g=="function"){var N=l.value;d.payload=function(){return g(N)},d.callback=function(){ly(i,l)}}var C=i.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(d.callback=function(){ly(i,l),typeof g!="function"&&(Co===null?Co=new Set([this]):Co.add(this));var V=l.stack;this.componentDidCatch(l.value,{componentStack:V!==null?V:""})}),d}function fb(i,l,d){var g=i.pingCache;if(g===null){g=i.pingCache=new OR;var N=new Set;g.set(l,N)}else N=g.get(l),N===void 0&&(N=new Set,g.set(l,N));N.has(d)||(N.add(d),i=QR.bind(null,i,l,d),l.then(i,i))}function mb(i){do{var l;if((l=i.tag===13)&&(l=i.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return i;i=i.return}while(i!==null);return null}function pb(i,l,d,g,N){return(i.mode&1)===0?(i===l?i.flags|=65536:(i.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=Li(-1,1),l.tag=2,No(d,l,1))),d.lanes|=1),i):(i.flags|=65536,i.lanes=N,i)}var LR=M.ReactCurrentOwner,Er=!1;function ur(i,l,d,g){l.child=i===null?O_(l,null,d,g):rc(l,i.child,d,g)}function gb(i,l,d,g,N){d=d.render;var C=l.ref;return ic(l,N),g=Zg(i,l,d,g,C,N),d=ey(),i!==null&&!Er?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~N,Mi(i,l,N)):(tn&&d&&Lg(l),l.flags|=1,ur(i,l,g,N),l.child)}function yb(i,l,d,g,N){if(i===null){var C=d.type;return typeof C=="function"&&!Ay(C)&&C.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=C,vb(i,l,C,g,N)):(i=If(d.type,null,g,l,l.mode,N),i.ref=l.ref,i.return=l,l.child=i)}if(C=i.child,(i.lanes&N)===0){var V=C.memoizedProps;if(d=d.compare,d=d!==null?d:Lu,d(V,g)&&i.ref===l.ref)return Mi(i,l,N)}return l.flags|=1,i=Ao(C,g),i.ref=l.ref,i.return=l,l.child=i}function vb(i,l,d,g,N){if(i!==null){var C=i.memoizedProps;if(Lu(C,g)&&i.ref===l.ref)if(Er=!1,l.pendingProps=g=C,(i.lanes&N)!==0)(i.flags&131072)!==0&&(Er=!0);else return l.lanes=i.lanes,Mi(i,l,N)}return cy(i,l,d,g,N)}function xb(i,l,d){var g=l.pendingProps,N=g.children,C=i!==null?i.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Wt(cc,Br),Br|=d;else{if((d&1073741824)===0)return i=C!==null?C.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:i,cachePool:null,transitions:null},l.updateQueue=null,Wt(cc,Br),Br|=i,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=C!==null?C.baseLanes:d,Wt(cc,Br),Br|=g}else C!==null?(g=C.baseLanes|d,l.memoizedState=null):g=d,Wt(cc,Br),Br|=g;return ur(i,l,N,d),l.child}function wb(i,l){var d=l.ref;(i===null&&d!==null||i!==null&&i.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function cy(i,l,d,g,N){var C=br(d)?Oa:Gn.current;return C=Zl(l,C),ic(l,N),d=Zg(i,l,d,g,C,N),g=ey(),i!==null&&!Er?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~N,Mi(i,l,N)):(tn&&g&&Lg(l),l.flags|=1,ur(i,l,d,N),l.child)}function _b(i,l,d,g,N){if(br(d)){var C=!0;Zh(l)}else C=!1;if(ic(l,N),l.stateNode===null)vf(i,l),cb(l,d,g),oy(l,d,g,N),g=!0;else if(i===null){var V=l.stateNode,W=l.memoizedProps;V.props=W;var G=V.context,ae=d.contextType;typeof ae=="object"&&ae!==null?ae=ts(ae):(ae=br(d)?Oa:Gn.current,ae=Zl(l,ae));var ve=d.getDerivedStateFromProps,xe=typeof ve=="function"||typeof V.getSnapshotBeforeUpdate=="function";xe||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(W!==g||G!==ae)&&ub(l,V,g,ae),Eo=!1;var ge=l.memoizedState;V.state=ge,cf(l,g,V,N),G=l.memoizedState,W!==g||ge!==G||_r.current||Eo?(typeof ve=="function"&&(iy(l,d,ve,g),G=l.memoizedState),(W=Eo||lb(l,d,W,g,ge,G,ae))?(xe||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(l.flags|=4194308)):(typeof V.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=G),V.props=g,V.state=G,V.context=ae,g=W):(typeof V.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{V=l.stateNode,M_(i,l),W=l.memoizedProps,ae=l.type===l.elementType?W:Es(l.type,W),V.props=ae,xe=l.pendingProps,ge=V.context,G=d.contextType,typeof G=="object"&&G!==null?G=ts(G):(G=br(d)?Oa:Gn.current,G=Zl(l,G));var De=d.getDerivedStateFromProps;(ve=typeof De=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(W!==xe||ge!==G)&&ub(l,V,g,G),Eo=!1,ge=l.memoizedState,V.state=ge,cf(l,g,V,N);var $e=l.memoizedState;W!==xe||ge!==$e||_r.current||Eo?(typeof De=="function"&&(iy(l,d,De,g),$e=l.memoizedState),(ae=Eo||lb(l,d,ae,g,ge,$e,G)||!1)?(ve||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(g,$e,G),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(g,$e,G)),typeof V.componentDidUpdate=="function"&&(l.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof V.componentDidUpdate!="function"||W===i.memoizedProps&&ge===i.memoizedState||(l.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||W===i.memoizedProps&&ge===i.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=$e),V.props=g,V.state=$e,V.context=G,g=ae):(typeof V.componentDidUpdate!="function"||W===i.memoizedProps&&ge===i.memoizedState||(l.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||W===i.memoizedProps&&ge===i.memoizedState||(l.flags|=1024),g=!1)}return uy(i,l,d,g,C,N)}function uy(i,l,d,g,N,C){wb(i,l);var V=(l.flags&128)!==0;if(!g&&!V)return N&&C_(l,d,!1),Mi(i,l,C);g=l.stateNode,LR.current=l;var W=V&&typeof d.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,i!==null&&V?(l.child=rc(l,i.child,null,C),l.child=rc(l,null,W,C)):ur(i,l,W,C),l.memoizedState=g.state,N&&C_(l,d,!0),l.child}function bb(i){var l=i.stateNode;l.pendingContext?N_(i,l.pendingContext,l.pendingContext!==l.context):l.context&&N_(i,l.context,!1),Kg(i,l.containerInfo)}function Eb(i,l,d,g,N){return nc(),Ug(N),l.flags|=256,ur(i,l,d,g),l.child}var dy={dehydrated:null,treeContext:null,retryLane:0};function hy(i){return{baseLanes:i,cachePool:null,transitions:null}}function Nb(i,l,d){var g=l.pendingProps,N=an.current,C=!1,V=(l.flags&128)!==0,W;if((W=V)||(W=i!==null&&i.memoizedState===null?!1:(N&2)!==0),W?(C=!0,l.flags&=-129):(i===null||i.memoizedState!==null)&&(N|=1),Wt(an,N&1),i===null)return Vg(l),i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((l.mode&1)===0?l.lanes=1:i.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(V=g.children,i=g.fallback,C?(g=l.mode,C=l.child,V={mode:"hidden",children:V},(g&1)===0&&C!==null?(C.childLanes=0,C.pendingProps=V):C=Af(V,g,0,null),i=Wa(i,g,d,null),C.return=l,i.return=l,C.sibling=i,l.child=C,l.child.memoizedState=hy(d),l.memoizedState=dy,i):fy(l,V));if(N=i.memoizedState,N!==null&&(W=N.dehydrated,W!==null))return MR(i,l,V,g,W,N,d);if(C){C=g.fallback,V=l.mode,N=i.child,W=N.sibling;var G={mode:"hidden",children:g.children};return(V&1)===0&&l.child!==N?(g=l.child,g.childLanes=0,g.pendingProps=G,l.deletions=null):(g=Ao(N,G),g.subtreeFlags=N.subtreeFlags&14680064),W!==null?C=Ao(W,C):(C=Wa(C,V,d,null),C.flags|=2),C.return=l,g.return=l,g.sibling=C,l.child=g,g=C,C=l.child,V=i.child.memoizedState,V=V===null?hy(d):{baseLanes:V.baseLanes|d,cachePool:null,transitions:V.transitions},C.memoizedState=V,C.childLanes=i.childLanes&~d,l.memoizedState=dy,g}return C=i.child,i=C.sibling,g=Ao(C,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=d),g.return=l,g.sibling=null,i!==null&&(d=l.deletions,d===null?(l.deletions=[i],l.flags|=16):d.push(i)),l.child=g,l.memoizedState=null,g}function fy(i,l){return l=Af({mode:"visible",children:l},i.mode,0,null),l.return=i,i.child=l}function yf(i,l,d,g){return g!==null&&Ug(g),rc(l,i.child,null,d),i=fy(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function MR(i,l,d,g,N,C,V){if(d)return l.flags&256?(l.flags&=-257,g=ay(Error(n(422))),yf(i,l,V,g)):l.memoizedState!==null?(l.child=i.child,l.flags|=128,null):(C=g.fallback,N=l.mode,g=Af({mode:"visible",children:g.children},N,0,null),C=Wa(C,N,V,null),C.flags|=2,g.return=l,C.return=l,g.sibling=C,l.child=g,(l.mode&1)!==0&&rc(l,i.child,null,V),l.child.memoizedState=hy(V),l.memoizedState=dy,C);if((l.mode&1)===0)return yf(i,l,V,null);if(N.data==="$!"){if(g=N.nextSibling&&N.nextSibling.dataset,g)var W=g.dgst;return g=W,C=Error(n(419)),g=ay(C,g,void 0),yf(i,l,V,g)}if(W=(V&i.childLanes)!==0,Er||W){if(g=Rn,g!==null){switch(V&-V){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}N=(N&(g.suspendedLanes|V))!==0?0:N,N!==0&&N!==C.retryLane&&(C.retryLane=N,Oi(i,N),Cs(g,i,N,-1))}return Iy(),g=ay(Error(n(421))),yf(i,l,V,g)}return N.data==="$?"?(l.flags|=128,l.child=i.child,l=YR.bind(null,i),N._reactRetry=l,null):(i=C.treeContext,zr=xo(N.nextSibling),$r=l,tn=!0,bs=null,i!==null&&(Zr[es++]=Ri,Zr[es++]=Di,Zr[es++]=La,Ri=i.id,Di=i.overflow,La=l),l=fy(l,g.children),l.flags|=4096,l)}function Sb(i,l,d){i.lanes|=l;var g=i.alternate;g!==null&&(g.lanes|=l),qg(i.return,l,d)}function my(i,l,d,g,N){var C=i.memoizedState;C===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:N}:(C.isBackwards=l,C.rendering=null,C.renderingStartTime=0,C.last=g,C.tail=d,C.tailMode=N)}function Cb(i,l,d){var g=l.pendingProps,N=g.revealOrder,C=g.tail;if(ur(i,l,g.children,d),g=an.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Sb(i,d,l);else if(i.tag===19)Sb(i,d,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}g&=1}if(Wt(an,g),(l.mode&1)===0)l.memoizedState=null;else switch(N){case"forwards":for(d=l.child,N=null;d!==null;)i=d.alternate,i!==null&&uf(i)===null&&(N=d),d=d.sibling;d=N,d===null?(N=l.child,l.child=null):(N=d.sibling,d.sibling=null),my(l,!1,N,d,C);break;case"backwards":for(d=null,N=l.child,l.child=null;N!==null;){if(i=N.alternate,i!==null&&uf(i)===null){l.child=N;break}i=N.sibling,N.sibling=d,d=N,N=i}my(l,!0,d,null,C);break;case"together":my(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function vf(i,l){(l.mode&1)===0&&i!==null&&(i.alternate=null,l.alternate=null,l.flags|=2)}function Mi(i,l,d){if(i!==null&&(l.dependencies=i.dependencies),$a|=l.lanes,(d&l.childLanes)===0)return null;if(i!==null&&l.child!==i.child)throw Error(n(153));if(l.child!==null){for(i=l.child,d=Ao(i,i.pendingProps),l.child=d,d.return=l;i.sibling!==null;)i=i.sibling,d=d.sibling=Ao(i,i.pendingProps),d.return=l;d.sibling=null}return l.child}function FR(i,l,d){switch(l.tag){case 3:bb(l),nc();break;case 5:U_(l);break;case 1:br(l.type)&&Zh(l);break;case 4:Kg(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,N=l.memoizedProps.value;Wt(of,g._currentValue),g._currentValue=N;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(Wt(an,an.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?Nb(i,l,d):(Wt(an,an.current&1),i=Mi(i,l,d),i!==null?i.sibling:null);Wt(an,an.current&1);break;case 19:if(g=(d&l.childLanes)!==0,(i.flags&128)!==0){if(g)return Cb(i,l,d);l.flags|=128}if(N=l.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Wt(an,an.current),g)break;return null;case 22:case 23:return l.lanes=0,xb(i,l,d)}return Mi(i,l,d)}var jb,py,Tb,Ib;jb=function(i,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},py=function(){},Tb=function(i,l,d,g){var N=i.memoizedProps;if(N!==g){i=l.stateNode,Va(ei.current);var C=null;switch(d){case"input":N=ft(i,N),g=ft(i,g),C=[];break;case"select":N=Y({},N,{value:void 0}),g=Y({},g,{value:void 0}),C=[];break;case"textarea":N=wi(i,N),g=wi(i,g),C=[];break;default:typeof N.onClick!="function"&&typeof g.onClick=="function"&&(i.onclick=Yh)}Kn(d,g);var V;d=null;for(ae in N)if(!g.hasOwnProperty(ae)&&N.hasOwnProperty(ae)&&N[ae]!=null)if(ae==="style"){var W=N[ae];for(V in W)W.hasOwnProperty(V)&&(d||(d={}),d[V]="")}else ae!=="dangerouslySetInnerHTML"&&ae!=="children"&&ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&ae!=="autoFocus"&&(s.hasOwnProperty(ae)?C||(C=[]):(C=C||[]).push(ae,null));for(ae in g){var G=g[ae];if(W=N!=null?N[ae]:void 0,g.hasOwnProperty(ae)&&G!==W&&(G!=null||W!=null))if(ae==="style")if(W){for(V in W)!W.hasOwnProperty(V)||G&&G.hasOwnProperty(V)||(d||(d={}),d[V]="");for(V in G)G.hasOwnProperty(V)&&W[V]!==G[V]&&(d||(d={}),d[V]=G[V])}else d||(C||(C=[]),C.push(ae,d)),d=G;else ae==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,W=W?W.__html:void 0,G!=null&&W!==G&&(C=C||[]).push(ae,G)):ae==="children"?typeof G!="string"&&typeof G!="number"||(C=C||[]).push(ae,""+G):ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&(s.hasOwnProperty(ae)?(G!=null&&ae==="onScroll"&&Qt("scroll",i),C||W===G||(C=[])):(C=C||[]).push(ae,G))}d&&(C=C||[]).push("style",d);var ae=C;(l.updateQueue=ae)&&(l.flags|=4)}},Ib=function(i,l,d,g){d!==g&&(l.flags|=4)};function Xu(i,l){if(!tn)switch(i.tailMode){case"hidden":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:g.sibling=null}}function Yn(i){var l=i.alternate!==null&&i.alternate.child===i.child,d=0,g=0;if(l)for(var N=i.child;N!==null;)d|=N.lanes|N.childLanes,g|=N.subtreeFlags&14680064,g|=N.flags&14680064,N.return=i,N=N.sibling;else for(N=i.child;N!==null;)d|=N.lanes|N.childLanes,g|=N.subtreeFlags,g|=N.flags,N.return=i,N=N.sibling;return i.subtreeFlags|=g,i.childLanes=d,l}function VR(i,l,d){var g=l.pendingProps;switch(Mg(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(l),null;case 1:return br(l.type)&&Jh(),Yn(l),null;case 3:return g=l.stateNode,oc(),Yt(_r),Yt(Gn),Yg(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(i===null||i.child===null)&&(rf(l)?l.flags|=4:i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,bs!==null&&(Cy(bs),bs=null))),py(i,l),Yn(l),null;case 5:Gg(l);var N=Va(Hu.current);if(d=l.type,i!==null&&l.stateNode!=null)Tb(i,l,d,g,N),i.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(n(166));return Yn(l),null}if(i=Va(ei.current),rf(l)){g=l.stateNode,d=l.type;var C=l.memoizedProps;switch(g[Zs]=l,g[$u]=C,i=(l.mode&1)!==0,d){case"dialog":Qt("cancel",g),Qt("close",g);break;case"iframe":case"object":case"embed":Qt("load",g);break;case"video":case"audio":for(N=0;N<Fu.length;N++)Qt(Fu[N],g);break;case"source":Qt("error",g);break;case"img":case"image":case"link":Qt("error",g),Qt("load",g);break;case"details":Qt("toggle",g);break;case"input":fe(g,C),Qt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!C.multiple},Qt("invalid",g);break;case"textarea":or(g,C),Qt("invalid",g)}Kn(d,C),N=null;for(var V in C)if(C.hasOwnProperty(V)){var W=C[V];V==="children"?typeof W=="string"?g.textContent!==W&&(C.suppressHydrationWarning!==!0&&Qh(g.textContent,W,i),N=["children",W]):typeof W=="number"&&g.textContent!==""+W&&(C.suppressHydrationWarning!==!0&&Qh(g.textContent,W,i),N=["children",""+W]):s.hasOwnProperty(V)&&W!=null&&V==="onScroll"&&Qt("scroll",g)}switch(d){case"input":me(g),Ht(g,C,!0);break;case"textarea":me(g),Ws(g);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(g.onclick=Yh)}g=N,l.updateQueue=g,g!==null&&(l.flags|=4)}else{V=N.nodeType===9?N:N.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Kt(d)),i==="http://www.w3.org/1999/xhtml"?d==="script"?(i=V.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof g.is=="string"?i=V.createElement(d,{is:g.is}):(i=V.createElement(d),d==="select"&&(V=i,g.multiple?V.multiple=!0:g.size&&(V.size=g.size))):i=V.createElementNS(i,d),i[Zs]=l,i[$u]=g,jb(i,l,!1,!1),l.stateNode=i;e:{switch(V=bi(d,g),d){case"dialog":Qt("cancel",i),Qt("close",i),N=g;break;case"iframe":case"object":case"embed":Qt("load",i),N=g;break;case"video":case"audio":for(N=0;N<Fu.length;N++)Qt(Fu[N],i);N=g;break;case"source":Qt("error",i),N=g;break;case"img":case"image":case"link":Qt("error",i),Qt("load",i),N=g;break;case"details":Qt("toggle",i),N=g;break;case"input":fe(i,g),N=ft(i,g),Qt("invalid",i);break;case"option":N=g;break;case"select":i._wrapperState={wasMultiple:!!g.multiple},N=Y({},g,{value:void 0}),Qt("invalid",i);break;case"textarea":or(i,g),N=wi(i,g),Qt("invalid",i);break;default:N=g}Kn(d,N),W=N;for(C in W)if(W.hasOwnProperty(C)){var G=W[C];C==="style"?_i(i,G):C==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,G!=null&&Hn(i,G)):C==="children"?typeof G=="string"?(d!=="textarea"||G!=="")&&An(i,G):typeof G=="number"&&An(i,""+G):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(s.hasOwnProperty(C)?G!=null&&C==="onScroll"&&Qt("scroll",i):G!=null&&T(i,C,G,V))}switch(d){case"input":me(i),Ht(i,g,!1);break;case"textarea":me(i),Ws(i);break;case"option":g.value!=null&&i.setAttribute("value",""+Ae(g.value));break;case"select":i.multiple=!!g.multiple,C=g.value,C!=null?Or(i,!!g.multiple,C,!1):g.defaultValue!=null&&Or(i,!!g.multiple,g.defaultValue,!0);break;default:typeof N.onClick=="function"&&(i.onclick=Yh)}switch(d){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Yn(l),null;case 6:if(i&&l.stateNode!=null)Ib(i,l,i.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(n(166));if(d=Va(Hu.current),Va(ei.current),rf(l)){if(g=l.stateNode,d=l.memoizedProps,g[Zs]=l,(C=g.nodeValue!==d)&&(i=$r,i!==null))switch(i.tag){case 3:Qh(g.nodeValue,d,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Qh(g.nodeValue,d,(i.mode&1)!==0)}C&&(l.flags|=4)}else g=(d.nodeType===9?d:d.ownerDocument).createTextNode(g),g[Zs]=l,l.stateNode=g}return Yn(l),null;case 13:if(Yt(an),g=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(tn&&zr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)P_(),nc(),l.flags|=98560,C=!1;else if(C=rf(l),g!==null&&g.dehydrated!==null){if(i===null){if(!C)throw Error(n(318));if(C=l.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(n(317));C[Zs]=l}else nc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Yn(l),C=!1}else bs!==null&&(Cy(bs),bs=null),C=!0;if(!C)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(g=g!==null,g!==(i!==null&&i.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(i===null||(an.current&1)!==0?Cn===0&&(Cn=3):Iy())),l.updateQueue!==null&&(l.flags|=4),Yn(l),null);case 4:return oc(),py(i,l),i===null&&Vu(l.stateNode.containerInfo),Yn(l),null;case 10:return Bg(l.type._context),Yn(l),null;case 17:return br(l.type)&&Jh(),Yn(l),null;case 19:if(Yt(an),C=l.memoizedState,C===null)return Yn(l),null;if(g=(l.flags&128)!==0,V=C.rendering,V===null)if(g)Xu(C,!1);else{if(Cn!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(V=uf(i),V!==null){for(l.flags|=128,Xu(C,!1),g=V.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=d,d=l.child;d!==null;)C=d,i=g,C.flags&=14680066,V=C.alternate,V===null?(C.childLanes=0,C.lanes=i,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=V.childLanes,C.lanes=V.lanes,C.child=V.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=V.memoizedProps,C.memoizedState=V.memoizedState,C.updateQueue=V.updateQueue,C.type=V.type,i=V.dependencies,C.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),d=d.sibling;return Wt(an,an.current&1|2),l.child}i=i.sibling}C.tail!==null&&qt()>uc&&(l.flags|=128,g=!0,Xu(C,!1),l.lanes=4194304)}else{if(!g)if(i=uf(V),i!==null){if(l.flags|=128,g=!0,d=i.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),Xu(C,!0),C.tail===null&&C.tailMode==="hidden"&&!V.alternate&&!tn)return Yn(l),null}else 2*qt()-C.renderingStartTime>uc&&d!==1073741824&&(l.flags|=128,g=!0,Xu(C,!1),l.lanes=4194304);C.isBackwards?(V.sibling=l.child,l.child=V):(d=C.last,d!==null?d.sibling=V:l.child=V,C.last=V)}return C.tail!==null?(l=C.tail,C.rendering=l,C.tail=l.sibling,C.renderingStartTime=qt(),l.sibling=null,d=an.current,Wt(an,g?d&1|2:d&1),l):(Yn(l),null);case 22:case 23:return Ty(),g=l.memoizedState!==null,i!==null&&i.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(Br&1073741824)!==0&&(Yn(l),l.subtreeFlags&6&&(l.flags|=8192)):Yn(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function UR(i,l){switch(Mg(l),l.tag){case 1:return br(l.type)&&Jh(),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return oc(),Yt(_r),Yt(Gn),Yg(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 5:return Gg(l),null;case 13:if(Yt(an),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(n(340));nc()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return Yt(an),null;case 4:return oc(),null;case 10:return Bg(l.type._context),null;case 22:case 23:return Ty(),null;case 24:return null;default:return null}}var xf=!1,Xn=!1,$R=typeof WeakSet=="function"?WeakSet:Set,Le=null;function lc(i,l){var d=i.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){fn(i,l,g)}else d.current=null}function gy(i,l,d){try{d()}catch(g){fn(i,l,g)}}var Ab=!1;function zR(i,l){if(Tg=go,i=l_(),wg(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var N=g.anchorOffset,C=g.focusNode;g=g.focusOffset;try{d.nodeType,C.nodeType}catch{d=null;break e}var V=0,W=-1,G=-1,ae=0,ve=0,xe=i,ge=null;t:for(;;){for(var De;xe!==d||N!==0&&xe.nodeType!==3||(W=V+N),xe!==C||g!==0&&xe.nodeType!==3||(G=V+g),xe.nodeType===3&&(V+=xe.nodeValue.length),(De=xe.firstChild)!==null;)ge=xe,xe=De;for(;;){if(xe===i)break t;if(ge===d&&++ae===N&&(W=V),ge===C&&++ve===g&&(G=V),(De=xe.nextSibling)!==null)break;xe=ge,ge=xe.parentNode}xe=De}d=W===-1||G===-1?null:{start:W,end:G}}else d=null}d=d||{start:0,end:0}}else d=null;for(Ig={focusedElem:i,selectionRange:d},go=!1,Le=l;Le!==null;)if(l=Le,i=l.child,(l.subtreeFlags&1028)!==0&&i!==null)i.return=l,Le=i;else for(;Le!==null;){l=Le;try{var $e=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if($e!==null){var ze=$e.memoizedProps,gn=$e.memoizedState,re=l.stateNode,J=re.getSnapshotBeforeUpdate(l.elementType===l.type?ze:Es(l.type,ze),gn);re.__reactInternalSnapshotBeforeUpdate=J}break;case 3:var se=l.stateNode.containerInfo;se.nodeType===1?se.textContent="":se.nodeType===9&&se.documentElement&&se.removeChild(se.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ee){fn(l,l.return,Ee)}if(i=l.sibling,i!==null){i.return=l.return,Le=i;break}Le=l.return}return $e=Ab,Ab=!1,$e}function Ju(i,l,d){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var N=g=g.next;do{if((N.tag&i)===i){var C=N.destroy;N.destroy=void 0,C!==void 0&&gy(l,d,C)}N=N.next}while(N!==g)}}function wf(i,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&i)===i){var g=d.create;d.destroy=g()}d=d.next}while(d!==l)}}function yy(i){var l=i.ref;if(l!==null){var d=i.stateNode;switch(i.tag){case 5:i=d;break;default:i=d}typeof l=="function"?l(i):l.current=i}}function kb(i){var l=i.alternate;l!==null&&(i.alternate=null,kb(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&(delete l[Zs],delete l[$u],delete l[Rg],delete l[NR],delete l[SR])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Pb(i){return i.tag===5||i.tag===3||i.tag===4}function Rb(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Pb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function vy(i,l,d){var g=i.tag;if(g===5||g===6)i=i.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(i,l):d.insertBefore(i,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(i,d)):(l=d,l.appendChild(i)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Yh));else if(g!==4&&(i=i.child,i!==null))for(vy(i,l,d),i=i.sibling;i!==null;)vy(i,l,d),i=i.sibling}function xy(i,l,d){var g=i.tag;if(g===5||g===6)i=i.stateNode,l?d.insertBefore(i,l):d.appendChild(i);else if(g!==4&&(i=i.child,i!==null))for(xy(i,l,d),i=i.sibling;i!==null;)xy(i,l,d),i=i.sibling}var $n=null,Ns=!1;function So(i,l,d){for(d=d.child;d!==null;)Db(i,l,d),d=d.sibling}function Db(i,l,d){if(Mr&&typeof Mr.onCommitFiberUnmount=="function")try{Mr.onCommitFiberUnmount(ja,d)}catch{}switch(d.tag){case 5:Xn||lc(d,l);case 6:var g=$n,N=Ns;$n=null,So(i,l,d),$n=g,Ns=N,$n!==null&&(Ns?(i=$n,d=d.stateNode,i.nodeType===8?i.parentNode.removeChild(d):i.removeChild(d)):$n.removeChild(d.stateNode));break;case 18:$n!==null&&(Ns?(i=$n,d=d.stateNode,i.nodeType===8?Pg(i.parentNode,d):i.nodeType===1&&Pg(i,d),xs(i)):Pg($n,d.stateNode));break;case 4:g=$n,N=Ns,$n=d.stateNode.containerInfo,Ns=!0,So(i,l,d),$n=g,Ns=N;break;case 0:case 11:case 14:case 15:if(!Xn&&(g=d.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){N=g=g.next;do{var C=N,V=C.destroy;C=C.tag,V!==void 0&&((C&2)!==0||(C&4)!==0)&&gy(d,l,V),N=N.next}while(N!==g)}So(i,l,d);break;case 1:if(!Xn&&(lc(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(W){fn(d,l,W)}So(i,l,d);break;case 21:So(i,l,d);break;case 22:d.mode&1?(Xn=(g=Xn)||d.memoizedState!==null,So(i,l,d),Xn=g):So(i,l,d);break;default:So(i,l,d)}}function Ob(i){var l=i.updateQueue;if(l!==null){i.updateQueue=null;var d=i.stateNode;d===null&&(d=i.stateNode=new $R),l.forEach(function(g){var N=XR.bind(null,i,g);d.has(g)||(d.add(g),g.then(N,N))})}}function Ss(i,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var N=d[g];try{var C=i,V=l,W=V;e:for(;W!==null;){switch(W.tag){case 5:$n=W.stateNode,Ns=!1;break e;case 3:$n=W.stateNode.containerInfo,Ns=!0;break e;case 4:$n=W.stateNode.containerInfo,Ns=!0;break e}W=W.return}if($n===null)throw Error(n(160));Db(C,V,N),$n=null,Ns=!1;var G=N.alternate;G!==null&&(G.return=null),N.return=null}catch(ae){fn(N,l,ae)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)Lb(l,i),l=l.sibling}function Lb(i,l){var d=i.alternate,g=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Ss(l,i),ni(i),g&4){try{Ju(3,i,i.return),wf(3,i)}catch(ze){fn(i,i.return,ze)}try{Ju(5,i,i.return)}catch(ze){fn(i,i.return,ze)}}break;case 1:Ss(l,i),ni(i),g&512&&d!==null&&lc(d,d.return);break;case 5:if(Ss(l,i),ni(i),g&512&&d!==null&&lc(d,d.return),i.flags&32){var N=i.stateNode;try{An(N,"")}catch(ze){fn(i,i.return,ze)}}if(g&4&&(N=i.stateNode,N!=null)){var C=i.memoizedProps,V=d!==null?d.memoizedProps:C,W=i.type,G=i.updateQueue;if(i.updateQueue=null,G!==null)try{W==="input"&&C.type==="radio"&&C.name!=null&&Ce(N,C),bi(W,V);var ae=bi(W,C);for(V=0;V<G.length;V+=2){var ve=G[V],xe=G[V+1];ve==="style"?_i(N,xe):ve==="dangerouslySetInnerHTML"?Hn(N,xe):ve==="children"?An(N,xe):T(N,ve,xe,ae)}switch(W){case"input":ct(N,C);break;case"textarea":In(N,C);break;case"select":var ge=N._wrapperState.wasMultiple;N._wrapperState.wasMultiple=!!C.multiple;var De=C.value;De!=null?Or(N,!!C.multiple,De,!1):ge!==!!C.multiple&&(C.defaultValue!=null?Or(N,!!C.multiple,C.defaultValue,!0):Or(N,!!C.multiple,C.multiple?[]:"",!1))}N[$u]=C}catch(ze){fn(i,i.return,ze)}}break;case 6:if(Ss(l,i),ni(i),g&4){if(i.stateNode===null)throw Error(n(162));N=i.stateNode,C=i.memoizedProps;try{N.nodeValue=C}catch(ze){fn(i,i.return,ze)}}break;case 3:if(Ss(l,i),ni(i),g&4&&d!==null&&d.memoizedState.isDehydrated)try{xs(l.containerInfo)}catch(ze){fn(i,i.return,ze)}break;case 4:Ss(l,i),ni(i);break;case 13:Ss(l,i),ni(i),N=i.child,N.flags&8192&&(C=N.memoizedState!==null,N.stateNode.isHidden=C,!C||N.alternate!==null&&N.alternate.memoizedState!==null||(by=qt())),g&4&&Ob(i);break;case 22:if(ve=d!==null&&d.memoizedState!==null,i.mode&1?(Xn=(ae=Xn)||ve,Ss(l,i),Xn=ae):Ss(l,i),ni(i),g&8192){if(ae=i.memoizedState!==null,(i.stateNode.isHidden=ae)&&!ve&&(i.mode&1)!==0)for(Le=i,ve=i.child;ve!==null;){for(xe=Le=ve;Le!==null;){switch(ge=Le,De=ge.child,ge.tag){case 0:case 11:case 14:case 15:Ju(4,ge,ge.return);break;case 1:lc(ge,ge.return);var $e=ge.stateNode;if(typeof $e.componentWillUnmount=="function"){g=ge,d=ge.return;try{l=g,$e.props=l.memoizedProps,$e.state=l.memoizedState,$e.componentWillUnmount()}catch(ze){fn(g,d,ze)}}break;case 5:lc(ge,ge.return);break;case 22:if(ge.memoizedState!==null){Vb(xe);continue}}De!==null?(De.return=ge,Le=De):Vb(xe)}ve=ve.sibling}e:for(ve=null,xe=i;;){if(xe.tag===5){if(ve===null){ve=xe;try{N=xe.stateNode,ae?(C=N.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none"):(W=xe.stateNode,G=xe.memoizedProps.style,V=G!=null&&G.hasOwnProperty("display")?G.display:null,W.style.display=Hs("display",V))}catch(ze){fn(i,i.return,ze)}}}else if(xe.tag===6){if(ve===null)try{xe.stateNode.nodeValue=ae?"":xe.memoizedProps}catch(ze){fn(i,i.return,ze)}}else if((xe.tag!==22&&xe.tag!==23||xe.memoizedState===null||xe===i)&&xe.child!==null){xe.child.return=xe,xe=xe.child;continue}if(xe===i)break e;for(;xe.sibling===null;){if(xe.return===null||xe.return===i)break e;ve===xe&&(ve=null),xe=xe.return}ve===xe&&(ve=null),xe.sibling.return=xe.return,xe=xe.sibling}}break;case 19:Ss(l,i),ni(i),g&4&&Ob(i);break;case 21:break;default:Ss(l,i),ni(i)}}function ni(i){var l=i.flags;if(l&2){try{e:{for(var d=i.return;d!==null;){if(Pb(d)){var g=d;break e}d=d.return}throw Error(n(160))}switch(g.tag){case 5:var N=g.stateNode;g.flags&32&&(An(N,""),g.flags&=-33);var C=Rb(i);xy(i,C,N);break;case 3:case 4:var V=g.stateNode.containerInfo,W=Rb(i);vy(i,W,V);break;default:throw Error(n(161))}}catch(G){fn(i,i.return,G)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function BR(i,l,d){Le=i,Mb(i)}function Mb(i,l,d){for(var g=(i.mode&1)!==0;Le!==null;){var N=Le,C=N.child;if(N.tag===22&&g){var V=N.memoizedState!==null||xf;if(!V){var W=N.alternate,G=W!==null&&W.memoizedState!==null||Xn;W=xf;var ae=Xn;if(xf=V,(Xn=G)&&!ae)for(Le=N;Le!==null;)V=Le,G=V.child,V.tag===22&&V.memoizedState!==null?Ub(N):G!==null?(G.return=V,Le=G):Ub(N);for(;C!==null;)Le=C,Mb(C),C=C.sibling;Le=N,xf=W,Xn=ae}Fb(i)}else(N.subtreeFlags&8772)!==0&&C!==null?(C.return=N,Le=C):Fb(i)}}function Fb(i){for(;Le!==null;){var l=Le;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Xn||wf(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!Xn)if(d===null)g.componentDidMount();else{var N=l.elementType===l.type?d.memoizedProps:Es(l.type,d.memoizedProps);g.componentDidUpdate(N,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var C=l.updateQueue;C!==null&&V_(l,C,g);break;case 3:var V=l.updateQueue;if(V!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}V_(l,V,d)}break;case 5:var W=l.stateNode;if(d===null&&l.flags&4){d=W;var G=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":G.autoFocus&&d.focus();break;case"img":G.src&&(d.src=G.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var ae=l.alternate;if(ae!==null){var ve=ae.memoizedState;if(ve!==null){var xe=ve.dehydrated;xe!==null&&xs(xe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Xn||l.flags&512&&yy(l)}catch(ge){fn(l,l.return,ge)}}if(l===i){Le=null;break}if(d=l.sibling,d!==null){d.return=l.return,Le=d;break}Le=l.return}}function Vb(i){for(;Le!==null;){var l=Le;if(l===i){Le=null;break}var d=l.sibling;if(d!==null){d.return=l.return,Le=d;break}Le=l.return}}function Ub(i){for(;Le!==null;){var l=Le;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{wf(4,l)}catch(G){fn(l,d,G)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var N=l.return;try{g.componentDidMount()}catch(G){fn(l,N,G)}}var C=l.return;try{yy(l)}catch(G){fn(l,C,G)}break;case 5:var V=l.return;try{yy(l)}catch(G){fn(l,V,G)}}}catch(G){fn(l,l.return,G)}if(l===i){Le=null;break}var W=l.sibling;if(W!==null){W.return=l.return,Le=W;break}Le=l.return}}var qR=Math.ceil,_f=M.ReactCurrentDispatcher,wy=M.ReactCurrentOwner,rs=M.ReactCurrentBatchConfig,At=0,Rn=null,wn=null,zn=0,Br=0,cc=wo(0),Cn=0,Zu=null,$a=0,bf=0,_y=0,ed=null,Nr=null,by=0,uc=1/0,Fi=null,Ef=!1,Ey=null,Co=null,Nf=!1,jo=null,Sf=0,td=0,Ny=null,Cf=-1,jf=0;function dr(){return(At&6)!==0?qt():Cf!==-1?Cf:Cf=qt()}function To(i){return(i.mode&1)===0?1:(At&2)!==0&&zn!==0?zn&-zn:jR.transition!==null?(jf===0&&(jf=Ia()),jf):(i=Et,i!==0||(i=window.event,i=i===void 0?16:Iu(i.type)),i)}function Cs(i,l,d,g){if(50<td)throw td=0,Ny=null,Error(n(185));ho(i,d,g),((At&2)===0||i!==Rn)&&(i===Rn&&((At&2)===0&&(bf|=d),Cn===4&&Io(i,zn)),Sr(i,g),d===1&&At===0&&(l.mode&1)===0&&(uc=qt()+500,ef&&bo()))}function Sr(i,l){var d=i.callbackNode;Ci(i,l);var g=Ta(i,i===Rn?zn:0);if(g===0)d!==null&&Nu(d),i.callbackNode=null,i.callbackPriority=0;else if(l=g&-g,i.callbackPriority!==l){if(d!=null&&Nu(d),l===1)i.tag===0?CR(zb.bind(null,i)):j_(zb.bind(null,i)),bR(function(){(At&6)===0&&bo()}),d=null;else{switch(mo(g)){case 1:d=Ca;break;case 4:d=lo;break;case 16:d=Yr;break;case 536870912:d=Ch;break;default:d=Yr}d=Yb(d,$b.bind(null,i))}i.callbackPriority=l,i.callbackNode=d}}function $b(i,l){if(Cf=-1,jf=0,(At&6)!==0)throw Error(n(327));var d=i.callbackNode;if(dc()&&i.callbackNode!==d)return null;var g=Ta(i,i===Rn?zn:0);if(g===0)return null;if((g&30)!==0||(g&i.expiredLanes)!==0||l)l=Tf(i,g);else{l=g;var N=At;At|=2;var C=qb();(Rn!==i||zn!==l)&&(Fi=null,uc=qt()+500,Ba(i,l));do try{KR();break}catch(W){Bb(i,W)}while(!0);zg(),_f.current=C,At=N,wn!==null?l=0:(Rn=null,zn=0,l=Cn)}if(l!==0){if(l===2&&(N=Fr(i),N!==0&&(g=N,l=Sy(i,N))),l===1)throw d=Zu,Ba(i,0),Io(i,g),Sr(i,qt()),d;if(l===6)Io(i,g);else{if(N=i.current.alternate,(g&30)===0&&!WR(N)&&(l=Tf(i,g),l===2&&(C=Fr(i),C!==0&&(g=C,l=Sy(i,C))),l===1))throw d=Zu,Ba(i,0),Io(i,g),Sr(i,qt()),d;switch(i.finishedWork=N,i.finishedLanes=g,l){case 0:case 1:throw Error(n(345));case 2:qa(i,Nr,Fi);break;case 3:if(Io(i,g),(g&130023424)===g&&(l=by+500-qt(),10<l)){if(Ta(i,0)!==0)break;if(N=i.suspendedLanes,(N&g)!==g){dr(),i.pingedLanes|=i.suspendedLanes&N;break}i.timeoutHandle=kg(qa.bind(null,i,Nr,Fi),l);break}qa(i,Nr,Fi);break;case 4:if(Io(i,g),(g&4194240)===g)break;for(l=i.eventTimes,N=-1;0<g;){var V=31-lr(g);C=1<<V,V=l[V],V>N&&(N=V),g&=~C}if(g=N,g=qt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*qR(g/1960))-g,10<g){i.timeoutHandle=kg(qa.bind(null,i,Nr,Fi),g);break}qa(i,Nr,Fi);break;case 5:qa(i,Nr,Fi);break;default:throw Error(n(329))}}}return Sr(i,qt()),i.callbackNode===d?$b.bind(null,i):null}function Sy(i,l){var d=ed;return i.current.memoizedState.isDehydrated&&(Ba(i,l).flags|=256),i=Tf(i,l),i!==2&&(l=Nr,Nr=d,l!==null&&Cy(l)),i}function Cy(i){Nr===null?Nr=i:Nr.push.apply(Nr,i)}function WR(i){for(var l=i;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var g=0;g<d.length;g++){var N=d[g],C=N.getSnapshot;N=N.value;try{if(!_s(C(),N))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Io(i,l){for(l&=~_y,l&=~bf,i.suspendedLanes|=l,i.pingedLanes&=~l,i=i.expirationTimes;0<l;){var d=31-lr(l),g=1<<d;i[d]=-1,l&=~g}}function zb(i){if((At&6)!==0)throw Error(n(327));dc();var l=Ta(i,0);if((l&1)===0)return Sr(i,qt()),null;var d=Tf(i,l);if(i.tag!==0&&d===2){var g=Fr(i);g!==0&&(l=g,d=Sy(i,g))}if(d===1)throw d=Zu,Ba(i,0),Io(i,l),Sr(i,qt()),d;if(d===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=l,qa(i,Nr,Fi),Sr(i,qt()),null}function jy(i,l){var d=At;At|=1;try{return i(l)}finally{At=d,At===0&&(uc=qt()+500,ef&&bo())}}function za(i){jo!==null&&jo.tag===0&&(At&6)===0&&dc();var l=At;At|=1;var d=rs.transition,g=Et;try{if(rs.transition=null,Et=1,i)return i()}finally{Et=g,rs.transition=d,At=l,(At&6)===0&&bo()}}function Ty(){Br=cc.current,Yt(cc)}function Ba(i,l){i.finishedWork=null,i.finishedLanes=0;var d=i.timeoutHandle;if(d!==-1&&(i.timeoutHandle=-1,_R(d)),wn!==null)for(d=wn.return;d!==null;){var g=d;switch(Mg(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Jh();break;case 3:oc(),Yt(_r),Yt(Gn),Yg();break;case 5:Gg(g);break;case 4:oc();break;case 13:Yt(an);break;case 19:Yt(an);break;case 10:Bg(g.type._context);break;case 22:case 23:Ty()}d=d.return}if(Rn=i,wn=i=Ao(i.current,null),zn=Br=l,Cn=0,Zu=null,_y=bf=$a=0,Nr=ed=null,Fa!==null){for(l=0;l<Fa.length;l++)if(d=Fa[l],g=d.interleaved,g!==null){d.interleaved=null;var N=g.next,C=d.pending;if(C!==null){var V=C.next;C.next=N,g.next=V}d.pending=g}Fa=null}return i}function Bb(i,l){do{var d=wn;try{if(zg(),df.current=pf,hf){for(var g=ln.memoizedState;g!==null;){var N=g.queue;N!==null&&(N.pending=null),g=g.next}hf=!1}if(Ua=0,Pn=Sn=ln=null,Ku=!1,Gu=0,wy.current=null,d===null||d.return===null){Cn=1,Zu=l,wn=null;break}e:{var C=i,V=d.return,W=d,G=l;if(l=zn,W.flags|=32768,G!==null&&typeof G=="object"&&typeof G.then=="function"){var ae=G,ve=W,xe=ve.tag;if((ve.mode&1)===0&&(xe===0||xe===11||xe===15)){var ge=ve.alternate;ge?(ve.updateQueue=ge.updateQueue,ve.memoizedState=ge.memoizedState,ve.lanes=ge.lanes):(ve.updateQueue=null,ve.memoizedState=null)}var De=mb(V);if(De!==null){De.flags&=-257,pb(De,V,W,C,l),De.mode&1&&fb(C,ae,l),l=De,G=ae;var $e=l.updateQueue;if($e===null){var ze=new Set;ze.add(G),l.updateQueue=ze}else $e.add(G);break e}else{if((l&1)===0){fb(C,ae,l),Iy();break e}G=Error(n(426))}}else if(tn&&W.mode&1){var gn=mb(V);if(gn!==null){(gn.flags&65536)===0&&(gn.flags|=256),pb(gn,V,W,C,l),Ug(ac(G,W));break e}}C=G=ac(G,W),Cn!==4&&(Cn=2),ed===null?ed=[C]:ed.push(C),C=V;do{switch(C.tag){case 3:C.flags|=65536,l&=-l,C.lanes|=l;var re=db(C,G,l);F_(C,re);break e;case 1:W=G;var J=C.type,se=C.stateNode;if((C.flags&128)===0&&(typeof J.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(Co===null||!Co.has(se)))){C.flags|=65536,l&=-l,C.lanes|=l;var Ee=hb(C,W,l);F_(C,Ee);break e}}C=C.return}while(C!==null)}Hb(d)}catch(We){l=We,wn===d&&d!==null&&(wn=d=d.return);continue}break}while(!0)}function qb(){var i=_f.current;return _f.current=pf,i===null?pf:i}function Iy(){(Cn===0||Cn===3||Cn===2)&&(Cn=4),Rn===null||($a&268435455)===0&&(bf&268435455)===0||Io(Rn,zn)}function Tf(i,l){var d=At;At|=2;var g=qb();(Rn!==i||zn!==l)&&(Fi=null,Ba(i,l));do try{HR();break}catch(N){Bb(i,N)}while(!0);if(zg(),At=d,_f.current=g,wn!==null)throw Error(n(261));return Rn=null,zn=0,Cn}function HR(){for(;wn!==null;)Wb(wn)}function KR(){for(;wn!==null&&!Nh();)Wb(wn)}function Wb(i){var l=Qb(i.alternate,i,Br);i.memoizedProps=i.pendingProps,l===null?Hb(i):wn=l,wy.current=null}function Hb(i){var l=i;do{var d=l.alternate;if(i=l.return,(l.flags&32768)===0){if(d=VR(d,l,Br),d!==null){wn=d;return}}else{if(d=UR(d,l),d!==null){d.flags&=32767,wn=d;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Cn=6,wn=null;return}}if(l=l.sibling,l!==null){wn=l;return}wn=l=i}while(l!==null);Cn===0&&(Cn=5)}function qa(i,l,d){var g=Et,N=rs.transition;try{rs.transition=null,Et=1,GR(i,l,d,g)}finally{rs.transition=N,Et=g}return null}function GR(i,l,d,g){do dc();while(jo!==null);if((At&6)!==0)throw Error(n(327));d=i.finishedWork;var N=i.finishedLanes;if(d===null)return null;if(i.finishedWork=null,i.finishedLanes=0,d===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var C=d.lanes|d.childLanes;if(Ut(i,C),i===Rn&&(wn=Rn=null,zn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Nf||(Nf=!0,Yb(Yr,function(){return dc(),null})),C=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||C){C=rs.transition,rs.transition=null;var V=Et;Et=1;var W=At;At|=4,wy.current=null,zR(i,d),Lb(d,i),mR(Ig),go=!!Tg,Ig=Tg=null,i.current=d,BR(d),hg(),At=W,Et=V,rs.transition=C}else i.current=d;if(Nf&&(Nf=!1,jo=i,Sf=N),C=i.pendingLanes,C===0&&(Co=null),jh(d.stateNode),Sr(i,qt()),l!==null)for(g=i.onRecoverableError,d=0;d<l.length;d++)N=l[d],g(N.value,{componentStack:N.stack,digest:N.digest});if(Ef)throw Ef=!1,i=Ey,Ey=null,i;return(Sf&1)!==0&&i.tag!==0&&dc(),C=i.pendingLanes,(C&1)!==0?i===Ny?td++:(td=0,Ny=i):td=0,bo(),null}function dc(){if(jo!==null){var i=mo(Sf),l=rs.transition,d=Et;try{if(rs.transition=null,Et=16>i?16:i,jo===null)var g=!1;else{if(i=jo,jo=null,Sf=0,(At&6)!==0)throw Error(n(331));var N=At;for(At|=4,Le=i.current;Le!==null;){var C=Le,V=C.child;if((Le.flags&16)!==0){var W=C.deletions;if(W!==null){for(var G=0;G<W.length;G++){var ae=W[G];for(Le=ae;Le!==null;){var ve=Le;switch(ve.tag){case 0:case 11:case 15:Ju(8,ve,C)}var xe=ve.child;if(xe!==null)xe.return=ve,Le=xe;else for(;Le!==null;){ve=Le;var ge=ve.sibling,De=ve.return;if(kb(ve),ve===ae){Le=null;break}if(ge!==null){ge.return=De,Le=ge;break}Le=De}}}var $e=C.alternate;if($e!==null){var ze=$e.child;if(ze!==null){$e.child=null;do{var gn=ze.sibling;ze.sibling=null,ze=gn}while(ze!==null)}}Le=C}}if((C.subtreeFlags&2064)!==0&&V!==null)V.return=C,Le=V;else e:for(;Le!==null;){if(C=Le,(C.flags&2048)!==0)switch(C.tag){case 0:case 11:case 15:Ju(9,C,C.return)}var re=C.sibling;if(re!==null){re.return=C.return,Le=re;break e}Le=C.return}}var J=i.current;for(Le=J;Le!==null;){V=Le;var se=V.child;if((V.subtreeFlags&2064)!==0&&se!==null)se.return=V,Le=se;else e:for(V=J;Le!==null;){if(W=Le,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:wf(9,W)}}catch(We){fn(W,W.return,We)}if(W===V){Le=null;break e}var Ee=W.sibling;if(Ee!==null){Ee.return=W.return,Le=Ee;break e}Le=W.return}}if(At=N,bo(),Mr&&typeof Mr.onPostCommitFiberRoot=="function")try{Mr.onPostCommitFiberRoot(ja,i)}catch{}g=!0}return g}finally{Et=d,rs.transition=l}}return!1}function Kb(i,l,d){l=ac(d,l),l=db(i,l,1),i=No(i,l,1),l=dr(),i!==null&&(ho(i,1,l),Sr(i,l))}function fn(i,l,d){if(i.tag===3)Kb(i,i,d);else for(;l!==null;){if(l.tag===3){Kb(l,i,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Co===null||!Co.has(g))){i=ac(d,i),i=hb(l,i,1),l=No(l,i,1),i=dr(),l!==null&&(ho(l,1,i),Sr(l,i));break}}l=l.return}}function QR(i,l,d){var g=i.pingCache;g!==null&&g.delete(l),l=dr(),i.pingedLanes|=i.suspendedLanes&d,Rn===i&&(zn&d)===d&&(Cn===4||Cn===3&&(zn&130023424)===zn&&500>qt()-by?Ba(i,0):_y|=d),Sr(i,l)}function Gb(i,l){l===0&&((i.mode&1)===0?l=1:(l=Dl,Dl<<=1,(Dl&130023424)===0&&(Dl=4194304)));var d=dr();i=Oi(i,l),i!==null&&(ho(i,l,d),Sr(i,d))}function YR(i){var l=i.memoizedState,d=0;l!==null&&(d=l.retryLane),Gb(i,d)}function XR(i,l){var d=0;switch(i.tag){case 13:var g=i.stateNode,N=i.memoizedState;N!==null&&(d=N.retryLane);break;case 19:g=i.stateNode;break;default:throw Error(n(314))}g!==null&&g.delete(l),Gb(i,d)}var Qb;Qb=function(i,l,d){if(i!==null)if(i.memoizedProps!==l.pendingProps||_r.current)Er=!0;else{if((i.lanes&d)===0&&(l.flags&128)===0)return Er=!1,FR(i,l,d);Er=(i.flags&131072)!==0}else Er=!1,tn&&(l.flags&1048576)!==0&&T_(l,nf,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;vf(i,l),i=l.pendingProps;var N=Zl(l,Gn.current);ic(l,d),N=Zg(null,l,g,i,N,d);var C=ey();return l.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,br(g)?(C=!0,Zh(l)):C=!1,l.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,Hg(l),N.updater=gf,l.stateNode=N,N._reactInternals=l,oy(l,g,i,d),l=uy(null,l,g,!0,C,d)):(l.tag=0,tn&&C&&Lg(l),ur(null,l,N,d),l=l.child),l;case 16:g=l.elementType;e:{switch(vf(i,l),i=l.pendingProps,N=g._init,g=N(g._payload),l.type=g,N=l.tag=ZR(g),i=Es(g,i),N){case 0:l=cy(null,l,g,i,d);break e;case 1:l=_b(null,l,g,i,d);break e;case 11:l=gb(null,l,g,i,d);break e;case 14:l=yb(null,l,g,Es(g.type,i),d);break e}throw Error(n(306,g,""))}return l;case 0:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:Es(g,N),cy(i,l,g,N,d);case 1:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:Es(g,N),_b(i,l,g,N,d);case 3:e:{if(bb(l),i===null)throw Error(n(387));g=l.pendingProps,C=l.memoizedState,N=C.element,M_(i,l),cf(l,g,null,d);var V=l.memoizedState;if(g=V.element,C.isDehydrated)if(C={element:g,isDehydrated:!1,cache:V.cache,pendingSuspenseBoundaries:V.pendingSuspenseBoundaries,transitions:V.transitions},l.updateQueue.baseState=C,l.memoizedState=C,l.flags&256){N=ac(Error(n(423)),l),l=Eb(i,l,g,d,N);break e}else if(g!==N){N=ac(Error(n(424)),l),l=Eb(i,l,g,d,N);break e}else for(zr=xo(l.stateNode.containerInfo.firstChild),$r=l,tn=!0,bs=null,d=O_(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(nc(),g===N){l=Mi(i,l,d);break e}ur(i,l,g,d)}l=l.child}return l;case 5:return U_(l),i===null&&Vg(l),g=l.type,N=l.pendingProps,C=i!==null?i.memoizedProps:null,V=N.children,Ag(g,N)?V=null:C!==null&&Ag(g,C)&&(l.flags|=32),wb(i,l),ur(i,l,V,d),l.child;case 6:return i===null&&Vg(l),null;case 13:return Nb(i,l,d);case 4:return Kg(l,l.stateNode.containerInfo),g=l.pendingProps,i===null?l.child=rc(l,null,g,d):ur(i,l,g,d),l.child;case 11:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:Es(g,N),gb(i,l,g,N,d);case 7:return ur(i,l,l.pendingProps,d),l.child;case 8:return ur(i,l,l.pendingProps.children,d),l.child;case 12:return ur(i,l,l.pendingProps.children,d),l.child;case 10:e:{if(g=l.type._context,N=l.pendingProps,C=l.memoizedProps,V=N.value,Wt(of,g._currentValue),g._currentValue=V,C!==null)if(_s(C.value,V)){if(C.children===N.children&&!_r.current){l=Mi(i,l,d);break e}}else for(C=l.child,C!==null&&(C.return=l);C!==null;){var W=C.dependencies;if(W!==null){V=C.child;for(var G=W.firstContext;G!==null;){if(G.context===g){if(C.tag===1){G=Li(-1,d&-d),G.tag=2;var ae=C.updateQueue;if(ae!==null){ae=ae.shared;var ve=ae.pending;ve===null?G.next=G:(G.next=ve.next,ve.next=G),ae.pending=G}}C.lanes|=d,G=C.alternate,G!==null&&(G.lanes|=d),qg(C.return,d,l),W.lanes|=d;break}G=G.next}}else if(C.tag===10)V=C.type===l.type?null:C.child;else if(C.tag===18){if(V=C.return,V===null)throw Error(n(341));V.lanes|=d,W=V.alternate,W!==null&&(W.lanes|=d),qg(V,d,l),V=C.sibling}else V=C.child;if(V!==null)V.return=C;else for(V=C;V!==null;){if(V===l){V=null;break}if(C=V.sibling,C!==null){C.return=V.return,V=C;break}V=V.return}C=V}ur(i,l,N.children,d),l=l.child}return l;case 9:return N=l.type,g=l.pendingProps.children,ic(l,d),N=ts(N),g=g(N),l.flags|=1,ur(i,l,g,d),l.child;case 14:return g=l.type,N=Es(g,l.pendingProps),N=Es(g.type,N),yb(i,l,g,N,d);case 15:return vb(i,l,l.type,l.pendingProps,d);case 17:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:Es(g,N),vf(i,l),l.tag=1,br(g)?(i=!0,Zh(l)):i=!1,ic(l,d),cb(l,g,N),oy(l,g,N,d),uy(null,l,g,!0,i,d);case 19:return Cb(i,l,d);case 22:return xb(i,l,d)}throw Error(n(156,l.tag))};function Yb(i,l){return Pl(i,l)}function JR(i,l,d,g){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ss(i,l,d,g){return new JR(i,l,d,g)}function Ay(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ZR(i){if(typeof i=="function")return Ay(i)?1:0;if(i!=null){if(i=i.$$typeof,i===O)return 11;if(i===oe)return 14}return 2}function Ao(i,l){var d=i.alternate;return d===null?(d=ss(i.tag,l,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=l,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&14680064,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,l=i.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d}function If(i,l,d,g,N,C){var V=2;if(g=i,typeof i=="function")Ay(i)&&(V=1);else if(typeof i=="string")V=5;else e:switch(i){case R:return Wa(d.children,N,C,l);case I:V=8,N|=8;break;case k:return i=ss(12,d,l,N|2),i.elementType=k,i.lanes=C,i;case F:return i=ss(13,d,l,N),i.elementType=F,i.lanes=C,i;case ne:return i=ss(19,d,l,N),i.elementType=ne,i.lanes=C,i;case ee:return Af(d,N,C,l);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case L:V=10;break e;case D:V=9;break e;case O:V=11;break e;case oe:V=14;break e;case Q:V=16,g=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return l=ss(V,d,l,N),l.elementType=i,l.type=g,l.lanes=C,l}function Wa(i,l,d,g){return i=ss(7,i,g,l),i.lanes=d,i}function Af(i,l,d,g){return i=ss(22,i,g,l),i.elementType=ee,i.lanes=d,i.stateNode={isHidden:!1},i}function ky(i,l,d){return i=ss(6,i,null,l),i.lanes=d,i}function Py(i,l,d){return l=ss(4,i.children!==null?i.children:[],i.key,l),l.lanes=d,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}function e2(i,l,d,g,N){this.tag=l,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uo(0),this.expirationTimes=uo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uo(0),this.identifierPrefix=g,this.onRecoverableError=N,this.mutableSourceEagerHydrationData=null}function Ry(i,l,d,g,N,C,V,W,G){return i=new e2(i,l,d,W,G),l===1?(l=1,C===!0&&(l|=8)):l=0,C=ss(3,null,null,l),i.current=C,C.stateNode=i,C.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hg(C),i}function t2(i,l,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:g==null?null:""+g,children:i,containerInfo:l,implementation:d}}function Xb(i){if(!i)return _o;i=i._reactInternals;e:{if(Dt(i)!==i||i.tag!==1)throw Error(n(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(br(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(i.tag===1){var d=i.type;if(br(d))return S_(i,d,l)}return l}function Jb(i,l,d,g,N,C,V,W,G){return i=Ry(d,g,!0,i,N,C,V,W,G),i.context=Xb(null),d=i.current,g=dr(),N=To(d),C=Li(g,N),C.callback=l??null,No(d,C,N),i.current.lanes=N,ho(i,N,g),Sr(i,g),i}function kf(i,l,d,g){var N=l.current,C=dr(),V=To(N);return d=Xb(d),l.context===null?l.context=d:l.pendingContext=d,l=Li(C,V),l.payload={element:i},g=g===void 0?null:g,g!==null&&(l.callback=g),i=No(N,l,V),i!==null&&(Cs(i,N,V,C),lf(i,N,V)),V}function Pf(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Zb(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<l?d:l}}function Dy(i,l){Zb(i,l),(i=i.alternate)&&Zb(i,l)}function n2(){return null}var eE=typeof reportError=="function"?reportError:function(i){console.error(i)};function Oy(i){this._internalRoot=i}Rf.prototype.render=Oy.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(n(409));kf(i,l,null,null)},Rf.prototype.unmount=Oy.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;za(function(){kf(null,i,null,null)}),l[ki]=null}};function Rf(i){this._internalRoot=i}Rf.prototype.unstable_scheduleHydration=function(i){if(i){var l=Ph();i={blockedOn:null,target:i,priority:l};for(var d=0;d<Qs.length&&l!==0&&l<Qs[d].priority;d++);Qs.splice(d,0,i),d===0&&Oh(i)}};function Ly(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Df(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function tE(){}function r2(i,l,d,g,N){if(N){if(typeof g=="function"){var C=g;g=function(){var ae=Pf(V);C.call(ae)}}var V=Jb(l,g,i,0,null,!1,!1,"",tE);return i._reactRootContainer=V,i[ki]=V.current,Vu(i.nodeType===8?i.parentNode:i),za(),V}for(;N=i.lastChild;)i.removeChild(N);if(typeof g=="function"){var W=g;g=function(){var ae=Pf(G);W.call(ae)}}var G=Ry(i,0,!1,null,null,!1,!1,"",tE);return i._reactRootContainer=G,i[ki]=G.current,Vu(i.nodeType===8?i.parentNode:i),za(function(){kf(l,G,d,g)}),G}function Of(i,l,d,g,N){var C=d._reactRootContainer;if(C){var V=C;if(typeof N=="function"){var W=N;N=function(){var G=Pf(V);W.call(G)}}kf(l,V,i,N)}else V=r2(d,l,i,N,g);return Pf(V)}Ah=function(i){switch(i.tag){case 3:var l=i.stateNode;if(l.current.memoizedState.isDehydrated){var d=co(l.pendingLanes);d!==0&&(fo(l,d|1),Sr(l,qt()),(At&6)===0&&(uc=qt()+500,bo()))}break;case 13:za(function(){var g=Oi(i,1);if(g!==null){var N=dr();Cs(g,i,1,N)}}),Dy(i,1)}},Ol=function(i){if(i.tag===13){var l=Oi(i,134217728);if(l!==null){var d=dr();Cs(l,i,134217728,d)}Dy(i,134217728)}},kh=function(i){if(i.tag===13){var l=To(i),d=Oi(i,l);if(d!==null){var g=dr();Cs(d,i,l,g)}Dy(i,l)}},Ph=function(){return Et},Rh=function(i,l){var d=Et;try{return Et=i,l()}finally{Et=d}},bt=function(i,l,d){switch(l){case"input":if(ct(i,d),l=d.name,d.type==="radio"&&l!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==i&&g.form===i.form){var N=Xh(g);if(!N)throw Error(n(90));Ue(g),ct(g,N)}}}break;case"textarea":In(i,d);break;case"select":l=d.value,l!=null&&Or(i,!!d.multiple,l,!1)}},be=jy,qe=za;var s2={usingClientEntryPoint:!1,Events:[zu,Xl,Xh,ar,ie,jy]},nd={findFiberByHostInstance:Da,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},i2={bundleType:nd.bundleType,version:nd.version,rendererPackageName:nd.rendererPackageName,rendererConfig:nd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Eu(i),i===null?null:i.stateNode},findFiberByHostInstance:nd.findFiberByHostInstance||n2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lf.isDisabled&&Lf.supportsFiber)try{ja=Lf.inject(i2),Mr=Lf}catch{}}return Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s2,Cr.createPortal=function(i,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ly(l))throw Error(n(200));return t2(i,l,null,d)},Cr.createRoot=function(i,l){if(!Ly(i))throw Error(n(299));var d=!1,g="",N=eE;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(N=l.onRecoverableError)),l=Ry(i,1,!1,null,null,d,!1,g,N),i[ki]=l.current,Vu(i.nodeType===8?i.parentNode:i),new Oy(l)},Cr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=Eu(l),i=i===null?null:i.stateNode,i},Cr.flushSync=function(i){return za(i)},Cr.hydrate=function(i,l,d){if(!Df(l))throw Error(n(200));return Of(null,i,l,!0,d)},Cr.hydrateRoot=function(i,l,d){if(!Ly(i))throw Error(n(405));var g=d!=null&&d.hydratedSources||null,N=!1,C="",V=eE;if(d!=null&&(d.unstable_strictMode===!0&&(N=!0),d.identifierPrefix!==void 0&&(C=d.identifierPrefix),d.onRecoverableError!==void 0&&(V=d.onRecoverableError)),l=Jb(l,null,i,1,d??null,N,!1,C,V),i[ki]=l.current,Vu(i),g)for(i=0;i<g.length;i++)d=g[i],N=d._getVersion,N=N(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,N]:l.mutableSourceEagerHydrationData.push(d,N);return new Rf(l)},Cr.render=function(i,l,d){if(!Df(l))throw Error(n(200));return Of(null,i,l,!1,d)},Cr.unmountComponentAtNode=function(i){if(!Df(i))throw Error(n(40));return i._reactRootContainer?(za(function(){Of(null,null,i,!1,function(){i._reactRootContainer=null,i[ki]=null})}),!0):!1},Cr.unstable_batchedUpdates=jy,Cr.unstable_renderSubtreeIntoContainer=function(i,l,d,g){if(!Df(d))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return Of(i,l,d,!1,g)},Cr.version="18.3.1-next-f1338f8080-20240426",Cr}var hE;function NS(){if(hE)return zy.exports;hE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),zy.exports=E2(),zy.exports}var wl=NS();const hp=bS(wl);function Qe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function N2(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function SS(...t){return e=>t.forEach(n=>N2(n,e))}function kt(...t){return _.useCallback(SS(...t),t)}function to(t,e=[]){let n=[];function r(a,c){const u=_.createContext(c),h=n.length;n=[...n,c];function f(y){const{scope:v,children:x,...E}=y,w=(v==null?void 0:v[t][h])||u,b=_.useMemo(()=>E,Object.values(E));return o.jsx(w.Provider,{value:b,children:x})}function p(y,v){const x=(v==null?void 0:v[t][h])||u,E=_.useContext(x);if(E)return E;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${a}\``)}return f.displayName=a+"Provider",[f,p]}const s=()=>{const a=n.map(c=>_.createContext(c));return function(u){const h=(u==null?void 0:u[t])||a;return _.useMemo(()=>({[`__scope${t}`]:{...u,[t]:h}}),[u,h])}};return s.scopeName=t,[r,S2(s,...e)]}function S2(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:f})=>{const y=h(a)[`__scope${f}`];return{...u,...y}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return n.scopeName=e.scopeName,n}var ll=_.forwardRef((t,e)=>{const{children:n,...r}=t,s=_.Children.toArray(n),a=s.find(C2);if(a){const c=a.props.children,u=s.map(h=>h===a?_.Children.count(c)>1?_.Children.only(null):_.isValidElement(c)?c.props.children:null:h);return o.jsx(Tv,{...r,ref:e,children:_.isValidElement(c)?_.cloneElement(c,void 0,u):null})}return o.jsx(Tv,{...r,ref:e,children:n})});ll.displayName="Slot";var Tv=_.forwardRef((t,e)=>{const{children:n,...r}=t;if(_.isValidElement(n)){const s=T2(n);return _.cloneElement(n,{...j2(r,n.props),ref:e?SS(e,s):s})}return _.Children.count(n)>1?_.Children.only(null):null});Tv.displayName="SlotClone";var CS=({children:t})=>o.jsx(o.Fragment,{children:t});function C2(t){return _.isValidElement(t)&&t.type===CS}function j2(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...u)=>{a(...u),s(...u)}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function T2(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Xx(t){const e=t+"CollectionProvider",[n,r]=to(e),[s,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),c=x=>{const{scope:E,children:w}=x,b=Se.useRef(null),A=Se.useRef(new Map).current;return o.jsx(s,{scope:E,itemMap:A,collectionRef:b,children:w})};c.displayName=e;const u=t+"CollectionSlot",h=Se.forwardRef((x,E)=>{const{scope:w,children:b}=x,A=a(u,w),j=kt(E,A.collectionRef);return o.jsx(ll,{ref:j,children:b})});h.displayName=u;const f=t+"CollectionItemSlot",p="data-radix-collection-item",y=Se.forwardRef((x,E)=>{const{scope:w,children:b,...A}=x,j=Se.useRef(null),T=kt(E,j),M=a(f,w);return Se.useEffect(()=>(M.itemMap.set(j,{ref:j,...A}),()=>void M.itemMap.delete(j))),o.jsx(ll,{[p]:"",ref:T,children:b})});y.displayName=f;function v(x){const E=a(t+"CollectionConsumer",x);return Se.useCallback(()=>{const b=E.collectionRef.current;if(!b)return[];const A=Array.from(b.querySelectorAll(`[${p}]`));return Array.from(E.itemMap.values()).sort((M,$)=>A.indexOf(M.ref.current)-A.indexOf($.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:c,Slot:h,ItemSlot:y},v,r]}var I2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],et=I2.reduce((t,e)=>{const n=_.forwardRef((r,s)=>{const{asChild:a,...c}=r,u=a?ll:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(u,{...c,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function fp(t,e){t&&wl.flushSync(()=>t.dispatchEvent(e))}function Tn(t){const e=_.useRef(t);return _.useEffect(()=>{e.current=t}),_.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Jx(t,e=globalThis==null?void 0:globalThis.document){const n=Tn(t);_.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var A2="DismissableLayer",Iv="dismissableLayer.update",k2="dismissableLayer.pointerDownOutside",P2="dismissableLayer.focusOutside",fE,jS=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),TS=_.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=t,f=_.useContext(jS),[p,y]=_.useState(null),v=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=_.useState({}),E=kt(e,R=>y(R)),w=Array.from(f.layers),[b]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),A=w.indexOf(b),j=p?w.indexOf(p):-1,T=f.layersWithOutsidePointerEventsDisabled.size>0,M=j>=A,$=D2(R=>{const I=R.target,k=[...f.branches].some(L=>L.contains(I));!M||k||(s==null||s(R),c==null||c(R),R.defaultPrevented||u==null||u())},v),z=O2(R=>{const I=R.target;[...f.branches].some(L=>L.contains(I))||(a==null||a(R),c==null||c(R),R.defaultPrevented||u==null||u())},v);return Jx(R=>{j===f.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&u&&(R.preventDefault(),u()))},v),_.useEffect(()=>{if(p)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(fE=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(p)),f.layers.add(p),mE(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=fE)}},[p,v,n,f]),_.useEffect(()=>()=>{p&&(f.layers.delete(p),f.layersWithOutsidePointerEventsDisabled.delete(p),mE())},[p,f]),_.useEffect(()=>{const R=()=>x({});return document.addEventListener(Iv,R),()=>document.removeEventListener(Iv,R)},[]),o.jsx(et.div,{...h,ref:E,style:{pointerEvents:T?M?"auto":"none":void 0,...t.style},onFocusCapture:Qe(t.onFocusCapture,z.onFocusCapture),onBlurCapture:Qe(t.onBlurCapture,z.onBlurCapture),onPointerDownCapture:Qe(t.onPointerDownCapture,$.onPointerDownCapture)})});TS.displayName=A2;var R2="DismissableLayerBranch",IS=_.forwardRef((t,e)=>{const n=_.useContext(jS),r=_.useRef(null),s=kt(e,r);return _.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(et.div,{...t,ref:s})});IS.displayName=R2;function D2(t,e=globalThis==null?void 0:globalThis.document){const n=Tn(t),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){AS(k2,n,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function O2(t,e=globalThis==null?void 0:globalThis.document){const n=Tn(t),r=_.useRef(!1);return _.useEffect(()=>{const s=a=>{a.target&&!r.current&&AS(P2,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function mE(){const t=new CustomEvent(Iv);document.dispatchEvent(t)}function AS(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?fp(s,a):s.dispatchEvent(a)}var L2=TS,M2=IS,rn=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},F2="Portal",kS=_.forwardRef((t,e)=>{var u;const{container:n,...r}=t,[s,a]=_.useState(!1);rn(()=>a(!0),[]);const c=n||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?hp.createPortal(o.jsx(et.div,{...r,ref:e}),c):null});kS.displayName=F2;function V2(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var Zx=t=>{const{present:e,children:n}=t,r=U2(e),s=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),a=kt(r.ref,$2(s));return typeof n=="function"||r.isPresent?_.cloneElement(s,{ref:a}):null};Zx.displayName="Presence";function U2(t){const[e,n]=_.useState(),r=_.useRef({}),s=_.useRef(t),a=_.useRef("none"),c=t?"mounted":"unmounted",[u,h]=V2(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const f=Vf(r.current);a.current=u==="mounted"?f:"none"},[u]),rn(()=>{const f=r.current,p=s.current;if(p!==t){const v=a.current,x=Vf(f);t?h("MOUNT"):x==="none"||(f==null?void 0:f.display)==="none"?h("UNMOUNT"):h(p&&v!==x?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,h]),rn(()=>{if(e){const f=y=>{const x=Vf(r.current).includes(y.animationName);y.target===e&&x&&wl.flushSync(()=>h("ANIMATION_END"))},p=y=>{y.target===e&&(a.current=Vf(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:_.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function Vf(t){return(t==null?void 0:t.animationName)||"none"}function $2(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function cl({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=z2({defaultProp:e,onChange:n}),a=t!==void 0,c=a?t:r,u=Tn(n),h=_.useCallback(f=>{if(a){const y=typeof f=="function"?f(t):f;y!==t&&u(y)}else s(f)},[a,t,s,u]);return[c,h]}function z2({defaultProp:t,onChange:e}){const n=_.useState(t),[r]=n,s=_.useRef(r),a=Tn(e);return _.useEffect(()=>{s.current!==r&&(a(r),s.current=r)},[r,s,a]),n}var B2="VisuallyHidden",sh=_.forwardRef((t,e)=>o.jsx(et.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));sh.displayName=B2;var q2=sh,ew="ToastProvider",[tw,W2,H2]=Xx("Toast"),[PS,bW]=to("Toast",[H2]),[K2,mp]=PS(ew),RS=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:c}=t,[u,h]=_.useState(null),[f,p]=_.useState(0),y=_.useRef(!1),v=_.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${ew}\`. Expected non-empty \`string\`.`),o.jsx(tw.Provider,{scope:e,children:o.jsx(K2,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:f,viewport:u,onViewportChange:h,onToastAdd:_.useCallback(()=>p(x=>x+1),[]),onToastRemove:_.useCallback(()=>p(x=>x-1),[]),isFocusedToastEscapeKeyDownRef:y,isClosePausedRef:v,children:c})})};RS.displayName=ew;var DS="ToastViewport",G2=["F8"],Av="toast.viewportPause",kv="toast.viewportResume",OS=_.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=G2,label:s="Notifications ({hotkey})",...a}=t,c=mp(DS,n),u=W2(n),h=_.useRef(null),f=_.useRef(null),p=_.useRef(null),y=_.useRef(null),v=kt(e,y,c.onViewportChange),x=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=c.toastCount>0;_.useEffect(()=>{const b=A=>{var T;r.every(M=>A[M]||A.code===M)&&((T=y.current)==null||T.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),_.useEffect(()=>{const b=h.current,A=y.current;if(E&&b&&A){const j=()=>{if(!c.isClosePausedRef.current){const z=new CustomEvent(Av);A.dispatchEvent(z),c.isClosePausedRef.current=!0}},T=()=>{if(c.isClosePausedRef.current){const z=new CustomEvent(kv);A.dispatchEvent(z),c.isClosePausedRef.current=!1}},M=z=>{!b.contains(z.relatedTarget)&&T()},$=()=>{b.contains(document.activeElement)||T()};return b.addEventListener("focusin",j),b.addEventListener("focusout",M),b.addEventListener("pointermove",j),b.addEventListener("pointerleave",$),window.addEventListener("blur",j),window.addEventListener("focus",T),()=>{b.removeEventListener("focusin",j),b.removeEventListener("focusout",M),b.removeEventListener("pointermove",j),b.removeEventListener("pointerleave",$),window.removeEventListener("blur",j),window.removeEventListener("focus",T)}}},[E,c.isClosePausedRef]);const w=_.useCallback(({tabbingDirection:b})=>{const j=u().map(T=>{const M=T.ref.current,$=[M,...aD(M)];return b==="forwards"?$:$.reverse()});return(b==="forwards"?j.reverse():j).flat()},[u]);return _.useEffect(()=>{const b=y.current;if(b){const A=j=>{var $,z,R;const T=j.altKey||j.ctrlKey||j.metaKey;if(j.key==="Tab"&&!T){const I=document.activeElement,k=j.shiftKey;if(j.target===b&&k){($=f.current)==null||$.focus();return}const O=w({tabbingDirection:k?"backwards":"forwards"}),F=O.findIndex(ne=>ne===I);Wy(O.slice(F+1))?j.preventDefault():k?(z=f.current)==null||z.focus():(R=p.current)==null||R.focus()}};return b.addEventListener("keydown",A),()=>b.removeEventListener("keydown",A)}},[u,w]),o.jsxs(M2,{ref:h,role:"region","aria-label":s.replace("{hotkey}",x),tabIndex:-1,style:{pointerEvents:E?void 0:"none"},children:[E&&o.jsx(Pv,{ref:f,onFocusFromOutsideViewport:()=>{const b=w({tabbingDirection:"forwards"});Wy(b)}}),o.jsx(tw.Slot,{scope:n,children:o.jsx(et.ol,{tabIndex:-1,...a,ref:v})}),E&&o.jsx(Pv,{ref:p,onFocusFromOutsideViewport:()=>{const b=w({tabbingDirection:"backwards"});Wy(b)}})]})});OS.displayName=DS;var LS="ToastFocusProxy",Pv=_.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,a=mp(LS,n);return o.jsx(sh,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:c=>{var f;const u=c.relatedTarget;!((f=a.viewport)!=null&&f.contains(u))&&r()}})});Pv.displayName=LS;var pp="Toast",Q2="toast.swipeStart",Y2="toast.swipeMove",X2="toast.swipeCancel",J2="toast.swipeEnd",MS=_.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:a,...c}=t,[u=!0,h]=cl({prop:r,defaultProp:s,onChange:a});return o.jsx(Zx,{present:n||u,children:o.jsx(tD,{open:u,...c,ref:e,onClose:()=>h(!1),onPause:Tn(t.onPause),onResume:Tn(t.onResume),onSwipeStart:Qe(t.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Qe(t.onSwipeMove,f=>{const{x:p,y}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${p}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${y}px`)}),onSwipeCancel:Qe(t.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Qe(t.onSwipeEnd,f=>{const{x:p,y}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${p}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${y}px`),h(!1)})})})});MS.displayName=pp;var[Z2,eD]=PS(pp,{onClose(){}}),tD=_.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:a,onClose:c,onEscapeKeyDown:u,onPause:h,onResume:f,onSwipeStart:p,onSwipeMove:y,onSwipeCancel:v,onSwipeEnd:x,...E}=t,w=mp(pp,n),[b,A]=_.useState(null),j=kt(e,ne=>A(ne)),T=_.useRef(null),M=_.useRef(null),$=s||w.duration,z=_.useRef(0),R=_.useRef($),I=_.useRef(0),{onToastAdd:k,onToastRemove:L}=w,D=Tn(()=>{var oe;(b==null?void 0:b.contains(document.activeElement))&&((oe=w.viewport)==null||oe.focus()),c()}),O=_.useCallback(ne=>{!ne||ne===1/0||(window.clearTimeout(I.current),z.current=new Date().getTime(),I.current=window.setTimeout(D,ne))},[D]);_.useEffect(()=>{const ne=w.viewport;if(ne){const oe=()=>{O(R.current),f==null||f()},Q=()=>{const ee=new Date().getTime()-z.current;R.current=R.current-ee,window.clearTimeout(I.current),h==null||h()};return ne.addEventListener(Av,Q),ne.addEventListener(kv,oe),()=>{ne.removeEventListener(Av,Q),ne.removeEventListener(kv,oe)}}},[w.viewport,$,h,f,O]),_.useEffect(()=>{a&&!w.isClosePausedRef.current&&O($)},[a,$,w.isClosePausedRef,O]),_.useEffect(()=>(k(),()=>L()),[k,L]);const F=_.useMemo(()=>b?qS(b):null,[b]);return w.viewport?o.jsxs(o.Fragment,{children:[F&&o.jsx(nD,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:F}),o.jsx(Z2,{scope:n,onClose:D,children:wl.createPortal(o.jsx(tw.ItemSlot,{scope:n,children:o.jsx(L2,{asChild:!0,onEscapeKeyDown:Qe(u,()=>{w.isFocusedToastEscapeKeyDownRef.current||D(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(et.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":w.swipeDirection,...E,ref:j,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Qe(t.onKeyDown,ne=>{ne.key==="Escape"&&(u==null||u(ne.nativeEvent),ne.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:Qe(t.onPointerDown,ne=>{ne.button===0&&(T.current={x:ne.clientX,y:ne.clientY})}),onPointerMove:Qe(t.onPointerMove,ne=>{if(!T.current)return;const oe=ne.clientX-T.current.x,Q=ne.clientY-T.current.y,ee=!!M.current,q=["left","right"].includes(w.swipeDirection),K=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,Y=q?K(0,oe):0,U=q?0:K(0,Q),H=ne.pointerType==="touch"?10:2,le={x:Y,y:U},ue={originalEvent:ne,delta:le};ee?(M.current=le,Uf(Y2,y,ue,{discrete:!1})):pE(le,w.swipeDirection,H)?(M.current=le,Uf(Q2,p,ue,{discrete:!1}),ne.target.setPointerCapture(ne.pointerId)):(Math.abs(oe)>H||Math.abs(Q)>H)&&(T.current=null)}),onPointerUp:Qe(t.onPointerUp,ne=>{const oe=M.current,Q=ne.target;if(Q.hasPointerCapture(ne.pointerId)&&Q.releasePointerCapture(ne.pointerId),M.current=null,T.current=null,oe){const ee=ne.currentTarget,q={originalEvent:ne,delta:oe};pE(oe,w.swipeDirection,w.swipeThreshold)?Uf(J2,x,q,{discrete:!0}):Uf(X2,v,q,{discrete:!0}),ee.addEventListener("click",K=>K.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),nD=t=>{const{__scopeToast:e,children:n,...r}=t,s=mp(pp,e),[a,c]=_.useState(!1),[u,h]=_.useState(!1);return iD(()=>c(!0)),_.useEffect(()=>{const f=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(f)},[]),u?null:o.jsx(kS,{asChild:!0,children:o.jsx(sh,{...r,children:a&&o.jsxs(o.Fragment,{children:[s.label," ",n]})})})},rD="ToastTitle",FS=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(et.div,{...r,ref:e})});FS.displayName=rD;var sD="ToastDescription",VS=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(et.div,{...r,ref:e})});VS.displayName=sD;var US="ToastAction",$S=_.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?o.jsx(BS,{altText:n,asChild:!0,children:o.jsx(nw,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${US}\`. Expected non-empty \`string\`.`),null)});$S.displayName=US;var zS="ToastClose",nw=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=eD(zS,n);return o.jsx(BS,{asChild:!0,children:o.jsx(et.button,{type:"button",...r,ref:e,onClick:Qe(t.onClick,s.onClose)})})});nw.displayName=zS;var BS=_.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return o.jsx(et.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function qS(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),oD(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const c=r.dataset.radixToastAnnounceAlt;c&&e.push(c)}else e.push(...qS(r))}}),e}function Uf(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?fp(s,a):s.dispatchEvent(a)}var pE=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),a=r>s;return e==="left"||e==="right"?a&&r>n:!a&&s>n};function iD(t=()=>{}){const e=Tn(t);rn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function oD(t){return t.nodeType===t.ELEMENT_NODE}function aD(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Wy(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var lD=RS,WS=OS,HS=MS,KS=FS,GS=VS,QS=$S,YS=nw;function XS(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=XS(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function JS(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=XS(t))&&(r&&(r+=" "),r+=e);return r}const gE=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,yE=JS,ih=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return yE(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=e,c=Object.keys(s).map(f=>{const p=n==null?void 0:n[f],y=a==null?void 0:a[f];if(p===null)return null;const v=gE(p)||gE(y);return s[f][v]}),u=n&&Object.entries(n).reduce((f,p)=>{let[y,v]=p;return v===void 0||(f[y]=v),f},{}),h=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,p)=>{let{class:y,className:v,...x}=p;return Object.entries(x).every(E=>{let[w,b]=E;return Array.isArray(b)?b.includes({...a,...u}[w]):{...a,...u}[w]===b})?[...f,y,v]:f},[]);return yE(t,c,h,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ZS=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=_.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:c,...u},h)=>_.createElement("svg",{ref:h,...uD,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:ZS("lucide",s),...u},[...c.map(([f,p])=>_.createElement(f,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=(t,e)=>{const n=_.forwardRef(({className:r,...s},a)=>_.createElement(dD,{ref:a,iconNode:e,className:ZS(`lucide-${cD(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=Be("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=Be("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=Be("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=Be("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=Be("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=Be("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=Be("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=Be("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=Be("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=Be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=Be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=Be("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=Be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=Be("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=Be("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=Be("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=Be("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=Be("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=Be("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=Be("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=Be("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=Be("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=Be("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=Be("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=Be("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=Be("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=Be("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=Be("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=Be("ImagePlus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=Be("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=Be("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=Be("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=Be("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=Be("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=Be("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=Be("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=Be("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=Be("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=Be("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=Be("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=Be("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=Be("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=Be("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=Be("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=Be("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=Be("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=Be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=Be("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=Be("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=Be("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=Be("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=Be("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=Be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=Be("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=Be("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=Be("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=Be("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=Be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=Be("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=Be("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=Be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),sw="-",LD=t=>{const e=FD(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:c=>{const u=c.split(sw);return u[0]===""&&u.length!==1&&u.shift(),iC(u,e)||MD(c)},getConflictingClassGroupIds:(c,u)=>{const h=n[c]||[];return u&&r[c]?[...h,...r[c]]:h}}},iC=(t,e)=>{var c;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?iC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const a=t.join(sw);return(c=e.validators.find(({validator:u})=>u(a)))==null?void 0:c.classGroupId},xE=/^\[(.+)\]$/,MD=t=>{if(xE.test(t)){const e=xE.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},FD=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return UD(Object.entries(t.classGroups),n).forEach(([a,c])=>{Mv(c,r,a,e)}),r},Mv=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const a=s===""?e:wE(e,s);a.classGroupId=n;return}if(typeof s=="function"){if(VD(s)){Mv(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,c])=>{Mv(c,wE(e,a),n,r)})})},wE=(t,e)=>{let n=t;return e.split(sw).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},VD=t=>t.isThemeGetter,UD=(t,e)=>e?t.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([c,u])=>[e+c,u])):a);return[n,s]}):t,$D=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(a,c)=>{n.set(a,c),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let c=n.get(a);if(c!==void 0)return c;if((c=r.get(a))!==void 0)return s(a,c),c},set(a,c){n.has(a)?n.set(a,c):s(a,c)}}},oC="!",zD=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],a=e.length,c=u=>{const h=[];let f=0,p=0,y;for(let b=0;b<u.length;b++){let A=u[b];if(f===0){if(A===s&&(r||u.slice(b,b+a)===e)){h.push(u.slice(p,b)),p=b+a;continue}if(A==="/"){y=b;continue}}A==="["?f++:A==="]"&&f--}const v=h.length===0?u:u.substring(p),x=v.startsWith(oC),E=x?v.substring(1):v,w=y&&y>p?y-p:void 0;return{modifiers:h,hasImportantModifier:x,baseClassName:E,maybePostfixModifierPosition:w}};return n?u=>n({className:u,parseClassName:c}):c},BD=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},qD=t=>({cache:$D(t.cacheSize),parseClassName:zD(t),...LD(t)}),WD=/\s+/,HD=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,a=[],c=t.trim().split(WD);let u="";for(let h=c.length-1;h>=0;h-=1){const f=c[h],{modifiers:p,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:x}=n(f);let E=!!x,w=r(E?v.substring(0,x):v);if(!w){if(!E){u=f+(u.length>0?" "+u:u);continue}if(w=r(v),!w){u=f+(u.length>0?" "+u:u);continue}E=!1}const b=BD(p).join(":"),A=y?b+oC:b,j=A+w;if(a.includes(j))continue;a.push(j);const T=s(w,E);for(let M=0;M<T.length;++M){const $=T[M];a.push(A+$)}u=f+(u.length>0?" "+u:u)}return u};function KD(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=aC(e))&&(r&&(r+=" "),r+=n);return r}const aC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=aC(t[r]))&&(n&&(n+=" "),n+=e);return n};function GD(t,...e){let n,r,s,a=c;function c(h){const f=e.reduce((p,y)=>y(p),t());return n=qD(f),r=n.cache.get,s=n.cache.set,a=u,u(h)}function u(h){const f=r(h);if(f)return f;const p=HD(h,n);return s(h,p),p}return function(){return a(KD.apply(null,arguments))}}const Xt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},lC=/^\[(?:([a-z-]+):)?(.+)\]$/i,QD=/^\d+\/\d+$/,YD=new Set(["px","full","screen"]),XD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,JD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ZD=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,eO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,tO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Vi=t=>Nc(t)||YD.has(t)||QD.test(t),Po=t=>au(t,"length",cO),Nc=t=>!!t&&!Number.isNaN(Number(t)),Ky=t=>au(t,"number",Nc),sd=t=>!!t&&Number.isInteger(Number(t)),nO=t=>t.endsWith("%")&&Nc(t.slice(0,-1)),mt=t=>lC.test(t),Ro=t=>XD.test(t),rO=new Set(["length","size","percentage"]),sO=t=>au(t,rO,cC),iO=t=>au(t,"position",cC),oO=new Set(["image","url"]),aO=t=>au(t,oO,dO),lO=t=>au(t,"",uO),id=()=>!0,au=(t,e,n)=>{const r=lC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},cO=t=>JD.test(t)&&!ZD.test(t),cC=()=>!1,uO=t=>eO.test(t),dO=t=>tO.test(t),hO=()=>{const t=Xt("colors"),e=Xt("spacing"),n=Xt("blur"),r=Xt("brightness"),s=Xt("borderColor"),a=Xt("borderRadius"),c=Xt("borderSpacing"),u=Xt("borderWidth"),h=Xt("contrast"),f=Xt("grayscale"),p=Xt("hueRotate"),y=Xt("invert"),v=Xt("gap"),x=Xt("gradientColorStops"),E=Xt("gradientColorStopPositions"),w=Xt("inset"),b=Xt("margin"),A=Xt("opacity"),j=Xt("padding"),T=Xt("saturate"),M=Xt("scale"),$=Xt("sepia"),z=Xt("skew"),R=Xt("space"),I=Xt("translate"),k=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",mt,e],O=()=>[mt,e],F=()=>["",Vi,Po],ne=()=>["auto",Nc,mt],oe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Q=()=>["solid","dashed","dotted","double","none"],ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>["start","end","center","between","around","evenly","stretch"],K=()=>["","0",mt],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[Nc,mt];return{cacheSize:500,separator:":",theme:{colors:[id],spacing:[Vi,Po],blur:["none","",Ro,mt],brightness:U(),borderColor:[t],borderRadius:["none","","full",Ro,mt],borderSpacing:O(),borderWidth:F(),contrast:U(),grayscale:K(),hueRotate:U(),invert:K(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[nO,Po],inset:D(),margin:D(),opacity:U(),padding:O(),saturate:U(),scale:U(),sepia:K(),skew:U(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",mt]}],container:["container"],columns:[{columns:[Ro]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...oe(),mt]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",sd,mt]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",mt]}],grow:[{grow:K()}],shrink:[{shrink:K()}],order:[{order:["first","last","none",sd,mt]}],"grid-cols":[{"grid-cols":[id]}],"col-start-end":[{col:["auto",{span:["full",sd,mt]},mt]}],"col-start":[{"col-start":ne()}],"col-end":[{"col-end":ne()}],"grid-rows":[{"grid-rows":[id]}],"row-start-end":[{row:["auto",{span:[sd,mt]},mt]}],"row-start":[{"row-start":ne()}],"row-end":[{"row-end":ne()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",mt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",mt]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",mt,e]}],"min-w":[{"min-w":[mt,e,"min","max","fit"]}],"max-w":[{"max-w":[mt,e,"none","full","min","max","fit","prose",{screen:[Ro]},Ro]}],h:[{h:[mt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[mt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[mt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[mt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ro,Po]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ky]}],"font-family":[{font:[id]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",mt]}],"line-clamp":[{"line-clamp":["none",Nc,Ky]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Vi,mt]}],"list-image":[{"list-image":["none",mt]}],"list-style-type":[{list:["none","disc","decimal",mt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[A]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Vi,Po]}],"underline-offset":[{"underline-offset":["auto",Vi,mt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",mt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",mt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[A]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...oe(),iO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",sO]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},aO]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[A]}],"border-style":[{border:[...Q(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[A]}],"divide-style":[{divide:Q()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Q()]}],"outline-offset":[{"outline-offset":[Vi,mt]}],"outline-w":[{outline:[Vi,Po]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[A]}],"ring-offset-w":[{"ring-offset":[Vi,Po]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ro,lO]}],"shadow-color":[{shadow:[id]}],opacity:[{opacity:[A]}],"mix-blend":[{"mix-blend":[...ee(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ee()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",Ro,mt]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[y]}],saturate:[{saturate:[T]}],sepia:[{sepia:[$]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[y]}],"backdrop-opacity":[{"backdrop-opacity":[A]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[$]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",mt]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",mt]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",mt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[M]}],"scale-x":[{"scale-x":[M]}],"scale-y":[{"scale-y":[M]}],rotate:[{rotate:[sd,mt]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[z]}],"skew-y":[{"skew-y":[z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",mt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",mt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",mt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Vi,Po,Ky]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},fO=GD(hO);function Xe(...t){return fO(JS(t))}function mO(t){if(!t||typeof t!="string")return null;const e=t.trim();try{const n=e.match(/https?:\/\/(?:drive\.google\.com)\/(?:file\/d\/([a-zA-Z0-9_-]+)\/view|open\?id=([a-zA-Z0-9_-]+))/i);if(n){const r=n[1]||n[2];if(r)return`https://drive.google.com/uc?export=view&id=${r}`}if(/dropbox\.com\//i.test(e)){if(e.includes("dl=0"))return e.replace("dl=0","dl=1");if(!e.includes("dl="))return e+"?dl=1"}return e}catch{return e}}const pO=lD,uC=_.forwardRef(({className:t,...e},n)=>o.jsx(WS,{ref:n,className:Xe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));uC.displayName=WS.displayName;const gO=ih("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),dC=_.forwardRef(({className:t,variant:e,...n},r)=>o.jsx(HS,{ref:r,className:Xe(gO({variant:e}),t),...n}));dC.displayName=HS.displayName;const yO=_.forwardRef(({className:t,...e},n)=>o.jsx(QS,{ref:n,className:Xe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));yO.displayName=QS.displayName;const hC=_.forwardRef(({className:t,...e},n)=>o.jsx(YS,{ref:n,className:Xe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:o.jsx(Kc,{className:"h-4 w-4"})}));hC.displayName=YS.displayName;const fC=_.forwardRef(({className:t,...e},n)=>o.jsx(KS,{ref:n,className:Xe("text-sm font-semibold",t),...e}));fC.displayName=KS.displayName;const mC=_.forwardRef(({className:t,...e},n)=>o.jsx(GS,{ref:n,className:Xe("text-sm opacity-90",t),...e}));mC.displayName=GS.displayName;function vO(){const{toasts:t}=w2();return o.jsxs(pO,{children:[t.map(function({id:e,title:n,description:r,action:s,...a}){return o.jsxs(dC,{...a,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(fC,{children:n}),r&&o.jsx(mC,{children:r})]}),s,o.jsx(hC,{})]},e)}),o.jsx(uC,{})]})}var $f={},_E;function xO(){if(_E)return $f;_E=1;var t=NS();return $f.createRoot=t.createRoot,$f.hydrateRoot=t.hydrateRoot,$f}var wO=xO(),bE=["light","dark"],_O="(prefers-color-scheme: dark)",bO=_.createContext(void 0),EO={setTheme:t=>{},themes:[]},NO=()=>{var t;return(t=_.useContext(bO))!=null?t:EO};_.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:c,attrs:u,nonce:h})=>{let f=a==="system",p=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${u.map(E=>`'${E}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,y=s?bE.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",v=(E,w=!1,b=!0)=>{let A=c?c[E]:E,j=w?E+"|| ''":`'${A}'`,T="";return s&&b&&!w&&bE.includes(E)&&(T+=`d.style.colorScheme = '${E}';`),n==="class"?w||A?T+=`c.add(${j})`:T+="null":A&&(T+=`d[s](n,${j})`),T},x=t?`!function(){${p}${v(t)}}()`:r?`!function(){try{${p}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${f})){var t='${_O}',m=window.matchMedia(t);if(m.media!==t||m.matches){${v("dark")}}else{${v("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${v(c?"x[e]":"e",!0)}}${f?"":"else{"+v(a,!1,!1)+"}"}${y}}catch(e){}}()`:`!function(){try{${p}var e=localStorage.getItem('${e}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${v(c?"x[e]":"e",!0)}}else{${v(a,!1,!1)};}${y}}catch(t){}}();`;return _.createElement("script",{nonce:h,dangerouslySetInnerHTML:{__html:x}})});var SO=t=>{switch(t){case"success":return TO;case"info":return AO;case"warning":return IO;case"error":return kO;default:return null}},CO=Array(12).fill(0),jO=({visible:t})=>Se.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},Se.createElement("div",{className:"sonner-spinner"},CO.map((e,n)=>Se.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),TO=Se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Se.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),IO=Se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Se.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),AO=Se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),kO=Se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),PO=()=>{let[t,e]=Se.useState(document.hidden);return Se.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Fv=1,RO=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,a=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Fv++,c=this.toasts.find(h=>h.id===a),u=e.dismissible===void 0?!0:e.dismissible;return c?this.toasts=this.toasts.map(h=>h.id===a?(this.publish({...h,...e,id:a,title:r}),{...h,...e,id:a,dismissible:u,title:r}):h):this.addToast({title:r,...s,dismissible:u,id:a}),a},this.dismiss=e=>(e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),a=r!==void 0;return s.then(async c=>{if(OO(c)&&!c.ok){a=!1;let u=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:u,description:h})}else if(n.success!==void 0){a=!1;let u=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:u,description:h})}}).catch(async c=>{if(n.error!==void 0){a=!1;let u=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:u,description:h})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),r},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||Fv++;return this.create({jsx:e(r),id:r,...n}),r},this.subscribers=[],this.toasts=[]}},qr=new RO,DO=(t,e)=>{let n=(e==null?void 0:e.id)||Fv++;return qr.addToast({title:t,...e,id:n}),n},OO=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",LO=DO,MO=()=>qr.toasts;Object.assign(LO,{success:qr.success,info:qr.info,warning:qr.warning,error:qr.error,custom:qr.custom,message:qr.message,promise:qr.promise,dismiss:qr.dismiss,loading:qr.loading},{getHistory:MO});function FO(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}FO(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function zf(t){return t.label!==void 0}var VO=3,UO="32px",$O=4e3,zO=356,BO=14,qO=20,WO=200;function HO(...t){return t.filter(Boolean).join(" ")}var KO=t=>{var e,n,r,s,a,c,u,h,f,p;let{invert:y,toast:v,unstyled:x,interacting:E,setHeights:w,visibleToasts:b,heights:A,index:j,toasts:T,expanded:M,removeToast:$,defaultRichColors:z,closeButton:R,style:I,cancelButtonStyle:k,actionButtonStyle:L,className:D="",descriptionClassName:O="",duration:F,position:ne,gap:oe,loadingIcon:Q,expandByDefault:ee,classNames:q,icons:K,closeButtonAriaLabel:Y="Close toast",pauseWhenPageIsHidden:U,cn:H}=t,[le,ue]=Se.useState(!1),[ke,Te]=Se.useState(!1),[_e,Ae]=Se.useState(!1),[He,Ve]=Se.useState(!1),[me,Ue]=Se.useState(0),[ht,ft]=Se.useState(0),fe=Se.useRef(null),Ce=Se.useRef(null),ct=j===0,Ht=j+1<=b,Mt=v.type,vn=v.dismissible!==!1,Or=v.className||"",wi=v.descriptionClassName||"",or=Se.useMemo(()=>A.findIndex(tt=>tt.toastId===v.id)||0,[A,v.id]),In=Se.useMemo(()=>{var tt;return(tt=v.closeButton)!=null?tt:R},[v.closeButton,R]),Ws=Se.useMemo(()=>v.duration||F||$O,[v.duration,F]),Kt=Se.useRef(0),Vt=Se.useRef(0),Wn=Se.useRef(0),Hn=Se.useRef(null),[An,fs]=ne.split("-"),Qr=Se.useMemo(()=>A.reduce((tt,_t,bt)=>bt>=or?tt:tt+_t.height,0),[A,or]),Hs=PO(),_i=v.invert||y,ms=Mt==="loading";Vt.current=Se.useMemo(()=>or*oe+Qr,[or,Qr]),Se.useEffect(()=>{ue(!0)},[]),Se.useLayoutEffect(()=>{if(!le)return;let tt=Ce.current,_t=tt.style.height;tt.style.height="auto";let bt=tt.getBoundingClientRect().height;tt.style.height=_t,ft(bt),w(Gt=>Gt.find(on=>on.toastId===v.id)?Gt.map(on=>on.toastId===v.id?{...on,height:bt}:on):[{toastId:v.id,height:bt,position:v.position},...Gt])},[le,v.title,v.description,w,v.id]);let Kn=Se.useCallback(()=>{Te(!0),Ue(Vt.current),w(tt=>tt.filter(_t=>_t.toastId!==v.id)),setTimeout(()=>{$(v)},WO)},[v,$,w,Vt]);Se.useEffect(()=>{if(v.promise&&Mt==="loading"||v.duration===1/0||v.type==="loading")return;let tt,_t=Ws;return M||E||U&&Hs?(()=>{if(Wn.current<Kt.current){let bt=new Date().getTime()-Kt.current;_t=_t-bt}Wn.current=new Date().getTime()})():_t!==1/0&&(Kt.current=new Date().getTime(),tt=setTimeout(()=>{var bt;(bt=v.onAutoClose)==null||bt.call(v,v),Kn()},_t)),()=>clearTimeout(tt)},[M,E,ee,v,Ws,Kn,v.promise,Mt,U,Hs]),Se.useEffect(()=>{let tt=Ce.current;if(tt){let _t=tt.getBoundingClientRect().height;return ft(_t),w(bt=>[{toastId:v.id,height:_t,position:v.position},...bt]),()=>w(bt=>bt.filter(Gt=>Gt.toastId!==v.id))}},[w,v.id]),Se.useEffect(()=>{v.delete&&Kn()},[Kn,v.delete]);function bi(){return K!=null&&K.loading?Se.createElement("div",{className:"sonner-loader","data-visible":Mt==="loading"},K.loading):Q?Se.createElement("div",{className:"sonner-loader","data-visible":Mt==="loading"},Q):Se.createElement(jO,{visible:Mt==="loading"})}return Se.createElement("li",{"aria-live":v.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Ce,className:H(D,Or,q==null?void 0:q.toast,(e=v==null?void 0:v.classNames)==null?void 0:e.toast,q==null?void 0:q.default,q==null?void 0:q[Mt],(n=v==null?void 0:v.classNames)==null?void 0:n[Mt]),"data-sonner-toast":"","data-rich-colors":(r=v.richColors)!=null?r:z,"data-styled":!(v.jsx||v.unstyled||x),"data-mounted":le,"data-promise":!!v.promise,"data-removed":ke,"data-visible":Ht,"data-y-position":An,"data-x-position":fs,"data-index":j,"data-front":ct,"data-swiping":_e,"data-dismissible":vn,"data-type":Mt,"data-invert":_i,"data-swipe-out":He,"data-expanded":!!(M||ee&&le),style:{"--index":j,"--toasts-before":j,"--z-index":T.length-j,"--offset":`${ke?me:Vt.current}px`,"--initial-height":ee?"auto":`${ht}px`,...I,...v.style},onPointerDown:tt=>{ms||!vn||(fe.current=new Date,Ue(Vt.current),tt.target.setPointerCapture(tt.pointerId),tt.target.tagName!=="BUTTON"&&(Ae(!0),Hn.current={x:tt.clientX,y:tt.clientY}))},onPointerUp:()=>{var tt,_t,bt,Gt;if(He||!vn)return;Hn.current=null;let on=Number(((tt=Ce.current)==null?void 0:tt.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Lr=new Date().getTime()-((_t=fe.current)==null?void 0:_t.getTime()),ar=Math.abs(on)/Lr;if(Math.abs(on)>=qO||ar>.11){Ue(Vt.current),(bt=v.onDismiss)==null||bt.call(v,v),Kn(),Ve(!0);return}(Gt=Ce.current)==null||Gt.style.setProperty("--swipe-amount","0px"),Ae(!1)},onPointerMove:tt=>{var _t;if(!Hn.current||!vn)return;let bt=tt.clientY-Hn.current.y,Gt=tt.clientX-Hn.current.x,on=(An==="top"?Math.min:Math.max)(0,bt),Lr=tt.pointerType==="touch"?10:2;Math.abs(on)>Lr?(_t=Ce.current)==null||_t.style.setProperty("--swipe-amount",`${bt}px`):Math.abs(Gt)>Lr&&(Hn.current=null)}},In&&!v.jsx?Se.createElement("button",{"aria-label":Y,"data-disabled":ms,"data-close-button":!0,onClick:ms||!vn?()=>{}:()=>{var tt;Kn(),(tt=v.onDismiss)==null||tt.call(v,v)},className:H(q==null?void 0:q.closeButton,(s=v==null?void 0:v.classNames)==null?void 0:s.closeButton)},Se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Se.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Se.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,v.jsx||Se.isValidElement(v.title)?v.jsx||v.title:Se.createElement(Se.Fragment,null,Mt||v.icon||v.promise?Se.createElement("div",{"data-icon":"",className:H(q==null?void 0:q.icon,(a=v==null?void 0:v.classNames)==null?void 0:a.icon)},v.promise||v.type==="loading"&&!v.icon?v.icon||bi():null,v.type!=="loading"?v.icon||(K==null?void 0:K[Mt])||SO(Mt):null):null,Se.createElement("div",{"data-content":"",className:H(q==null?void 0:q.content,(c=v==null?void 0:v.classNames)==null?void 0:c.content)},Se.createElement("div",{"data-title":"",className:H(q==null?void 0:q.title,(u=v==null?void 0:v.classNames)==null?void 0:u.title)},v.title),v.description?Se.createElement("div",{"data-description":"",className:H(O,wi,q==null?void 0:q.description,(h=v==null?void 0:v.classNames)==null?void 0:h.description)},v.description):null),Se.isValidElement(v.cancel)?v.cancel:v.cancel&&zf(v.cancel)?Se.createElement("button",{"data-button":!0,"data-cancel":!0,style:v.cancelButtonStyle||k,onClick:tt=>{var _t,bt;zf(v.cancel)&&vn&&((bt=(_t=v.cancel).onClick)==null||bt.call(_t,tt),Kn())},className:H(q==null?void 0:q.cancelButton,(f=v==null?void 0:v.classNames)==null?void 0:f.cancelButton)},v.cancel.label):null,Se.isValidElement(v.action)?v.action:v.action&&zf(v.action)?Se.createElement("button",{"data-button":!0,"data-action":!0,style:v.actionButtonStyle||L,onClick:tt=>{var _t,bt;zf(v.action)&&(tt.defaultPrevented||((bt=(_t=v.action).onClick)==null||bt.call(_t,tt),Kn()))},className:H(q==null?void 0:q.actionButton,(p=v==null?void 0:v.classNames)==null?void 0:p.actionButton)},v.action.label):null))};function EE(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var GO=t=>{let{invert:e,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:a,className:c,offset:u,theme:h="light",richColors:f,duration:p,style:y,visibleToasts:v=VO,toastOptions:x,dir:E=EE(),gap:w=BO,loadingIcon:b,icons:A,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:T,cn:M=HO}=t,[$,z]=Se.useState([]),R=Se.useMemo(()=>Array.from(new Set([n].concat($.filter(U=>U.position).map(U=>U.position)))),[$,n]),[I,k]=Se.useState([]),[L,D]=Se.useState(!1),[O,F]=Se.useState(!1),[ne,oe]=Se.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Q=Se.useRef(null),ee=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),q=Se.useRef(null),K=Se.useRef(!1),Y=Se.useCallback(U=>{var H;(H=$.find(le=>le.id===U.id))!=null&&H.delete||qr.dismiss(U.id),z(le=>le.filter(({id:ue})=>ue!==U.id))},[$]);return Se.useEffect(()=>qr.subscribe(U=>{if(U.dismiss){z(H=>H.map(le=>le.id===U.id?{...le,delete:!0}:le));return}setTimeout(()=>{hp.flushSync(()=>{z(H=>{let le=H.findIndex(ue=>ue.id===U.id);return le!==-1?[...H.slice(0,le),{...H[le],...U},...H.slice(le+1)]:[U,...H]})})})}),[]),Se.useEffect(()=>{if(h!=="system"){oe(h);return}h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?oe("dark"):oe("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:U})=>{oe(U?"dark":"light")})},[h]),Se.useEffect(()=>{$.length<=1&&D(!1)},[$]),Se.useEffect(()=>{let U=H=>{var le,ue;r.every(ke=>H[ke]||H.code===ke)&&(D(!0),(le=Q.current)==null||le.focus()),H.code==="Escape"&&(document.activeElement===Q.current||(ue=Q.current)!=null&&ue.contains(document.activeElement))&&D(!1)};return document.addEventListener("keydown",U),()=>document.removeEventListener("keydown",U)},[r]),Se.useEffect(()=>{if(Q.current)return()=>{q.current&&(q.current.focus({preventScroll:!0}),q.current=null,K.current=!1)}},[Q.current]),$.length?Se.createElement("section",{"aria-label":`${j} ${ee}`,tabIndex:-1},R.map((U,H)=>{var le;let[ue,ke]=U.split("-");return Se.createElement("ol",{key:U,dir:E==="auto"?EE():E,tabIndex:-1,ref:Q,className:c,"data-sonner-toaster":!0,"data-theme":ne,"data-y-position":ue,"data-x-position":ke,style:{"--front-toast-height":`${((le=I[0])==null?void 0:le.height)||0}px`,"--offset":typeof u=="number"?`${u}px`:u||UO,"--width":`${zO}px`,"--gap":`${w}px`,...y},onBlur:Te=>{K.current&&!Te.currentTarget.contains(Te.relatedTarget)&&(K.current=!1,q.current&&(q.current.focus({preventScroll:!0}),q.current=null))},onFocus:Te=>{Te.target instanceof HTMLElement&&Te.target.dataset.dismissible==="false"||K.current||(K.current=!0,q.current=Te.relatedTarget)},onMouseEnter:()=>D(!0),onMouseMove:()=>D(!0),onMouseLeave:()=>{O||D(!1)},onPointerDown:Te=>{Te.target instanceof HTMLElement&&Te.target.dataset.dismissible==="false"||F(!0)},onPointerUp:()=>F(!1)},$.filter(Te=>!Te.position&&H===0||Te.position===U).map((Te,_e)=>{var Ae,He;return Se.createElement(KO,{key:Te.id,icons:A,index:_e,toast:Te,defaultRichColors:f,duration:(Ae=x==null?void 0:x.duration)!=null?Ae:p,className:x==null?void 0:x.className,descriptionClassName:x==null?void 0:x.descriptionClassName,invert:e,visibleToasts:v,closeButton:(He=x==null?void 0:x.closeButton)!=null?He:a,interacting:O,position:U,style:x==null?void 0:x.style,unstyled:x==null?void 0:x.unstyled,classNames:x==null?void 0:x.classNames,cancelButtonStyle:x==null?void 0:x.cancelButtonStyle,actionButtonStyle:x==null?void 0:x.actionButtonStyle,removeToast:Y,toasts:$.filter(Ve=>Ve.position==Te.position),heights:I.filter(Ve=>Ve.position==Te.position),setHeights:k,expandByDefault:s,gap:w,loadingIcon:b,expanded:L,pauseWhenPageIsHidden:T,cn:M})}))})):null};const QO=({...t})=>{const{theme:e="system"}=NO();return o.jsx(GO,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};function YO(t,e=[]){let n=[];function r(a,c){const u=_.createContext(c),h=n.length;n=[...n,c];const f=y=>{var A;const{scope:v,children:x,...E}=y,w=((A=v==null?void 0:v[t])==null?void 0:A[h])||u,b=_.useMemo(()=>E,Object.values(E));return o.jsx(w.Provider,{value:b,children:x})};f.displayName=a+"Provider";function p(y,v){var w;const x=((w=v==null?void 0:v[t])==null?void 0:w[h])||u,E=_.useContext(x);if(E)return E;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${a}\``)}return[f,p]}const s=()=>{const a=n.map(c=>_.createContext(c));return function(u){const h=(u==null?void 0:u[t])||a;return _.useMemo(()=>({[`__scope${t}`]:{...u,[t]:h}}),[u,h])}};return s.scopeName=t,[r,XO(s,...e)]}function XO(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:f})=>{const y=h(a)[`__scope${f}`];return{...u,...y}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return n.scopeName=e.scopeName,n}var JO="DismissableLayer",Vv="dismissableLayer.update",ZO="dismissableLayer.pointerDownOutside",eL="dismissableLayer.focusOutside",NE,pC=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),iw=_.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=t,f=_.useContext(pC),[p,y]=_.useState(null),v=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=_.useState({}),E=kt(e,R=>y(R)),w=Array.from(f.layers),[b]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),A=w.indexOf(b),j=p?w.indexOf(p):-1,T=f.layersWithOutsidePointerEventsDisabled.size>0,M=j>=A,$=rL(R=>{const I=R.target,k=[...f.branches].some(L=>L.contains(I));!M||k||(s==null||s(R),c==null||c(R),R.defaultPrevented||u==null||u())},v),z=sL(R=>{const I=R.target;[...f.branches].some(L=>L.contains(I))||(a==null||a(R),c==null||c(R),R.defaultPrevented||u==null||u())},v);return Jx(R=>{j===f.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&u&&(R.preventDefault(),u()))},v),_.useEffect(()=>{if(p)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(NE=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(p)),f.layers.add(p),SE(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=NE)}},[p,v,n,f]),_.useEffect(()=>()=>{p&&(f.layers.delete(p),f.layersWithOutsidePointerEventsDisabled.delete(p),SE())},[p,f]),_.useEffect(()=>{const R=()=>x({});return document.addEventListener(Vv,R),()=>document.removeEventListener(Vv,R)},[]),o.jsx(et.div,{...h,ref:E,style:{pointerEvents:T?M?"auto":"none":void 0,...t.style},onFocusCapture:Qe(t.onFocusCapture,z.onFocusCapture),onBlurCapture:Qe(t.onBlurCapture,z.onBlurCapture),onPointerDownCapture:Qe(t.onPointerDownCapture,$.onPointerDownCapture)})});iw.displayName=JO;var tL="DismissableLayerBranch",nL=_.forwardRef((t,e)=>{const n=_.useContext(pC),r=_.useRef(null),s=kt(e,r);return _.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(et.div,{...t,ref:s})});nL.displayName=tL;function rL(t,e=globalThis==null?void 0:globalThis.document){const n=Tn(t),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){gC(ZO,n,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function sL(t,e=globalThis==null?void 0:globalThis.document){const n=Tn(t),r=_.useRef(!1);return _.useEffect(()=>{const s=a=>{a.target&&!r.current&&gC(eL,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function SE(){const t=new CustomEvent(Vv);document.dispatchEvent(t)}function gC(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?fp(s,a):s.dispatchEvent(a)}var iL=ES.useId||(()=>{}),oL=0;function Jo(t){const[e,n]=_.useState(iL());return rn(()=>{n(r=>r??String(oL++))},[t]),e?`radix-${e}`:""}const aL=["top","right","bottom","left"],la=Math.min,Wr=Math.max,Im=Math.round,Bf=Math.floor,ca=t=>({x:t,y:t}),lL={left:"right",right:"left",bottom:"top",top:"bottom"},cL={start:"end",end:"start"};function Uv(t,e,n){return Wr(t,la(e,n))}function Qi(t,e){return typeof t=="function"?t(e):t}function Yi(t){return t.split("-")[0]}function lu(t){return t.split("-")[1]}function ow(t){return t==="x"?"y":"x"}function aw(t){return t==="y"?"height":"width"}function ua(t){return["top","bottom"].includes(Yi(t))?"y":"x"}function lw(t){return ow(ua(t))}function uL(t,e,n){n===void 0&&(n=!1);const r=lu(t),s=lw(t),a=aw(s);let c=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(c=Am(c)),[c,Am(c)]}function dL(t){const e=Am(t);return[$v(t),e,$v(e)]}function $v(t){return t.replace(/start|end/g,e=>cL[e])}function hL(t,e,n){const r=["left","right"],s=["right","left"],a=["top","bottom"],c=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?a:c;default:return[]}}function fL(t,e,n,r){const s=lu(t);let a=hL(Yi(t),n==="start",r);return s&&(a=a.map(c=>c+"-"+s),e&&(a=a.concat(a.map($v)))),a}function Am(t){return t.replace(/left|right|bottom|top/g,e=>lL[e])}function mL(t){return{top:0,right:0,bottom:0,left:0,...t}}function yC(t){return typeof t!="number"?mL(t):{top:t,right:t,bottom:t,left:t}}function km(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function CE(t,e,n){let{reference:r,floating:s}=t;const a=ua(e),c=lw(e),u=aw(c),h=Yi(e),f=a==="y",p=r.x+r.width/2-s.width/2,y=r.y+r.height/2-s.height/2,v=r[u]/2-s[u]/2;let x;switch(h){case"top":x={x:p,y:r.y-s.height};break;case"bottom":x={x:p,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y};break;case"left":x={x:r.x-s.width,y};break;default:x={x:r.x,y:r.y}}switch(lu(e)){case"start":x[c]-=v*(n&&f?-1:1);break;case"end":x[c]+=v*(n&&f?-1:1);break}return x}const pL=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:c}=n,u=a.filter(Boolean),h=await(c.isRTL==null?void 0:c.isRTL(e));let f=await c.getElementRects({reference:t,floating:e,strategy:s}),{x:p,y}=CE(f,r,h),v=r,x={},E=0;for(let w=0;w<u.length;w++){const{name:b,fn:A}=u[w],{x:j,y:T,data:M,reset:$}=await A({x:p,y,initialPlacement:r,placement:v,strategy:s,middlewareData:x,rects:f,platform:c,elements:{reference:t,floating:e}});p=j??p,y=T??y,x={...x,[b]:{...x[b],...M}},$&&E<=50&&(E++,typeof $=="object"&&($.placement&&(v=$.placement),$.rects&&(f=$.rects===!0?await c.getElementRects({reference:t,floating:e,strategy:s}):$.rects),{x:p,y}=CE(f,v,h)),w=-1)}return{x:p,y,placement:v,strategy:s,middlewareData:x}};async function kd(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:a,rects:c,elements:u,strategy:h}=t,{boundary:f="clippingAncestors",rootBoundary:p="viewport",elementContext:y="floating",altBoundary:v=!1,padding:x=0}=Qi(e,t),E=yC(x),b=u[v?y==="floating"?"reference":"floating":y],A=km(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(b)))==null||n?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(u.floating)),boundary:f,rootBoundary:p,strategy:h})),j=y==="floating"?{x:r,y:s,width:c.floating.width,height:c.floating.height}:c.reference,T=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u.floating)),M=await(a.isElement==null?void 0:a.isElement(T))?await(a.getScale==null?void 0:a.getScale(T))||{x:1,y:1}:{x:1,y:1},$=km(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:j,offsetParent:T,strategy:h}):j);return{top:(A.top-$.top+E.top)/M.y,bottom:($.bottom-A.bottom+E.bottom)/M.y,left:(A.left-$.left+E.left)/M.x,right:($.right-A.right+E.right)/M.x}}const gL=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:a,platform:c,elements:u,middlewareData:h}=e,{element:f,padding:p=0}=Qi(t,e)||{};if(f==null)return{};const y=yC(p),v={x:n,y:r},x=lw(s),E=aw(x),w=await c.getDimensions(f),b=x==="y",A=b?"top":"left",j=b?"bottom":"right",T=b?"clientHeight":"clientWidth",M=a.reference[E]+a.reference[x]-v[x]-a.floating[E],$=v[x]-a.reference[x],z=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f));let R=z?z[T]:0;(!R||!await(c.isElement==null?void 0:c.isElement(z)))&&(R=u.floating[T]||a.floating[E]);const I=M/2-$/2,k=R/2-w[E]/2-1,L=la(y[A],k),D=la(y[j],k),O=L,F=R-w[E]-D,ne=R/2-w[E]/2+I,oe=Uv(O,ne,F),Q=!h.arrow&&lu(s)!=null&&ne!==oe&&a.reference[E]/2-(ne<O?L:D)-w[E]/2<0,ee=Q?ne<O?ne-O:ne-F:0;return{[x]:v[x]+ee,data:{[x]:oe,centerOffset:ne-oe-ee,...Q&&{alignmentOffset:ee}},reset:Q}}}),yL=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:a,rects:c,initialPlacement:u,platform:h,elements:f}=e,{mainAxis:p=!0,crossAxis:y=!0,fallbackPlacements:v,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:w=!0,...b}=Qi(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const A=Yi(s),j=ua(u),T=Yi(u)===u,M=await(h.isRTL==null?void 0:h.isRTL(f.floating)),$=v||(T||!w?[Am(u)]:dL(u)),z=E!=="none";!v&&z&&$.push(...fL(u,w,E,M));const R=[u,...$],I=await kd(e,b),k=[];let L=((r=a.flip)==null?void 0:r.overflows)||[];if(p&&k.push(I[A]),y){const ne=uL(s,c,M);k.push(I[ne[0]],I[ne[1]])}if(L=[...L,{placement:s,overflows:k}],!k.every(ne=>ne<=0)){var D,O;const ne=(((D=a.flip)==null?void 0:D.index)||0)+1,oe=R[ne];if(oe)return{data:{index:ne,overflows:L},reset:{placement:oe}};let Q=(O=L.filter(ee=>ee.overflows[0]<=0).sort((ee,q)=>ee.overflows[1]-q.overflows[1])[0])==null?void 0:O.placement;if(!Q)switch(x){case"bestFit":{var F;const ee=(F=L.filter(q=>{if(z){const K=ua(q.placement);return K===j||K==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(K=>K>0).reduce((K,Y)=>K+Y,0)]).sort((q,K)=>q[1]-K[1])[0])==null?void 0:F[0];ee&&(Q=ee);break}case"initialPlacement":Q=u;break}if(s!==Q)return{reset:{placement:Q}}}return{}}}};function jE(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function TE(t){return aL.some(e=>t[e]>=0)}const vL=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Qi(t,e);switch(r){case"referenceHidden":{const a=await kd(e,{...s,elementContext:"reference"}),c=jE(a,n.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:TE(c)}}}case"escaped":{const a=await kd(e,{...s,altBoundary:!0}),c=jE(a,n.floating);return{data:{escapedOffsets:c,escaped:TE(c)}}}default:return{}}}}};async function xL(t,e){const{placement:n,platform:r,elements:s}=t,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),c=Yi(n),u=lu(n),h=ua(n)==="y",f=["left","top"].includes(c)?-1:1,p=a&&h?-1:1,y=Qi(e,t);let{mainAxis:v,crossAxis:x,alignmentAxis:E}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return u&&typeof E=="number"&&(x=u==="end"?E*-1:E),h?{x:x*p,y:v*f}:{x:v*f,y:x*p}}const wL=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:a,placement:c,middlewareData:u}=e,h=await xL(e,t);return c===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+h.x,y:a+h.y,data:{...h,placement:c}}}}},_L=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:a=!0,crossAxis:c=!1,limiter:u={fn:b=>{let{x:A,y:j}=b;return{x:A,y:j}}},...h}=Qi(t,e),f={x:n,y:r},p=await kd(e,h),y=ua(Yi(s)),v=ow(y);let x=f[v],E=f[y];if(a){const b=v==="y"?"top":"left",A=v==="y"?"bottom":"right",j=x+p[b],T=x-p[A];x=Uv(j,x,T)}if(c){const b=y==="y"?"top":"left",A=y==="y"?"bottom":"right",j=E+p[b],T=E-p[A];E=Uv(j,E,T)}const w=u.fn({...e,[v]:x,[y]:E});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[v]:a,[y]:c}}}}}},bL=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:a,middlewareData:c}=e,{offset:u=0,mainAxis:h=!0,crossAxis:f=!0}=Qi(t,e),p={x:n,y:r},y=ua(s),v=ow(y);let x=p[v],E=p[y];const w=Qi(u,e),b=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(h){const T=v==="y"?"height":"width",M=a.reference[v]-a.floating[T]+b.mainAxis,$=a.reference[v]+a.reference[T]-b.mainAxis;x<M?x=M:x>$&&(x=$)}if(f){var A,j;const T=v==="y"?"width":"height",M=["top","left"].includes(Yi(s)),$=a.reference[y]-a.floating[T]+(M&&((A=c.offset)==null?void 0:A[y])||0)+(M?0:b.crossAxis),z=a.reference[y]+a.reference[T]+(M?0:((j=c.offset)==null?void 0:j[y])||0)-(M?b.crossAxis:0);E<$?E=$:E>z&&(E=z)}return{[v]:x,[y]:E}}}},EL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:a,platform:c,elements:u}=e,{apply:h=()=>{},...f}=Qi(t,e),p=await kd(e,f),y=Yi(s),v=lu(s),x=ua(s)==="y",{width:E,height:w}=a.floating;let b,A;y==="top"||y==="bottom"?(b=y,A=v===(await(c.isRTL==null?void 0:c.isRTL(u.floating))?"start":"end")?"left":"right"):(A=y,b=v==="end"?"top":"bottom");const j=w-p.top-p.bottom,T=E-p.left-p.right,M=la(w-p[b],j),$=la(E-p[A],T),z=!e.middlewareData.shift;let R=M,I=$;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(I=T),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(R=j),z&&!v){const L=Wr(p.left,0),D=Wr(p.right,0),O=Wr(p.top,0),F=Wr(p.bottom,0);x?I=E-2*(L!==0||D!==0?L+D:Wr(p.left,p.right)):R=w-2*(O!==0||F!==0?O+F:Wr(p.top,p.bottom))}await h({...e,availableWidth:I,availableHeight:R});const k=await c.getDimensions(u.floating);return E!==k.width||w!==k.height?{reset:{rects:!0}}:{}}}};function gp(){return typeof window<"u"}function cu(t){return vC(t)?(t.nodeName||"").toLowerCase():"#document"}function Gr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function pi(t){var e;return(e=(vC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function vC(t){return gp()?t instanceof Node||t instanceof Gr(t).Node:!1}function Ms(t){return gp()?t instanceof Element||t instanceof Gr(t).Element:!1}function hi(t){return gp()?t instanceof HTMLElement||t instanceof Gr(t).HTMLElement:!1}function IE(t){return!gp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Gr(t).ShadowRoot}function oh(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Fs(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function NL(t){return["table","td","th"].includes(cu(t))}function yp(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function cw(t){const e=uw(),n=Ms(t)?Fs(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function SL(t){let e=da(t);for(;hi(e)&&!Gc(e);){if(cw(e))return e;if(yp(e))return null;e=da(e)}return null}function uw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Gc(t){return["html","body","#document"].includes(cu(t))}function Fs(t){return Gr(t).getComputedStyle(t)}function vp(t){return Ms(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function da(t){if(cu(t)==="html")return t;const e=t.assignedSlot||t.parentNode||IE(t)&&t.host||pi(t);return IE(e)?e.host:e}function xC(t){const e=da(t);return Gc(e)?t.ownerDocument?t.ownerDocument.body:t.body:hi(e)&&oh(e)?e:xC(e)}function Pd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=xC(t),a=s===((r=t.ownerDocument)==null?void 0:r.body),c=Gr(s);if(a){const u=zv(c);return e.concat(c,c.visualViewport||[],oh(s)?s:[],u&&n?Pd(u):[])}return e.concat(s,Pd(s,[],n))}function zv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function wC(t){const e=Fs(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=hi(t),a=s?t.offsetWidth:n,c=s?t.offsetHeight:r,u=Im(n)!==a||Im(r)!==c;return u&&(n=a,r=c),{width:n,height:r,$:u}}function dw(t){return Ms(t)?t:t.contextElement}function Sc(t){const e=dw(t);if(!hi(e))return ca(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:a}=wC(e);let c=(a?Im(n.width):n.width)/r,u=(a?Im(n.height):n.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const CL=ca(0);function _C(t){const e=Gr(t);return!uw()||!e.visualViewport?CL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function jL(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Gr(t)?!1:e}function ul(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),a=dw(t);let c=ca(1);e&&(r?Ms(r)&&(c=Sc(r)):c=Sc(t));const u=jL(a,n,r)?_C(a):ca(0);let h=(s.left+u.x)/c.x,f=(s.top+u.y)/c.y,p=s.width/c.x,y=s.height/c.y;if(a){const v=Gr(a),x=r&&Ms(r)?Gr(r):r;let E=v,w=zv(E);for(;w&&r&&x!==E;){const b=Sc(w),A=w.getBoundingClientRect(),j=Fs(w),T=A.left+(w.clientLeft+parseFloat(j.paddingLeft))*b.x,M=A.top+(w.clientTop+parseFloat(j.paddingTop))*b.y;h*=b.x,f*=b.y,p*=b.x,y*=b.y,h+=T,f+=M,E=Gr(w),w=zv(E)}}return km({width:p,height:y,x:h,y:f})}function TL(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const a=s==="fixed",c=pi(r),u=e?yp(e.floating):!1;if(r===c||u&&a)return n;let h={scrollLeft:0,scrollTop:0},f=ca(1);const p=ca(0),y=hi(r);if((y||!y&&!a)&&((cu(r)!=="body"||oh(c))&&(h=vp(r)),hi(r))){const v=ul(r);f=Sc(r),p.x=v.x+r.clientLeft,p.y=v.y+r.clientTop}return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-h.scrollLeft*f.x+p.x,y:n.y*f.y-h.scrollTop*f.y+p.y}}function IL(t){return Array.from(t.getClientRects())}function Bv(t,e){const n=vp(t).scrollLeft;return e?e.left+n:ul(pi(t)).left+n}function AL(t){const e=pi(t),n=vp(t),r=t.ownerDocument.body,s=Wr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Wr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-n.scrollLeft+Bv(t);const u=-n.scrollTop;return Fs(r).direction==="rtl"&&(c+=Wr(e.clientWidth,r.clientWidth)-s),{width:s,height:a,x:c,y:u}}function kL(t,e){const n=Gr(t),r=pi(t),s=n.visualViewport;let a=r.clientWidth,c=r.clientHeight,u=0,h=0;if(s){a=s.width,c=s.height;const f=uw();(!f||f&&e==="fixed")&&(u=s.offsetLeft,h=s.offsetTop)}return{width:a,height:c,x:u,y:h}}function PL(t,e){const n=ul(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,a=hi(t)?Sc(t):ca(1),c=t.clientWidth*a.x,u=t.clientHeight*a.y,h=s*a.x,f=r*a.y;return{width:c,height:u,x:h,y:f}}function AE(t,e,n){let r;if(e==="viewport")r=kL(t,n);else if(e==="document")r=AL(pi(t));else if(Ms(e))r=PL(e,n);else{const s=_C(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return km(r)}function bC(t,e){const n=da(t);return n===e||!Ms(n)||Gc(n)?!1:Fs(n).position==="fixed"||bC(n,e)}function RL(t,e){const n=e.get(t);if(n)return n;let r=Pd(t,[],!1).filter(u=>Ms(u)&&cu(u)!=="body"),s=null;const a=Fs(t).position==="fixed";let c=a?da(t):t;for(;Ms(c)&&!Gc(c);){const u=Fs(c),h=cw(c);!h&&u.position==="fixed"&&(s=null),(a?!h&&!s:!h&&u.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||oh(c)&&!h&&bC(t,c))?r=r.filter(p=>p!==c):s=u,c=da(c)}return e.set(t,r),r}function DL(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const c=[...n==="clippingAncestors"?yp(e)?[]:RL(e,this._c):[].concat(n),r],u=c[0],h=c.reduce((f,p)=>{const y=AE(e,p,s);return f.top=Wr(y.top,f.top),f.right=la(y.right,f.right),f.bottom=la(y.bottom,f.bottom),f.left=Wr(y.left,f.left),f},AE(e,u,s));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function OL(t){const{width:e,height:n}=wC(t);return{width:e,height:n}}function LL(t,e,n){const r=hi(e),s=pi(e),a=n==="fixed",c=ul(t,!0,a,e);let u={scrollLeft:0,scrollTop:0};const h=ca(0);if(r||!r&&!a)if((cu(e)!=="body"||oh(s))&&(u=vp(e)),r){const x=ul(e,!0,a,e);h.x=x.x+e.clientLeft,h.y=x.y+e.clientTop}else s&&(h.x=Bv(s));let f=0,p=0;if(s&&!r&&!a){const x=s.getBoundingClientRect();p=x.top+u.scrollTop,f=x.left+u.scrollLeft-Bv(s,x)}const y=c.left+u.scrollLeft-h.x-f,v=c.top+u.scrollTop-h.y-p;return{x:y,y:v,width:c.width,height:c.height}}function Gy(t){return Fs(t).position==="static"}function kE(t,e){if(!hi(t)||Fs(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return pi(t)===n&&(n=n.ownerDocument.body),n}function EC(t,e){const n=Gr(t);if(yp(t))return n;if(!hi(t)){let s=da(t);for(;s&&!Gc(s);){if(Ms(s)&&!Gy(s))return s;s=da(s)}return n}let r=kE(t,e);for(;r&&NL(r)&&Gy(r);)r=kE(r,e);return r&&Gc(r)&&Gy(r)&&!cw(r)?n:r||SL(t)||n}const ML=async function(t){const e=this.getOffsetParent||EC,n=this.getDimensions,r=await n(t.floating);return{reference:LL(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function FL(t){return Fs(t).direction==="rtl"}const VL={convertOffsetParentRelativeRectToViewportRelativeRect:TL,getDocumentElement:pi,getClippingRect:DL,getOffsetParent:EC,getElementRects:ML,getClientRects:IL,getDimensions:OL,getScale:Sc,isElement:Ms,isRTL:FL};function UL(t,e){let n=null,r;const s=pi(t);function a(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function c(u,h){u===void 0&&(u=!1),h===void 0&&(h=1),a();const{left:f,top:p,width:y,height:v}=t.getBoundingClientRect();if(u||e(),!y||!v)return;const x=Bf(p),E=Bf(s.clientWidth-(f+y)),w=Bf(s.clientHeight-(p+v)),b=Bf(f),j={rootMargin:-x+"px "+-E+"px "+-w+"px "+-b+"px",threshold:Wr(0,la(1,h))||1};let T=!0;function M($){const z=$[0].intersectionRatio;if(z!==h){if(!T)return c();z?c(!1,z):r=setTimeout(()=>{c(!1,1e-7)},1e3)}T=!1}try{n=new IntersectionObserver(M,{...j,root:s.ownerDocument})}catch{n=new IntersectionObserver(M,j)}n.observe(t)}return c(!0),a}function $L(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:h=!1}=r,f=dw(t),p=s||a?[...f?Pd(f):[],...Pd(e)]:[];p.forEach(A=>{s&&A.addEventListener("scroll",n,{passive:!0}),a&&A.addEventListener("resize",n)});const y=f&&u?UL(f,n):null;let v=-1,x=null;c&&(x=new ResizeObserver(A=>{let[j]=A;j&&j.target===f&&x&&(x.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var T;(T=x)==null||T.observe(e)})),n()}),f&&!h&&x.observe(f),x.observe(e));let E,w=h?ul(t):null;h&&b();function b(){const A=ul(t);w&&(A.x!==w.x||A.y!==w.y||A.width!==w.width||A.height!==w.height)&&n(),w=A,E=requestAnimationFrame(b)}return n(),()=>{var A;p.forEach(j=>{s&&j.removeEventListener("scroll",n),a&&j.removeEventListener("resize",n)}),y==null||y(),(A=x)==null||A.disconnect(),x=null,h&&cancelAnimationFrame(E)}}const zL=wL,BL=_L,qL=yL,WL=EL,HL=vL,PE=gL,KL=bL,GL=(t,e,n)=>{const r=new Map,s={platform:VL,...n},a={...s.platform,_c:r};return pL(t,e,{...s,platform:a})};var cm=typeof document<"u"?_.useLayoutEffect:_.useEffect;function Pm(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Pm(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&t.$$typeof)&&!Pm(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function NC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function RE(t,e){const n=NC(t);return Math.round(e*n)/n}function Qy(t){const e=_.useRef(t);return cm(()=>{e.current=t}),e}function QL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:c}={},transform:u=!0,whileElementsMounted:h,open:f}=t,[p,y]=_.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[v,x]=_.useState(r);Pm(v,r)||x(r);const[E,w]=_.useState(null),[b,A]=_.useState(null),j=_.useCallback(q=>{q!==z.current&&(z.current=q,w(q))},[]),T=_.useCallback(q=>{q!==R.current&&(R.current=q,A(q))},[]),M=a||E,$=c||b,z=_.useRef(null),R=_.useRef(null),I=_.useRef(p),k=h!=null,L=Qy(h),D=Qy(s),O=Qy(f),F=_.useCallback(()=>{if(!z.current||!R.current)return;const q={placement:e,strategy:n,middleware:v};D.current&&(q.platform=D.current),GL(z.current,R.current,q).then(K=>{const Y={...K,isPositioned:O.current!==!1};ne.current&&!Pm(I.current,Y)&&(I.current=Y,wl.flushSync(()=>{y(Y)}))})},[v,e,n,D,O]);cm(()=>{f===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,y(q=>({...q,isPositioned:!1})))},[f]);const ne=_.useRef(!1);cm(()=>(ne.current=!0,()=>{ne.current=!1}),[]),cm(()=>{if(M&&(z.current=M),$&&(R.current=$),M&&$){if(L.current)return L.current(M,$,F);F()}},[M,$,F,L,k]);const oe=_.useMemo(()=>({reference:z,floating:R,setReference:j,setFloating:T}),[j,T]),Q=_.useMemo(()=>({reference:M,floating:$}),[M,$]),ee=_.useMemo(()=>{const q={position:n,left:0,top:0};if(!Q.floating)return q;const K=RE(Q.floating,p.x),Y=RE(Q.floating,p.y);return u?{...q,transform:"translate("+K+"px, "+Y+"px)",...NC(Q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:K,top:Y}},[n,u,Q.floating,p.x,p.y]);return _.useMemo(()=>({...p,update:F,refs:oe,elements:Q,floatingStyles:ee}),[p,F,oe,Q,ee])}const YL=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?PE({element:r.current,padding:s}).fn(n):{}:r?PE({element:r,padding:s}).fn(n):{}}}},XL=(t,e)=>({...zL(t),options:[t,e]}),JL=(t,e)=>({...BL(t),options:[t,e]}),ZL=(t,e)=>({...KL(t),options:[t,e]}),eM=(t,e)=>({...qL(t),options:[t,e]}),tM=(t,e)=>({...WL(t),options:[t,e]}),nM=(t,e)=>({...HL(t),options:[t,e]}),rM=(t,e)=>({...YL(t),options:[t,e]});var sM="Arrow",SC=_.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...a}=t;return o.jsx(et.svg,{...a,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});SC.displayName=sM;var iM=SC;function CC(t){const[e,n]=_.useState(void 0);return rn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let c,u;if("borderBoxSize"in a){const h=a.borderBoxSize,f=Array.isArray(h)?h[0]:h;c=f.inlineSize,u=f.blockSize}else c=t.offsetWidth,u=t.offsetHeight;n({width:c,height:u})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var hw="Popper",[jC,xp]=to(hw),[oM,TC]=jC(hw),IC=t=>{const{__scopePopper:e,children:n}=t,[r,s]=_.useState(null);return o.jsx(oM,{scope:e,anchor:r,onAnchorChange:s,children:n})};IC.displayName=hw;var AC="PopperAnchor",kC=_.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,a=TC(AC,n),c=_.useRef(null),u=kt(e,c);return _.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||c.current)}),r?null:o.jsx(et.div,{...s,ref:u})});kC.displayName=AC;var fw="PopperContent",[aM,lM]=jC(fw),PC=_.forwardRef((t,e)=>{var _e,Ae,He,Ve,me,Ue;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:c=0,arrowPadding:u=0,avoidCollisions:h=!0,collisionBoundary:f=[],collisionPadding:p=0,sticky:y="partial",hideWhenDetached:v=!1,updatePositionStrategy:x="optimized",onPlaced:E,...w}=t,b=TC(fw,n),[A,j]=_.useState(null),T=kt(e,ht=>j(ht)),[M,$]=_.useState(null),z=CC(M),R=(z==null?void 0:z.width)??0,I=(z==null?void 0:z.height)??0,k=r+(a!=="center"?"-"+a:""),L=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},D=Array.isArray(f)?f:[f],O=D.length>0,F={padding:L,boundary:D.filter(uM),altBoundary:O},{refs:ne,floatingStyles:oe,placement:Q,isPositioned:ee,middlewareData:q}=QL({strategy:"fixed",placement:k,whileElementsMounted:(...ht)=>$L(...ht,{animationFrame:x==="always"}),elements:{reference:b.anchor},middleware:[XL({mainAxis:s+I,alignmentAxis:c}),h&&JL({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?ZL():void 0,...F}),h&&eM({...F}),tM({...F,apply:({elements:ht,rects:ft,availableWidth:fe,availableHeight:Ce})=>{const{width:ct,height:Ht}=ft.reference,Mt=ht.floating.style;Mt.setProperty("--radix-popper-available-width",`${fe}px`),Mt.setProperty("--radix-popper-available-height",`${Ce}px`),Mt.setProperty("--radix-popper-anchor-width",`${ct}px`),Mt.setProperty("--radix-popper-anchor-height",`${Ht}px`)}}),M&&rM({element:M,padding:u}),dM({arrowWidth:R,arrowHeight:I}),v&&nM({strategy:"referenceHidden",...F})]}),[K,Y]=OC(Q),U=Tn(E);rn(()=>{ee&&(U==null||U())},[ee,U]);const H=(_e=q.arrow)==null?void 0:_e.x,le=(Ae=q.arrow)==null?void 0:Ae.y,ue=((He=q.arrow)==null?void 0:He.centerOffset)!==0,[ke,Te]=_.useState();return rn(()=>{A&&Te(window.getComputedStyle(A).zIndex)},[A]),o.jsx("div",{ref:ne.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:ee?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ke,"--radix-popper-transform-origin":[(Ve=q.transformOrigin)==null?void 0:Ve.x,(me=q.transformOrigin)==null?void 0:me.y].join(" "),...((Ue=q.hide)==null?void 0:Ue.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(aM,{scope:n,placedSide:K,onArrowChange:$,arrowX:H,arrowY:le,shouldHideArrow:ue,children:o.jsx(et.div,{"data-side":K,"data-align":Y,...w,ref:T,style:{...w.style,animation:ee?void 0:"none"}})})})});PC.displayName=fw;var RC="PopperArrow",cM={top:"bottom",right:"left",bottom:"top",left:"right"},DC=_.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,a=lM(RC,r),c=cM[a.placedSide];return o.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:o.jsx(iM,{...s,ref:n,style:{...s.style,display:"block"}})})});DC.displayName=RC;function uM(t){return t!==null}var dM=t=>({name:"transformOrigin",options:t,fn(e){var b,A,j;const{placement:n,rects:r,middlewareData:s}=e,c=((b=s.arrow)==null?void 0:b.centerOffset)!==0,u=c?0:t.arrowWidth,h=c?0:t.arrowHeight,[f,p]=OC(n),y={start:"0%",center:"50%",end:"100%"}[p],v=(((A=s.arrow)==null?void 0:A.x)??0)+u/2,x=(((j=s.arrow)==null?void 0:j.y)??0)+h/2;let E="",w="";return f==="bottom"?(E=c?y:`${v}px`,w=`${-h}px`):f==="top"?(E=c?y:`${v}px`,w=`${r.floating.height+h}px`):f==="right"?(E=`${-h}px`,w=c?y:`${x}px`):f==="left"&&(E=`${r.floating.width+h}px`,w=c?y:`${x}px`),{data:{x:E,y:w}}}});function OC(t){const[e,n="center"]=t.split("-");return[e,n]}var hM=IC,LC=kC,MC=PC,FC=DC,fM="Portal",VC=_.forwardRef((t,e)=>{var u;const{container:n,...r}=t,[s,a]=_.useState(!1);rn(()=>a(!0),[]);const c=n||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?hp.createPortal(o.jsx(et.div,{...r,ref:e}),c):null});VC.displayName=fM;function mM(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var UC=t=>{const{present:e,children:n}=t,r=pM(e),s=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),a=kt(r.ref,gM(s));return typeof n=="function"||r.isPresent?_.cloneElement(s,{ref:a}):null};UC.displayName="Presence";function pM(t){const[e,n]=_.useState(),r=_.useRef({}),s=_.useRef(t),a=_.useRef("none"),c=t?"mounted":"unmounted",[u,h]=mM(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const f=qf(r.current);a.current=u==="mounted"?f:"none"},[u]),rn(()=>{const f=r.current,p=s.current;if(p!==t){const v=a.current,x=qf(f);t?h("MOUNT"):x==="none"||(f==null?void 0:f.display)==="none"?h("UNMOUNT"):h(p&&v!==x?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,h]),rn(()=>{if(e){let f;const p=e.ownerDocument.defaultView??window,y=x=>{const w=qf(r.current).includes(x.animationName);if(x.target===e&&w&&(h("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",f=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},v=x=>{x.target===e&&(a.current=qf(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{p.clearTimeout(f),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:_.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function qf(t){return(t==null?void 0:t.animationName)||"none"}function gM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var[wp,NW]=YO("Tooltip",[xp]),mw=xp(),$C="TooltipProvider",yM=700,DE="tooltip.open",[vM,zC]=wp($C),BC=t=>{const{__scopeTooltip:e,delayDuration:n=yM,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=t,[c,u]=_.useState(!0),h=_.useRef(!1),f=_.useRef(0);return _.useEffect(()=>{const p=f.current;return()=>window.clearTimeout(p)},[]),o.jsx(vM,{scope:e,isOpenDelayed:c,delayDuration:n,onOpen:_.useCallback(()=>{window.clearTimeout(f.current),u(!1)},[]),onClose:_.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>u(!0),r)},[r]),isPointerInTransitRef:h,onPointerInTransitChange:_.useCallback(p=>{h.current=p},[]),disableHoverableContent:s,children:a})};BC.displayName=$C;var qC="Tooltip",[SW,_p]=wp(qC),qv="TooltipTrigger",xM=_.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=_p(qv,n),a=zC(qv,n),c=mw(n),u=_.useRef(null),h=kt(e,u,s.onTriggerChange),f=_.useRef(!1),p=_.useRef(!1),y=_.useCallback(()=>f.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),o.jsx(LC,{asChild:!0,...c,children:o.jsx(et.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:h,onPointerMove:Qe(t.onPointerMove,v=>{v.pointerType!=="touch"&&!p.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),p.current=!0)}),onPointerLeave:Qe(t.onPointerLeave,()=>{s.onTriggerLeave(),p.current=!1}),onPointerDown:Qe(t.onPointerDown,()=>{f.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:Qe(t.onFocus,()=>{f.current||s.onOpen()}),onBlur:Qe(t.onBlur,s.onClose),onClick:Qe(t.onClick,s.onClose)})})});xM.displayName=qv;var wM="TooltipPortal",[CW,_M]=wp(wM,{forceMount:void 0}),Qc="TooltipContent",WC=_.forwardRef((t,e)=>{const n=_M(Qc,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=t,c=_p(Qc,t.__scopeTooltip);return o.jsx(UC,{present:r||c.open,children:c.disableHoverableContent?o.jsx(HC,{side:s,...a,ref:e}):o.jsx(bM,{side:s,...a,ref:e})})}),bM=_.forwardRef((t,e)=>{const n=_p(Qc,t.__scopeTooltip),r=zC(Qc,t.__scopeTooltip),s=_.useRef(null),a=kt(e,s),[c,u]=_.useState(null),{trigger:h,onClose:f}=n,p=s.current,{onPointerInTransitChange:y}=r,v=_.useCallback(()=>{u(null),y(!1)},[y]),x=_.useCallback((E,w)=>{const b=E.currentTarget,A={x:E.clientX,y:E.clientY},j=CM(A,b.getBoundingClientRect()),T=jM(A,j),M=TM(w.getBoundingClientRect()),$=AM([...T,...M]);u($),y(!0)},[y]);return _.useEffect(()=>()=>v(),[v]),_.useEffect(()=>{if(h&&p){const E=b=>x(b,p),w=b=>x(b,h);return h.addEventListener("pointerleave",E),p.addEventListener("pointerleave",w),()=>{h.removeEventListener("pointerleave",E),p.removeEventListener("pointerleave",w)}}},[h,p,x,v]),_.useEffect(()=>{if(c){const E=w=>{const b=w.target,A={x:w.clientX,y:w.clientY},j=(h==null?void 0:h.contains(b))||(p==null?void 0:p.contains(b)),T=!IM(A,c);j?v():T&&(v(),f())};return document.addEventListener("pointermove",E),()=>document.removeEventListener("pointermove",E)}},[h,p,c,f,v]),o.jsx(HC,{...t,ref:a})}),[EM,NM]=wp(qC,{isInside:!1}),HC=_.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:c,...u}=t,h=_p(Qc,n),f=mw(n),{onClose:p}=h;return _.useEffect(()=>(document.addEventListener(DE,p),()=>document.removeEventListener(DE,p)),[p]),_.useEffect(()=>{if(h.trigger){const y=v=>{const x=v.target;x!=null&&x.contains(h.trigger)&&p()};return window.addEventListener("scroll",y,{capture:!0}),()=>window.removeEventListener("scroll",y,{capture:!0})}},[h.trigger,p]),o.jsx(iw,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:y=>y.preventDefault(),onDismiss:p,children:o.jsxs(MC,{"data-state":h.stateAttribute,...f,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(CS,{children:r}),o.jsx(EM,{scope:n,isInside:!0,children:o.jsx(q2,{id:h.contentId,role:"tooltip",children:s||r})})]})})});WC.displayName=Qc;var KC="TooltipArrow",SM=_.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=mw(n);return NM(KC,n).isInside?null:o.jsx(FC,{...s,...r,ref:e})});SM.displayName=KC;function CM(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function jM(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function TM(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function IM(t,e){const{x:n,y:r}=t;let s=!1;for(let a=0,c=e.length-1;a<e.length;c=a++){const u=e[a].x,h=e[a].y,f=e[c].x,p=e[c].y;h>r!=p>r&&n<(f-u)*(r-h)/(p-h)+u&&(s=!s)}return s}function AM(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),kM(e)}function kM(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const a=e[e.length-1],c=e[e.length-2];if((a.x-c.x)*(s.y-c.y)>=(a.y-c.y)*(s.x-c.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const a=n[n.length-1],c=n[n.length-2];if((a.x-c.x)*(s.y-c.y)>=(a.y-c.y)*(s.x-c.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var PM=BC,GC=WC;const RM=PM,DM=_.forwardRef(({className:t,sideOffset:e=4,...n},r)=>o.jsx(GC,{ref:r,sideOffset:e,className:Xe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));DM.displayName=GC.displayName;var ah=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},dl=typeof window>"u"||"Deno"in globalThis;function Tr(){}function OM(t,e){return typeof t=="function"?t(e):t}function Wv(t){return typeof t=="number"&&t>=0&&t!==1/0}function QC(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Zo(t,e){return typeof t=="function"?t(e):t}function Is(t,e){return typeof t=="function"?t(e):t}function OE(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:c,stale:u}=t;if(c){if(r){if(e.queryHash!==pw(c,e.options))return!1}else if(!Dd(e.queryKey,c))return!1}if(n!=="all"){const h=e.isActive();if(n==="active"&&!h||n==="inactive"&&h)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||a&&!a(e))}function LE(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(Rd(e.options.mutationKey)!==Rd(a))return!1}else if(!Dd(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function pw(t,e){return((e==null?void 0:e.queryKeyHashFn)||Rd)(t)}function Rd(t){return JSON.stringify(t,(e,n)=>Kv(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Dd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Dd(t[n],e[n])):!1}function YC(t,e){if(t===e)return t;const n=ME(t)&&ME(e);if(n||Kv(t)&&Kv(e)){const r=n?t:Object.keys(t),s=r.length,a=n?e:Object.keys(e),c=a.length,u=n?[]:{},h=new Set(r);let f=0;for(let p=0;p<c;p++){const y=n?p:a[p];(!n&&h.has(y)||n)&&t[y]===void 0&&e[y]===void 0?(u[y]=void 0,f++):(u[y]=YC(t[y],e[y]),u[y]===t[y]&&t[y]!==void 0&&f++)}return s===c&&f===s?t:u}return e}function Hv(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function ME(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Kv(t){if(!FE(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!FE(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function FE(t){return Object.prototype.toString.call(t)==="[object Object]"}function LM(t){return new Promise(e=>{setTimeout(e,t)})}function Gv(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?YC(t,e):e}function MM(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function FM(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var gw=Symbol();function XC(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===gw?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function VM(t,e){return typeof t=="function"?t(...e):!!t}var Xa,zo,Rc,hS,UM=(hS=class extends ah{constructor(){super();it(this,Xa);it(this,zo);it(this,Rc);Me(this,Rc,e=>{if(!dl&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Z(this,zo)||this.setEventListener(Z(this,Rc))}onUnsubscribe(){var e;this.hasListeners()||((e=Z(this,zo))==null||e.call(this),Me(this,zo,void 0))}setEventListener(e){var n;Me(this,Rc,e),(n=Z(this,zo))==null||n.call(this),Me(this,zo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Z(this,Xa)!==e&&(Me(this,Xa,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Z(this,Xa)=="boolean"?Z(this,Xa):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Xa=new WeakMap,zo=new WeakMap,Rc=new WeakMap,hS),yw=new UM,Dc,Bo,Oc,fS,$M=(fS=class extends ah{constructor(){super();it(this,Dc,!0);it(this,Bo);it(this,Oc);Me(this,Oc,e=>{if(!dl&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Z(this,Bo)||this.setEventListener(Z(this,Oc))}onUnsubscribe(){var e;this.hasListeners()||((e=Z(this,Bo))==null||e.call(this),Me(this,Bo,void 0))}setEventListener(e){var n;Me(this,Oc,e),(n=Z(this,Bo))==null||n.call(this),Me(this,Bo,e(this.setOnline.bind(this)))}setOnline(e){Z(this,Dc)!==e&&(Me(this,Dc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Z(this,Dc)}},Dc=new WeakMap,Bo=new WeakMap,Oc=new WeakMap,fS),Rm=new $M;function Qv(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function zM(t){return Math.min(1e3*2**t,3e4)}function JC(t){return(t??"online")==="online"?Rm.isOnline():!0}var ZC=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Yy(t){return t instanceof ZC}function ej(t){let e=!1,n=0,r=!1,s;const a=Qv(),c=w=>{var b;r||(v(new ZC(w)),(b=t.abort)==null||b.call(t))},u=()=>{e=!0},h=()=>{e=!1},f=()=>yw.isFocused()&&(t.networkMode==="always"||Rm.isOnline())&&t.canRun(),p=()=>JC(t.networkMode)&&t.canRun(),y=w=>{var b;r||(r=!0,(b=t.onSuccess)==null||b.call(t,w),s==null||s(),a.resolve(w))},v=w=>{var b;r||(r=!0,(b=t.onError)==null||b.call(t,w),s==null||s(),a.reject(w))},x=()=>new Promise(w=>{var b;s=A=>{(r||f())&&w(A)},(b=t.onPause)==null||b.call(t)}).then(()=>{var w;s=void 0,r||(w=t.onContinue)==null||w.call(t)}),E=()=>{if(r)return;let w;const b=n===0?t.initialPromise:void 0;try{w=b??t.fn()}catch(A){w=Promise.reject(A)}Promise.resolve(w).then(y).catch(A=>{var z;if(r)return;const j=t.retry??(dl?0:3),T=t.retryDelay??zM,M=typeof T=="function"?T(n,A):T,$=j===!0||typeof j=="number"&&n<j||typeof j=="function"&&j(n,A);if(e||!$){v(A);return}n++,(z=t.onFail)==null||z.call(t,n,A),LM(M).then(()=>f()?void 0:x()).then(()=>{e?v(A):E()})})};return{promise:a,cancel:c,continue:()=>(s==null||s(),a),cancelRetry:u,continueRetry:h,canStart:p,start:()=>(p()?E():x().then(E),a)}}var BM=t=>setTimeout(t,0);function qM(){let t=[],e=0,n=u=>{u()},r=u=>{u()},s=BM;const a=u=>{e?t.push(u):s(()=>{n(u)})},c=()=>{const u=t;t=[],u.length&&s(()=>{r(()=>{u.forEach(h=>{n(h)})})})};return{batch:u=>{let h;e++;try{h=u()}finally{e--,e||c()}return h},batchCalls:u=>(...h)=>{a(()=>{u(...h)})},schedule:a,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var qn=qM(),Ja,mS,tj=(mS=class{constructor(){it(this,Ja)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Wv(this.gcTime)&&Me(this,Ja,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(dl?1/0:5*60*1e3))}clearGcTimeout(){Z(this,Ja)&&(clearTimeout(Z(this,Ja)),Me(this,Ja,void 0))}},Ja=new WeakMap,mS),Lc,Za,is,el,Zn,eh,tl,js,Ui,pS,WM=(pS=class extends tj{constructor(n){super();it(this,js);it(this,Lc);it(this,Za);it(this,is);it(this,el);it(this,Zn);it(this,eh);it(this,tl);Me(this,tl,!1),Me(this,eh,n.defaultOptions),this.setOptions(n.options),this.observers=[],Me(this,el,n.client),Me(this,is,Z(this,el).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Me(this,Lc,HM(this.options)),this.state=n.state??Z(this,Lc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=Z(this,Zn))==null?void 0:n.promise}setOptions(n){this.options={...Z(this,eh),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Z(this,is).remove(this)}setData(n,r){const s=Gv(this.state.data,n,this.options);return Nt(this,js,Ui).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Nt(this,js,Ui).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,a;const r=(s=Z(this,Zn))==null?void 0:s.promise;return(a=Z(this,Zn))==null||a.cancel(n),r?r.then(Tr).catch(Tr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Z(this,Lc))}isActive(){return this.observers.some(n=>Is(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===gw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Zo(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!QC(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=Z(this,Zn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=Z(this,Zn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),Z(this,is).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(Z(this,Zn)&&(Z(this,tl)?Z(this,Zn).cancel({revert:!0}):Z(this,Zn).cancelRetry()),this.scheduleGc()),Z(this,is).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Nt(this,js,Ui).call(this,{type:"invalidate"})}fetch(n,r){var p,y,v;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Z(this,Zn))return Z(this,Zn).continueRetry(),Z(this,Zn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const x=this.observers.find(E=>E.options.queryFn);x&&this.setOptions(x.options)}const s=new AbortController,a=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(Me(this,tl,!0),s.signal)})},c=()=>{const x=XC(this.options,r),w=(()=>{const b={client:Z(this,el),queryKey:this.queryKey,meta:this.meta};return a(b),b})();return Me(this,tl,!1),this.options.persister?this.options.persister(x,w,this):x(w)},h=(()=>{const x={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Z(this,el),state:this.state,fetchFn:c};return a(x),x})();(p=this.options.behavior)==null||p.onFetch(h,this),Me(this,Za,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((y=h.fetchOptions)==null?void 0:y.meta))&&Nt(this,js,Ui).call(this,{type:"fetch",meta:(v=h.fetchOptions)==null?void 0:v.meta});const f=x=>{var E,w,b,A;Yy(x)&&x.silent||Nt(this,js,Ui).call(this,{type:"error",error:x}),Yy(x)||((w=(E=Z(this,is).config).onError)==null||w.call(E,x,this),(A=(b=Z(this,is).config).onSettled)==null||A.call(b,this.state.data,x,this)),this.scheduleGc()};return Me(this,Zn,ej({initialPromise:r==null?void 0:r.initialPromise,fn:h.fetchFn,abort:s.abort.bind(s),onSuccess:x=>{var E,w,b,A;if(x===void 0){f(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(x)}catch(j){f(j);return}(w=(E=Z(this,is).config).onSuccess)==null||w.call(E,x,this),(A=(b=Z(this,is).config).onSettled)==null||A.call(b,x,this.state.error,this),this.scheduleGc()},onError:f,onFail:(x,E)=>{Nt(this,js,Ui).call(this,{type:"failed",failureCount:x,error:E})},onPause:()=>{Nt(this,js,Ui).call(this,{type:"pause"})},onContinue:()=>{Nt(this,js,Ui).call(this,{type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0})),Z(this,Zn).start()}},Lc=new WeakMap,Za=new WeakMap,is=new WeakMap,el=new WeakMap,Zn=new WeakMap,eh=new WeakMap,tl=new WeakMap,js=new WeakSet,Ui=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...nj(s.data,this.options),fetchMeta:n.meta??null};case"success":return Me(this,Za,void 0),{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=n.error;return Yy(a)&&a.revert&&Z(this,Za)?{...Z(this,Za),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),qn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Z(this,is).notify({query:this,type:"updated",action:n})})},pS);function nj(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:JC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function HM(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var si,gS,KM=(gS=class extends ah{constructor(e={}){super();it(this,si);this.config=e,Me(this,si,new Map)}build(e,n,r){const s=n.queryKey,a=n.queryHash??pw(s,n);let c=this.get(a);return c||(c=new WM({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(c)),c}add(e){Z(this,si).has(e.queryHash)||(Z(this,si).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Z(this,si).get(e.queryHash);n&&(e.destroy(),n===e&&Z(this,si).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){qn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Z(this,si).get(e)}getAll(){return[...Z(this,si).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>OE(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>OE(e,r)):n}notify(e){qn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){qn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){qn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},si=new WeakMap,gS),ii,hr,nl,oi,Oo,yS,GM=(yS=class extends tj{constructor(n){super();it(this,oi);it(this,ii);it(this,hr);it(this,nl);this.mutationId=n.mutationId,Me(this,hr,n.mutationCache),Me(this,ii,[]),this.state=n.state||QM(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){Z(this,ii).includes(n)||(Z(this,ii).push(n),this.clearGcTimeout(),Z(this,hr).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Me(this,ii,Z(this,ii).filter(r=>r!==n)),this.scheduleGc(),Z(this,hr).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){Z(this,ii).length||(this.state.status==="pending"?this.scheduleGc():Z(this,hr).remove(this))}continue(){var n;return((n=Z(this,nl))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var c,u,h,f,p,y,v,x,E,w,b,A,j,T,M,$,z,R,I,k;const r=()=>{Nt(this,oi,Oo).call(this,{type:"continue"})};Me(this,nl,ej({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(L,D)=>{Nt(this,oi,Oo).call(this,{type:"failed",failureCount:L,error:D})},onPause:()=>{Nt(this,oi,Oo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Z(this,hr).canRun(this)}));const s=this.state.status==="pending",a=!Z(this,nl).canStart();try{if(s)r();else{Nt(this,oi,Oo).call(this,{type:"pending",variables:n,isPaused:a}),await((u=(c=Z(this,hr).config).onMutate)==null?void 0:u.call(c,n,this));const D=await((f=(h=this.options).onMutate)==null?void 0:f.call(h,n));D!==this.state.context&&Nt(this,oi,Oo).call(this,{type:"pending",context:D,variables:n,isPaused:a})}const L=await Z(this,nl).start();return await((y=(p=Z(this,hr).config).onSuccess)==null?void 0:y.call(p,L,n,this.state.context,this)),await((x=(v=this.options).onSuccess)==null?void 0:x.call(v,L,n,this.state.context)),await((w=(E=Z(this,hr).config).onSettled)==null?void 0:w.call(E,L,null,this.state.variables,this.state.context,this)),await((A=(b=this.options).onSettled)==null?void 0:A.call(b,L,null,n,this.state.context)),Nt(this,oi,Oo).call(this,{type:"success",data:L}),L}catch(L){try{throw await((T=(j=Z(this,hr).config).onError)==null?void 0:T.call(j,L,n,this.state.context,this)),await(($=(M=this.options).onError)==null?void 0:$.call(M,L,n,this.state.context)),await((R=(z=Z(this,hr).config).onSettled)==null?void 0:R.call(z,void 0,L,this.state.variables,this.state.context,this)),await((k=(I=this.options).onSettled)==null?void 0:k.call(I,void 0,L,n,this.state.context)),L}finally{Nt(this,oi,Oo).call(this,{type:"error",error:L})}}finally{Z(this,hr).runNext(this)}}},ii=new WeakMap,hr=new WeakMap,nl=new WeakMap,oi=new WeakSet,Oo=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),qn.batch(()=>{Z(this,ii).forEach(s=>{s.onMutationUpdate(n)}),Z(this,hr).notify({mutation:this,type:"updated",action:n})})},yS);function QM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Bi,Ts,th,vS,YM=(vS=class extends ah{constructor(e={}){super();it(this,Bi);it(this,Ts);it(this,th);this.config=e,Me(this,Bi,new Set),Me(this,Ts,new Map),Me(this,th,0)}build(e,n,r){const s=new GM({mutationCache:this,mutationId:++Ff(this,th)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){Z(this,Bi).add(e);const n=Wf(e);if(typeof n=="string"){const r=Z(this,Ts).get(n);r?r.push(e):Z(this,Ts).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Z(this,Bi).delete(e)){const n=Wf(e);if(typeof n=="string"){const r=Z(this,Ts).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&Z(this,Ts).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Wf(e);if(typeof n=="string"){const r=Z(this,Ts).get(n),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Wf(e);if(typeof n=="string"){const s=(r=Z(this,Ts).get(n))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){qn.batch(()=>{Z(this,Bi).forEach(e=>{this.notify({type:"removed",mutation:e})}),Z(this,Bi).clear(),Z(this,Ts).clear()})}getAll(){return Array.from(Z(this,Bi))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>LE(n,r))}findAll(e={}){return this.getAll().filter(n=>LE(e,n))}notify(e){qn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return qn.batch(()=>Promise.all(e.map(n=>n.continue().catch(Tr))))}},Bi=new WeakMap,Ts=new WeakMap,th=new WeakMap,vS);function Wf(t){var e;return(e=t.options.scope)==null?void 0:e.id}function Dm(t){return{onFetch:(e,n)=>{var p,y,v,x,E;const r=e.options,s=(v=(y=(p=e.fetchOptions)==null?void 0:p.meta)==null?void 0:y.fetchMore)==null?void 0:v.direction,a=((x=e.state.data)==null?void 0:x.pages)||[],c=((E=e.state.data)==null?void 0:E.pageParams)||[];let u={pages:[],pageParams:[]},h=0;const f=async()=>{let w=!1;const b=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(e.signal.aborted?w=!0:e.signal.addEventListener("abort",()=>{w=!0}),e.signal)})},A=XC(e.options,e.fetchOptions),j=async(T,M,$)=>{if(w)return Promise.reject();if(M==null&&T.pages.length)return Promise.resolve(T);const R=(()=>{const D={client:e.client,queryKey:e.queryKey,pageParam:M,direction:$?"backward":"forward",meta:e.options.meta};return b(D),D})(),I=await A(R),{maxPages:k}=e.options,L=$?FM:MM;return{pages:L(T.pages,I,k),pageParams:L(T.pageParams,M,k)}};if(s&&a.length){const T=s==="backward",M=T?rj:Yv,$={pages:a,pageParams:c},z=M(r,$);u=await j($,z,T)}else{const T=t??a.length;do{const M=h===0?c[0]??r.initialPageParam:Yv(r,u);if(h>0&&M==null)break;u=await j(u,M),h++}while(h<T)}return u};e.options.persister?e.fetchFn=()=>{var w,b;return(b=(w=e.options).persister)==null?void 0:b.call(w,f,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=f}}}function Yv(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function rj(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}function XM(t,e){return e?Yv(t,e)!=null:!1}function JM(t,e){return!e||!t.getPreviousPageParam?!1:rj(t,e)!=null}var mn,qo,Wo,Mc,Fc,Ho,Vc,Uc,xS,ZM=(xS=class{constructor(t={}){it(this,mn);it(this,qo);it(this,Wo);it(this,Mc);it(this,Fc);it(this,Ho);it(this,Vc);it(this,Uc);Me(this,mn,t.queryCache||new KM),Me(this,qo,t.mutationCache||new YM),Me(this,Wo,t.defaultOptions||{}),Me(this,Mc,new Map),Me(this,Fc,new Map),Me(this,Ho,0)}mount(){Ff(this,Ho)._++,Z(this,Ho)===1&&(Me(this,Vc,yw.subscribe(async t=>{t&&(await this.resumePausedMutations(),Z(this,mn).onFocus())})),Me(this,Uc,Rm.subscribe(async t=>{t&&(await this.resumePausedMutations(),Z(this,mn).onOnline())})))}unmount(){var t,e;Ff(this,Ho)._--,Z(this,Ho)===0&&((t=Z(this,Vc))==null||t.call(this),Me(this,Vc,void 0),(e=Z(this,Uc))==null||e.call(this),Me(this,Uc,void 0))}isFetching(t){return Z(this,mn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Z(this,qo).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Z(this,mn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Z(this,mn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Zo(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return Z(this,mn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=Z(this,mn).get(r.queryHash),a=s==null?void 0:s.state.data,c=OM(e,a);if(c!==void 0)return Z(this,mn).build(this,r).setData(c,{...n,manual:!0})}setQueriesData(t,e,n){return qn.batch(()=>Z(this,mn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Z(this,mn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Z(this,mn);qn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Z(this,mn);return qn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=qn.batch(()=>Z(this,mn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Tr).catch(Tr)}invalidateQueries(t,e={}){return qn.batch(()=>(Z(this,mn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=qn.batch(()=>Z(this,mn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Tr)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Tr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Z(this,mn).build(this,e);return n.isStaleByTime(Zo(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Tr).catch(Tr)}fetchInfiniteQuery(t){return t.behavior=Dm(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Tr).catch(Tr)}ensureInfiniteQueryData(t){return t.behavior=Dm(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Rm.isOnline()?Z(this,qo).resumePausedMutations():Promise.resolve()}getQueryCache(){return Z(this,mn)}getMutationCache(){return Z(this,qo)}getDefaultOptions(){return Z(this,Wo)}setDefaultOptions(t){Me(this,Wo,t)}setQueryDefaults(t,e){Z(this,Mc).set(Rd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Z(this,Mc).values()],n={};return e.forEach(r=>{Dd(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){Z(this,Fc).set(Rd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Z(this,Fc).values()],n={};return e.forEach(r=>{Dd(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Z(this,Wo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=pw(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===gw&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Z(this,Wo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Z(this,mn).clear(),Z(this,qo).clear()}},mn=new WeakMap,qo=new WeakMap,Wo=new WeakMap,Mc=new WeakMap,Fc=new WeakMap,Ho=new WeakMap,Vc=new WeakMap,Uc=new WeakMap,xS),jr,St,nh,fr,rl,$c,Ko,Go,rh,zc,Bc,sl,il,Qo,qc,Ot,ad,Xv,Jv,Zv,ex,tx,nx,rx,ij,wS,sj=(wS=class extends ah{constructor(e,n){super();it(this,Ot);it(this,jr);it(this,St);it(this,nh);it(this,fr);it(this,rl);it(this,$c);it(this,Ko);it(this,Go);it(this,rh);it(this,zc);it(this,Bc);it(this,sl);it(this,il);it(this,Qo);it(this,qc,new Set);this.options=n,Me(this,jr,e),Me(this,Go,null),Me(this,Ko,Qv()),this.options.experimental_prefetchInRender||Z(this,Ko).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Z(this,St).addObserver(this),VE(Z(this,St),this.options)?Nt(this,Ot,ad).call(this):this.updateResult(),Nt(this,Ot,ex).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return sx(Z(this,St),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return sx(Z(this,St),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Nt(this,Ot,tx).call(this),Nt(this,Ot,nx).call(this),Z(this,St).removeObserver(this)}setOptions(e){const n=this.options,r=Z(this,St);if(this.options=Z(this,jr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Is(this.options.enabled,Z(this,St))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Nt(this,Ot,rx).call(this),Z(this,St).setOptions(this.options),n._defaulted&&!Hv(this.options,n)&&Z(this,jr).getQueryCache().notify({type:"observerOptionsUpdated",query:Z(this,St),observer:this});const s=this.hasListeners();s&&UE(Z(this,St),r,this.options,n)&&Nt(this,Ot,ad).call(this),this.updateResult(),s&&(Z(this,St)!==r||Is(this.options.enabled,Z(this,St))!==Is(n.enabled,Z(this,St))||Zo(this.options.staleTime,Z(this,St))!==Zo(n.staleTime,Z(this,St)))&&Nt(this,Ot,Xv).call(this);const a=Nt(this,Ot,Jv).call(this);s&&(Z(this,St)!==r||Is(this.options.enabled,Z(this,St))!==Is(n.enabled,Z(this,St))||a!==Z(this,Qo))&&Nt(this,Ot,Zv).call(this,a)}getOptimisticResult(e){const n=Z(this,jr).getQueryCache().build(Z(this,jr),e),r=this.createResult(n,e);return t4(this,r)&&(Me(this,fr,r),Me(this,$c,this.options),Me(this,rl,Z(this,St).state)),r}getCurrentResult(){return Z(this,fr)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){Z(this,qc).add(e)}getCurrentQuery(){return Z(this,St)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=Z(this,jr).defaultQueryOptions(e),r=Z(this,jr).getQueryCache().build(Z(this,jr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Nt(this,Ot,ad).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Z(this,fr)))}createResult(e,n){var k;const r=Z(this,St),s=this.options,a=Z(this,fr),c=Z(this,rl),u=Z(this,$c),f=e!==r?e.state:Z(this,nh),{state:p}=e;let y={...p},v=!1,x;if(n._optimisticResults){const L=this.hasListeners(),D=!L&&VE(e,n),O=L&&UE(e,r,n,s);(D||O)&&(y={...y,...nj(p.data,e.options)}),n._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:E,errorUpdatedAt:w,status:b}=y;x=y.data;let A=!1;if(n.placeholderData!==void 0&&x===void 0&&b==="pending"){let L;a!=null&&a.isPlaceholderData&&n.placeholderData===(u==null?void 0:u.placeholderData)?(L=a.data,A=!0):L=typeof n.placeholderData=="function"?n.placeholderData((k=Z(this,Bc))==null?void 0:k.state.data,Z(this,Bc)):n.placeholderData,L!==void 0&&(b="success",x=Gv(a==null?void 0:a.data,L,n),v=!0)}if(n.select&&x!==void 0&&!A)if(a&&x===(c==null?void 0:c.data)&&n.select===Z(this,rh))x=Z(this,zc);else try{Me(this,rh,n.select),x=n.select(x),x=Gv(a==null?void 0:a.data,x,n),Me(this,zc,x),Me(this,Go,null)}catch(L){Me(this,Go,L)}Z(this,Go)&&(E=Z(this,Go),x=Z(this,zc),w=Date.now(),b="error");const j=y.fetchStatus==="fetching",T=b==="pending",M=b==="error",$=T&&j,z=x!==void 0,I={status:b,fetchStatus:y.fetchStatus,isPending:T,isSuccess:b==="success",isError:M,isInitialLoading:$,isLoading:$,data:x,dataUpdatedAt:y.dataUpdatedAt,error:E,errorUpdatedAt:w,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>f.dataUpdateCount||y.errorUpdateCount>f.errorUpdateCount,isFetching:j,isRefetching:j&&!T,isLoadingError:M&&!z,isPaused:y.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:M&&z,isStale:vw(e,n),refetch:this.refetch,promise:Z(this,Ko)};if(this.options.experimental_prefetchInRender){const L=F=>{I.status==="error"?F.reject(I.error):I.data!==void 0&&F.resolve(I.data)},D=()=>{const F=Me(this,Ko,I.promise=Qv());L(F)},O=Z(this,Ko);switch(O.status){case"pending":e.queryHash===r.queryHash&&L(O);break;case"fulfilled":(I.status==="error"||I.data!==O.value)&&D();break;case"rejected":(I.status!=="error"||I.error!==O.reason)&&D();break}}return I}updateResult(){const e=Z(this,fr),n=this.createResult(Z(this,St),this.options);if(Me(this,rl,Z(this,St).state),Me(this,$c,this.options),Z(this,rl).data!==void 0&&Me(this,Bc,Z(this,St)),Hv(n,e))return;Me(this,fr,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!Z(this,qc).size)return!0;const c=new Set(a??Z(this,qc));return this.options.throwOnError&&c.add("error"),Object.keys(Z(this,fr)).some(u=>{const h=u;return Z(this,fr)[h]!==e[h]&&c.has(h)})};Nt(this,Ot,ij).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Nt(this,Ot,ex).call(this)}},jr=new WeakMap,St=new WeakMap,nh=new WeakMap,fr=new WeakMap,rl=new WeakMap,$c=new WeakMap,Ko=new WeakMap,Go=new WeakMap,rh=new WeakMap,zc=new WeakMap,Bc=new WeakMap,sl=new WeakMap,il=new WeakMap,Qo=new WeakMap,qc=new WeakMap,Ot=new WeakSet,ad=function(e){Nt(this,Ot,rx).call(this);let n=Z(this,St).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Tr)),n},Xv=function(){Nt(this,Ot,tx).call(this);const e=Zo(this.options.staleTime,Z(this,St));if(dl||Z(this,fr).isStale||!Wv(e))return;const r=QC(Z(this,fr).dataUpdatedAt,e)+1;Me(this,sl,setTimeout(()=>{Z(this,fr).isStale||this.updateResult()},r))},Jv=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Z(this,St)):this.options.refetchInterval)??!1},Zv=function(e){Nt(this,Ot,nx).call(this),Me(this,Qo,e),!(dl||Is(this.options.enabled,Z(this,St))===!1||!Wv(Z(this,Qo))||Z(this,Qo)===0)&&Me(this,il,setInterval(()=>{(this.options.refetchIntervalInBackground||yw.isFocused())&&Nt(this,Ot,ad).call(this)},Z(this,Qo)))},ex=function(){Nt(this,Ot,Xv).call(this),Nt(this,Ot,Zv).call(this,Nt(this,Ot,Jv).call(this))},tx=function(){Z(this,sl)&&(clearTimeout(Z(this,sl)),Me(this,sl,void 0))},nx=function(){Z(this,il)&&(clearInterval(Z(this,il)),Me(this,il,void 0))},rx=function(){const e=Z(this,jr).getQueryCache().build(Z(this,jr),this.options);if(e===Z(this,St))return;const n=Z(this,St);Me(this,St,e),Me(this,nh,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},ij=function(e){qn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(Z(this,fr))}),Z(this,jr).getQueryCache().notify({query:Z(this,St),type:"observerResultsUpdated"})})},wS);function e4(t,e){return Is(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function VE(t,e){return e4(t,e)||t.state.data!==void 0&&sx(t,e,e.refetchOnMount)}function sx(t,e,n){if(Is(e.enabled,t)!==!1&&Zo(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&vw(t,e)}return!1}function UE(t,e,n,r){return(t!==e||Is(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&vw(t,n)}function vw(t,e){return Is(e.enabled,t)!==!1&&t.isStaleByTime(Zo(e.staleTime,t))}function t4(t,e){return!Hv(t.getCurrentResult(),e)}var n4=class extends sj{constructor(t,e){super(t,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(t){super.setOptions({...t,behavior:Dm()})}getOptimisticResult(t){return t.behavior=Dm(),super.getOptimisticResult(t)}fetchNextPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"backward"}}})}createResult(t,e){var E,w;const{state:n}=t,r=super.createResult(t,e),{isFetching:s,isRefetching:a,isError:c,isRefetchError:u}=r,h=(w=(E=n.fetchMeta)==null?void 0:E.fetchMore)==null?void 0:w.direction,f=c&&h==="forward",p=s&&h==="forward",y=c&&h==="backward",v=s&&h==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:XM(e,n.data),hasPreviousPage:JM(e,n.data),isFetchNextPageError:f,isFetchingNextPage:p,isFetchPreviousPageError:y,isFetchingPreviousPage:v,isRefetchError:u&&!f&&!y,isRefetching:a&&!p&&!v}}},oj=_.createContext(void 0),xw=t=>{const e=_.useContext(oj);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},r4=({client:t,children:e})=>(_.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(oj.Provider,{value:t,children:e})),aj=_.createContext(!1),s4=()=>_.useContext(aj);aj.Provider;function i4(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var o4=_.createContext(i4()),a4=()=>_.useContext(o4),l4=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},c4=t=>{_.useEffect(()=>{t.clearReset()},[t])},u4=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||VM(n,[t.error,r])),d4=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},h4=(t,e)=>t.isLoading&&t.isFetching&&!e,f4=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,$E=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function lj(t,e,n){var y,v,x,E,w;const r=s4(),s=a4(),a=xw(),c=a.defaultQueryOptions(t);(v=(y=a.getDefaultOptions().queries)==null?void 0:y._experimental_beforeQuery)==null||v.call(y,c),c._optimisticResults=r?"isRestoring":"optimistic",d4(c),l4(c,s),c4(s);const u=!a.getQueryCache().get(c.queryHash),[h]=_.useState(()=>new e(a,c)),f=h.getOptimisticResult(c),p=!r&&t.subscribed!==!1;if(_.useSyncExternalStore(_.useCallback(b=>{const A=p?h.subscribe(qn.batchCalls(b)):Tr;return h.updateResult(),A},[h,p]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),_.useEffect(()=>{h.setOptions(c)},[c,h]),f4(c,f))throw $E(c,h,s);if(u4({result:f,errorResetBoundary:s,throwOnError:c.throwOnError,query:a.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw f.error;if((E=(x=a.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||E.call(x,c,f),c.experimental_prefetchInRender&&!dl&&h4(f,r)){const b=u?$E(c,h,s):(w=a.getQueryCache().get(c.queryHash))==null?void 0:w.promise;b==null||b.catch(Tr).finally(()=>{h.updateResult()})}return c.notifyOnChangeProps?f:h.trackResult(f)}function m4(t,e){return lj(t,sj)}function p4(t,e){return lj(t,n4)}/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Od(){return Od=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Od.apply(this,arguments)}var Yo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Yo||(Yo={}));const zE="popstate";function g4(t){t===void 0&&(t={});function e(r,s){let{pathname:a,search:c,hash:u}=r.location;return ix("",{pathname:a,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Om(s)}return v4(e,n,null,t)}function dn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cj(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function y4(){return Math.random().toString(36).substr(2,8)}function BE(t,e){return{usr:t.state,key:t.key,idx:e}}function ix(t,e,n,r){return n===void 0&&(n=null),Od({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?uu(e):e,{state:n,key:e&&e.key||r||y4()})}function Om(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function uu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function v4(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,c=s.history,u=Yo.Pop,h=null,f=p();f==null&&(f=0,c.replaceState(Od({},c.state,{idx:f}),""));function p(){return(c.state||{idx:null}).idx}function y(){u=Yo.Pop;let b=p(),A=b==null?null:b-f;f=b,h&&h({action:u,location:w.location,delta:A})}function v(b,A){u=Yo.Push;let j=ix(w.location,b,A);f=p()+1;let T=BE(j,f),M=w.createHref(j);try{c.pushState(T,"",M)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;s.location.assign(M)}a&&h&&h({action:u,location:w.location,delta:1})}function x(b,A){u=Yo.Replace;let j=ix(w.location,b,A);f=p();let T=BE(j,f),M=w.createHref(j);c.replaceState(T,"",M),a&&h&&h({action:u,location:w.location,delta:0})}function E(b){let A=s.location.origin!=="null"?s.location.origin:s.location.href,j=typeof b=="string"?b:Om(b);return j=j.replace(/ $/,"%20"),dn(A,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,A)}let w={get action(){return u},get location(){return t(s,c)},listen(b){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(zE,y),h=b,()=>{s.removeEventListener(zE,y),h=null}},createHref(b){return e(s,b)},createURL:E,encodeLocation(b){let A=E(b);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:v,replace:x,go(b){return c.go(b)}};return w}var qE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(qE||(qE={}));function x4(t,e,n){return n===void 0&&(n="/"),w4(t,e,n)}function w4(t,e,n,r){let s=typeof e=="string"?uu(e):e,a=Yc(s.pathname||"/",n);if(a==null)return null;let c=uj(t);_4(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let f=P4(a);u=A4(c[h],f)}return u}function uj(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,c,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};h.relativePath.startsWith("/")&&(dn(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let f=ea([r,h.relativePath]),p=n.concat(h);a.children&&a.children.length>0&&(dn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),uj(a.children,e,p,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:T4(f,a.index),routesMeta:p})};return t.forEach((a,c)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))s(a,c);else for(let h of dj(a.path))s(a,c,h)}),e}function dj(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let c=dj(r.join("/")),u=[];return u.push(...c.map(h=>h===""?a:[a,h].join("/"))),s&&u.push(...c),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function _4(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:I4(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const b4=/^:[\w-]+$/,E4=3,N4=2,S4=1,C4=10,j4=-2,WE=t=>t==="*";function T4(t,e){let n=t.split("/"),r=n.length;return n.some(WE)&&(r+=j4),e&&(r+=N4),n.filter(s=>!WE(s)).reduce((s,a)=>s+(b4.test(a)?E4:a===""?S4:C4),r)}function I4(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function A4(t,e,n){let{routesMeta:r}=t,s={},a="/",c=[];for(let u=0;u<r.length;++u){let h=r[u],f=u===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",y=ox({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),v=h.route;if(!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:ea([a,y.pathname]),pathnameBase:L4(ea([a,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(a=ea([a,y.pathnameBase]))}return c}function ox(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=k4(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],c=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((f,p,y)=>{let{paramName:v,isOptional:x}=p;if(v==="*"){let w=u[y]||"";c=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const E=u[y];return x&&!E?f[v]=void 0:f[v]=(E||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:c,pattern:t}}function k4(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),cj(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function P4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cj(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Yc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function R4(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?uu(t):t;return{pathname:n?n.startsWith("/")?n:D4(n,e):e,search:M4(r),hash:F4(s)}}function D4(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Xy(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function O4(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ww(t,e){let n=O4(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function _w(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=uu(t):(s=Od({},t),dn(!s.pathname||!s.pathname.includes("?"),Xy("?","pathname","search",s)),dn(!s.pathname||!s.pathname.includes("#"),Xy("#","pathname","hash",s)),dn(!s.search||!s.search.includes("#"),Xy("#","search","hash",s)));let a=t===""||s.pathname==="",c=a?"/":s.pathname,u;if(c==null)u=n;else{let y=e.length-1;if(!r&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}u=y>=0?e[y]:"/"}let h=R4(s,u),f=c&&c!=="/"&&c.endsWith("/"),p=(a||c===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}const ea=t=>t.join("/").replace(/\/\/+/g,"/"),L4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),M4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,F4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function V4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const hj=["post","put","patch","delete"];new Set(hj);const U4=["get",...hj];new Set(U4);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ld(){return Ld=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ld.apply(this,arguments)}const bp=_.createContext(null),fj=_.createContext(null),ro=_.createContext(null),Ep=_.createContext(null),gi=_.createContext({outlet:null,matches:[],isDataRoute:!1}),mj=_.createContext(null);function $4(t,e){let{relative:n}=e===void 0?{}:e;du()||dn(!1);let{basename:r,navigator:s}=_.useContext(ro),{hash:a,pathname:c,search:u}=Np(t,{relative:n}),h=c;return r!=="/"&&(h=c==="/"?r:ea([r,c])),s.createHref({pathname:h,search:u,hash:a})}function du(){return _.useContext(Ep)!=null}function so(){return du()||dn(!1),_.useContext(Ep).location}function pj(t){_.useContext(ro).static||_.useLayoutEffect(t)}function hu(){let{isDataRoute:t}=_.useContext(gi);return t?nF():z4()}function z4(){du()||dn(!1);let t=_.useContext(bp),{basename:e,future:n,navigator:r}=_.useContext(ro),{matches:s}=_.useContext(gi),{pathname:a}=so(),c=JSON.stringify(ww(s,n.v7_relativeSplatPath)),u=_.useRef(!1);return pj(()=>{u.current=!0}),_.useCallback(function(f,p){if(p===void 0&&(p={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let y=_w(f,JSON.parse(c),a,p.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:ea([e,y.pathname])),(p.replace?r.replace:r.push)(y,p.state,p)},[e,r,c,a,t])}const B4=_.createContext(null);function q4(t){let e=_.useContext(gi).outlet;return e&&_.createElement(B4.Provider,{value:t},e)}function gj(){let{matches:t}=_.useContext(gi),e=t[t.length-1];return e?e.params:{}}function Np(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=_.useContext(ro),{matches:s}=_.useContext(gi),{pathname:a}=so(),c=JSON.stringify(ww(s,r.v7_relativeSplatPath));return _.useMemo(()=>_w(t,JSON.parse(c),a,n==="path"),[t,c,a,n])}function W4(t,e){return H4(t,e)}function H4(t,e,n,r){du()||dn(!1);let{navigator:s}=_.useContext(ro),{matches:a}=_.useContext(gi),c=a[a.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let f=so(),p;if(e){var y;let b=typeof e=="string"?uu(e):e;h==="/"||(y=b.pathname)!=null&&y.startsWith(h)||dn(!1),p=b}else p=f;let v=p.pathname||"/",x=v;if(h!=="/"){let b=h.replace(/^\//,"").split("/");x="/"+v.replace(/^\//,"").split("/").slice(b.length).join("/")}let E=x4(t,{pathname:x}),w=X4(E&&E.map(b=>Object.assign({},b,{params:Object.assign({},u,b.params),pathname:ea([h,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?h:ea([h,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,n,r);return e&&w?_.createElement(Ep.Provider,{value:{location:Ld({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Yo.Pop}},w):w}function K4(){let t=tF(),e=V4(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:s},n):null,null)}const G4=_.createElement(K4,null);class Q4 extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(gi.Provider,{value:this.props.routeContext},_.createElement(mj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Y4(t){let{routeContext:e,match:n,children:r}=t,s=_.useContext(bp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(gi.Provider,{value:e},r)}function X4(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,u=(s=n)==null?void 0:s.errors;if(u!=null){let p=c.findIndex(y=>y.route.id&&(u==null?void 0:u[y.route.id])!==void 0);p>=0||dn(!1),c=c.slice(0,Math.min(c.length,p+1))}let h=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<c.length;p++){let y=c[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=p),y.route.id){let{loaderData:v,errors:x}=n,E=y.route.loader&&v[y.route.id]===void 0&&(!x||x[y.route.id]===void 0);if(y.route.lazy||E){h=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((p,y,v)=>{let x,E=!1,w=null,b=null;n&&(x=u&&y.route.id?u[y.route.id]:void 0,w=y.route.errorElement||G4,h&&(f<0&&v===0?(rF("route-fallback"),E=!0,b=null):f===v&&(E=!0,b=y.route.hydrateFallbackElement||null)));let A=e.concat(c.slice(0,v+1)),j=()=>{let T;return x?T=w:E?T=b:y.route.Component?T=_.createElement(y.route.Component,null):y.route.element?T=y.route.element:T=p,_.createElement(Y4,{match:y,routeContext:{outlet:p,matches:A,isDataRoute:n!=null},children:T})};return n&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?_.createElement(Q4,{location:n.location,revalidation:n.revalidation,component:w,error:x,children:j(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):j()},null)}var yj=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(yj||{}),vj=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(vj||{});function J4(t){let e=_.useContext(bp);return e||dn(!1),e}function Z4(t){let e=_.useContext(fj);return e||dn(!1),e}function eF(t){let e=_.useContext(gi);return e||dn(!1),e}function xj(t){let e=eF(),n=e.matches[e.matches.length-1];return n.route.id||dn(!1),n.route.id}function tF(){var t;let e=_.useContext(mj),n=Z4(),r=xj();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function nF(){let{router:t}=J4(yj.UseNavigateStable),e=xj(vj.UseNavigateStable),n=_.useRef(!1);return pj(()=>{n.current=!0}),_.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ld({fromRouteId:e},a)))},[t,e])}const HE={};function rF(t,e,n){HE[t]||(HE[t]=!0)}function um(t){let{to:e,replace:n,state:r,relative:s}=t;du()||dn(!1);let{future:a,static:c}=_.useContext(ro),{matches:u}=_.useContext(gi),{pathname:h}=so(),f=hu(),p=_w(e,ww(u,a.v7_relativeSplatPath),h,s==="path"),y=JSON.stringify(p);return _.useEffect(()=>f(JSON.parse(y),{replace:n,state:r,relative:s}),[f,y,s,n,r]),null}function sF(t){return q4(t.context)}function $t(t){dn(!1)}function iF(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Yo.Pop,navigator:a,static:c=!1,future:u}=t;du()&&dn(!1);let h=e.replace(/^\/*/,"/"),f=_.useMemo(()=>({basename:h,navigator:a,static:c,future:Ld({v7_relativeSplatPath:!1},u)}),[h,u,a,c]);typeof r=="string"&&(r=uu(r));let{pathname:p="/",search:y="",hash:v="",state:x=null,key:E="default"}=r,w=_.useMemo(()=>{let b=Yc(p,h);return b==null?null:{location:{pathname:b,search:y,hash:v,state:x,key:E},navigationType:s}},[h,p,y,v,x,E,s]);return w==null?null:_.createElement(ro.Provider,{value:f},_.createElement(Ep.Provider,{children:n,value:w}))}function oF(t){let{children:e,location:n}=t;return W4(ax(e),n)}new Promise(()=>{});function ax(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,s)=>{if(!_.isValidElement(r))return;let a=[...e,s];if(r.type===_.Fragment){n.push.apply(n,ax(r.props.children,a));return}r.type!==$t&&dn(!1),!r.props.index||!r.props.children||dn(!1);let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=ax(r.props.children,a)),n.push(c)}),n}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lm(){return Lm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lm.apply(this,arguments)}function wj(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function aF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function lF(t,e){return t.button===0&&(!e||e==="_self")&&!aF(t)}function lx(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function cF(t,e){let n=lx(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(a=>{n.append(s,a)})}),n}const uF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],dF=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],hF="6";try{window.__reactRouterVersion=hF}catch{}const fF=_.createContext({isTransitioning:!1}),mF="startTransition",KE=ES[mF];function pF(t){let{basename:e,children:n,future:r,window:s}=t,a=_.useRef();a.current==null&&(a.current=g4({window:s,v5Compat:!0}));let c=a.current,[u,h]=_.useState({action:c.action,location:c.location}),{v7_startTransition:f}=r||{},p=_.useCallback(y=>{f&&KE?KE(()=>h(y)):h(y)},[h,f]);return _.useLayoutEffect(()=>c.listen(p),[c,p]),_.createElement(iF,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:c,future:r})}const gF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rr=_.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:c,state:u,target:h,to:f,preventScrollReset:p,unstable_viewTransition:y}=e,v=wj(e,uF),{basename:x}=_.useContext(ro),E,w=!1;if(typeof f=="string"&&yF.test(f)&&(E=f,gF))try{let T=new URL(window.location.href),M=f.startsWith("//")?new URL(T.protocol+f):new URL(f),$=Yc(M.pathname,x);M.origin===T.origin&&$!=null?f=$+M.search+M.hash:w=!0}catch{}let b=$4(f,{relative:s}),A=xF(f,{replace:c,state:u,target:h,preventScrollReset:p,relative:s,unstable_viewTransition:y});function j(T){r&&r(T),T.defaultPrevented||A(T)}return _.createElement("a",Lm({},v,{href:E||b,onClick:w||a?r:j,ref:n,target:h}))}),GE=_.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:a="",end:c=!1,style:u,to:h,unstable_viewTransition:f,children:p}=e,y=wj(e,dF),v=Np(h,{relative:y.relative}),x=so(),E=_.useContext(fj),{navigator:w,basename:b}=_.useContext(ro),A=E!=null&&wF(v)&&f===!0,j=w.encodeLocation?w.encodeLocation(v).pathname:v.pathname,T=x.pathname,M=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;s||(T=T.toLowerCase(),M=M?M.toLowerCase():null,j=j.toLowerCase()),M&&b&&(M=Yc(M,b)||M);const $=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let z=T===j||!c&&T.startsWith(j)&&T.charAt($)==="/",R=M!=null&&(M===j||!c&&M.startsWith(j)&&M.charAt(j.length)==="/"),I={isActive:z,isPending:R,isTransitioning:A},k=z?r:void 0,L;typeof a=="function"?L=a(I):L=[a,z?"active":null,R?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let D=typeof u=="function"?u(I):u;return _.createElement(rr,Lm({},y,{"aria-current":k,className:L,ref:n,style:D,to:h,unstable_viewTransition:f}),typeof p=="function"?p(I):p)});var cx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(cx||(cx={}));var QE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(QE||(QE={}));function vF(t){let e=_.useContext(bp);return e||dn(!1),e}function xF(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:c,unstable_viewTransition:u}=e===void 0?{}:e,h=hu(),f=so(),p=Np(t,{relative:c});return _.useCallback(y=>{if(lF(y,n)){y.preventDefault();let v=r!==void 0?r:Om(f)===Om(p);h(t,{replace:v,state:s,preventScrollReset:a,relative:c,unstable_viewTransition:u})}},[f,h,p,r,s,n,t,a,c,u])}function lh(t){let e=_.useRef(lx(t)),n=_.useRef(!1),r=so(),s=_.useMemo(()=>cF(r.search,n.current?null:e.current),[r.search]),a=hu(),c=_.useCallback((u,h)=>{const f=lx(typeof u=="function"?u(s):u);n.current=!0,a("?"+f,h)},[a,s]);return[s,c]}function wF(t,e){e===void 0&&(e={});let n=_.useContext(fF);n==null&&dn(!1);let{basename:r}=vF(cx.useViewTransitionState),s=Np(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=Yc(n.currentLocation.pathname,r)||n.currentLocation.pathname,c=Yc(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ox(s.pathname,c)!=null||ox(s.pathname,a)!=null}const _F=()=>{};var YE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},bF=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],c=t[n++],u=t[n++],h=((s&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=t[n++],c=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|c&63)}}return e.join("")},bj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],c=s+1<t.length,u=c?t[s+1]:0,h=s+2<t.length,f=h?t[s+2]:0,p=a>>2,y=(a&3)<<4|u>>4;let v=(u&15)<<2|f>>6,x=f&63;h||(x=64,c||(v=64)),r.push(n[p],n[y],n[v],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_j(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||u==null||f==null||y==null)throw new EF;const v=a<<2|u>>4;if(r.push(v),f!==64){const x=u<<4&240|f>>2;if(r.push(x),y!==64){const E=f<<6&192|y;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class EF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NF=function(t){const e=_j(t);return bj.encodeByteArray(e,!0)},Mm=function(t){return NF(t).replace(/\./g,"")},Ej=function(t){try{return bj.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF=()=>SF().__FIREBASE_DEFAULTS__,jF=()=>{if(typeof process>"u"||typeof YE>"u")return;const t=YE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},TF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ej(t[1]);return e&&JSON.parse(e)},Sp=()=>{try{return _F()||CF()||jF()||TF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Nj=t=>{var e,n;return(n=(e=Sp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},IF=t=>{const e=Nj(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Sj=()=>{var t;return(t=Sp())===null||t===void 0?void 0:t.config},Cj=t=>{var e;return(e=Sp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kF(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Mm(JSON.stringify(n)),Mm(JSON.stringify(c)),""].join(".")}const vd={};function PF(){const t={prod:[],emulator:[]};for(const e of Object.keys(vd))vd[e]?t.emulator.push(e):t.prod.push(e);return t}function RF(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let XE=!1;function jj(t,e){if(typeof window>"u"||typeof document>"u"||!_l(window.location.host)||vd[t]===e||vd[t]||XE)return;vd[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",a=PF().prod.length>0;function c(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,x){v.setAttribute("width","24"),v.setAttribute("id",x),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{XE=!0,c()},v}function p(v,x){v.setAttribute("id",x),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=RF(r),x=n("text"),E=document.getElementById(x)||document.createElement("span"),w=n("learnmore"),b=document.getElementById(w)||document.createElement("a"),A=n("preprendIcon"),j=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const T=v.element;u(T),p(b,w);const M=f();h(j,A),T.append(j,E,b,M),document.body.appendChild(T)}a?(E.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ir())}function OF(){var t;const e=(t=Sp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function FF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VF(){const t=ir();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function UF(){return!OF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Tj(){try{return typeof indexedDB=="object"}catch{return!1}}function Ij(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}function $F(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF="FirebaseError";class Bs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=zF,Object.setPrototypeOf(this,Bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bl.prototype.create)}}class bl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],c=a?BF(a,r):"Error",u=`${this.serviceName}: ${c} (${s}).`;return new Bs(s,u,r)}}function BF(t,e){return t.replace(qF,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const qF=/\{\$([^}]+)}/g;function WF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],c=e[s];if(JE(a)&&JE(c)){if(!hl(a,c))return!1}else if(a!==c)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function JE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ld(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function cd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function HF(t,e){const n=new KF(t,e);return n.subscribe.bind(n)}class KF{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");GF(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Jy),s.error===void 0&&(s.error=Jy),s.complete===void 0&&(s.complete=Jy);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GF(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Jy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t){return t&&t._delegate?t._delegate:t}class hs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new AF;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XF(e))try{this.getOrInitializeService({instanceIdentifier:Ha})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ha){return this.instances.has(e)}getOptions(e=Ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&c.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:YF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ha){return this.component?this.component.multipleInstances?e:Ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YF(t){return t===Ha?void 0:t}function XF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new QF(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xt||(xt={}));const ZF={debug:xt.DEBUG,verbose:xt.VERBOSE,info:xt.INFO,warn:xt.WARN,error:xt.ERROR,silent:xt.SILENT},eV=xt.INFO,tV={[xt.DEBUG]:"log",[xt.VERBOSE]:"log",[xt.INFO]:"info",[xt.WARN]:"warn",[xt.ERROR]:"error"},nV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=tV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ew{constructor(e){this.name=e,this._logLevel=eV,this._logHandler=nV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xt.DEBUG,...e),this._logHandler(this,xt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xt.VERBOSE,...e),this._logHandler(this,xt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xt.INFO,...e),this._logHandler(this,xt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xt.WARN,...e),this._logHandler(this,xt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xt.ERROR,...e),this._logHandler(this,xt.ERROR,...e)}}const rV=(t,e)=>e.some(n=>t instanceof n);let ZE,eN;function sV(){return ZE||(ZE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iV(){return eN||(eN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Aj=new WeakMap,ux=new WeakMap,kj=new WeakMap,Zy=new WeakMap,Nw=new WeakMap;function oV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(Hi(t.result)),s()},c=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&Aj.set(n,t)}).catch(()=>{}),Nw.set(e,t),e}function aV(t){if(ux.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),s()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});ux.set(t,e)}let dx={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ux.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kj.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lV(t){dx=t(dx)}function cV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ev(this),e,...n);return kj.set(r,e.sort?e.sort():[e]),Hi(r)}:iV().includes(t)?function(...e){return t.apply(ev(this),e),Hi(Aj.get(this))}:function(...e){return Hi(t.apply(ev(this),e))}}function uV(t){return typeof t=="function"?cV(t):(t instanceof IDBTransaction&&aV(t),rV(t,sV())?new Proxy(t,dx):t)}function Hi(t){if(t instanceof IDBRequest)return oV(t);if(Zy.has(t))return Zy.get(t);const e=uV(t);return e!==t&&(Zy.set(t,e),Nw.set(e,t)),e}const ev=t=>Nw.get(t);function Cp(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const c=indexedDB.open(t,e),u=Hi(c);return r&&c.addEventListener("upgradeneeded",h=>{r(Hi(c.result),h.oldVersion,h.newVersion,Hi(c.transaction),h)}),n&&c.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{a&&h.addEventListener("close",()=>a()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}function tv(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Hi(n).then(()=>{})}const dV=["get","getKey","getAll","getAllKeys","count"],hV=["put","add","delete","clear"],nv=new Map;function tN(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(nv.get(e))return nv.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=hV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||dV.includes(n)))return;const a=async function(c,...u){const h=this.transaction(c,s?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),s&&h.done]))[0]};return nv.set(e,a),a}lV(t=>({...t,get:(e,n,r)=>tN(e,n)||t.get(e,n,r),has:(e,n)=>!!tN(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hx="@firebase/app",nN="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=new Ew("@firebase/app"),pV="@firebase/app-compat",gV="@firebase/analytics-compat",yV="@firebase/analytics",vV="@firebase/app-check-compat",xV="@firebase/app-check",wV="@firebase/auth",_V="@firebase/auth-compat",bV="@firebase/database",EV="@firebase/data-connect",NV="@firebase/database-compat",SV="@firebase/functions",CV="@firebase/functions-compat",jV="@firebase/installations",TV="@firebase/installations-compat",IV="@firebase/messaging",AV="@firebase/messaging-compat",kV="@firebase/performance",PV="@firebase/performance-compat",RV="@firebase/remote-config",DV="@firebase/remote-config-compat",OV="@firebase/storage",LV="@firebase/storage-compat",MV="@firebase/firestore",FV="@firebase/ai",VV="@firebase/firestore-compat",UV="firebase",$V="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx="[DEFAULT]",zV={[hx]:"fire-core",[pV]:"fire-core-compat",[yV]:"fire-analytics",[gV]:"fire-analytics-compat",[xV]:"fire-app-check",[vV]:"fire-app-check-compat",[wV]:"fire-auth",[_V]:"fire-auth-compat",[bV]:"fire-rtdb",[EV]:"fire-data-connect",[NV]:"fire-rtdb-compat",[SV]:"fire-fn",[CV]:"fire-fn-compat",[jV]:"fire-iid",[TV]:"fire-iid-compat",[IV]:"fire-fcm",[AV]:"fire-fcm-compat",[kV]:"fire-perf",[PV]:"fire-perf-compat",[RV]:"fire-rc",[DV]:"fire-rc-compat",[OV]:"fire-gcs",[LV]:"fire-gcs-compat",[MV]:"fire-fst",[VV]:"fire-fst-compat",[FV]:"fire-vertex","fire-js":"fire-js",[UV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm=new Map,BV=new Map,mx=new Map;function rN(t,e){try{t.container.addComponent(e)}catch(n){Xi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Vs(t){const e=t.name;if(mx.has(e))return Xi.debug(`There were multiple attempts to register component ${e}.`),!1;mx.set(e,t);for(const n of Fm.values())rN(n,t);for(const n of BV.values())rN(n,t);return!0}function El(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function os(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ta=new bl("app","Firebase",qV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ta.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=$V;function Pj(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:fx,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw ta.create("bad-app-name",{appName:String(s)});if(n||(n=Sj()),!n)throw ta.create("no-options");const a=Fm.get(s);if(a){if(hl(n,a.options)&&hl(r,a.config))return a;throw ta.create("duplicate-app",{appName:s})}const c=new JF(s);for(const h of mx.values())c.addComponent(h);const u=new WV(n,r,c);return Fm.set(s,u),u}function Sw(t=fx){const e=Fm.get(t);if(!e&&t===fx&&Sj())return Pj();if(!e)throw ta.create("no-app",{appName:t});return e}function Dr(t,e,n){var r;let s=(r=zV[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xi.warn(u.join(" "));return}Vs(new hs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV="firebase-heartbeat-database",KV=1,Md="firebase-heartbeat-store";let rv=null;function Rj(){return rv||(rv=Cp(HV,KV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Md)}catch(n){console.warn(n)}}}}).catch(t=>{throw ta.create("idb-open",{originalErrorMessage:t.message})})),rv}async function GV(t){try{const n=(await Rj()).transaction(Md),r=await n.objectStore(Md).get(Dj(t));return await n.done,r}catch(e){if(e instanceof Bs)Xi.warn(e.message);else{const n=ta.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xi.warn(n.message)}}}async function sN(t,e){try{const r=(await Rj()).transaction(Md,"readwrite");await r.objectStore(Md).put(e,Dj(t)),await r.done}catch(n){if(n instanceof Bs)Xi.warn(n.message);else{const r=ta.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xi.warn(r.message)}}}function Dj(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV=1024,YV=30;class XV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ZV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=iN();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>YV){const c=eU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Xi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=iN(),{heartbeatsToSend:r,unsentEntries:s}=JV(this._heartbeatsCache.heartbeats),a=Mm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Xi.warn(n),""}}}function iN(){return new Date().toISOString().substring(0,10)}function JV(t,e=QV){const n=[];let r=t.slice();for(const s of t){const a=n.find(c=>c.agent===s.agent);if(a){if(a.dates.push(s.date),oN(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),oN(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ZV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tj()?Ij().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await GV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return sN(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return sN(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function oN(t){return Mm(JSON.stringify({version:2,heartbeats:t})).length}function eU(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(t){Vs(new hs("platform-logger",e=>new fV(e),"PRIVATE")),Vs(new hs("heartbeat",e=>new XV(e),"PRIVATE")),Dr(hx,nN,t),Dr(hx,nN,"esm2017"),Dr("fire-js","")}tU("");var tr=function(){return tr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},tr.apply(this,arguments)};function fu(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Oj(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function Lj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nU=Lj,Mj=new bl("auth","Firebase",Lj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm=new Ew("@firebase/auth");function rU(t,...e){Vm.logLevel<=xt.WARN&&Vm.warn(`Auth (${Nl}): ${t}`,...e)}function dm(t,...e){Vm.logLevel<=xt.ERROR&&Vm.error(`Auth (${Nl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(t,...e){throw Cw(t,...e)}function li(t,...e){return Cw(t,...e)}function Fj(t,e,n){const r=Object.assign(Object.assign({},nU()),{[e]:n});return new bl("auth","Firebase",r).create(e,{appName:t.name})}function na(t){return Fj(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Mj.create(t,...e)}function rt(t,e,...n){if(!t)throw Cw(e,...n)}function qi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw dm(e),new Error(e)}function Ji(t,e){t||qi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function sU(){return aN()==="http:"||aN()==="https:"}function aN(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sU()||MF()||"connection"in navigator)?navigator.onLine:!0}function oU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ji(n>e,"Short delay should be less than long delay!"),this.isMobile=DF()||FF()}get(){return iU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t,e){Ji(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cU=new uh(3e4,6e4);function Sl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function wa(t,e,n,r,s={}){return Uj(t,s,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const u=ch(Object.assign({key:t.config.apiKey},c)).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:h},a);return LF()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&_l(t.emulatorConfig.host)&&(f.credentials="include"),Vj.fetch()(await $j(t,t.config.apiHost,n,u),f)})}async function Uj(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},aU),e);try{const s=new dU(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Hf(t,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const u=a.ok?c.errorMessage:c.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hf(t,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw Hf(t,"email-already-in-use",c);if(h==="USER_DISABLED")throw Hf(t,"user-disabled",c);const p=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Fj(t,p,f);Us(t,p)}}catch(s){if(s instanceof Bs)throw s;Us(t,"network-request-failed",{message:String(s)})}}async function jp(t,e,n,r,s={}){const a=await wa(t,e,n,r,s);return"mfaPendingCredential"in a&&Us(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function $j(t,e,n,r){const s=`${e}${n}?${r}`,a=t,c=a.config.emulator?jw(t.config,s):`${t.config.apiScheme}://${s}`;return lU.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function uU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(li(this.auth,"network-request-failed")),cU.get())})}}function Hf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=li(t,e,r);return s.customData._tokenResponse=n,s}function lN(t){return t!==void 0&&t.enterprise!==void 0}class hU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return uU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function fU(t,e){return wa(t,"GET","/v2/recaptchaConfig",Sl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mU(t,e){return wa(t,"POST","/v1/accounts:delete",e)}async function Um(t,e){return wa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pU(t,e=!1){const n=sn(t),r=await n.getIdToken(e),s=Tw(r);rt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:xd(sv(s.auth_time)),issuedAtTime:xd(sv(s.iat)),expirationTime:xd(sv(s.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function sv(t){return Number(t)*1e3}function Tw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return dm("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ej(n);return s?JSON.parse(s):(dm("Failed to decode base64 JWT payload"),null)}catch(s){return dm("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function cN(t){const e=Tw(t);return rt(e,"internal-error"),rt(typeof e.exp<"u","internal-error"),rt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Bs&&gU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function gU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xd(this.lastLoginAt),this.creationTime=xd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $m(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Fd(t,Um(n,{idToken:r}));rt(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?zj(a.providerUserInfo):[],u=xU(t.providerData,c),h=t.isAnonymous,f=!(t.email&&a.passwordHash)&&!(u!=null&&u.length),p=h?f:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new gx(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(t,y)}async function vU(t){const e=sn(t);await $m(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xU(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function zj(t){return t.map(e=>{var{providerId:n}=e,r=fu(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wU(t,e){const n=await Uj(t,{},async()=>{const r=ch({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,c=await $j(t,s,"/v1/token",`key=${a}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return t.emulatorConfig&&_l(t.emulatorConfig.host)&&(h.credentials="include"),Vj.fetch()(c,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _U(t,e){return wa(t,"POST","/v2/accounts:revokeToken",Sl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){rt(e.idToken,"internal-error"),rt(typeof e.idToken<"u","internal-error"),rt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){rt(e.length!==0,"internal-error");const n=cN(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(rt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await wU(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,c=new Cc;return r&&(rt(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(rt(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),a&&(rt(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Cc,this.toJSON())}_performRefresh(){return qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(t,e){rt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class As{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,a=fu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new gx(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Fd(this,this.stsTokenManager.getToken(this.auth,e));return rt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return pU(this,e)}reload(){return vU(this)}_assign(e){this!==e&&(rt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new As(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await $m(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(os(this.auth.app))return Promise.reject(na(this.auth));const e=await this.getIdToken();return await Fd(this,mU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,a,c,u,h,f,p;const y=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(s=n.email)!==null&&s!==void 0?s:void 0,x=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,E=(c=n.photoURL)!==null&&c!==void 0?c:void 0,w=(u=n.tenantId)!==null&&u!==void 0?u:void 0,b=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,A=(f=n.createdAt)!==null&&f!==void 0?f:void 0,j=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:T,emailVerified:M,isAnonymous:$,providerData:z,stsTokenManager:R}=n;rt(T&&R,e,"internal-error");const I=Cc.fromJSON(this.name,R);rt(typeof T=="string",e,"internal-error"),Do(y,e.name),Do(v,e.name),rt(typeof M=="boolean",e,"internal-error"),rt(typeof $=="boolean",e,"internal-error"),Do(x,e.name),Do(E,e.name),Do(w,e.name),Do(b,e.name),Do(A,e.name),Do(j,e.name);const k=new As({uid:T,auth:e,email:v,emailVerified:M,displayName:y,isAnonymous:$,photoURL:E,phoneNumber:x,tenantId:w,stsTokenManager:I,createdAt:A,lastLoginAt:j});return z&&Array.isArray(z)&&(k.providerData=z.map(L=>Object.assign({},L))),b&&(k._redirectEventId=b),k}static async _fromIdTokenResponse(e,n,r=!1){const s=new Cc;s.updateFromServerResponse(n);const a=new As({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await $m(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];rt(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?zj(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),u=new Cc;u.updateFromIdToken(r);const h=new As({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new gx(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=new Map;function Wi(t){Ji(t instanceof Function,"Expected a class definition");let e=uN.get(t);return e?(Ji(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,uN.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Bj.type="NONE";const dN=Bj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(t,e,n){return`firebase:${t}:${e}:${n}`}class jc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=hm(this.userKey,s.apiKey,a),this.fullPersistenceKey=hm("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Um(this.auth,{idToken:e}).catch(()=>{});return n?As._fromGetAccountInfoResponse(this.auth,n,e):null}return As._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new jc(Wi(dN),e,r);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=s[0]||Wi(dN);const c=hm(r,e.config.apiKey,e.name);let u=null;for(const f of n)try{const p=await f._get(c);if(p){let y;if(typeof p=="string"){const v=await Um(e,{idToken:p}).catch(()=>{});if(!v)break;y=await As._fromGetAccountInfoResponse(e,v,p)}else y=As._fromJSON(e,p);f!==a&&(u=y),a=f;break}}catch{}const h=s.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new jc(a,e,r):(a=h[0],u&&await a._set(c,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==a)try{await f._remove(c)}catch{}})),new jc(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Kj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Qj(e))return"Blackberry";if(Yj(e))return"Webos";if(Wj(e))return"Safari";if((e.includes("chrome/")||Hj(e))&&!e.includes("edge/"))return"Chrome";if(Gj(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function qj(t=ir()){return/firefox\//i.test(t)}function Wj(t=ir()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Hj(t=ir()){return/crios\//i.test(t)}function Kj(t=ir()){return/iemobile/i.test(t)}function Gj(t=ir()){return/android/i.test(t)}function Qj(t=ir()){return/blackberry/i.test(t)}function Yj(t=ir()){return/webos/i.test(t)}function Iw(t=ir()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bU(t=ir()){var e;return Iw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function EU(){return VF()&&document.documentMode===10}function Xj(t=ir()){return Iw(t)||Gj(t)||Yj(t)||Qj(t)||/windows phone/i.test(t)||Kj(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jj(t,e=[]){let n;switch(t){case"Browser":n=hN(ir());break;case"Worker":n=`${hN(ir())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Nl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((c,u)=>{try{const h=e(a);c(h)}catch(h){u(h)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SU(t,e={}){return wa(t,"GET","/v2/passwordPolicy",Sl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU=6;class jU{constructor(e){var n,r,s,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:CU,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,a,c,u;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(s=h.containsLowercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsUppercaseLetter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(c=h.containsNumericCharacter)!==null&&c!==void 0?c:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fN(this),this.idTokenSubscription=new fN(this),this.beforeStateQueue=new NU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wi(n)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await jc.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Um(this,{idToken:e}),r=await As._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(os(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,h=await this.tryRedirectSignIn(e);(!c||c===u)&&(h!=null&&h.user)&&(s=h.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return rt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await $m(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(os(this.app))return Promise.reject(na(this));const n=e?sn(e):null;return n&&rt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&rt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return os(this.app)?Promise.reject(na(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return os(this.app)?Promise.reject(na(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SU(this),n=new jU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await _U(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wi(e)||this._popupRedirectResolver;rt(n,this,"argument-error"),this.redirectPersistenceManager=await jc.create(this,[Wi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(rt(u,this,"internal-error"),u.then(()=>{c||a(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,r,s);return()=>{c=!0,h()}}else{const h=e.addObserver(n);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Jj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(os(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&rU(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function mu(t){return sn(t)}class fN{constructor(e){this.auth=e,this.observer=null,this.addObserver=HF(n=>this.observer=n)}get next(){return rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IU(t){Tp=t}function Zj(t){return Tp.loadJS(t)}function AU(){return Tp.recaptchaEnterpriseScript}function kU(){return Tp.gapiScript}function PU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class RU{constructor(){this.enterprise=new DU}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class DU{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const OU="recaptcha-enterprise",eT="NO_RECAPTCHA";class LU{constructor(e){this.type=OU,this.auth=mu(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,u)=>{fU(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new hU(h);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,c(f.siteKey)}}).catch(h=>{u(h)})})}function s(a,c,u){const h=window.grecaptcha;lN(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(f=>{c(f)}).catch(()=>{c(eT)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new RU().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(u=>{if(!n&&lN(window.grecaptcha))s(u,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=AU();h.length!==0&&(h+=u),Zj(h).then(()=>{s(u,a,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function mN(t,e,n,r=!1,s=!1){const a=new LU(t);let c;if(s)c=eT;else try{c=await a.verify(n)}catch{c=await a.verify(n,!0)}const u=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function pN(t,e,n,r,s){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await mN(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await mN(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MU(t,e){const n=El(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(hl(a,e??{}))return s;Us(s,"already-initialized")}return n.initialize({options:e})}function FU(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Wi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function VU(t,e,n){const r=mu(t);rt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=tT(e),{host:c,port:u}=UU(e),h=u===null?"":`:${u}`,f={url:`${a}//${c}${h}/`},p=Object.freeze({host:c,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){rt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),rt(hl(f,r.config.emulator)&&hl(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,_l(c)?(bw(`${a}//${c}${h}`),jj("Auth",!0)):$U()}function tT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function UU(t){const e=tT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:gN(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:gN(c)}}}function gN(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $U(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qi("not implemented")}_getIdTokenResponse(e){return qi("not implemented")}_linkToIdToken(e,n){return qi("not implemented")}_getReauthenticationResolver(e){return qi("not implemented")}}async function zU(t,e){return wa(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BU(t,e){return jp(t,"POST","/v1/accounts:signInWithPassword",Sl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qU(t,e){return jp(t,"POST","/v1/accounts:signInWithEmailLink",Sl(t,e))}async function WU(t,e){return jp(t,"POST","/v1/accounts:signInWithEmailLink",Sl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd extends Aw{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Vd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Vd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pN(e,n,"signInWithPassword",BU);case"emailLink":return qU(e,{email:this._email,oobCode:this._password});default:Us(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pN(e,r,"signUpPassword",zU);case"emailLink":return WU(e,{idToken:n,email:this._email,oobCode:this._password});default:Us(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tc(t,e){return jp(t,"POST","/v1/accounts:signInWithIdp",Sl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU="http://localhost";class fl extends Aw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Us("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,a=fu(n,["providerId","signInMethod"]);if(!r||!s)return null;const c=new fl(r,s);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return Tc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Tc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Tc(e,n)}buildRequest(){const e={requestUri:HU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ch(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GU(t){const e=ld(cd(t)).link,n=e?ld(cd(e)).deep_link_id:null,r=ld(cd(t)).deep_link_id;return(r?ld(cd(r)).link:null)||r||n||e||t}class kw{constructor(e){var n,r,s,a,c,u;const h=ld(cd(e)),f=(n=h.apiKey)!==null&&n!==void 0?n:null,p=(r=h.oobCode)!==null&&r!==void 0?r:null,y=KU((s=h.mode)!==null&&s!==void 0?s:null);rt(f&&p&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=p,this.continueUrl=(a=h.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=h.lang)!==null&&c!==void 0?c:null,this.tenantId=(u=h.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=GU(e);try{return new kw(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(){this.providerId=pu.PROVIDER_ID}static credential(e,n){return Vd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=kw.parseLink(n);return rt(r,"argument-error"),Vd._fromEmailAndCode(e,r.code,r.tenantId)}}pu.PROVIDER_ID="password";pu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";pu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh extends nT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo extends dh{constructor(){super("facebook.com")}static credential(e){return fl._fromParams({providerId:Fo.PROVIDER_ID,signInMethod:Fo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fo.credentialFromTaggedObject(e)}static credentialFromError(e){return Fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fo.credential(e.oauthAccessToken)}catch{return null}}}Fo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo extends dh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fl._fromParams({providerId:Vo.PROVIDER_ID,signInMethod:Vo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Vo.credentialFromTaggedObject(e)}static credentialFromError(e){return Vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Vo.credential(n,r)}catch{return null}}}Vo.GOOGLE_SIGN_IN_METHOD="google.com";Vo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo extends dh{constructor(){super("github.com")}static credential(e){return fl._fromParams({providerId:Uo.PROVIDER_ID,signInMethod:Uo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Uo.credentialFromTaggedObject(e)}static credentialFromError(e){return Uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Uo.credential(e.oauthAccessToken)}catch{return null}}}Uo.GITHUB_SIGN_IN_METHOD="github.com";Uo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends dh{constructor(){super("twitter.com")}static credential(e,n){return fl._fromParams({providerId:$o.PROVIDER_ID,signInMethod:$o.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return $o.credentialFromTaggedObject(e)}static credentialFromError(e){return $o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return $o.credential(n,r)}catch{return null}}}$o.TWITTER_SIGN_IN_METHOD="twitter.com";$o.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await As._fromIdTokenResponse(e,r,s),c=yN(r);return new Xc({user:a,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=yN(r);return new Xc({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function yN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm extends Bs{constructor(e,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,zm.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new zm(e,n,r,s)}}function rT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?zm._fromErrorAndOperation(t,a,e,r):a})}async function QU(t,e,n=!1){const r=await Fd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Xc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YU(t,e,n=!1){const{auth:r}=t;if(os(r.app))return Promise.reject(na(r));const s="reauthenticate";try{const a=await Fd(t,rT(r,s,e,t),n);rt(a.idToken,r,"internal-error");const c=Tw(a.idToken);rt(c,r,"internal-error");const{sub:u}=c;return rt(t.uid===u,r,"user-mismatch"),Xc._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Us(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sT(t,e,n=!1){if(os(t.app))return Promise.reject(na(t));const r="signIn",s=await rT(t,r,e),a=await Xc._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function XU(t,e){return sT(mu(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JU(t){const e=mu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function ZU(t,e,n){return os(t.app)?Promise.reject(na(t)):XU(sn(t),pu.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&JU(t),r})}function e3(t,e,n,r){return sn(t).onIdTokenChanged(e,n,r)}function t3(t,e,n){return sn(t).beforeAuthStateChanged(e,n)}function n3(t,e,n,r){return sn(t).onAuthStateChanged(e,n,r)}function r3(t){return sn(t).signOut()}const Bm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bm,"1"),this.storage.removeItem(Bm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3=1e3,i3=10;class oT extends iT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Xj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);EU()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,i3):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},s3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}oT.type="LOCAL";const o3=oT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT extends iT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}aT.type="SESSION";const lT=aT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ip(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(c).map(async f=>f(n.origin,a)),h=await a3(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ip.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,c;return new Promise((u,h)=>{const f=Pw("",20);s.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(y){const v=y;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(v.data.response);break;default:clearTimeout(p),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(){return window}function c3(t){ci().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(){return typeof ci().WorkerGlobalScope<"u"&&typeof ci().importScripts=="function"}async function u3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function d3(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function h3(){return cT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="firebaseLocalStorageDb",f3=1,qm="firebaseLocalStorage",dT="fbase_key";class hh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ap(t,e){return t.transaction([qm],e?"readwrite":"readonly").objectStore(qm)}function m3(){const t=indexedDB.deleteDatabase(uT);return new hh(t).toPromise()}function yx(){const t=indexedDB.open(uT,f3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(qm,{keyPath:dT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(qm)?e(r):(r.close(),await m3(),e(await yx()))})})}async function vN(t,e,n){const r=Ap(t,!0).put({[dT]:e,value:n});return new hh(r).toPromise()}async function p3(t,e){const n=Ap(t,!1).get(e),r=await new hh(n).toPromise();return r===void 0?null:r.value}function xN(t,e){const n=Ap(t,!0).delete(e);return new hh(n).toPromise()}const g3=800,y3=3;class hT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yx(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>y3)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ip._getInstance(h3()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await u3(),!this.activeServiceWorker)return;this.sender=new l3(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||d3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yx();return await vN(e,Bm,"1"),await xN(e,Bm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>vN(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>p3(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>xN(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Ap(s,!1).getAll();return new hh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),g3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hT.type="LOCAL";const v3=hT;new uh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(t,e){return e?Wi(e):(rt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw extends Aw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Tc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Tc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Tc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function w3(t){return sT(t.auth,new Rw(t),t.bypassAuthState)}function _3(t){const{auth:e,user:n}=t;return rt(n,e,"internal-error"),YU(n,new Rw(t),t.bypassAuthState)}async function b3(t){const{auth:e,user:n}=t;return rt(n,e,"internal-error"),QU(n,new Rw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:c,type:u}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return w3;case"linkViaPopup":case"linkViaRedirect":return b3;case"reauthViaPopup":case"reauthViaRedirect":return _3;default:Us(this.auth,"internal-error")}}resolve(e){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3=new uh(2e3,1e4);class _c extends fT{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,_c.currentPopupAction&&_c.currentPopupAction.cancel(),_c.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return rt(e,this.auth,"internal-error"),e}async onExecution(){Ji(this.filter.length===1,"Popup operations only handle one event");const e=Pw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(li(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(li(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_c.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(li(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,E3.get())};e()}}_c.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3="pendingRedirect",fm=new Map;class S3 extends fT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=fm.get(this.auth._key());if(!e){try{const r=await C3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}fm.set(this.auth._key(),e)}return this.bypassAuthState||fm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function C3(t,e){const n=I3(e),r=T3(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function j3(t,e){fm.set(t._key(),e)}function T3(t){return Wi(t._redirectPersistence)}function I3(t){return hm(N3,t.config.apiKey,t.name)}async function A3(t,e,n=!1){if(os(t.app))return Promise.reject(na(t));const r=mu(t),s=x3(r,e),c=await new S3(r,s,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3=10*60*1e3;class P3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!R3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!mT(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(li(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=k3&&this.cachedEventUids.clear(),this.cachedEventUids.has(wN(e))}saveEventToCache(e){this.cachedEventUids.add(wN(e)),this.lastProcessedEventTime=Date.now()}}function wN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function mT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function R3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D3(t,e={}){return wa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,L3=/^https?/;async function M3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await D3(t);for(const n of e)try{if(F3(n))return}catch{}Us(t,"unauthorized-domain")}function F3(t){const e=px(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!L3.test(n))return!1;if(O3.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3=new uh(3e4,6e4);function _N(){const t=ci().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function U3(t){return new Promise((e,n)=>{var r,s,a;function c(){_N(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_N(),n(li(t,"network-request-failed"))},timeout:V3.get()})}if(!((s=(r=ci().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=ci().gapi)===null||a===void 0)&&a.load)c();else{const u=PU("iframefcb");return ci()[u]=()=>{gapi.load?c():n(li(t,"network-request-failed"))},Zj(`${kU()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw mm=null,e})}let mm=null;function $3(t){return mm=mm||U3(t),mm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3=new uh(5e3,15e3),B3="__/auth/iframe",q3="emulator/auth/iframe",W3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},H3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function K3(t){const e=t.config;rt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?jw(e,q3):`https://${t.config.authDomain}/${B3}`,r={apiKey:e.apiKey,appName:t.name,v:Nl},s=H3.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${ch(r).slice(1)}`}async function G3(t){const e=await $3(t),n=ci().gapi;return rt(n,t,"internal-error"),e.open({where:document.body,url:K3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:W3,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const c=li(t,"network-request-failed"),u=ci().setTimeout(()=>{a(c)},z3.get());function h(){ci().clearTimeout(u),s(r)}r.ping(h).then(h,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Y3=500,X3=600,J3="_blank",Z3="http://localhost";class bN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function e6(t,e,n,r=Y3,s=X3){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h=Object.assign(Object.assign({},Q3),{width:r.toString(),height:s.toString(),top:a,left:c}),f=ir().toLowerCase();n&&(u=Hj(f)?J3:n),qj(f)&&(e=e||Z3,h.scrollbars="yes");const p=Object.entries(h).reduce((v,[x,E])=>`${v}${x}=${E},`,"");if(bU(f)&&u!=="_self")return t6(e||"",u),new bN(null);const y=window.open(e||"",u,p);rt(y,t,"popup-blocked");try{y.focus()}catch{}return new bN(y)}function t6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6="__/auth/handler",r6="emulator/auth/handler",s6=encodeURIComponent("fac");async function EN(t,e,n,r,s,a){rt(t.config.authDomain,t,"auth-domain-config-required"),rt(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Nl,eventId:s};if(e instanceof nT){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",WF(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,y]of Object.entries({}))c[p]=y}if(e instanceof dh){const p=e.getScopes().filter(y=>y!=="");p.length>0&&(c.scopes=p.join(","))}t.tenantId&&(c.tid=t.tenantId);const u=c;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const h=await t._getAppCheckToken(),f=h?`#${s6}=${encodeURIComponent(h)}`:"";return`${i6(t)}?${ch(u).slice(1)}${f}`}function i6({config:t}){return t.emulator?jw(t,r6):`https://${t.authDomain}/${n6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="webStorageSupport";class o6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lT,this._completeRedirectFn=A3,this._overrideRedirectResult=j3}async _openPopup(e,n,r,s){var a;Ji((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await EN(e,n,r,px(),s);return e6(e,c,Pw())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await EN(e,n,r,px(),s);return c3(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Ji(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await G3(e),r=new P3(e);return n.register("authEvent",s=>(rt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(iv,{type:iv},s=>{var a;const c=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[iv];c!==void 0&&n(!!c),Us(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=M3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Xj()||Wj()||Iw()}}const a6=o6;var NN="@firebase/auth",SN="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function u6(t){Vs(new hs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;rt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jj(t)},f=new TU(r,s,a,h);return FU(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Vs(new hs("auth-internal",e=>{const n=mu(e.getProvider("auth").getImmediate());return(r=>new l6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dr(NN,SN,c6(t)),Dr(NN,SN,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6=5*60,h6=Cj("authIdTokenMaxAge")||d6;let CN=null;const f6=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>h6)return;const s=n==null?void 0:n.token;CN!==s&&(CN=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function m6(t=Sw()){const e=El(t,"auth");if(e.isInitialized())return e.getImmediate();const n=MU(t,{popupRedirectResolver:a6,persistence:[v3,o3,lT]}),r=Cj("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=f6(a.toString());t3(n,c,()=>c(n.currentUser)),e3(n,u=>c(u))}}const s=Nj("auth");return s&&VU(n,`http://${s}`),n}function p6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}IU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=li("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",p6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});u6("Browser");var g6="firebase",y6="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dr(g6,y6,"app");var jN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ra,pT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function k(){}k.prototype=I.prototype,R.D=I.prototype,R.prototype=new k,R.prototype.constructor=R,R.C=function(L,D,O){for(var F=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)F[ne-2]=arguments[ne];return I.prototype[D].apply(L,F)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,I,k){k||(k=0);var L=Array(16);if(typeof I=="string")for(var D=0;16>D;++D)L[D]=I.charCodeAt(k++)|I.charCodeAt(k++)<<8|I.charCodeAt(k++)<<16|I.charCodeAt(k++)<<24;else for(D=0;16>D;++D)L[D]=I[k++]|I[k++]<<8|I[k++]<<16|I[k++]<<24;I=R.g[0],k=R.g[1],D=R.g[2];var O=R.g[3],F=I+(O^k&(D^O))+L[0]+3614090360&4294967295;I=k+(F<<7&4294967295|F>>>25),F=O+(D^I&(k^D))+L[1]+3905402710&4294967295,O=I+(F<<12&4294967295|F>>>20),F=D+(k^O&(I^k))+L[2]+606105819&4294967295,D=O+(F<<17&4294967295|F>>>15),F=k+(I^D&(O^I))+L[3]+3250441966&4294967295,k=D+(F<<22&4294967295|F>>>10),F=I+(O^k&(D^O))+L[4]+4118548399&4294967295,I=k+(F<<7&4294967295|F>>>25),F=O+(D^I&(k^D))+L[5]+1200080426&4294967295,O=I+(F<<12&4294967295|F>>>20),F=D+(k^O&(I^k))+L[6]+2821735955&4294967295,D=O+(F<<17&4294967295|F>>>15),F=k+(I^D&(O^I))+L[7]+4249261313&4294967295,k=D+(F<<22&4294967295|F>>>10),F=I+(O^k&(D^O))+L[8]+1770035416&4294967295,I=k+(F<<7&4294967295|F>>>25),F=O+(D^I&(k^D))+L[9]+2336552879&4294967295,O=I+(F<<12&4294967295|F>>>20),F=D+(k^O&(I^k))+L[10]+4294925233&4294967295,D=O+(F<<17&4294967295|F>>>15),F=k+(I^D&(O^I))+L[11]+2304563134&4294967295,k=D+(F<<22&4294967295|F>>>10),F=I+(O^k&(D^O))+L[12]+1804603682&4294967295,I=k+(F<<7&4294967295|F>>>25),F=O+(D^I&(k^D))+L[13]+4254626195&4294967295,O=I+(F<<12&4294967295|F>>>20),F=D+(k^O&(I^k))+L[14]+2792965006&4294967295,D=O+(F<<17&4294967295|F>>>15),F=k+(I^D&(O^I))+L[15]+1236535329&4294967295,k=D+(F<<22&4294967295|F>>>10),F=I+(D^O&(k^D))+L[1]+4129170786&4294967295,I=k+(F<<5&4294967295|F>>>27),F=O+(k^D&(I^k))+L[6]+3225465664&4294967295,O=I+(F<<9&4294967295|F>>>23),F=D+(I^k&(O^I))+L[11]+643717713&4294967295,D=O+(F<<14&4294967295|F>>>18),F=k+(O^I&(D^O))+L[0]+3921069994&4294967295,k=D+(F<<20&4294967295|F>>>12),F=I+(D^O&(k^D))+L[5]+3593408605&4294967295,I=k+(F<<5&4294967295|F>>>27),F=O+(k^D&(I^k))+L[10]+38016083&4294967295,O=I+(F<<9&4294967295|F>>>23),F=D+(I^k&(O^I))+L[15]+3634488961&4294967295,D=O+(F<<14&4294967295|F>>>18),F=k+(O^I&(D^O))+L[4]+3889429448&4294967295,k=D+(F<<20&4294967295|F>>>12),F=I+(D^O&(k^D))+L[9]+568446438&4294967295,I=k+(F<<5&4294967295|F>>>27),F=O+(k^D&(I^k))+L[14]+3275163606&4294967295,O=I+(F<<9&4294967295|F>>>23),F=D+(I^k&(O^I))+L[3]+4107603335&4294967295,D=O+(F<<14&4294967295|F>>>18),F=k+(O^I&(D^O))+L[8]+1163531501&4294967295,k=D+(F<<20&4294967295|F>>>12),F=I+(D^O&(k^D))+L[13]+2850285829&4294967295,I=k+(F<<5&4294967295|F>>>27),F=O+(k^D&(I^k))+L[2]+4243563512&4294967295,O=I+(F<<9&4294967295|F>>>23),F=D+(I^k&(O^I))+L[7]+1735328473&4294967295,D=O+(F<<14&4294967295|F>>>18),F=k+(O^I&(D^O))+L[12]+2368359562&4294967295,k=D+(F<<20&4294967295|F>>>12),F=I+(k^D^O)+L[5]+4294588738&4294967295,I=k+(F<<4&4294967295|F>>>28),F=O+(I^k^D)+L[8]+2272392833&4294967295,O=I+(F<<11&4294967295|F>>>21),F=D+(O^I^k)+L[11]+1839030562&4294967295,D=O+(F<<16&4294967295|F>>>16),F=k+(D^O^I)+L[14]+4259657740&4294967295,k=D+(F<<23&4294967295|F>>>9),F=I+(k^D^O)+L[1]+2763975236&4294967295,I=k+(F<<4&4294967295|F>>>28),F=O+(I^k^D)+L[4]+1272893353&4294967295,O=I+(F<<11&4294967295|F>>>21),F=D+(O^I^k)+L[7]+4139469664&4294967295,D=O+(F<<16&4294967295|F>>>16),F=k+(D^O^I)+L[10]+3200236656&4294967295,k=D+(F<<23&4294967295|F>>>9),F=I+(k^D^O)+L[13]+681279174&4294967295,I=k+(F<<4&4294967295|F>>>28),F=O+(I^k^D)+L[0]+3936430074&4294967295,O=I+(F<<11&4294967295|F>>>21),F=D+(O^I^k)+L[3]+3572445317&4294967295,D=O+(F<<16&4294967295|F>>>16),F=k+(D^O^I)+L[6]+76029189&4294967295,k=D+(F<<23&4294967295|F>>>9),F=I+(k^D^O)+L[9]+3654602809&4294967295,I=k+(F<<4&4294967295|F>>>28),F=O+(I^k^D)+L[12]+3873151461&4294967295,O=I+(F<<11&4294967295|F>>>21),F=D+(O^I^k)+L[15]+530742520&4294967295,D=O+(F<<16&4294967295|F>>>16),F=k+(D^O^I)+L[2]+3299628645&4294967295,k=D+(F<<23&4294967295|F>>>9),F=I+(D^(k|~O))+L[0]+4096336452&4294967295,I=k+(F<<6&4294967295|F>>>26),F=O+(k^(I|~D))+L[7]+1126891415&4294967295,O=I+(F<<10&4294967295|F>>>22),F=D+(I^(O|~k))+L[14]+2878612391&4294967295,D=O+(F<<15&4294967295|F>>>17),F=k+(O^(D|~I))+L[5]+4237533241&4294967295,k=D+(F<<21&4294967295|F>>>11),F=I+(D^(k|~O))+L[12]+1700485571&4294967295,I=k+(F<<6&4294967295|F>>>26),F=O+(k^(I|~D))+L[3]+2399980690&4294967295,O=I+(F<<10&4294967295|F>>>22),F=D+(I^(O|~k))+L[10]+4293915773&4294967295,D=O+(F<<15&4294967295|F>>>17),F=k+(O^(D|~I))+L[1]+2240044497&4294967295,k=D+(F<<21&4294967295|F>>>11),F=I+(D^(k|~O))+L[8]+1873313359&4294967295,I=k+(F<<6&4294967295|F>>>26),F=O+(k^(I|~D))+L[15]+4264355552&4294967295,O=I+(F<<10&4294967295|F>>>22),F=D+(I^(O|~k))+L[6]+2734768916&4294967295,D=O+(F<<15&4294967295|F>>>17),F=k+(O^(D|~I))+L[13]+1309151649&4294967295,k=D+(F<<21&4294967295|F>>>11),F=I+(D^(k|~O))+L[4]+4149444226&4294967295,I=k+(F<<6&4294967295|F>>>26),F=O+(k^(I|~D))+L[11]+3174756917&4294967295,O=I+(F<<10&4294967295|F>>>22),F=D+(I^(O|~k))+L[2]+718787259&4294967295,D=O+(F<<15&4294967295|F>>>17),F=k+(O^(D|~I))+L[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(D+(F<<21&4294967295|F>>>11))&4294967295,R.g[2]=R.g[2]+D&4294967295,R.g[3]=R.g[3]+O&4294967295}r.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var k=I-this.blockSize,L=this.B,D=this.h,O=0;O<I;){if(D==0)for(;O<=k;)s(this,R,O),O+=this.blockSize;if(typeof R=="string"){for(;O<I;)if(L[D++]=R.charCodeAt(O++),D==this.blockSize){s(this,L),D=0;break}}else for(;O<I;)if(L[D++]=R[O++],D==this.blockSize){s(this,L),D=0;break}}this.h=D,this.o+=I},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var k=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=k&255,k/=256;for(this.u(R),R=Array(16),I=k=0;4>I;++I)for(var L=0;32>L;L+=8)R[k++]=this.g[I]>>>L&255;return R};function a(R,I){var k=u;return Object.prototype.hasOwnProperty.call(k,R)?k[R]:k[R]=I(R)}function c(R,I){this.h=I;for(var k=[],L=!0,D=R.length-1;0<=D;D--){var O=R[D]|0;L&&O==I||(k[D]=O,L=!1)}this.g=k}var u={};function h(R){return-128<=R&&128>R?a(R,function(I){return new c([I|0],0>I?-1:0)}):new c([R|0],0>R?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return y;if(0>R)return b(f(-R));for(var I=[],k=1,L=0;R>=k;L++)I[L]=R/k|0,k*=4294967296;return new c(I,0)}function p(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return b(p(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=f(Math.pow(I,8)),L=y,D=0;D<R.length;D+=8){var O=Math.min(8,R.length-D),F=parseInt(R.substring(D,D+O),I);8>O?(O=f(Math.pow(I,O)),L=L.j(O).add(f(F))):(L=L.j(k),L=L.add(f(F)))}return L}var y=h(0),v=h(1),x=h(16777216);t=c.prototype,t.m=function(){if(w(this))return-b(this).m();for(var R=0,I=1,k=0;k<this.g.length;k++){var L=this.i(k);R+=(0<=L?L:4294967296+L)*I,I*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(E(this))return"0";if(w(this))return"-"+b(this).toString(R);for(var I=f(Math.pow(R,6)),k=this,L="";;){var D=M(k,I).g;k=A(k,D.j(I));var O=((0<k.g.length?k.g[0]:k.h)>>>0).toString(R);if(k=D,E(k))return O+L;for(;6>O.length;)O="0"+O;L=O+L}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function E(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function w(R){return R.h==-1}t.l=function(R){return R=A(this,R),w(R)?-1:E(R)?0:1};function b(R){for(var I=R.g.length,k=[],L=0;L<I;L++)k[L]=~R.g[L];return new c(k,~R.h).add(v)}t.abs=function(){return w(this)?b(this):this},t.add=function(R){for(var I=Math.max(this.g.length,R.g.length),k=[],L=0,D=0;D<=I;D++){var O=L+(this.i(D)&65535)+(R.i(D)&65535),F=(O>>>16)+(this.i(D)>>>16)+(R.i(D)>>>16);L=F>>>16,O&=65535,F&=65535,k[D]=F<<16|O}return new c(k,k[k.length-1]&-2147483648?-1:0)};function A(R,I){return R.add(b(I))}t.j=function(R){if(E(this)||E(R))return y;if(w(this))return w(R)?b(this).j(b(R)):b(b(this).j(R));if(w(R))return b(this.j(b(R)));if(0>this.l(x)&&0>R.l(x))return f(this.m()*R.m());for(var I=this.g.length+R.g.length,k=[],L=0;L<2*I;L++)k[L]=0;for(L=0;L<this.g.length;L++)for(var D=0;D<R.g.length;D++){var O=this.i(L)>>>16,F=this.i(L)&65535,ne=R.i(D)>>>16,oe=R.i(D)&65535;k[2*L+2*D]+=F*oe,j(k,2*L+2*D),k[2*L+2*D+1]+=O*oe,j(k,2*L+2*D+1),k[2*L+2*D+1]+=F*ne,j(k,2*L+2*D+1),k[2*L+2*D+2]+=O*ne,j(k,2*L+2*D+2)}for(L=0;L<I;L++)k[L]=k[2*L+1]<<16|k[2*L];for(L=I;L<2*I;L++)k[L]=0;return new c(k,0)};function j(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function T(R,I){this.g=R,this.h=I}function M(R,I){if(E(I))throw Error("division by zero");if(E(R))return new T(y,y);if(w(R))return I=M(b(R),I),new T(b(I.g),b(I.h));if(w(I))return I=M(R,b(I)),new T(b(I.g),I.h);if(30<R.g.length){if(w(R)||w(I))throw Error("slowDivide_ only works with positive integers.");for(var k=v,L=I;0>=L.l(R);)k=$(k),L=$(L);var D=z(k,1),O=z(L,1);for(L=z(L,2),k=z(k,2);!E(L);){var F=O.add(L);0>=F.l(R)&&(D=D.add(k),O=F),L=z(L,1),k=z(k,1)}return I=A(R,D.j(I)),new T(D,I)}for(D=y;0<=R.l(I);){for(k=Math.max(1,Math.floor(R.m()/I.m())),L=Math.ceil(Math.log(k)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),O=f(k),F=O.j(I);w(F)||0<F.l(R);)k-=L,O=f(k),F=O.j(I);E(O)&&(O=v),D=D.add(O),R=A(R,F)}return new T(D,R)}t.A=function(R){return M(this,R).h},t.and=function(R){for(var I=Math.max(this.g.length,R.g.length),k=[],L=0;L<I;L++)k[L]=this.i(L)&R.i(L);return new c(k,this.h&R.h)},t.or=function(R){for(var I=Math.max(this.g.length,R.g.length),k=[],L=0;L<I;L++)k[L]=this.i(L)|R.i(L);return new c(k,this.h|R.h)},t.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),k=[],L=0;L<I;L++)k[L]=this.i(L)^R.i(L);return new c(k,this.h^R.h)};function $(R){for(var I=R.g.length+1,k=[],L=0;L<I;L++)k[L]=R.i(L)<<1|R.i(L-1)>>>31;return new c(k,R.h)}function z(R,I){var k=I>>5;I%=32;for(var L=R.g.length-k,D=[],O=0;O<L;O++)D[O]=0<I?R.i(O+k)>>>I|R.i(O+k+1)<<32-I:R.i(O+k);return new c(D,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,pT=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=p,ra=c}).apply(typeof jN<"u"?jN:typeof self<"u"?self:typeof window<"u"?window:{});var Kf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gT,ud,yT,pm,vx,vT,xT,wT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,S,P){return m==Array.prototype||m==Object.prototype||(m[S]=P.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kf=="object"&&Kf];for(var S=0;S<m.length;++S){var P=m[S];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var r=n(this);function s(m,S){if(S)e:{var P=r;m=m.split(".");for(var B=0;B<m.length-1;B++){var te=m[B];if(!(te in P))break e;P=P[te]}m=m[m.length-1],B=P[m],S=S(B),S!=B&&S!=null&&e(P,m,{configurable:!0,writable:!0,value:S})}}function a(m,S){m instanceof String&&(m+="");var P=0,B=!1,te={next:function(){if(!B&&P<m.length){var ce=P++;return{value:S(ce,m[ce]),done:!1}}return B=!0,{done:!0,value:void 0}}};return te[Symbol.iterator]=function(){return te},te}s("Array.prototype.values",function(m){return m||function(){return a(this,function(S,P){return P})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function h(m){var S=typeof m;return S=S!="object"?S:m?Array.isArray(m)?"array":S:"null",S=="array"||S=="object"&&typeof m.length=="number"}function f(m){var S=typeof m;return S=="object"&&m!=null||S=="function"}function p(m,S,P){return m.call.apply(m.bind,arguments)}function y(m,S,P){if(!m)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var te=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(te,B),m.apply(S,te)}}return function(){return m.apply(S,arguments)}}function v(m,S,P){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:y,v.apply(null,arguments)}function x(m,S){var P=Array.prototype.slice.call(arguments,1);return function(){var B=P.slice();return B.push.apply(B,arguments),m.apply(this,B)}}function E(m,S){function P(){}P.prototype=S.prototype,m.aa=S.prototype,m.prototype=new P,m.prototype.constructor=m,m.Qb=function(B,te,ce){for(var je=Array(arguments.length-2),Ft=2;Ft<arguments.length;Ft++)je[Ft-2]=arguments[Ft];return S.prototype[te].apply(B,je)}}function w(m){const S=m.length;if(0<S){const P=Array(S);for(let B=0;B<S;B++)P[B]=m[B];return P}return[]}function b(m,S){for(let P=1;P<arguments.length;P++){const B=arguments[P];if(h(B)){const te=m.length||0,ce=B.length||0;m.length=te+ce;for(let je=0;je<ce;je++)m[te+je]=B[je]}else m.push(B)}}class A{constructor(S,P){this.i=S,this.j=P,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function j(m){return/^[\s\xa0]*$/.test(m)}function T(){var m=u.navigator;return m&&(m=m.userAgent)?m:""}function M(m){return M[" "](m),m}M[" "]=function(){};var $=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function z(m,S,P){for(const B in m)S.call(P,m[B],B,m)}function R(m,S){for(const P in m)S.call(void 0,m[P],P,m)}function I(m){const S={};for(const P in m)S[P]=m[P];return S}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(m,S){let P,B;for(let te=1;te<arguments.length;te++){B=arguments[te];for(P in B)m[P]=B[P];for(let ce=0;ce<k.length;ce++)P=k[ce],Object.prototype.hasOwnProperty.call(B,P)&&(m[P]=B[P])}}function D(m){var S=1;m=m.split(":");const P=[];for(;0<S&&m.length;)P.push(m.shift()),S--;return m.length&&P.push(m.join(":")),P}function O(m){u.setTimeout(()=>{throw m},0)}function F(){var m=K;let S=null;return m.g&&(S=m.g,m.g=m.g.next,m.g||(m.h=null),S.next=null),S}class ne{constructor(){this.h=this.g=null}add(S,P){const B=oe.get();B.set(S,P),this.h?this.h.next=B:this.g=B,this.h=B}}var oe=new A(()=>new Q,m=>m.reset());class Q{constructor(){this.next=this.g=this.h=null}set(S,P){this.h=S,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,q=!1,K=new ne,Y=()=>{const m=u.Promise.resolve(void 0);ee=()=>{m.then(U)}};var U=()=>{for(var m;m=F();){try{m.h.call(m.g)}catch(P){O(P)}var S=oe;S.j(m),100>S.h&&(S.h++,m.next=S.g,S.g=m)}q=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(m,S){this.type=m,this.g=this.target=S,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var ue=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,S=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const P=()=>{};u.addEventListener("test",P,S),u.removeEventListener("test",P,S)}catch{}return m}();function ke(m,S){if(le.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var P=this.type=m.type,B=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=S,S=m.relatedTarget){if($){e:{try{M(S.nodeName);var te=!0;break e}catch{}te=!1}te||(S=null)}}else P=="mouseover"?S=m.fromElement:P=="mouseout"&&(S=m.toElement);this.relatedTarget=S,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Te[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&ke.aa.h.call(this)}}E(ke,le);var Te={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var _e="closure_listenable_"+(1e6*Math.random()|0),Ae=0;function He(m,S,P,B,te){this.listener=m,this.proxy=null,this.src=S,this.type=P,this.capture=!!B,this.ha=te,this.key=++Ae,this.da=this.fa=!1}function Ve(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function me(m){this.src=m,this.g={},this.h=0}me.prototype.add=function(m,S,P,B,te){var ce=m.toString();m=this.g[ce],m||(m=this.g[ce]=[],this.h++);var je=ht(m,S,B,te);return-1<je?(S=m[je],P||(S.fa=!1)):(S=new He(S,this.src,ce,!!B,te),S.fa=P,m.push(S)),S};function Ue(m,S){var P=S.type;if(P in m.g){var B=m.g[P],te=Array.prototype.indexOf.call(B,S,void 0),ce;(ce=0<=te)&&Array.prototype.splice.call(B,te,1),ce&&(Ve(S),m.g[P].length==0&&(delete m.g[P],m.h--))}}function ht(m,S,P,B){for(var te=0;te<m.length;++te){var ce=m[te];if(!ce.da&&ce.listener==S&&ce.capture==!!P&&ce.ha==B)return te}return-1}var ft="closure_lm_"+(1e6*Math.random()|0),fe={};function Ce(m,S,P,B,te){if(Array.isArray(S)){for(var ce=0;ce<S.length;ce++)Ce(m,S[ce],P,B,te);return null}return P=Ws(P),m&&m[_e]?m.K(S,P,f(B)?!!B.capture:!1,te):ct(m,S,P,!1,B,te)}function ct(m,S,P,B,te,ce){if(!S)throw Error("Invalid event type");var je=f(te)?!!te.capture:!!te,Ft=or(m);if(Ft||(m[ft]=Ft=new me(m)),P=Ft.add(S,P,B,je,ce),P.proxy)return P;if(B=Ht(),P.proxy=B,B.src=m,B.listener=P,m.addEventListener)ue||(te=je),te===void 0&&(te=!1),m.addEventListener(S.toString(),B,te);else if(m.attachEvent)m.attachEvent(Or(S.toString()),B);else if(m.addListener&&m.removeListener)m.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return P}function Ht(){function m(P){return S.call(m.src,m.listener,P)}const S=wi;return m}function Mt(m,S,P,B,te){if(Array.isArray(S))for(var ce=0;ce<S.length;ce++)Mt(m,S[ce],P,B,te);else B=f(B)?!!B.capture:!!B,P=Ws(P),m&&m[_e]?(m=m.i,S=String(S).toString(),S in m.g&&(ce=m.g[S],P=ht(ce,P,B,te),-1<P&&(Ve(ce[P]),Array.prototype.splice.call(ce,P,1),ce.length==0&&(delete m.g[S],m.h--)))):m&&(m=or(m))&&(S=m.g[S.toString()],m=-1,S&&(m=ht(S,P,B,te)),(P=-1<m?S[m]:null)&&vn(P))}function vn(m){if(typeof m!="number"&&m&&!m.da){var S=m.src;if(S&&S[_e])Ue(S.i,m);else{var P=m.type,B=m.proxy;S.removeEventListener?S.removeEventListener(P,B,m.capture):S.detachEvent?S.detachEvent(Or(P),B):S.addListener&&S.removeListener&&S.removeListener(B),(P=or(S))?(Ue(P,m),P.h==0&&(P.src=null,S[ft]=null)):Ve(m)}}}function Or(m){return m in fe?fe[m]:fe[m]="on"+m}function wi(m,S){if(m.da)m=!0;else{S=new ke(S,this);var P=m.listener,B=m.ha||m.src;m.fa&&vn(m),m=P.call(B,S)}return m}function or(m){return m=m[ft],m instanceof me?m:null}var In="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ws(m){return typeof m=="function"?m:(m[In]||(m[In]=function(S){return m.handleEvent(S)}),m[In])}function Kt(){H.call(this),this.i=new me(this),this.M=this,this.F=null}E(Kt,H),Kt.prototype[_e]=!0,Kt.prototype.removeEventListener=function(m,S,P,B){Mt(this,m,S,P,B)};function Vt(m,S){var P,B=m.F;if(B)for(P=[];B;B=B.F)P.push(B);if(m=m.M,B=S.type||S,typeof S=="string")S=new le(S,m);else if(S instanceof le)S.target=S.target||m;else{var te=S;S=new le(B,m),L(S,te)}if(te=!0,P)for(var ce=P.length-1;0<=ce;ce--){var je=S.g=P[ce];te=Wn(je,B,!0,S)&&te}if(je=S.g=m,te=Wn(je,B,!0,S)&&te,te=Wn(je,B,!1,S)&&te,P)for(ce=0;ce<P.length;ce++)je=S.g=P[ce],te=Wn(je,B,!1,S)&&te}Kt.prototype.N=function(){if(Kt.aa.N.call(this),this.i){var m=this.i,S;for(S in m.g){for(var P=m.g[S],B=0;B<P.length;B++)Ve(P[B]);delete m.g[S],m.h--}}this.F=null},Kt.prototype.K=function(m,S,P,B){return this.i.add(String(m),S,!1,P,B)},Kt.prototype.L=function(m,S,P,B){return this.i.add(String(m),S,!0,P,B)};function Wn(m,S,P,B){if(S=m.i.g[String(S)],!S)return!0;S=S.concat();for(var te=!0,ce=0;ce<S.length;++ce){var je=S[ce];if(je&&!je.da&&je.capture==P){var Ft=je.listener,Nn=je.ha||je.src;je.fa&&Ue(m.i,je),te=Ft.call(Nn,B)!==!1&&te}}return te&&!B.defaultPrevented}function Hn(m,S,P){if(typeof m=="function")P&&(m=v(m,P));else if(m&&typeof m.handleEvent=="function")m=v(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:u.setTimeout(m,S||0)}function An(m){m.g=Hn(()=>{m.g=null,m.i&&(m.i=!1,An(m))},m.l);const S=m.h;m.h=null,m.m.apply(null,S)}class fs extends H{constructor(S,P){super(),this.m=S,this.l=P,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:An(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qr(m){H.call(this),this.h=m,this.g={}}E(Qr,H);var Hs=[];function _i(m){z(m.g,function(S,P){this.g.hasOwnProperty(P)&&vn(S)},m),m.g={}}Qr.prototype.N=function(){Qr.aa.N.call(this),_i(this)},Qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ms=u.JSON.stringify,Kn=u.JSON.parse,bi=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function tt(){}tt.prototype.h=null;function _t(m){return m.h||(m.h=m.i())}function bt(){}var Gt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function on(){le.call(this,"d")}E(on,le);function Lr(){le.call(this,"c")}E(Lr,le);var ar={},ie=null;function be(){return ie=ie||new Kt}ar.La="serverreachability";function qe(m){le.call(this,ar.La,m)}E(qe,le);function It(m){const S=be();Vt(S,new qe(S))}ar.STAT_EVENT="statevent";function ot(m,S){le.call(this,ar.STAT_EVENT,m),this.stat=S}E(ot,le);function nt(m){const S=be();Vt(S,new ot(S,m))}ar.Ma="timingevent";function Re(m,S){le.call(this,ar.Ma,m),this.size=S}E(Re,le);function Zt(m,S){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},S)}function yr(){this.g=!0}yr.prototype.xa=function(){this.g=!1};function Ks(m,S,P,B,te,ce){m.info(function(){if(m.g)if(ce)for(var je="",Ft=ce.split("&"),Nn=0;Nn<Ft.length;Nn++){var jt=Ft[Nn].split("=");if(1<jt.length){var kn=jt[0];jt=jt[1];var xn=kn.split("_");je=2<=xn.length&&xn[1]=="type"?je+(kn+"="+jt+"&"):je+(kn+"=redacted&")}}else je=null;else je=ce;return"XMLHTTP REQ ("+B+") [attempt "+te+"]: "+S+`
`+P+`
`+je})}function Ei(m,S,P,B,te,ce,je){m.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+te+"]: "+S+`
`+P+`
`+ce+" "+je})}function vr(m,S,P,B){m.info(function(){return"XMLHTTP TEXT ("+S+"): "+Al(m,P)+(B?" "+B:"")})}function ao(m,S){m.info(function(){return"TIMEOUT: "+S})}yr.prototype.info=function(){};function Al(m,S){if(!m.g)return S;if(!S)return null;try{var P=JSON.parse(S);if(P){for(m=0;m<P.length;m++)if(Array.isArray(P[m])){var B=P[m];if(!(2>B.length)){var te=B[1];if(Array.isArray(te)&&!(1>te.length)){var ce=te[0];if(ce!="noop"&&ce!="stop"&&ce!="close")for(var je=1;je<te.length;je++)te[je]=""}}}}return ms(P)}catch{return S}}var Ni={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dt;function Si(){}E(Si,tt),Si.prototype.g=function(){return new XMLHttpRequest},Si.prototype.i=function(){return{}},Dt=new Si;function ps(m,S,P,B){this.j=m,this.i=S,this.l=P,this.R=B||1,this.U=new Qr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Eh}function Eh(){this.i=null,this.g="",this.h=!1}var Eu={},kl={};function Pl(m,S,P){m.L=1,m.v=fo(Fr(S)),m.m=P,m.P=!0,Nu(m,null)}function Nu(m,S){m.F=Date.now(),qt(m),m.A=Fr(m.v);var P=m.A,B=m.R;Array.isArray(B)||(B=[String(B)]),po(P.i,"t",B),m.C=0,P=m.j.J,m.h=new Eh,m.g=$h(m.j,P?S:null,!m.m),0<m.O&&(m.M=new fs(v(m.Y,m,m.g),m.O)),S=m.U,P=m.g,B=m.ca;var te="readystatechange";Array.isArray(te)||(te&&(Hs[0]=te.toString()),te=Hs);for(var ce=0;ce<te.length;ce++){var je=Ce(P,te[ce],B||S.handleEvent,!1,S.h||S);if(!je)break;S.g[je.key]=je}S=m.H?I(m.H):{},m.m?(m.u||(m.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,S)):(m.u="GET",m.g.ea(m.A,m.u,null,S)),It(),Ks(m.i,m.u,m.A,m.l,m.R,m.m)}ps.prototype.ca=function(m){m=m.target;const S=this.M;S&&wr(m)==3?S.j():this.Y(m)},ps.prototype.Y=function(m){try{if(m==this.g)e:{const xn=wr(this.g);var S=this.g.Ba();const Jr=this.g.Z();if(!(3>xn)&&(xn!=3||this.g&&(this.h.h||this.g.oa()||Au(this.g)))){this.J||xn!=4||S==7||(S==8||0>=Jr?It(3):It(2)),Ca(this);var P=this.g.Z();this.X=P;t:if(Nh(this)){var B=Au(this.g);m="";var te=B.length,ce=wr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yr(this),lo(this);var je="";break t}this.h.i=new u.TextDecoder}for(S=0;S<te;S++)this.h.h=!0,m+=this.h.i.decode(B[S],{stream:!(ce&&S==te-1)});B.length=0,this.h.g+=m,this.C=0,je=this.h.g}else je=this.g.oa();if(this.o=P==200,Ei(this.i,this.u,this.A,this.l,this.R,xn,P),this.o){if(this.T&&!this.K){t:{if(this.g){var Ft,Nn=this.g;if((Ft=Nn.g?Nn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(Ft)){var jt=Ft;break t}}jt=null}if(P=jt)vr(this.i,this.l,P,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Su(this,P);else{this.o=!1,this.s=3,nt(12),Yr(this),lo(this);break e}}if(this.P){P=!0;let Ur;for(;!this.J&&this.C<je.length;)if(Ur=hg(this,je),Ur==kl){xn==4&&(this.s=4,nt(14),P=!1),vr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ur==Eu){this.s=4,nt(15),vr(this.i,this.l,je,"[Invalid Chunk]"),P=!1;break}else vr(this.i,this.l,Ur,null),Su(this,Ur);if(Nh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xn!=4||je.length!=0||this.h.h||(this.s=1,nt(16),P=!1),this.o=this.o&&P,!P)vr(this.i,this.l,je,"[Invalid Chunked Response]"),Yr(this),lo(this);else if(0<je.length&&!this.W){this.W=!0;var kn=this.j;kn.g==this&&kn.ba&&!kn.M&&(kn.j.info("Great, no buffering proxy detected. Bytes received: "+je.length),Pu(kn),kn.M=!0,nt(11))}}else vr(this.i,this.l,je,null),Su(this,je);xn==4&&Yr(this),this.o&&!this.J&&(xn==4?Bl(this.j,this):(this.o=!1,qt(this)))}else Fl(this.g),P==400&&0<je.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),Yr(this),lo(this)}}}catch{}finally{}};function Nh(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function hg(m,S){var P=m.C,B=S.indexOf(`
`,P);return B==-1?kl:(P=Number(S.substring(P,B)),isNaN(P)?Eu:(B+=1,B+P>S.length?kl:(S=S.slice(B,B+P),m.C=B+P,S)))}ps.prototype.cancel=function(){this.J=!0,Yr(this)};function qt(m){m.S=Date.now()+m.I,Sh(m,m.I)}function Sh(m,S){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Zt(v(m.ba,m),S)}function Ca(m){m.B&&(u.clearTimeout(m.B),m.B=null)}ps.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(ao(this.i,this.A),this.L!=2&&(It(),nt(17)),Yr(this),this.s=2,lo(this)):Sh(this,this.S-m)};function lo(m){m.j.G==0||m.J||Bl(m.j,m)}function Yr(m){Ca(m);var S=m.M;S&&typeof S.ma=="function"&&S.ma(),m.M=null,_i(m.U),m.g&&(S=m.g,m.g=null,S.abort(),S.ma())}function Su(m,S){try{var P=m.j;if(P.G!=0&&(P.g==m||lr(P.h,m))){if(!m.K&&lr(P.h,m)&&P.G==3){try{var B=P.Da.g.parse(S)}catch{B=null}if(Array.isArray(B)&&B.length==3){var te=B;if(te[0]==0){e:if(!P.u){if(P.g)if(P.g.F+3e3<m.F)zl(P),ws(P);else break e;$l(P),nt(18)}}else P.za=te[1],0<P.za-P.T&&37500>te[2]&&P.F&&P.v==0&&!P.C&&(P.C=Zt(v(P.Za,P),6e3));if(1>=jh(P.h)&&P.ca){try{P.ca()}catch{}P.ca=void 0}}else Ai(P,11)}else if((m.K||P.g==m)&&zl(P),!j(S))for(te=P.Da.g.parse(S),S=0;S<te.length;S++){let jt=te[S];if(P.T=jt[0],jt=jt[1],P.G==2)if(jt[0]=="c"){P.K=jt[1],P.ia=jt[2];const kn=jt[3];kn!=null&&(P.la=kn,P.j.info("VER="+P.la));const xn=jt[4];xn!=null&&(P.Aa=xn,P.j.info("SVER="+P.Aa));const Jr=jt[5];Jr!=null&&typeof Jr=="number"&&0<Jr&&(B=1.5*Jr,P.L=B,P.j.info("backChannelRequestTimeoutMs_="+B)),B=P;const Ur=m.g;if(Ur){const Ra=Ur.g?Ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ra){var ce=B.h;ce.g||Ra.indexOf("spdy")==-1&&Ra.indexOf("quic")==-1&&Ra.indexOf("h2")==-1||(ce.j=ce.l,ce.g=new Set,ce.h&&(Cu(ce,ce.h),ce.h=null))}if(B.D){const Wl=Ur.g?Ur.g.getResponseHeader("X-HTTP-Session-Id"):null;Wl&&(B.ya=Wl,Ut(B.I,B.D,Wl))}}P.G=3,P.l&&P.l.ua(),P.ba&&(P.R=Date.now()-m.F,P.j.info("Handshake RTT: "+P.R+"ms")),B=P;var je=m;if(B.qa=Uh(B,B.J?B.ia:null,B.W),je.K){Th(B.h,je);var Ft=je,Nn=B.L;Nn&&(Ft.I=Nn),Ft.B&&(Ca(Ft),qt(Ft)),B.g=je}else Pa(B);0<P.i.length&&Xs(P)}else jt[0]!="stop"&&jt[0]!="close"||Ai(P,7);else P.G==3&&(jt[0]=="stop"||jt[0]=="close"?jt[0]=="stop"?Ai(P,7):Un(P):jt[0]!="noop"&&P.l&&P.l.ta(jt),P.v=0)}}It(4)}catch{}}var Ch=class{constructor(m,S){this.g=m,this.map=S}};function ja(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mr(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function jh(m){return m.h?1:m.g?m.g.size:0}function lr(m,S){return m.h?m.h==S:m.g?m.g.has(S):!1}function Cu(m,S){m.g?m.g.add(S):m.h=S}function Th(m,S){m.h&&m.h==S?m.h=null:m.g&&m.g.has(S)&&m.g.delete(S)}ja.prototype.cancel=function(){if(this.i=Ih(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Ih(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let S=m.i;for(const P of m.g.values())S=S.concat(P.D);return S}return w(m.i)}function Rl(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(h(m)){for(var S=[],P=m.length,B=0;B<P;B++)S.push(m[B]);return S}S=[],P=0;for(B in m)S[P++]=m[B];return S}function Dl(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(h(m)||typeof m=="string"){var S=[];m=m.length;for(var P=0;P<m;P++)S.push(P);return S}S=[],P=0;for(const B in m)S[P++]=B;return S}}}function co(m,S){if(m.forEach&&typeof m.forEach=="function")m.forEach(S,void 0);else if(h(m)||typeof m=="string")Array.prototype.forEach.call(m,S,void 0);else for(var P=Dl(m),B=Rl(m),te=B.length,ce=0;ce<te;ce++)S.call(void 0,B[ce],P&&P[ce],m)}var Ta=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fg(m,S){if(m){m=m.split("&");for(var P=0;P<m.length;P++){var B=m[P].indexOf("="),te=null;if(0<=B){var ce=m[P].substring(0,B);te=m[P].substring(B+1)}else ce=m[P];S(ce,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function Ci(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Ci){this.h=m.h,Ia(this,m.j),this.o=m.o,this.g=m.g,uo(this,m.s),this.l=m.l;var S=m.i,P=new Gs;P.i=S.i,S.g&&(P.g=new Map(S.g),P.h=S.h),ho(this,P),this.m=m.m}else m&&(S=String(m).match(Ta))?(this.h=!1,Ia(this,S[1]||"",!0),this.o=Et(S[2]||""),this.g=Et(S[3]||"",!0),uo(this,S[4]),this.l=Et(S[5]||"",!0),ho(this,S[6]||"",!0),this.m=Et(S[7]||"")):(this.h=!1,this.i=new Gs(null,this.h))}Ci.prototype.toString=function(){var m=[],S=this.j;S&&m.push(mo(S,Ol,!0),":");var P=this.g;return(P||S=="file")&&(m.push("//"),(S=this.o)&&m.push(mo(S,Ol,!0),"@"),m.push(encodeURIComponent(String(P)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.s,P!=null&&m.push(":",String(P))),(P=this.l)&&(this.g&&P.charAt(0)!="/"&&m.push("/"),m.push(mo(P,P.charAt(0)=="/"?Ph:kh,!0))),(P=this.i.toString())&&m.push("?",P),(P=this.m)&&m.push("#",mo(P,ju)),m.join("")};function Fr(m){return new Ci(m)}function Ia(m,S,P){m.j=P?Et(S,!0):S,m.j&&(m.j=m.j.replace(/:$/,""))}function uo(m,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);m.s=S}else m.s=null}function ho(m,S,P){S instanceof Gs?(m.i=S,Qs(m.i,m.h)):(P||(S=mo(S,Rh)),m.i=new Gs(S,m.h))}function Ut(m,S,P){m.i.set(S,P)}function fo(m){return Ut(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Et(m,S){return m?S?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function mo(m,S,P){return typeof m=="string"?(m=encodeURI(m).replace(S,Ah),P&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Ah(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Ol=/[#\/\?@]/g,kh=/[#\?:]/g,Ph=/[#\?]/g,Rh=/[#\?@]/g,ju=/#/g;function Gs(m,S){this.h=this.g=null,this.i=m||null,this.j=!!S}function Vn(m){m.g||(m.g=new Map,m.h=0,m.i&&fg(m.i,function(S,P){m.add(decodeURIComponent(S.replace(/\+/g," ")),P)}))}t=Gs.prototype,t.add=function(m,S){Vn(this),this.i=null,m=Xr(this,m);var P=this.g.get(m);return P||this.g.set(m,P=[]),P.push(S),this.h+=1,this};function gs(m,S){Vn(m),S=Xr(m,S),m.g.has(S)&&(m.i=null,m.h-=m.g.get(S).length,m.g.delete(S))}function ys(m,S){return Vn(m),S=Xr(m,S),m.g.has(S)}t.forEach=function(m,S){Vn(this),this.g.forEach(function(P,B){P.forEach(function(te){m.call(S,te,B,this)},this)},this)},t.na=function(){Vn(this);const m=Array.from(this.g.values()),S=Array.from(this.g.keys()),P=[];for(let B=0;B<S.length;B++){const te=m[B];for(let ce=0;ce<te.length;ce++)P.push(S[B])}return P},t.V=function(m){Vn(this);let S=[];if(typeof m=="string")ys(this,m)&&(S=S.concat(this.g.get(Xr(this,m))));else{m=Array.from(this.g.values());for(let P=0;P<m.length;P++)S=S.concat(m[P])}return S},t.set=function(m,S){return Vn(this),this.i=null,m=Xr(this,m),ys(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[S]),this.h+=1,this},t.get=function(m,S){return m?(m=this.V(m),0<m.length?String(m[0]):S):S};function po(m,S,P){gs(m,S),0<P.length&&(m.i=null,m.g.set(Xr(m,S),w(P)),m.h+=P.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],S=Array.from(this.g.keys());for(var P=0;P<S.length;P++){var B=S[P];const ce=encodeURIComponent(String(B)),je=this.V(B);for(B=0;B<je.length;B++){var te=ce;je[B]!==""&&(te+="="+encodeURIComponent(String(je[B]))),m.push(te)}}return this.i=m.join("&")};function Xr(m,S){return S=String(S),m.j&&(S=S.toLowerCase()),S}function Qs(m,S){S&&!m.j&&(Vn(m),m.i=null,m.g.forEach(function(P,B){var te=B.toLowerCase();B!=te&&(gs(this,B),po(this,te,P))},m)),m.j=S}function mg(m,S){const P=new yr;if(u.Image){const B=new Image;B.onload=x(xr,P,"TestLoadImage: loaded",!0,S,B),B.onerror=x(xr,P,"TestLoadImage: error",!1,S,B),B.onabort=x(xr,P,"TestLoadImage: abort",!1,S,B),B.ontimeout=x(xr,P,"TestLoadImage: timeout",!1,S,B),u.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=m}else S(!1)}function Dh(m,S){const P=new yr,B=new AbortController,te=setTimeout(()=>{B.abort(),xr(P,"TestPingServer: timeout",!1,S)},1e4);fetch(m,{signal:B.signal}).then(ce=>{clearTimeout(te),ce.ok?xr(P,"TestPingServer: ok",!0,S):xr(P,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(te),xr(P,"TestPingServer: error",!1,S)})}function xr(m,S,P,B,te){try{te&&(te.onload=null,te.onerror=null,te.onabort=null,te.ontimeout=null),B(P)}catch{}}function pg(){this.g=new bi}function Oh(m,S,P){const B=P||"";try{co(m,function(te,ce){let je=te;f(te)&&(je=ms(te)),S.push(B+ce+"="+encodeURIComponent(je))})}catch(te){throw S.push(B+"type="+encodeURIComponent("_badmap")),te}}function ji(m){this.l=m.Ub||null,this.j=m.eb||!1}E(ji,tt),ji.prototype.g=function(){return new Aa(this.l,this.j)},ji.prototype.i=function(m){return function(){return m}}({});function Aa(m,S){Kt.call(this),this.D=m,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Aa,Kt),t=Aa.prototype,t.open=function(m,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=S,this.readyState=1,xs(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(S.body=m),(this.D||u).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vs(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,xs(this)),this.g&&(this.readyState=3,xs(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lh(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lh(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var S=m.value?m.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!m.done}))&&(this.response=this.responseText+=S)}m.done?vs(this):xs(this),this.readyState==3&&Lh(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,vs(this))},t.Qa=function(m){this.g&&(this.response=m,vs(this))},t.ga=function(){this.g&&vs(this)};function vs(m){m.readyState=4,m.l=null,m.j=null,m.v=null,xs(m)}t.setRequestHeader=function(m,S){this.u.append(m,S)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],S=this.h.entries();for(var P=S.next();!P.done;)P=P.value,m.push(P[0]+": "+P[1]),P=S.next();return m.join(`\r
`)};function xs(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Aa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Ti(m){let S="";return z(m,function(P,B){S+=B,S+=":",S+=P,S+=`\r
`}),S}function go(m,S,P){e:{for(B in P){var B=!1;break e}B=!0}B||(P=Ti(P),typeof m=="string"?P!=null&&encodeURIComponent(String(P)):Ut(m,S,P))}function en(m){Kt.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(en,Kt);var gg=/^https?$/i,Tu=["POST","PUT"];t=en.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,S,P,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);S=S?S.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dt.g(),this.v=this.o?_t(this.o):_t(Dt),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(S,String(m),!0),this.B=!1}catch(ce){ka(this,ce);return}if(m=P||"",P=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var te in B)P.set(te,B[te]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const ce of B.keys())P.set(ce,B.get(ce));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(P.keys()).find(ce=>ce.toLowerCase()=="content-type"),te=u.FormData&&m instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Tu,S,void 0))||B||te||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ce,je]of P)this.g.setRequestHeader(ce,je);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ml(this),this.u=!0,this.g.send(m),this.u=!1}catch(ce){ka(this,ce)}};function ka(m,S){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=S,m.m=5,Ll(m),Vr(m)}function Ll(m){m.A||(m.A=!0,Vt(m,"complete"),Vt(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Vt(this,"complete"),Vt(this,"abort"),Vr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vr(this,!0)),en.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Iu(this):this.bb())},t.bb=function(){Iu(this)};function Iu(m){if(m.h&&typeof c<"u"&&(!m.v[1]||wr(m)!=4||m.Z()!=2)){if(m.u&&wr(m)==4)Hn(m.Ea,0,m);else if(Vt(m,"readystatechange"),wr(m)==4){m.h=!1;try{const je=m.Z();e:switch(je){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var P;if(!(P=S)){var B;if(B=je===0){var te=String(m.D).match(Ta)[1]||null;!te&&u.self&&u.self.location&&(te=u.self.location.protocol.slice(0,-1)),B=!gg.test(te?te.toLowerCase():"")}P=B}if(P)Vt(m,"complete"),Vt(m,"success");else{m.m=6;try{var ce=2<wr(m)?m.g.statusText:""}catch{ce=""}m.l=ce+" ["+m.Z()+"]",Ll(m)}}finally{Vr(m)}}}}function Vr(m,S){if(m.g){Ml(m);const P=m.g,B=m.v[0]?()=>{}:null;m.g=null,m.v=null,S||Vt(m,"ready");try{P.onreadystatechange=B}catch{}}}function Ml(m){m.I&&(u.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function wr(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<wr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var S=this.g.responseText;return m&&S.indexOf(m)==0&&(S=S.substring(m.length)),Kn(S)}};function Au(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Fl(m){const S={};m=(m.g&&2<=wr(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<m.length;B++){if(j(m[B]))continue;var P=D(m[B]);const te=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const ce=S[te]||[];S[te]=ce,ce.push(P)}R(S,function(B){return B.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ys(m,S,P){return P&&P.internalChannelParams&&P.internalChannelParams[m]||S}function ku(m){this.Aa=0,this.i=[],this.j=new yr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ys("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ys("baseRetryDelayMs",5e3,m),this.cb=Ys("retryDelaySeedMs",1e4,m),this.Wa=Ys("forwardChannelMaxRetries",2,m),this.wa=Ys("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new ja(m&&m.concurrentRequestLimit),this.Da=new pg,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ku.prototype,t.la=8,t.G=1,t.connect=function(m,S,P,B){nt(0),this.W=m,this.H=S||{},P&&B!==void 0&&(this.H.OSID=P,this.H.OAID=B),this.F=this.X,this.I=Uh(this,null,this.W),Xs(this)};function Un(m){if(Vl(m),m.G==3){var S=m.U++,P=Fr(m.I);if(Ut(P,"SID",m.K),Ut(P,"RID",S),Ut(P,"TYPE","terminate"),Ii(m,P),S=new ps(m,m.j,S),S.L=2,S.v=fo(Fr(P)),P=!1,u.navigator&&u.navigator.sendBeacon)try{P=u.navigator.sendBeacon(S.v.toString(),"")}catch{}!P&&u.Image&&(new Image().src=S.v,P=!0),P||(S.g=$h(S.j,null),S.g.ea(S.v)),S.F=Date.now(),qt(S)}Vh(m)}function ws(m){m.g&&(Pu(m),m.g.cancel(),m.g=null)}function Vl(m){ws(m),m.u&&(u.clearTimeout(m.u),m.u=null),zl(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&u.clearTimeout(m.s),m.s=null)}function Xs(m){if(!Mr(m.h)&&!m.s){m.s=!0;var S=m.Ga;ee||Y(),q||(ee(),q=!0),K.add(S,m),m.B=0}}function yg(m,S){return jh(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=S.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Zt(v(m.Ga,m,S),Fh(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const te=new ps(this,this.j,m);let ce=this.o;if(this.S&&(ce?(ce=I(ce),L(ce,this.S)):ce=this.S),this.m!==null||this.O||(te.H=ce,ce=null),this.P)e:{for(var S=0,P=0;P<this.i.length;P++){t:{var B=this.i[P];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(S+=B,4096<S){S=P;break e}if(S===4096||P===this.i.length-1){S=P+1;break e}}S=1e3}else S=1e3;S=yo(this,te,S),P=Fr(this.I),Ut(P,"RID",m),Ut(P,"CVER",22),this.D&&Ut(P,"X-HTTP-Session-Id",this.D),Ii(this,P),ce&&(this.O?S="headers="+encodeURIComponent(String(Ti(ce)))+"&"+S:this.m&&go(P,this.m,ce)),Cu(this.h,te),this.Ua&&Ut(P,"TYPE","init"),this.P?(Ut(P,"$req",S),Ut(P,"SID","null"),te.T=!0,Pl(te,P,null)):Pl(te,P,S),this.G=2}}else this.G==3&&(m?Ul(this,m):this.i.length==0||Mr(this.h)||Ul(this))};function Ul(m,S){var P;S?P=S.l:P=m.U++;const B=Fr(m.I);Ut(B,"SID",m.K),Ut(B,"RID",P),Ut(B,"AID",m.T),Ii(m,B),m.m&&m.o&&go(B,m.m,m.o),P=new ps(m,m.j,P,m.B+1),m.m===null&&(P.H=m.o),S&&(m.i=S.D.concat(m.i)),S=yo(m,P,1e3),P.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Cu(m.h,P),Pl(P,B,S)}function Ii(m,S){m.H&&z(m.H,function(P,B){Ut(S,B,P)}),m.l&&co({},function(P,B){Ut(S,B,P)})}function yo(m,S,P){P=Math.min(m.i.length,P);var B=m.l?v(m.l.Na,m.l,m):null;e:{var te=m.i;let ce=-1;for(;;){const je=["count="+P];ce==-1?0<P?(ce=te[0].g,je.push("ofs="+ce)):ce=0:je.push("ofs="+ce);let Ft=!0;for(let Nn=0;Nn<P;Nn++){let jt=te[Nn].g;const kn=te[Nn].map;if(jt-=ce,0>jt)ce=Math.max(0,te[Nn].g-100),Ft=!1;else try{Oh(kn,je,"req"+jt+"_")}catch{B&&B(kn)}}if(Ft){B=je.join("&");break e}}}return m=m.i.splice(0,P),S.D=m,B}function Pa(m){if(!m.g&&!m.u){m.Y=1;var S=m.Fa;ee||Y(),q||(ee(),q=!0),K.add(S,m),m.v=0}}function $l(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Zt(v(m.Fa,m),Fh(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,Mh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Zt(v(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),ws(this),Mh(this))};function Pu(m){m.A!=null&&(u.clearTimeout(m.A),m.A=null)}function Mh(m){m.g=new ps(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var S=Fr(m.qa);Ut(S,"RID","rpc"),Ut(S,"SID",m.K),Ut(S,"AID",m.T),Ut(S,"CI",m.F?"0":"1"),!m.F&&m.ja&&Ut(S,"TO",m.ja),Ut(S,"TYPE","xmlhttp"),Ii(m,S),m.m&&m.o&&go(S,m.m,m.o),m.L&&(m.g.I=m.L);var P=m.g;m=m.ia,P.L=1,P.v=fo(Fr(S)),P.m=null,P.P=!0,Nu(P,m)}t.Za=function(){this.C!=null&&(this.C=null,ws(this),$l(this),nt(19))};function zl(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function Bl(m,S){var P=null;if(m.g==S){zl(m),Pu(m),m.g=null;var B=2}else if(lr(m.h,S))P=S.D,Th(m.h,S),B=1;else return;if(m.G!=0){if(S.o)if(B==1){P=S.m?S.m.length:0,S=Date.now()-S.F;var te=m.B;B=be(),Vt(B,new Re(B,P)),Xs(m)}else Pa(m);else if(te=S.s,te==3||te==0&&0<S.X||!(B==1&&yg(m,S)||B==2&&$l(m)))switch(P&&0<P.length&&(S=m.h,S.i=S.i.concat(P)),te){case 1:Ai(m,5);break;case 4:Ai(m,10);break;case 3:Ai(m,6);break;default:Ai(m,2)}}}function Fh(m,S){let P=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(P*=2),P*S}function Ai(m,S){if(m.j.info("Error code "+S),S==2){var P=v(m.fb,m),B=m.Xa;const te=!B;B=new Ci(B||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ia(B,"https"),fo(B),te?mg(B.toString(),P):Dh(B.toString(),P)}else nt(2);m.G=0,m.l&&m.l.sa(S),Vh(m),Vl(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function Vh(m){if(m.G=0,m.ka=[],m.l){const S=Ih(m.h);(S.length!=0||m.i.length!=0)&&(b(m.ka,S),b(m.ka,m.i),m.h.i.length=0,w(m.i),m.i.length=0),m.l.ra()}}function Uh(m,S,P){var B=P instanceof Ci?Fr(P):new Ci(P);if(B.g!="")S&&(B.g=S+"."+B.g),uo(B,B.s);else{var te=u.location;B=te.protocol,S=S?S+"."+te.hostname:te.hostname,te=+te.port;var ce=new Ci(null);B&&Ia(ce,B),S&&(ce.g=S),te&&uo(ce,te),P&&(ce.l=P),B=ce}return P=m.D,S=m.ya,P&&S&&Ut(B,P,S),Ut(B,"VER",m.la),Ii(m,B),B}function $h(m,S,P){if(S&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=m.Ca&&!m.pa?new en(new ji({eb:P})):new en(m.pa),S.Ha(m.J),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ru(){}t=Ru.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ql(){}ql.prototype.g=function(m,S){return new cr(m,S)};function cr(m,S){Kt.call(this),this.g=new ku(S),this.l=m,this.h=S&&S.messageUrlParams||null,m=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(m?m["X-WebChannel-Content-Type"]=S.messageContentType:m={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(m?m["X-WebChannel-Client-Profile"]=S.va:m={"X-WebChannel-Client-Profile":S.va}),this.g.S=m,(m=S&&S.Sb)&&!j(m)&&(this.g.m=m),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!j(S)&&(this.g.D=S,m=this.h,m!==null&&S in m&&(m=this.h,S in m&&delete m[S])),this.j=new Js(this)}E(cr,Kt),cr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cr.prototype.close=function(){Un(this.g)},cr.prototype.o=function(m){var S=this.g;if(typeof m=="string"){var P={};P.__data__=m,m=P}else this.u&&(P={},P.__data__=ms(m),m=P);S.i.push(new Ch(S.Ya++,m)),S.G==3&&Xs(S)},cr.prototype.N=function(){this.g.l=null,delete this.j,Un(this.g),delete this.g,cr.aa.N.call(this)};function zh(m){on.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var S=m.__sm__;if(S){e:{for(const P in S){m=P;break e}m=void 0}(this.i=m)&&(m=this.i,S=S!==null&&m in S?S[m]:void 0),this.data=S}else this.data=m}E(zh,on);function Bh(){Lr.call(this),this.status=1}E(Bh,Lr);function Js(m){this.g=m}E(Js,Ru),Js.prototype.ua=function(){Vt(this.g,"a")},Js.prototype.ta=function(m){Vt(this.g,new zh(m))},Js.prototype.sa=function(m){Vt(this.g,new Bh)},Js.prototype.ra=function(){Vt(this.g,"b")},ql.prototype.createWebChannel=ql.prototype.g,cr.prototype.send=cr.prototype.o,cr.prototype.open=cr.prototype.m,cr.prototype.close=cr.prototype.close,wT=function(){return new ql},xT=function(){return be()},vT=ar,vx={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ni.NO_ERROR=0,Ni.TIMEOUT=8,Ni.HTTP_ERROR=6,pm=Ni,Sa.COMPLETE="complete",yT=Sa,bt.EventType=Gt,Gt.OPEN="a",Gt.CLOSE="b",Gt.ERROR="c",Gt.MESSAGE="d",Kt.prototype.listen=Kt.prototype.K,ud=bt,en.prototype.listenOnce=en.prototype.L,en.prototype.getLastError=en.prototype.Ka,en.prototype.getLastErrorCode=en.prototype.Ba,en.prototype.getStatus=en.prototype.Z,en.prototype.getResponseJson=en.prototype.Oa,en.prototype.getResponseText=en.prototype.oa,en.prototype.send=en.prototype.ea,en.prototype.setWithCredentials=en.prototype.Ha,gT=en}).apply(typeof Kf<"u"?Kf:typeof self<"u"?self:typeof window<"u"?window:{});const TN="@firebase/firestore",IN="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gu="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=new Ew("@firebase/firestore");function yc(){return ml.logLevel}function Oe(t,...e){if(ml.logLevel<=xt.DEBUG){const n=e.map(Dw);ml.debug(`Firestore (${gu}): ${t}`,...n)}}function Zi(t,...e){if(ml.logLevel<=xt.ERROR){const n=e.map(Dw);ml.error(`Firestore (${gu}): ${t}`,...n)}}function ha(t,...e){if(ml.logLevel<=xt.WARN){const n=e.map(Dw);ml.warn(`Firestore (${gu}): ${t}`,...n)}}function Dw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,_T(t,r,n)}function _T(t,e,n){let r=`FIRESTORE (${gu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Zi(r),new Error(r)}function Lt(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||_T(e,s,r)}function dt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends Bs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ir.UNAUTHENTICATED))}shutdown(){}}class x6{constructor(e){this.t=e,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Lt(this.o===void 0,42304);let r=this.i;const s=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let a=new Ki;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ki,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const h=a;e.enqueueRetryable(async()=>{await h.promise,await s(this.currentUser)})},u=h=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ki)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Lt(typeof r.accessToken=="string",31837,{l:r}),new v6(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Lt(e===null||typeof e=="string",2055,{h:e}),new Ir(e)}}class w6{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _6{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new w6(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,os(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Lt(this.o===void 0,3512);const r=a=>{a.error!=null&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,Oe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new AN(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Lt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new AN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=E6(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function yt(t,e){return t<e?-1:t>e?1:0}function xx(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return yt(r,s);{const a=ET(),c=N6(a.encode(kN(t,n)),a.encode(kN(e,n)));return c!==0?c:yt(r,s)}}n+=r>65535?2:1}return yt(t.length,e.length)}function kN(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function N6(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return yt(t[n],e[n]);return yt(t.length,e.length)}function Jc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="__name__";class ri{constructor(e,n,r){n===void 0?n=0:n>e.length&&st(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&st(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ri.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ri?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=ri.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return yt(e.length,n.length)}static compareSegments(e,n){const r=ri.isNumericId(e),s=ri.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?ri.extractNumericId(e).compare(ri.extractNumericId(n)):xx(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ra.fromString(e.substring(4,e.length-2))}}class Bt extends ri{construct(e,n,r){return new Bt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ie(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Bt(n)}static emptyPath(){return new Bt([])}}const S6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ln extends ri{construct(e,n,r){return new Ln(e,n,r)}static isValidIdentifier(e){return S6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ln.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wx}static keyField(){return new Ln([wx])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new Ie(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Ie(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Ie(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else u==="`"?(c=!c,s++):u!=="."||c?(r+=u,s++):(a(),s++)}if(a(),c)throw new Ie(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ln(n)}static emptyPath(){return new Ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(Bt.fromString(e))}static fromName(e){return new Ge(Bt.fromString(e).popFirst(5))}static empty(){return new Ge(Bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Bt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new Bt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(t,e,n){if(!n)throw new Ie(de.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function NT(t,e,n,r){if(e===!0&&r===!0)throw new Ie(de.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function PN(t){if(!Ge.isDocumentKey(t))throw new Ie(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function RN(t){if(Ge.isDocumentKey(t))throw new Ie(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ST(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Pp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":st(12329,{type:typeof t})}function sr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ie(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pp(t);throw new Ie(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(t,e){const n={typeString:t};return e&&(n.value=e),n}function fh(t,e){if(!ST(t))throw new Ie(de.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const c=t[r];if(s&&typeof c!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&c!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Ie(de.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=-62135596800,ON=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ON);return new pt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ie(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ie(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<DN)throw new Ie(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ON}_compareTo(e){return this.seconds===e.seconds?yt(this.nanoseconds,e.nanoseconds):yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fh(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-DN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:En("string",pt._jsonSchemaVersion),seconds:En("number"),nanoseconds:En("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{static fromTimestamp(e){return new ut(e)}static min(){return new ut(new pt(0,0))}static max(){return new ut(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud=-1;function C6(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ut.fromTimestamp(r===1e9?new pt(n+1,0):new pt(n,r));return new fa(s,Ge.empty(),e)}function j6(t){return new fa(t.readTime,t.key,Ud)}class fa{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new fa(ut.min(),Ge.empty(),Ud)}static max(){return new fa(ut.max(),Ge.empty(),Ud)}}function T6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ge.comparator(t.documentKey,e.documentKey),n!==0?n:yt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yu(t){if(t.code!==de.FAILED_PRECONDITION||t.message!==I6)throw t;Oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&st(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new he((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof he?n:he.resolve(n)}catch(n){return he.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):he.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):he.reject(n)}static resolve(e){return new he((n,r)=>{n(e)})}static reject(e){return new he((n,r)=>{r(e)})}static waitFor(e){return new he((n,r)=>{let s=0,a=0,c=!1;e.forEach(u=>{++s,u.next(()=>{++a,c&&a===s&&n()},h=>r(h))}),c=!0,a===s&&n()})}static or(e){let n=he.resolve(!1);for(const r of e)n=n.next(s=>s?he.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new he((r,s)=>{const a=e.length,c=new Array(a);let u=0;for(let h=0;h<a;h++){const f=h;n(e[f]).next(p=>{c[f]=p,++u,u===a&&r(c)},p=>s(p))}})}static doWhile(e,n){return new he((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function k6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Rp.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw=-1;function Dp(t){return t==null}function Wm(t){return t===0&&1/t==-1/0}function P6(t){return typeof t=="number"&&Number.isInteger(t)&&!Wm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="";function R6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=LN(e)),e=D6(t.get(n),e);return LN(e)}function D6(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case CT:n+="";break;default:n+=a}}return n}function LN(t){return t+CT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _a(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,n){this.comparator=e,this.root=n||Bn.EMPTY}insert(e,n){return new hn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bn.BLACK,null,null))}remove(e){return new hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gf(this.root,e,this.comparator,!0)}}class Gf{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bn{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??Bn.RED,this.left=s??Bn.EMPTY,this.right=a??Bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new Bn(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Bn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw st(43730,{key:this.key,value:this.value});if(this.right.isRed())throw st(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw st(27949);return e+(this.isRed()?0:1)}}Bn.EMPTY=null,Bn.RED=!0,Bn.BLACK=!1;Bn.EMPTY=new class{constructor(){this.size=0}get key(){throw st(57766)}get value(){throw st(16141)}get color(){throw st(16727)}get left(){throw st(29726)}get right(){throw st(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new Bn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.comparator=e,this.data=new hn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new FN(this.data.getIterator())}getIteratorFrom(e){return new FN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new jn(this.comparator);return n.data=e,n}}class FN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.fields=e,e.sort(Ln.comparator)}static empty(){return new Kr([])}unionWith(e){let n=new jn(Ln.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Kr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new TT("Invalid base64 string: "+a):a}}(e);return new Fn(n)}static fromUint8Array(e){const n=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new Fn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fn.EMPTY_BYTE_STRING=new Fn("");const O6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ma(t){if(Lt(!!t,39018),typeof t=="string"){let e=0;const n=O6.exec(t);if(Lt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yn(t.seconds),nanos:yn(t.nanos)}}function yn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function pa(t){return typeof t=="string"?Fn.fromBase64String(t):Fn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="server_timestamp",AT="__type__",kT="__previous_value__",PT="__local_write_time__";function Mw(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[AT])===null||n===void 0?void 0:n.stringValue)===IT}function Op(t){const e=t.mapValue.fields[kT];return Mw(e)?Op(e):e}function $d(t){const e=ma(t.mapValue.fields[PT].timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e,n,r,s,a,c,u,h,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=p}}const Hm="(default)";class Zc{constructor(e,n){this.projectId=e,this.database=n||Hm}static empty(){return new Zc("","")}get isDefaultDatabase(){return this.database===Hm}isEqual(e){return e instanceof Zc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="__type__",M6="__max__",Qf={mapValue:{}},DT="__vector__",Km="value";function ga(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mw(t)?4:V6(t)?9007199254740991:F6(t)?10:11:st(28295,{value:t})}function fi(t,e){if(t===e)return!0;const n=ga(t);if(n!==ga(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $d(t).isEqual($d(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=ma(s.timestampValue),u=ma(a.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return pa(s.bytesValue).isEqual(pa(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return yn(s.geoPointValue.latitude)===yn(a.geoPointValue.latitude)&&yn(s.geoPointValue.longitude)===yn(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return yn(s.integerValue)===yn(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=yn(s.doubleValue),u=yn(a.doubleValue);return c===u?Wm(c)===Wm(u):isNaN(c)&&isNaN(u)}return!1}(t,e);case 9:return Jc(t.arrayValue.values||[],e.arrayValue.values||[],fi);case 10:case 11:return function(s,a){const c=s.mapValue.fields||{},u=a.mapValue.fields||{};if(MN(c)!==MN(u))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(u[h]===void 0||!fi(c[h],u[h])))return!1;return!0}(t,e);default:return st(52216,{left:t})}}function zd(t,e){return(t.values||[]).find(n=>fi(n,e))!==void 0}function eu(t,e){if(t===e)return 0;const n=ga(t),r=ga(e);if(n!==r)return yt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return yt(t.booleanValue,e.booleanValue);case 2:return function(a,c){const u=yn(a.integerValue||a.doubleValue),h=yn(c.integerValue||c.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return VN(t.timestampValue,e.timestampValue);case 4:return VN($d(t),$d(e));case 5:return xx(t.stringValue,e.stringValue);case 6:return function(a,c){const u=pa(a),h=pa(c);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(a,c){const u=a.split("/"),h=c.split("/");for(let f=0;f<u.length&&f<h.length;f++){const p=yt(u[f],h[f]);if(p!==0)return p}return yt(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,c){const u=yt(yn(a.latitude),yn(c.latitude));return u!==0?u:yt(yn(a.longitude),yn(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return UN(t.arrayValue,e.arrayValue);case 10:return function(a,c){var u,h,f,p;const y=a.fields||{},v=c.fields||{},x=(u=y[Km])===null||u===void 0?void 0:u.arrayValue,E=(h=v[Km])===null||h===void 0?void 0:h.arrayValue,w=yt(((f=x==null?void 0:x.values)===null||f===void 0?void 0:f.length)||0,((p=E==null?void 0:E.values)===null||p===void 0?void 0:p.length)||0);return w!==0?w:UN(x,E)}(t.mapValue,e.mapValue);case 11:return function(a,c){if(a===Qf.mapValue&&c===Qf.mapValue)return 0;if(a===Qf.mapValue)return 1;if(c===Qf.mapValue)return-1;const u=a.fields||{},h=Object.keys(u),f=c.fields||{},p=Object.keys(f);h.sort(),p.sort();for(let y=0;y<h.length&&y<p.length;++y){const v=xx(h[y],p[y]);if(v!==0)return v;const x=eu(u[h[y]],f[p[y]]);if(x!==0)return x}return yt(h.length,p.length)}(t.mapValue,e.mapValue);default:throw st(23264,{le:n})}}function VN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return yt(t,e);const n=ma(t),r=ma(e),s=yt(n.seconds,r.seconds);return s!==0?s:yt(n.nanos,r.nanos)}function UN(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=eu(n[s],r[s]);if(a)return a}return yt(n.length,r.length)}function tu(t){return _x(t)}function _x(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ma(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return pa(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ge.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=_x(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const c of r)a?a=!1:s+=",",s+=`${c}:${_x(n.fields[c])}`;return s+"}"}(t.mapValue):st(61005,{value:t})}function gm(t){switch(ga(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Op(t);return e?16+gm(e):16;case 5:return 2*t.stringValue.length;case 6:return pa(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+gm(a),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return _a(r.fields,(a,c)=>{s+=a.length+gm(c)}),s}(t.mapValue);default:throw st(13486,{value:t})}}function $N(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function bx(t){return!!t&&"integerValue"in t}function Fw(t){return!!t&&"arrayValue"in t}function zN(t){return!!t&&"nullValue"in t}function BN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ym(t){return!!t&&"mapValue"in t}function F6(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[RT])===null||n===void 0?void 0:n.stringValue)===DT}function wd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return _a(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=wd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function V6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===M6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.value=e}static empty(){return new Pr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ym(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wd(n)}setAll(e){let n=Ln.emptyPath(),r={},s=[];e.forEach((c,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,r,s),r={},s=[],n=u.popLast()}c?r[u.lastSegment()]=wd(c):s.push(u.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());ym(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ym(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){_a(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new Pr(wd(this.value))}}function OT(t){const e=[];return _a(t.fields,(n,r)=>{const s=new Ln([n]);if(ym(r)){const a=OT(r.mapValue).fields;if(a.length===0)e.push(s);else for(const c of a)e.push(s.child(c))}else e.push(s)}),new Kr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,n,r,s,a,c,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=c,this.documentState=u}static newInvalidDocument(e){return new er(e,0,ut.min(),ut.min(),ut.min(),Pr.empty(),0)}static newFoundDocument(e,n,r,s){return new er(e,1,n,ut.min(),r,s,0)}static newNoDocument(e,n){return new er(e,2,n,ut.min(),ut.min(),Pr.empty(),0)}static newUnknownDocument(e,n){return new er(e,3,n,ut.min(),ut.min(),Pr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ut.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new er(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n){this.position=e,this.inclusive=n}}function qN(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],c=t.position[s];if(a.field.isKeyField()?r=Ge.comparator(Ge.fromName(c.referenceValue),n.key):r=eu(c,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function WN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!fi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n="asc"){this.field=e,this.dir=n}}function U6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{}class bn extends LT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new z6(e,n,r):n==="array-contains"?new W6(e,r):n==="in"?new H6(e,r):n==="not-in"?new K6(e,r):n==="array-contains-any"?new G6(e,r):new bn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new B6(e,r):new q6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(eu(n,this.value)):n!==null&&ga(this.value)===ga(n)&&this.matchesComparison(eu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return st(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $s extends LT{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new $s(e,n)}matches(e){return MT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function MT(t){return t.op==="and"}function FT(t){return $6(t)&&MT(t)}function $6(t){for(const e of t.filters)if(e instanceof $s)return!1;return!0}function Ex(t){if(t instanceof bn)return t.field.canonicalString()+t.op.toString()+tu(t.value);if(FT(t))return t.filters.map(e=>Ex(e)).join(",");{const e=t.filters.map(n=>Ex(n)).join(",");return`${t.op}(${e})`}}function VT(t,e){return t instanceof bn?function(r,s){return s instanceof bn&&r.op===s.op&&r.field.isEqual(s.field)&&fi(r.value,s.value)}(t,e):t instanceof $s?function(r,s){return s instanceof $s&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,c,u)=>a&&VT(c,s.filters[u]),!0):!1}(t,e):void st(19439)}function UT(t){return t instanceof bn?function(n){return`${n.field.canonicalString()} ${n.op} ${tu(n.value)}`}(t):t instanceof $s?function(n){return n.op.toString()+" {"+n.getFilters().map(UT).join(" ,")+"}"}(t):"Filter"}class z6 extends bn{constructor(e,n,r){super(e,n,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const n=Ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class B6 extends bn{constructor(e,n){super(e,"in",n),this.keys=$T("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class q6 extends bn{constructor(e,n){super(e,"not-in",n),this.keys=$T("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $T(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class W6 extends bn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fw(n)&&zd(n.arrayValue,this.value)}}class H6 extends bn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zd(this.value.arrayValue,n)}}class K6 extends bn{constructor(e,n){super(e,"not-in",n)}matches(e){if(zd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zd(this.value.arrayValue,n)}}class G6 extends bn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>zd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e,n=null,r=[],s=[],a=null,c=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=c,this.endAt=u,this.Pe=null}}function HN(t,e=null,n=[],r=[],s=null,a=null,c=null){return new Q6(t,e,n,r,s,a,c)}function Vw(t){const e=dt(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ex(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Dp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>tu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>tu(r)).join(",")),e.Pe=n}return e.Pe}function Uw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!U6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!VT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!WN(t.startAt,e.startAt)&&WN(t.endAt,e.endAt)}function Nx(t){return Ge.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n=null,r=[],s=[],a=null,c="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=c,this.startAt=u,this.endAt=h,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Y6(t,e,n,r,s,a,c,u){return new Cl(t,e,n,r,s,a,c,u)}function Lp(t){return new Cl(t)}function KN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zT(t){return t.collectionGroup!==null}function _d(t){const e=dt(t);if(e.Te===null){e.Te=[];const n=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new jn(Ln.comparator);return c.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Bd(a,r))}),n.has(Ln.keyField().canonicalString())||e.Te.push(new Bd(Ln.keyField(),r))}return e.Te}function ui(t){const e=dt(t);return e.Ie||(e.Ie=X6(e,_d(t))),e.Ie}function X6(t,e){if(t.limitType==="F")return HN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Bd(s.field,a)});const n=t.endAt?new Gm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Gm(t.startAt.position,t.startAt.inclusive):null;return HN(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Sx(t,e){const n=t.filters.concat([e]);return new Cl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Cx(t,e,n){return new Cl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Mp(t,e){return Uw(ui(t),ui(e))&&t.limitType===e.limitType}function BT(t){return`${Vw(ui(t))}|lt:${t.limitType}`}function vc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>UT(s)).join(", ")}]`),Dp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>tu(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>tu(s)).join(",")),`Target(${r})`}(ui(t))}; limitType=${t.limitType})`}function Fp(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ge.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of _d(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(c,u,h){const f=qN(c,u,h);return c.inclusive?f<=0:f<0}(r.startAt,_d(r),s)||r.endAt&&!function(c,u,h){const f=qN(c,u,h);return c.inclusive?f>=0:f>0}(r.endAt,_d(r),s))}(t,e)}function J6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qT(t){return(e,n)=>{let r=!1;for(const s of _d(t)){const a=Z6(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function Z6(t,e,n){const r=t.field.isKeyField()?Ge.comparator(e.key,n.key):function(a,c,u){const h=c.data.field(a),f=u.data.field(a);return h!==null&&f!==null?eu(h,f):st(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return st(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){_a(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return jT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5=new hn(Ge.comparator);function eo(){return e5}const WT=new hn(Ge.comparator);function dd(...t){let e=WT;for(const n of t)e=e.insert(n.key,n);return e}function HT(t){let e=WT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ga(){return bd()}function KT(){return bd()}function bd(){return new jl(t=>t.toString(),(t,e)=>t.isEqual(e))}const t5=new hn(Ge.comparator),n5=new jn(Ge.comparator);function wt(...t){let e=n5;for(const n of t)e=e.add(n);return e}const r5=new jn(yt);function s5(){return r5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wm(e)?"-0":e}}function GT(t){return{integerValue:""+t}}function i5(t,e){return P6(e)?GT(e):$w(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(){this._=void 0}}function o5(t,e,n){return t instanceof qd?function(s,a){const c={fields:{[AT]:{stringValue:IT},[PT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Mw(a)&&(a=Op(a)),a&&(c.fields[kT]=a),{mapValue:c}}(n,e):t instanceof Wd?YT(t,e):t instanceof Hd?XT(t,e):function(s,a){const c=QT(s,a),u=GN(c)+GN(s.Ee);return bx(c)&&bx(s.Ee)?GT(u):$w(s.serializer,u)}(t,e)}function a5(t,e,n){return t instanceof Wd?YT(t,e):t instanceof Hd?XT(t,e):n}function QT(t,e){return t instanceof Qm?function(r){return bx(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class qd extends Vp{}class Wd extends Vp{constructor(e){super(),this.elements=e}}function YT(t,e){const n=JT(e);for(const r of t.elements)n.some(s=>fi(s,r))||n.push(r);return{arrayValue:{values:n}}}class Hd extends Vp{constructor(e){super(),this.elements=e}}function XT(t,e){let n=JT(e);for(const r of t.elements)n=n.filter(s=>!fi(s,r));return{arrayValue:{values:n}}}class Qm extends Vp{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function GN(t){return yn(t.integerValue||t.doubleValue)}function JT(t){return Fw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(e,n){this.field=e,this.transform=n}}function c5(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Wd&&s instanceof Wd||r instanceof Hd&&s instanceof Hd?Jc(r.elements,s.elements,fi):r instanceof Qm&&s instanceof Qm?fi(r.Ee,s.Ee):r instanceof qd&&s instanceof qd}(t.transform,e.transform)}class u5{constructor(e,n){this.version=e,this.transformResults=n}}class pr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pr}static exists(e){return new pr(void 0,e)}static updateTime(e){return new pr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Up{}function ZT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $p(t.key,pr.none()):new mh(t.key,t.data,pr.none());{const n=t.data,r=Pr.empty();let s=new jn(Ln.comparator);for(let a of e.fields)if(!s.has(a)){let c=n.field(a);c===null&&a.length>1&&(a=a.popLast(),c=n.field(a)),c===null?r.delete(a):r.set(a,c),s=s.add(a)}return new ba(t.key,r,new Kr(s.toArray()),pr.none())}}function d5(t,e,n){t instanceof mh?function(s,a,c){const u=s.value.clone(),h=YN(s.fieldTransforms,a,c.transformResults);u.setAll(h),a.convertToFoundDocument(c.version,u).setHasCommittedMutations()}(t,e,n):t instanceof ba?function(s,a,c){if(!vm(s.precondition,a))return void a.convertToUnknownDocument(c.version);const u=YN(s.fieldTransforms,a,c.transformResults),h=a.data;h.setAll(eI(s)),h.setAll(u),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(t,e,n):function(s,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function Ed(t,e,n,r){return t instanceof mh?function(a,c,u,h){if(!vm(a.precondition,c))return u;const f=a.value.clone(),p=XN(a.fieldTransforms,h,c);return f.setAll(p),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof ba?function(a,c,u,h){if(!vm(a.precondition,c))return u;const f=XN(a.fieldTransforms,h,c),p=c.data;return p.setAll(eI(a)),p.setAll(f),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(a,c,u){return vm(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u}(t,e,n)}function h5(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=QT(r.transform,s||null);a!=null&&(n===null&&(n=Pr.empty()),n.set(r.field,a))}return n||null}function QN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Jc(r,s,(a,c)=>c5(a,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class mh extends Up{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ba extends Up{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function eI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function YN(t,e,n){const r=new Map;Lt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const a=t[s],c=a.transform,u=e.data.field(a.field);r.set(a.field,a5(c,u,n[s]))}return r}function XN(t,e,n){const r=new Map;for(const s of t){const a=s.transform,c=n.data.field(s.field);r.set(s.field,o5(a,c,e))}return r}class $p extends Up{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class f5 extends Up{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&d5(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ed(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ed(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=KT();return this.mutations.forEach(s=>{const a=e.get(s.key),c=a.overlayedDocument;let u=this.applyToLocalView(c,a.mutatedFields);u=n.has(s.key)?null:u;const h=ZT(c,u);h!==null&&r.set(s.key,h),c.isValidDocument()||c.convertToNoDocument(ut.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),wt())}isEqual(e){return this.batchId===e.batchId&&Jc(this.mutations,e.mutations,(n,r)=>QN(n,r))&&Jc(this.baseMutations,e.baseMutations,(n,r)=>QN(n,r))}}class zw{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Lt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return t5}();const a=e.mutations;for(let c=0;c<a.length;c++)s=s.insert(a[c].key,r[c].version);return new zw(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let p5=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n,Tt;function y5(t){switch(t){case de.OK:return st(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return st(15467,{code:t})}}function tI(t){if(t===void 0)return Zi("GRPC error has no .code"),de.UNKNOWN;switch(t){case _n.OK:return de.OK;case _n.CANCELLED:return de.CANCELLED;case _n.UNKNOWN:return de.UNKNOWN;case _n.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case _n.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case _n.INTERNAL:return de.INTERNAL;case _n.UNAVAILABLE:return de.UNAVAILABLE;case _n.UNAUTHENTICATED:return de.UNAUTHENTICATED;case _n.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case _n.NOT_FOUND:return de.NOT_FOUND;case _n.ALREADY_EXISTS:return de.ALREADY_EXISTS;case _n.PERMISSION_DENIED:return de.PERMISSION_DENIED;case _n.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case _n.ABORTED:return de.ABORTED;case _n.OUT_OF_RANGE:return de.OUT_OF_RANGE;case _n.UNIMPLEMENTED:return de.UNIMPLEMENTED;case _n.DATA_LOSS:return de.DATA_LOSS;default:return st(39323,{code:t})}}(Tt=_n||(_n={}))[Tt.OK=0]="OK",Tt[Tt.CANCELLED=1]="CANCELLED",Tt[Tt.UNKNOWN=2]="UNKNOWN",Tt[Tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tt[Tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tt[Tt.NOT_FOUND=5]="NOT_FOUND",Tt[Tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tt[Tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tt[Tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tt[Tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tt[Tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tt[Tt.ABORTED=10]="ABORTED",Tt[Tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tt[Tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tt[Tt.INTERNAL=13]="INTERNAL",Tt[Tt.UNAVAILABLE=14]="UNAVAILABLE",Tt[Tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5=new ra([4294967295,4294967295],0);function JN(t){const e=ET().encode(t),n=new pT;return n.update(e),new Uint8Array(n.digest())}function ZN(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ra([n,r],0),new ra([s,a],0)]}class Bw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new hd(`Invalid padding: ${n}`);if(r<0)throw new hd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new hd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new hd(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=ra.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(ra.fromNumber(r)));return s.compare(v5)===1&&(s=new ra([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=JN(e),[r,s]=ZN(n);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,s,a);if(!this.ye(c))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new Bw(a,s,n);return r.forEach(u=>c.insert(u)),c}insert(e){if(this.fe===0)return;const n=JN(e),[r,s]=ZN(n);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,s,a);this.we(c)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class hd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ph.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new zp(ut.min(),s,new hn(yt),eo(),wt())}}class ph{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ph(r,n,wt(),wt(),wt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class nI{constructor(e,n){this.targetId=e,this.De=n}}class rI{constructor(e,n,r=Fn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class e1{constructor(){this.ve=0,this.Ce=t1(),this.Fe=Fn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=wt(),n=wt(),r=wt();return this.Ce.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:st(38017,{changeType:a})}}),new ph(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=t1()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Lt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class x5{constructor(e){this.We=e,this.Ge=new Map,this.ze=eo(),this.je=Yf(),this.Je=Yf(),this.He=new hn(yt)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:st(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const a=s.target;if(Nx(a))if(r===0){const c=new Ge(a.path);this.Xe(n,c,er.newNoDocument(c,ut.min()))}else Lt(r===1,20013,{expectedCount:r});else{const c=this.ot(n);if(c!==r){const u=this._t(e),h=u?this.ut(u,e,c):1;if(h!==0){this.rt(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let c,u;try{c=pa(r).toUint8Array()}catch(h){if(h instanceof TT)return ha("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new Bw(c,s,a)}catch(h){return ha(h instanceof hd?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.fe===0?null:u}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const c=this.We.lt(),u=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.Xe(n,a,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((a,c)=>{const u=this.st(c);if(u){if(a.current&&Nx(u.target)){const h=new Ge(u.target.path);this.Tt(h).has(c)||this.It(c,h)||this.Xe(c,h,er.newNoDocument(h,e))}a.Ne&&(n.set(c,a.Le()),a.ke())}});let r=wt();this.Je.forEach((a,c)=>{let u=!0;c.forEachWhile(h=>{const f=this.st(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(a))}),this.ze.forEach((a,c)=>c.setReadTime(e));const s=new zp(e,n,this.He,this.ze,r);return this.ze=eo(),this.je=Yf(),this.Je=Yf(),this.He=new hn(yt),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new e1,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new jn(yt),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new jn(yt),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Oe("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new e1),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Yf(){return new hn(Ge.comparator)}function t1(){return new hn(Ge.comparator)}const w5={asc:"ASCENDING",desc:"DESCENDING"},_5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},b5={and:"AND",or:"OR"};class E5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function jx(t,e){return t.useProto3Json||Dp(e)?e:{value:e}}function Ym(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function N5(t,e){return Ym(t,e.toTimestamp())}function di(t){return Lt(!!t,49232),ut.fromTimestamp(function(n){const r=ma(n);return new pt(r.seconds,r.nanos)}(t))}function qw(t,e){return Tx(t,e).canonicalString()}function Tx(t,e){const n=function(s){return new Bt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function iI(t){const e=Bt.fromString(t);return Lt(uI(e),10190,{key:e.toString()}),e}function Ix(t,e){return qw(t.databaseId,e.path)}function ov(t,e){const n=iI(e);if(n.get(1)!==t.databaseId.projectId)throw new Ie(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ie(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ge(aI(n))}function oI(t,e){return qw(t.databaseId,e)}function S5(t){const e=iI(t);return e.length===4?Bt.emptyPath():aI(e)}function Ax(t){return new Bt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function aI(t){return Lt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function n1(t,e,n){return{name:Ix(t,e),fields:n.value.mapValue.fields}}function C5(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:st(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(f,p){return f.useProto3Json?(Lt(p===void 0||typeof p=="string",58123),Fn.fromBase64String(p||"")):(Lt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Fn.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&function(f){const p=f.code===void 0?de.UNKNOWN:tI(f.code);return new Ie(p,f.message||"")}(c);n=new rI(r,s,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ov(t,r.document.name),a=di(r.document.updateTime),c=r.document.createTime?di(r.document.createTime):ut.min(),u=new Pr({mapValue:{fields:r.document.fields}}),h=er.newFoundDocument(s,a,c,u),f=r.targetIds||[],p=r.removedTargetIds||[];n=new xm(f,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ov(t,r.document),a=r.readTime?di(r.readTime):ut.min(),c=er.newNoDocument(s,a),u=r.removedTargetIds||[];n=new xm([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ov(t,r.document),a=r.removedTargetIds||[];n=new xm([],a,s,null)}else{if(!("filter"in e))return st(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,c=new g5(s,a),u=r.targetId;n=new nI(u,c)}}return n}function j5(t,e){let n;if(e instanceof mh)n={update:n1(t,e.key,e.value)};else if(e instanceof $p)n={delete:Ix(t,e.key)};else if(e instanceof ba)n={update:n1(t,e.key,e.data),updateMask:L5(e.fieldMask)};else{if(!(e instanceof f5))return st(16599,{Rt:e.type});n={verify:Ix(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const u=c.transform;if(u instanceof qd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Wd)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Hd)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Qm)return{fieldPath:c.field.canonicalString(),increment:u.Ee};throw st(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:N5(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:st(27497)}(t,e.precondition)),n}function T5(t,e){return t&&t.length>0?(Lt(e!==void 0,14353),t.map(n=>function(s,a){let c=s.updateTime?di(s.updateTime):di(a);return c.isEqual(ut.min())&&(c=di(a)),new u5(c,s.transformResults||[])}(n,e))):[]}function I5(t,e){return{documents:[oI(t,e.path)]}}function A5(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=oI(t,s);const a=function(f){if(f.length!==0)return cI($s.create(f,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const c=function(f){if(f.length!==0)return f.map(p=>function(v){return{field:xc(v.field),direction:R5(v.dir)}}(p))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const u=jx(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{Vt:n,parent:s}}function k5(t){let e=S5(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Lt(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let a=[];n.where&&(a=function(y){const v=lI(y);return v instanceof $s&&FT(v)?v.getFilters():[v]}(n.where));let c=[];n.orderBy&&(c=function(y){return y.map(v=>function(E){return new Bd(wc(E.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(y){let v;return v=typeof y=="object"?y.value:y,Dp(v)?null:v}(n.limit));let h=null;n.startAt&&(h=function(y){const v=!!y.before,x=y.values||[];return new Gm(x,v)}(n.startAt));let f=null;return n.endAt&&(f=function(y){const v=!y.before,x=y.values||[];return new Gm(x,v)}(n.endAt)),Y6(e,s,c,a,u,"F",h,f)}function P5(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=wc(n.unaryFilter.field);return bn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=wc(n.unaryFilter.field);return bn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=wc(n.unaryFilter.field);return bn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=wc(n.unaryFilter.field);return bn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return st(61313);default:return st(60726)}}(t):t.fieldFilter!==void 0?function(n){return bn.create(wc(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return st(58110);default:return st(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $s.create(n.compositeFilter.filters.map(r=>lI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return st(1026)}}(n.compositeFilter.op))}(t):st(30097,{filter:t})}function R5(t){return w5[t]}function D5(t){return _5[t]}function O5(t){return b5[t]}function xc(t){return{fieldPath:t.canonicalString()}}function wc(t){return Ln.fromServerFormat(t.fieldPath)}function cI(t){return t instanceof bn?function(n){if(n.op==="=="){if(BN(n.value))return{unaryFilter:{field:xc(n.field),op:"IS_NAN"}};if(zN(n.value))return{unaryFilter:{field:xc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(BN(n.value))return{unaryFilter:{field:xc(n.field),op:"IS_NOT_NAN"}};if(zN(n.value))return{unaryFilter:{field:xc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xc(n.field),op:D5(n.op),value:n.value}}}(t):t instanceof $s?function(n){const r=n.getFilters().map(s=>cI(s));return r.length===1?r[0]:{compositeFilter:{op:O5(n.op),filters:r}}}(t):st(54877,{filter:t})}function L5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n,r,s,a=ut.min(),c=ut.min(),u=Fn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Xo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e){this.gt=e}}function F5(t){const e=k5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cx(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(){this.Dn=new U5}addToCollectionParentIndex(e,n){return this.Dn.add(n),he.resolve()}getCollectionParents(e,n){return he.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return he.resolve()}deleteFieldIndex(e,n){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,n){return he.resolve()}getDocumentsMatchingTarget(e,n){return he.resolve(null)}getIndexType(e,n){return he.resolve(0)}getFieldIndexes(e,n){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,n){return he.resolve(fa.min())}getMinOffsetFromCollectionGroup(e,n){return he.resolve(fa.min())}updateCollectionGroup(e,n,r){return he.resolve()}updateIndexEntries(e,n){return he.resolve()}}class U5{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new jn(Bt.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new jn(Bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dI=41943040;class Ar{static withCacheSize(e){return new Ar(e,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ar.DEFAULT_COLLECTION_PERCENTILE=10,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ar.DEFAULT=new Ar(dI,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ar.DISABLED=new Ar(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new nu(0)}static ur(){return new nu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="LruGarbageCollector",hI=1048576;function i1([t,e],[n,r]){const s=yt(t,n);return s===0?yt(e,r):s}class $5{constructor(e){this.Tr=e,this.buffer=new jn(i1),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();i1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class z5{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Oe(s1,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){vu(n)?Oe(s1,"Ignoring IndexedDB error during garbage collection: ",n):await yu(n)}await this.Rr(3e5)})}}class B5{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return he.resolve(Rp.ue);const r=new $5(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(r1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),r1):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,a,c,u,h,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,c=Date.now(),this.nthSequenceNumber(e,s))).next(y=>(r=y,u=Date.now(),this.removeTargets(e,r,n))).next(y=>(a=y,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),yc()<=xt.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-p}ms
	Determined least recently used ${s} in `+(u-c)+`ms
	Removed ${a} targets in `+(h-u)+`ms
	Removed ${y} documents in `+(f-h)+`ms
Total Duration: ${f-p}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:y})))}}function q5(t,e){return new B5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(){this.changes=new jl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,er.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?he.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ed(r.mutation,s,Kr.empty(),pt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,wt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=wt()){const s=Ga();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let c=dd();return a.forEach((u,h)=>{c=c.insert(u,h.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const r=Ga();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,wt()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((c,u)=>{n.set(c,u)})})}computeViews(e,n,r,s){let a=eo();const c=bd(),u=function(){return bd()}();return n.forEach((h,f)=>{const p=r.get(f.key);s.has(f.key)&&(p===void 0||p.mutation instanceof ba)?a=a.insert(f.key,f):p!==void 0?(c.set(f.key,p.mutation.getFieldMask()),Ed(p.mutation,f,p.mutation.getFieldMask(),pt.now())):c.set(f.key,Kr.empty())}),this.recalculateAndSaveOverlays(e,a).next(h=>(h.forEach((f,p)=>c.set(f,p)),n.forEach((f,p)=>{var y;return u.set(f,new H5(p,(y=c.get(f))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,n){const r=bd();let s=new hn((c,u)=>c-u),a=wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const u of c)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let p=r.get(h)||Kr.empty();p=u.applyToLocalView(f,p),r.set(h,p);const y=(s.get(u.batchId)||wt()).add(h);s=s.insert(u.batchId,y)})}).next(()=>{const c=[],u=s.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,p=h.value,y=KT();p.forEach(v=>{if(!a.has(v)){const x=ZT(n.get(v),r.get(v));x!==null&&y.set(v,x),a=a.add(v)}}),c.push(this.documentOverlayCache.saveOverlays(e,f,y))}return he.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(c){return Ge.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const c=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):he.resolve(Ga());let u=Ud,h=a;return c.next(f=>he.forEach(f,(p,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),a.get(p)?he.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{h=h.insert(p,v)}))).next(()=>this.populateOverlays(e,f,a)).next(()=>this.computeViews(e,h,f,wt())).next(p=>({batchId:u,changes:HT(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ge(n)).next(r=>{let s=dd();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let c=dd();return this.indexManager.getCollectionParents(e,a).next(u=>he.forEach(u,h=>{const f=function(y,v){return new Cl(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next(p=>{p.forEach((y,v)=>{c=c.insert(y,v)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(c=>{a.forEach((h,f)=>{const p=f.getKey();c.get(p)===null&&(c=c.insert(p,er.newInvalidDocument(p)))});let u=dd();return c.forEach((h,f)=>{const p=a.get(h);p!==void 0&&Ed(p.mutation,f,Kr.empty(),pt.now()),Fp(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return he.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:di(s.createTime)}}(n)),he.resolve()}getNamedQuery(e,n){return he.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:F5(s.bundledQuery),readTime:di(s.readTime)}}(n)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(){this.overlays=new hn(Ge.comparator),this.kr=new Map}getOverlay(e,n){return he.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ga();return he.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.wt(e,n,a)}),he.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),he.resolve()}getOverlaysForCollection(e,n,r){const s=Ga(),a=n.length+1,c=new Ge(n.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===a&&h.largestBatchId>r&&s.set(h.getKey(),h)}return he.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new hn((f,p)=>f-p);const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let p=a.get(f.largestBatchId);p===null&&(p=Ga(),a=a.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const u=Ga(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,p)=>u.set(f,p)),!(u.size()>=s)););return he.resolve(u)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new p5(n,r));let a=this.kr.get(n);a===void 0&&(a=wt(),this.kr.set(n,a)),this.kr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(){this.sessionToken=Fn.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(){this.qr=new jn(On.Qr),this.$r=new jn(On.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new On(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new On(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new Ge(new Bt([])),r=new On(n,e),s=new On(n,e+1),a=[];return this.$r.forEachInRange([r,s],c=>{this.Wr(c),a.push(c.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Ge(new Bt([])),r=new On(n,e),s=new On(n,e+1);let a=wt();return this.$r.forEachInRange([r,s],c=>{a=a.add(c.key)}),a}containsKey(e){const n=new On(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class On{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Ge.comparator(e.key,n.key)||yt(e.Hr,n.Hr)}static Ur(e,n){return yt(e.Hr,n.Hr)||Ge.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new jn(On.Qr)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new m5(a,n,r,s);this.mutationQueue.push(c);for(const u of s)this.Yr=this.Yr.add(new On(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return he.resolve(c)}lookupMutationBatch(e,n){return he.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),a=s<0?0:s;return he.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?Lw:this.er-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new On(n,0),s=new On(n,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,s],c=>{const u=this.Zr(c.Hr);a.push(u)}),he.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new jn(yt);return n.forEach(s=>{const a=new On(s,0),c=new On(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,c],u=>{r=r.add(u.Hr)})}),he.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;Ge.isDocumentKey(a)||(a=a.child(""));const c=new On(new Ge(a),0);let u=new jn(yt);return this.Yr.forEachWhile(h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(u=u.add(h.Hr)),!0)},c),he.resolve(this.ei(u))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Lt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return he.forEach(n.mutations,s=>{const a=new On(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new On(n,0),s=this.Yr.firstAfterOrEqual(r);return he.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e){this.ni=e,this.docs=function(){return new hn(Ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,c=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return he.resolve(r?r.document.mutableCopy():er.newInvalidDocument(n))}getEntries(e,n){let r=eo();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():er.newInvalidDocument(s))}),he.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=eo();const c=n.path,u=new Ge(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:p}}=h.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||T6(j6(p),r)<=0||(s.has(p.key)||Fp(n,p))&&(a=a.insert(p.key,p.mutableCopy()))}return he.resolve(a)}getAllFromCollectionGroup(e,n,r,s){st(9500)}ri(e,n){return he.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Z5(this)}getSize(e){return he.resolve(this.size)}}class Z5 extends W5{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),he.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(e){this.persistence=e,this.ii=new jl(n=>Vw(n),Uw),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.si=0,this.oi=new Ww,this.targetCount=0,this._i=nu.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),he.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new nu(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,he.resolve()}updateTargetData(e,n){return this.hr(n),he.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.ii.forEach((c,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ii.delete(c),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),he.waitFor(a).next(()=>s)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return he.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),he.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(c=>{a.push(s.markPotentiallyOrphaned(e,c))}),he.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),he.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return he.resolve(r)}containsKey(e,n){return he.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n){this.ai={},this.overlays={},this.ui=new Rp(0),this.ci=!1,this.ci=!0,this.li=new Y5,this.referenceDelegate=e(this),this.hi=new e$(this),this.indexManager=new V5,this.remoteDocumentCache=function(s){return new J5(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new M5(n),this.Ti=new G5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Q5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new X5(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){Oe("MemoryPersistence","Starting transaction:",e);const s=new t$(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ei(e,n){return he.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class t$ extends A6{constructor(e){super(),this.currentSequenceNumber=e}}class Hw{constructor(e){this.persistence=e,this.Ai=new Ww,this.Ri=null}static Vi(e){return new Hw(e)}get mi(){if(this.Ri)return this.Ri;throw st(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),he.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),he.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.mi,r=>{const s=Ge.fromPath(r);return this.fi(e,s).next(a=>{a||n.removeEntry(s,ut.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return he.or([()=>he.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Xm{constructor(e,n){this.persistence=e,this.gi=new jl(r=>R6(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=q5(this,n)}static Vi(e,n){return new Xm(e,n)}Ii(){}di(e){return he.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return he.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(a=>a?he.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,c=>this.Sr(e,c,n).next(u=>{u||(r++,a.removeEntry(c,ut.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),he.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),he.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),he.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=gm(e.data.value)),n}Sr(e,n,r){return he.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return he.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=wt(),s=wt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Kw(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return UF()?8:k6(ir())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.ps(e,n).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.ys(e,n,s,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new n$;return this.ws(e,n,c).next(u=>{if(a.result=u,this.Rs)return this.Ss(e,n,c,u.size)})}).next(()=>a.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(yc()<=xt.DEBUG&&Oe("QueryEngine","SDK will not create cache indexes for query:",vc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),he.resolve()):(yc()<=xt.DEBUG&&Oe("QueryEngine","Query:",vc(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(yc()<=xt.DEBUG&&Oe("QueryEngine","The SDK decides to create cache indexes for query:",vc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ui(n))):he.resolve())}ps(e,n){if(KN(n))return he.resolve(null);let r=ui(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Cx(n,null,"F"),r=ui(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=wt(...a);return this.gs.getDocuments(e,c).next(u=>this.indexManager.getMinOffset(e,r).next(h=>{const f=this.bs(n,u);return this.Ds(n,f,c,h.readTime)?this.ps(e,Cx(n,null,"F")):this.vs(e,f,n,h)}))})))}ys(e,n,r,s){return KN(n)||s.isEqual(ut.min())?he.resolve(null):this.gs.getDocuments(e,r).next(a=>{const c=this.bs(n,a);return this.Ds(n,c,r,s)?he.resolve(null):(yc()<=xt.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),vc(n)),this.vs(e,c,n,C6(s,Ud)).next(u=>u))})}bs(e,n){let r=new jn(qT(e));return n.forEach((s,a)=>{Fp(e,a)&&(r=r.add(a))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,n,r){return yc()<=xt.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",vc(n)),this.gs.getDocumentsMatchingQuery(e,n,fa.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="LocalStore",s$=3e8;class i${constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new hn(yt),this.Ms=new jl(a=>Vw(a),Uw),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new K5(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function o$(t,e,n,r){return new i$(t,e,n,r)}async function mI(t,e){const n=dt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],u=[];let h=wt();for(const f of s){c.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}for(const f of a){u.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}return n.localDocuments.getDocuments(r,h).next(f=>({Bs:f,removedBatchIds:c,addedBatchIds:u}))})})}function a$(t,e){const n=dt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.Os.newChangeBuffer({trackRemovals:!0});return function(u,h,f,p){const y=f.batch,v=y.keys();let x=he.resolve();return v.forEach(E=>{x=x.next(()=>p.getEntry(h,E)).next(w=>{const b=f.docVersions.get(E);Lt(b!==null,48541),w.version.compareTo(b)<0&&(y.applyToRemoteDocument(w,f),w.isValidDocument()&&(w.setReadTime(f.commitVersion),p.addEntry(w)))})}),x.next(()=>u.mutationQueue.removeMutationBatch(h,y))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=wt();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function pI(t){const e=dt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function l$(t,e){const n=dt(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const u=[];e.targetChanges.forEach((p,y)=>{const v=s.get(y);if(!v)return;u.push(n.hi.removeMatchingKeys(a,p.removedDocuments,y).next(()=>n.hi.addMatchingKeys(a,p.addedDocuments,y)));let x=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(y)!==null?x=x.withResumeToken(Fn.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):p.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(p.resumeToken,r)),s=s.insert(y,x),function(w,b,A){return w.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=s$?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(v,x,p)&&u.push(n.hi.updateTargetData(a,x))});let h=eo(),f=wt();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(a,p))}),u.push(c$(a,c,e.documentUpdates).next(p=>{h=p.Ls,f=p.ks})),!r.isEqual(ut.min())){const p=n.hi.getLastRemoteSnapshotVersion(a).next(y=>n.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));u.push(p)}return he.waitFor(u).next(()=>c.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,h,f)).next(()=>h)}).then(a=>(n.Fs=s,a))}function c$(t,e,n){let r=wt(),s=wt();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let c=eo();return n.forEach((u,h)=>{const f=a.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),h.isNoDocument()&&h.version.isEqual(ut.min())?(e.removeEntry(u,h.readTime),c=c.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),c=c.insert(u,h)):Oe(Gw,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{Ls:c,ks:s}})}function u$(t,e){const n=dt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Lw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function d$(t,e){const n=dt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(a=>a?(s=a,he.resolve(s)):n.hi.allocateTargetId(r).next(c=>(s=new Xo(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function kx(t,e,n){const r=dt(t),s=r.Fs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!vu(c))throw c;Oe(Gw,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function o1(t,e,n){const r=dt(t);let s=ut.min(),a=wt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(h,f,p){const y=dt(h),v=y.Ms.get(p);return v!==void 0?he.resolve(y.Fs.get(v)):y.hi.getTargetData(f,p)}(r,c,ui(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,u.targetId).next(h=>{a=h})}).next(()=>r.Cs.getDocumentsMatchingQuery(c,e,n?s:ut.min(),n?a:wt())).next(u=>(h$(r,J6(e),u),{documents:u,qs:a})))}function h$(t,e,n){let r=t.xs.get(e)||ut.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.xs.set(e,r)}class a1{constructor(){this.activeTargetIds=s5()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class f${constructor(){this.Fo=new a1,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new a1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m${xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="ConnectivityMonitor";class c1{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Oe(l1,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Oe(l1,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xf=null;function Px(){return Xf===null?Xf=function(){return 268435456+Math.round(2147483648*Math.random())}():Xf++,"0x"+Xf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="RestConnection",p$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class g${get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Hm?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,a){const c=Px(),u=this.Go(e,n.toUriEncodedString());Oe(av,`Sending RPC '${e}' ${c}:`,u,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(h,s,a);const{host:f}=new URL(u),p=_l(f);return this.jo(e,u,h,r,p).then(y=>(Oe(av,`Received RPC '${e}' ${c}: `,y),y),y=>{throw ha(av,`RPC '${e}' ${c} failed with error: `,y,"url: ",u,"request:",r),y})}Jo(e,n,r,s,a,c){return this.Wo(e,n,r,s,a)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}Go(e,n){const r=p$[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn="WebChannelConnection";class v$ extends g${constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,a){const c=Px();return new Promise((u,h)=>{const f=new gT;f.setWithCredentials(!0),f.listenOnce(yT.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case pm.NO_ERROR:const y=f.getResponseJson();Oe(Jn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),u(y);break;case pm.TIMEOUT:Oe(Jn,`RPC '${e}' ${c} timed out`),h(new Ie(de.DEADLINE_EXCEEDED,"Request time out"));break;case pm.HTTP_ERROR:const v=f.getStatus();if(Oe(Jn,`RPC '${e}' ${c} failed with status:`,v,"response text:",f.getResponseText()),v>0){let x=f.getResponseJson();Array.isArray(x)&&(x=x[0]);const E=x==null?void 0:x.error;if(E&&E.status&&E.message){const w=function(A){const j=A.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(j)>=0?j:de.UNKNOWN}(E.status);h(new Ie(w,E.message))}else h(new Ie(de.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new Ie(de.UNAVAILABLE,"Connection failed."));break;default:st(9055,{c_:e,streamId:c,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{Oe(Jn,`RPC '${e}' ${c} completed.`)}});const p=JSON.stringify(s);Oe(Jn,`RPC '${e}' ${c} sending request:`,s),f.send(n,"POST",p,r,15)})}P_(e,n,r){const s=Px(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=wT(),u=xT(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.zo(h.initMessageHeaders,n,r),h.encodeInitMessageHeaders=!0;const p=a.join("");Oe(Jn,`Creating RPC '${e}' stream ${s}: ${p}`,h);const y=c.createWebChannel(p,h);this.T_(y);let v=!1,x=!1;const E=new y$({Ho:b=>{x?Oe(Jn,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(v||(Oe(Jn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),v=!0),Oe(Jn,`RPC '${e}' stream ${s} sending:`,b),y.send(b))},Yo:()=>y.close()}),w=(b,A,j)=>{b.listen(A,T=>{try{j(T)}catch(M){setTimeout(()=>{throw M},0)}})};return w(y,ud.EventType.OPEN,()=>{x||(Oe(Jn,`RPC '${e}' stream ${s} transport opened.`),E.s_())}),w(y,ud.EventType.CLOSE,()=>{x||(x=!0,Oe(Jn,`RPC '${e}' stream ${s} transport closed`),E.__(),this.I_(y))}),w(y,ud.EventType.ERROR,b=>{x||(x=!0,ha(Jn,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),E.__(new Ie(de.UNAVAILABLE,"The operation could not be completed")))}),w(y,ud.EventType.MESSAGE,b=>{var A;if(!x){const j=b.data[0];Lt(!!j,16349);const T=j,M=(T==null?void 0:T.error)||((A=T[0])===null||A===void 0?void 0:A.error);if(M){Oe(Jn,`RPC '${e}' stream ${s} received error:`,M);const $=M.status;let z=function(k){const L=_n[k];if(L!==void 0)return tI(L)}($),R=M.message;z===void 0&&(z=de.INTERNAL,R="Unknown error status: "+$+" with message "+M.message),x=!0,E.__(new Ie(z,R)),y.close()}else Oe(Jn,`RPC '${e}' stream ${s} received:`,j),E.a_(j)}}),w(u,vT.STAT_EVENT,b=>{b.stat===vx.PROXY?Oe(Jn,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===vx.NOPROXY&&Oe(Jn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.o_()},0),E}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function lv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(t){return new E5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&Oe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="PersistentStream";class yI{constructor(e,n,r,s,a,c,u,h){this.Fi=e,this.w_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new gI(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===de.RESOURCE_EXHAUSTED?(Zi(n.toString()),Zi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new Ie(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Oe(u1,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(Oe(u1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class x$ extends yI{constructor(e,n,r,s,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,c),this.serializer=a}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=C5(this.serializer,e),r=function(a){if(!("targetChange"in a))return ut.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?ut.min():c.readTime?di(c.readTime):ut.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Ax(this.serializer),n.addTarget=function(a,c){let u;const h=c.target;if(u=Nx(h)?{documents:I5(a,h)}:{query:A5(a,h).Vt},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=sI(a,c.resumeToken);const f=jx(a,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(ut.min())>0){u.readTime=Ym(a,c.snapshotVersion.toTimestamp());const f=jx(a,c.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const r=P5(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Ax(this.serializer),n.removeTarget=e,this.k_(n)}}class w$ extends yI{constructor(e,n,r,s,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,c),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=T5(e.writeResults,e.commitTime),r=di(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Ax(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>j5(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${}class b$ extends _${constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Ie(de.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Wo(e,Tx(n,r),s,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ie(de.UNKNOWN,a.toString())})}Jo(e,n,r,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.Jo(e,Tx(n,r),s,c,u,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ie(de.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class E${constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Zi(n),this._a=!1):Oe("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl="RemoteStore";class N${constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(c=>{r.enqueueAndForget(async()=>{Tl(this)&&(Oe(pl,"Restarting streams for network reachability change."),await async function(h){const f=dt(h);f.Ia.add(4),await gh(f),f.Aa.set("Unknown"),f.Ia.delete(4),await qp(f)}(this))})}),this.Aa=new E$(r,s)}}async function qp(t){if(Tl(t))for(const e of t.da)await e(!0)}async function gh(t){for(const e of t.da)await e(!1)}function vI(t,e){const n=dt(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Jw(n)?Xw(n):xu(n).x_()&&Yw(n,e))}function Qw(t,e){const n=dt(t),r=xu(n);n.Ta.delete(e),r.x_()&&xI(n,e),n.Ta.size===0&&(r.x_()?r.B_():Tl(n)&&n.Aa.set("Unknown"))}function Yw(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ut.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xu(t).H_(e)}function xI(t,e){t.Ra.$e(e),xu(t).Y_(e)}function Xw(t){t.Ra=new x5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),xu(t).start(),t.Aa.aa()}function Jw(t){return Tl(t)&&!xu(t).M_()&&t.Ta.size>0}function Tl(t){return dt(t).Ia.size===0}function wI(t){t.Ra=void 0}async function S$(t){t.Aa.set("Online")}async function C$(t){t.Ta.forEach((e,n)=>{Yw(t,e)})}async function j$(t,e){wI(t),Jw(t)?(t.Aa.la(e),Xw(t)):t.Aa.set("Unknown")}async function T$(t,e,n){if(t.Aa.set("Online"),e instanceof rI&&e.state===2&&e.cause)try{await async function(s,a){const c=a.cause;for(const u of a.targetIds)s.Ta.has(u)&&(await s.remoteSyncer.rejectListen(u,c),s.Ta.delete(u),s.Ra.removeTarget(u))}(t,e)}catch(r){Oe(pl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Jm(t,r)}else if(e instanceof xm?t.Ra.Ye(e):e instanceof nI?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ut.min()))try{const r=await pI(t.localStore);n.compareTo(r)>=0&&await function(a,c){const u=a.Ra.Pt(c);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const p=a.Ta.get(f);p&&a.Ta.set(f,p.withResumeToken(h.resumeToken,c))}}),u.targetMismatches.forEach((h,f)=>{const p=a.Ta.get(h);if(!p)return;a.Ta.set(h,p.withResumeToken(Fn.EMPTY_BYTE_STRING,p.snapshotVersion)),xI(a,h);const y=new Xo(p.target,h,f,p.sequenceNumber);Yw(a,y)}),a.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){Oe(pl,"Failed to raise snapshot:",r),await Jm(t,r)}}async function Jm(t,e,n){if(!vu(e))throw e;t.Ia.add(1),await gh(t),t.Aa.set("Offline"),n||(n=()=>pI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Oe(pl,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await qp(t)})}function _I(t,e){return e().catch(n=>Jm(t,n,e))}async function Wp(t){const e=dt(t),n=ya(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Lw;for(;I$(e);)try{const s=await u$(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,A$(e,s)}catch(s){await Jm(e,s)}bI(e)&&EI(e)}function I$(t){return Tl(t)&&t.Pa.length<10}function A$(t,e){t.Pa.push(e);const n=ya(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function bI(t){return Tl(t)&&!ya(t).M_()&&t.Pa.length>0}function EI(t){ya(t).start()}async function k$(t){ya(t).na()}async function P$(t){const e=ya(t);for(const n of t.Pa)e.X_(n.mutations)}async function R$(t,e,n){const r=t.Pa.shift(),s=zw.from(r,e,n);await _I(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Wp(t)}async function D$(t,e){e&&ya(t).Z_&&await async function(r,s){if(function(c){return y5(c)&&c!==de.ABORTED}(s.code)){const a=r.Pa.shift();ya(r).N_(),await _I(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Wp(r)}}(t,e),bI(t)&&EI(t)}async function d1(t,e){const n=dt(t);n.asyncQueue.verifyOperationInProgress(),Oe(pl,"RemoteStore received new credentials");const r=Tl(n);n.Ia.add(3),await gh(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await qp(n)}async function O$(t,e){const n=dt(t);e?(n.Ia.delete(2),await qp(n)):e||(n.Ia.add(2),await gh(n),n.Aa.set("Unknown"))}function xu(t){return t.Va||(t.Va=function(n,r,s){const a=dt(n);return a.ia(),new x$(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Zo:S$.bind(null,t),e_:C$.bind(null,t),n_:j$.bind(null,t),J_:T$.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Jw(t)?Xw(t):t.Aa.set("Unknown")):(await t.Va.stop(),wI(t))})),t.Va}function ya(t){return t.ma||(t.ma=function(n,r,s){const a=dt(n);return a.ia(),new w$(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:k$.bind(null,t),n_:D$.bind(null,t),ea:P$.bind(null,t),ta:R$.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Wp(t)):(await t.ma.stop(),t.Pa.length>0&&(Oe(pl,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const c=Date.now()+r,u=new Zw(e,n,c,s,a);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ie(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function e0(t,e){if(Zi("AsyncQueue",`${e}: ${t}`),vu(t))return new Ie(de.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{static emptySet(e){return new Ic(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ge.comparator(n.key,r.key):(n,r)=>Ge.comparator(n.key,r.key),this.keyedMap=dd(),this.sortedSet=new hn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ic)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ic;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(){this.fa=new hn(Ge.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):st(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class ru{constructor(e,n,r,s,a,c,u,h,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,s,a){const c=[];return n.forEach(u=>{c.push({type:0,doc:u})}),new ru(e,n,Ic.emptySet(n),c,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class M${constructor(){this.queries=f1(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=dt(n),a=s.queries;s.queries=f1(),a.forEach((c,u)=>{for(const h of u.wa)h.onError(r)})})(this,new Ie(de.ABORTED,"Firestore shutting down"))}}function f1(){return new jl(t=>BT(t),Mp)}async function t0(t,e){const n=dt(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.Sa()&&e.ba()&&(r=2):(a=new L$,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await n.onListen(s,!0);break;case 1:a.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(c){const u=e0(c,`Initialization of query '${vc(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,a),a.wa.push(e),e.va(n.onlineState),a.ya&&e.Ca(a.ya)&&r0(n)}async function n0(t,e){const n=dt(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const c=a.wa.indexOf(e);c>=0&&(a.wa.splice(c,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function F$(t,e){const n=dt(t);let r=!1;for(const s of e){const a=s.query,c=n.queries.get(a);if(c){for(const u of c.wa)u.Ca(s)&&(r=!0);c.ya=s}}r&&r0(n)}function V$(t,e,n){const r=dt(t),s=r.queries.get(e);if(s)for(const a of s.wa)a.onError(n);r.queries.delete(e)}function r0(t){t.Da.forEach(e=>{e.next()})}var Rx,m1;(m1=Rx||(Rx={})).Fa="default",m1.Cache="cache";class s0{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ru(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=ru.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Rx.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.key=e}}class SI{constructor(e){this.key=e}}class U${constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=wt(),this.mutatedKeys=wt(),this.Xa=qT(e),this.eu=new Ic(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new h1,s=n?n.eu:this.eu;let a=n?n.mutatedKeys:this.mutatedKeys,c=s,u=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,y)=>{const v=s.get(p),x=Fp(this.query,y)?y:null,E=!!v&&this.mutatedKeys.has(v.key),w=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let b=!1;v&&x?v.data.isEqual(x.data)?E!==w&&(r.track({type:3,doc:x}),b=!0):this.iu(v,x)||(r.track({type:2,doc:x}),b=!0,(h&&this.Xa(x,h)>0||f&&this.Xa(x,f)<0)&&(u=!0)):!v&&x?(r.track({type:0,doc:x}),b=!0):v&&!x&&(r.track({type:1,doc:v}),b=!0,(h||f)&&(u=!0)),b&&(x?(c=c.add(x),a=w?a.add(p):a.delete(p)):(c=c.delete(p),a=a.delete(p)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const p=this.query.limitType==="F"?c.last():c.first();c=c.delete(p.key),a=a.delete(p.key),r.track({type:1,doc:p})}return{eu:c,ru:r,Ds:u,mutatedKeys:a}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((p,y)=>function(x,E){const w=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st(20277,{At:b})}};return w(x)-w(E)}(p.type,y.type)||this.Xa(p.doc,y.doc)),this.su(r),s=s!=null&&s;const u=n&&!s?this.ou():[],h=this.Za.size===0&&this.current&&!s?1:0,f=h!==this.Ya;return this.Ya=h,c.length!==0||f?{snapshot:new ru(this.query,e.eu,a,c,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new h1,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=wt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new SI(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new NI(r))}),n}uu(e){this.Ha=e.qs,this.Za=wt();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return ru.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const i0="SyncEngine";class $${constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class z${constructor(e){this.key=e,this.lu=!1}}class B${constructor(e,n,r,s,a,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new jl(u=>BT(u),Mp),this.Tu=new Map,this.Iu=new Set,this.du=new hn(Ge.comparator),this.Eu=new Map,this.Au=new Ww,this.Ru={},this.Vu=new Map,this.mu=nu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function q$(t,e,n=!0){const r=kI(t);let s;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await CI(r,e,n,!0),s}async function W$(t,e){const n=kI(t);await CI(n,e,!0,!1)}async function CI(t,e,n,r){const s=await d$(t.localStore,ui(e)),a=s.targetId,c=t.sharedClientState.addLocalQueryTarget(a,n);let u;return r&&(u=await H$(t,e,a,c==="current",s.resumeToken)),t.isPrimaryClient&&n&&vI(t.remoteStore,s),u}async function H$(t,e,n,r,s){t.gu=(y,v,x)=>async function(w,b,A,j){let T=b.view.nu(A);T.Ds&&(T=await o1(w.localStore,b.query,!1).then(({documents:R})=>b.view.nu(R,T)));const M=j&&j.targetChanges.get(b.targetId),$=j&&j.targetMismatches.get(b.targetId)!=null,z=b.view.applyChanges(T,w.isPrimaryClient,M,$);return g1(w,b.targetId,z._u),z.snapshot}(t,y,v,x);const a=await o1(t.localStore,e,!0),c=new U$(e,a.qs),u=c.nu(a.documents),h=ph.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),f=c.applyChanges(u,t.isPrimaryClient,h);g1(t,n,f._u);const p=new $$(e,n,c);return t.Pu.set(e,p),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),f.snapshot}async function K$(t,e,n){const r=dt(t),s=r.Pu.get(e),a=r.Tu.get(s.targetId);if(a.length>1)return r.Tu.set(s.targetId,a.filter(c=>!Mp(c,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await kx(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Qw(r.remoteStore,s.targetId),Dx(r,s.targetId)}).catch(yu)):(Dx(r,s.targetId),await kx(r.localStore,s.targetId,!0))}async function G$(t,e){const n=dt(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qw(n.remoteStore,r.targetId))}async function Q$(t,e,n){const r=nz(t);try{const s=await function(c,u){const h=dt(c),f=pt.now(),p=u.reduce((x,E)=>x.add(E.key),wt());let y,v;return h.persistence.runTransaction("Locally write mutations","readwrite",x=>{let E=eo(),w=wt();return h.Os.getEntries(x,p).next(b=>{E=b,E.forEach((A,j)=>{j.isValidDocument()||(w=w.add(A))})}).next(()=>h.localDocuments.getOverlayedDocuments(x,E)).next(b=>{y=b;const A=[];for(const j of u){const T=h5(j,y.get(j.key).overlayedDocument);T!=null&&A.push(new ba(j.key,T,OT(T.value.mapValue),pr.exists(!0)))}return h.mutationQueue.addMutationBatch(x,f,A,u)}).next(b=>{v=b;const A=b.applyToLocalDocumentSet(y,w);return h.documentOverlayCache.saveOverlays(x,b.batchId,A)})}).then(()=>({batchId:v.batchId,changes:HT(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(c,u,h){let f=c.Ru[c.currentUser.toKey()];f||(f=new hn(yt)),f=f.insert(u,h),c.Ru[c.currentUser.toKey()]=f}(r,s.batchId,n),await yh(r,s.changes),await Wp(r.remoteStore)}catch(s){const a=e0(s,"Failed to persist write");n.reject(a)}}async function jI(t,e){const n=dt(t);try{const r=await l$(n.localStore,e);e.targetChanges.forEach((s,a)=>{const c=n.Eu.get(a);c&&(Lt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.lu=!0:s.modifiedDocuments.size>0?Lt(c.lu,14607):s.removedDocuments.size>0&&(Lt(c.lu,42227),c.lu=!1))}),await yh(n,r,e)}catch(r){await yu(r)}}function p1(t,e,n){const r=dt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((a,c)=>{const u=c.view.va(e);u.snapshot&&s.push(u.snapshot)}),function(c,u){const h=dt(c);h.onlineState=u;let f=!1;h.queries.forEach((p,y)=>{for(const v of y.wa)v.va(u)&&(f=!0)}),f&&r0(h)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Y$(t,e,n){const r=dt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),a=s&&s.key;if(a){let c=new hn(Ge.comparator);c=c.insert(a,er.newNoDocument(a,ut.min()));const u=wt().add(a),h=new zp(ut.min(),new Map,new hn(yt),c,u);await jI(r,h),r.du=r.du.remove(a),r.Eu.delete(e),o0(r)}else await kx(r.localStore,e,!1).then(()=>Dx(r,e,n)).catch(yu)}async function X$(t,e){const n=dt(t),r=e.batch.batchId;try{const s=await a$(n.localStore,e);II(n,r,null),TI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await yh(n,s)}catch(s){await yu(s)}}async function J$(t,e,n){const r=dt(t);try{const s=await function(c,u){const h=dt(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let p;return h.mutationQueue.lookupMutationBatch(f,u).next(y=>(Lt(y!==null,37113),p=y.keys(),h.mutationQueue.removeMutationBatch(f,y))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,p,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p)).next(()=>h.localDocuments.getDocuments(f,p))})}(r.localStore,e);II(r,e,n),TI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await yh(r,s)}catch(s){await yu(s)}}function TI(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function II(t,e,n){const r=dt(t);let s=r.Ru[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function Dx(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||AI(t,r)})}function AI(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Qw(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),o0(t))}function g1(t,e,n){for(const r of n)r instanceof NI?(t.Au.addReference(r.key,e),Z$(t,r)):r instanceof SI?(Oe(i0,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||AI(t,r.key)):st(19791,{yu:r})}function Z$(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(Oe(i0,"New document in limbo: "+n),t.Iu.add(r),o0(t))}function o0(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Ge(Bt.fromString(e)),r=t.mu.next();t.Eu.set(r,new z$(n)),t.du=t.du.insert(n,r),vI(t.remoteStore,new Xo(ui(Lp(n.path)),r,"TargetPurposeLimboResolution",Rp.ue))}}async function yh(t,e,n){const r=dt(t),s=[],a=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach((u,h)=>{c.push(r.gu(h,e,n).then(f=>{var p;if((f||n)&&r.isPrimaryClient){const y=f?!f.fromCache:(p=n==null?void 0:n.targetChanges.get(h.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(f){s.push(f);const y=Kw.Es(h.targetId,f);a.push(y)}}))}),await Promise.all(c),r.hu.J_(s),await async function(h,f){const p=dt(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>he.forEach(f,v=>he.forEach(v.Is,x=>p.persistence.referenceDelegate.addReference(y,v.targetId,x)).next(()=>he.forEach(v.ds,x=>p.persistence.referenceDelegate.removeReference(y,v.targetId,x)))))}catch(y){if(!vu(y))throw y;Oe(Gw,"Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const x=p.Fs.get(v),E=x.snapshotVersion,w=x.withLastLimboFreeSnapshotVersion(E);p.Fs=p.Fs.insert(v,w)}}}(r.localStore,a))}async function ez(t,e){const n=dt(t);if(!n.currentUser.isEqual(e)){Oe(i0,"User change. New user:",e.toKey());const r=await mI(n.localStore,e);n.currentUser=e,function(a,c){a.Vu.forEach(u=>{u.forEach(h=>{h.reject(new Ie(de.CANCELLED,c))})}),a.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await yh(n,r.Bs)}}function tz(t,e){const n=dt(t),r=n.Eu.get(e);if(r&&r.lu)return wt().add(r.key);{let s=wt();const a=n.Tu.get(e);if(!a)return s;for(const c of a){const u=n.Pu.get(c);s=s.unionWith(u.view.tu)}return s}}function kI(t){const e=dt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Y$.bind(null,e),e.hu.J_=F$.bind(null,e.eventManager),e.hu.pu=V$.bind(null,e.eventManager),e}function nz(t){const e=dt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=X$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=J$.bind(null,e),e}class Zm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bp(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return o$(this.persistence,new r$,e.initialUser,this.serializer)}Du(e){return new fI(Hw.Vi,this.serializer)}bu(e){return new f$}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zm.provider={build:()=>new Zm};class rz extends Zm{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Lt(this.persistence.referenceDelegate instanceof Xm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new z5(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Ar.withCacheSize(this.cacheSizeBytes):Ar.DEFAULT;return new fI(r=>Xm.Vi(r,n),this.serializer)}}class Ox{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>p1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ez.bind(null,this.syncEngine),await O$(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new M$}()}createDatastore(e){const n=Bp(e.databaseInfo.databaseId),r=function(a){return new v$(a)}(e.databaseInfo);return function(a,c,u,h){return new b$(a,c,u,h)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,c,u){return new N$(r,s,a,c,u)}(this.localStore,this.datastore,e.asyncQueue,n=>p1(this.syncEngine,n,0),function(){return c1.C()?new c1:new m$}())}createSyncEngine(e,n){return function(s,a,c,u,h,f,p){const y=new B$(s,a,c,u,h,f);return p&&(y.fu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=dt(s);Oe(pl,"RemoteStore shutting down."),a.Ia.add(5),await gh(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ox.provider={build:()=>new Ox};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Zi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="FirestoreClient";class sz{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ir.UNAUTHENTICATED,this.clientId=kp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{Oe(va,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Oe(va,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=e0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function cv(t,e){t.asyncQueue.verifyOperationInProgress(),Oe(va,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await mI(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{ha("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{Oe("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{ha("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function y1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await iz(t);Oe(va,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>d1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>d1(e.remoteStore,s)),t._onlineComponents=e}async function iz(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Oe(va,"Using user provided OfflineComponentProvider");try{await cv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===de.FAILED_PRECONDITION||s.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ha("Error using user provided cache. Falling back to memory cache: "+n),await cv(t,new Zm)}}else Oe(va,"Using default OfflineComponentProvider"),await cv(t,new rz(void 0));return t._offlineComponents}async function PI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Oe(va,"Using user provided OnlineComponentProvider"),await y1(t,t._uninitializedComponentsProvider._online)):(Oe(va,"Using default OnlineComponentProvider"),await y1(t,new Ox))),t._onlineComponents}function oz(t){return PI(t).then(e=>e.syncEngine)}async function ep(t){const e=await PI(t),n=e.eventManager;return n.onListen=q$.bind(null,e.syncEngine),n.onUnlisten=K$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=W$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=G$.bind(null,e.syncEngine),n}function az(t,e,n={}){const r=new Ki;return t.asyncQueue.enqueueAndForget(async()=>function(a,c,u,h,f){const p=new a0({next:v=>{p.Ou(),c.enqueueAndForget(()=>n0(a,y));const x=v.docs.has(u);!x&&v.fromCache?f.reject(new Ie(de.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&v.fromCache&&h&&h.source==="server"?f.reject(new Ie(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new s0(Lp(u.path),p,{includeMetadataChanges:!0,ka:!0});return t0(a,y)}(await ep(t),t.asyncQueue,e,n,r)),r.promise}function lz(t,e,n={}){const r=new Ki;return t.asyncQueue.enqueueAndForget(async()=>function(a,c,u,h,f){const p=new a0({next:v=>{p.Ou(),c.enqueueAndForget(()=>n0(a,y)),v.fromCache&&h.source==="server"?f.reject(new Ie(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new s0(u,p,{includeMetadataChanges:!0,ka:!0});return t0(a,y)}(await ep(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cz="firestore.googleapis.com",x1=!0;class w1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cz,this.ssl=x1}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:x1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<hI)throw new Ie(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ie(de.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ie(de.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ie(de.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ie(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ie(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new bT;switch(r.type){case"firstParty":return new _6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ie(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=v1.get(n);r&&(Oe("ComponentProvider","Removing Datastore"),v1.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yi(this.firestore,e,this._query)}}class cn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}toJSON(){return{type:cn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(fh(n,cn._jsonSchema))return new cn(e,r||null,new Ge(Bt.fromString(n.referencePath)))}}cn._jsonSchemaVersion="firestore/documentReference/1.0",cn._jsonSchema={type:En("string",cn._jsonSchemaVersion),referencePath:En("string")};class Gi extends yi{constructor(e,n,r){super(e,n,Lp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new Ge(e))}withConverter(e){return new Gi(this.firestore,e,this._path)}}function Fe(t,e,...n){if(t=sn(t),Ow("collection","path",e),t instanceof Hp){const r=Bt.fromString(e,...n);return RN(r),new Gi(t,null,r)}{if(!(t instanceof cn||t instanceof Gi))throw new Ie(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Bt.fromString(e,...n));return RN(r),new Gi(t.firestore,null,r)}}function Rr(t,e){if(t=sr(t,Hp),Ow("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ie(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new yi(t,null,function(r){return new Cl(Bt.emptyPath(),r)}(e))}function gt(t,e,...n){if(t=sn(t),arguments.length===1&&(e=kp.newId()),Ow("doc","path",e),t instanceof Hp){const r=Bt.fromString(e,...n);return PN(r),new cn(t,null,new Ge(r))}{if(!(t instanceof cn||t instanceof Gi))throw new Ie(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Bt.fromString(e,...n));return PN(r),new cn(t.firestore,t instanceof Gi?t.converter:null,new Ge(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="AsyncQueue";class b1{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new gI(this,"async_queue_retry"),this.oc=()=>{const r=lv();r&&Oe(_1,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=lv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=lv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Ki;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!vu(e))throw e;Oe(_1,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Zi("INTERNAL UNHANDLED ERROR: ",E1(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Zw.createAndSchedule(this,e,n,r,a=>this.lc(a));return this.ec.push(s),s}ac(){this.tc&&st(47125,{hc:E1(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function E1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class zs extends Hp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new b1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new b1(e),this._firestoreClient=void 0,await e}}}function DI(t,e,n){n||(n=Hm);const r=El(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),a=r.getOptions(n);if(hl(a,e))return s;throw new Ie(de.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Ie(de.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<hI)throw new Ie(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&_l(e.host)&&bw(e.host),r.initialize({options:e,instanceIdentifier:n})}function wu(t){if(t._terminated)throw new Ie(de.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||uz(t),t._firestoreClient}function uz(t){var e,n,r;const s=t._freezeSettings(),a=function(u,h,f,p){return new L6(u,h,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,RI(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new sz(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hr(Fn.fromBase64String(e))}catch(n){throw new Ie(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Hr(Fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fh(e,Hr._jsonSchema))return Hr.fromBase64String(e.bytes)}}Hr._jsonSchemaVersion="firestore/bytes/1.0",Hr._jsonSchema={type:En("string",Hr._jsonSchemaVersion),bytes:En("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ie(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function OI(){return new Il(wx)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ie(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ie(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return yt(this._lat,e._lat)||yt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ds._jsonSchemaVersion}}static fromJSON(e){if(fh(e,Ds._jsonSchema))return new Ds(e.latitude,e.longitude)}}Ds._jsonSchemaVersion="firestore/geoPoint/1.0",Ds._jsonSchema={type:En("string",Ds._jsonSchemaVersion),latitude:En("number"),longitude:En("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Os._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fh(e,Os._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Os(e.vectorValues);throw new Ie(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Os._jsonSchemaVersion="firestore/vectorValue/1.0",Os._jsonSchema={type:En("string",Os._jsonSchemaVersion),vectorValues:En("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dz=/^__.*__$/;class hz{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ba(e,this.data,this.fieldMask,n,this.fieldTransforms):new mh(e,this.data,n,this.fieldTransforms)}}class LI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ba(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function MI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st(40011,{Ec:t})}}class l0{constructor(e,n,r,s,a,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new l0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return tp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(MI(this.Ec)&&dz.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class fz{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bp(e)}Dc(e,n,r,s=!1){return new l0({Ec:e,methodName:n,bc:r,path:Ln.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xh(t){const e=t._freezeSettings(),n=Bp(t._databaseId);return new fz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function c0(t,e,n,r,s,a={}){const c=t.Dc(a.merge||a.mergeFields?2:0,e,n,s);d0("Data must be an object, but it was:",c,r);const u=UI(r,c);let h,f;if(a.merge)h=new Kr(c.fieldMask),f=c.fieldTransforms;else if(a.mergeFields){const p=[];for(const y of a.mergeFields){const v=Lx(e,y,n);if(!c.contains(v))throw new Ie(de.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);zI(p,v)||p.push(v)}h=new Kr(p),f=c.fieldTransforms.filter(y=>h.covers(y.field))}else h=null,f=c.fieldTransforms;return new hz(new Pr(u),h,f)}class Kp extends vh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kp}}class u0 extends vh{_toFieldTransform(e){return new l5(e.path,new qd)}isEqual(e){return e instanceof u0}}function FI(t,e,n,r){const s=t.Dc(1,e,n);d0("Data must be an object, but it was:",s,r);const a=[],c=Pr.empty();_a(r,(h,f)=>{const p=h0(e,h,n);f=sn(f);const y=s.gc(p);if(f instanceof Kp)a.push(p);else{const v=wh(f,y);v!=null&&(a.push(p),c.set(p,v))}});const u=new Kr(a);return new LI(c,u,s.fieldTransforms)}function VI(t,e,n,r,s,a){const c=t.Dc(1,e,n),u=[Lx(e,r,n)],h=[s];if(a.length%2!=0)throw new Ie(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)u.push(Lx(e,a[v])),h.push(a[v+1]);const f=[],p=Pr.empty();for(let v=u.length-1;v>=0;--v)if(!zI(f,u[v])){const x=u[v];let E=h[v];E=sn(E);const w=c.gc(x);if(E instanceof Kp)f.push(x);else{const b=wh(E,w);b!=null&&(f.push(x),p.set(x,b))}}const y=new Kr(f);return new LI(p,y,c.fieldTransforms)}function mz(t,e,n,r=!1){return wh(n,t.Dc(r?4:3,e))}function wh(t,e){if($I(t=sn(t)))return d0("Unsupported field value:",e,t),UI(t,e);if(t instanceof vh)return function(r,s){if(!MI(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const a=[];let c=0;for(const u of r){let h=wh(u,s.yc(c));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),c++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=sn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return i5(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=pt.fromDate(r);return{timestampValue:Ym(s.serializer,a)}}if(r instanceof pt){const a=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ym(s.serializer,a)}}if(r instanceof Ds)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hr)return{bytesValue:sI(s.serializer,r._byteString)};if(r instanceof cn){const a=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw s.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:qw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Os)return function(c,u){return{mapValue:{fields:{[RT]:{stringValue:DT},[Km]:{arrayValue:{values:c.toArray().map(f=>{if(typeof f!="number")throw u.wc("VectorValues must only contain numeric values.");return $w(u.serializer,f)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${Pp(r)}`)}(t,e)}function UI(t,e){const n={};return jT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_a(t,(r,s)=>{const a=wh(s,e.Vc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function $I(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof Ds||t instanceof Hr||t instanceof cn||t instanceof vh||t instanceof Os)}function d0(t,e,n){if(!$I(n)||!ST(n)){const r=Pp(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Lx(t,e,n){if((e=sn(e))instanceof Il)return e._internalPath;if(typeof e=="string")return h0(t,e);throw tp("Field path arguments must be of type string or ",t,!1,void 0,n)}const pz=new RegExp("[~\\*/\\[\\]]");function h0(t,e,n){if(e.search(pz)>=0)throw tp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Il(...e.split("."))._internalPath}catch{throw tp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tp(t,e,n,r,s){const a=r&&!r.isEmpty(),c=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(a||c)&&(h+=" (found",a&&(h+=` in field ${r}`),c&&(h+=` in document ${s}`),h+=")"),new Ie(de.INVALID_ARGUMENT,u+t+h)}function zI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Gp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gz extends BI{data(){return super.data()}}function Gp(t,e){return typeof e=="string"?h0(t,e):e instanceof Il?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ie(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class f0{}class m0 extends f0{}function nn(t,e,...n){let r=[];e instanceof f0&&r.push(e),r=r.concat(n),function(a){const c=a.filter(h=>h instanceof Qp).length,u=a.filter(h=>h instanceof _h).length;if(c>1||c>0&&u>0)throw new Ie(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class _h extends m0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new _h(e,n,r)}_apply(e){const n=this._parse(e);return WI(e._query,n),new yi(e.firestore,e.converter,Sx(e._query,n))}_parse(e){const n=xh(e.firestore);return function(a,c,u,h,f,p,y){let v;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Ie(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){C1(y,p);const E=[];for(const w of y)E.push(S1(h,a,w));v={arrayValue:{values:E}}}else v=S1(h,a,y)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||C1(y,p),v=mz(u,c,y,p==="in"||p==="not-in");return bn.create(f,p,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function sa(t,e,n){const r=e,s=Gp("where",t);return _h._create(s,r,n)}class Qp extends f0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Qp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:$s.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let c=s;const u=a.getFlattenedFilters();for(const h of u)WI(c,h),c=Sx(c,h)}(e._query,n),new yi(e.firestore,e.converter,Sx(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Yp extends m0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Yp(e,n)}_apply(e){const n=function(s,a,c){if(s.startAt!==null)throw new Ie(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ie(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bd(a,c)}(e._query,this._field,this._direction);return new yi(e.firestore,e.converter,function(s,a){const c=s.explicitOrderBy.concat([a]);return new Cl(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function io(t,e="asc"){const n=e,r=Gp("orderBy",t);return Yp._create(r,n)}function S1(t,e,n){if(typeof(n=sn(n))=="string"){if(n==="")throw new Ie(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zT(e)&&n.indexOf("/")!==-1)throw new Ie(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Bt.fromString(n));if(!Ge.isDocumentKey(r))throw new Ie(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $N(t,new Ge(r))}if(n instanceof cn)return $N(t,n._key);throw new Ie(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pp(n)}.`)}function C1(t,e){if(!Array.isArray(t)||t.length===0)throw new Ie(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WI(t,e){const n=function(s,a){for(const c of s)for(const u of c.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ie(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ie(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class HI{convertValue(e,n="none"){switch(ga(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(pa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw st(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return _a(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,s;const a=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Km].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(c=>yn(c.doubleValue));return new Os(a)}convertGeoPoint(e){return new Ds(yn(e.latitude),yn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Op(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp($d(e));default:return null}}convertTimestamp(e){const n=ma(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Bt.fromString(e);Lt(uI(r),9688,{name:e});const s=new Zc(r.get(1),r.get(3)),a=new Ge(r.popFirst(5));return s.isEqual(n)||Zi(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class bc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ia extends BI{constructor(e,n,r,s,a,c){super(e,n,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Nd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Gp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ia._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ia._jsonSchemaVersion="firestore/documentSnapshot/1.0",ia._jsonSchema={type:En("string",ia._jsonSchemaVersion),bundleSource:En("string","DocumentSnapshot"),bundleName:En("string"),bundle:En("string")};class Nd extends ia{data(e={}){return super.data(e)}}class oa{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new bc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Nd(this._firestore,this._userDataWriter,r.key,r,new bc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ie(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(u=>{const h=new Nd(s._firestore,s._userDataWriter,u.doc.key,u.doc,new bc(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>a||u.type!==3).map(u=>{const h=new Nd(s._firestore,s._userDataWriter,u.doc.key,u.doc,new bc(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,p=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),p=c.indexOf(u.doc.key)),{type:yz(u.type),doc:h,oldIndex:f,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=oa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=kp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function yz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(t){t=sr(t,cn);const e=sr(t.firestore,zs);return az(wu(e),t._key).then(n=>QI(e,t,n))}oa._jsonSchemaVersion="firestore/querySnapshot/1.0",oa._jsonSchema={type:En("string",oa._jsonSchemaVersion),bundleSource:En("string","QuerySnapshot"),bundleName:En("string"),bundle:En("string")};class g0 extends HI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,n)}}function lt(t){t=sr(t,yi);const e=sr(t.firestore,zs),n=wu(e),r=new g0(e);return qI(t._query),lz(n,t._query).then(s=>new oa(e,r,t,s))}function GI(t,e,n){t=sr(t,cn);const r=sr(t.firestore,zs),s=p0(t.converter,e,n);return _u(r,[c0(xh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,pr.none())])}function zt(t,e,n,...r){t=sr(t,cn);const s=sr(t.firestore,zs),a=xh(s);let c;return c=typeof(e=sn(e))=="string"||e instanceof Il?VI(a,"updateDoc",t._key,e,n,r):FI(a,"updateDoc",t._key,e),_u(s,[c.toMutation(t._key,pr.exists(!0))])}function nr(t){return _u(sr(t.firestore,zs),[new $p(t._key,pr.none())])}function pn(t,e){const n=sr(t.firestore,zs),r=gt(t),s=p0(t.converter,e);return _u(n,[c0(xh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,pr.exists(!1))]).then(()=>r)}function vi(t,...e){var n,r,s;t=sn(t);let a={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||N1(e[c])||(a=e[c++]);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(N1(e[c])){const y=e[c];e[c]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[c+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[c+2]=(s=y.complete)===null||s===void 0?void 0:s.bind(y)}let h,f,p;if(t instanceof cn)f=sr(t.firestore,zs),p=Lp(t._key.path),h={next:y=>{e[c]&&e[c](QI(f,t,y))},error:e[c+1],complete:e[c+2]};else{const y=sr(t,yi);f=sr(y.firestore,zs),p=y._query;const v=new g0(f);h={next:x=>{e[c]&&e[c](new oa(f,v,y,x))},error:e[c+1],complete:e[c+2]},qI(t._query)}return function(v,x,E,w){const b=new a0(w),A=new s0(x,b,E);return v.asyncQueue.enqueueAndForget(async()=>t0(await ep(v),A)),()=>{b.Ou(),v.asyncQueue.enqueueAndForget(async()=>n0(await ep(v),A))}}(wu(f),p,u,h)}function _u(t,e){return function(r,s){const a=new Ki;return r.asyncQueue.enqueueAndForget(async()=>Q$(await oz(r),s,a)),a.promise}(wu(t),e)}function QI(t,e,n){const r=n.docs.get(e._key),s=new g0(t);return new ia(t,s,e._key,r,new bc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=xh(e)}set(e,n,r){this._verifyNotCommitted();const s=uv(e,this._firestore),a=p0(s.converter,n,r),c=c0(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(c.toMutation(s._key,pr.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const a=uv(e,this._firestore);let c;return c=typeof(n=sn(n))=="string"||n instanceof Il?VI(this._dataReader,"WriteBatch.update",a._key,n,r,s):FI(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(c.toMutation(a._key,pr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=uv(e,this._firestore);return this._mutations=this._mutations.concat(new $p(n._key,pr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ie(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function uv(t,e){if((t=sn(t)).firestore!==e)throw new Ie(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function np(){return new u0("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(t){return wu(t=sr(t,zs)),new YI(t,e=>_u(t,e))}(function(e,n=!0){(function(s){gu=s})(Nl),Vs(new hs("firestore",(r,{instanceIdentifier:s,options:a})=>{const c=r.getProvider("app").getImmediate(),u=new zs(new x6(r.getProvider("auth-internal")),new b6(c,r.getProvider("app-check-internal")),function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ie(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zc(f.options.projectId,p)}(c,s),c);return a=Object.assign({useFetchStreams:n},a),u._setSettings(a),u},"PUBLIC").setMultipleInstances(!0)),Dr(TN,IN,e),Dr(TN,IN,"esm2017")})();const vz=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:HI,Bytes:Hr,CollectionReference:Gi,DocumentReference:cn,DocumentSnapshot:ia,FieldPath:Il,FieldValue:vh,Firestore:zs,FirestoreError:Ie,GeoPoint:Ds,Query:yi,QueryCompositeFilterConstraint:Qp,QueryConstraint:m0,QueryDocumentSnapshot:Nd,QueryFieldFilterConstraint:_h,QueryOrderByConstraint:Yp,QuerySnapshot:oa,SnapshotMetadata:bc,Timestamp:pt,VectorValue:Os,WriteBatch:YI,_AutoId:kp,_ByteString:Fn,_DatabaseId:Zc,_DocumentKey:Ge,_EmptyAuthCredentialsProvider:bT,_FieldPath:Ln,_cast:sr,_logWarn:ha,_validateIsNotUsedTogether:NT,addDoc:pn,collection:Fe,collectionGroup:Rr,deleteDoc:nr,doc:gt,documentId:OI,ensureFirestoreConfigured:wu,executeWrite:_u,getDoc:KI,getDocs:lt,initializeFirestore:DI,onSnapshot:vi,orderBy:io,query:nn,serverTimestamp:np,setDoc:GI,updateDoc:zt,where:sa,writeBatch:y0},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI="firebasestorage.googleapis.com",xz="storageBucket",wz=2*60*1e3,_z=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends Bs{constructor(e,n,r=0){super(dv(e),`Firebase Storage: ${n} (${dv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return dv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var mi;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(mi||(mi={}));function dv(t){return"storage/"+t}function bz(){const t="An unknown error occurred, please check the error payload for server response.";return new xi(mi.UNKNOWN,t)}function Ez(){return new xi(mi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Nz(){return new xi(mi.CANCELED,"User canceled the upload/download.")}function Sz(t){return new xi(mi.INVALID_URL,"Invalid URL '"+t+"'.")}function Cz(t){return new xi(mi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function j1(t){return new xi(mi.INVALID_ARGUMENT,t)}function JI(){return new xi(mi.APP_DELETED,"The Firebase app was deleted.")}function jz(t){return new xi(mi.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ks.makeFromUrl(e,n)}catch{return new ks(e,"")}if(r.path==="")return r;throw Cz(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+s+c,"i"),h={bucket:1,path:3};function f(M){M.path_=decodeURIComponent(M.path)}const p="v[A-Za-z0-9_]+",y=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",x=new RegExp(`^https?://${y}/${p}/b/${s}/o${v}`,"i"),E={bucket:1,path:3},w=n===XI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",A=new RegExp(`^https?://${w}/${s}/${b}`,"i"),T=[{regex:u,indices:h,postModify:a},{regex:x,indices:E,postModify:f},{regex:A,indices:{bucket:1,path:2},postModify:f}];for(let M=0;M<T.length;M++){const $=T[M],z=$.regex.exec(e);if(z){const R=z[$.indices.bucket];let I=z[$.indices.path];I||(I=""),r=new ks(R,I),$.postModify(r);break}}if(r==null)throw Sz(e);return r}}class Tz{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iz(t,e,n){let r=1,s=null,a=null,c=!1,u=0;function h(){return u===2}let f=!1;function p(...b){f||(f=!0,e.apply(null,b))}function y(b){s=setTimeout(()=>{s=null,t(x,h())},b)}function v(){a&&clearTimeout(a)}function x(b,...A){if(f){v();return}if(b){v(),p.call(null,b,...A);return}if(h()||c){v(),p.call(null,b,...A);return}r<64&&(r*=2);let T;u===1?(u=2,T=0):T=(r+Math.random())*1e3,y(T)}let E=!1;function w(b){E||(E=!0,v(),!f&&(s!==null?(b||(u=2),clearTimeout(s),y(0)):b||(u=1)))}return y(0),a=setTimeout(()=>{c=!0,w(!0)},n),w}function Az(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kz(t){return t!==void 0}function T1(t,e,n,r){if(r<e)throw j1(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw j1(`Invalid value for '${t}'. Expected ${n} or less.`)}function Pz(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var rp;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(rp||(rp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rz(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dz{constructor(e,n,r,s,a,c,u,h,f,p,y,v=!0,x=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,w)=>{this.resolve_=E,this.reject_=w,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Jf(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const c=u=>{const h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const u=a.getErrorCode()===rp.NO_ERROR,h=a.getStatus();if(!u||Rz(h,this.additionalRetryCodes_)&&this.retry){const p=a.getErrorCode()===rp.ABORT;r(!1,new Jf(!1,null,p));return}const f=this.successCodes_.indexOf(h)!==-1;r(!0,new Jf(f,a))})},n=(r,s)=>{const a=this.resolve_,c=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());kz(h)?a(h):a()}catch(h){c(h)}else if(u!==null){const h=bz();h.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,h)):c(h)}else if(s.canceled){const h=this.appDelete_?JI():Nz();c(h)}else{const h=Ez();c(h)}};this.canceled_?n(!1,new Jf(!1,null,!0)):this.backoffId_=Iz(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Az(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Jf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Oz(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Lz(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Mz(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Fz(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Vz(t,e,n,r,s,a,c=!0,u=!1){const h=Pz(t.urlParams),f=t.url+h,p=Object.assign({},t.headers);return Mz(p,e),Oz(p,n),Lz(p,a),Fz(p,r),new Dz(f,t.method,p,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,c,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uz(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function $z(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,n){this._service=e,n instanceof ks?this._location=n:this._location=ks.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new sp(e,n)}get root(){const e=new ks(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $z(this._location.path)}get storage(){return this._service}get parent(){const e=Uz(this._location.path);if(e===null)return null;const n=new ks(this._location.bucket,e);return new sp(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw jz(e)}}function I1(t,e){const n=e==null?void 0:e[xz];return n==null?null:ks.makeFromBucketSpec(n,t)}function zz(t,e,n,r={}){t.host=`${e}:${n}`;const s=_l(e);s&&(bw(`https://${t.host}/b`),jj("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:kF(a,t.app.options.projectId))}class Bz{constructor(e,n,r,s,a,c=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=c,this._bucket=null,this._host=XI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=wz,this._maxUploadRetryTime=_z,this._requests=new Set,s!=null?this._bucket=ks.makeFromBucketSpec(s,this._host):this._bucket=I1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ks.makeFromBucketSpec(this._url,e):this._bucket=I1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){T1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){T1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(os(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new sp(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new Tz(JI());{const c=Vz(e,this._appId,r,s,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const A1="@firebase/storage",k1="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="storage";function qz(t=Sw(),e){t=sn(t);const r=El(t,ZI).getImmediate({identifier:e}),s=IF("storage");return s&&Wz(r,...s),r}function Wz(t,e,n,r={}){zz(t,e,n,r)}function Hz(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Bz(n,r,s,e,Nl)}function Kz(){Vs(new hs(ZI,Hz,"PUBLIC").setMultipleInstances(!0)),Dr(A1,k1,""),Dr(A1,k1,"esm2017")}Kz();const eA="@firebase/installations",v0="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=1e4,nA=`w:${v0}`,rA="FIS_v2",Gz="https://firebaseinstallations.googleapis.com/v1",Qz=60*60*1e3,Yz="installations",Xz="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jz={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},gl=new bl(Yz,Xz,Jz);function sA(t){return t instanceof Bs&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA({projectId:t}){return`${Gz}/projects/${t}/installations`}function oA(t){return{token:t.token,requestStatus:2,expiresIn:e9(t.expiresIn),creationTime:Date.now()}}async function aA(t,e){const r=(await e.json()).error;return gl.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function lA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Zz(t,{refreshToken:e}){const n=lA(t);return n.append("Authorization",t9(e)),n}async function cA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function e9(t){return Number(t.replace("s","000"))}function t9(t){return`${rA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n9({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=iA(t),s=lA(t),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const c={fid:n,authVersion:rA,appId:t.appId,sdkVersion:nA},u={method:"POST",headers:s,body:JSON.stringify(c)},h=await cA(()=>fetch(r,u));if(h.ok){const f=await h.json();return{fid:f.fid||n,registrationStatus:2,refreshToken:f.refreshToken,authToken:oA(f.authToken)}}else throw await aA("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r9(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9=/^[cdef][\w-]{21}$/,Mx="";function i9(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=o9(t);return s9.test(n)?n:Mx}catch{return Mx}}function o9(t){return r9(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=new Map;function hA(t,e){const n=Xp(t);fA(n,e),a9(n,e)}function fA(t,e){const n=dA.get(t);if(n)for(const r of n)r(e)}function a9(t,e){const n=l9();n&&n.postMessage({key:t,fid:e}),c9()}let Qa=null;function l9(){return!Qa&&"BroadcastChannel"in self&&(Qa=new BroadcastChannel("[Firebase] FID Change"),Qa.onmessage=t=>{fA(t.data.key,t.data.fid)}),Qa}function c9(){dA.size===0&&Qa&&(Qa.close(),Qa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9="firebase-installations-database",d9=1,yl="firebase-installations-store";let hv=null;function x0(){return hv||(hv=Cp(u9,d9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(yl)}}})),hv}async function ip(t,e){const n=Xp(t),s=(await x0()).transaction(yl,"readwrite"),a=s.objectStore(yl),c=await a.get(n);return await a.put(e,n),await s.done,(!c||c.fid!==e.fid)&&hA(t,e.fid),e}async function mA(t){const e=Xp(t),r=(await x0()).transaction(yl,"readwrite");await r.objectStore(yl).delete(e),await r.done}async function Jp(t,e){const n=Xp(t),s=(await x0()).transaction(yl,"readwrite"),a=s.objectStore(yl),c=await a.get(n),u=e(c);return u===void 0?await a.delete(n):await a.put(u,n),await s.done,u&&(!c||c.fid!==u.fid)&&hA(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w0(t){let e;const n=await Jp(t.appConfig,r=>{const s=h9(r),a=f9(t,s);return e=a.registrationPromise,a.installationEntry});return n.fid===Mx?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function h9(t){const e=t||{fid:i9(),registrationStatus:0};return pA(e)}function f9(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(gl.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=m9(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:p9(t)}:{installationEntry:e}}async function m9(t,e){try{const n=await n9(t,e);return ip(t.appConfig,n)}catch(n){throw sA(n)&&n.customData.serverCode===409?await mA(t.appConfig):await ip(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function p9(t){let e=await P1(t.appConfig);for(;e.registrationStatus===1;)await uA(100),e=await P1(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await w0(t);return r||n}return e}function P1(t){return Jp(t,e=>{if(!e)throw gl.create("installation-not-found");return pA(e)})}function pA(t){return g9(t)?{fid:t.fid,registrationStatus:0}:t}function g9(t){return t.registrationStatus===1&&t.registrationTime+tA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y9({appConfig:t,heartbeatServiceProvider:e},n){const r=v9(t,n),s=Zz(t,n),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const c={installation:{sdkVersion:nA,appId:t.appId}},u={method:"POST",headers:s,body:JSON.stringify(c)},h=await cA(()=>fetch(r,u));if(h.ok){const f=await h.json();return oA(f)}else throw await aA("Generate Auth Token",h)}function v9(t,{fid:e}){return`${iA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _0(t,e=!1){let n;const r=await Jp(t.appConfig,a=>{if(!gA(a))throw gl.create("not-registered");const c=a.authToken;if(!e&&_9(c))return a;if(c.requestStatus===1)return n=x9(t,e),a;{if(!navigator.onLine)throw gl.create("app-offline");const u=E9(a);return n=w9(t,u),u}});return n?await n:r.authToken}async function x9(t,e){let n=await R1(t.appConfig);for(;n.authToken.requestStatus===1;)await uA(100),n=await R1(t.appConfig);const r=n.authToken;return r.requestStatus===0?_0(t,e):r}function R1(t){return Jp(t,e=>{if(!gA(e))throw gl.create("not-registered");const n=e.authToken;return N9(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function w9(t,e){try{const n=await y9(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await ip(t.appConfig,r),n}catch(n){if(sA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await mA(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ip(t.appConfig,r)}throw n}}function gA(t){return t!==void 0&&t.registrationStatus===2}function _9(t){return t.requestStatus===2&&!b9(t)}function b9(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Qz}function E9(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function N9(t){return t.requestStatus===1&&t.requestTime+tA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S9(t){const e=t,{installationEntry:n,registrationPromise:r}=await w0(e);return r?r.catch(console.error):_0(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C9(t,e=!1){const n=t;return await j9(n),(await _0(n,e)).token}async function j9(t){const{registrationPromise:e}=await w0(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T9(t){if(!t||!t.options)throw fv("App Configuration");if(!t.name)throw fv("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw fv(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function fv(t){return gl.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="installations",I9="installations-internal",A9=t=>{const e=t.getProvider("app").getImmediate(),n=T9(e),r=El(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},k9=t=>{const e=t.getProvider("app").getImmediate(),n=El(e,yA).getImmediate();return{getId:()=>S9(n),getToken:s=>C9(n,s)}};function P9(){Vs(new hs(yA,A9,"PUBLIC")),Vs(new hs(I9,k9,"PRIVATE"))}P9();Dr(eA,v0);Dr(eA,v0,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R9="/firebase-messaging-sw.js",D9="/firebase-cloud-messaging-push-scope",vA="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",O9="https://fcmregistrations.googleapis.com/v1",xA="google.c.a.c_id",L9="google.c.a.c_l",M9="google.c.a.ts",F9="google.c.a.e",D1=1e4;var O1;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(O1||(O1={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Kd;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Kd||(Kd={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function V9(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let a=0;a<r.length;++a)s[a]=r.charCodeAt(a);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv="fcm_token_details_db",U9=5,L1="fcm_token_object_Store";async function $9(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(a=>a.name).includes(mv))return null;let e=null;return(await Cp(mv,U9,{upgrade:async(r,s,a,c)=>{var u;if(s<2||!r.objectStoreNames.contains(L1))return;const h=c.objectStore(L1),f=await h.index("fcmSenderId").get(t);if(await h.clear(),!!f){if(s===2){const p=f;if(!p.auth||!p.p256dh||!p.endpoint)return;e={token:p.fcmToken,createTime:(u=p.createTime)!==null&&u!==void 0?u:Date.now(),subscriptionOptions:{auth:p.auth,p256dh:p.p256dh,endpoint:p.endpoint,swScope:p.swScope,vapidKey:typeof p.vapidKey=="string"?p.vapidKey:$i(p.vapidKey)}}}else if(s===3){const p=f;e={token:p.fcmToken,createTime:p.createTime,subscriptionOptions:{auth:$i(p.auth),p256dh:$i(p.p256dh),endpoint:p.endpoint,swScope:p.swScope,vapidKey:$i(p.vapidKey)}}}else if(s===4){const p=f;e={token:p.fcmToken,createTime:p.createTime,subscriptionOptions:{auth:$i(p.auth),p256dh:$i(p.p256dh),endpoint:p.endpoint,swScope:p.swScope,vapidKey:$i(p.vapidKey)}}}}}})).close(),await tv(mv),await tv("fcm_vapid_details_db"),await tv("undefined"),z9(e)?e:null}function z9(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9="firebase-messaging-database",q9=1,Gd="firebase-messaging-store";let pv=null;function wA(){return pv||(pv=Cp(B9,q9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Gd)}}})),pv}async function W9(t){const e=_A(t),r=await(await wA()).transaction(Gd).objectStore(Gd).get(e);if(r)return r;{const s=await $9(t.appConfig.senderId);if(s)return await b0(t,s),s}}async function b0(t,e){const n=_A(t),s=(await wA()).transaction(Gd,"readwrite");return await s.objectStore(Gd).put(e,n),await s.done,e}function _A({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},gr=new bl("messaging","Messaging",H9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K9(t,e){const n=await N0(t),r=bA(e),s={method:"POST",headers:n,body:JSON.stringify(r)};let a;try{a=await(await fetch(E0(t.appConfig),s)).json()}catch(c){throw gr.create("token-subscribe-failed",{errorInfo:c==null?void 0:c.toString()})}if(a.error){const c=a.error.message;throw gr.create("token-subscribe-failed",{errorInfo:c})}if(!a.token)throw gr.create("token-subscribe-no-token");return a.token}async function G9(t,e){const n=await N0(t),r=bA(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let a;try{a=await(await fetch(`${E0(t.appConfig)}/${e.token}`,s)).json()}catch(c){throw gr.create("token-update-failed",{errorInfo:c==null?void 0:c.toString()})}if(a.error){const c=a.error.message;throw gr.create("token-update-failed",{errorInfo:c})}if(!a.token)throw gr.create("token-update-no-token");return a.token}async function Q9(t,e){const r={method:"DELETE",headers:await N0(t)};try{const a=await(await fetch(`${E0(t.appConfig)}/${e}`,r)).json();if(a.error){const c=a.error.message;throw gr.create("token-unsubscribe-failed",{errorInfo:c})}}catch(s){throw gr.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function E0({projectId:t}){return`${O9}/projects/${t}/registrations`}async function N0({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function bA({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==vA&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9=7*24*60*60*1e3;async function X9(t){const e=await Z9(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:$i(e.getKey("auth")),p256dh:$i(e.getKey("p256dh"))},r=await W9(t.firebaseDependencies);if(r){if(eB(r.subscriptionOptions,n))return Date.now()>=r.createTime+Y9?J9(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await Q9(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return M1(t.firebaseDependencies,n)}else return M1(t.firebaseDependencies,n)}async function J9(t,e){try{const n=await G9(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await b0(t.firebaseDependencies,r),n}catch(n){throw n}}async function M1(t,e){const r={token:await K9(t,e),createTime:Date.now(),subscriptionOptions:e};return await b0(t,r),r.token}async function Z9(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:V9(e)})}function eB(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,a=e.p256dh===t.p256dh;return n&&r&&s&&a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return tB(e,t),nB(e,t),rB(e,t),e}function tB(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s);const a=e.notification.icon;a&&(t.notification.icon=a)}function nB(t,e){e.data&&(t.data=e.data)}function rB(t,e){var n,r,s,a,c;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const u=(s=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&s!==void 0?s:(a=e.notification)===null||a===void 0?void 0:a.click_action;u&&(t.fcmOptions.link=u);const h=(c=e.fcmOptions)===null||c===void 0?void 0:c.analytics_label;h&&(t.fcmOptions.analyticsLabel=h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sB(t){return typeof t=="object"&&!!t&&xA in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iB(t){if(!t||!t.options)throw gv("App Configuration Object");if(!t.name)throw gv("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw gv(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function gv(t){return gr.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=iB(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aB(t){try{t.swRegistration=await navigator.serviceWorker.register(R9,{scope:D9}),t.swRegistration.update().catch(()=>{}),await lB(t.swRegistration)}catch(e){throw gr.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function lB(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${D1} ms`)),D1),s=t.installing||t.waiting;t.active?(clearTimeout(r),e()):s?s.onstatechange=a=>{var c;((c=a.target)===null||c===void 0?void 0:c.state)==="activated"&&(s.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cB(t,e){if(!e&&!t.swRegistration&&await aB(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw gr.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uB(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=vA)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EA(t,e){if(!navigator)throw gr.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw gr.create("permission-blocked");return await uB(t,e==null?void 0:e.vapidKey),await cB(t,e==null?void 0:e.serviceWorkerRegistration),X9(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dB(t,e,n){const r=hB(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[xA],message_name:n[L9],message_time:n[M9],message_device_time:Math.floor(Date.now()/1e3)})}function hB(t){switch(t){case Kd.NOTIFICATION_CLICKED:return"notification_open";case Kd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fB(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Kd.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(F1(n)):t.onMessageHandler.next(F1(n)));const r=n.data;sB(r)&&r[F9]==="1"&&await dB(t,n.messageType,r)}const V1="@firebase/messaging",U1="0.12.22";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB=t=>{const e=new oB(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>fB(e,n)),e},pB=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>EA(e,r)}};function gB(){Vs(new hs("messaging",mB,"PUBLIC")),Vs(new hs("messaging-internal",pB,"PRIVATE")),Dr(V1,U1),Dr(V1,U1,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yB(){try{await Ij()}catch{return!1}return typeof window<"u"&&Tj()&&$F()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vB(t=Sw()){return yB().then(e=>{if(!e)throw gr.create("unsupported-browser")},e=>{throw gr.create("indexed-db-unsupported")}),El(sn(t),"messaging").getImmediate()}async function xB(t,e){return t=sn(t),EA(t,e)}gB();const wB={apiKey:"AIzaSyDUR89i6kvh3bp51GCgBX0fTwh3bFt1Ksg",authDomain:"medjust-d26eb.firebaseapp.com",projectId:"medjust-d26eb",storageBucket:"medjust-d26eb.appspot.com",messagingSenderId:"631362355665",appId:"1:631362355665:web:4d7f8eadba1bca0969e0f0"},Zp=Pj(wB),wm=m6(Zp),Ne=DI(Zp,{experimentalForceLongPolling:!0,useFetchStreams:!1});qz(Zp);let Fx=null;if(typeof window<"u"&&"serviceWorker"in navigator)try{Fx=vB(Zp)}catch(t){console.warn("Firebase Messaging initialization failed:",t)}let su=!1,_m=[],Ya=!1,Sd=0;const $1=3,Ps=t=>{su!==t&&(su=t,console.log(` Firebase mode changed: ${t?"OFFLINE":"ONLINE"}`),_m.forEach(e=>e()))},op=()=>su,aa=()=>Ya,S0=t=>(_m.push(t),()=>{_m=_m.filter(e=>e!==t)}),C0=t=>{Sd++,console.log(` Firebase error ${Sd}/${$1}:`,t.message),Sd>=$1&&(console.log(" Too many Firebase errors - switching to global offline mode"),Ps(!0))};if(!window.fetch.__firebasePatched){const t=window.fetch,e=(...n)=>{var a;const r=typeof n[0]=="string"?n[0]:(a=n[0])==null?void 0:a.url;if(!(!!r&&(r.includes("firestore.googleapis.com")||r.includes("firebase.googleapis.com")||r.includes("identitytoolkit.googleapis.com"))))try{return t(...n)}catch(c){return Promise.reject(c)}if(Ya||su){Ya&&Ps(!0);const c=new Error("Firebase offline mode - request blocked");return c.isFirebaseOfflineError=!0,Promise.reject(c)}return Promise.resolve().then(()=>{try{return t(...n)}catch(c){const u=String(c&&(c.stack||"")||""),h=String((c==null?void 0:c.message)||c||"").toLowerCase();if((u.includes("chrome-extension://")||u.includes("extension://")||h.includes("extension")||h.includes("failed to fetch"))&&h.includes("failed to fetch")){console.log(" Extension blocking Firebase requests - permanent offline mode"),Ya=!0,Ps(!0);const p=new Error("Firebase offline (extension blocking requests)");return p.isExtensionBlocked=!0,Promise.reject(p)}throw c}}).then(c=>(c.ok&&(Sd=0,su&&(console.log(" Firebase connection restored"),Ps(!1))),c)).catch(c=>{const u=String(c&&(c.stack||"")||""),h=String((c==null?void 0:c.message)||c||"").toLowerCase(),f=u.includes("chrome-extension://")||u.includes("extension://")||h.includes("extension")||h.includes("failed to fetch");if(f&&h.includes("failed to fetch")){console.log(" Extension detected blocking Firebase requests - activating permanent offline mode"),Ya=!0,Ps(!0);const p=new Error("Firebase offline (extension blocking requests)");return p.isExtensionBlocked=!0,Promise.reject(p)}throw!f&&navigator.onLine&&C0(c),c})};e.__firebasePatched=!0,window.fetch=e}console.log(" Initializing Firebase monitoring...");navigator.onLine||(console.log(" No internet connection - starting in offline mode"),Ps(!0));window.addEventListener("online",()=>{console.log(" Internet connection restored"),Sd=0,Ps(!1)});window.addEventListener("offline",()=>{console.log(" Internet connection lost"),Ps(!0)});console.log(" Starting Firebase monitoring in ONLINE mode");window.addEventListener("unhandledrejection",t=>{var c;const e=String(((c=t==null?void 0:t.reason)==null?void 0:c.message)||(t==null?void 0:t.reason)||""),n=String((t==null?void 0:t.reason)&&(t.reason.stack||"")||""),r=e.toLowerCase(),a=["chrome-extension://","extension://","fullstory.com","firebase offline (extension blocking requests)"].some(u=>n.includes(u)||e.includes(u));if((r.includes("failed to fetch")||r.includes("extension blocked")||r.includes("extension"))&&(a||n.includes("chrome-extension://")||n.includes("extension://"))){console.log(" Suppressed extension-related fetch error"),t.preventDefault();return}if(Ya&&r.includes("failed to fetch")){t.preventDefault();return}if(n.includes("chrome-extension://")||n.includes("extension://")){t.preventDefault();return}});const _B=console.error,bB=console.warn,EB=console.log;console.error=(...t)=>{const e=t.map(s=>s&&typeof s=="object"?String(s):s).join(" "),n=t.some(s=>s&&typeof s=="object"&&s.stack&&s.stack.includes("chrome-extension://"));if(["Firebase offline mode - request blocked","firebase offline (extension blocking requests)","FirebaseError: [code=unavailable]","Could not reach Cloud Firestore backend","Connection failed","The operation could not be completed","device does not have a healthy Internet connection","client will operate in offline mode","Most recent error: FirebaseError","@firebase/firestore: Firestore","fullstory.com","TypeError: Failed to fetch","Failed to fetch","extension","chrome-extension"].some(s=>e.toLowerCase().includes(s.toLowerCase()))||n||e.includes("chrome-extension://")||e.includes("extension://")){Ya&&e.toLowerCase().includes("failed to fetch")&&console.log(" Suppressed extension blocking error");return}_B.apply(console,t)};console.warn=(...t)=>{const e=t.join(" ");e.includes("Firebase")&&e.includes("offline")||bB.apply(console,t)};console.log=(...t)=>{const e=t.join(" ");e.includes("@firebase/firestore")&&e.includes("offline")||EB.apply(console,t)};setTimeout(()=>{navigator.onLine?console.log(" Internet available - Firebase enabled and ready"):(console.log(" No internet connection detected - switching to offline mode"),Ps(!0))},100);const NA=()=>{if(su){const t=()=>(console.log(" Firebase function called in offline mode - skipping"),Promise.reject(new Error("Firebase is offline")));if(typeof window<"u"){const e=window.firebase;e&&(e.initializeApp=t,e.app=t)}}},NB={setFirebaseOffline:Ps,isFirebaseInOfflineMode:op,isExtensionBlocking:aa,addOfflineModeListener:S0,reportFirebaseError:C0,disableFirebaseWhenOffline:NA},SB=Object.freeze(Object.defineProperty({__proto__:null,addOfflineModeListener:S0,default:NB,disableFirebaseWhenOffline:NA,isExtensionBlocking:aa,isFirebaseInOfflineMode:op,reportFirebaseError:C0,setFirebaseOffline:Ps},Symbol.toStringTag,{value:"Module"})),SA=_.createContext(void 0);function CB({children:t}){const[e,n]=_.useState(null),[r,s]=_.useState(!0),[a,c]=_.useState(null),u=y=>new Promise(v=>setTimeout(v,y)),h=async(y,v)=>{if(aa()){const b=new Error("Extension is blocking network requests");throw c("Network blocked by browser extension. Try disabling ad blockers, VPNs, or security extensions and refresh the page."),b}if(typeof navigator<"u"&&!navigator.onLine){const b=new Error("No network connection (navigator offline)");throw console.error("Login pre-check failed:",b),c("No network connection - please connect to the internet"),b}const x=3;let E=0,w=null;for(;E<x;){E+=1;try{await ZU(wm,y,v),c(null);return}catch(b){w=b,console.error(`Login attempt ${E} failed:`,b);const A=(b==null?void 0:b.code)==="auth/network-request-failed"||(b==null?void 0:b.message)&&(b.message.toLowerCase().includes("fetch")||b.message.toLowerCase().includes("network")||b.message.toLowerCase().includes("offline"));if(aa())throw c("Network blocked by browser extension. Try disabling ad blockers, VPNs, or security extensions and refresh the page."),b;if(!A)throw(b==null?void 0:b.code)==="auth/wrong-password"||(b==null?void 0:b.code)==="auth/user-not-found"||(b==null?void 0:b.code)==="auth/invalid-credential"?c("Invalid email or password"):c("Authentication error - see console for details"),b;if(c(`Network error (attempt ${E} of ${x}) - checking connection...`),E<x){const j=500*Math.pow(2,E-1);console.log(`Retrying login in ${j}ms...`),await u(j);continue}}}throw console.error("Login failed after retries:",w),aa()?c("Network blocked by browser extension. Try disabling ad blockers, VPNs, or security extensions and refresh the page."):c("Network error - unable to reach Firebase. Check your internet connection or ensure your site domain is added to Firebase Authentication -> Authorized domains."),w},f=async()=>{try{await r3(wm),c(null)}catch(y){console.error("Logout error:",y),n(null)}};_.useEffect(()=>{const y=setTimeout(()=>{r&&(console.log(" Auth taking too long - continuing without authentication"),s(!1))},5e3),v=n3(wm,x=>{clearTimeout(y),n(x),s(!1),c(null)},x=>{clearTimeout(y),console.error("Auth state change error:",x),c("Authentication error - working offline"),s(!1)});return()=>{clearTimeout(y),v()}},[]);const p={currentUser:e,login:h,logout:f,loading:r,authError:a};return o.jsx(SA.Provider,{value:p,children:r?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted/30",children:o.jsxs("div",{className:"flex flex-col items-center gap-4 rounded-lg border bg-card px-8 py-6 shadow-sm",children:[o.jsx("div",{className:"h-10 w-10 animate-spin rounded-full border-2 border-primary border-t-transparent",role:"status","aria-label":"Loading"}),o.jsx("p",{className:"text-sm font-medium text-foreground",children:"Loading"})]})}):t})}function eg(){const t=_.useContext(SA);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const CA=ih("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),X=_.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},a)=>{const c=r?ll:"button";return o.jsx(c,{className:Xe(CA({variant:e,size:n,className:t})),ref:a,...s})});X.displayName="Button";const pe=_.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Xe("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));pe.displayName="Card";const Ke=_.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Xe("flex flex-col space-y-1.5 p-6",t),...e}));Ke.displayName="CardHeader";const Ye=_.forwardRef(({className:t,...e},n)=>o.jsx("h3",{ref:n,className:Xe("text-2xl font-semibold leading-none tracking-tight",t),...e}));Ye.displayName="CardTitle";const Ct=_.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Xe("text-sm text-muted-foreground",t),...e}));Ct.displayName="CardDescription";const ye=_.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Xe("p-6 pt-0",t),...e}));ye.displayName="CardContent";const jB=_.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Xe("flex items-center p-6 pt-0",t),...e}));jB.displayName="CardFooter";class TB extends Se.Component{constructor(n){super(n);Mf(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),window.location.replace(window.location.href)});this.state={hasError:!1}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r),(n.message.includes("fetch")||n.message.includes("Firebase")||n.message.includes("Firestore"))&&console.log(" Firebase error detected - this is a known connectivity issue"),this.setState({error:n,errorInfo:r})}render(){var n,r,s;if(this.state.hasError){const a=((n=this.state.error)==null?void 0:n.message.includes("fetch"))||((r=this.state.error)==null?void 0:r.message.includes("Firebase"))||((s=this.state.error)==null?void 0:s.message.includes("Firestore"));return o.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:o.jsxs(pe,{className:"max-w-md w-full",children:[o.jsx(Ke,{children:o.jsxs(Ye,{className:"flex items-center gap-2 text-destructive",children:[o.jsx(DD,{className:"h-5 w-5"}),a?"Connection Error":"Application Error"]})}),o.jsxs(ye,{className:"space-y-4",children:[o.jsx("p",{className:"text-muted-foreground",children:a?"There's a connectivity issue with Firebase services. The app will work in offline mode.":"Something went wrong. Please try refreshing the page."}),!1,o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(X,{onClick:this.handleRetry,className:"flex-1",children:[o.jsx(AD,{className:"h-4 w-4 mr-2"}),"Retry"]}),o.jsx(X,{variant:"outline",onClick:()=>window.location.href="/admin/years",className:"flex-1",children:"Go to Years"})]})]})]})})}return this.props.children}}var j0="Avatar",[IB,kW]=to(j0),[AB,jA]=IB(j0),TA=_.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,a]=_.useState("idle");return o.jsx(AB,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:o.jsx(et.span,{...r,ref:e})})});TA.displayName=j0;var IA="AvatarImage",AA=_.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...a}=t,c=jA(IA,n),u=kB(r),h=Tn(f=>{s(f),c.onImageLoadingStatusChange(f)});return rn(()=>{u!=="idle"&&h(u)},[u,h]),u==="loaded"?o.jsx(et.img,{...a,ref:e,src:r}):null});AA.displayName=IA;var kA="AvatarFallback",PA=_.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,a=jA(kA,n),[c,u]=_.useState(r===void 0);return _.useEffect(()=>{if(r!==void 0){const h=window.setTimeout(()=>u(!0),r);return()=>window.clearTimeout(h)}},[r]),c&&a.imageLoadingStatus!=="loaded"?o.jsx(et.span,{...s,ref:e}):null});PA.displayName=kA;function kB(t){const[e,n]=_.useState("idle");return rn(()=>{if(!t){n("error");return}let r=!0;const s=new window.Image,a=c=>()=>{r&&n(c)};return n("loading"),s.onload=a("loaded"),s.onerror=a("error"),s.src=t,()=>{r=!1}},[t]),e}var RA=TA,DA=AA,OA=PA;const iu=_.forwardRef(({className:t,...e},n)=>o.jsx(RA,{ref:n,className:Xe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));iu.displayName=RA.displayName;const Qd=_.forwardRef(({className:t,...e},n)=>o.jsx(DA,{ref:n,className:Xe("aspect-square h-full w-full",t),...e}));Qd.displayName=DA.displayName;const ou=_.forwardRef(({className:t,...e},n)=>o.jsx(OA,{ref:n,className:Xe("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));ou.displayName=OA.displayName;const PB=[{icon:ND,label:"Dashboard",path:"/admin"},{icon:Tm,label:"News",path:"/admin/news"},{icon:ol,label:"Notifications",path:"/admin/notifications"},{icon:kr,label:"Years",path:"/admin/years"},{icon:fD,label:"Books",path:"/admin/books"},{icon:Hc,label:"Users",path:"/admin/users"},{icon:Hc,label:"Professors",path:"/admin/professors"},{icon:rw,label:"Store",path:"/admin/store"},{icon:Rs,label:"Orders",path:"/admin/orders"},{icon:Ls,label:"Research",path:"/admin/research"},{icon:Ad,label:"Maps",path:"/admin/maps"},{icon:sC,label:"Settings",path:"/admin/settings"}];function RB({isOpen:t}){return o.jsx("div",{className:Xe("fixed left-0 top-16 h-[calc(100vh-4rem)] bg-card border-r transition-all duration-300 z-40",t?"w-64":"w-16"),children:o.jsx("nav",{className:"p-4 space-y-2",children:PB.map(e=>o.jsxs("div",{children:[o.jsxs(GE,{to:e.path,className:({isActive:n})=>Xe("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors","hover:bg-accent hover:text-accent-foreground",n&&"bg-primary text-primary-foreground hover:bg-primary/90",!t&&"justify-center"),children:[o.jsx(e.icon,{className:"h-5 w-5 flex-shrink-0"}),t&&o.jsx("span",{className:"font-medium",children:e.label})]}),e.children&&t&&o.jsx("div",{className:"ml-6 mt-2 space-y-1",children:e.children.map(n=>o.jsxs(GE,{to:n.path,className:({isActive:r})=>Xe("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors text-sm","hover:bg-accent hover:text-accent-foreground",r&&"bg-primary text-primary-foreground hover:bg-primary/90"),children:[o.jsx(n.icon,{className:"h-4 w-4 flex-shrink-0"}),o.jsx("span",{children:n.label})]},n.path))})]},e.path))})})}function DB(){var a;const[t,e]=_.useState(!0),{currentUser:n,logout:r}=eg(),s=async()=>{try{await r()}catch(c){console.error("Error logging out:",c)}};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-card shadow-sm",children:o.jsxs("div",{className:"flex h-16 items-center px-4",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>e(!t),className:"mr-4",children:o.jsx(TD,{className:"h-5 w-5"})}),o.jsx("div",{className:"flex-1",children:o.jsx("h1",{className:"text-xl font-semibold text-primary",children:"MedJust Admin Dashboard"})}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(iu,{className:"h-8 w-8",children:o.jsx(ou,{children:o.jsx(as,{className:"h-4 w-4"})})}),o.jsx("span",{className:"text-sm font-medium",children:((a=n==null?void 0:n.email)==null?void 0:a.split("@")[0])||"Admin"})]}),o.jsx(X,{variant:"ghost",size:"icon",onClick:s,className:"text-muted-foreground hover:text-destructive",children:o.jsx(jD,{className:"h-4 w-4"})})]})]})}),o.jsxs("div",{className:"flex",children:[o.jsx(RB,{isOpen:t}),o.jsx("main",{className:`flex-1 transition-all duration-300 ${t?"ml-64":"ml-16"}`,children:o.jsx("div",{className:"p-6",children:o.jsx(sF,{})})})]})]})}const we=_.forwardRef(({className:t,type:e,...n},r)=>o.jsx("input",{type:e,className:Xe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));we.displayName="Input";var OB="Label",LA=_.forwardRef((t,e)=>o.jsx(et.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));LA.displayName=OB;var MA=LA;const LB=ih("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Pe=_.forwardRef(({className:t,...e},n)=>o.jsx(MA,{ref:n,className:Xe(LB(),t),...e}));Pe.displayName=MA.displayName;const MB=ih("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),T0=_.forwardRef(({className:t,variant:e,...n},r)=>o.jsx("div",{ref:r,role:"alert",className:Xe(MB({variant:e}),t),...n}));T0.displayName="Alert";const FB=_.forwardRef(({className:t,...e},n)=>o.jsx("h5",{ref:n,className:Xe("mb-1 font-medium leading-none tracking-tight",t),...e}));FB.displayName="AlertTitle";const I0=_.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Xe("text-sm [&_p]:leading-relaxed",t),...e}));I0.displayName="AlertDescription";function VB(){const[t,e]=_.useState(""),[n,r]=_.useState(""),[s,a]=_.useState(""),[c,u]=_.useState(!1),{login:h,authError:f}=eg(),p=hu(),y=async v=>{if(v.preventDefault(),!t||!n){a("Please fill in all fields");return}try{if(typeof navigator<"u"&&!navigator.onLine){a("No network connection. Please connect to the internet and try again.");return}a(""),u(!0),await h(t,n),p("/admin")}catch(x){console.error("Login error:",x),f?a(f):(x==null?void 0:x.code)==="auth/network-request-failed"?a("Network error - check your connection and try again."):(x==null?void 0:x.code)==="auth/wrong-password"||(x==null?void 0:x.code)==="auth/user-not-found"||(x==null?void 0:x.code)==="auth/invalid-credential"?a("Invalid email or password."):a("Failed to log in. Please check your credentials.")}finally{u(!1)}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-secondary/20 flex items-center justify-center p-4",children:o.jsxs(pe,{className:"w-full max-w-md shadow-xl",children:[o.jsxs(Ke,{className:"space-y-1 text-center",children:[o.jsx("div",{className:"mx-auto w-12 h-12 bg-primary rounded-lg flex items-center justify-center mb-4",children:o.jsx(vE,{className:"h-6 w-6 text-primary-foreground"})}),o.jsx(Ye,{className:"text-2xl font-bold",children:"MedJust Admin"}),o.jsx(Ct,{children:"Sign in to access the admin dashboard"})]}),o.jsx(ye,{children:o.jsxs("form",{onSubmit:y,className:"space-y-4",children:[s&&o.jsx(T0,{variant:"destructive",children:o.jsx(I0,{children:s})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"email",children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx(jm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(we,{id:"email",type:"email",placeholder:"MedAdmin@gmail.com",value:t,onChange:v=>e(v.target.value),className:"pl-10",required:!0})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"password",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(vE,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(we,{id:"password",type:"password",placeholder:"",value:n,onChange:v=>r(v.target.value),className:"pl-10",required:!0})]})]}),o.jsx(X,{type:"submit",className:"w-full",disabled:c,children:c?o.jsxs(o.Fragment,{children:[o.jsx(ds,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})})]})})}const UB=ih("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Rt({className:t,variant:e,...n}){return o.jsx("div",{className:Xe(UB({variant:e}),t),...n})}const $B="YOUR_VAPID_KEY_HERE";async function FA(){if(!Fx)return console.warn("Firebase Messaging is not available"),null;try{if(await Notification.requestPermission()==="granted"){console.log("Notification permission granted");const e=await xB(Fx,{vapidKey:$B});if(e){console.log("FCM Token:",e);const n=wm.currentUser;return n&&await zB(n.uid,e),e}else return console.warn("No FCM token available"),null}else return console.warn("Notification permission denied"),null}catch(t){return console.error("Error requesting notification permission:",t),null}}async function zB(t,e){try{const n=gt(Ne,"fcmTokens",t);await GI(n,{token:e,userId:t,createdAt:new Date,updatedAt:new Date},{merge:!0}),console.log(" FCM token saved for user:",t)}catch(n){console.error("Error saving FCM token:",n)}}async function VA(t){const e=new Map;try{for(let r=0;r<t.length;r+=10){const s=t.slice(r,r+10),a=Fe(Ne,"fcmTokens"),c=nn(a,sa("userId","in",s));(await lt(c)).forEach(h=>{const f=h.data();f.token&&f.userId&&e.set(f.userId,f.token)})}}catch(n){console.error("Error getting FCM tokens:",n)}return e}async function A0(t,e,n,r){try{if("Notification"in window)if(Notification.permission==="granted"){const s=new Notification(e,{body:n,icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:(r==null?void 0:r.newsId)||"notification",data:r||{},requireInteraction:!1});s.onclick=()=>{window.focus(),r!=null&&r.newsId&&(window.location.href="/admin/news"),s.close()},setTimeout(()=>{s.close()},5e3)}else Notification.permission==="default"&&await Notification.requestPermission()==="granted"&&await A0(t,e,n,r)}catch(s){console.error("Error sending push notification:",s)}}async function BB(){if(!("Notification"in window)){console.warn("This browser does not support notifications");return}if(!("serviceWorker"in navigator)){console.warn("This browser does not support service workers");return}try{const t=await navigator.serviceWorker.register("/firebase-messaging-sw.js");console.log("Service Worker registered:",t)}catch(t){console.error("Service Worker registration failed:",t)}await FA()}async function qB(){return(await lt(Fe(Ne,"batches"))).docs.map(e=>{const n=e.data();return{id:e.id,batchName:n.batch_name||n.batchName||"",imageUrl:n.image_url||n.imageUrl||"",aca_supervisor:n.aca_supervisor||n.acadmic_supervisor||n.academic_supervisor||"",cr:n.cr||"",actor:n.actor||"",group_link:n.group_link||n.groupUrl||n.group_url||"",ref:e.ref}})}async function WB(t){const e=t.map(async r=>{try{return(await lt(Fe(r.ref,"years"))).docs.map(a=>{const c=a.data();let u=c.order||1;if(c.name){const h=String(c.name).match(/\d+/);h&&(u=parseInt(h[0]))}return{id:a.id,yearNumber:u,name:c.name||c.title||"",type:u<=3?"basic":"clinical",batchName:r.batchName,imageUrl:c.imageUrl||c.image_url||"",academicSupervisor:c.aca_supervisor||c.acadmic_supervisor||c.academic_supervisor||"",actor:c.actor||"",cr:c.cr||"",groupUrl:c.group_link||c.group_url||c.groupUrl||"",subjects:[],batchId:r.id}})}catch(s){return console.warn("Failed to fetch years for batch",r.id,s),[]}});return(await Promise.all(e)).flat()}async function HB(){return(await lt(Fe(Ne,"Subjects"))).docs}async function KB(t){const n=(await lt(Fe(t.ref,"lectures"))).docs.map(async s=>{var v;const a=s.data(),[c,u,h]=await Promise.all([lt(Fe(s.ref,"videos")),lt(Fe(s.ref,"files")),lt(Fe(s.ref,"quizzes"))]),f=[];c.forEach(x=>{var w;const E=x.data();f.push({id:x.id,title:E.title||E.name||"",url:E.url||E.youtubeUrl||"",thumbnailUrl:E.thumbnailUrl||"",description:E.description||"",uploadedAt:((w=E.uploadedAt)==null?void 0:w.toDate())||new Date,youtubeUrl:E.youtubeUrl||E.url||""})});const p=[];u.forEach(x=>{var w;const E=x.data();p.push({id:x.id,title:E.title||E.name||"",url:E.fileUrl||E.url||"",description:E.description||"",uploadedAt:((w=E.uploadedAt)==null?void 0:w.toDate())||new Date,fileUrl:E.fileUrl||E.url||""})});const y=[];return h.forEach(x=>{const E=x.data();y.push({id:x.id,title:E.title||E.name||"",description:E.description||"",duration:E.duration||30,passRate:E.passRate||70,questions:E.questions||[]})}),{id:s.id,name:a.name||a.title||"",description:a.description||"",subjectId:t.id,order:a.order||1,imageUrl:a.imageUrl||"",createdAt:((v=a.createdAt)==null?void 0:v.toDate())||new Date,uploadedBy:a.uploadedBy||"Unknown",videos:f,files:p,quizzes:y}});return(await Promise.all(n)).sort((s,a)=>s.order-a.order)}async function GB(){const t=await HB(),e=10,n=[];for(let r=0;r<t.length;r+=e){const a=t.slice(r,r+e).map(async u=>{const h=u.data(),f=await KB(u);return{id:u.id,name:h.name||"",subjectId:h.subjectId||u.id,yearId:h.yearId||"",imageUrl:h.imageUrl||"",lectures:f}}),c=await Promise.all(a);n.push(...c)}return n}async function QB(){if(!navigator.onLine)throw new Error("No internet connection");const t=await qB(),[e,n]=await Promise.all([WB(t),GB()]),r=e.map(a=>({...a,subjects:n.filter(c=>c.yearId===a.id).sort((c,u)=>c.name.localeCompare(u.name))})),s=t.map(a=>({id:a.id,batchName:a.batchName,imageUrl:a.imageUrl||"",aca_supervisor:a.aca_supervisor||"",cr:a.cr||"",actor:a.actor||"",group_link:a.group_link||""}));return{years:r.sort((a,c)=>a.yearNumber-c.yearNumber),batches:s,subjects:r.flatMap(a=>a.subjects)}}function oo(){const t=xw(),[e,n]=_.useState(!1),{data:r,isLoading:s,error:a,refetch:c}=m4({queryKey:["years-data"],queryFn:QB,staleTime:5*60*1e3,gcTime:30*60*1e3,retry:1,retryDelay:1e3,enabled:navigator.onLine&&!e}),u=s,h=a?a.message:null,[f,p]=_.useState([]),[y,v]=_.useState([]),[x,E]=_.useState([]);_.useEffect(()=>{p((r==null?void 0:r.years)||[]),v((r==null?void 0:r.batches)||[]),E((r==null?void 0:r.subjects)||[])},[r==null?void 0:r.years,r==null?void 0:r.batches,r==null?void 0:r.subjects]),_.useEffect(()=>{navigator.onLine||n(!0)},[]),_.useEffect(()=>{const Q=()=>{n(!1),t.invalidateQueries({queryKey:["years-data"]})},ee=()=>{n(!0)};return window.addEventListener("online",Q),window.addEventListener("offline",ee),()=>{window.removeEventListener("online",Q),window.removeEventListener("offline",ee)}},[t]);const w=()=>{n(!1),t.invalidateQueries({queryKey:["years-data"]})},b=async(Q,ee)=>{if(Q){if(oe(),e||!navigator.onLine){p(q=>q.map(K=>K.id===Q?{...K,...ee}:K));return}try{const q=Rr(Ne,"years"),Y=(await lt(q)).docs.find(U=>U.id===Q);if(Y){await zt(Y.ref,{...ee,updatedAt:new Date}),t.invalidateQueries({queryKey:["years-data"]});return}p(U=>U.map(H=>H.id===Q?{...H,...ee}:H))}catch(q){console.error("Error updating year:",q),p(K=>K.map(Y=>Y.id===Q?{...Y,...ee}:Y))}}},A=async(Q,ee)=>{if(Q){if(oe(),e||!navigator.onLine){v(q=>q.map(K=>K.id===Q?{...K,...ee}:K));return}try{const q=gt(Ne,"batches",Q);await zt(q,{...ee,updatedAt:new Date}),t.invalidateQueries({queryKey:["years-data"]})}catch(q){console.error("Failed to update batch:",q),v(K=>K.map(Y=>Y.id===Q?{...Y,...ee}:Y))}}},j=async(Q,ee=3)=>{for(let q=0;q<ee;q++)try{return await Q()}catch(K){if(console.log(`Attempt ${q+1} failed:`,K.message),q===ee-1)throw K;await new Promise(Y=>setTimeout(Y,1e3*(q+1)))}},T=async Q=>{if(oe(),e||!navigator.onLine){const ee={id:`subject_${Date.now()}`,name:Q.name,subjectId:`subject_${Date.now()}`,yearId:Q.yearId,imageUrl:Q.imageUrl||"",lectures:[]};E(q=>[...q,ee]),p(q=>q.map(K=>K.id===Q.yearId?{...K,subjects:[...K.subjects,ee]}:K)),console.log(" Added subject to offline mode:",ee.name);return}try{console.log(" Creating subject with data:",Q),await j(async()=>{const ee={name:Q.name,imageUrl:Q.imageUrl||"",hours:Q.hours||3,yearId:Q.yearId,createdAt:pt.fromDate(new Date),updatedAt:pt.fromDate(new Date)};Object.keys(ee).forEach(H=>{ee[H]===void 0&&delete ee[H]});const q=await pn(Fe(Ne,"Subjects"),ee);await zt(q,{subjectId:q.id}),console.log(" Created new subject document:",q.id);const K=q,Y=Fe(K,"lectures");if((await lt(Y)).empty){const le=await pn(Y,{name:"Sample Lecture",title:"Sample Lecture",description:"",imageUrl:"",order:1,uploadedBy:"System",createdAt:new Date,lectureId:""});await zt(le,{lectureId:le.id});const ue=["videos","files","quizzes"];for(const ke of ue){const Te=Fe(le,ke);let _e={};ke==="videos"?_e={title:"Sample Video",description:"",thumbnailUrl:"",url:"",uploadedAt:new Date,videoId:""}:ke==="files"?_e={title:"Sample File",description:"",url:"",uploadedAt:new Date,fileId:""}:ke==="quizzes"&&(_e={title:"Sample Quiz",description:"",duration:30,passRate:70,questions:[],quizId:""});const Ae=await pn(Te,_e),He=`${ke.slice(0,-1)}Id`;await zt(Ae,{[He]:Ae.id})}console.log(" Created complete lecture structure for subject:",K.id)}t.invalidateQueries({queryKey:["years-data"]})})}catch(ee){console.error("Error creating subject:",ee),n(!0),await T(Q)}},M=async Q=>{if(oe(),e){const ee={id:`lecture_${Date.now()}`,...Q};E(q=>q.map(K=>K.id===Q.subjectId?{...K,lectures:[...K.lectures,ee]}:K)),p(q=>q.map(K=>({...K,subjects:K.subjects.map(Y=>Y.id===Q.subjectId?{...Y,lectures:[...Y.lectures,ee]}:Y)}))),console.log(" Added lecture to offline mode:",ee.name);return}try{await j(async()=>{const ee=gt(Ne,"Subjects",Q.subjectId),q=Fe(ee,"lectures"),K={title:Q.name,description:Q.description||"",imageUrl:Q.imageUrl||"",order:Q.order||1,uploadedBy:Q.uploadedBy||"Current User",createdAt:new Date,lectureId:""};console.log(" Creating lecture in subcollection:",K);const Y=await pn(q,K);await zt(Y,{lectureId:Y.id}),console.log(" Created lecture document with ID:",Y.id),console.log(" Path: /Subjects/"+Q.subjectId+"/lectures/"+Y.id),t.invalidateQueries({queryKey:["years-data"]})})}catch(ee){console.error("Error creating lecture:",ee),n(!0),await M(Q)}},$=async(Q,ee)=>{if(e){p(q=>q.map(K=>({...K,subjects:K.subjects.map(Y=>({...Y,lectures:Y.lectures.map(U=>U.id===Q?{...U,...ee}:U)}))}))),console.log(" Updated lecture in offline mode");return}try{await j(async()=>{const q=nn(Rr(Ne,"lectures")),K=await lt(q);let Y=null;for(const H of K.docs)if(H.id===Q){Y=H.ref;break}if(!Y)throw new Error(`Lecture ${Q} not found`);const U={...ee};U.name&&(U.title=U.name,delete U.name),Object.keys(U).forEach(H=>{U[H]===void 0&&delete U[H]}),U.createdAt instanceof Date&&(U.createdAt=pt.fromDate(U.createdAt)),U.updatedAt instanceof Date&&(U.updatedAt=pt.fromDate(U.updatedAt)),U.updatedAt||(U.updatedAt=pt.fromDate(new Date)),await zt(Y,U),t.invalidateQueries({queryKey:["years-data"]})})}catch(q){console.error("Error updating lecture:",q),p(K=>K.map(Y=>({...Y,subjects:Y.subjects.map(U=>({...U,lectures:U.lectures.map(H=>H.id===Q?{...H,...ee}:H)}))})))}},z=async(Q,ee)=>{if(oe(),e){E(q=>q.map(K=>K.id===Q?{...K,lectures:K.lectures.filter(Y=>Y.id!==ee)}:K)),p(q=>q.map(K=>({...K,subjects:K.subjects.map(Y=>Y.id===Q?{...Y,lectures:Y.lectures.filter(U=>U.id!==ee)}:Y)}))),console.log(" Deleted lecture from offline mode");return}try{const q=gt(Ne,"Subjects",Q),K=gt(q,"lectures",ee);await nr(K),console.log(" Deleted lecture from Firebase"),t.invalidateQueries({queryKey:["years-data"]})}catch(q){console.error("Error deleting lecture:",q)}},R=async Q=>{if(Q){if(oe(),e){E(ee=>ee.filter(q=>q.id!==Q)),p(ee=>ee.map(q=>({...q,subjects:q.subjects.filter(K=>K.id!==Q)}))),console.log(" Deleted subject in offline mode");return}try{const ee=gt(Ne,"Subjects",Q);await nr(ee),console.log(" Deleted subject from Firebase"),t.invalidateQueries({queryKey:["years-data"]})}catch(ee){console.error("Error deleting subject:",ee)}}},I=async(Q,ee,q)=>{if(!(!Q||!ee)){if(e){p(K=>K.map(Y=>({...Y,subjects:Y.subjects.map(U=>U.id===Q?{...U,lectures:U.lectures.map(H=>H.id===ee?{...H,videos:[...H.videos||[],{id:`video_${Date.now()}`,title:q.title,url:q.url,thumbnailUrl:q.thumbnailUrl||"",description:q.description||"",uploadedAt:new Date}]}:H)}:U)})));return}try{const K=gt(Ne,"Subjects",Q,"lectures",ee);await pn(Fe(K,"videos"),{title:q.title,description:q.description||"",url:q.url,duration:q.duration||"",thumbnailUrl:q.thumbnailUrl||"",platform:q.platform||"",uploadedAt:new Date,uploadedBy:"Current User"}),t.invalidateQueries({queryKey:["years-data"]})}catch(K){console.error("Error adding video:",K)}}},k=async(Q,ee,q)=>{if(!(!Q||!ee)){if(e){p(K=>K.map(Y=>({...Y,subjects:Y.subjects.map(U=>U.id===Q?{...U,lectures:U.lectures.map(H=>H.id===ee?{...H,files:[...H.files||[],{id:`file_${Date.now()}`,title:q.title,fileUrl:q.fileUrl,url:q.fileUrl,description:q.description||"",uploadedAt:new Date}]}:H)}:U)})));return}try{const K=gt(Ne,"Subjects",Q,"lectures",ee),Y={title:q.title,description:q.description||"",fileUrl:q.fileUrl,url:q.fileUrl,uploadedAt:pt.fromDate(new Date),uploadedBy:"Current User"};Object.keys(Y).forEach(U=>{Y[U]===void 0&&delete Y[U]}),await pn(Fe(K,"files"),Y),console.log(" File added successfully:",q.title),t.invalidateQueries({queryKey:["years-data"]})}catch(K){throw console.error(" Error adding file:",K),console.error("Error details:",K.code,K.message),new Error(`Failed to add file: ${K.message||"Check Firebase permissions"}`)}}},L=async(Q,ee,q)=>{if(!(!Q||!ee)){if(e){p(K=>K.map(Y=>({...Y,subjects:Y.subjects.map(U=>U.id===Q?{...U,lectures:U.lectures.map(H=>H.id===ee?{...H,quizzes:[...H.quizzes||[],{id:`quiz_${Date.now()}`,title:q.title,description:q.description||"",duration:q.timeLimit||30,passRate:q.passingScore||70,questions:q.questions||[]}]}:H)}:U)})));return}try{const K=gt(Ne,"Subjects",Q,"lectures",ee);await pn(Fe(K,"quizzes"),{title:q.title,description:q.description||"",duration:q.timeLimit||30,passRate:q.passingScore||70,questions:q.questions||[],createdAt:new Date,uploadedBy:"Current User"}),t.invalidateQueries({queryKey:["years-data"]})}catch(K){console.error("Error adding quiz:",K)}}},D=async(Q,ee={})=>{oe();const q=ee.yearNumber||1,K=ee.name||`Year ${q}`,Y=ee.type||(q<=3?"basic":"clinical");if(e||!navigator.onLine){const U={id:`year_${Date.now()}`,yearNumber:q,name:K,type:Y,batchName:"",batchId:Q||void 0,imageUrl:"",academicSupervisor:"",actor:"",cr:"",groupUrl:"",subjects:[]};p(H=>[...H,U]),Q&&v(H=>H.map(le=>le.id===Q?{...le}:le)),console.log(" Added year in offline mode:",U);return}try{await j(async()=>{if(Q){const U=gt(Ne,"batches",Q),H=Fe(U,"years"),le=await pn(H,{name:K,order:q,imageUrl:"",batch_name:K,createdAt:new Date});try{await zt(le,{yearId:le.id})}catch{}}else{const U=Fe(Ne,"years"),H=await pn(U,{name:K,order:q,imageUrl:"",batch_name:K,createdAt:new Date});try{await zt(H,{yearId:H.id})}catch{}}t.invalidateQueries({queryKey:["years-data"]})})}catch(U){console.error("Error creating year:",U),n(!0),await D(Q,ee)}},O=async(Q={})=>{const ee=Q.batchName||"New Batch",q=Q.imageUrl||"",K=Q.cr||"";oe();const Y=`batch_temp_${Date.now()}`,U={id:Y,batchName:ee,imageUrl:q,cr:K};if(v(H=>[U,...H]),e||!navigator.onLine){console.log(" Added batch in offline mode:",U);return}try{await j(async()=>{const H=Fe(Ne,"batches"),le=await pn(H,{batch_name:ee,image_url:q,cr:K,createdAt:new Date});try{await zt(le,{batchId:le.id})}catch{}const ue={id:le.id,batchName:ee,imageUrl:q,cr:K};v(ke=>[ue,...ke.filter(Te=>Te.id!==Y)]),t.invalidateQueries({queryKey:["years-data"]})})}catch(H){console.error("Error creating batch:",H),v(ue=>ue.filter(ke=>ke.id!==Y)),n(!0);const le={id:`batch_${Date.now()}`,batchName:ee,imageUrl:q,cr:K};v(ue=>[le,...ue])}},F=async(Q,ee={deleteYears:!0})=>{if(!Q)return;oe();const q=y,K=f;if(v(Y=>Y.filter(U=>U.id!==Q)),p(Y=>Y.filter(U=>(U.batchId||U.batchName)!==Q)),e||!navigator.onLine){console.log(" Removed batch in offline mode:",Q);return}try{await j(async()=>{const Y=gt(Ne,"batches",Q);if(ee.deleteYears)try{const U=Fe(Y,"years"),H=await lt(U);for(const le of H.docs)await nr(le.ref)}catch{const H=Rr(Ne,"years"),le=await lt(H);for(const ue of le.docs){const ke=ue.data();(ke.batchId||ke.batch_id)===Q&&await nr(ue.ref)}}else{const U=Rr(Ne,"years"),H=await lt(U);for(const le of H.docs){const ue=le.data();if((ue.batchId||ue.batch_id)===Q)try{await zt(le.ref,{batchId:null,batch_name:null})}catch{}}}await nr(Y),t.invalidateQueries({queryKey:["years-data"]})})}catch(Y){throw console.error("Error deleting batch:",Y),v(q||[]),p(K||[]),Y}},ne=async(Q,ee)=>{if(e||!navigator.onLine)return{videos:[],files:[],quizzes:[]};try{const q={},K=gt(Ne,"Subjects",Q,"lectures",ee);try{const Y=await lt(Fe(K,"videos"));q.videos=Y.docs.map(U=>{var le;const H=U.data();return{id:U.id,title:H.title||H.name||"",url:H.url||"",thumbnailUrl:H.thumbnailUrl||"",description:H.description||"",uploadedAt:((le=H.uploadedAt)==null?void 0:le.toDate())||new Date}})}catch(Y){console.warn("Failed to fetch videos:",Y),q.videos=[]}try{const Y=await lt(Fe(K,"files"));q.files=Y.docs.map(U=>{var le;const H=U.data();return{id:U.id,title:H.title||H.name||"",url:H.url||"",description:H.description||"",uploadedAt:((le=H.uploadedAt)==null?void 0:le.toDate())||new Date}})}catch(Y){console.warn("Failed to fetch files:",Y),q.files=[]}try{const Y=await lt(Fe(K,"quizzes"));q.quizzes=Y.docs.map(U=>{const H=U.data();return{id:U.id,title:H.title||H.name||"",description:H.description||"",duration:H.duration||30,passRate:H.passRate||70,questions:H.questions||[]}})}catch(Y){console.warn("Failed to fetch quizzes:",Y),q.quizzes=[]}return p(Y=>Y.map(U=>({...U,subjects:U.subjects.map(H=>H.id===Q?{...H,lectures:H.lectures.map(le=>le.id===ee?{...le,...q}:le)}:H)}))),q}catch(q){return console.error("Error loading lecture resources:",q),{videos:[],files:[],quizzes:[]}}},oe=()=>{t.invalidateQueries({queryKey:["years-data"]})};return{years:f,batches:y,subjects:x,loading:u,error:h,isOfflineMode:e,retryConnection:w,clearCache:oe,updateYear:b,updateBatch:A,createSubject:T,createLecture:M,updateLecture:$,createYear:D,createBatch:O,deleteBatch:F,deleteLecture:z,deleteSubject:R,addVideo:I,addFile:k,addQuiz:L,loadLectureResources:ne}}async function YB(t,e,n){try{const r=await lt(Rr(Ne,"years")),s=[];r.forEach(f=>{const p=f.data();(p.batchId||p.batch_id)===n&&s.push(f.id)});try{const f=nn(Fe(Ne,"years"),sa("batchId","==",n));(await lt(f)).forEach(y=>{s.includes(y.id)||s.push(y.id)})}catch{}if(s.length===0){console.log(" No years found for batch:",n);return}const a=await lt(Fe(Ne,"users")),c=[];if(a.forEach(f=>{const p=f.data(),y=p.yearId||p.year||p.year_id;let v=y;typeof y=="string"&&y.includes(":")&&(v=y.split(":")[0]),v&&s.includes(v)&&c.push(f.id)}),c.length===0){console.log(" No users found for batch:",n);return}const u=y0(Ne),h=Fe(Ne,"notifications");c.forEach(f=>{const p=gt(h);u.set(p,{userId:f,title:"New News Article",message:e,type:"news",relatedId:t,read:!1,createdAt:pt.fromDate(new Date),batchId:n})}),await u.commit();try{const f=await VA(c);Array.from(f.entries()).forEach(([p,y])=>{A0(y,"New News Article",e,{newsId:t}).catch(()=>{})})}catch{}}catch(r){console.error("Send notifications by batchId failed:",r)}}async function XB(t,e,n){if(!n){console.log(" No yearId provided, skipping notifications");return}try{let r=null;const s=await lt(Rr(Ne,"years"));let a=null;if(s.forEach(x=>{x.id===n&&(a={id:x.id,...x.data()},r=a.batchId||a.batch_id||null)}),!a)try{const x=await KI(gt(Ne,"years",n));x.exists()&&(a={id:x.id,...x.data()},r=a.batchId||a.batch_id||null)}catch(x){console.warn("Could not fetch year directly:",x)}if(!r){console.log(" Could not find batchId for yearId:",n);return}const c=await lt(Rr(Ne,"years")),u=[n];c.forEach(x=>{const E=x.data();(E.batchId||E.batch_id)===r&&x.id!==n&&u.push(x.id)});try{const x=nn(Fe(Ne,"years"),sa("batchId","==",r));(await lt(x)).forEach(w=>{u.includes(w.id)||u.push(w.id)})}catch{}console.log(` Found ${u.length} years in batch ${r}:`,u);const h=nn(Fe(Ne,"users")),f=await lt(h),p=[];if(f.forEach(x=>{const E=x.data(),w=E.yearId||E.year||E.year_id;let b=w;typeof w=="string"&&w.includes(":")&&(b=w.split(":")[0]),b&&u.includes(b)&&p.push(x.id)}),console.log(` Found ${p.length} users to notify in batch ${r}`),p.length===0){console.log(" No users found for this batch, skipping notifications");return}const y=y0(Ne),v=Fe(Ne,"notifications");p.forEach(x=>{const E=gt(v),w={userId:x,title:"New News Article",message:e,type:"news",relatedId:t,read:!1,createdAt:new Date,...r?{batchId:r}:{}},b={...w,createdAt:pt.fromDate(w.createdAt)};y.set(E,b)}),await y.commit(),console.log(` Created ${p.length} notifications for batch ${r}`);try{const x=await VA(p);if(console.log(` Found ${x.size} FCM tokens for push notifications`),x.size>0){const E=Array.from(x.entries()).map(([w,b])=>A0(b,"New News Article",e,{newsId:t,type:"news",batchId:r||""}).catch(A=>{console.error(`Failed to send push to user ${w}:`,A)}));await Promise.allSettled(E),console.log(` Attempted to send ${x.size} push notifications`)}else console.log(" No FCM tokens found. Users need to enable notifications first.")}catch(x){console.error(" Error sending push notifications:",x)}}catch(r){console.error(" Error sending notifications:",r)}}function k0(){const[t,e]=_.useState([]),[n,r]=_.useState(!0),[s,a]=_.useState(null),{batches:c,years:u}=oo();return _.useEffect(()=>{const y=nn(Fe(Ne,"news"),io("updatedAt","desc")),v=vi(y,x=>{const E=[];x.forEach(w=>{var A,j;const b=w.data();E.push({id:w.id,title:b.title||"",content:b.content||"",imageUrl:b.imageUrl||"",videoUrl:b.videoUrl||"",createdAt:((A=b.createdAt)==null?void 0:A.toDate())||new Date,updatedAt:((j=b.updatedAt)==null?void 0:j.toDate())||new Date,authorName:b.authorName||"",authorId:b.newsId||w.id,tags:b.tags||[],isPinned:b.isPinned||!1,viewsCount:b.viewsCount||0,attachments:b.attachments||[],yearId:b.yearId||"",yearNumber:b.yearNumber||void 0,batchId:b.batchId||""})}),console.log(` Successfully loaded ${E.length} news articles from Firebase`),e(E),r(!1)},x=>{console.error("Error fetching news:",x),a(x.message||"Failed to fetch news from Firebase"),r(!1)});return()=>v()},[]),{news:t,loading:n,error:s,createNews:async y=>{try{console.log(" Creating news article:",y.title);const v={...y,createdAt:y.createdAt instanceof Date?pt.fromDate(y.createdAt):np(),updatedAt:y.updatedAt instanceof Date?pt.fromDate(y.updatedAt):np()};Object.keys(v).forEach(E=>{v[E]===void 0&&delete v[E]});const x=await pn(Fe(Ne,"news"),v);console.log(" News article created successfully with ID:",x.id),y.batchId?YB(x.id,y.title,y.batchId).catch(E=>{console.error("Failed to send notifications (non-critical):",E)}):y.yearId&&XB(x.id,y.title,y.yearId).catch(E=>{console.error("Failed to send notifications (non-critical):",E)})}catch(v){throw console.error(" Error creating news:",v),console.error("Error details:",v.code,v.message),new Error(`Failed to create news article: ${v.message||"Check Firebase permissions"}`)}},updateNews:async(y,v)=>{try{const x={...v};v.createdAt instanceof Date&&(x.createdAt=pt.fromDate(v.createdAt)),v.updatedAt instanceof Date&&(x.updatedAt=pt.fromDate(v.updatedAt)),Object.keys(x).forEach(E=>{x[E]===void 0&&delete x[E]}),await zt(gt(Ne,"news",y),x)}catch(x){throw console.error("Error updating news:",x),console.error("Error details:",x.code,x.message),new Error(`Failed to update news article: ${x.message||"Check Firebase permissions"}`)}},deleteNews:async y=>{try{await nr(gt(Ne,"news",y))}catch(v){throw console.error("Error deleting news:",v),console.error("Error details:",v.code,v.message),new Error(`Failed to delete news article: ${v.message||"Check Firebase permissions"}`)}},batches:c,years:u}}function UA(){const[t,e]=_.useState([]),[n,r]=_.useState(!0),[s,a]=_.useState(null),[c,u]=_.useState(!1),h=[{id:"product1",productId:"product1",name:"Medical Textbook",description:"Comprehensive medical textbook for students",price:89.99,images:["https://example.com/book1.jpg"],categoryId:"books",createdAt:new Date},{id:"product2",productId:"product2",name:"Stethoscope",description:"Professional grade stethoscope",price:120,images:["https://example.com/stethoscope.jpg"],categoryId:"equipment",createdAt:new Date}];_.useEffect(()=>{(async()=>{const E=setTimeout(()=>{n&&!c&&(console.log(" Firebase taking too long - switching to offline mode"),u(!0),r(!1),a("Working in offline mode - Firebase unavailable"),e(h))},3e3);try{console.log(" Fetching products from Firebase...");const w=await lt(Fe(Ne,"products")),b=[];w.forEach(A=>{var T;const j=A.data();b.push({id:A.id,productId:j.productId||A.id,name:j.name||"",description:j.description||"",price:j.price||0,types:j.types||(j.price?[{name:"Default",price:j.price}]:[]),images:j.images||[],categoryId:j.categoryId||"",createdAt:((T=j.createdAt)==null?void 0:T.toDate())||new Date})}),clearTimeout(E),e(b.sort((A,j)=>j.createdAt.getTime()-A.createdAt.getTime())),r(!1),a(null),console.log(" Products loaded successfully:",b.length)}catch(w){clearTimeout(E),w.isFirebaseOfflineError?console.log(" Firebase offline mode detected - using mock data"):console.error("Firebase error - switching to offline mode:",w.message),u(!0),r(!1),a("Working in offline mode - Firebase unavailable"),e(h)}})()},[]);const f=async x=>{var E,w;if(c){const b={id:`product_${Date.now()}`,productId:`product_${Date.now()}`,...x,createdAt:new Date};e(A=>[b,...A]),console.log(" Added product to offline mode:",b.name);return}try{const b={name:x.name,description:x.description,price:x.price||((w=(E=x.types)==null?void 0:E[0])==null?void 0:w.price)||0,types:x.types||(x.price?[{name:"Default",price:x.price}]:[]),images:x.images,categoryId:x.categoryId||"",createdAt:new Date,productId:""};console.log(" Creating new product:",b);const A=await pn(Fe(Ne,"products"),b);await zt(A,{productId:A.id}),console.log(" Created product with ID:",A.id),window.location.replace(window.location.href)}catch(b){console.error("Error creating product:",b),u(!0),await f(x)}};return{products:t,loading:n,error:s,isOfflineMode:c,createProduct:f,updateProduct:async(x,E)=>{var w;if(c){e(b=>b.map(A=>A.id===x?{...A,...E}:A)),console.log(" Updated product in offline mode");return}try{const b=gt(Ne,"products",x),A={...E};E.types&&(A.types=E.types,A.price=((w=E.types[0])==null?void 0:w.price)||E.price||0),await zt(b,A),console.log(" Updated product in Firebase:",x),window.location.replace(window.location.href)}catch(b){console.error("Error updating product:",b)}},deleteProduct:async x=>{if(c){e(E=>E.filter(w=>w.id!==x)),console.log(" Deleted product from offline mode");return}try{await nr(gt(Ne,"products",x)),console.log(" Deleted product from Firebase:",x),window.location.replace(window.location.href)}catch(E){console.error("Error deleting product:",E)}},retryConnection:()=>{console.log(" Retrying Firebase connection..."),r(!0),a(null),u(!1),window.location.replace(window.location.href)}}}const JB=[{id:"1",name:"Dr. Sarah Johnson",department:"Internal Medicine",email:"sarah.johnson@medjust.com",officeLocation:"Medical Building, Room 301",imageUrl:"https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=300&h=300&fit=crop&crop=face"},{id:"2",name:"Prof. Michael Chen",department:"Surgery",email:"michael.chen@medjust.com",officeLocation:"Surgical Wing, Room 205",imageUrl:"https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=300&h=300&fit=crop&crop=face"},{id:"3",name:"Dr. Emily Rodriguez",department:"Emergency Medicine",email:"emily.rodriguez@medjust.com",officeLocation:"Emergency Department, Office 12",imageUrl:"https://images.unsplash.com/photo-1594824928909-90ad1d93d7c3?w=300&h=300&fit=crop&crop=face"}];function $A(){const[t,e]=_.useState([]),[n,r]=_.useState(!0),[s,a]=_.useState(null),[c,u]=_.useState(!1);_.useEffect(()=>{const y=async()=>{try{const x=nn(Fe(Ne,"professors"));await lt(x);const E=nn(Fe(Ne,"professors"),io("name","asc"));return vi(E,b=>{const A=[];b.forEach(j=>{const T=j.data();A.push({id:j.id,name:T.name||"",title:T.title||"",department:T.department||"",email:T.email||"",phone:T.phone||"",officeLocation:T.officeLocation||"",bio:T.bio||"",researchAreas:T.researchAreas||[],website:T.website||"",linkedin:T.linkedin||"",imageUrl:T.imageUrl||""})}),e(A),r(!1)},b=>{console.error("Error in Firebase listener:",b),v()})}catch(x){return console.error("Firebase connection failed:",x),v(),null}},v=()=>{console.log(" Switching to offline mode with mock data"),u(!0),e(JB),a(null),r(!1)};y()},[]);const h=async y=>{if(c){const v={id:`offline_${Date.now()}`,...y};e(x=>[...x,v]),console.log(" Added professor in offline mode:",v.name);return}try{await pn(Fe(Ne,"professors"),{...y,professorId:`prof_${Date.now()}`}),console.log(" Added professor to Firebase:",y.name)}catch(v){console.error("Error creating professor:",v),u(!0),await h(y)}};return{professors:t,loading:n,error:s,createProfessor:h,updateProfessor:async(y,v)=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(x=>x.map(E=>E.id===y?{...E,...v}:E)),console.log(" Updated professor in offline mode");return}try{await zt(gt(Ne,"professors",y),v),console.log(" Updated professor in Firebase")}catch(x){console.error("Error updating professor:",x),e(E=>E.map(w=>w.id===y?{...w,...v}:w)),console.log(" Updated professor locally (Firebase failed)")}},deleteProfessor:async y=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(v=>v.filter(x=>x.id!==y)),console.log(" Deleted professor in offline mode");return}try{await nr(gt(Ne,"professors",y)),console.log(" Deleted professor from Firebase")}catch(v){console.error("Error deleting professor:",v),e(x=>x.filter(E=>E.id!==y)),console.log(" Deleted professor locally (Firebase failed)")}},isOfflineMode:c}}function ZB(){const[t,e]=_.useState(null),[n,r]=_.useState(!1),{currentUser:s}=eg();_.useEffect(()=>{"Notification"in window&&e(Notification.permission)},[]),_.useEffect(()=>{s&&t==="granted"&&BB().catch(c=>{console.error("Failed to initialize push notifications:",c)})},[s,t]);const a=async()=>{r(!0);try{const c=await FA();e(c?"granted":Notification.permission)}catch(c){console.error("Error requesting notification permission:",c),e(Notification.permission)}finally{r(!1)}};return"Notification"in window?t==="granted"?o.jsx(pe,{className:"border-green-500/50 bg-green-500/10",children:o.jsxs(Ke,{children:[o.jsxs(Ye,{className:"flex items-center gap-2 text-green-600",children:[o.jsx(Sm,{className:"h-5 w-5"}),"Push Notifications Enabled"]}),o.jsx(Ct,{children:"You will receive notifications for new news articles and updates."})]})}):t==="denied"?o.jsx(pe,{className:"border-yellow-500/50 bg-yellow-500/10",children:o.jsxs(Ke,{children:[o.jsxs(Ye,{className:"flex items-center gap-2 text-yellow-600",children:[o.jsx(hD,{className:"h-5 w-5"}),"Notifications Blocked"]}),o.jsx(Ct,{children:"Notifications are blocked. Please enable them in your browser settings to receive updates."})]})}):o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsxs(Ye,{className:"flex items-center gap-2",children:[o.jsx(ol,{className:"h-5 w-5"}),"Enable Push Notifications"]}),o.jsx(Ct,{children:"Get notified when new news articles are published for your batch."})]}),o.jsx(ye,{children:o.jsx(X,{onClick:a,disabled:n,className:"w-full",children:n?"Enabling...":"Enable Notifications"})})]}):null}const e8=[{id:1,type:"news",title:"New cardiology study published",time:"2 hours ago",author:"Dr. Smith"},{id:2,type:"video",title:"Anatomy lecture uploaded",time:"4 hours ago",author:"Prof. Johnson"},{id:3,type:"quiz",title:"Pharmacology quiz created",time:"6 hours ago",author:"Dr. Brown"},{id:4,type:"product",title:"New stethoscope added to store",time:"1 day ago",author:"Admin"}];function t8(){const{news:t,loading:e}=k0(),{products:n,loading:r}=UA(),{professors:s,loading:a}=$A(),{years:c,loading:u}=oo(),h=t.length,f=s.length,p=n.reduce((x,E)=>x+(E.price||0),0);c.reduce((x,E)=>x+E.subjects.reduce((w,b)=>w+b.lectures.reduce((A,j)=>{var T;return A+(((T=j.videos)==null?void 0:T.length)||0)},0),0),0);const y=c.reduce((x,E)=>{var w;return x+(((w=E.subjects)==null?void 0:w.length)||0)},0),v=[{title:"Total News Articles",value:e?"...":String(h),change:"+12%",icon:Tm,color:"text-blue-600"},{title:"Subjects",value:u?"...":String(y),change:"+5%",icon:kr,color:"text-green-600"},{title:"Active Professors",value:a?"...":String(f),change:"+2%",icon:Hc,color:"text-purple-600"},{title:"Store Revenue",value:r?"...":`$${p.toLocaleString()}`,change:"+18%",icon:nC,color:"text-emerald-600"}];return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard"}),o.jsx("p",{className:"text-muted-foreground",children:"Welcome to the MedJust Admin Dashboard"})]}),o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:v.map(x=>o.jsxs(pe,{children:[o.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Ye,{className:"text-sm font-medium",children:x.title}),o.jsx(x.icon,{className:`h-4 w-4 ${x.color}`})]}),o.jsxs(ye,{children:[o.jsx("div",{className:"text-2xl font-bold",children:x.value}),o.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[o.jsxs(Rt,{variant:"secondary",className:"text-green-600",children:[o.jsx(RD,{className:"h-3 w-3 mr-1"}),x.change]}),o.jsx("span",{className:"text-muted-foreground",children:"from last month"})]})]})]},x.title))}),o.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsx(Ye,{children:"Recent Activity"}),o.jsx(Ct,{children:"Latest updates across all modules"})]}),o.jsx(ye,{children:o.jsx("div",{className:"space-y-4",children:e8.map(x=>o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium",children:x.title}),o.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[o.jsx("span",{children:x.author}),o.jsx("span",{children:""}),o.jsx("span",{children:x.time})]})]})]},x.id))})})]}),o.jsx(ZB,{}),o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsx(Ye,{children:"Quick Actions"}),o.jsx(Ct,{children:"Common administrative tasks"})]}),o.jsx(ye,{children:o.jsxs("div",{className:"grid gap-2",children:[o.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[o.jsx(Tm,{className:"h-5 w-5 text-blue-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Create News Article"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Publish new content"})]})]}),o.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[o.jsx(ai,{className:"h-5 w-5 text-green-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Upload Video"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Add learning resource"})]})]}),o.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[o.jsx(Hc,{className:"h-5 w-5 text-purple-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Add Professor"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Register new faculty"})]})]}),o.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[o.jsx(rw,{className:"h-5 w-5 text-emerald-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Add Product"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Expand store catalog"})]})]})]})})]})]})]})}function n8(t,e){const n=_.createContext(e),r=a=>{const{children:c,...u}=a,h=_.useMemo(()=>u,Object.values(u));return o.jsx(n.Provider,{value:h,children:c})};r.displayName=t+"Provider";function s(a){const c=_.useContext(n);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,s]}function r8(t,e=[]){let n=[];function r(a,c){const u=_.createContext(c),h=n.length;n=[...n,c];const f=y=>{var A;const{scope:v,children:x,...E}=y,w=((A=v==null?void 0:v[t])==null?void 0:A[h])||u,b=_.useMemo(()=>E,Object.values(E));return o.jsx(w.Provider,{value:b,children:x})};f.displayName=a+"Provider";function p(y,v){var w;const x=((w=v==null?void 0:v[t])==null?void 0:w[h])||u,E=_.useContext(x);if(E)return E;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${a}\``)}return[f,p]}const s=()=>{const a=n.map(c=>_.createContext(c));return function(u){const h=(u==null?void 0:u[t])||a;return _.useMemo(()=>({[`__scope${t}`]:{...u,[t]:h}}),[u,h])}};return s.scopeName=t,[r,s8(s,...e)]}function s8(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:f})=>{const y=h(a)[`__scope${f}`];return{...u,...y}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return n.scopeName=e.scopeName,n}var yv="focusScope.autoFocusOnMount",vv="focusScope.autoFocusOnUnmount",z1={bubbles:!1,cancelable:!0},i8="FocusScope",P0=_.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...c}=t,[u,h]=_.useState(null),f=Tn(s),p=Tn(a),y=_.useRef(null),v=kt(e,w=>h(w)),x=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let w=function(T){if(x.paused||!u)return;const M=T.target;u.contains(M)?y.current=M:Lo(y.current,{select:!0})},b=function(T){if(x.paused||!u)return;const M=T.relatedTarget;M!==null&&(u.contains(M)||Lo(y.current,{select:!0}))},A=function(T){if(document.activeElement===document.body)for(const $ of T)$.removedNodes.length>0&&Lo(u)};document.addEventListener("focusin",w),document.addEventListener("focusout",b);const j=new MutationObserver(A);return u&&j.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",b),j.disconnect()}}},[r,u,x.paused]),_.useEffect(()=>{if(u){q1.add(x);const w=document.activeElement;if(!u.contains(w)){const A=new CustomEvent(yv,z1);u.addEventListener(yv,f),u.dispatchEvent(A),A.defaultPrevented||(o8(d8(zA(u)),{select:!0}),document.activeElement===w&&Lo(u))}return()=>{u.removeEventListener(yv,f),setTimeout(()=>{const A=new CustomEvent(vv,z1);u.addEventListener(vv,p),u.dispatchEvent(A),A.defaultPrevented||Lo(w??document.body,{select:!0}),u.removeEventListener(vv,p),q1.remove(x)},0)}}},[u,f,p,x]);const E=_.useCallback(w=>{if(!n&&!r||x.paused)return;const b=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,A=document.activeElement;if(b&&A){const j=w.currentTarget,[T,M]=a8(j);T&&M?!w.shiftKey&&A===M?(w.preventDefault(),n&&Lo(T,{select:!0})):w.shiftKey&&A===T&&(w.preventDefault(),n&&Lo(M,{select:!0})):A===j&&w.preventDefault()}},[n,r,x.paused]);return o.jsx(et.div,{tabIndex:-1,...c,ref:v,onKeyDown:E})});P0.displayName=i8;function o8(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Lo(r,{select:e}),document.activeElement!==n)return}function a8(t){const e=zA(t),n=B1(e,t),r=B1(e.reverse(),t);return[n,r]}function zA(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function B1(t,e){for(const n of t)if(!l8(n,{upTo:e}))return n}function l8(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function c8(t){return t instanceof HTMLInputElement&&"select"in t}function Lo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&c8(t)&&e&&t.select()}}var q1=u8();function u8(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=W1(t,e),t.unshift(e)},remove(e){var n;t=W1(t,e),(n=t[0])==null||n.resume()}}}function W1(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function d8(t){return t.filter(e=>e.tagName!=="A")}function h8(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var tg=t=>{const{present:e,children:n}=t,r=f8(e),s=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),a=kt(r.ref,m8(s));return typeof n=="function"||r.isPresent?_.cloneElement(s,{ref:a}):null};tg.displayName="Presence";function f8(t){const[e,n]=_.useState(),r=_.useRef({}),s=_.useRef(t),a=_.useRef("none"),c=t?"mounted":"unmounted",[u,h]=h8(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const f=Zf(r.current);a.current=u==="mounted"?f:"none"},[u]),rn(()=>{const f=r.current,p=s.current;if(p!==t){const v=a.current,x=Zf(f);t?h("MOUNT"):x==="none"||(f==null?void 0:f.display)==="none"?h("UNMOUNT"):h(p&&v!==x?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,h]),rn(()=>{if(e){let f;const p=e.ownerDocument.defaultView??window,y=x=>{const w=Zf(r.current).includes(x.animationName);if(x.target===e&&w&&(h("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",f=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},v=x=>{x.target===e&&(a.current=Zf(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{p.clearTimeout(f),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:_.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function Zf(t){return(t==null?void 0:t.animationName)||"none"}function m8(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var xv=0;function p8(){_.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??H1()),document.body.insertAdjacentElement("beforeend",t[1]??H1()),xv++,()=>{xv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),xv--}},[])}function H1(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Cd="right-scroll-bar-position",jd="width-before-scroll-bar",g8="with-scroll-bars-hidden",y8="--removed-body-scroll-bar-size";function wv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function v8(t,e){var n=_.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var x8=typeof window<"u"?_.useLayoutEffect:_.useEffect,K1=new WeakMap;function BA(t,e){var n=v8(null,function(r){return t.forEach(function(s){return wv(s,r)})});return x8(function(){var r=K1.get(n);if(r){var s=new Set(r),a=new Set(t),c=n.current;s.forEach(function(u){a.has(u)||wv(u,null)}),a.forEach(function(u){s.has(u)||wv(u,c)})}K1.set(n,t)},[t]),n}function w8(t){return t}function _8(t,e){e===void 0&&(e=w8);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var c=e(a,r);return n.push(c),function(){n=n.filter(function(u){return u!==c})}},assignSyncMedium:function(a){for(r=!0;n.length;){var c=n;n=[],c.forEach(a)}n={push:function(u){return a(u)},filter:function(){return n}}},assignMedium:function(a){r=!0;var c=[];if(n.length){var u=n;n=[],u.forEach(a),c=n}var h=function(){var p=c;c=[],p.forEach(a)},f=function(){return Promise.resolve().then(h)};f(),n={push:function(p){c.push(p),f()},filter:function(p){return c=c.filter(p),n}}}};return s}function qA(t){t===void 0&&(t={});var e=_8(null);return e.options=tr({async:!0,ssr:!1},t),e}var WA=function(t){var e=t.sideCar,n=fu(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,tr({},n))};WA.isSideCarExport=!0;function HA(t,e){return t.useMedium(e),WA}var KA=qA(),_v=function(){},ng=_.forwardRef(function(t,e){var n=_.useRef(null),r=_.useState({onScrollCapture:_v,onWheelCapture:_v,onTouchMoveCapture:_v}),s=r[0],a=r[1],c=t.forwardProps,u=t.children,h=t.className,f=t.removeScrollBar,p=t.enabled,y=t.shards,v=t.sideCar,x=t.noIsolation,E=t.inert,w=t.allowPinchZoom,b=t.as,A=b===void 0?"div":b,j=t.gapMode,T=fu(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=v,$=BA([n,e]),z=tr(tr({},T),s);return _.createElement(_.Fragment,null,p&&_.createElement(M,{sideCar:KA,removeScrollBar:f,shards:y,noIsolation:x,inert:E,setCallbacks:a,allowPinchZoom:!!w,lockRef:n,gapMode:j}),c?_.cloneElement(_.Children.only(u),tr(tr({},z),{ref:$})):_.createElement(A,tr({},z,{className:h,ref:$}),u))});ng.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ng.classNames={fullWidth:jd,zeroRight:Cd};var b8=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function E8(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=b8();return e&&t.setAttribute("nonce",e),t}function N8(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function S8(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var C8=function(){var t=0,e=null;return{add:function(n){t==0&&(e=E8())&&(N8(e,n),S8(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},j8=function(){var t=C8();return function(e,n){_.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},R0=function(){var t=j8(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},T8={left:0,top:0,right:0,gap:0},bv=function(t){return parseInt(t||"",10)||0},I8=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[bv(n),bv(r),bv(s)]},A8=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return T8;var e=I8(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},k8=R0(),Ac="data-scroll-locked",P8=function(t,e,n,r){var s=t.left,a=t.top,c=t.right,u=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(g8,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(Ac,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Cd,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(jd,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Cd," .").concat(Cd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(jd," .").concat(jd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ac,`] {
    `).concat(y8,": ").concat(u,`px;
  }
`)},G1=function(){var t=parseInt(document.body.getAttribute(Ac)||"0",10);return isFinite(t)?t:0},R8=function(){_.useEffect(function(){return document.body.setAttribute(Ac,(G1()+1).toString()),function(){var t=G1()-1;t<=0?document.body.removeAttribute(Ac):document.body.setAttribute(Ac,t.toString())}},[])},GA=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;R8();var a=_.useMemo(function(){return A8(s)},[s]);return _.createElement(k8,{styles:P8(a,!e,s,n?"":"!important")})},Vx=!1;if(typeof window<"u")try{var em=Object.defineProperty({},"passive",{get:function(){return Vx=!0,!0}});window.addEventListener("test",em,em),window.removeEventListener("test",em,em)}catch{Vx=!1}var hc=Vx?{passive:!1}:!1,D8=function(t){return t.tagName==="TEXTAREA"},QA=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!D8(t)&&n[e]==="visible")},O8=function(t){return QA(t,"overflowY")},L8=function(t){return QA(t,"overflowX")},Q1=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=YA(t,r);if(s){var a=XA(t,r),c=a[1],u=a[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},M8=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},F8=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},YA=function(t,e){return t==="v"?O8(e):L8(e)},XA=function(t,e){return t==="v"?M8(e):F8(e)},V8=function(t,e){return t==="h"&&e==="rtl"?-1:1},U8=function(t,e,n,r,s){var a=V8(t,window.getComputedStyle(e).direction),c=a*r,u=n.target,h=e.contains(u),f=!1,p=c>0,y=0,v=0;do{var x=XA(t,u),E=x[0],w=x[1],b=x[2],A=w-b-a*E;(E||A)&&YA(t,u)&&(y+=A,v+=E),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(p&&Math.abs(y)<1||!p&&Math.abs(v)<1)&&(f=!0),f},tm=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Y1=function(t){return[t.deltaX,t.deltaY]},X1=function(t){return t&&"current"in t?t.current:t},$8=function(t,e){return t[0]===e[0]&&t[1]===e[1]},z8=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},B8=0,fc=[];function q8(t){var e=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),s=_.useState(B8++)[0],a=_.useState(R0)[0],c=_.useRef(t);_.useEffect(function(){c.current=t},[t]),_.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var w=Oj([t.lockRef.current],(t.shards||[]).map(X1),!0).filter(Boolean);return w.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),w.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var u=_.useCallback(function(w,b){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!c.current.allowPinchZoom;var A=tm(w),j=n.current,T="deltaX"in w?w.deltaX:j[0]-A[0],M="deltaY"in w?w.deltaY:j[1]-A[1],$,z=w.target,R=Math.abs(T)>Math.abs(M)?"h":"v";if("touches"in w&&R==="h"&&z.type==="range")return!1;var I=Q1(R,z);if(!I)return!0;if(I?$=R:($=R==="v"?"h":"v",I=Q1(R,z)),!I)return!1;if(!r.current&&"changedTouches"in w&&(T||M)&&(r.current=$),!$)return!0;var k=r.current||$;return U8(k,b,w,k==="h"?T:M)},[]),h=_.useCallback(function(w){var b=w;if(!(!fc.length||fc[fc.length-1]!==a)){var A="deltaY"in b?Y1(b):tm(b),j=e.current.filter(function($){return $.name===b.type&&($.target===b.target||b.target===$.shadowParent)&&$8($.delta,A)})[0];if(j&&j.should){b.cancelable&&b.preventDefault();return}if(!j){var T=(c.current.shards||[]).map(X1).filter(Boolean).filter(function($){return $.contains(b.target)}),M=T.length>0?u(b,T[0]):!c.current.noIsolation;M&&b.cancelable&&b.preventDefault()}}},[]),f=_.useCallback(function(w,b,A,j){var T={name:w,delta:b,target:A,should:j,shadowParent:W8(A)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(M){return M!==T})},1)},[]),p=_.useCallback(function(w){n.current=tm(w),r.current=void 0},[]),y=_.useCallback(function(w){f(w.type,Y1(w),w.target,u(w,t.lockRef.current))},[]),v=_.useCallback(function(w){f(w.type,tm(w),w.target,u(w,t.lockRef.current))},[]);_.useEffect(function(){return fc.push(a),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:v}),document.addEventListener("wheel",h,hc),document.addEventListener("touchmove",h,hc),document.addEventListener("touchstart",p,hc),function(){fc=fc.filter(function(w){return w!==a}),document.removeEventListener("wheel",h,hc),document.removeEventListener("touchmove",h,hc),document.removeEventListener("touchstart",p,hc)}},[]);var x=t.removeScrollBar,E=t.inert;return _.createElement(_.Fragment,null,E?_.createElement(a,{styles:z8(s)}):null,x?_.createElement(GA,{gapMode:t.gapMode}):null)}function W8(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const H8=HA(KA,q8);var JA=_.forwardRef(function(t,e){return _.createElement(ng,tr({},t,{ref:e,sideCar:H8}))});JA.classNames=ng.classNames;var K8=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},mc=new WeakMap,nm=new WeakMap,rm={},Ev=0,ZA=function(t){return t&&(t.host||ZA(t.parentNode))},G8=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=ZA(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Q8=function(t,e,n,r){var s=G8(e,Array.isArray(t)?t:[t]);rm[n]||(rm[n]=new WeakMap);var a=rm[n],c=[],u=new Set,h=new Set(s),f=function(y){!y||u.has(y)||(u.add(y),f(y.parentNode))};s.forEach(f);var p=function(y){!y||h.has(y)||Array.prototype.forEach.call(y.children,function(v){if(u.has(v))p(v);else try{var x=v.getAttribute(r),E=x!==null&&x!=="false",w=(mc.get(v)||0)+1,b=(a.get(v)||0)+1;mc.set(v,w),a.set(v,b),c.push(v),w===1&&E&&nm.set(v,!0),b===1&&v.setAttribute(n,"true"),E||v.setAttribute(r,"true")}catch(A){console.error("aria-hidden: cannot operate on ",v,A)}})};return p(e),u.clear(),Ev++,function(){c.forEach(function(y){var v=mc.get(y)-1,x=a.get(y)-1;mc.set(y,v),a.set(y,x),v||(nm.has(y)||y.removeAttribute(r),nm.delete(y)),x||y.removeAttribute(n)}),Ev--,Ev||(mc=new WeakMap,mc=new WeakMap,nm=new WeakMap,rm={})}},ek=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=K8(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),Q8(r,s,n,"aria-hidden")):function(){return null}},D0="Dialog",[tk,PW]=r8(D0),[Y8,qs]=tk(D0),nk=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:c=!0}=t,u=_.useRef(null),h=_.useRef(null),[f=!1,p]=cl({prop:r,defaultProp:s,onChange:a});return o.jsx(Y8,{scope:e,triggerRef:u,contentRef:h,contentId:Jo(),titleId:Jo(),descriptionId:Jo(),open:f,onOpenChange:p,onOpenToggle:_.useCallback(()=>p(y=>!y),[p]),modal:c,children:n})};nk.displayName=D0;var rk="DialogTrigger",sk=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qs(rk,n),a=kt(e,s.triggerRef);return o.jsx(et.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":M0(s.open),...r,ref:a,onClick:Qe(t.onClick,s.onOpenToggle)})});sk.displayName=rk;var O0="DialogPortal",[X8,ik]=tk(O0,{forceMount:void 0}),ok=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,a=qs(O0,e);return o.jsx(X8,{scope:e,forceMount:n,children:_.Children.map(r,c=>o.jsx(tg,{present:n||a.open,children:o.jsx(VC,{asChild:!0,container:s,children:c})}))})};ok.displayName=O0;var ap="DialogOverlay",ak=_.forwardRef((t,e)=>{const n=ik(ap,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=qs(ap,t.__scopeDialog);return a.modal?o.jsx(tg,{present:r||a.open,children:o.jsx(J8,{...s,ref:e})}):null});ak.displayName=ap;var J8=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qs(ap,n);return o.jsx(JA,{as:ll,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(et.div,{"data-state":M0(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),vl="DialogContent",lk=_.forwardRef((t,e)=>{const n=ik(vl,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=qs(vl,t.__scopeDialog);return o.jsx(tg,{present:r||a.open,children:a.modal?o.jsx(Z8,{...s,ref:e}):o.jsx(e7,{...s,ref:e})})});lk.displayName=vl;var Z8=_.forwardRef((t,e)=>{const n=qs(vl,t.__scopeDialog),r=_.useRef(null),s=kt(e,n.contentRef,r);return _.useEffect(()=>{const a=r.current;if(a)return ek(a)},[]),o.jsx(ck,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Qe(t.onCloseAutoFocus,a=>{var c;a.preventDefault(),(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Qe(t.onPointerDownOutside,a=>{const c=a.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&a.preventDefault()}),onFocusOutside:Qe(t.onFocusOutside,a=>a.preventDefault())})}),e7=_.forwardRef((t,e)=>{const n=qs(vl,t.__scopeDialog),r=_.useRef(!1),s=_.useRef(!1);return o.jsx(ck,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var c,u;(c=t.onCloseAutoFocus)==null||c.call(t,a),a.defaultPrevented||(r.current||(u=n.triggerRef.current)==null||u.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var h,f;(h=t.onInteractOutside)==null||h.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const c=a.target;((f=n.triggerRef.current)==null?void 0:f.contains(c))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),ck=_.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...c}=t,u=qs(vl,n),h=_.useRef(null),f=kt(e,h);return p8(),o.jsxs(o.Fragment,{children:[o.jsx(P0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(iw,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":M0(u.open),...c,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(t7,{titleId:u.titleId}),o.jsx(r7,{contentRef:h,descriptionId:u.descriptionId})]})]})}),L0="DialogTitle",uk=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qs(L0,n);return o.jsx(et.h2,{id:s.titleId,...r,ref:e})});uk.displayName=L0;var dk="DialogDescription",hk=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qs(dk,n);return o.jsx(et.p,{id:s.descriptionId,...r,ref:e})});hk.displayName=dk;var fk="DialogClose",mk=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qs(fk,n);return o.jsx(et.button,{type:"button",...r,ref:e,onClick:Qe(t.onClick,()=>s.onOpenChange(!1))})});mk.displayName=fk;function M0(t){return t?"open":"closed"}var pk="DialogTitleWarning",[RW,gk]=n8(pk,{contentName:vl,titleName:L0,docsSlug:"dialog"}),t7=({titleId:t})=>{const e=gk(pk),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return _.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},n7="DialogDescriptionWarning",r7=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${gk(n7).contentName}}.`;return _.useEffect(()=>{var a;const s=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},s7=nk,i7=sk,o7=ok,yk=ak,vk=lk,xk=uk,wk=hk,_k=mk;const lp=s7,bk=i7,a7=o7,Ux=_k,Ek=_.forwardRef(({className:t,...e},n)=>o.jsx(yk,{ref:n,className:Xe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));Ek.displayName=yk.displayName;const Yd=_.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(a7,{children:[o.jsx(Ek,{}),o.jsxs(vk,{ref:r,className:Xe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,o.jsxs(_k,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(Kc,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Yd.displayName=vk.displayName;const Xd=({className:t,...e})=>o.jsx("div",{className:Xe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Xd.displayName="DialogHeader";const cp=({className:t,...e})=>o.jsx("div",{className:Xe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});cp.displayName="DialogFooter";const Jd=_.forwardRef(({className:t,...e},n)=>o.jsx(xk,{ref:n,className:Xe("text-lg font-semibold leading-none tracking-tight",t),...e}));Jd.displayName=xk.displayName;const Zd=_.forwardRef(({className:t,...e},n)=>o.jsx(wk,{ref:n,className:Xe("text-sm text-muted-foreground",t),...e}));Zd.displayName=wk.displayName;const ls=_.forwardRef(({className:t,...e},n)=>o.jsx("textarea",{className:Xe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));ls.displayName="Textarea";function Nk(t){const e=_.useRef({value:t,previous:t});return _.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var F0="Switch",[l7,DW]=to(F0),[c7,u7]=l7(F0),Sk=_.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:c,disabled:u,value:h="on",onCheckedChange:f,...p}=t,[y,v]=_.useState(null),x=kt(e,j=>v(j)),E=_.useRef(!1),w=y?!!y.closest("form"):!0,[b=!1,A]=cl({prop:s,defaultProp:a,onChange:f});return o.jsxs(c7,{scope:n,checked:b,disabled:u,children:[o.jsx(et.button,{type:"button",role:"switch","aria-checked":b,"aria-required":c,"data-state":Tk(b),"data-disabled":u?"":void 0,disabled:u,value:h,...p,ref:x,onClick:Qe(t.onClick,j=>{A(T=>!T),w&&(E.current=j.isPropagationStopped(),E.current||j.stopPropagation())})}),w&&o.jsx(d7,{control:y,bubbles:!E.current,name:r,value:h,checked:b,required:c,disabled:u,style:{transform:"translateX(-100%)"}})]})});Sk.displayName=F0;var Ck="SwitchThumb",jk=_.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=u7(Ck,n);return o.jsx(et.span,{"data-state":Tk(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});jk.displayName=Ck;var d7=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,a=_.useRef(null),c=Nk(n),u=CC(e);return _.useEffect(()=>{const h=a.current,f=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&y){const v=new Event("click",{bubbles:r});y.call(h,n),h.dispatchEvent(v)}},[c,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...t.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Tk(t){return t?"checked":"unchecked"}var Ik=Sk,h7=jk;const Ak=_.forwardRef(({className:t,...e},n)=>o.jsx(Ik,{className:Xe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:o.jsx(h7,{className:Xe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ak.displayName=Ik.displayName;function f7({news:t,onClose:e,onSave:n}){const{batches:r}=oo(),[s,a]=_.useState(null),[c,u]=_.useState({title:"",content:"",imageUrl:"",videoUrl:"",tags:[],isPinned:!1,attachments:[],batchId:""}),[h,f]=_.useState(""),[p,y]=_.useState(!1);_.useEffect(()=>{t&&u(b=>({...b,title:t.title||"",content:t.content||"",imageUrl:t.imageUrl||"",videoUrl:t.videoUrl||"",tags:t.tags||[],isPinned:t.isPinned||!1,attachments:t.attachments||[],batchId:t.batchId||""}))},[t]),_.useEffect(()=>{let b=!0;return(async()=>{try{if(r&&r.length>0||s)return;const{collection:j}=await _S(async()=>{const{collection:$}=await Promise.resolve().then(()=>vz);return{collection:$}},void 0),M=(await lt(j(Ne,"batches"))).docs.map($=>({id:$.id,batchName:$.data().batch_name||$.data().batchName||$.id}));b&&M.length>0&&a(M)}catch{}})(),()=>{b=!1}},[r,s]);const v=async b=>{b.preventDefault(),y(!0);try{const A={...c,yearNumber:void 0,updatedAt:new Date,...t?{}:{createdAt:new Date,authorName:"Current User",authorId:"current-user-id",viewsCount:0}};n(A)}catch(A){console.error("Error saving news:",A)}finally{y(!1)}},x=()=>{h.trim()&&!c.tags.includes(h.trim())&&(u(b=>({...b,tags:[...b.tags,h.trim()]})),f(""))},E=b=>{u(A=>({...A,tags:A.tags.filter(j=>j!==b)}))},w=b=>{b.key==="Enter"&&(b.preventDefault(),x())};return o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(X,{variant:"ghost",onClick:e,children:[o.jsx(us,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Article":"Create Article"}),o.jsx("p",{className:"text-muted-foreground",children:t?"Update the news article details":"Create a new news article for medical students"})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Ak,{id:"pinned",checked:c.isPinned,onCheckedChange:b=>u(A=>({...A,isPinned:b}))}),o.jsxs(Pe,{htmlFor:"pinned",className:"flex items-center gap-2",children:[o.jsx(rC,{className:"h-4 w-4"}),"Pin Article"]})]})})]}),o.jsx("form",{onSubmit:v,className:"space-y-6",children:o.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsx(Ye,{children:"Article Content"}),o.jsx(Ct,{children:"Main article information and content"})]}),o.jsxs(ye,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"title",children:"Title *"}),o.jsx(we,{id:"title",placeholder:"Enter article title...",value:c.title,onChange:b=>u(A=>({...A,title:b.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"content",children:"Content *"}),o.jsx(ls,{id:"content",placeholder:"Write your article content here...",value:c.content,onChange:b=>u(A=>({...A,content:b.target.value})),rows:12,required:!0})]})]})]}),o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsx(Ye,{children:"Tags"}),o.jsx(Ct,{children:"Add relevant tags to help categorize this article"})]}),o.jsxs(ye,{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx(we,{placeholder:"Add a tag...",value:h,onChange:b=>f(b.target.value),onKeyPress:w}),o.jsxs(X,{type:"button",onClick:x,variant:"outline",children:[o.jsx(yd,{className:"h-4 w-4 mr-2"}),"Add"]})]}),c.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map(b=>o.jsxs(Rt,{variant:"secondary",className:"flex items-center gap-1",children:[b,o.jsx("button",{type:"button",onClick:()=>E(b),className:"ml-1 hover:text-destructive",children:o.jsx(Kc,{className:"h-3 w-3"})})]},b))})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsx(Ye,{children:"Media"}),o.jsx(Ct,{children:"Add images and videos to your article"})]}),o.jsxs(ye,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"imageUrl",children:"Featured Image URL"}),o.jsx(we,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:c.imageUrl,onChange:b=>u(A=>({...A,imageUrl:b.target.value}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"videoUrl",children:"Video URL"}),o.jsx(we,{id:"videoUrl",placeholder:"https://youtube.com/watch?v=...",value:c.videoUrl,onChange:b=>u(A=>({...A,videoUrl:b.target.value}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"batchId",children:"Related Batch"}),o.jsxs("select",{id:"batchId",value:c.batchId,onChange:b=>u(A=>({...A,batchId:b.target.value})),className:"w-full border rounded px-3 py-2",children:[o.jsx("option",{value:"",children:"-- Not related to a specific batch --"}),((s&&s.length>0?s:r)||[]).map(b=>o.jsx("option",{value:b.id,children:b.batchName||b.id},b.id))]})]}),c.imageUrl&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{children:"Preview"}),o.jsx("img",{src:c.imageUrl,alt:"Preview",className:"w-full h-32 object-cover rounded-lg border",onError:b=>{b.currentTarget.style.display="none"}})]})]})]}),o.jsxs(pe,{children:[o.jsx(Ke,{children:o.jsx(Ye,{children:"Actions"})}),o.jsxs(ye,{className:"space-y-4",children:[o.jsxs(X,{type:"submit",className:"w-full",disabled:p,children:[o.jsx(no,{className:"h-4 w-4 mr-2"}),p?"Saving...":t?"Update Article":"Create Article"]}),o.jsxs(X,{type:"button",variant:"outline",className:"w-full",onClick:e,children:[o.jsx(us,{className:"h-4 w-4 mr-2"}),"Go back"]})]})]})]})]})})]})}function kk(t){const[e,n]=_.useState([]),[r,s]=_.useState(!0),[a,c]=_.useState(null);_.useEffect(()=>{let x;x=nn(Fe(Ne,"notifications"),io("createdAt","desc"));const E=vi(x,w=>{const b=[];w.forEach(A=>{var T;const j=A.data();b.push({id:A.id,userId:j.userId||"",title:j.title||"",message:j.message||"",type:j.type||"system",relatedId:j.relatedId||void 0,read:j.read||!1,createdAt:((T=j.createdAt)==null?void 0:T.toDate())||new Date,batchId:j.batchId||void 0})}),n(b),s(!1)},w=>{console.error("Error fetching notifications:",w),c(w.message||"Failed to fetch notifications"),s(!1)});return()=>E()},[t]);const u=async x=>{try{const E={...x,createdAt:x.createdAt instanceof Date?pt.fromDate(x.createdAt):np()};Object.keys(E).forEach(b=>{E[b]===void 0&&delete E[b]});const w=await pn(Fe(Ne,"notifications"),E);return console.log(" Notification created successfully with ID:",w.id),w.id}catch(E){throw console.error(" Error creating notification:",E),new Error(`Failed to create notification: ${E.message||"Check Firebase permissions"}`)}},h=async(x,E)=>{try{const w={...E};E.createdAt instanceof Date&&(w.createdAt=pt.fromDate(E.createdAt)),Object.keys(w).forEach(b=>{w[b]===void 0&&delete w[b]}),await zt(gt(Ne,"notifications",x),w)}catch(w){throw console.error("Error updating notification:",w),new Error(`Failed to update notification: ${w.message||"Check Firebase permissions"}`)}},f=async x=>{try{await zt(gt(Ne,"notifications",x),{read:!0})}catch(E){throw console.error("Error marking notification as read:",E),new Error(`Failed to mark notification as read: ${E.message||"Check Firebase permissions"}`)}},p=async x=>{try{const E=x?nn(Fe(Ne,"notifications"),sa("userId","==",x),sa("read","==",!1)):nn(Fe(Ne,"notifications"),sa("read","==",!1)),b=(await lt(E)).docs.map(A=>zt(A.ref,{read:!0}));await Promise.all(b)}catch(E){throw console.error("Error marking all notifications as read:",E),new Error(`Failed to mark all notifications as read: ${E.message||"Check Firebase permissions"}`)}},y=async x=>{try{await nr(gt(Ne,"notifications",x))}catch(E){throw console.error("Error deleting notification:",E),new Error(`Failed to delete notification: ${E.message||"Check Firebase permissions"}`)}},v=e.filter(x=>!x.read).length;return{notifications:e,loading:r,error:a,createNotification:u,updateNotification:h,markAsRead:f,markAllAsRead:p,deleteNotification:y,unreadCount:v}}const m7=[{id:"user_1",displayName:"Ali Ahmed",email:"ali.ahmed@example.com",role:"student",photoURL:"",createdAt:new Date},{id:"user_2",displayName:"Mona Hassan",email:"mona.hassan@example.com",role:"staff",photoURL:"",createdAt:new Date(Date.now()-1e3*60*60*24)}];function rg(){const[t,e]=_.useState([]),[n,r]=_.useState(!0),[s,a]=_.useState(null),[c,u]=_.useState(!1),{years:h}=oo();return _.useEffect(()=>{const y=async()=>{try{const x=nn(Fe(Ne,"users"));await lt(x);const E=nn(Fe(Ne,"users"),io("createdAt","desc")),w=vi(E,b=>{const A=[];b.forEach(T=>{var I,k;const M=T.data(),$=M.yearId||M.year||M.year_id||M.yearId||null;let z=$,R="-";if(typeof $=="string"&&$.includes(":")){const[L,D]=$.split(":",2);z=L||null,D&&D.trim()&&(R=D.trim())}if(z&&R==="-"){const L=h.find(D=>D.id===z);L&&(L.batchName?R=L.batchName:R=`Year ${{1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six"}[L.yearNumber]||String(L.yearNumber)}`)}A.push({id:T.id,displayName:M.displayName||M.name||"",email:M.email||"",role:M.role||"student",photoURL:M.photoURL||M.avatar||"",createdAt:((k=(I=M.createdAt)==null?void 0:I.toDate)==null?void 0:k.call(I))||void 0,yearId:z||void 0,yearLabel:R})}),e(A);const j=Array.from(new Set(A.map(T=>T.yearId).filter(Boolean).filter(T=>!h.find(M=>M.id===T))));j.length>0&&Promise.all(j.map(async T=>{try{const $=(await lt(Rr(Ne,"years"))).docs.find(k=>k.id===T);if(!$)return null;const z=$.data(),R=z.yearNumber||z.order||(()=>{const k=(z.name||"").match(/\d+/);return k?parseInt(k[0]):void 0})(),I=z.batchName||(R?`Year ${R}`:void 0)||void 0;return{id:T,label:I}}catch{return null}})).then(T=>{const M={};T.forEach($=>{$&&$.id&&$.label&&(M[$.id]=$.label)}),Object.keys(M).length>0&&e($=>$.map(z=>z.yearId&&M[z.yearId]?{...z,yearLabel:M[z.yearId]}:z))}),r(!1)},b=>{console.error("Failed to listen to users:",b),v()});return()=>w()}catch(x){console.error("Failed to load users, entering offline mode:",x),v()}},v=()=>{u(!0),e(m7),r(!1),a(null)};y()},[]),_.useEffect(()=>{!h||h.length===0||e(y=>y.map(v=>{if(!v)return v;const x=v.yearId||null;if(!x)return v;const E=h.find(j=>j.id===x);if(!E)return v;const b={1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six"}[E.yearNumber]||String(E.yearNumber),A=E.batchName?E.batchName:`Year ${b}`;return{...v,yearLabel:A}}))},[h]),{users:t,loading:n,error:s,updateUser:async(y,v)=>{if(c||y.startsWith("mock_")||y.startsWith("offline_")){e(x=>x.map(E=>E.id===y?{...E,...v}:E));return}try{await zt(gt(Ne,"users",y),v)}catch(x){console.error("Failed to update user:",x),e(E=>E.map(w=>w.id===y?{...w,...v}:w))}},deleteUser:async y=>{if(c||y.startsWith("mock_")||y.startsWith("offline_")){e(v=>v.filter(x=>x.id!==y));return}try{await nr(gt(Ne,"users",y))}catch(v){console.error("Failed to delete user:",v),e(x=>x.filter(E=>E.id!==y))}},isOfflineMode:c}}function p7(){var L;const[t,e]=_.useState(""),[n,r]=_.useState(null),[s,a]=_.useState(!1),[c,u]=_.useState("all"),[h,f]=_.useState(null),{news:p,loading:y,error:v,createNews:x,updateNews:E,deleteNews:w}=k0(),{notifications:b}=kk(),{users:A}=rg(),j=p.filter(D=>D.title.toLowerCase().includes(t.toLowerCase())||D.tags.some(O=>O.toLowerCase().includes(t.toLowerCase()))),T=D=>D?b.filter(O=>O.relatedId===D):[],M=_.useMemo(()=>j.map(D=>({...D,notificationCount:T(D.id).length,notifications:T(D.id)})),[j,b]),$=D=>{const O=A.find(F=>F.id===D);return(O==null?void 0:O.displayName)||(O==null?void 0:O.email)||D},z=D=>{f(D)},R=D=>{r(D),a(!0)},I=async D=>{if(window.confirm("Are you sure you want to delete this article?"))try{await w(D)}catch(O){console.error("Error deleting news:",O),alert("Failed to delete article. Please try again.")}},k=()=>{r(null),a(!0)};return s?o.jsx(f7,{news:n,onClose:()=>{a(!1),r(null)},onSave:async D=>{try{n?await E(n.id,D):await x(D),a(!1),r(null)}catch(O){console.error("Error saving news:",O),alert("Failed to save article. Please try again.")}}}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"News Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Create and manage news articles for medical students"})]}),o.jsxs(X,{onClick:k,className:"flex items-center gap-2",children:[o.jsx(Jt,{className:"h-4 w-4"}),"Create Article"]})]}),o.jsx(pe,{children:o.jsx(ye,{className:"pt-6",children:o.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:o.jsxs("div",{className:"relative flex-1",children:[o.jsx(xa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(we,{placeholder:"Search articles by title or tags...",value:t,onChange:D=>e(D.target.value),className:"pl-10"})]})})})}),y&&o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx(ds,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading news articles..."})]})}),v&&o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:" Error loading news"}),o.jsx("p",{className:"text-muted-foreground",children:v})]})}),!y&&!v&&o.jsx("div",{className:"space-y-4",children:M.map(D=>o.jsx(pe,{className:"hover:shadow-md transition-shadow",children:o.jsx(ye,{className:"pt-6",children:o.jsxs("div",{className:"flex gap-4",children:[D.imageUrl&&o.jsx("img",{src:D.imageUrl,alt:D.title,className:"w-24 h-24 object-cover rounded-lg flex-shrink-0"}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:D.title}),D.isPinned&&o.jsx(rC,{className:"h-4 w-4 text-yellow-500"})]}),o.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mb-3",children:D.content}),o.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:D.tags.map(O=>o.jsxs(Rt,{variant:"secondary",className:"text-xs",children:[o.jsx(yd,{className:"h-3 w-3 mr-1"}),O]},O))}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(as,{className:"h-3 w-3"}),D.authorName]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ec,{className:"h-3 w-3"}),D.createdAt.toLocaleDateString()]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(bD,{className:"h-3 w-3"}),D.viewsCount," views"]}),D.notificationCount>0&&o.jsxs("button",{onClick:()=>z(D.id),className:"flex items-center gap-1 hover:text-primary transition-colors cursor-pointer",children:[o.jsx(ol,{className:"h-3 w-3"}),D.notificationCount," notification",D.notificationCount>1?"s":""]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[D.notificationCount>0&&o.jsxs(X,{variant:"ghost",size:"icon",onClick:()=>z(D.id),className:"relative",title:`View ${D.notificationCount} notification${D.notificationCount>1?"s":""}`,children:[o.jsx(eC,{className:"h-4 w-4"}),o.jsx(Rt,{variant:"default",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:D.notificationCount})]}),o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>R(D),children:o.jsx(mr,{className:"h-4 w-4"})}),o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>I(D.id),className:"text-destructive hover:text-destructive",children:o.jsx(un,{className:"h-4 w-4"})})]})]})})]})})},D.id))}),!y&&!v&&j.length===0&&o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx(Tm,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No articles found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:t?"No articles match your search criteria.":"Start by creating your first news article."}),o.jsxs(X,{onClick:k,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Create Article"]})]})}),o.jsx(lp,{open:h!==null,onOpenChange:D=>!D&&f(null),children:o.jsxs(Yd,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[o.jsxs(Xd,{children:[o.jsxs(Jd,{className:"flex items-center gap-2",children:[o.jsx(ol,{className:"h-5 w-5"}),"Notifications for News Article"]}),o.jsx(Zd,{children:h&&((L=p.find(D=>D.id===h))==null?void 0:L.title)})]}),h&&o.jsx("div",{className:"space-y-3 mt-4",children:T(h).length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(ol,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No notifications found for this article"})]}):T(h).map(D=>o.jsx(pe,{className:D.read?"opacity-75":"border-primary/50",children:o.jsx(ye,{className:"pt-4",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[!D.read&&o.jsx(Rt,{variant:"default",className:"h-2 w-2 p-0 rounded-full"}),o.jsx("h3",{className:"font-semibold",children:D.title}),o.jsx(Rt,{variant:"outline",children:D.type})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:D.message}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(as,{className:"h-3 w-3"}),$(D.userId)]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ec,{className:"h-3 w-3"}),D.createdAt.toLocaleDateString()]}),D.batchId&&o.jsxs(Rt,{variant:"secondary",className:"text-xs",children:["Batch: ",D.batchId.slice(0,8),"..."]})]})]}),!D.read&&o.jsx(Rt,{variant:"default",className:"text-xs",children:"Unread"})]})})},D.id))})]})})]})}async function Mn(t){let e="dflp2vxn2",n="Med_just";const r="".replace(/\/$/,"");try{const j=await fetch(`${r}/api/cloudinary/config`);if(j.ok)try{const T=await j.json();e=T.cloudName||e,n=T.uploadPreset||T.upload_preset||n}catch{const T=j.headers.get("x-cloudinary-cloudname"),M=j.headers.get("x-cloudinary-upload-preset");T&&(e=e||T),M&&(n=n||M)}}catch{}if(!e)try{const j=localStorage.getItem("cloudinary.cloudName"),T=localStorage.getItem("cloudinary.uploadPreset");j&&(e=j,n=n||T||n)}catch{}if(!e)throw new Error("Cloudinary cloud name is not configured. Set VITE_CLOUDINARY_CLOUD_NAME in your environment or provide server config.");const s=`https://api.cloudinary.com/v1_1/${e}/upload`;try{const j=await J1(t);if(j&&typeof j=="string"&&j.startsWith("http"))return j}catch(j){const T=String((j==null?void 0:j.message)||j||"");console.warn("Server upload failed, falling back to client upload:",T)}async function a(j){if(j.bodyUsed)throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.");try{const T=j.clone();try{return{json:await T.json(),text:null}}catch{}}catch{if(j.bodyUsed)throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.")}try{const T=await j.text();try{return{json:JSON.parse(T),text:T}}catch{return{json:null,text:T}}}catch(T){throw new Error("Could not read response body: "+String(T))}}async function c(j,T){const M=async(z,R)=>{const I=await fetch(z,R),k=await a(I).catch(L=>{throw L});return{res:I,body:k}},$=typeof j=="string"?j:j.url;try{return await M($,T)}catch(z){const R=String((z==null?void 0:z.message)||z||"").toLowerCase();if(R.includes("response body already read")||R.includes("body already read")){const I=$+($.includes("?")?`&_retry=${Date.now()}`:`?_retry=${Date.now()}`);try{return await M(I,T)}catch{}}if(R.includes("failed to fetch")||R.includes("networkerror")||R.includes("network request failed")||R.includes("script error")||R.includes("response body already read")||R.includes("body already read"))try{return await(async()=>await new Promise((I,k)=>{const L=new XMLHttpRequest;let D=T&&T.method||"GET",O=!1;try{if(L.open(D,$,!0),T&&T.headers){const F=T.headers;Object.keys(F).forEach(ne=>{try{L.setRequestHeader(ne,F[ne])}catch{}})}if(L.onreadystatechange=()=>{if(L.readyState!==4)return;const F=L.status||0,ne={};(L.getAllResponseHeaders()||"").split(`\r
`).forEach(Y=>{const U=Y.indexOf(":");if(U>0){const H=Y.substring(0,U).trim().toLowerCase(),le=Y.substring(U+1).trim();ne[H]=le}});const Q={ok:F>=200&&F<400,status:F,headers:{get:Y=>ne[Y.toLowerCase()]||null}},ee=L.responseText;let q=null;try{q=ee?JSON.parse(ee):null}catch{q=null}I({res:Q,body:{json:q,text:ee}})},L.onerror=()=>k(new Error("XHR network error")),L.ontimeout=()=>k(new Error("XHR timeout")),T&&T.body)try{if(T.body instanceof FormData)O=!0,L.send(T.body);else if(typeof T.body=="string")L.send(T.body);else try{L.send(JSON.stringify(T.body))}catch{L.send(String(T.body))}}catch(F){k(F)}else L.send()}catch(F){k(F)}}))()}catch{}throw z}}if(n){const j=new FormData;j.append("file",t),j.append("upload_preset",n);const{res:T,body:M}=await c(s,{method:"POST",body:j});if(!T.ok){const $=M!=null&&M.json?JSON.stringify(M.json):(M==null?void 0:M.text)||"";throw new Error(`Cloudinary upload failed: ${T.status} ${$}`)}if(M.json&&(M.json.secure_url||M.json.url))return M.json.secure_url||M.json.url;if(M.text&&typeof M.text=="string"&&M.text.startsWith("http"))return M.text;throw new Error("Cloudinary upload returned unexpected response.")}const u="686641252611351";let h,f;try{const j=await c(`${r}/api/cloudinary/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:u})});h=j.res,f=j.body}catch(j){const T=String((j==null?void 0:j.message)||j||"");if(T.toLowerCase().includes("response body already read")||T.toLowerCase().includes("body already read")){try{const M=await fetch(`${r}/api/cloudinary/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:u})}),$=M.headers.get("x-cloudinary-signature"),z=M.headers.get("x-cloudinary-timestamp"),R=M.headers.get("x-cloudinary-apikey"),I=M.headers.get("x-cloudinary-cloudname"),k=M.headers.get("x-cloudinary-upload-preset");if($&&z){const L=R||u||null,D=$,O=Number(z);I&&(e=e||I);const F=new FormData;F.append("file",t),L&&F.append("api_key",L),F.append("timestamp",String(O)),F.append("signature",D);const{res:ne,body:oe}=await c(s,{method:"POST",body:F});if(!ne.ok){const Q=oe!=null&&oe.json?JSON.stringify(oe.json):(oe==null?void 0:oe.text)||"",ee=(Q||"").toLowerCase();if(ee.includes("missing required parameter - api_key")||ee.includes("missing required parameter - api key")||ee.includes("missing required parameter 'api_key'")){const q=u||(()=>{try{return localStorage.getItem("cloudinary.apiKey")}catch{return null}})();if(q){const K=new FormData;K.append("file",t),K.append("api_key",q),K.append("timestamp",String(O)),K.append("signature",D);const{res:Y,body:U}=await c(s,{method:"POST",body:K});if(!Y.ok){const H=U!=null&&U.json?JSON.stringify(U.json):(U==null?void 0:U.text)||"";throw new Error(`Cloudinary signed upload retry failed: ${Y.status} ${H}`)}if(U.json&&(U.json.secure_url||U.json.url))return U.json.secure_url||U.json.url;if(U.text&&typeof U.text=="string"&&U.text.startsWith("http"))return U.text;throw new Error("Cloudinary signed upload retry returned unexpected response.")}if(n){const K=new FormData;K.append("file",t),K.append("upload_preset",n);const Y=await fetch(s,{method:"POST",body:K});if(!Y.ok){const le=await Y.text().catch(()=>"");throw new Error(`Cloudinary unsigned fallback failed: ${Y.status} ${le}`)}const U=await Y.json().catch(()=>null);if(U&&(U.secure_url||U.url))return U.secure_url||U.url;const H=await Y.text().catch(()=>"");if(H&&H.startsWith("http"))return H;throw new Error("Cloudinary unsigned fallback returned unexpected response.")}}throw new Error(`Cloudinary signed upload failed: ${ne.status} ${Q}`)}if(oe.json&&(oe.json.secure_url||oe.json.url))return oe.json.secure_url||oe.json.url;if(oe.text&&typeof oe.text=="string"&&oe.text.startsWith("http"))return oe.text;throw new Error("Cloudinary signed upload returned unexpected response.")}if(k){const L=new FormData;L.append("file",t),L.append("upload_preset",k);const D=await fetch(s,{method:"POST",body:L});if(!D.ok){const ne=await D.text().catch(()=>"");throw new Error(`Cloudinary upload fallback failed: ${D.status} ${ne}`)}const O=await D.json().catch(()=>null);if(O&&(O.secure_url||O.url))return O.secure_url||O.url;const F=await D.text().catch(()=>"");if(F&&F.startsWith("http"))return F;throw new Error("Cloudinary fallback upload returned unexpected response.")}}catch{}try{const M=await J1(t);if(M&&typeof M=="string"&&M.startsWith("http"))return M}catch{}throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.")}throw j}if(!h.ok){const j=f!=null&&f.json?JSON.stringify(f.json):(f==null?void 0:f.text)||"";throw new Error(`Cloudinary signing failed: ${h.status} ${j}`)}const p=f.json||{},{signature:y,apiKey:v,timestamp:x}=p,E=v||u;if(!y||!x)throw new Error("Cloudinary signing endpoint returned invalid data.");const w=new FormData;w.append("file",t),w.append("api_key",E),w.append("timestamp",String(x)),w.append("signature",y);const{res:b,body:A}=await c(s,{method:"POST",body:w});if(!b.ok){const j=A!=null&&A.json?JSON.stringify(A.json):(A==null?void 0:A.text)||"",T=(j||"").toLowerCase();if(T.includes("missing required parameter - api_key")||T.includes("missing required parameter - api key")||T.includes("missing required parameter 'api_key'")){const M=u;{const $=new FormData;$.append("file",t),$.append("api_key",M),$.append("timestamp",String(x)),$.append("signature",y);const{res:z,body:R}=await c(s,{method:"POST",body:$});if(!z.ok){const I=R!=null&&R.json?JSON.stringify(R.json):(R==null?void 0:R.text)||"";throw new Error(`Cloudinary signed upload retry failed: ${z.status} ${I}`)}if(R.json&&(R.json.secure_url||R.json.url))return R.json.secure_url||R.json.url;if(R.text&&typeof R.text=="string"&&R.text.startsWith("http"))return R.text;throw new Error("Cloudinary signed upload retry returned unexpected response.")}}throw new Error(`Cloudinary signed upload failed: ${b.status} ${j}`)}if(A.json&&(A.json.secure_url||A.json.url))return A.json.secure_url||A.json.url;if(A.text&&typeof A.text=="string"&&A.text.startsWith("http"))return A.text;throw new Error("Cloudinary signed upload returned unexpected response.")}async function J1(t){const e=await new Promise((n,r)=>{const s=new FileReader;s.onload=()=>n(s.result),s.onerror=()=>r(new Error("Failed to read file")),s.readAsDataURL(t)});return await new Promise((n,r)=>{try{const s=new XMLHttpRequest;s.open("POST",`${API_BASE}/api/cloudinary/upload`,!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(s.readyState!==4)return;const a=s.status||0,c=s.responseText||"";if(a<200||a>=400){let u=c;try{const h=c?JSON.parse(c):null;h&&h.error&&(u=h.error)}catch{}return r(new Error(`Server upload failed: ${a} ${u}`))}try{const u=c?JSON.parse(c):{};return u&&(u.secure_url||u.url)?n(u.secure_url||u.url):r(new Error("Server upload returned unexpected response"))}catch{return r(new Error("Server upload returned non-JSON response"))}},s.onerror=()=>r(new Error("Server upload XHR error")),s.send(JSON.stringify({file:e,filename:t.name}))}catch(s){r(s)}}).catch(async n=>{try{const r=String((n==null?void 0:n.message)||"").toLowerCase();if(r.includes("cloudinary not configured")||r.includes("404")||r.includes("server upload failed"))return await new Promise((s,a)=>{try{const c=new XMLHttpRequest;c.open("POST",`${API_BASE}/api/imagekit/upload`,!0),c.setRequestHeader("Content-Type","application/json"),c.onreadystatechange=()=>{if(c.readyState!==4)return;const u=c.status||0,h=c.responseText||"";if(u<200||u>=400){let f=h;try{const p=h?JSON.parse(h):null;p&&p.error&&(f=p.error)}catch{}return a(new Error(`ImageKit server upload failed: ${u} ${f}`))}try{const f=h?JSON.parse(h):{};return f&&(f.url||f.filePath)?s(f.url||f.filePath):a(new Error("ImageKit server upload returned unexpected response"))}catch{return a(new Error("ImageKit server upload returned non-JSON response"))}},c.onerror=()=>a(new Error("ImageKit server upload XHR error")),c.send(JSON.stringify({file:e,filename:t.name}))}catch(c){a(c)}})}catch{}throw n})}function al(t,e,n){try{t&&localStorage.setItem("cloudinary.cloudName",t),e&&localStorage.setItem("cloudinary.uploadPreset",e),n&&localStorage.setItem("cloudinary.apiKey",n)}catch(r){console.warn("Could not persist Cloudinary config to localStorage",r)}}async function Z1(t,e){if(!t)throw new Error("No URL provided");return await new Promise((n,r)=>{try{const s=new XMLHttpRequest;s.open("POST",`${API_BASE}/api/cloudinary/upload`,!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(s.readyState!==4)return;const a=s.status||0,c=s.responseText||"";if(a<200||a>=400){let u=c;try{const h=c?JSON.parse(c):null;h&&h.error&&(u=h.error)}catch{}return r(new Error(`Server upload failed: ${a} ${u}`))}try{const u=c?JSON.parse(c):{};return u&&(u.secure_url||u.url)?n(u.secure_url||u.url):r(new Error("Server upload returned unexpected response"))}catch{return r(new Error("Server upload returned non-JSON response"))}},s.onerror=()=>r(new Error("Server upload XHR error")),s.send(JSON.stringify({file:t,filename:e||"remote"}))}catch(s){r(new Error("Failed to call server upload endpoint: "+String(s)))}})}const g7="".replace(/\/$/,"");async function y7(t,e){const n=await fetch(t,e);let r=null,s="";try{r=await n.json()}catch{try{s=await n.text()}catch{}}return{res:n,json:r,text:s}}async function cs(t,e){let n;typeof t=="string"?n=t:n=await new Promise((u,h)=>{const f=new FileReader;f.onload=()=>u(f.result),f.onerror=()=>h(new Error("Failed to read file")),f.readAsDataURL(t)});const r=`${g7}/api/imagekit/upload`,{res:s,json:a,text:c}=await y7(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:n,filename:e})});if(!s.ok){const u=a?JSON.stringify(a):c||"";throw new Error(`ImageKit server upload failed: ${s.status} ${u}`)}if(a&&(a.url||a.filePath||a.name))return a.url||a.filePath||a.name;throw new Error("ImageKit server upload returned unexpected response.")}function V0({quiz:t,onClose:e,onSave:n}){var $,z,R;const[r,s]=_.useState({title:"",description:"",timeLimit:30,passingScore:70,questions:[],type:"multiple_choice"}),[a,c]=_.useState({question:"",options:["","","",""],correctAnswer:0,explanation:"",imageUrl:"",weight:1,explanation:{text:"",imageUrl:""}}),[u,h]=_.useState(!1),[f,p]=_.useState(!1),[y,v]=_.useState(null),[x,E]=_.useState(null);_.useEffect(()=>{t&&s({title:t.title||"",description:t.description||"",timeLimit:t.timeLimit||30,passingScore:t.passingScore||70,questions:(t.questions||[]).map(I=>({...I,explanation:I.explanation||{text:"",imageUrl:""}})),type:t.type||"multiple_choice"})},[t]);const w=async I=>{I.preventDefault(),h(!0);try{const k={...r,...t?{}:{createdAt:new Date,createdBy:"Current User"}};k.type||(k.type="multiple_choice"),n(k)}catch(k){console.error("Error saving quiz:",k)}finally{h(!1)}},b=()=>{var L;const I=r.type==="flashcard",k=a.question.trim();if(I){const D=a.options&&String(a.options[0]).trim()||a.answer;if(k&&D){const O={...a,options:[String(((L=a.options)==null?void 0:L[0])||a.answer||"").trim()],correctAnswer:0};s(F=>({...F,questions:[...F.questions,O]})),c({question:"",options:[""],correctAnswer:0,explanation:"",imageUrl:"",weight:1,explanation:{text:"",imageUrl:""}})}return}k&&Array.isArray(a.options)&&a.options.filter(D=>String(D).trim()).length>=2&&typeof a.correctAnswer=="number"&&String(a.options[a.correctAnswer]||"").trim()&&(s(D=>({...D,questions:[...D.questions,{...a}]})),c({question:"",options:["","","",""],correctAnswer:0,explanation:"",imageUrl:"",weight:1,explanation:{text:"",imageUrl:""}}))},A=I=>{s(k=>({...k,questions:k.questions.filter((L,D)=>D!==I)}))},j=(I,k)=>{const L=[...a.options||[]];L[I]=k,c(D=>({...D,options:L}))},T=()=>{c(I=>({...I,options:[...I.options||[],""]}))},M=I=>{c(k=>{const L=[...k.options||[]];L.splice(I,1);let D=k.correctAnswer;return D>=L.length&&(D=Math.max(0,L.length-1)),{...k,options:L,correctAnswer:D}})};return o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(X,{variant:"ghost",onClick:e,children:[o.jsx(us,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Quiz":"Create Quiz"}),o.jsx("p",{className:"text-muted-foreground",children:t?"Update the quiz details and questions":"Create a new quiz for students"})]})]})}),o.jsxs("form",{onSubmit:w,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsxs(Ye,{className:"flex items-center gap-2",children:[o.jsx(Ls,{className:"h-5 w-5"}),"Quiz Information"]}),o.jsx(Ct,{children:"Basic information about the quiz"})]}),o.jsxs(ye,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"title",children:"Quiz Title *"}),o.jsx(we,{id:"title",placeholder:"Enter quiz title...",value:r.title,onChange:I=>s(k=>({...k,title:I.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"description",children:"Description"}),o.jsx(ls,{id:"description",placeholder:"Describe what this quiz covers...",value:r.description,onChange:I=>s(k=>({...k,description:I.target.value})),rows:3})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(Pe,{htmlFor:"timeLimit",className:"flex items-center gap-2",children:[o.jsx(Cm,{className:"h-4 w-4"}),"Time Limit (minutes)"]}),o.jsx(we,{id:"timeLimit",type:"number",min:"1",value:r.timeLimit,onChange:I=>s(k=>({...k,timeLimit:parseInt(I.target.value)||30}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(Pe,{htmlFor:"passingScore",className:"flex items-center gap-2",children:[o.jsx(PD,{className:"h-4 w-4"}),"Passing Score (%)"]}),o.jsx(we,{id:"passingScore",type:"number",min:"0",max:"100",value:r.passingScore,onChange:I=>s(k=>({...k,passingScore:parseInt(I.target.value)||70}))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"quizType",children:"Quiz Type"}),o.jsxs("select",{id:"quizType",value:r.type||"multiple_choice",onChange:I=>s(k=>({...k,type:I.target.value})),className:"w-full border rounded px-3 py-2",children:[o.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),o.jsx("option",{value:"flashcard",children:"Flashcard"})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose how this quiz will be presented to students."})]})]})]}),o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsx(Ye,{children:"Add Question"}),o.jsx(Ct,{children:"Create multiple choice questions for the quiz"})]}),o.jsxs(ye,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"question",children:"Question"}),o.jsx(ls,{id:"question",placeholder:"Enter your question...",value:a.question,onChange:I=>c(k=>({...k,question:I.target.value})),rows:3})]}),o.jsx("div",{className:"space-y-2",children:r.type==="flashcard"?o.jsxs(o.Fragment,{children:[o.jsx(Pe,{children:"Correct Answer"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(we,{placeholder:"Correct answer",value:a.options[0]??a.answer??"",onChange:I=>{c(k=>({...k,options:[I.target.value]}))}}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"For flashcards enter the correct answer (single). Use [[answer]] in the question to create blanks."})]})]}):o.jsxs(o.Fragment,{children:[o.jsx(Pe,{children:"Answer Options"}),o.jsxs("div",{className:"space-y-2",children:[a.options.map((I,k)=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[o.jsx(Pe,{className:"w-8 h-8 rounded-full bg-secondary flex items-center justify-center text-sm",children:String.fromCharCode(65+k)}),o.jsx(we,{placeholder:`Option ${String.fromCharCode(65+k)}`,value:I,onChange:L=>j(k,L.target.value),className:a.correctAnswer===k?"ring-2 ring-green-500":""})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(X,{type:"button",variant:a.correctAnswer===k?"default":"outline",size:"sm",onClick:()=>c(L=>({...L,correctAnswer:k})),children:a.correctAnswer===k?"Correct":"Mark Correct"}),a.options.length>2&&o.jsx(X,{type:"button",variant:"ghost",size:"sm",onClick:()=>M(k),children:"Remove"})]})]},k)),o.jsx("div",{children:o.jsx(X,{type:"button",variant:"outline",onClick:T,className:"mt-2",children:"Add Option"})})]})]})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"explanation",children:"Explanation (Optional)"}),o.jsx(ls,{id:"explanation",placeholder:"Explain why this is the correct answer...",value:a.explanation||"",onChange:I=>c(k=>({...k,explanation:I.target.value})),rows:3}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"This explanation will be shown to students after they answer the question"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),o.jsx(we,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:a.imageUrl,onChange:I=>c(k=>({...k,imageUrl:I.target.value}))})]}),o.jsxs("div",{className:"border rounded-lg p-4 bg-blue-50 dark:bg-blue-950",children:[o.jsxs("h3",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[o.jsx(Ls,{className:"h-4 w-4"}),"Explanation for Correct Answer"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"explanationText",children:"Explanation Text"}),o.jsx(ls,{id:"explanationText",placeholder:"Explain why this answer is correct...",value:(($=a.explanation)==null?void 0:$.text)||"",onChange:I=>c(k=>({...k,explanation:{...k.explanation||{},text:I.target.value}})),rows:3})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"explanationImage",children:"Explanation Image (Optional)"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(we,{id:"explanationImage",placeholder:"https://example.com/explanation.jpg",value:((z=a.explanation)==null?void 0:z.imageUrl)||"",onChange:I=>c(k=>({...k,explanation:{...k.explanation||{},imageUrl:I.target.value}}))}),o.jsxs(X,{type:"button",variant:"outline",size:"sm",onClick:()=>{const I=document.createElement("input");I.type="file",I.accept="image/*",I.onchange=async k=>{var D;const L=(D=k.target.files)==null?void 0:D[0];if(L){p(!0);try{let O=await Mn(L);c(F=>({...F,explanation:{...F.explanation||{},imageUrl:O}}))}catch(O){console.warn("Cloudinary upload failed, trying ImageKit",(O==null?void 0:O.message)||O);try{const F=await cs(L);c(ne=>({...ne,explanation:{...ne.explanation||{},imageUrl:F}}))}catch(F){console.error(F),alert("Failed to upload image")}}finally{p(!1)}}},I.click()},disabled:f,children:[o.jsx(Wc,{className:"h-4 w-4 mr-2"}),f?"Uploading...":"Upload"]})]}),((R=a.explanation)==null?void 0:R.imageUrl)&&o.jsx("div",{className:"mt-2",children:o.jsx("img",{src:a.explanation.imageUrl,alt:"Explanation preview",className:"max-h-32 rounded border"})})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"weight",children:"Question Weight"}),o.jsx(we,{id:"weight",type:"number",min:1,value:a.weight,onChange:I=>c(k=>({...k,weight:parseFloat(I.target.value)||1}))})]}),o.jsxs(X,{type:"button",onClick:b,className:"w-full",children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Question"]})]})]}),r.questions.length>0&&o.jsxs(pe,{children:[o.jsx(Ke,{children:o.jsxs(Ye,{children:["Quiz Questions (",r.questions.length,")"]})}),o.jsx(ye,{children:o.jsx("div",{className:"space-y-4",children:r.questions.map((I,k)=>o.jsx("div",{className:"p-4 border rounded-lg space-y-3",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("p",{className:"font-medium",children:[k+1,". ",I.question]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Pe,{className:"text-sm",children:"Weight"}),o.jsx(we,{type:"number",min:1,value:I.weight||1,onChange:L=>{const D=parseFloat(L.target.value)||1;s(O=>({...O,questions:O.questions.map((F,ne)=>ne===k?{...F,weight:D}:F)}))},className:"w-20 text-sm"})]})]}),o.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:I.options.map((L,D)=>o.jsxs("div",{className:`flex items-center gap-2 p-2 rounded ${I.correctAnswer===D?"bg-green-100 text-green-800":"bg-secondary/50"}`,children:[o.jsx("span",{className:"w-6 h-6 rounded-full bg-white flex items-center justify-center text-sm font-medium",children:String.fromCharCode(65+D)}),o.jsx("span",{className:"text-sm",children:L}),I.correctAnswer===D&&o.jsx(Rt,{variant:"outline",className:"ml-auto text-xs bg-green-200",children:"Correct"})]},D))}),I.explanation&&o.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:o.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[o.jsx("span",{className:"font-semibold",children:"Explanation:"})," ",I.explanation]})})]}),o.jsx("div",{className:"flex flex-col items-end gap-2",children:o.jsx(X,{type:"button",variant:"ghost",size:"icon",onClick:()=>A(k),className:"text-destructive hover:text-destructive",children:o.jsx(un,{className:"h-4 w-4"})})})]})},k))})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(X,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),o.jsxs(X,{type:"submit",disabled:u||r.questions.length===0,children:[o.jsx(no,{className:"h-4 w-4 mr-2"}),u?"Saving...":t?"Update Quiz":"Create Quiz"]})]})]})]})}function Pk({year:t,yearType:e,onClose:n,onSave:r}){const[s,a]=_.useState({name:"",imageUrl:"",hours:3}),[c,u]=_.useState(!1),h=async f=>{f.preventDefault(),u(!0);try{const p={name:s.name,imageUrl:s.imageUrl||"",hours:s.hours||3,createdAt:new Date};r(p)}catch(p){console.error("Error saving subject:",p)}finally{u(!1)}};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(X,{variant:"ghost",onClick:n,children:[o.jsx(us,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Add Subject to Year ",t]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e==="basic"?o.jsx(pd,{className:"h-4 w-4 text-blue-600"}):o.jsx(gd,{className:"h-4 w-4 text-red-600"}),o.jsxs("p",{className:"text-muted-foreground",children:["Adding to ",e==="basic"?"Basic":"Clinical"," Years  Year ",t]})]})]})]})}),o.jsxs("form",{onSubmit:h,className:"space-y-6",children:[o.jsx(pe,{className:`border-l-4 ${e==="basic"?"border-l-blue-500 bg-blue-50/50":"border-l-red-500 bg-red-50/50"}`,children:o.jsx(ye,{className:"pt-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[e==="basic"?o.jsx(pd,{className:"h-8 w-8 text-blue-600"}):o.jsx(gd,{className:"h-8 w-8 text-red-600"}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-semibold text-lg",children:["Year ",t]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:e==="basic"?"Basic Years":"Clinical Years"})]})]})})}),o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsxs(Ye,{className:"flex items-center gap-2",children:[e==="basic"?o.jsx(pd,{className:"h-5 w-5 text-blue-600"}):o.jsx(gd,{className:"h-5 w-5 text-red-600"}),"Subject Information"]}),o.jsx(Ct,{children:"Basic information about the subject"})]}),o.jsx(ye,{className:"space-y-4",children:o.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"year",children:"Year"}),o.jsx(we,{id:"year",value:`Year ${t} (${e==="basic"?"Basic":"Clinical"})`,disabled:!0,className:"bg-muted"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"name",children:"Subject Name *"}),o.jsx(we,{id:"name",placeholder:"e.g., Anatomy & Physiology",value:s.name,onChange:f=>a(p=>({...p,name:f.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"hours",children:"Credit Hours"}),o.jsx(we,{id:"hours",type:"number",placeholder:"3",value:s.hours,onChange:f=>a(p=>({...p,hours:parseInt(f.target.value)||3})),min:"1",max:"12"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),o.jsx(we,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:s.imageUrl,onChange:f=>a(p=>({...p,imageUrl:f.target.value}))})]})]})})]}),s.name&&o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsx(Ye,{children:"Preview"}),o.jsxs(Ct,{children:["How the subject will appear in Year ",t]})]}),o.jsx(ye,{children:o.jsxs("div",{className:"p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.imageUrl?o.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-8 h-8 object-cover rounded",onError:f=>{f.currentTarget.style.display="none"}}):o.jsx(kr,{className:"h-5 w-5 text-primary"}),o.jsx("h3",{className:"font-semibold text-lg",children:s.name})]}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["Year ",t,"  ",e," years"]})]})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(X,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),o.jsxs(X,{type:"submit",disabled:c,children:[o.jsx(no,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add Subject"]})]})]})]})}function U0({file:t,lectureId:e,onClose:n,onSave:r}){const[s,a]=_.useState({title:(t==null?void 0:t.title)||"",description:(t==null?void 0:t.description)||"",fileUrl:(t==null?void 0:t.fileUrl)||(t==null?void 0:t.url)||"",imageUrl:(t==null?void 0:t.imageUrl)||(t==null?void 0:t.thumbnailUrl)||""}),[c,u]=_.useState(!1),h=async f=>{f.preventDefault(),u(!0);try{const p={...s,id:`file_${Date.now()}`,lectureId:e,uploadedAt:new Date,uploadedBy:"Current User"};r(p)}catch(p){console.error("Error saving file:",p)}finally{u(!1)}};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(X,{variant:"ghost",onClick:n,children:[o.jsx(us,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Add File"}),o.jsx("p",{className:"text-muted-foreground",children:"Add a file resource to the lecture"})]})]})}),o.jsxs("form",{onSubmit:h,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsxs(Ye,{className:"flex items-center gap-2",children:[o.jsx(Rs,{className:"h-5 w-5 text-blue-600"}),"File Information"]}),o.jsx(Ct,{children:"Upload or link to educational files"})]}),o.jsxs(ye,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"title",children:"File Title *"}),o.jsx(we,{id:"title",placeholder:"e.g., Anatomy Reference Guide",value:s.title,onChange:f=>a(p=>({...p,title:f.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"description",children:"Description"}),o.jsx(ls,{id:"description",placeholder:"Describe the file content...",value:s.description,onChange:f=>a(p=>({...p,description:f.target.value})),rows:3})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"fileUrl",children:"File URL *"}),o.jsx(we,{id:"fileUrl",placeholder:"https://example.com/file.pdf or /uploads/file.pdf",value:s.fileUrl,onChange:f=>a(p=>({...p,fileUrl:f.target.value})),required:!0}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"You can upload to Firebase Storage or use external links"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"imageUrl",children:"Preview Image URL"}),o.jsx(we,{id:"imageUrl",placeholder:"https://example.com/preview.jpg",value:s.imageUrl,onChange:f=>a(p=>({...p,imageUrl:f.target.value}))}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional: Add a preview/thumbnail image for the file"})]})]})]}),s.title&&o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsx(Ye,{children:"Preview"}),o.jsx(Ct,{children:"How the file will appear in the lecture"})]}),o.jsx(ye,{children:o.jsx("div",{className:"p-4 border rounded-lg",children:o.jsxs("div",{className:"flex items-center gap-3",children:[s.imageUrl?o.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-16 h-12 object-cover rounded"}):o.jsx("div",{className:"w-16 h-12 bg-blue-100 rounded flex items-center justify-center",children:o.jsx(Rs,{className:"h-8 w-8 text-blue-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-medium",children:s.title}),s.description&&o.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})]})})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(X,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),o.jsxs(X,{type:"submit",disabled:c,children:[o.jsx(no,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add File"]})]})]})]})}function $0({video:t,lectureId:e,onClose:n,onSave:r}){const[s,a]=_.useState({title:(t==null?void 0:t.title)||"",description:(t==null?void 0:t.description)||"",url:(t==null?void 0:t.url)||(t==null?void 0:t.youtubeUrl)||"",duration:(t==null?void 0:t.duration)||"",thumbnailUrl:(t==null?void 0:t.thumbnailUrl)||"",platform:(t==null?void 0:t.platform)||"YouTube"}),[c,u]=_.useState(!1),h=async v=>{v.preventDefault(),u(!0);try{const x={...s,id:`video_${Date.now()}`,lectureId:e,uploadedAt:new Date,uploadedBy:"Current User"};r(x)}catch(x){console.error("Error saving video:",x)}finally{u(!1)}},f=v=>{const x=v.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);return x?x[1]:null},p=v=>{const x=f(v);return x?`https://img.youtube.com/vi/${x}/maxresdefault.jpg`:""},y=v=>{a(x=>({...x,url:v,thumbnailUrl:p(v)}))};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(X,{variant:"ghost",onClick:n,children:[o.jsx(us,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Add Video"}),o.jsx("p",{className:"text-muted-foreground",children:"Add a video resource to the lecture"})]})]})}),o.jsxs("form",{onSubmit:h,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsxs(Ye,{className:"flex items-center gap-2",children:[o.jsx(ai,{className:"h-5 w-5 text-green-600"}),"Video Information"]}),o.jsx(Ct,{children:"Add YouTube videos or other video links"})]}),o.jsxs(ye,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"title",children:"Video Title *"}),o.jsx(we,{id:"title",placeholder:"e.g., Introduction to Human Anatomy",value:s.title,onChange:v=>a(x=>({...x,title:v.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"description",children:"Description"}),o.jsx(ls,{id:"description",placeholder:"Describe the video content...",value:s.description,onChange:v=>a(x=>({...x,description:v.target.value})),rows:3})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"url",children:"Video URL *"}),o.jsx(we,{id:"url",placeholder:"https://youtube.com/watch?v=... or https://vimeo.com/...",value:s.url,onChange:v=>y(v.target.value),required:!0}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Supports YouTube, Vimeo, and direct video links"})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"duration",children:"Duration"}),o.jsx(we,{id:"duration",placeholder:"e.g., 45:30",value:s.duration,onChange:v=>a(x=>({...x,duration:v.target.value}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"platform",children:"Platform"}),o.jsx(we,{id:"platform",value:s.platform,onChange:v=>a(x=>({...x,platform:v.target.value})),disabled:!0})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"thumbnailUrl",children:"Thumbnail URL"}),o.jsx(we,{id:"thumbnailUrl",placeholder:"Auto-generated for YouTube videos",value:s.thumbnailUrl,onChange:v=>a(x=>({...x,thumbnailUrl:v.target.value}))})]})]})]}),s.title&&o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsx(Ye,{children:"Preview"}),o.jsx(Ct,{children:"How the video will appear in the lecture"})]}),o.jsx(ye,{children:o.jsx("div",{className:"p-4 border rounded-lg",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("div",{className:"relative",children:[s.thumbnailUrl?o.jsx("img",{src:s.thumbnailUrl,alt:s.title,className:"w-24 h-16 object-cover rounded"}):o.jsx("div",{className:"w-24 h-16 bg-gray-200 rounded flex items-center justify-center",children:o.jsx(Lv,{className:"h-6 w-6 text-gray-400"})}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx(ai,{className:"h-8 w-8 text-white opacity-80"})})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-medium",children:s.title}),s.description&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description}),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.duration&&o.jsxs(Rt,{variant:"secondary",className:"text-xs",children:[o.jsx(Cm,{className:"h-3 w-3 mr-1"}),s.duration]}),o.jsxs(Rt,{variant:"outline",className:"text-xs",children:[o.jsx(CD,{className:"h-3 w-3 mr-1"}),s.platform]})]})]})]})})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(X,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),o.jsxs(X,{type:"submit",disabled:c,children:[o.jsx(no,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add Video"]})]})]})]})}function sg({lecture:t,subjectId:e,subjectName:n,yearType:r,onClose:s,onSave:a}){const c=!!(t!=null&&t.id),[u,h]=_.useState({name:(t==null?void 0:t.name)||"",description:(t==null?void 0:t.description)||"",order:(t==null?void 0:t.order)||1,imageUrl:(t==null?void 0:t.imageUrl)||""}),[f,p]=_.useState(!1),[y,v]=_.useState(!1);_.useEffect(()=>{t&&h({name:t.name||"",description:t.description||"",order:t.order||1,imageUrl:t.imageUrl||""})},[t]);const x=async w=>{var A;const b=(A=w.target.files)==null?void 0:A[0];if(b){v(!0);try{let j=null;try{j=await Mn(b)}catch(T){console.warn("Cloudinary upload failed, trying ImageKit",(T==null?void 0:T.message)||T),j=await cs(b,b.name)}if(!j){alert("Failed to upload image");return}h(T=>({...T,imageUrl:j})),alert("Image uploaded successfully")}catch(j){console.error("Error uploading image:",j),alert("Failed to upload image. Please try again.")}finally{v(!1),w.target&&(w.target.value="")}}},E=async w=>{w.preventDefault(),p(!0);try{const b={...u,subjectId:e,...c&&t?{id:t.id}:{createdAt:new Date,uploadedBy:"Current User"}};a(b)}catch(b){console.error("Error saving lecture:",b)}finally{p(!1)}};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(X,{variant:"ghost",onClick:s,children:[o.jsx(us,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:c?"Edit Lecture":"Add Lecture"}),o.jsx("p",{className:"text-muted-foreground",children:c?`Editing "${t==null?void 0:t.name}" in ${n}`:`Add a new lecture to ${n}`})]})]})}),o.jsxs("form",{onSubmit:E,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsxs(Ye,{className:"flex items-center gap-2",children:[r==="basic"?o.jsx(pd,{className:"h-5 w-5 text-blue-600"}):o.jsx(gd,{className:"h-5 w-5 text-red-600"}),"Lecture Information"]}),o.jsx(Ct,{children:"Basic information about the lecture"})]}),o.jsxs(ye,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"name",children:"Lecture Name *"}),o.jsx(we,{id:"name",placeholder:"e.g., Introduction to Cell Biology",value:u.name,onChange:w=>h(b=>({...b,name:w.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"description",children:"Description"}),o.jsx(ls,{id:"description",placeholder:"Describe what this lecture covers...",value:u.description,onChange:w=>h(b=>({...b,description:w.target.value})),rows:4})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"order",children:"Order"}),o.jsx(we,{id:"order",type:"number",min:"1",value:u.order,onChange:w=>h(b=>({...b,order:parseInt(w.target.value)||1}))})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(Pe,{children:"Lecture Image (Optional)"}),o.jsx("div",{className:"border-2 border-dashed rounded-lg p-6 space-y-3",children:u.imageUrl?o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"relative w-40 h-32 rounded-md overflow-hidden",children:o.jsx("img",{src:u.imageUrl,alt:"Lecture preview",className:"w-full h-full object-cover",onError:w=>{w.currentTarget.style.display="none"}})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(X,{type:"button",variant:"outline",size:"sm",onClick:()=>{const w=document.createElement("input");w.type="file",w.accept="image/*",w.onchange=b=>x(b),w.click()},disabled:y,children:y?o.jsxs(o.Fragment,{children:[o.jsx(ds,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Wc,{className:"h-4 w-4 mr-2"}),"Change Image"]})}),o.jsx(X,{type:"button",variant:"ghost",size:"sm",onClick:()=>h(w=>({...w,imageUrl:""})),children:"Remove"})]})]}):o.jsxs("div",{className:"text-center space-y-3",children:[o.jsx(kr,{className:"h-12 w-12 mx-auto text-muted-foreground"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium mb-2",children:"Upload lecture image"}),o.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Click button below to select an image"}),o.jsx(X,{type:"button",variant:"outline",size:"sm",onClick:()=>{const w=document.createElement("input");w.type="file",w.accept="image/*",w.onchange=b=>x(b),w.click()},disabled:y,children:y?o.jsxs(o.Fragment,{children:[o.jsx(ds,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Wc,{className:"h-4 w-4 mr-2"}),"Upload Image"]})})]})]})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"imageUrl",className:"text-xs",children:"Or paste image URL directly"}),o.jsx(we,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:u.imageUrl,onChange:w=>h(b=>({...b,imageUrl:w.target.value}))})]})]})]})]}),u.name&&o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsx(Ye,{children:"Preview"}),o.jsxs(Ct,{children:["How the lecture will appear in ",n]})]}),o.jsx(ye,{children:o.jsx("div",{className:"p-4 border rounded-lg bg-secondary/20",children:o.jsxs("div",{className:"flex items-start gap-3",children:[u.imageUrl?o.jsx("img",{src:u.imageUrl,alt:u.name,className:"w-16 h-16 object-cover rounded",onError:w=>{w.currentTarget.style.display="none"}}):o.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center",children:o.jsx(kr,{className:"h-6 w-6 text-gray-400"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-lg",children:u.name}),u.description&&o.jsx("p",{className:"text-sm text-muted-foreground",children:u.description}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Lecture ",u.order,"  ",n]})]})]})})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(X,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),o.jsxs(X,{type:"submit",disabled:f,children:[o.jsx(no,{className:"h-4 w-4 mr-2"}),f?c?"Saving...":"Adding...":c?"Save Changes":"Add Lecture"]})]})]})]})}function v7(){var ar;const[t,e]=_.useState(""),[n,r]=_.useState(null),[s,a]=_.useState(!1),[c,u]=_.useState(!1),[h,f]=_.useState(!1),[p,y]=_.useState(!1),[v,x]=_.useState(!1),[E,w]=_.useState(null),[b,A]=_.useState(null),[j,T]=_.useState(null),[M,$]=_.useState("basic"),[z,R]=_.useState({}),[I,k]=_.useState(null),[L,D]=_.useState(""),[O,F]=_.useState(""),[ne,oe]=_.useState(""),[Q,ee]=_.useState(""),[q,K]=_.useState(""),[Y,U]=_.useState(""),[H,le]=_.useState(""),[ue,ke]=_.useState(""),[Te,_e]=_.useState(""),[Ae,He]=_.useState(""),[Ve,me]=_.useState(""),[Ue,ht]=_.useState(null),ft=hu(),fe=so();Se.useEffect(()=>{const be=new URLSearchParams(fe.search).get("batch");ht(be)},[fe.search]);const Ce=async(ie,be,qe)=>{var nt;if(!(((nt=z[ie])==null?void 0:nt[be])||!1)&&qe){const Re=ct.flatMap(Zt=>Zt.subjects).flatMap(Zt=>Zt.lectures).find(Zt=>Zt.id===ie&&Zt.name&&ct.flatMap(yr=>yr.subjects).find(yr=>yr.id===qe));Re&&!Re[be]&&await Kn(qe,ie)}R(Re=>{var Zt;return{...Re,[ie]:{videos:!1,files:!1,quizzes:!1,...Re[ie]||{},[be]:!((Zt=Re[ie])!=null&&Zt[be])}}})},{years:ct,batches:Ht,loading:Mt,error:vn,retryConnection:Or,clearCache:wi,updateYear:or,updateBatch:In,createSubject:Ws,createLecture:Kt,updateLecture:Vt,createYear:Wn,createBatch:Hn,deleteBatch:An,deleteLecture:fs,deleteSubject:Qr,addVideo:Hs,addFile:_i,addQuiz:ms,loadLectureResources:Kn}=oo(),{news:bi}=k0(),tt=(ie,be)=>{T(ie),A(be),r(null),a(!0)},_t=(ie,be)=>{console.log(" Opening subject form for year:",ie.yearNumber,"type:",be),w({id:ie.id,number:ie.yearNumber}),$(be),u(!0)},bt=(ie,be)=>{T(ie),$(be),x(!0)},Gt=(ie,be)=>{T(ie),A(be),f(!0)},on=(ie,be)=>{T(ie),A(be),y(!0)};if(s)return o.jsx(V0,{quiz:n,onClose:()=>{a(!1),r(null),A(null)},onSave:async ie=>{j!=null&&j.id&&b&&await ms(j.id,b,{title:ie.title,description:ie.description,questions:ie.questions||[],timeLimit:ie.timeLimit,passingScore:ie.passingScore}),a(!1),r(null),A(null)}});if(console.log(" Render check - isSubjectFormOpen:",c,"selectedYear:",E),c)return console.log(" Rendering SubjectForm"),o.jsx(Pk,{year:E==null?void 0:E.number,yearType:M,onClose:()=>{u(!1),w(null)},onSave:async ie=>{try{await Ws({...ie,yearId:(E==null?void 0:E.id)||"",order:1}),u(!1),w(null)}catch(be){console.error("Error saving subject:",be),alert("Failed to save subject. Please try again.")}}});if(v){const ie=b?(ar=j==null?void 0:j.lectures)==null?void 0:ar.find(be=>be.id===b):null;return o.jsx(sg,{lecture:ie,subjectId:j==null?void 0:j.id,subjectName:j==null?void 0:j.name,yearType:M,onClose:()=>{x(!1),T(null),A(null)},onSave:async be=>{try{ie?await Vt(ie.id,be):await Kt(be),x(!1),T(null),A(null)}catch(qe){console.error("Error saving lecture:",qe),alert("Failed to save lecture. Please try again.")}}})}if(h)return o.jsx(U0,{lectureId:b,onClose:()=>{f(!1),A(null)},onSave:async ie=>{j!=null&&j.id&&b&&await _i(j.id,b,ie),f(!1),A(null)}});if(p)return o.jsx($0,{lectureId:b,onClose:()=>{y(!1),A(null)},onSave:async ie=>{j!=null&&j.id&&b&&await Hs(j.id,b,ie),y(!1),A(null)}});const Lr=(ie,be)=>{var qe,It;return o.jsxs(pe,{className:`border-l-4 ${be==="basic"?"border-l-blue-500":"border-l-red-500"}`,children:[o.jsx(Ke,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[ie.imageUrl?o.jsx("img",{src:ie.imageUrl,alt:`Year ${ie.yearNumber}`,className:"w-24 h-24 object-cover rounded-md flex-shrink-0",onError:ot=>{ot.currentTarget.style.display="none"}}):o.jsx("div",{className:"w-24 h-24 rounded-md flex-shrink-0 bg-muted flex items-center justify-center",children:be==="basic"?o.jsx(pd,{className:"h-6 w-6 text-blue-600"}):o.jsx(gd,{className:"h-6 w-6 text-red-600"})}),o.jsx(Ye,{className:"flex flex-col",children:I===ie.id?o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(we,{value:L,onChange:ot=>D(ot.target.value),className:"w-48",placeholder:"Batch name"}),o.jsx(X,{size:"sm",onClick:async()=>{try{await(or==null?void 0:or(ie.id,{batchName:L,batch_name:L})),k(null),D("")}catch(ot){console.error(ot),alert("Failed to save batch name")}},children:"Save"}),o.jsx(X,{variant:"ghost",size:"sm",onClick:()=>{k(null),D("")},children:"Cancel"})]}):o.jsx(o.Fragment,{children:ie.batchName?o.jsxs(o.Fragment,{children:[o.jsx(rr,{to:`/admin/years/${ie.id}`,className:"text-lg font-bold text-foreground hover:underline",children:ie.batchName}),o.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[o.jsxs("span",{className:"text-sm text-muted",children:["Year ",ie.yearNumber]}),ie.name&&o.jsxs("span",{className:"ml-2",children:[" ",ie.name]}),ie.academicSupervisor&&o.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Academic Supervisor: ",ie.academicSupervisor]}),ie.cr&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["CR: ",ie.cr]}),ie.actor&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actor: ",ie.actor]})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs(rr,{to:`/admin/years/${ie.id}`,className:"text-lg font-medium text-blue-600 hover:underline",children:["Year ",ie.yearNumber]}),o.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[ie.name?o.jsx("span",{className:"mr-2",children:ie.name}):o.jsx("span",{className:"italic",children:"No batch name"}),ie.academicSupervisor&&o.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Academic Supervisor: ",ie.academicSupervisor]}),ie.cr&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["CR: ",ie.cr]}),ie.actor&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actor: ",ie.actor]})]})]})})})]}),o.jsx("div",{className:"flex items-center gap-2"})]})}),o.jsx(ye,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(kr,{className:"h-4 w-4 text-blue-600"}),o.jsx("span",{className:"font-semibold",children:"Subjects"}),o.jsxs(Rt,{variant:"secondary",children:[((qe=ie.subjects)==null?void 0:qe.length)||0," subjects"]}),o.jsxs(Rt,{variant:"outline",children:[(bi||[]).filter(ot=>ot.yearId===ie.id).length," ","news"]})]}),o.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>_t(ie,be),className:"flex items-center gap-1",children:[o.jsx(Jt,{className:"h-3 w-3"}),"Add Subject"]})]}),!ie.subjects||ie.subjects.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(kr,{className:"h-8 w-8 mx-auto mb-3 text-muted-foreground"}),o.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No subjects added yet"}),o.jsx(X,{variant:"outline",size:"sm",onClick:()=>_t(ie,be),children:"Add first subject"})]}):o.jsx("div",{className:"grid gap-4",children:(It=ie.subjects)==null?void 0:It.map(ot=>{var nt;return o.jsxs(pe,{className:"bg-secondary/10",children:[o.jsx(Ke,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[ot.imageUrl?o.jsx("img",{src:ot.imageUrl,alt:ot.name,className:"w-8 h-8 object-cover rounded",onError:Re=>{Re.currentTarget.style.display="none"}}):o.jsx(kr,{className:"h-5 w-5 text-blue-600"}),o.jsx(rr,{to:`/admin/subjects/${ot.id}`,className:"font-medium text-lg text-blue-600 hover:underline",children:ot.name}),o.jsxs(Rt,{variant:"outline",className:"text-xs",children:[((nt=ot.lectures)==null?void 0:nt.length)||0," lectures"]})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>bt(ot,be),className:"h-8 px-3 text-xs",children:[o.jsx(Jt,{className:"h-3 w-3 mr-1"}),"Add Lecture"]}),o.jsx(X,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:async()=>{if(confirm(`Delete subject "${ot.name}"? This will remove its lectures.`))try{await Qr(ot.id)}catch(Re){console.error(Re),alert("Failed to delete subject")}},children:o.jsx(un,{className:"h-3 w-3"})})]})]})}),ot.lectures&&ot.lectures.length>0&&o.jsx(ye,{className:"pt-0",children:o.jsxs("div",{className:"grid gap-3",children:[ot.lectures.slice(0,3).map(Re=>{var Zt,yr,Ks,Ei,vr,ao,Al,Ni,Sa;return o.jsx(pe,{className:"bg-background border",children:o.jsx(ye,{className:"p-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:Re.imageUrl?o.jsx("img",{src:Re.imageUrl,alt:Re.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:o.jsx(ai,{className:"h-6 w-6 text-muted-foreground"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:Re.name}),o.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:Re.description||"No description available"}),o.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[o.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>Ce(Re.id,"videos",ot.id),className:`h-6 px-2 text-xs ${(Zt=z[Re.id])!=null&&Zt.videos?"bg-accent":""}`,children:[o.jsx(Lv,{className:"h-3 w-3 mr-1"}),"Videos (",((yr=Re.videos)==null?void 0:yr.length)||0,")"]}),o.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>Ce(Re.id,"files",ot.id),className:`h-6 px-2 text-xs ${(Ks=z[Re.id])!=null&&Ks.files?"bg-accent":""}`,children:[o.jsx(Rs,{className:"h-3 w-3 mr-1"}),"Files (",((Ei=Re.files)==null?void 0:Ei.length)||0,")"]}),o.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>Ce(Re.id,"quizzes",ot.id),className:`h-6 px-2 text-xs ${(vr=z[Re.id])!=null&&vr.quizzes?"bg-accent":""}`,children:[o.jsx(Ls,{className:"h-3 w-3 mr-1"}),"Quizzes (",((ao=Re.quizzes)==null?void 0:ao.length)||0,")"]}),o.jsx(X,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{A(Re.id),T(ot),x(!0)},title:"Edit Lecture",children:o.jsx(mr,{className:"h-3 w-3"})}),o.jsx(X,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${Re.name}"?`))try{await fs(ot.id,Re.id)}catch(Dt){console.error(Dt),alert("Failed to delete lecture")}},children:o.jsx(un,{className:"h-3 w-3"})})]}),((Al=z[Re.id])==null?void 0:Al.videos)&&o.jsxs("div",{className:"mb-2",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Videos:"}),o.jsxs(X,{variant:"ghost",size:"xs",onClick:()=>on(ot,Re.id),className:"h-6 px-2 text-xs",children:[o.jsx(Jt,{className:"h-3 w-3 mr-1"})," Add"]})]}),o.jsxs("div",{className:"space-y-1",children:[Re.videos&&Re.videos.length>0?Re.videos.slice(0,4).map(Dt=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Lv,{className:"h-3 w-3 text-blue-600"}),o.jsx("a",{href:Dt.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline truncate",children:Dt.title||Dt.name||"Untitled Video"})]},Dt.id)):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"}),Re.videos&&Re.videos.length>4&&o.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",Re.videos.length-4," more videos"]})]})]}),((Ni=z[Re.id])==null?void 0:Ni.files)&&o.jsxs("div",{className:"mb-2",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Files:"}),o.jsxs(X,{variant:"ghost",size:"xs",onClick:()=>Gt(ot,Re.id),className:"h-6 px-2 text-xs",children:[o.jsx(Jt,{className:"h-3 w-3 mr-1"})," Add"]})]}),o.jsxs("div",{className:"space-y-1",children:[Re.files&&Re.files.length>0?Re.files.slice(0,4).map(Dt=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Rs,{className:"h-3 w-3 text-green-600"}),o.jsx("a",{href:Dt.fileUrl||Dt.url||"#",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-green-600 hover:underline truncate",onClick:Si=>{!Dt.fileUrl&&!Dt.url&&(Si.preventDefault(),alert("No file URL available"))},children:Dt.title||Dt.name||"Untitled File"})]},Dt.id)):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"}),Re.files&&Re.files.length>4&&o.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",Re.files.length-4," more files"]})]})]}),((Sa=z[Re.id])==null?void 0:Sa.quizzes)&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Quizzes:"}),o.jsxs(X,{variant:"ghost",size:"xs",onClick:()=>tt(ot,Re.id),className:"h-6 px-2 text-xs",children:[o.jsx(Jt,{className:"h-3 w-3 mr-1"})," Add"]})]}),o.jsxs("div",{className:"space-y-1",children:[Re.quizzes&&Re.quizzes.length>0?Re.quizzes.slice(0,4).map(Dt=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ls,{className:"h-3 w-3 text-purple-600"}),o.jsx("span",{className:"text-xs text-purple-600",children:Dt.title||Dt.name||"Untitled Quiz"})]},Dt.id)):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"}),Re.quizzes&&Re.quizzes.length>4&&o.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",Re.quizzes.length-4," more quizzes"]})]})]})]})]})})},Re.id)}),ot.lectures.length>3&&o.jsxs("div",{className:"text-center text-muted-foreground text-xs pt-2",children:["+",ot.lectures.length-3," more lectures"]})]})})]},ot.id)})})]})})]},ie.yearNumber)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Academic Years Management"}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("p",{className:"text-muted-foreground",children:"Manage curriculum by academic years, subjects, and lectures"})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(X,{variant:"outline",size:"sm",onClick:()=>{wi(),alert("Cache cleared. Data will be refreshed from server.")},title:"Clear cached data and fetch fresh from server",children:" Refresh Cache"}),o.jsxs(lp,{children:[o.jsx(bk,{asChild:!0,children:o.jsxs(X,{children:[o.jsx(ED,{className:"h-4 w-4 mr-2"})," Add Batch"]})}),o.jsxs(Yd,{children:[o.jsxs(Xd,{children:[o.jsx(Jd,{children:"Add Batch"}),o.jsx(Zd,{children:"Create a new batch for grouping years"})]}),o.jsxs("div",{className:"space-y-3 mt-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Batch name"}),o.jsx(we,{value:H,onChange:ie=>le(ie.target.value),placeholder:"e.g., Batch A"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"CR (optional)"}),o.jsx(we,{value:ue,onChange:ie=>ke(ie.target.value),placeholder:"Class representative"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Group Link (optional)"}),o.jsx(we,{value:Te,onChange:ie=>_e(ie.target.value),placeholder:"WhatsApp/Telegram group link"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Graduate Date (optional)"}),o.jsx(we,{value:Ae,onChange:ie=>He(ie.target.value),placeholder:"e.g., 2025-06-15",type:"date"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Academic Supervisor (optional)"}),o.jsx(we,{value:Ve,onChange:ie=>me(ie.target.value),placeholder:"e.g., Dr. Ahmed Hassan"})]})]}),o.jsxs(cp,{className:"mt-4",children:[o.jsx(X,{onClick:async()=>{try{if(!H||!H.trim()){alert("Please provide a batch name");return}await(Hn==null?void 0:Hn({batchName:H.trim(),cr:ue==null?void 0:ue.trim(),groupLink:Te==null?void 0:Te.trim(),group_link:Te==null?void 0:Te.trim(),graduateDate:Ae==null?void 0:Ae.trim(),graduate_date:Ae==null?void 0:Ae.trim(),academicSupervisor:Ve==null?void 0:Ve.trim(),academic_supervisor:Ve==null?void 0:Ve.trim()})),le(""),ke(""),_e(""),He(""),me("");const ie=document.querySelector("[data-dialog-close]");ie&&ie.click(),alert("Batch created")}catch(ie){console.error(ie),alert("Failed to create batch")}},children:"Create"}),o.jsx(Ux,{asChild:!0,children:o.jsx(X,{variant:"ghost",className:"ml-2","data-dialog-close":!0,children:"Cancel"})})]})]})]})]})]}),Mt&&o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx(ds,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading academic years..."})]})}),vn&&o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:" Error loading years"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:vn}),o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx(X,{onClick:Or,variant:"outline",children:"Retry Connection"}),o.jsx(X,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!Mt&&!vn&&o.jsxs(o.Fragment,{children:[o.jsx(pe,{children:o.jsx(ye,{className:"pt-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(xa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(we,{placeholder:"Search lectures, subjects, or content...",value:t,onChange:ie=>e(ie.target.value),className:"pl-10"})]})})}),o.jsx("div",{className:"space-y-6",children:!Ht||Ht.length===0?o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx(kr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No batches found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Create a batch to start adding academic years."})]})}):Ue?(()=>{const ie=(Ht||[]).find(qe=>qe.id===Ue)||null,be=(ct||[]).filter(qe=>(qe.batchId||qe.batch_name)===Ue);return o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[ie!=null&&ie.imageUrl?o.jsx("img",{src:ie.imageUrl,alt:ie.batchName,className:"w-40 h-40 object-cover rounded-md flex-shrink-0"}):o.jsx("div",{className:"w-40 h-40 rounded-md flex-shrink-0 bg-muted flex items-center justify-center",children:o.jsx(kr,{className:"h-6 w-6 text-muted-foreground"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold",children:(ie==null?void 0:ie.batchName)||"Batch"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:ie!=null&&ie.cr?`CR: ${ie.cr}`:""})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(X,{onClick:()=>{ht(null),ft("/admin/years")},children:"Back to Batches"}),o.jsx(X,{size:"sm",variant:"ghost",onClick:async()=>{try{const qe=document.createElement("input");qe.type="file",qe.accept="image/*",qe.onchange=async()=>{var ot;const It=(ot=qe.files)==null?void 0:ot[0];if(It)try{let nt=null;try{nt=await Mn(It)}catch(Re){console.warn("Cloudinary upload failed, trying ImageKit",(Re==null?void 0:Re.message)||Re),nt=await cs(It,It.name)}if(!nt){alert("Upload failed");return}await(In==null?void 0:In(ie==null?void 0:ie.id,{image_url:nt,imageUrl:nt})),alert("Image updated")}catch(nt){console.error(nt),alert("Failed to upload image")}},qe.click()}catch(qe){console.error(qe),alert("Could not open file dialog")}},children:"Change Image"}),o.jsxs(X,{onClick:async()=>{try{const qe=window.prompt("Enter year number for this batch:");if(!qe)return;const It=parseInt(qe,10);if(isNaN(It)){alert("Invalid");return}await(Wn==null?void 0:Wn((ie==null?void 0:ie.id)||null,{yearNumber:It})),alert("Year created")}catch(qe){console.error(qe),alert("Failed")}},children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"})," Add Year"]}),o.jsxs(X,{variant:"destructive",onClick:async()=>{try{if(!confirm("Delete this batch and all its years?"))return;await(An==null?void 0:An(ie==null?void 0:ie.id)),ht(null),ft("/admin/years"),alert("Batch deleted")}catch(qe){console.error(qe),alert("Failed to delete batch")}},children:[o.jsx(un,{className:"h-4 w-4"})," Delete"]})]})]}),o.jsx("div",{className:"mt-4 space-y-4",children:be.length===0?o.jsx(pe,{children:o.jsx(ye,{className:"p-6 text-center",children:"No years in this batch yet."})}):be.sort((qe,It)=>qe.yearNumber-It.yearNumber).map(qe=>o.jsx("div",{children:Lr(qe,qe.type)},qe.id))})]})})():o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:(Ht||[]).map(ie=>o.jsxs(pe,{className:"cursor-pointer flex flex-col overflow-hidden",onClick:()=>{ft(`/admin/years?batch=${ie.id}`),ht(ie.id)},children:[o.jsx(Ke,{className:"flex-1",onClick:be=>I===ie.id&&be.stopPropagation(),children:o.jsxs("div",{className:"flex items-start gap-4",children:[ie.imageUrl?o.jsx("img",{src:ie.imageUrl,alt:ie.batchName,className:"w-56 h-56 object-cover rounded-md flex-shrink-0"}):o.jsx("div",{className:"w-56 h-56 rounded-md flex-shrink-0 bg-muted"}),o.jsx("div",{className:"flex-1 min-w-0",children:I===ie.id?o.jsxs("div",{className:"flex flex-col gap-2 w-full",onClick:be=>be.stopPropagation(),children:[o.jsx(we,{value:L,onChange:be=>D(be.target.value),placeholder:"Batch name",className:"w-full",onClick:be=>be.stopPropagation()}),o.jsx(we,{value:O||"",onChange:be=>F(be.target.value),placeholder:"CR",className:"w-full",onClick:be=>be.stopPropagation()}),o.jsx(we,{value:ne,onChange:be=>oe(be.target.value),placeholder:"Image URL (or upload)",className:"w-full",onClick:be=>be.stopPropagation()}),o.jsx(we,{value:Q||"",onChange:be=>ee(be.target.value),placeholder:"Group Link",className:"w-full",onClick:be=>be.stopPropagation()}),o.jsx(we,{value:q||"",onChange:be=>K(be.target.value),placeholder:"Graduate Date (e.g., 2025-06-15)",type:"date",className:"w-full",onClick:be=>be.stopPropagation()}),o.jsx(we,{value:Y||"",onChange:be=>U(be.target.value),placeholder:"Academic Supervisor",className:"w-full",onClick:be=>be.stopPropagation()}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(X,{size:"sm",onClick:be=>{be.stopPropagation();try{const qe=document.createElement("input");qe.type="file",qe.accept="image/*",qe.onchange=async()=>{var ot;const It=(ot=qe.files)==null?void 0:ot[0];if(It)try{let nt=null;try{nt=await Mn(It)}catch(Re){console.warn("Cloudinary upload failed, trying ImageKit",(Re==null?void 0:Re.message)||Re),nt=await cs(It,It.name)}if(!nt){alert("Upload failed");return}oe(nt)}catch(nt){console.error(nt),alert("Upload failed")}},qe.click()}catch(qe){console.error(qe),alert("Could not open file dialog")}},children:"Upload"}),o.jsx(X,{size:"sm",onClick:async be=>{be.stopPropagation();try{await(In==null?void 0:In(ie.id,{batch_name:L,batchName:L,cr:O,image_url:ne,imageUrl:ne,group_link:Q,groupLink:Q,graduate_date:q,graduateDate:q,academic_supervisor:Y,academicSupervisor:Y})),k(null),D(""),F(""),oe(""),ee(""),K(""),U(""),alert("Saved")}catch(qe){console.error(qe),alert("Failed to save")}},children:"Save"}),o.jsx(X,{size:"sm",variant:"ghost",onClick:be=>{be.stopPropagation(),k(null),D(""),F(""),oe(""),ee(""),K(""),U("")},children:"Cancel"})]})]}):o.jsxs(o.Fragment,{children:[o.jsx(Ye,{className:"text-lg",children:ie.batchName||"Batch"}),o.jsxs(Ct,{className:"text-sm text-muted-foreground space-y-1",children:[ie.cr&&o.jsxs("div",{children:["CR: ",ie.cr]}),(ie.academicSupervisor||ie.academic_supervisor)&&o.jsxs("div",{children:["Supervisor: ",ie.academicSupervisor||ie.academic_supervisor]}),ie.graduateDate&&o.jsxs("div",{children:["Graduate: ",ie.graduateDate]}),ie.groupLink&&o.jsx("a",{href:ie.groupLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline flex items-center gap-1",onClick:be=>be.stopPropagation(),children:" Group Link"})]})]})})]})}),o.jsx(ye,{className:"mt-auto",onClick:be=>I===ie.id&&be.stopPropagation(),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Years:"," ",(ct||[]).filter(be=>(be.batchId||be.batch_name)===ie.id).length]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(X,{size:"sm",variant:"outline",onClick:be=>{be.stopPropagation(),ft(`/admin/years?batch=${ie.id}`),ht(ie.id)},children:"View Years"}),o.jsx(X,{size:"sm",variant:"ghost",onClick:be=>{be.stopPropagation(),k(ie.id),D(ie.batchName||""),F(ie.cr||""),oe(ie.imageUrl||""),ee(ie.groupLink||ie.group_link||""),K(ie.graduateDate||ie.graduate_date||""),U(ie.academicSupervisor||ie.academic_supervisor||"")},children:"Edit"}),o.jsx(X,{size:"sm",variant:"ghost",onClick:async be=>{be.stopPropagation();try{const qe=document.createElement("input");qe.type="file",qe.accept="image/*",qe.onchange=async()=>{var ot;const It=(ot=qe.files)==null?void 0:ot[0];if(It)try{let nt=null;try{nt=await Mn(It)}catch(Re){console.warn("Cloudinary upload failed, trying ImageKit",(Re==null?void 0:Re.message)||Re),nt=await cs(It,It.name)}if(!nt){alert("Upload failed");return}await(In==null?void 0:In(ie.id,{image_url:nt,imageUrl:nt})),alert("Image updated")}catch(nt){console.error(nt),alert("Failed to upload image")}},qe.click()}catch(qe){console.error(qe),alert("Could not open file dialog")}},children:"Change Image"}),o.jsx(X,{size:"sm",variant:"destructive",onClick:async be=>{be.stopPropagation();try{if(!confirm("Delete this batch and all its years? This cannot be undone."))return;await(An==null?void 0:An(ie.id)),alert("Batch deleted")}catch(qe){console.error(qe),alert("Failed to delete batch")}},children:"Delete"})]})]})})]},ie.id))})})]})]})}function x7(){var $;const{id:t}=gj(),[e,n]=_.useState(!1),[r,s]=_.useState(!1),[a,c]=_.useState(null),[u,h]=_.useState(null),[f,p]=_.useState(""),{years:y,loading:v,updateYear:x,createSubject:E,createLecture:w,deleteSubject:b,deleteLecture:A}=oo(),j=y.find(z=>z.id===t);if(v)return o.jsx(pe,{children:o.jsx(ye,{className:"text-center py-12",children:"Loading..."})});if(!j)return o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:"Year not found"}),o.jsx("div",{className:"flex gap-2 justify-center",children:o.jsx(rr,{to:"/admin/years",children:o.jsx(X,{variant:"outline",children:"Back to Years"})})})]})});const T=async z=>{try{await E({...z,yearId:j.id}),n(!1)}catch(R){console.error(R),alert("Failed to add subject")}},M=async z=>{try{await w(z),s(!1),c(null)}catch(R){console.error(R),alert("Failed to add lecture")}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(rr,{to:"/admin/years",children:o.jsxs(X,{variant:"ghost",children:[o.jsx(us,{className:"h-4 w-4 mr-2"})," Back"]})}),o.jsxs("div",{children:[j.batchName?o.jsxs(o.Fragment,{children:[o.jsx("h1",{className:"text-2xl font-bold",children:j.batchName}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Year ",j.yearNumber]})]}):o.jsxs("h1",{className:"text-2xl font-bold",children:["Year ",j.yearNumber]}),o.jsx("p",{className:"text-muted-foreground",children:"Manage subjects and lectures for this year"})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:!window.__yearEditing&&o.jsxs(o.Fragment,{children:[o.jsxs(X,{variant:"ghost",onClick:async()=>{try{const z=document.createElement("input");z.type="file",z.accept="image/*",z.onchange=async()=>{var I;const R=(I=z.files)==null?void 0:I[0];if(R)try{let k=null;try{k=await Mn(R)}catch(L){console.warn("Cloudinary upload failed, attempting ImageKit fallback:",(L==null?void 0:L.message)||L);try{k=await cs(R,R.name)}catch(D){throw console.error("ImageKit upload also failed:",D),L}}if(!k||typeof k!="string"||!k.startsWith("http")){console.error("Invalid upload response:",k),alert("Image upload failed: unexpected response from upload provider"),window.__yearEditing=!1;return}await(x==null?void 0:x(j.id,{imageUrl:k})),window.__yearEditing=!1}catch(k){console.error(k);const D=((k==null?void 0:k.message)||String(k)||"").toLowerCase();if(D.includes("cloudinary cloud name is not configured")){const O=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!O){alert("No cloud name provided. Upload cancelled."),window.__yearEditing=!1;return}const F=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),ne=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");try{al(O,F||null,ne||null);const oe=await Mn(R);if(console.log("Cloudinary upload result after config:",oe),!oe||typeof oe!="string"||!oe.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(x==null?void 0:x(j.id,{imageUrl:oe}))}catch(oe){console.error(oe),alert("Image upload failed after configuring Cloudinary: "+(oe.message||oe))}window.__yearEditing=!1;return}else if(D.includes("cloudinary signing did not return an api key")||D.includes("missing required parameter - api_key")||D.includes("missing required parameter 'api_key'")){const O=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(O&&O.trim())try{al(null,null,O.trim());const F=await Mn(R);if(!F||typeof F!="string"||!F.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(x==null?void 0:x(j.id,{imageUrl:F})),window.__yearEditing=!1;return}catch(F){console.error(F),alert("Image upload failed after setting API key: "+(F.message||F)),window.__yearEditing=!1;return}}alert("Image upload failed: "+(k.message||k))}},z.click()}catch(z){console.error(z),alert("Could not open file dialog")}},children:[o.jsx(Wc,{className:"h-4 w-4 mr-2"})," ",j.imageUrl?"Change Image":"Add Image"]}),o.jsx(X,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("academicSupervisor"),p(j.academicSupervisor||j.acadmic_supervisor||"")},children:"Academic Supervisor"}),o.jsx(X,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("actor"),p(j.actor||"")},children:"Actor"}),o.jsx(X,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("groupUrl"),p(j.groupUrl||j.group_url||"")},children:"Group URL"}),o.jsx(X,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("batchName"),p(j.batchName||j.batch_name||"")},children:"Batch Name"}),j.imageUrl&&o.jsx(X,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm("Remove year image?"))try{await(x==null?void 0:x(j.id,{imageUrl:""}))}catch(z){console.error(z),alert("Failed to remove year image")}},children:o.jsx(un,{className:"h-3 w-3"})})]})})]}),u&&o.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[o.jsx(we,{placeholder:u==="image"?"Image URL":u==="groupUrl"?"Group URL":u==="academicSupervisor"?"Academic Supervisor":"Actor",value:f,onChange:z=>p(z.target.value),className:"w-full max-w-2xl"}),o.jsx(X,{onClick:async()=>{try{const z={};u==="image"?z.imageUrl=f:u==="academicSupervisor"?(z.academicSupervisor=f,z.acadmic_supervisor=f):u==="actor"?z.actor=f:u==="groupUrl"?(z.groupUrl=f,z.group_url=f):u==="batchName"&&(z.batchName=f,z.batch_name=f),await(x==null?void 0:x(j.id,z)),h(null),p(""),window.__yearEditing=!1}catch(z){console.error(z),alert("Failed to save field")}},children:"Save"}),o.jsx(X,{variant:"ghost",onClick:()=>{h(null),p(""),window.__yearEditing=!1},children:"Cancel"})]}),o.jsxs(pe,{children:[o.jsx(Ke,{children:o.jsxs(Ye,{className:"flex items-center gap-2",children:["Subjects",o.jsxs(Rt,{variant:"secondary",children:[(($=j.subjects)==null?void 0:$.length)||0," subjects"]})]})}),o.jsxs(ye,{children:[o.jsx("div",{className:"flex justify-end mb-4",children:o.jsxs(X,{onClick:()=>n(!0),className:"flex items-center gap-2",children:[o.jsx(Jt,{className:"h-3 w-3"})," Add Subject"]})}),!j.subjects||j.subjects.length===0?o.jsx("div",{className:"text-center py-8",children:"No subjects added yet."}):o.jsx("div",{className:"grid gap-4",children:j.subjects.map(z=>o.jsxs(pe,{className:"bg-secondary/10",children:[o.jsx(Ke,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[z.imageUrl?o.jsx("img",{src:z.imageUrl,alt:z.name,className:"w-8 h-8 object-cover rounded"}):o.jsx("div",{className:"w-8 h-8 bg-muted rounded"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-lg",children:z.name}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:[(z.lectures||[]).length," lectures"]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(X,{onClick:()=>{c(z),s(!0)},variant:"ghost",size:"sm",children:"Add Lecture"}),o.jsx(X,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete subject "${z.name}"?`))try{await b(z.id)}catch(R){console.error(R),alert("Failed to delete subject")}},children:o.jsx(un,{className:"h-3 w-3"})})]})]})}),z.lectures&&z.lectures.length>0&&o.jsx(ye,{children:o.jsx("div",{className:"grid gap-3",children:z.lectures.map(R=>o.jsx(pe,{className:"bg-background border",children:o.jsx(ye,{className:"p-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:R.imageUrl?o.jsx("img",{src:R.imageUrl,alt:R.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"No image"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:R.name}),o.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:R.description||"No description available"})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(X,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${R.name}"?`))try{await A(z.id,R.id)}catch(I){console.error(I),alert("Failed to delete lecture")}},children:o.jsx(un,{className:"h-3 w-3"})})})]})})},R.id))})})]},z.id))})]})]}),e&&o.jsx(Pk,{year:j.yearNumber,yearType:j.type,onClose:()=>n(!1),onSave:T}),r&&a&&o.jsx(sg,{subjectId:a.id,subjectName:a.name,yearType:j.type,onClose:()=>{s(!1),c(null)},onSave:M})]})}const sm="medjust_cache_",eS=1,w7=1e3*60*60,Ka=class Ka{constructor(e=w7){Mf(this,"ttl");this.ttl=e}static getInstance(e){return Ka.instance||(Ka.instance=new Ka(e)),Ka.instance}getCacheKey(e){return`${sm}${e}`}isCacheValid(e){try{const n=this.getCacheKey(e),r=localStorage.getItem(n);if(!r)return console.log(` No cache found for ${e}`),!1;const s=JSON.parse(r);if(s.version!==eS)return console.log(` Cache version mismatch for ${e}, invalidating`),this.clearCache(e),!1;if(Date.now()-s.timestamp>this.ttl)return console.log(` Cache expired for ${e}`),this.clearCache(e),!1;const c=Date.now()-s.timestamp,u=Math.round(c/1e3/60);return console.log(` Valid cache found for ${e} (${u} minutes old)`),!0}catch(n){return console.error(` Error checking cache for ${e}:`,n),!1}}getCache(e){try{const n=this.getCacheKey(e),r=localStorage.getItem(n);if(!r)return null;const s=JSON.parse(r);return console.log(` Retrieved cache for ${e}`),s.data}catch(n){return console.error(` Error retrieving cache for ${e}:`,n),null}}setCache(e,n){try{const r=this.getCacheKey(e),s={data:n,timestamp:Date.now(),version:eS};localStorage.setItem(r,JSON.stringify(s)),console.log(` Cached ${e}`)}catch(r){console.error(` Error setting cache for ${e}:`,r)}}clearCache(e){try{const n=this.getCacheKey(e);localStorage.removeItem(n),console.log(`  Cleared cache for ${e}`)}catch(n){console.error(` Error clearing cache for ${e}:`,n)}}clearAllCache(){try{const e=Object.keys(localStorage).filter(n=>n.startsWith(sm));e.forEach(n=>{localStorage.removeItem(n)}),console.log(`  Cleared all cache (${e.length} entries)`)}catch(e){console.error(" Error clearing all cache:",e)}}getCacheStats(){try{const e=Object.keys(localStorage).filter(s=>s.startsWith(sm));let n=0;const r=e.map(s=>{const a=localStorage.getItem(s),c=a?a.length:0;n+=c;const u=s.match(new RegExp(`^${sm}(.+)$`)),h=u?u[1]:"unknown";let f=0;try{const p=a?JSON.parse(a):null;f=p?Date.now()-p.timestamp:0}catch{f=-1}return{type:h,size:c,age:f}});return{totalSize:n,entries:r}}catch(e){return console.error(" Error getting cache stats:",e),{totalSize:0,entries:[]}}}};Mf(Ka,"instance");let $x=Ka;const od=$x.getInstance();function _7(){const[t,e]=_.useState([]),[n,r]=_.useState(!0),[s,a]=_.useState(null),[c,u]=_.useState(!1),[h,f]=_.useState(1),[p,y]=_.useState("connecting"),v=()=>{console.log(" Activating offline mode for books"),u(!0),y("offline"),r(!1),a(null),e([])};_.useEffect(()=>S0(()=>{(op()||aa())&&(console.log(" Offline mode triggered - updating books hook"),v())}),[]),_.useEffect(()=>{(async()=>{if(aa()){console.log(" Extension blocking detected - activating offline mode"),v();return}if(op()){console.log(" Firebase offline mode detected - activating offline mode"),v();return}if(!navigator.onLine){console.log(" No internet connection - activating offline mode"),v();return}if(y("connecting"),od.isCacheValid("books")){console.log(" Loading books from cache...");const M=od.getCache("books")||[];e(M),r(!1),u(!1),y("connected"),console.log(" Loaded from cache - fetching fresh data...")}else r(!0);try{console.log(" Attempting Firebase connection for books...");const M=Fe(Ne,"books"),$=nn(M,io("createdAt","desc")),z=await lt($),R=new Set,I=[];z.docs.forEach(k=>{var D,O;const L=k.data();if(R.has(k.id)){console.warn(" Duplicate book ID detected:",k.id);return}R.add(k.id),I.push({id:k.id,title:L.title||"",author:L.author||"",description:L.description||"",isbn:L.isbn||"",publishedDate:L.publishedDate||"",publisher:L.publisher||"",category:L.category||"",imageUrl:L.imageUrl||"",pdfUrl:L.pdfUrl||"",createdAt:((D=L.createdAt)==null?void 0:D.toDate())||new Date,updatedAt:((O=L.updatedAt)==null?void 0:O.toDate())||new Date})}),e(I),r(!1),u(!1),y("connected"),a(null),od.setCache("books",I),console.log(" Books loaded from Firebase:",I.length)}catch{if(console.log(" Firebase connection failed for books"),aa()){console.log("Extension detected - activating offline mode"),v();return}od.isCacheValid("books")?(console.log("Using cached data in offline mode"),y("offline"),u(!0),r(!1)):(console.log("No cache available - activating offline mode"),v())}})()},[h]);const x=()=>{console.log(" Retrying Firebase connection for books..."),r(!0),a(null),u(!1),y("connecting"),f(j=>j+1)},E=async j=>{if(A(),c||!navigator.onLine){const T={id:`book_${Date.now()}`,...j,createdAt:new Date};e(M=>M.some(z=>z.id===T.id)?M:[T,...M]),console.log(" Added book to offline mode:",T.title);return}try{const T=Fe(Ne,"books"),M=await pn(T,{title:j.title,author:j.author,description:j.description||"",isbn:j.isbn||"",publishedDate:j.publishedDate||"",publisher:j.publisher||"",category:j.category||"",imageUrl:j.imageUrl||"",pdfUrl:j.pdfUrl||"",createdAt:new Date,updatedAt:new Date});console.log(" Book created in Firebase:",M.id),f($=>$+1)}catch(T){console.error("Error creating book:",T),u(!0),await E(j)}},w=async(j,T)=>{if(j){if(A(),c||!navigator.onLine){e(M=>M.map($=>$.id===j?{...$,...T}:$));return}try{const M=gt(Ne,"books",j);await zt(M,{...T,updatedAt:new Date}),e($=>$.map(z=>z.id===j?{...z,...T}:z)),console.log(" Book updated in Firebase:",j),f($=>$+1)}catch(M){console.error("Error updating book:",M),e($=>$.map(z=>z.id===j?{...z,...T}:z))}}},b=async j=>{if(!j)return;A();const T=t;if(e(M=>M.filter($=>$.id!==j)),c||!navigator.onLine){console.log(" Removed book in offline mode:",j);return}try{const M=gt(Ne,"books",j);await nr(M),console.log(" Book deleted from Firebase:",j),f($=>$+1)}catch(M){throw console.error("Error deleting book:",M),e(T),M}},A=()=>{console.log(" Clearing Books cache..."),od.clearCache("books")};return{books:t,loading:n,error:s,isOfflineMode:c,connectionStatus:p,retryConnection:x,clearCache:A,createBook:E,updateBook:w,deleteBook:b}}function b7(){const[t,e]=_.useState(""),[n,r]=_.useState(!1),[s,a]=_.useState(null),[c,u]=_.useState(!1),[h,f]=_.useState({title:"",author:"",description:"",isbn:"",publishedDate:"",publisher:"",category:"",imageUrl:"",pdfUrl:""}),{books:p,loading:y,error:v,connectionStatus:x,retryConnection:E,clearCache:w,createBook:b,updateBook:A,deleteBook:j}=_7(),T=()=>{f({title:"",author:"",description:"",isbn:"",publishedDate:"",publisher:"",category:"",imageUrl:"",pdfUrl:""})},M=async()=>{if(!h.title.trim()||!h.author.trim()){alert("Please fill in title and author");return}try{await b({title:h.title.trim(),author:h.author.trim(),description:h.description.trim(),isbn:h.isbn.trim(),publishedDate:h.publishedDate,publisher:h.publisher.trim(),category:h.category.trim(),imageUrl:h.imageUrl,pdfUrl:h.pdfUrl}),T(),r(!1),alert("Book added successfully")}catch(O){console.error(O),alert("Failed to add book")}},$=async()=>{if(s!=null&&s.id){if(!h.title.trim()||!h.author.trim()){alert("Please fill in title and author");return}try{await A(s.id,{title:h.title.trim(),author:h.author.trim(),description:h.description.trim(),isbn:h.isbn.trim(),publishedDate:h.publishedDate,publisher:h.publisher.trim(),category:h.category.trim(),imageUrl:h.imageUrl,pdfUrl:h.pdfUrl}),T(),a(null),u(!1),alert("Book updated successfully")}catch(O){console.error(O),alert("Failed to update book")}}},z=async(O,F)=>{if(confirm(`Delete book "${F}"? This cannot be undone.`))try{await j(O),alert("Book deleted successfully")}catch(ne){console.error(ne),alert("Failed to delete book")}},R=O=>{a(O),f({title:O.title,author:O.author,description:O.description||"",isbn:O.isbn||"",publishedDate:O.publishedDate||"",publisher:O.publisher||"",category:O.category||"",imageUrl:O.imageUrl||"",pdfUrl:O.pdfUrl||""}),u(!0)},I=async(O,F)=>{var oe;const ne=(oe=O.target.files)==null?void 0:oe[0];if(ne)try{let Q=null;try{Q=await Mn(ne)}catch(ee){console.warn("Cloudinary upload failed, trying ImageKit",(ee==null?void 0:ee.message)||ee),Q=await cs(ne,ne.name)}if(!Q){alert("Upload failed");return}F(Q),alert("Image uploaded successfully")}catch(Q){console.error(Q),alert("Failed to upload image")}},k=[{title:"Human Anatomy and Physiology",author:"Elaine N. Marieb",description:"A comprehensive guide to human anatomy and physiological systems with detailed illustrations and clinical correlations.",isbn:"978-0134580999",publishedDate:"2019-01-15",publisher:"Pearson",category:"Medical",imageUrl:"https://images-na.ssl-images-amazon.com/images/P/0134580990.01.L.jpg",pdfUrl:"https://example.com/anatomy.pdf"},{title:"Pharmacology: From Principles to Practice",author:"Harold Kalant",description:"Essential pharmacology textbook covering drug mechanisms, interactions, and clinical applications.",isbn:"978-0702031519",publishedDate:"2018-06-20",publisher:"Elsevier",category:"Medical",imageUrl:"https://images-na.ssl-images-amazon.com/images/P/070203151X.01.L.jpg",pdfUrl:"https://example.com/pharmacology.pdf"},{title:"Pathology: The Big Picture",author:"Jonathan S. Schneider",description:"A concise overview of pathological processes, disease mechanisms, and clinical manifestations.",isbn:"978-0071798310",publishedDate:"2017-03-10",publisher:"McGraw-Hill",category:"Medical",imageUrl:"https://images-na.ssl-images-amazon.com/images/P/0071798315.01.L.jpg",pdfUrl:"https://example.com/pathology.pdf"},{title:"Clinical Biochemistry",author:"Peter Baynes",description:"Biochemical principles and their clinical applications in diagnosis and treatment.",isbn:"978-0323529570",publishedDate:"2019-08-14",publisher:"Elsevier",category:"Medical",imageUrl:"https://images-na.ssl-images-amazon.com/images/P/0323529577.01.L.jpg",pdfUrl:"https://example.com/biochemistry.pdf"},{title:"Internal Medicine Essentials",author:"Lawrence M. Tierney Jr.",description:"Core concepts and practical approaches to common internal medicine conditions.",isbn:"978-0071839600",publishedDate:"2016-09-22",publisher:"McGraw-Hill",category:"Medical",imageUrl:"https://images-na.ssl-images-amazon.com/images/P/0071839607.01.L.jpg",pdfUrl:"https://example.com/internal_medicine.pdf"},{title:"Surgery: Basic Science and Clinical Evidence",author:"Jorge I. New",description:"Fundamental surgical principles, evidence-based practices, and clinical decision-making.",isbn:"978-0393712605",publishedDate:"2020-01-16",publisher:"W.W. Norton",category:"Medical",imageUrl:"https://images-na.ssl-images-amazon.com/images/P/0393712605.01.L.jpg",pdfUrl:"https://example.com/surgery.pdf"},{title:"Pediatrics: A Comprehensive Guide",author:"Karen J. Marcdante",description:"Complete pediatric reference covering development, diseases, and management of children's health.",isbn:"978-0323567558",publishedDate:"2019-07-11",publisher:"Elsevier",category:"Medical",imageUrl:"https://images-na.ssl-images-amazon.com/images/P/0323567556.01.L.jpg",pdfUrl:"https://example.com/pediatrics.pdf"},{title:"Obstetrics and Gynecology",author:"Beckmann Charles R.",description:"Comprehensive obstetric and gynecological care principles and clinical management.",isbn:"978-0323479929",publishedDate:"2018-04-20",publisher:"Elsevier",category:"Medical",imageUrl:"https://images-na.ssl-images-amazon.com/images/P/0323479928.01.L.jpg",pdfUrl:"https://example.com/obstetrics.pdf"}],L=async()=>{if(!confirm("This will add 8 sample books to your collection. Continue?"))return;let O=0,F=0;for(let ne=0;ne<k.length;ne++){const oe=k[ne];try{await b(oe),O++,ne<k.length-1&&await new Promise(Q=>setTimeout(Q,300))}catch(Q){console.error("Failed to add book:",oe.title,Q),F++}}alert(`Sample data added! Success: ${O}, Failed: ${F}`)},D=p.filter(O=>{var F,ne;return O.title.toLowerCase().includes(t.toLowerCase())||O.author.toLowerCase().includes(t.toLowerCase())||((F=O.category)==null?void 0:F.toLowerCase().includes(t.toLowerCase()))||!1||((ne=O.isbn)==null?void 0:ne.toLowerCase().includes(t.toLowerCase()))||!1});return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Books Management"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("p",{className:"text-muted-foreground",children:"Manage your book collection"}),x==="offline"&&o.jsxs("span",{className:"flex items-center gap-1 text-orange-600 font-medium text-sm",children:[o.jsx("div",{className:"h-2 w-2 bg-orange-600 rounded-full"}),"Offline Mode"]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(X,{variant:"outline",size:"sm",onClick:()=>{w(),alert("Cache cleared. Data will be refreshed from server.")},title:"Clear cached data and fetch fresh from server",children:" Refresh Cache"}),o.jsx(X,{variant:"outline",size:"sm",onClick:L,title:"Add sample books to test the collection",children:" Add Sample Data"}),o.jsxs(lp,{open:n,onOpenChange:r,children:[o.jsx(bk,{asChild:!0,children:o.jsxs(X,{children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"})," Add Book"]})}),o.jsxs(Yd,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[o.jsxs(Xd,{children:[o.jsx(Jd,{children:"Add New Book"}),o.jsx(Zd,{children:"Fill in the book details below"})]}),o.jsxs("div",{className:"space-y-4 mt-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Title *"}),o.jsx(we,{value:h.title,onChange:O=>f({...h,title:O.target.value}),placeholder:"Book title"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Author *"}),o.jsx(we,{value:h.author,onChange:O=>f({...h,author:O.target.value}),placeholder:"Author name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Description"}),o.jsx(we,{value:h.description,onChange:O=>f({...h,description:O.target.value}),placeholder:"Brief description"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"ISBN"}),o.jsx(we,{value:h.isbn,onChange:O=>f({...h,isbn:O.target.value}),placeholder:"ISBN"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Published Date"}),o.jsx(we,{type:"date",value:h.publishedDate,onChange:O=>f({...h,publishedDate:O.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Publisher"}),o.jsx(we,{value:h.publisher,onChange:O=>f({...h,publisher:O.target.value}),placeholder:"Publisher"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Category"}),o.jsx(we,{value:h.category,onChange:O=>f({...h,category:O.target.value}),placeholder:"e.g., Medical, Science, Fiction"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Book Cover Image URL"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(we,{value:h.imageUrl,onChange:O=>f({...h,imageUrl:O.target.value}),placeholder:"Image URL or click upload"}),o.jsx(X,{variant:"outline",size:"sm",onClick:()=>{const O=document.createElement("input");O.type="file",O.accept="image/*",O.onchange=async()=>{await I({target:{files:O.files}},F=>f({...h,imageUrl:F}))},O.click()},children:o.jsx(Wc,{className:"h-4 w-4"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"PDF URL"}),o.jsx(we,{value:h.pdfUrl,onChange:O=>f({...h,pdfUrl:O.target.value}),placeholder:"Link to PDF file"})]})]}),o.jsxs(cp,{className:"mt-6",children:[o.jsx(X,{onClick:M,children:"Add Book"}),o.jsx(Ux,{asChild:!0,children:o.jsx(X,{variant:"ghost",children:"Cancel"})})]})]})]})]})]}),y&&o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx(ds,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading books..."})]})}),v&&o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:" Error loading books"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:v}),o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx(X,{onClick:E,variant:"outline",children:"Retry Connection"}),o.jsx(X,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!y&&!v&&o.jsxs(o.Fragment,{children:[o.jsx(pe,{children:o.jsx(ye,{className:"pt-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(xa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(we,{placeholder:"Search by title, author, category, or ISBN...",value:t,onChange:O=>e(O.target.value),className:"pl-10"})]})})}),D.length===0?o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx(kr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:p.length===0?"No books found":"No books match your search"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:p.length===0?"Start by adding your first book to the collection.":"Try adjusting your search terms."})]})}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:D.map(O=>o.jsxs(pe,{className:"flex flex-col overflow-hidden hover:shadow-lg transition-shadow",children:[o.jsx(Ke,{className:"pb-3",children:o.jsxs("div",{className:"flex gap-3",children:[O.imageUrl?o.jsx("img",{src:O.imageUrl,alt:O.title,className:"w-16 h-24 object-cover rounded-md flex-shrink-0",onError:F=>{F.currentTarget.style.display="none"}}):o.jsx("div",{className:"w-16 h-24 rounded-md flex-shrink-0 bg-muted flex items-center justify-center",children:o.jsx(kr,{className:"h-6 w-6 text-muted-foreground"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx(Ye,{className:"text-sm line-clamp-2 mb-1",children:O.title}),o.jsxs(Ct,{className:"text-xs mb-2",children:["by ",O.author]}),O.category&&o.jsx(Rt,{variant:"secondary",className:"text-xs",children:O.category})]})]})}),o.jsx(ye,{className:"flex-1 pb-3",children:o.jsxs("div",{className:"space-y-2 text-sm",children:[O.description&&o.jsx("p",{className:"text-muted-foreground line-clamp-2",children:O.description}),O.isbn&&o.jsxs("div",{className:"text-xs text-muted-foreground",children:[o.jsx("span",{className:"font-medium",children:"ISBN:"})," ",O.isbn]}),O.publisher&&o.jsxs("div",{className:"text-xs text-muted-foreground",children:[o.jsx("span",{className:"font-medium",children:"Publisher:"})," ",O.publisher]}),O.publishedDate&&o.jsxs("div",{className:"text-xs text-muted-foreground",children:[o.jsx("span",{className:"font-medium",children:"Published:"})," ",new Date(O.publishedDate).toLocaleDateString()]})]})}),o.jsxs("div",{className:"flex gap-2 p-3 border-t",children:[o.jsxs(X,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>R(O),children:[o.jsx(kD,{className:"h-3 w-3 mr-1"})," Edit"]}),o.jsxs(X,{size:"sm",variant:"destructive",className:"flex-1",onClick:()=>z(O.id||"",O.title),children:[o.jsx(un,{className:"h-3 w-3 mr-1"})," Delete"]})]})]},O.id))})]}),o.jsx(lp,{open:c,onOpenChange:u,children:o.jsxs(Yd,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[o.jsxs(Xd,{children:[o.jsx(Jd,{children:"Edit Book"}),o.jsx(Zd,{children:"Update the book details"})]}),o.jsxs("div",{className:"space-y-4 mt-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Title *"}),o.jsx(we,{value:h.title,onChange:O=>f({...h,title:O.target.value}),placeholder:"Book title"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Author *"}),o.jsx(we,{value:h.author,onChange:O=>f({...h,author:O.target.value}),placeholder:"Author name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Description"}),o.jsx(we,{value:h.description,onChange:O=>f({...h,description:O.target.value}),placeholder:"Brief description"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"ISBN"}),o.jsx(we,{value:h.isbn,onChange:O=>f({...h,isbn:O.target.value}),placeholder:"ISBN"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Published Date"}),o.jsx(we,{type:"date",value:h.publishedDate,onChange:O=>f({...h,publishedDate:O.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Publisher"}),o.jsx(we,{value:h.publisher,onChange:O=>f({...h,publisher:O.target.value}),placeholder:"Publisher"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Category"}),o.jsx(we,{value:h.category,onChange:O=>f({...h,category:O.target.value}),placeholder:"e.g., Medical, Science, Fiction"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Book Cover Image URL"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(we,{value:h.imageUrl,onChange:O=>f({...h,imageUrl:O.target.value}),placeholder:"Image URL or click upload"}),o.jsx(X,{variant:"outline",size:"sm",onClick:()=>{const O=document.createElement("input");O.type="file",O.accept="image/*",O.onchange=async()=>{await I({target:{files:O.files}},F=>f({...h,imageUrl:F}))},O.click()},children:o.jsx(Wc,{className:"h-4 w-4"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"PDF URL"}),o.jsx(we,{value:h.pdfUrl,onChange:O=>f({...h,pdfUrl:O.target.value}),placeholder:"Link to PDF file"})]})]}),o.jsxs(cp,{className:"mt-6",children:[o.jsx(X,{onClick:$,children:"Update Book"}),o.jsx(Ux,{asChild:!0,children:o.jsx(X,{variant:"ghost",children:"Cancel"})})]})]})})]})}function E7({queryKey:t,queryFn:e,pageSize:n=10,enabled:r=!0,staleTime:s=5*60*1e3,gcTime:a=30*60*1e3}){var R,I;const c=xw(),{data:u,fetchNextPage:h,hasNextPage:f,isFetchingNextPage:p,isLoading:y,error:v,refetch:x}=p4({queryKey:[...t,n],queryFn:({pageParam:k=0})=>e(k,n),getNextPageParam:(k,L)=>{if(k.hasMore)return L.length},initialPageParam:0,enabled:r,staleTime:s,gcTime:a,refetchOnWindowFocus:!1,refetchOnMount:!1}),E=(u==null?void 0:u.pages.flatMap(k=>k.data))??[],w=u!=null&&u.pages.length?u.pages.length-1:0,b=((R=u==null?void 0:u.pages[w])==null?void 0:R.data)??[],A=((I=u==null?void 0:u.pages[0])==null?void 0:I.total)??0,j=k=>{var L;return((L=u==null?void 0:u.pages[k])==null?void 0:L.data)??[]},T=k=>((u==null?void 0:u.pages.length)??0)>k,M=()=>{f&&!p&&h()},$=k=>{c.setQueryData([...t,n],L=>{if(!L)return L;const D=[...L.pages];return D[k]&&D.splice(k,1),{...L,pages:D}})},z=()=>{c.invalidateQueries({queryKey:t})};return{data:b,allData:E,currentPage:w,totalPages:Math.ceil(A/n),totalCount:A,hasNextPage:f??!1,isLoading:y,isFetchingNextPage:p,error:v,loadNextPage:h,prefetchNextPage:M,getPage:j,isPageCached:T,invalidatePage:$,clearCache:z,refetch:x}}const N7=10;async function S7(t,e,n){var r;try{const s=nn(Rr(Ne,"lectures"),io("order","asc")),a=await lt(s),c=[];for(const y of a.docs.slice(0,100)){const v=y.data(),x=y.id,E=y.ref,[w,b,A]=await Promise.all([lt(Fe(E,"files")),lt(Fe(E,"quizzes")),lt(Fe(E,"videos"))]),j=w.docs.map($=>{var R;const z=$.data();return{id:$.id,title:z.title||"",fileUrl:z.url||z.fileUrl||"",description:z.description||"",uploadedAt:((R=z.uploadedAt)==null?void 0:R.toDate())||new Date,uploadedBy:z.uploadedBy||"",imageUrl:z.imageUrl||z.thumbnailUrl||"",thumbnailUrl:z.thumbnailUrl||z.imageUrl||""}}),T=b.docs.map($=>{var R;const z=$.data();return{id:$.id,title:z.title||"",description:z.description||"",questions:z.questions||[],timeLimit:z.duration||30,passingScore:z.passRate||70,createdAt:((R=z.createdAt)==null?void 0:R.toDate())||new Date,createdBy:z.uploadedBy||""}}),M=A.docs.map($=>{var R,I;const z=$.data();return{id:$.id,title:z.title||z.name||"",youtubeUrl:z.url||z.youtubeUrl||"",thumbnailUrl:z.thumbnailUrl||z.thumbnail||"",duration:z.duration||z.time||"",description:z.description||"",uploadedAt:((I=(R=z.uploadedAt)==null?void 0:R.toDate)==null?void 0:I.call(R))||new Date,uploadedBy:z.uploadedBy||z.uploader||"",imageUrl:z.thumbnailUrl||""}});c.push({id:x,title:v.title||"",description:v.description||"",subject:v.subjectId||"Unknown",order:v.order||1,createdAt:((r=v.createdAt)==null?void 0:r.toDate())||new Date,createdBy:v.uploadedBy||"",videos:M,files:j,quizzes:T})}c.sort((y,v)=>(y.order||0)-(v.order||0));const u=t*e,h=u+e,f=c.slice(u,h),p=h<c.length;return{data:f,total:c.length,hasMore:p}}catch(s){throw console.error("Error fetching lectures page:",s),s}}function C7(t=N7){return E7({queryKey:["lectures-paginated"],queryFn:S7,pageSize:t,staleTime:5*60*1e3,gcTime:30*60*1e3})}function ig(){const[t,e]=_.useState([]),[n,r]=_.useState(!0),[s,a]=_.useState(null);return _.useEffect(()=>{const f=nn(Rr(Ne,"lectures")),p=vi(f,async y=>{var x;const v=[];for(const E of y.docs){const w=E.data(),b=E.id,A=E.ref,j=await lt(Fe(A,"files")),T=[];j.forEach(I=>{var L;const k=I.data();T.push({id:I.id,title:k.title||"",fileUrl:k.url||k.fileUrl||"",description:k.description||"",uploadedAt:((L=k.uploadedAt)==null?void 0:L.toDate())||new Date,uploadedBy:k.uploadedBy||"",imageUrl:k.imageUrl||k.thumbnailUrl||"",thumbnailUrl:k.thumbnailUrl||k.imageUrl||""})});const M=await lt(Fe(A,"quizzes")),$=[];M.forEach(I=>{var L;const k=I.data();$.push({id:I.id,title:k.title||"",description:k.description||"",questions:k.questions||[],timeLimit:k.duration||30,passingScore:k.passRate||70,createdAt:((L=k.createdAt)==null?void 0:L.toDate())||new Date,createdBy:k.uploadedBy||""})});const z=await lt(Fe(A,"videos")),R=[];z.empty?(w.videos||[]).forEach(k=>{var L,D;R.push({id:k.id||k.videoId||"",title:k.title||k.name||"",youtubeUrl:k.url||k.youtubeUrl||"",thumbnailUrl:k.thumbnailUrl||k.thumbnail||"",duration:k.duration||k.time||"",description:k.description||"",uploadedAt:((D=(L=k.uploadedAt)==null?void 0:L.toDate)==null?void 0:D.call(L))||new Date,uploadedBy:k.uploadedBy||k.uploader||"",imageUrl:k.thumbnailUrl||""})}):z.forEach(I=>{var L,D;const k=I.data();R.push({id:I.id,title:k.title||k.name||"",youtubeUrl:k.url||k.youtubeUrl||"",thumbnailUrl:k.thumbnailUrl||k.thumbnail||"",duration:k.duration||k.time||"",description:k.description||"",uploadedAt:((D=(L=k.uploadedAt)==null?void 0:L.toDate)==null?void 0:D.call(L))||new Date,uploadedBy:k.uploadedBy||k.uploader||"",imageUrl:k.thumbnailUrl||""})}),v.push({id:b,title:w.title||"",description:w.description||"",subject:w.subjectId||"Unknown",order:w.order||1,createdAt:((x=w.createdAt)==null?void 0:x.toDate())||new Date,createdBy:w.uploadedBy||"",videos:R,files:T,quizzes:$})}v.sort((E,w)=>(E.order||0)-(w.order||0)),e(v),r(!1)},y=>{console.error("Error fetching lectures:",y),a("Failed to fetch lectures"),r(!1)});return()=>p()},[]),{lectures:t,loading:n,error:s,createLecture:async(f,p)=>{try{const y=gt(Ne,"Subjects",p),v=Fe(y,"lectures"),{videos:x,files:E,quizzes:w,...b}=f,A=await pn(v,{...b,videos:x,subjectId:p});if(E&&E.length>0){const j=Fe(A,"files");for(const T of E)await pn(j,T)}if(w&&w.length>0){const j=Fe(A,"quizzes");for(const T of w)await pn(j,T)}}catch(y){throw console.error("Error creating lecture:",y),y}},updateLecture:async(f,p)=>{try{const y=nn(Rr(Ne,"lectures")),v=await lt(y);for(const x of v.docs)if(x.id===f){await zt(x.ref,p);break}}catch(y){throw console.error("Error updating lecture:",y),y}},deleteLecture:async f=>{try{const p=nn(Rr(Ne,"lectures")),y=await lt(p);for(const v of y.docs)if(v.id===f){await nr(v.ref);break}}catch(p){throw console.error("Error deleting lecture:",p),p}}}}const Rk=({className:t,...e})=>o.jsx("nav",{role:"navigation","aria-label":"pagination",className:Xe("mx-auto flex w-full justify-center",t),...e});Rk.displayName="Pagination";const Dk=_.forwardRef(({className:t,...e},n)=>o.jsx("ul",{ref:n,className:Xe("flex flex-row items-center gap-1",t),...e}));Dk.displayName="PaginationContent";const bm=_.forwardRef(({className:t,...e},n)=>o.jsx("li",{ref:n,className:Xe("",t),...e}));bm.displayName="PaginationItem";const og=({className:t,isActive:e,size:n="icon",...r})=>o.jsx("a",{"aria-current":e?"page":void 0,className:Xe(CA({variant:e?"outline":"ghost",size:n}),t),...r});og.displayName="PaginationLink";const Ok=({className:t,...e})=>o.jsxs(og,{"aria-label":"Go to previous page",size:"default",className:Xe("gap-1 pl-2.5",t),...e,children:[o.jsx(gD,{className:"h-4 w-4"}),o.jsx("span",{children:"Previous"})]});Ok.displayName="PaginationPrevious";const Lk=({className:t,...e})=>o.jsxs(og,{"aria-label":"Go to next page",size:"default",className:Xe("gap-1 pr-2.5",t),...e,children:[o.jsx("span",{children:"Next"}),o.jsx(yD,{className:"h-4 w-4"})]});Lk.displayName="PaginationNext";const Mk=({className:t,...e})=>o.jsxs("span",{"aria-hidden":!0,className:Xe("flex h-9 w-9 items-center justify-center",t),...e,children:[o.jsx(_D,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"More pages"})]});Mk.displayName="PaginationEllipsis";function tS(t,[e,n]){return Math.min(n,Math.max(e,t))}var j7=_.createContext(void 0);function z0(t){const e=_.useContext(j7);return t||e||"ltr"}var T7="DismissableLayer",zx="dismissableLayer.update",I7="dismissableLayer.pointerDownOutside",A7="dismissableLayer.focusOutside",nS,Fk=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Vk=_.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=t,f=_.useContext(Fk),[p,y]=_.useState(null),v=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=_.useState({}),E=kt(e,R=>y(R)),w=Array.from(f.layers),[b]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),A=w.indexOf(b),j=p?w.indexOf(p):-1,T=f.layersWithOutsidePointerEventsDisabled.size>0,M=j>=A,$=R7(R=>{const I=R.target,k=[...f.branches].some(L=>L.contains(I));!M||k||(s==null||s(R),c==null||c(R),R.defaultPrevented||u==null||u())},v),z=D7(R=>{const I=R.target;[...f.branches].some(L=>L.contains(I))||(a==null||a(R),c==null||c(R),R.defaultPrevented||u==null||u())},v);return Jx(R=>{j===f.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&u&&(R.preventDefault(),u()))},v),_.useEffect(()=>{if(p)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(nS=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(p)),f.layers.add(p),rS(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=nS)}},[p,v,n,f]),_.useEffect(()=>()=>{p&&(f.layers.delete(p),f.layersWithOutsidePointerEventsDisabled.delete(p),rS())},[p,f]),_.useEffect(()=>{const R=()=>x({});return document.addEventListener(zx,R),()=>document.removeEventListener(zx,R)},[]),o.jsx(et.div,{...h,ref:E,style:{pointerEvents:T?M?"auto":"none":void 0,...t.style},onFocusCapture:Qe(t.onFocusCapture,z.onFocusCapture),onBlurCapture:Qe(t.onBlurCapture,z.onBlurCapture),onPointerDownCapture:Qe(t.onPointerDownCapture,$.onPointerDownCapture)})});Vk.displayName=T7;var k7="DismissableLayerBranch",P7=_.forwardRef((t,e)=>{const n=_.useContext(Fk),r=_.useRef(null),s=kt(e,r);return _.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(et.div,{...t,ref:s})});P7.displayName=k7;function R7(t,e=globalThis==null?void 0:globalThis.document){const n=Tn(t),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){Uk(I7,n,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function D7(t,e=globalThis==null?void 0:globalThis.document){const n=Tn(t),r=_.useRef(!1);return _.useEffect(()=>{const s=a=>{a.target&&!r.current&&Uk(A7,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function rS(){const t=new CustomEvent(zx);document.dispatchEvent(t)}function Uk(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?fp(s,a):s.dispatchEvent(a)}var Nv=0;function O7(){_.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??sS()),document.body.insertAdjacentElement("beforeend",t[1]??sS()),Nv++,()=>{Nv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Nv--}},[])}function sS(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}var L7="Portal",$k=_.forwardRef((t,e)=>{var u;const{container:n,...r}=t,[s,a]=_.useState(!1);rn(()=>a(!0),[]);const c=n||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?hp.createPortal(o.jsx(et.div,{...r,ref:e}),c):null});$k.displayName=L7;var zk=qA(),Sv=function(){},ag=_.forwardRef(function(t,e){var n=_.useRef(null),r=_.useState({onScrollCapture:Sv,onWheelCapture:Sv,onTouchMoveCapture:Sv}),s=r[0],a=r[1],c=t.forwardProps,u=t.children,h=t.className,f=t.removeScrollBar,p=t.enabled,y=t.shards,v=t.sideCar,x=t.noIsolation,E=t.inert,w=t.allowPinchZoom,b=t.as,A=b===void 0?"div":b,j=t.gapMode,T=fu(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=v,$=BA([n,e]),z=tr(tr({},T),s);return _.createElement(_.Fragment,null,p&&_.createElement(M,{sideCar:zk,removeScrollBar:f,shards:y,noIsolation:x,inert:E,setCallbacks:a,allowPinchZoom:!!w,lockRef:n,gapMode:j}),c?_.cloneElement(_.Children.only(u),tr(tr({},z),{ref:$})):_.createElement(A,tr({},z,{className:h,ref:$}),u))});ag.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ag.classNames={fullWidth:jd,zeroRight:Cd};var Bx=!1;if(typeof window<"u")try{var im=Object.defineProperty({},"passive",{get:function(){return Bx=!0,!0}});window.addEventListener("test",im,im),window.removeEventListener("test",im,im)}catch{Bx=!1}var pc=Bx?{passive:!1}:!1,M7=function(t){return t.tagName==="TEXTAREA"},Bk=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!M7(t)&&n[e]==="visible")},F7=function(t){return Bk(t,"overflowY")},V7=function(t){return Bk(t,"overflowX")},iS=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=qk(t,r);if(s){var a=Wk(t,r),c=a[1],u=a[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},U7=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},$7=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},qk=function(t,e){return t==="v"?F7(e):V7(e)},Wk=function(t,e){return t==="v"?U7(e):$7(e)},z7=function(t,e){return t==="h"&&e==="rtl"?-1:1},B7=function(t,e,n,r,s){var a=z7(t,window.getComputedStyle(e).direction),c=a*r,u=n.target,h=e.contains(u),f=!1,p=c>0,y=0,v=0;do{var x=Wk(t,u),E=x[0],w=x[1],b=x[2],A=w-b-a*E;(E||A)&&qk(t,u)&&(y+=A,v+=E),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(p&&Math.abs(y)<1||!p&&Math.abs(v)<1)&&(f=!0),f},om=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},oS=function(t){return[t.deltaX,t.deltaY]},aS=function(t){return t&&"current"in t?t.current:t},q7=function(t,e){return t[0]===e[0]&&t[1]===e[1]},W7=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},H7=0,gc=[];function K7(t){var e=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),s=_.useState(H7++)[0],a=_.useState(R0)[0],c=_.useRef(t);_.useEffect(function(){c.current=t},[t]),_.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var w=Oj([t.lockRef.current],(t.shards||[]).map(aS),!0).filter(Boolean);return w.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),w.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var u=_.useCallback(function(w,b){if("touches"in w&&w.touches.length===2)return!c.current.allowPinchZoom;var A=om(w),j=n.current,T="deltaX"in w?w.deltaX:j[0]-A[0],M="deltaY"in w?w.deltaY:j[1]-A[1],$,z=w.target,R=Math.abs(T)>Math.abs(M)?"h":"v";if("touches"in w&&R==="h"&&z.type==="range")return!1;var I=iS(R,z);if(!I)return!0;if(I?$=R:($=R==="v"?"h":"v",I=iS(R,z)),!I)return!1;if(!r.current&&"changedTouches"in w&&(T||M)&&(r.current=$),!$)return!0;var k=r.current||$;return B7(k,b,w,k==="h"?T:M)},[]),h=_.useCallback(function(w){var b=w;if(!(!gc.length||gc[gc.length-1]!==a)){var A="deltaY"in b?oS(b):om(b),j=e.current.filter(function($){return $.name===b.type&&($.target===b.target||b.target===$.shadowParent)&&q7($.delta,A)})[0];if(j&&j.should){b.cancelable&&b.preventDefault();return}if(!j){var T=(c.current.shards||[]).map(aS).filter(Boolean).filter(function($){return $.contains(b.target)}),M=T.length>0?u(b,T[0]):!c.current.noIsolation;M&&b.cancelable&&b.preventDefault()}}},[]),f=_.useCallback(function(w,b,A,j){var T={name:w,delta:b,target:A,should:j,shadowParent:G7(A)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(M){return M!==T})},1)},[]),p=_.useCallback(function(w){n.current=om(w),r.current=void 0},[]),y=_.useCallback(function(w){f(w.type,oS(w),w.target,u(w,t.lockRef.current))},[]),v=_.useCallback(function(w){f(w.type,om(w),w.target,u(w,t.lockRef.current))},[]);_.useEffect(function(){return gc.push(a),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:v}),document.addEventListener("wheel",h,pc),document.addEventListener("touchmove",h,pc),document.addEventListener("touchstart",p,pc),function(){gc=gc.filter(function(w){return w!==a}),document.removeEventListener("wheel",h,pc),document.removeEventListener("touchmove",h,pc),document.removeEventListener("touchstart",p,pc)}},[]);var x=t.removeScrollBar,E=t.inert;return _.createElement(_.Fragment,null,E?_.createElement(a,{styles:W7(s)}):null,x?_.createElement(GA,{gapMode:t.gapMode}):null)}function G7(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Q7=HA(zk,K7);var Hk=_.forwardRef(function(t,e){return _.createElement(ag,tr({},t,{ref:e,sideCar:Q7}))});Hk.classNames=ag.classNames;var Y7=[" ","Enter","ArrowUp","ArrowDown"],X7=[" ","Enter"],bh="Select",[lg,cg,J7]=Xx(bh),[bu,OW]=to(bh,[J7,xp]),ug=xp(),[Z7,Ea]=bu(bh),[eq,tq]=bu(bh),Kk=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:a,value:c,defaultValue:u,onValueChange:h,dir:f,name:p,autoComplete:y,disabled:v,required:x}=t,E=ug(e),[w,b]=_.useState(null),[A,j]=_.useState(null),[T,M]=_.useState(!1),$=z0(f),[z=!1,R]=cl({prop:r,defaultProp:s,onChange:a}),[I,k]=cl({prop:c,defaultProp:u,onChange:h}),L=_.useRef(null),D=w?!!w.closest("form"):!0,[O,F]=_.useState(new Set),ne=Array.from(O).map(oe=>oe.props.value).join(";");return o.jsx(hM,{...E,children:o.jsxs(Z7,{required:x,scope:e,trigger:w,onTriggerChange:b,valueNode:A,onValueNodeChange:j,valueNodeHasChildren:T,onValueNodeHasChildrenChange:M,contentId:Jo(),value:I,onValueChange:k,open:z,onOpenChange:R,dir:$,triggerPointerDownPosRef:L,disabled:v,children:[o.jsx(lg.Provider,{scope:e,children:o.jsx(eq,{scope:t.__scopeSelect,onNativeOptionAdd:_.useCallback(oe=>{F(Q=>new Set(Q).add(oe))},[]),onNativeOptionRemove:_.useCallback(oe=>{F(Q=>{const ee=new Set(Q);return ee.delete(oe),ee})},[]),children:n})}),D?o.jsxs(vP,{"aria-hidden":!0,required:x,tabIndex:-1,name:p,autoComplete:y,value:I,onChange:oe=>k(oe.target.value),disabled:v,children:[I===void 0?o.jsx("option",{value:""}):null,Array.from(O)]},ne):null]})})};Kk.displayName=bh;var Gk="SelectTrigger",Qk=_.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,a=ug(n),c=Ea(Gk,n),u=c.disabled||r,h=kt(e,c.onTriggerChange),f=cg(n),[p,y,v]=xP(E=>{const w=f().filter(j=>!j.disabled),b=w.find(j=>j.value===c.value),A=wP(w,E,b);A!==void 0&&c.onValueChange(A.value)}),x=()=>{u||(c.onOpenChange(!0),v())};return o.jsx(LC,{asChild:!0,...a,children:o.jsx(et.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":yP(c.value)?"":void 0,...s,ref:h,onClick:Qe(s.onClick,E=>{E.currentTarget.focus()}),onPointerDown:Qe(s.onPointerDown,E=>{const w=E.target;w.hasPointerCapture(E.pointerId)&&w.releasePointerCapture(E.pointerId),E.button===0&&E.ctrlKey===!1&&(x(),c.triggerPointerDownPosRef.current={x:Math.round(E.pageX),y:Math.round(E.pageY)},E.preventDefault())}),onKeyDown:Qe(s.onKeyDown,E=>{const w=p.current!=="";!(E.ctrlKey||E.altKey||E.metaKey)&&E.key.length===1&&y(E.key),!(w&&E.key===" ")&&Y7.includes(E.key)&&(x(),E.preventDefault())})})})});Qk.displayName=Gk;var Yk="SelectValue",Xk=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:c="",...u}=t,h=Ea(Yk,n),{onValueNodeHasChildrenChange:f}=h,p=a!==void 0,y=kt(e,h.onValueNodeChange);return rn(()=>{f(p)},[f,p]),o.jsx(et.span,{...u,ref:y,style:{pointerEvents:"none"},children:yP(h.value)?o.jsx(o.Fragment,{children:c}):a})});Xk.displayName=Yk;var nq="SelectIcon",Jk=_.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return o.jsx(et.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});Jk.displayName=nq;var rq="SelectPortal",Zk=t=>o.jsx($k,{asChild:!0,...t});Zk.displayName=rq;var xl="SelectContent",eP=_.forwardRef((t,e)=>{const n=Ea(xl,t.__scopeSelect),[r,s]=_.useState();if(rn(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?wl.createPortal(o.jsx(tP,{scope:t.__scopeSelect,children:o.jsx(lg.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),a):null}return o.jsx(nP,{...t,ref:e})});eP.displayName=xl;var zi=10,[tP,Na]=bu(xl),sq="SelectContentImpl",nP=_.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:c,side:u,sideOffset:h,align:f,alignOffset:p,arrowPadding:y,collisionBoundary:v,collisionPadding:x,sticky:E,hideWhenDetached:w,avoidCollisions:b,...A}=t,j=Ea(xl,n),[T,M]=_.useState(null),[$,z]=_.useState(null),R=kt(e,_e=>M(_e)),[I,k]=_.useState(null),[L,D]=_.useState(null),O=cg(n),[F,ne]=_.useState(!1),oe=_.useRef(!1);_.useEffect(()=>{if(T)return ek(T)},[T]),O7();const Q=_.useCallback(_e=>{const[Ae,...He]=O().map(Ue=>Ue.ref.current),[Ve]=He.slice(-1),me=document.activeElement;for(const Ue of _e)if(Ue===me||(Ue==null||Ue.scrollIntoView({block:"nearest"}),Ue===Ae&&$&&($.scrollTop=0),Ue===Ve&&$&&($.scrollTop=$.scrollHeight),Ue==null||Ue.focus(),document.activeElement!==me))return},[O,$]),ee=_.useCallback(()=>Q([I,T]),[Q,I,T]);_.useEffect(()=>{F&&ee()},[F,ee]);const{onOpenChange:q,triggerPointerDownPosRef:K}=j;_.useEffect(()=>{if(T){let _e={x:0,y:0};const Ae=Ve=>{var me,Ue;_e={x:Math.abs(Math.round(Ve.pageX)-(((me=K.current)==null?void 0:me.x)??0)),y:Math.abs(Math.round(Ve.pageY)-(((Ue=K.current)==null?void 0:Ue.y)??0))}},He=Ve=>{_e.x<=10&&_e.y<=10?Ve.preventDefault():T.contains(Ve.target)||q(!1),document.removeEventListener("pointermove",Ae),K.current=null};return K.current!==null&&(document.addEventListener("pointermove",Ae),document.addEventListener("pointerup",He,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ae),document.removeEventListener("pointerup",He,{capture:!0})}}},[T,q,K]),_.useEffect(()=>{const _e=()=>q(!1);return window.addEventListener("blur",_e),window.addEventListener("resize",_e),()=>{window.removeEventListener("blur",_e),window.removeEventListener("resize",_e)}},[q]);const[Y,U]=xP(_e=>{const Ae=O().filter(me=>!me.disabled),He=Ae.find(me=>me.ref.current===document.activeElement),Ve=wP(Ae,_e,He);Ve&&setTimeout(()=>Ve.ref.current.focus())}),H=_.useCallback((_e,Ae,He)=>{const Ve=!oe.current&&!He;(j.value!==void 0&&j.value===Ae||Ve)&&(k(_e),Ve&&(oe.current=!0))},[j.value]),le=_.useCallback(()=>T==null?void 0:T.focus(),[T]),ue=_.useCallback((_e,Ae,He)=>{const Ve=!oe.current&&!He;(j.value!==void 0&&j.value===Ae||Ve)&&D(_e)},[j.value]),ke=r==="popper"?qx:rP,Te=ke===qx?{side:u,sideOffset:h,align:f,alignOffset:p,arrowPadding:y,collisionBoundary:v,collisionPadding:x,sticky:E,hideWhenDetached:w,avoidCollisions:b}:{};return o.jsx(tP,{scope:n,content:T,viewport:$,onViewportChange:z,itemRefCallback:H,selectedItem:I,onItemLeave:le,itemTextRefCallback:ue,focusSelectedItem:ee,selectedItemText:L,position:r,isPositioned:F,searchRef:Y,children:o.jsx(Hk,{as:ll,allowPinchZoom:!0,children:o.jsx(P0,{asChild:!0,trapped:j.open,onMountAutoFocus:_e=>{_e.preventDefault()},onUnmountAutoFocus:Qe(s,_e=>{var Ae;(Ae=j.trigger)==null||Ae.focus({preventScroll:!0}),_e.preventDefault()}),children:o.jsx(Vk,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:_e=>_e.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:o.jsx(ke,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:_e=>_e.preventDefault(),...A,...Te,onPlaced:()=>ne(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...A.style},onKeyDown:Qe(A.onKeyDown,_e=>{const Ae=_e.ctrlKey||_e.altKey||_e.metaKey;if(_e.key==="Tab"&&_e.preventDefault(),!Ae&&_e.key.length===1&&U(_e.key),["ArrowUp","ArrowDown","Home","End"].includes(_e.key)){let Ve=O().filter(me=>!me.disabled).map(me=>me.ref.current);if(["ArrowUp","End"].includes(_e.key)&&(Ve=Ve.slice().reverse()),["ArrowUp","ArrowDown"].includes(_e.key)){const me=_e.target,Ue=Ve.indexOf(me);Ve=Ve.slice(Ue+1)}setTimeout(()=>Q(Ve)),_e.preventDefault()}})})})})})})});nP.displayName=sq;var iq="SelectItemAlignedPosition",rP=_.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,a=Ea(xl,n),c=Na(xl,n),[u,h]=_.useState(null),[f,p]=_.useState(null),y=kt(e,R=>p(R)),v=cg(n),x=_.useRef(!1),E=_.useRef(!0),{viewport:w,selectedItem:b,selectedItemText:A,focusSelectedItem:j}=c,T=_.useCallback(()=>{if(a.trigger&&a.valueNode&&u&&f&&w&&b&&A){const R=a.trigger.getBoundingClientRect(),I=f.getBoundingClientRect(),k=a.valueNode.getBoundingClientRect(),L=A.getBoundingClientRect();if(a.dir!=="rtl"){const me=L.left-I.left,Ue=k.left-me,ht=R.left-Ue,ft=R.width+ht,fe=Math.max(ft,I.width),Ce=window.innerWidth-zi,ct=tS(Ue,[zi,Ce-fe]);u.style.minWidth=ft+"px",u.style.left=ct+"px"}else{const me=I.right-L.right,Ue=window.innerWidth-k.right-me,ht=window.innerWidth-R.right-Ue,ft=R.width+ht,fe=Math.max(ft,I.width),Ce=window.innerWidth-zi,ct=tS(Ue,[zi,Ce-fe]);u.style.minWidth=ft+"px",u.style.right=ct+"px"}const D=v(),O=window.innerHeight-zi*2,F=w.scrollHeight,ne=window.getComputedStyle(f),oe=parseInt(ne.borderTopWidth,10),Q=parseInt(ne.paddingTop,10),ee=parseInt(ne.borderBottomWidth,10),q=parseInt(ne.paddingBottom,10),K=oe+Q+F+q+ee,Y=Math.min(b.offsetHeight*5,K),U=window.getComputedStyle(w),H=parseInt(U.paddingTop,10),le=parseInt(U.paddingBottom,10),ue=R.top+R.height/2-zi,ke=O-ue,Te=b.offsetHeight/2,_e=b.offsetTop+Te,Ae=oe+Q+_e,He=K-Ae;if(Ae<=ue){const me=b===D[D.length-1].ref.current;u.style.bottom="0px";const Ue=f.clientHeight-w.offsetTop-w.offsetHeight,ht=Math.max(ke,Te+(me?le:0)+Ue+ee),ft=Ae+ht;u.style.height=ft+"px"}else{const me=b===D[0].ref.current;u.style.top="0px";const ht=Math.max(ue,oe+w.offsetTop+(me?H:0)+Te)+He;u.style.height=ht+"px",w.scrollTop=Ae-ue+w.offsetTop}u.style.margin=`${zi}px 0`,u.style.minHeight=Y+"px",u.style.maxHeight=O+"px",r==null||r(),requestAnimationFrame(()=>x.current=!0)}},[v,a.trigger,a.valueNode,u,f,w,b,A,a.dir,r]);rn(()=>T(),[T]);const[M,$]=_.useState();rn(()=>{f&&$(window.getComputedStyle(f).zIndex)},[f]);const z=_.useCallback(R=>{R&&E.current===!0&&(T(),j==null||j(),E.current=!1)},[T,j]);return o.jsx(aq,{scope:n,contentWrapper:u,shouldExpandOnScrollRef:x,onScrollButtonChange:z,children:o.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:o.jsx(et.div,{...s,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});rP.displayName=iq;var oq="SelectPopperPosition",qx=_.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=zi,...a}=t,c=ug(n);return o.jsx(MC,{...c,...a,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});qx.displayName=oq;var[aq,B0]=bu(xl,{}),Wx="SelectViewport",sP=_.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,a=Na(Wx,n),c=B0(Wx,n),u=kt(e,a.onViewportChange),h=_.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(lg.Slot,{scope:n,children:o.jsx(et.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:u,style:{position:"relative",flex:1,overflow:"auto",...s.style},onScroll:Qe(s.onScroll,f=>{const p=f.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:v}=c;if(v!=null&&v.current&&y){const x=Math.abs(h.current-p.scrollTop);if(x>0){const E=window.innerHeight-zi*2,w=parseFloat(y.style.minHeight),b=parseFloat(y.style.height),A=Math.max(w,b);if(A<E){const j=A+x,T=Math.min(E,j),M=j-T;y.style.height=T+"px",y.style.bottom==="0px"&&(p.scrollTop=M>0?M:0,y.style.justifyContent="flex-end")}}}h.current=p.scrollTop})})})]})});sP.displayName=Wx;var iP="SelectGroup",[lq,cq]=bu(iP),uq=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Jo();return o.jsx(lq,{scope:n,id:s,children:o.jsx(et.div,{role:"group","aria-labelledby":s,...r,ref:e})})});uq.displayName=iP;var oP="SelectLabel",aP=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=cq(oP,n);return o.jsx(et.div,{id:s.id,...r,ref:e})});aP.displayName=oP;var up="SelectItem",[dq,lP]=bu(up),cP=_.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...c}=t,u=Ea(up,n),h=Na(up,n),f=u.value===r,[p,y]=_.useState(a??""),[v,x]=_.useState(!1),E=kt(e,A=>{var j;return(j=h.itemRefCallback)==null?void 0:j.call(h,A,r,s)}),w=Jo(),b=()=>{s||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(dq,{scope:n,value:r,disabled:s,textId:w,isSelected:f,onItemTextChange:_.useCallback(A=>{y(j=>j||((A==null?void 0:A.textContent)??"").trim())},[]),children:o.jsx(lg.ItemSlot,{scope:n,value:r,disabled:s,textValue:p,children:o.jsx(et.div,{role:"option","aria-labelledby":w,"data-highlighted":v?"":void 0,"aria-selected":f&&v,"data-state":f?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...c,ref:E,onFocus:Qe(c.onFocus,()=>x(!0)),onBlur:Qe(c.onBlur,()=>x(!1)),onPointerUp:Qe(c.onPointerUp,b),onPointerMove:Qe(c.onPointerMove,A=>{var j;s?(j=h.onItemLeave)==null||j.call(h):A.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Qe(c.onPointerLeave,A=>{var j;A.currentTarget===document.activeElement&&((j=h.onItemLeave)==null||j.call(h))}),onKeyDown:Qe(c.onKeyDown,A=>{var T;((T=h.searchRef)==null?void 0:T.current)!==""&&A.key===" "||(X7.includes(A.key)&&b(),A.key===" "&&A.preventDefault())})})})})});cP.displayName=up;var fd="SelectItemText",uP=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...a}=t,c=Ea(fd,n),u=Na(fd,n),h=lP(fd,n),f=tq(fd,n),[p,y]=_.useState(null),v=kt(e,A=>y(A),h.onItemTextChange,A=>{var j;return(j=u.itemTextRefCallback)==null?void 0:j.call(u,A,h.value,h.disabled)}),x=p==null?void 0:p.textContent,E=_.useMemo(()=>o.jsx("option",{value:h.value,disabled:h.disabled,children:x},h.value),[h.disabled,h.value,x]),{onNativeOptionAdd:w,onNativeOptionRemove:b}=f;return rn(()=>(w(E),()=>b(E)),[w,b,E]),o.jsxs(o.Fragment,{children:[o.jsx(et.span,{id:h.textId,...a,ref:v}),h.isSelected&&c.valueNode&&!c.valueNodeHasChildren?wl.createPortal(a.children,c.valueNode):null]})});uP.displayName=fd;var dP="SelectItemIndicator",hP=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return lP(dP,n).isSelected?o.jsx(et.span,{"aria-hidden":!0,...r,ref:e}):null});hP.displayName=dP;var Hx="SelectScrollUpButton",fP=_.forwardRef((t,e)=>{const n=Na(Hx,t.__scopeSelect),r=B0(Hx,t.__scopeSelect),[s,a]=_.useState(!1),c=kt(e,r.onScrollButtonChange);return rn(()=>{if(n.viewport&&n.isPositioned){let u=function(){const f=h.scrollTop>0;a(f)};const h=n.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),s?o.jsx(pP,{...t,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=n;u&&h&&(u.scrollTop=u.scrollTop-h.offsetHeight)}}):null});fP.displayName=Hx;var Kx="SelectScrollDownButton",mP=_.forwardRef((t,e)=>{const n=Na(Kx,t.__scopeSelect),r=B0(Kx,t.__scopeSelect),[s,a]=_.useState(!1),c=kt(e,r.onScrollButtonChange);return rn(()=>{if(n.viewport&&n.isPositioned){let u=function(){const f=h.scrollHeight-h.clientHeight,p=Math.ceil(h.scrollTop)<f;a(p)};const h=n.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),s?o.jsx(pP,{...t,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=n;u&&h&&(u.scrollTop=u.scrollTop+h.offsetHeight)}}):null});mP.displayName=Kx;var pP=_.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,a=Na("SelectScrollButton",n),c=_.useRef(null),u=cg(n),h=_.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return _.useEffect(()=>()=>h(),[h]),rn(()=>{var p;const f=u().find(y=>y.ref.current===document.activeElement);(p=f==null?void 0:f.ref.current)==null||p.scrollIntoView({block:"nearest"})},[u]),o.jsx(et.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Qe(s.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:Qe(s.onPointerMove,()=>{var f;(f=a.onItemLeave)==null||f.call(a),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:Qe(s.onPointerLeave,()=>{h()})})}),hq="SelectSeparator",gP=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return o.jsx(et.div,{"aria-hidden":!0,...r,ref:e})});gP.displayName=hq;var Gx="SelectArrow",fq=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ug(n),a=Ea(Gx,n),c=Na(Gx,n);return a.open&&c.position==="popper"?o.jsx(FC,{...s,...r,ref:e}):null});fq.displayName=Gx;function yP(t){return t===""||t===void 0}var vP=_.forwardRef((t,e)=>{const{value:n,...r}=t,s=_.useRef(null),a=kt(e,s),c=Nk(n);return _.useEffect(()=>{const u=s.current,h=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(h,"value").set;if(c!==n&&p){const y=new Event("change",{bubbles:!0});p.call(u,n),u.dispatchEvent(y)}},[c,n]),o.jsx(sh,{asChild:!0,children:o.jsx("select",{...r,ref:a,defaultValue:n})})});vP.displayName="BubbleSelect";function xP(t){const e=Tn(t),n=_.useRef(""),r=_.useRef(0),s=_.useCallback(c=>{const u=n.current+c;e(u),function h(f){n.current=f,window.clearTimeout(r.current),f!==""&&(r.current=window.setTimeout(()=>h(""),1e3))}(u)},[e]),a=_.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function wP(t,e,n){const s=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let c=mq(t,Math.max(a,0));s.length===1&&(c=c.filter(f=>f!==n));const h=c.find(f=>f.textValue.toLowerCase().startsWith(s.toLowerCase()));return h!==n?h:void 0}function mq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var pq=Kk,_P=Qk,gq=Xk,yq=Jk,vq=Zk,bP=eP,xq=sP,EP=aP,NP=cP,wq=uP,_q=hP,SP=fP,CP=mP,jP=gP;const Em=pq,Nm=gq,Td=_.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(_P,{ref:r,className:Xe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,o.jsx(yq,{asChild:!0,children:o.jsx(tC,{className:"h-4 w-4 opacity-50"})})]}));Td.displayName=_P.displayName;const TP=_.forwardRef(({className:t,...e},n)=>o.jsx(SP,{ref:n,className:Xe("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(vD,{className:"h-4 w-4"})}));TP.displayName=SP.displayName;const IP=_.forwardRef(({className:t,...e},n)=>o.jsx(CP,{ref:n,className:Xe("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(tC,{className:"h-4 w-4"})}));IP.displayName=CP.displayName;const Id=_.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>o.jsx(vq,{children:o.jsxs(bP,{ref:s,className:Xe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[o.jsx(TP,{}),o.jsx(xq,{className:Xe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(IP,{})]})}));Id.displayName=bP.displayName;const bq=_.forwardRef(({className:t,...e},n)=>o.jsx(EP,{ref:n,className:Xe("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));bq.displayName=EP.displayName;const Mo=_.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(NP,{ref:r,className:Xe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(_q,{children:o.jsx(Sm,{className:"h-4 w-4"})})}),o.jsx(wq,{children:e})]}));Mo.displayName=NP.displayName;const Eq=_.forwardRef(({className:t,...e},n)=>o.jsx(jP,{ref:n,className:Xe("-mx-1 my-1 h-px bg-muted",t),...e}));Eq.displayName=jP.displayName;function Nq({currentPage:t,totalPages:e,totalCount:n,pageSize:r,hasNextPage:s,isLoading:a,isFetchingNextPage:c,cachedPages:u,onPageChange:h,onPageSizeChange:f,onLoadNext:p,pageSizeOptions:y=[5,10,20,50]}){const v=()=>{const x=[];if(e<=7)for(let w=0;w<e;w++)x.push(w);else if(t<3){for(let w=0;w<5;w++)x.push(w);x.push("ellipsis"),x.push(e-1)}else if(t>e-4){x.push(0),x.push("ellipsis");for(let w=e-5;w<e;w++)x.push(w)}else{x.push(0),x.push("ellipsis");for(let w=t-1;w<=t+1;w++)x.push(w);x.push("ellipsis"),x.push(e-1)}return x};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Hy,{className:"h-4 w-4"}),o.jsxs("span",{children:["Showing page ",t+1," of ",e," (",n," total)"]})]}),u.length>0&&o.jsxs(Rt,{variant:"secondary",className:"gap-1",children:[o.jsx(Hy,{className:"h-3 w-3"}),u.length," page",u.length!==1?"s":""," cached"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Items per page:"}),o.jsxs(Em,{value:r.toString(),onValueChange:x=>f(Number(x)),children:[o.jsx(Td,{className:"w-20",children:o.jsx(Nm,{})}),o.jsx(Id,{children:y.map(x=>o.jsx(Mo,{value:x.toString(),children:x},x))})]})]})]}),o.jsx(Rk,{children:o.jsxs(Dk,{children:[o.jsx(bm,{children:o.jsx(Ok,{onClick:()=>t>0&&h(t-1),className:t===0?"pointer-events-none opacity-50":"cursor-pointer"})}),v().map((x,E)=>o.jsx(bm,{children:x==="ellipsis"?o.jsx(Mk,{}):o.jsxs(og,{onClick:()=>h(x),isActive:x===t,className:"cursor-pointer",children:[x+1,u.includes(x)&&o.jsx(Hy,{className:"h-3 w-3 ml-1 text-primary"})]})},E)),o.jsx(bm,{children:o.jsx(Lk,{onClick:()=>{s&&(p(),h(t+1))},className:s?"cursor-pointer":"pointer-events-none opacity-50"})})]})}),c&&o.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[o.jsx(ds,{className:"h-4 w-4 animate-spin"}),o.jsx("span",{children:"Loading next page..."})]})]})}function lS(){const[t,e]=_.useState(""),[n,r]=_.useState(null),[s,a]=_.useState(!1),[c,u]=_.useState(10),[h,f]=_.useState(0),[p,y]=_.useState(!1),[v,x]=_.useState(!1),[E,w]=_.useState(!1),[b,A]=_.useState(null),[j,T]=_.useState(null),[M,$]=_.useState(null),{data:z,allData:R,currentPage:I,totalPages:k,totalCount:L,hasNextPage:D,isLoading:O,isFetchingNextPage:F,error:ne,loadNextPage:oe,isPageCached:Q,prefetchNextPage:ee}=C7(c),{createLecture:q,updateLecture:K,deleteLecture:Y}=ig(),U=ne?ne.message:null;oo();const[H]=lh(),le=H.get("lecture");H.get("tab");let ke=t?R.filter(fe=>fe.title.toLowerCase().includes(t.toLowerCase())||fe.subject.toLowerCase().includes(t.toLowerCase())):z;le&&(ke=R.filter(fe=>fe.id===le));const Te=[];for(let fe=0;fe<=I;fe++)Q(fe)&&Te.push(fe);const _e=fe=>{f(fe),!Q(fe)&&fe>I&&oe()},Ae=fe=>{u(fe),f(0)};Se.useEffect(()=>{if(D&&!F){const fe=setTimeout(()=>{ee()},1e3);return()=>clearTimeout(fe)}},[D,F,ee]);const He=()=>{r(null),a(!0)},Ve=fe=>{r(fe),a(!0)},me=fe=>{A(fe),y(!0)},Ue=fe=>{T(fe),x(!0)},ht=fe=>{$(fe),w(!0)},ft=async fe=>{if(window.confirm(`Delete lecture "${fe.name||fe.title}" and all its resources?`))try{await Y(fe.id),alert("Lecture deleted successfully")}catch(Ce){console.error("Error deleting lecture:",Ce),alert("Failed to delete lecture")}};return p?o.jsx($0,{video:b,onClose:()=>{y(!1),A(null)},onSave:async fe=>{try{b&&(console.log(" Video updated successfully"),alert("Video updated! The page will reload to show changes."),window.location.reload()),y(!1),A(null)}catch(Ce){console.error("Error saving video:",Ce),alert("Failed to save video")}}}):v?o.jsx(U0,{file:j,onClose:()=>{x(!1),T(null)},onSave:async fe=>{try{j&&(console.log(" File updated successfully"),alert("File updated! The page will reload to show changes."),window.location.reload()),x(!1),T(null)}catch(Ce){console.error("Error saving file:",Ce),alert("Failed to save file")}}}):E?o.jsx(V0,{quiz:M,onClose:()=>{w(!1),$(null)},onSave:async fe=>{try{M&&(console.log(" Quiz updated successfully"),alert("Quiz updated! The page will reload to show changes."),window.location.reload()),w(!1),$(null)}catch(Ce){console.error("Error saving quiz:",Ce),alert("Failed to save quiz")}}}):s?o.jsx(sg,{lecture:n,onClose:()=>{a(!1),r(null)},onSave:async fe=>{try{n?await K(n.id,fe):await q(fe,"default-subject"),a(!1),r(null)}catch(Ce){console.error("Error saving lecture:",Ce)}}}):(le&&z.find(fe=>fe.id===le),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Resources Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Organize educational content by lectures with videos, files, and quizzes"})]}),o.jsxs(X,{onClick:He,className:"flex items-center gap-2",children:[o.jsx(Jt,{className:"h-4 w-4"}),"Create Lecture"]})]}),o.jsx(pe,{children:o.jsx(ye,{className:"pt-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(xa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(we,{placeholder:"Search lectures by title or subject...",value:t,onChange:fe=>e(fe.target.value),className:"pl-10"})]})})}),O&&o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx(ds,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading lectures..."})]})}),U&&o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:" Error loading lectures"}),o.jsx("p",{className:"text-muted-foreground",children:U})]})}),!O&&!U&&o.jsx("div",{className:"space-y-6",children:ke.map(fe=>o.jsxs(pe,{className:`hover:shadow-lg transition-all duration-200 border-l-4 ${le===fe.id?"border-l-primary bg-primary/5":"border-l-primary/20 hover:border-l-primary"}`,children:[o.jsx(Ke,{children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx(kr,{className:"h-5 w-5 text-primary"}),o.jsx(Ye,{className:"text-xl",children:fe.title}),o.jsx(Rt,{variant:"secondary",children:fe.subject})]}),o.jsx(Ct,{className:"text-base",children:fe.description}),o.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Hc,{className:"h-3 w-3"}),fe.createdBy]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ec,{className:"h-3 w-3"}),fe.createdAt.toLocaleDateString()]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>Ve(fe),children:o.jsx(mr,{className:"h-4 w-4"})}),o.jsx(X,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:()=>ft(fe),children:o.jsx(un,{className:"h-4 w-4"})})]})]})}),o.jsx(ye,{children:o.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[o.jsx(ai,{className:"h-4 w-4 text-green-600"}),"Videos (",fe.videos.length,")"]}),fe.videos.length>0&&o.jsx(X,{variant:"ghost",size:"sm",onClick:()=>{fe.videos.forEach(Ce=>window.open(Ce.youtubeUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Play All"})]}),fe.videos.length>0?o.jsx("div",{className:"space-y-2",children:fe.videos.map(Ce=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>{const ct=Ce.youtubeUrl||Ce.url;ct&&ct!==""&&ct!=="#"?window.open(ct,"_blank"):alert("No URL available for this video. Click the edit button to add a URL.")},className:"flex-1 p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("div",{className:"relative",children:[Ce.thumbnailUrl&&o.jsx("img",{src:Ce.thumbnailUrl,alt:Ce.title,className:"w-16 h-12 object-cover rounded"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(ai,{className:"h-6 w-6 text-white"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:Ce.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(Cm,{className:"h-3 w-3"}),Ce.duration]})]})]})}),o.jsx(X,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:ct=>{ct.stopPropagation(),me(Ce)},title:"Edit Video",children:o.jsx(mr,{className:"h-4 w-4"})})]},Ce.id))}):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[o.jsx(Rs,{className:"h-4 w-4 text-blue-600"}),"Files (",fe.files.length,")"]}),fe.files.length>0&&o.jsx(X,{variant:"ghost",size:"sm",onClick:()=>{fe.files.forEach(Ce=>window.open(Ce.fileUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Download All"})]}),fe.files.length>0?o.jsx("div",{className:"space-y-2",children:fe.files.map(Ce=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>{console.log(" File clicked:",Ce),console.log(" File URL:",Ce.fileUrl),console.log(" Fallback URL:",Ce.url);const ct=Ce.fileUrl||Ce.url;console.log(" Opening URL:",ct),ct&&ct!==""&&ct!=="#"?window.open(ct,"_blank"):(console.error(" No valid URL found"),alert(`No URL available for this file.
fileUrl: ${Ce.fileUrl}
url: ${Ce.url}`))},className:"flex-1 p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("div",{className:"relative",children:[Ce.imageUrl||Ce.thumbnailUrl?o.jsx("img",{src:Ce.imageUrl||Ce.thumbnailUrl,alt:Ce.title,className:"w-16 h-12 object-cover rounded"}):o.jsx("div",{className:"w-16 h-12 bg-blue-100 rounded flex items-center justify-center",children:o.jsx(Rs,{className:"h-6 w-6 text-blue-600"})}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(Rs,{className:"h-4 w-4 text-white"})})]}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:Ce.title})})]})}),o.jsx(X,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:ct=>{ct.stopPropagation(),Ue(Ce)},title:"Edit File",children:o.jsx(mr,{className:"h-4 w-4"})})]},Ce.id))}):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[o.jsx(Ls,{className:"h-4 w-4 text-purple-600"}),"Quizzes (",fe.quizzes.length,")"]}),fe.quizzes.length>0&&o.jsx(X,{variant:"ghost",size:"sm",onClick:()=>{alert(`Starting all ${fe.quizzes.length} quizzes for: ${fe.title}`)},className:"h-6 px-2 text-xs",children:"Start All"})]}),fe.quizzes.length>0?o.jsx("div",{className:"space-y-2",children:fe.quizzes.map(Ce=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>{alert(`Starting quiz: ${Ce.title}
Time limit: ${Ce.timeLimit} minutes
Passing score: ${Ce.passingScore}%`)},className:"flex-1 p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Ls,{className:"h-4 w-4 text-purple-600 mt-1 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:Ce.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(Cm,{className:"h-3 w-3"}),Ce.timeLimit,"min",o.jsx("span",{children:""}),o.jsxs("span",{children:[Ce.passingScore,"% pass"]})]})]})]})}),o.jsx(X,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:ct=>{ct.stopPropagation(),ht(Ce)},title:"Edit Quiz",children:o.jsx(mr,{className:"h-4 w-4"})})]},Ce.id))}):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"})]})]})})]},fe.id))}),!O&&!U&&ke.length===0&&o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx(kr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No lectures found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:t?"No lectures match your search criteria.":"Start by creating your first lecture with videos, files, and quizzes."}),o.jsxs(X,{onClick:He,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Create Lecture"]})]})}),!O&&!U&&!t&&o.jsx(pe,{children:o.jsx(ye,{className:"pt-6",children:o.jsx(Nq,{currentPage:I,totalPages:k,totalCount:L,pageSize:c,hasNextPage:D,isLoading:O,isFetchingNextPage:F,cachedPages:Te,onPageChange:_e,onPageSizeChange:Ae,onLoadNext:oe})})})]}))}function Sq({professor:t,onClose:e,onSave:n}){const[r,s]=_.useState({name:"",title:"",department:"",email:"",others:"",officeLocation:"",researchAreas:"",imageUrl:""}),[a,c]=_.useState(!1);_.useEffect(()=>{t&&s({name:t.name||"",title:t.title||"",department:t.department||"",email:t.email||"",others:t.others||"",officeLocation:t.officeLocation||"",researchAreas:(t.researchAreas||[]).join(", "),imageUrl:t.imageUrl||""})},[t]);const u=async h=>{h.preventDefault(),c(!0);try{const f={...r,researchAreas:r.researchAreas?r.researchAreas.split(",").map(p=>p.trim()).filter(Boolean):[]};n(f)}catch(f){console.error("Error saving professor:",f)}finally{c(!1)}};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(X,{variant:"ghost",onClick:e,children:[o.jsx(us,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Professor":"Add Professor"}),o.jsx("p",{className:"text-muted-foreground",children:t?"Update professor information":"Add a new professor to the faculty"})]})]})}),o.jsxs("form",{onSubmit:u,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsxs(Ye,{className:"flex items-center gap-2",children:[o.jsx(as,{className:"h-5 w-5"}),"Professor Information"]}),o.jsx(Ct,{children:"Basic information about the professor"})]}),o.jsxs(ye,{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsxs(iu,{className:"w-20 h-20",children:[o.jsx(Qd,{src:r.imageUrl,alt:r.name}),o.jsx(ou,{children:o.jsx(as,{className:"w-8 h-8"})})]}),o.jsxs("div",{className:"space-y-2 flex-1",children:[o.jsx(Pe,{htmlFor:"imageUrl",children:"Profile Image URL"}),o.jsx(we,{id:"imageUrl",placeholder:"https://example.com/profile.jpg",value:r.imageUrl,onChange:h=>s(f=>({...f,imageUrl:h.target.value}))})]})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"name",children:"Full Name *"}),o.jsx(we,{id:"name",placeholder:"Dr. John Smith",value:r.name,onChange:h=>s(f=>({...f,name:h.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"title",children:"Title"}),o.jsx(we,{id:"title",placeholder:"e.g., Associate Professor",value:r.title,onChange:h=>s(f=>({...f,title:h.target.value}))})]})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(Pe,{htmlFor:"department",className:"flex items-center gap-2",children:[o.jsx(mD,{className:"h-4 w-4"}),"Department"]}),o.jsx(we,{id:"department",placeholder:"Internal Medicine",value:r.department,onChange:h=>s(f=>({...f,department:h.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"others",children:"Others"}),o.jsx(we,{id:"others",placeholder:"Other contact or notes",value:r.others,onChange:h=>s(f=>({...f,others:h.target.value}))})]})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(Pe,{htmlFor:"email",className:"flex items-center gap-2",children:[o.jsx(jm,{className:"h-4 w-4"}),"Email Address"]}),o.jsx(we,{id:"email",type:"email",placeholder:"john.smith@university.edu",value:r.email,onChange:h=>s(f=>({...f,email:h.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(Pe,{htmlFor:"officeLocation",className:"flex items-center gap-2",children:[o.jsx(Ad,{className:"h-4 w-4"}),"Office Location"]}),o.jsx(we,{id:"officeLocation",placeholder:"Medical Building, Room 301",value:r.officeLocation,onChange:h=>s(f=>({...f,officeLocation:h.target.value}))})]})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"researchAreas",children:"Research Areas"}),o.jsx(we,{id:"researchAreas",placeholder:"e.g., Cardiology, Epidemiology",value:r.researchAreas,onChange:h=>s(f=>({...f,researchAreas:h.target.value}))})]}),o.jsx("div",{className:"space-y-2",children:o.jsx("div",{})})]})]})]}),r.name&&o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsx(Ye,{children:"Preview"}),o.jsx(Ct,{children:"How the professor will appear in the system"})]}),o.jsx(ye,{children:o.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[o.jsxs(iu,{className:"h-12 w-12",children:[o.jsx(Qd,{src:r.imageUrl,alt:r.name}),o.jsx(ou,{children:o.jsx(as,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold",children:r.name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:r.department}),o.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-sm text-muted-foreground",children:[r.email&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(jm,{className:"h-3 w-3"}),o.jsx("span",{children:r.email})]}),r.officeLocation&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ad,{className:"h-3 w-3"}),o.jsx("span",{children:r.officeLocation})]}),r.others&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(as,{className:"h-3 w-3"}),o.jsx("span",{children:r.others})]})]})]})]})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(X,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),o.jsxs(X,{type:"submit",disabled:a,children:[o.jsx(no,{className:"h-4 w-4 mr-2"}),a?"Saving...":t?"Update Professor":"Add Professor"]})]})]})]})}function Cq(){const[t,e]=_.useState(""),[n,r]=_.useState(null),[s,a]=_.useState(!1),{professors:c,loading:u,error:h,createProfessor:f,updateProfessor:p,deleteProfessor:y,isOfflineMode:v}=$A(),x=c.filter(w=>w.name.toLowerCase().includes(t.toLowerCase())||w.department.toLowerCase().includes(t.toLowerCase())||w.email.toLowerCase().includes(t.toLowerCase())),E=async w=>{if(window.confirm("Are you sure you want to delete this professor?"))try{await y(w)}catch(b){console.error("Error deleting professor:",b),alert("Failed to delete professor. Please try again.")}};return s?o.jsx(Sq,{professor:n,onClose:()=>{a(!1),r(null)},onSave:async w=>{try{n?await p(n.id,w):await f(w),a(!1),r(null)}catch(b){console.error("Error saving professor:",b),alert("Failed to save professor. Please try again.")}}}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Professors Management"}),o.jsxs("p",{className:"text-muted-foreground",children:["Manage faculty information and profiles",v&&o.jsx("span",{className:"ml-2 text-orange-600 font-medium",children:" Working in offline mode"})]})]}),o.jsxs(X,{onClick:()=>a(!0),children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]}),o.jsx(pe,{children:o.jsx(ye,{className:"pt-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(xa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(we,{placeholder:"Search professors by name, department, or email...",value:t,onChange:w=>e(w.target.value),className:"pl-10"})]})})}),u&&o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx(ds,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading professors..."})]})}),h&&o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:" Error loading professors"}),o.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&o.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:x.map(w=>o.jsxs(pe,{className:"hover:shadow-md transition-shadow",children:[o.jsx(Ke,{children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(iu,{className:"h-12 w-12",children:[o.jsx(Qd,{src:w.imageUrl,alt:w.name}),o.jsx(ou,{children:o.jsx(as,{className:"h-6 w-6"})})]}),o.jsxs("div",{children:[o.jsx(Ye,{className:"text-lg",children:w.name}),o.jsx(Rt,{variant:"secondary",className:"text-xs",children:w.department})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>{r(w),a(!0)},children:o.jsx(mr,{className:"h-4 w-4"})}),o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>E(w.id),className:"text-destructive hover:text-destructive",children:o.jsx(un,{className:"h-4 w-4"})})]})]})}),o.jsx(ye,{children:o.jsxs("div",{className:"space-y-3 text-sm",children:[o.jsxs("div",{className:"",children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:w.title}),o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mt-1",children:[o.jsx(jm,{className:"h-4 w-4"}),o.jsx("span",{children:w.email})]})]}),w.phone&&o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[o.jsx(as,{className:"h-4 w-4"}),o.jsx("span",{children:w.phone})]}),w.officeLocation&&o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[o.jsx(Ad,{className:"h-4 w-4"}),o.jsx("span",{children:w.officeLocation})]}),w.bio&&o.jsx("div",{className:"text-sm text-muted-foreground line-clamp-3",children:w.bio}),w.researchAreas&&w.researchAreas.length>0&&o.jsx("div",{className:"flex gap-2 flex-wrap",children:w.researchAreas.map(b=>o.jsx(Rt,{children:b},b))}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[w.website&&o.jsx("a",{href:w.website,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"Website"}),w.linkedin&&o.jsx("a",{href:w.linkedin,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"LinkedIn"})]})]})})]},w.id))}),!u&&!h&&x.length===0&&o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx(Hc,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No professors found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:t?"No professors match your search criteria.":"Start by adding your first professor."}),o.jsxs(X,{onClick:()=>a(!0),children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]})})]})}function jq(){const{users:t,loading:e,error:n,updateUser:r,deleteUser:s}=rg(),a=async u=>{const h=u.role==="admin"?"user":"admin";await r(u.id,{role:h})},c=(u,h)=>{if(!u)return"-";const f=u.match(/(19|20)\d{2}/);if(f)return f[0];if(h)try{const p=new Date(h);if(!isNaN(p.getTime()))return String(p.getFullYear())}catch{}return"-"};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(OD,{className:"h-6 w-6 text-blue-600"}),o.jsx("h1",{className:"text-3xl font-bold",children:"Users"})]}),o.jsxs(pe,{children:[o.jsx(Ke,{children:o.jsxs(Ye,{children:["All Users (",t.length,")"]})}),o.jsx(ye,{children:e?o.jsx("div",{children:"Loading..."}):n?o.jsx("div",{className:"text-destructive",children:n}):t.length===0?o.jsx("div",{className:"text-muted-foreground",children:"No users found."}):(()=>{const u={};t.forEach(f=>{const p=f.yearLabel&&String(f.yearLabel).trim()!==""?String(f.yearLabel):"Unassigned";u[p]||(u[p]=[]),u[p].push(f)});const h=Object.keys(u).sort((f,p)=>{const y=f.match(/Year\s*(\d+)/i),v=p.match(/Year\s*(\d+)/i);return y&&v?parseInt(y[1],10)-parseInt(v[1],10):y?-1:v||f==="Unassigned"?1:p==="Unassigned"?-1:f.localeCompare(p)});return o.jsx("div",{className:"space-y-6",children:h.map(f=>o.jsxs("div",{children:[o.jsx("div",{className:"flex items-center justify-between mb-2",children:o.jsxs("h3",{className:"text-lg font-semibold",children:[f," ",o.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",u[f].length,")"]})]})}),o.jsx("div",{className:"space-y-2",children:u[f].map(p=>{var y;return o.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[o.jsx(iu,{className:"h-12 w-12",children:p.photoURL?o.jsx(Qd,{src:p.photoURL,alt:p.displayName}):o.jsx(ou,{children:((y=p.displayName)==null?void 0:y[0])||"U"})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-medium truncate",children:p.displayName}),o.jsx("div",{className:"text-xs text-muted-foreground truncate",children:p.email}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Created: ",p.createdAt?new Date(p.createdAt).toLocaleString():"-",o.jsxs("span",{className:"ml-3",children:["Year: ",p.yearLabel||c(p.id,p.createdAt)]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Rt,{children:p.role||"user"}),o.jsx(X,{size:"sm",variant:"outline",onClick:()=>a(p),children:p.role==="admin"?"Demote":"Make Admin"}),o.jsx(X,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>s(p.id),children:o.jsx(un,{className:"h-4 w-4"})})]})]},p.id)})})]},f))})})()})]})]})}function Tq(t){if(!t)return 0;if(typeof t=="number")return t;const e=String(t).trim();if(/^\d+$/.test(e))return parseInt(e,10);const n=e.split(":").map(r=>parseInt(r,10));return n.length===3?n[0]*3600+(n[1]||0)*60+(n[2]||0):n.length===2?(n[0]||0)*60+(n[1]||0):0}function Iq(t){if(!t||t<=0)return"0:00";const e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=t%60;return e>0?`${e}:${String(n).padStart(2,"0")}:${String(r).padStart(2,"0")}`:`${n}:${String(r).padStart(2,"0")}`}function Aq(){var Ve;const{id:t}=gj(),e=hu(),{years:n,subjects:r,loading:s,createLecture:a,updateLecture:c,deleteLecture:u,deleteSubject:h,addVideo:f,addFile:p,addQuiz:y}=oo(),[v,x]=_.useState(null),[E,w]=_.useState(null),[b,A]=_.useState(!1),[j,T]=_.useState(!1),[M,$]=_.useState(!1),[z,R]=_.useState(!1),[I,k]=_.useState(!1),[L,D]=_.useState(null),[O,F]=_.useState(null),[ne,oe]=_.useState(null),[Q,ee]=_.useState({}),[q,K]=_.useState(null),[Y,U]=_.useState(null),[H,le]=_.useState(null);let ue=r.find(me=>me.id===t);_.useEffect(()=>{if(ue||!t)return;(async()=>{k(!0),D(null);try{const Ue=Fe(Ne,"Subjects"),ht=await lt(Ue);let ft=null;for(const fe of ht.docs)if(fe.id===t){ft=fe.data(),ft.id=fe.id;break}if(ft){const fe=Fe(Ne,"Subjects",t,"lectures"),ct=(await lt(fe)).docs.map(Ht=>({id:Ht.id,name:Ht.data().name||Ht.data().title||"",description:Ht.data().description||"",imageUrl:Ht.data().imageUrl||"",videos:void 0,files:void 0,quizzes:void 0}));F({...ft,lectures:ct.sort((Ht,Mt)=>(Ht.order||0)-(Mt.order||0))})}else D("Subject not found")}catch(Ue){console.error("Error loading subject:",Ue),D("Failed to load subject")}finally{k(!1)}})()},[t,ue]),!ue&&O&&(ue=O);const ke=s||I,Te=me=>{x(me||null),A(!0)},_e=me=>{x(me||null),T(!0)},Ae=me=>{x(me||null),$(!0)},He=async me=>{try{const Ue=document.createElement("input");Ue.type="file",Ue.accept="image/*",Ue.onchange=async()=>{var ft;const ht=(ft=Ue.files)==null?void 0:ft[0];if(ht){oe(me);try{let fe=null;try{fe=await Mn(ht)}catch(Ce){console.warn("Cloudinary upload failed, trying ImageKit",(Ce==null?void 0:Ce.message)||Ce),fe=await cs(ht,ht.name)}if(!fe){alert("Failed to upload image");return}if(ue!=null&&ue.id){const Ce=gt(Ne,"Subjects",ue.id,"lectures",me);await zt(Ce,{imageUrl:fe}),F(ct=>({...ct,lectures:ct.lectures.map(Ht=>Ht.id===me?{...Ht,imageUrl:fe}:Ht)})),alert("Lecture image updated successfully")}}catch(fe){console.error("Error uploading image:",fe),alert("Failed to upload image. Please try again.")}finally{oe(null)}}},Ue.click()}catch(Ue){console.error(Ue),alert("Could not open file dialog")}};return b&&v?o.jsx($0,{video:q,lectureId:v,subjectId:ue==null?void 0:ue.id,onClose:()=>{A(!1),x(null),K(null)},onSave:async me=>{if(ue!=null&&ue.id&&v)if(q!=null&&q.id){const Ue=gt(Ne,"Subjects",ue.id,"lectures",v,"videos",q.id);await zt(Ue,{title:me.title,description:me.description,url:me.url,duration:me.duration,thumbnailUrl:me.thumbnailUrl,platform:me.platform})}else await f(ue.id,v,me);if(A(!1),x(null),K(null),ue!=null&&ue.id){const Ue=Fe(Ne,"Subjects",ue.id,"lectures"),ft=(await lt(Ue)).docs.map(fe=>({id:fe.id,name:fe.data().name||fe.data().title||"",description:fe.data().description||"",imageUrl:fe.data().imageUrl||"",videos:void 0,files:void 0,quizzes:void 0}));F({...ue,lectures:ft.sort((fe,Ce)=>(fe.order||0)-(Ce.order||0))})}}}):j&&v?o.jsx(U0,{lectureId:v,onClose:()=>{T(!1),x(null)},onSave:async me=>{ue!=null&&ue.id&&v&&await p(ue.id,v,me),T(!1),x(null)}}):M&&v?o.jsx(V0,{lectureId:v,onClose:()=>{$(!1),x(null)},onSave:async me=>{ue!=null&&ue.id&&v&&await y(ue.id,v,me),$(!1),x(null)}}):z?o.jsx(sg,{lecture:E,subjectId:(ue==null?void 0:ue.id)||null,subjectName:ue==null?void 0:ue.name,yearType:(Ve=n.find(me=>me.id===(ue==null?void 0:ue.yearId)))==null?void 0:Ve.type,onClose:()=>{R(!1),w(null)},onSave:async me=>{ue!=null&&ue.id&&(E?await c(ue.id,E.id,me):await a(me)),R(!1),w(null)}}):ke?o.jsx("div",{children:"Loading..."}):L||!ue?o.jsx(pe,{children:o.jsxs(ye,{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Subject not found"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:L||"The subject you requested does not exist."}),o.jsx("div",{className:"mt-4",children:o.jsx(rr,{to:"/admin/years",children:o.jsx(X,{children:"Back to Years"})})})]})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:ue.name}),o.jsx("p",{className:"text-muted-foreground",children:"Subject details and lectures"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(X,{variant:"outline",size:"sm",onClick:()=>R(!0),className:"flex items-center gap-2",children:[o.jsx(Jt,{className:"h-4 w-4"}),"Add Lecture"]}),o.jsx(X,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if(ue&&confirm(`Delete subject "${ue.name}"? This will remove all lectures.`))try{await h(ue.id),e("/admin/years")}catch(me){console.error(me),alert("Failed to delete subject")}},children:o.jsx(un,{className:"h-4 w-4"})}),o.jsx(rr,{to:"/admin/years",children:o.jsx(X,{variant:"ghost",children:"Back"})})]})]}),o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsx(Ye,{children:"Lectures"}),o.jsx(Ct,{children:"All lectures for this subject"})]}),o.jsx(ye,{children:o.jsx("div",{className:"grid gap-4",children:ue.lectures&&ue.lectures.length>0?ue.lectures.map(me=>{var ht,ft;const Ue=me.imageUrl||me.videos&&me.videos[0]&&me.videos[0].thumbnailUrl||"";return o.jsxs("div",{className:"p-3 border rounded-md flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[Ue?o.jsx("img",{src:Ue,alt:me.name,width:1280,height:720,style:{width:160,height:90,objectFit:"cover"},className:"rounded"}):o.jsx("div",{className:"w-40 h-24 bg-muted rounded flex items-center justify-center text-xs",children:"No image"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:me.name}),o.jsx("div",{className:"text-sm text-muted-foreground",children:me.description})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>He(me.id),disabled:ne===me.id,className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Upload Lecture Image",children:[o.jsx(SD,{className:"h-3 w-3 text-orange-600"}),o.jsx("span",{children:ne===me.id?"Uploading...":"Image"})]}),o.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>Te(me.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Video",children:[o.jsx(ai,{className:"h-3 w-3 text-blue-600"}),o.jsx("span",{children:"Add Video"})]}),o.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>_e(me.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add File",children:[o.jsx(Rs,{className:"h-3 w-3 text-green-600"}),o.jsx("span",{children:"Add File"})]}),o.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>Ae(me.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Quiz",children:[o.jsx(Ls,{className:"h-3 w-3 text-purple-600"}),o.jsx("span",{children:"Add Quiz"})]}),o.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>{w(me),R(!0)},className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Edit Lecture",children:[o.jsx(mr,{className:"h-3 w-3 text-blue-600"}),o.jsx("span",{children:"Edit"})]}),o.jsx(X,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if(ue&&confirm(`Delete lecture "${me.name}"?`))try{await u(ue.id,me.id)}catch(fe){console.error(fe),alert("Failed to delete lecture")}},children:o.jsx(un,{className:"h-3 w-3"})}),o.jsxs("div",{className:"flex items-center gap-2",children:[me.videos&&me.videos.length>0?(()=>{const fe=(me.videos||[]).reduce((Ce,ct)=>Ce+Tq(ct.duration||ct.time||ct.durationSeconds||ct.length),0);return o.jsxs("button",{onClick:()=>e(`/admin/videos?lecture=${me.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:[o.jsx(ai,{className:"h-4 w-4"}),o.jsxs("span",{children:["(",me.videos.length,")"]}),o.jsx("span",{className:"text-muted-foreground",children:Iq(fe)})]})})():o.jsx("button",{onClick:()=>e(`/admin/videos?lecture=${me.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:o.jsx(ai,{className:"h-4 w-4"})}),o.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${me.id}&tab=files`),className:"text-xs text-green-600 flex items-center gap-1 px-2",title:"Files",children:[o.jsx(Rs,{className:"h-4 w-4"}),o.jsxs("span",{children:["(",((ht=me.files)==null?void 0:ht.length)||0,")"]})]}),o.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${me.id}&tab=quizzes`),className:"text-xs text-purple-600 flex items-center gap-1 px-2",title:"Quizzes",children:[o.jsx(Ls,{className:"h-4 w-4"}),o.jsxs("span",{children:["(",((ft=me.quizzes)==null?void 0:ft.length)||0,")"]})]})]})]})]},me.id)}):o.jsx("div",{className:"text-muted-foreground",children:"No lectures yet for this subject."})})})]})]})}var Cv="rovingFocusGroup.onEntryFocus",kq={bubbles:!1,cancelable:!0},dg="RovingFocusGroup",[Qx,AP,Pq]=Xx(dg),[Rq,kP]=to(dg,[Pq]),[Dq,Oq]=Rq(dg),PP=_.forwardRef((t,e)=>o.jsx(Qx.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(Qx.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(Lq,{...t,ref:e})})}));PP.displayName=dg;var Lq=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:h,onEntryFocus:f,preventScrollOnEntryFocus:p=!1,...y}=t,v=_.useRef(null),x=kt(e,v),E=z0(a),[w=null,b]=cl({prop:c,defaultProp:u,onChange:h}),[A,j]=_.useState(!1),T=Tn(f),M=AP(n),$=_.useRef(!1),[z,R]=_.useState(0);return _.useEffect(()=>{const I=v.current;if(I)return I.addEventListener(Cv,T),()=>I.removeEventListener(Cv,T)},[T]),o.jsx(Dq,{scope:n,orientation:r,dir:E,loop:s,currentTabStopId:w,onItemFocus:_.useCallback(I=>b(I),[b]),onItemShiftTab:_.useCallback(()=>j(!0),[]),onFocusableItemAdd:_.useCallback(()=>R(I=>I+1),[]),onFocusableItemRemove:_.useCallback(()=>R(I=>I-1),[]),children:o.jsx(et.div,{tabIndex:A||z===0?-1:0,"data-orientation":r,...y,ref:x,style:{outline:"none",...t.style},onMouseDown:Qe(t.onMouseDown,()=>{$.current=!0}),onFocus:Qe(t.onFocus,I=>{const k=!$.current;if(I.target===I.currentTarget&&k&&!A){const L=new CustomEvent(Cv,kq);if(I.currentTarget.dispatchEvent(L),!L.defaultPrevented){const D=M().filter(Q=>Q.focusable),O=D.find(Q=>Q.active),F=D.find(Q=>Q.id===w),oe=[O,F,...D].filter(Boolean).map(Q=>Q.ref.current);OP(oe,p)}}$.current=!1}),onBlur:Qe(t.onBlur,()=>j(!1))})})}),RP="RovingFocusGroupItem",DP=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,...c}=t,u=Jo(),h=a||u,f=Oq(RP,n),p=f.currentTabStopId===h,y=AP(n),{onFocusableItemAdd:v,onFocusableItemRemove:x}=f;return _.useEffect(()=>{if(r)return v(),()=>x()},[r,v,x]),o.jsx(Qx.ItemSlot,{scope:n,id:h,focusable:r,active:s,children:o.jsx(et.span,{tabIndex:p?0:-1,"data-orientation":f.orientation,...c,ref:e,onMouseDown:Qe(t.onMouseDown,E=>{r?f.onItemFocus(h):E.preventDefault()}),onFocus:Qe(t.onFocus,()=>f.onItemFocus(h)),onKeyDown:Qe(t.onKeyDown,E=>{if(E.key==="Tab"&&E.shiftKey){f.onItemShiftTab();return}if(E.target!==E.currentTarget)return;const w=Vq(E,f.orientation,f.dir);if(w!==void 0){if(E.metaKey||E.ctrlKey||E.altKey||E.shiftKey)return;E.preventDefault();let A=y().filter(j=>j.focusable).map(j=>j.ref.current);if(w==="last")A.reverse();else if(w==="prev"||w==="next"){w==="prev"&&A.reverse();const j=A.indexOf(E.currentTarget);A=f.loop?Uq(A,j+1):A.slice(j+1)}setTimeout(()=>OP(A))}})})})});DP.displayName=RP;var Mq={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Fq(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Vq(t,e,n){const r=Fq(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Mq[r]}function OP(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Uq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var $q=PP,zq=DP,q0="Tabs",[Bq,LW]=to(q0,[kP]),LP=kP(),[qq,W0]=Bq(q0),MP=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:c="horizontal",dir:u,activationMode:h="automatic",...f}=t,p=z0(u),[y,v]=cl({prop:r,onChange:s,defaultProp:a});return o.jsx(qq,{scope:n,baseId:Jo(),value:y,onValueChange:v,orientation:c,dir:p,activationMode:h,children:o.jsx(et.div,{dir:p,"data-orientation":c,...f,ref:e})})});MP.displayName=q0;var FP="TabsList",VP=_.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,a=W0(FP,n),c=LP(n);return o.jsx($q,{asChild:!0,...c,orientation:a.orientation,dir:a.dir,loop:r,children:o.jsx(et.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});VP.displayName=FP;var UP="TabsTrigger",$P=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=t,c=W0(UP,n),u=LP(n),h=qP(c.baseId,r),f=WP(c.baseId,r),p=r===c.value;return o.jsx(zq,{asChild:!0,...u,focusable:!s,active:p,children:o.jsx(et.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":f,"data-state":p?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:h,...a,ref:e,onMouseDown:Qe(t.onMouseDown,y=>{!s&&y.button===0&&y.ctrlKey===!1?c.onValueChange(r):y.preventDefault()}),onKeyDown:Qe(t.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&c.onValueChange(r)}),onFocus:Qe(t.onFocus,()=>{const y=c.activationMode!=="manual";!p&&!s&&y&&c.onValueChange(r)})})})});$P.displayName=UP;var zP="TabsContent",BP=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...c}=t,u=W0(zP,n),h=qP(u.baseId,r),f=WP(u.baseId,r),p=r===u.value,y=_.useRef(p);return _.useEffect(()=>{const v=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(v)},[]),o.jsx(Zx,{present:s||p,children:({present:v})=>o.jsx(et.div,{"data-state":p?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!v,id:f,tabIndex:0,...c,ref:e,style:{...t.style,animationDuration:y.current?"0s":void 0},children:v&&a})})});BP.displayName=zP;function qP(t,e){return`${t}-trigger-${e}`}function WP(t,e){return`${t}-content-${e}`}var Wq=MP,HP=VP,KP=$P,GP=BP;const QP=Wq,H0=_.forwardRef(({className:t,...e},n)=>o.jsx(HP,{ref:n,className:Xe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));H0.displayName=HP.displayName;const kc=_.forwardRef(({className:t,...e},n)=>o.jsx(KP,{ref:n,className:Xe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));kc.displayName=KP.displayName;const Pc=_.forwardRef(({className:t,...e},n)=>o.jsx(GP,{ref:n,className:Xe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Pc.displayName=GP.displayName;function Hq({product:t,onClose:e,onSave:n}){const[r,s]=_.useState({name:(t==null?void 0:t.name)||"",description:(t==null?void 0:t.description)||"",price:(t==null?void 0:t.price)||0,types:(t==null?void 0:t.types)||(t!=null&&t.price?[{name:"Default",price:t.price}]:[]),images:(t==null?void 0:t.images)||[""],categoryId:(t==null?void 0:t.categoryId)||""}),[a,c]=_.useState(!1),[u,h]=_.useState(null),f=async x=>{x.preventDefault(),c(!0);try{const E={...r,images:r.images.filter(w=>w.trim()!=="")};E.types&&E.types.length>0?(E.types=E.types.map(w=>({name:String(w.name||"").trim(),price:parseFloat(w.price)||0})),E.price=E.types[0].price||0):E.types=[],n(E)}catch(E){console.error("Error saving product:",E)}finally{c(!1)}},p=()=>{s(x=>({...x,images:[...x.images,""]}))},y=(x,E)=>{s(w=>({...w,images:w.images.map((b,A)=>A===x?E:b)}))},v=x=>{s(E=>({...E,images:E.images.filter((w,b)=>b!==x)}))};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(X,{variant:"ghost",onClick:e,children:[o.jsx(us,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Product":"Add Product"}),o.jsx("p",{className:"text-muted-foreground",children:t?"Update product details":"Create a new product"})]})]})}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsxs(Ye,{className:"flex items-center gap-2",children:[o.jsx(Ov,{className:"h-5 w-5 text-blue-600"}),"Product Information"]}),o.jsx(Ct,{children:"Basic information about the product"})]}),o.jsxs(ye,{className:"space-y-4",children:[o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"name",children:"Product Name *"}),o.jsx(we,{id:"name",placeholder:"e.g., Medical Textbook",value:r.name,onChange:x=>s(E=>({...E,name:x.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{children:"Types & Prices"}),o.jsxs("div",{className:"space-y-2",children:[r.types&&r.types.length>0?r.types.map((x,E)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(we,{placeholder:"Type name (e.g., Pen)",value:x.name,onChange:w=>s(b=>({...b,types:b.types.map((A,j)=>j===E?{...A,name:w.target.value}:A)})),required:!0}),o.jsx(we,{type:"number",step:"0.01",placeholder:"0.00",value:x.price,onChange:w=>s(b=>({...b,types:b.types.map((A,j)=>j===E?{...A,price:parseFloat(w.target.value)||0}:A)})),required:!0,className:"w-32"}),o.jsx(X,{type:"button",variant:"ghost",onClick:()=>s(w=>({...w,types:w.types.filter((b,A)=>A!==E)})),children:"Remove"})]},E)):o.jsx("div",{className:"text-muted-foreground",children:"No types defined."}),o.jsx("div",{children:o.jsxs(X,{type:"button",variant:"outline",onClick:()=>s(x=>({...x,types:[...x.types||[],{name:"Default",price:0}]})),children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"})," Add Type"]})})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"description",children:"Description"}),o.jsx(ls,{id:"description",placeholder:"Describe the product...",value:r.description,onChange:x=>s(E=>({...E,description:x.target.value})),rows:4})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"categoryId",children:"Category ID (Optional)"}),o.jsx(we,{id:"categoryId",placeholder:"e.g., books, equipment",value:r.categoryId,onChange:x=>s(E=>({...E,categoryId:x.target.value}))})]})]})]}),o.jsxs(pe,{children:[o.jsx(Ke,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(Ye,{children:"Product Images"}),o.jsx(Ct,{children:"Add image URLs for the product"})]}),o.jsxs(X,{type:"button",variant:"outline",onClick:p,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Image"]})]})}),o.jsx(ye,{className:"space-y-4",children:r.images.map((x,E)=>o.jsxs("div",{className:`flex gap-2 items-center ${u===E?"border-2 border-dashed p-2 rounded":""}`,onDragOver:w=>{w.preventDefault(),h(E)},onDragEnter:w=>{w.preventDefault(),h(E)},onDragLeave:()=>{h(null)},onDrop:async w=>{w.preventDefault(),h(null);try{const b=w.dataTransfer;if(!b)return;if(b.files&&b.files.length>0){const j=b.files[0];try{let T=null;try{T=await Mn(j)}catch(M){console.warn("Cloudinary upload failed, trying ImageKit fallback",(M==null?void 0:M.message)||M),T=await cs(j,j.name)}T&&typeof T=="string"&&T.startsWith("http")?y(E,T):alert("Upload failed: unexpected response from upload provider")}catch(T){console.error("Drop upload error:",T);const $=((T==null?void 0:T.message)||String(T)||"").toLowerCase();if($.includes("cloudinary signing did not return an api key")||$.includes("missing required parameter - api_key")||$.includes("missing required parameter 'api_key'")){const z=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(z&&z.trim())try{al(null,null,z.trim());const R=await Mn(j);if(R&&typeof R=="string"&&R.startsWith("http")){y(E,R);return}}catch(R){console.error("Retry after API key failed:",R)}}alert("Upload failed: "+((T==null?void 0:T.message)||T))}return}const A=b.getData("text/uri-list")||b.getData("text/plain");if(A&&A.startsWith("http")){if(!window.confirm(`Upload the dragged URL to Cloudinary and replace it?
`+A))return;const T=await Z1(A);T&&typeof T=="string"&&T.startsWith("http")?y(E,T):alert("Upload failed: unexpected response from server")}}catch(b){console.error("Drop upload error:",b),alert("Image upload failed: "+((b==null?void 0:b.message)||b))}},children:[o.jsx(we,{placeholder:"https://example.com/image.jpg",value:x,onChange:w=>y(E,w.target.value)}),o.jsx(X,{type:"button",variant:"ghost",size:"icon",onClick:async()=>{var w;try{const b=(w=r.images[E])==null?void 0:w.trim();if(b&&(b.startsWith("http://")||b.startsWith("https://"))){try{if(!window.confirm(`Upload the current URL to Cloudinary/ImageKit and replace it?
`+b))return;try{const T=await Z1(b);if(T&&typeof T=="string"&&T.startsWith("http")){y(E,T);return}}catch(T){console.warn("uploadUrlToServer failed, will try ImageKit:",(T==null?void 0:T.message)||T)}try{const T=await cs(b);if(T&&typeof T=="string"&&T.startsWith("http")){y(E,T);return}else alert("Upload failed: unexpected response from ImageKit")}catch(T){console.error("ImageKit URL upload error:",T),alert("URL upload failed: "+((T==null?void 0:T.message)||T))}}catch(j){console.error("URL upload error:",j),alert("URL upload failed: "+((j==null?void 0:j.message)||j))}return}const A=document.createElement("input");A.type="file",A.accept="image/*",A.onchange=async()=>{var T;const j=(T=A.files)==null?void 0:T[0];if(j)try{let M=null;try{M=await Mn(j)}catch($){console.warn("Cloudinary upload failed, trying ImageKit fallback",($==null?void 0:$.message)||$);try{M=await cs(j,j.name)}catch(z){throw console.error("ImageKit upload failed:",z),$}}if(!M||typeof M!="string"||!M.startsWith("http")){alert("Upload failed: unexpected response from upload provider");return}y(E,M)}catch(M){const $=(M==null?void 0:M.message)||String(M);console.error("Upload error:",M);const z=($||"").toLowerCase();if(z.includes("cloudinary cloud name is not configured")){const R=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!R){alert("No cloud name provided.");return}const I=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),k=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");al(R,I||null,k||null);try{const L=await Mn(j);if(!L||typeof L!="string"||!L.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}y(E,L)}catch(L){console.error("Retry upload error:",L),alert("Upload failed after configuring Cloudinary: "+(L.message||L))}}else if(z.includes("cloudinary signing did not return an api key")||z.includes("missing required parameter - api_key")||z.includes("missing required parameter 'api_key'")){const R=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(R&&R.trim())try{al(null,null,R.trim());const I=await Mn(j);if(!I||typeof I!="string"||!I.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}y(E,I);return}catch(I){console.error("Retry upload error:",I),alert("Upload failed after setting API key: "+(I.message||I));return}}else alert("Image upload failed: "+(M.message||M))}},A.click()}catch(b){console.error(b),alert("Could not open file dialog")}},children:o.jsx(Dv,{className:"h-4 w-4"})}),r.images.length>1&&o.jsx(X,{type:"button",variant:"outline",size:"icon",onClick:()=>v(E),children:o.jsx(Kc,{className:"h-4 w-4"})})]},E))})]}),r.name&&o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsx(Ye,{children:"Preview"}),o.jsx(Ct,{children:"How the product will appear"})]}),o.jsx(ye,{children:o.jsx("div",{className:"p-4 border rounded-lg",children:o.jsxs("div",{className:"flex items-start gap-4",children:[r.images[0]&&r.images[0].trim()&&(()=>{const x=mO(r.images[0]);return o.jsx("img",{src:x||void 0,alt:r.name,className:"w-20 h-20 object-cover rounded",onError:E=>{E.currentTarget.style.display="none",console.warn("Product preview image failed to load:",x||r.images[0])}})})(),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-lg",children:r.name}),o.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-1",children:["$",r.price.toFixed(2)]}),r.description&&o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:r.description}),r.categoryId&&o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Category: ",r.categoryId]})]})]})})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(X,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),o.jsxs(X,{type:"submit",disabled:a,children:[o.jsx(no,{className:"h-4 w-4 mr-2"}),a?"Saving...":t?"Update Product":"Add Product"]})]})]})]})}function YP(){const[t,e]=_.useState([]),[n,r]=_.useState(!0),[s,a]=_.useState(null);return _.useEffect(()=>{const f=nn(Fe(Ne,"orders"),io("orderDate","desc")),p=vi(f,async y=>{try{const v=await lt(Fe(Ne,"products")),x={};v.forEach(w=>{const b=w.data();x[w.id]={id:w.id,name:b.name||b.title||"",price:b.price||0}});const E=[];y.forEach(w=>{var z,R;const b=w.data();let A=[];b.items&&Array.isArray(b.items)&&b.items.length>0?A=b.items:b.productsIds&&Array.isArray(b.productsIds)&&(A=b.productsIds.map(I=>{var k,L;return{productId:I,name:((k=x[I])==null?void 0:k.name)||I,quantity:1,price:((L=x[I])==null?void 0:L.price)||0}}));const j=b.total||b.totalAmount||b.totalPrice||0,T=b.address||b.shippingaddress||b.shippingAddress||"",M=b.userPhone||b.user_phone||b.phone||"";let $=new Date;b.createdAt&&typeof b.createdAt.toDate=="function"?$=b.createdAt.toDate():b.orderDate&&typeof b.orderDate.toDate=="function"?$=b.orderDate.toDate():b.orderDate&&($=new Date(b.orderDate)),E.push({id:w.id,userId:b.userId||b.user_id||"",username:b.username||b.userName||b.user_name||b.customerName||"",userName:b.userName||b.user_name||b.customerName||"",userEmail:b.userEmail||b.email||"",userPhone:M,address:T,items:A,total:j,iscompleted:b.iscompleted===!0||b.isCompleted===!0||!1,status:b.status||(b.iscompleted===!0?"completed":"pending"),createdAt:$,updatedAt:(R=(z=b.updatedAt)==null?void 0:z.toDate)==null?void 0:R.call(z)})}),e(E),r(!1)}catch(v){console.error("Error processing orders:",v),a("Failed to load orders"),r(!1)}},y=>{console.error("Failed to load orders:",y),a("Failed to load orders"),r(!1)});return()=>p()},[]),{orders:t,loading:n,error:s,createOrder:async f=>{try{await pn(Fe(Ne,"orders"),{...f,createdAt:new Date})}catch(p){console.error("Error creating order:",p)}},updateOrder:async(f,p)=>{try{const y={...p,updatedAt:new Date};(p.status==="completed"||p.isCompleted)&&(y.isCompleted=!0,y.iscompleted=!0,y.completedAt=new Date,y.status="completed"),await zt(gt(Ne,"orders",f),y)}catch(y){console.error("Error updating order:",y)}},deleteOrder:async f=>{try{await nr(gt(Ne,"orders",f))}catch(p){console.error("Error deleting order:",p)}}}}function Kq(){const[t,e]=_.useState(""),[n,r]=_.useState(!1),[s,a]=_.useState(null),{products:c,loading:u,error:h,isOfflineMode:f,createProduct:p,updateProduct:y,deleteProduct:v,retryConnection:x}=UA(),{createOrder:E}=YP(),w=()=>{a(null),r(!0)},b=T=>{a(T),r(!0)},A=async(T,M)=>{confirm(`Are you sure you want to delete "${M}"?`)&&await v(T)};if(n)return o.jsx(Hq,{product:s,onClose:()=>{r(!1),a(null)},onSave:async T=>{try{s?await y(s.id,T):await p(T),r(!1),a(null)}catch(M){console.error("Error saving product:",M),alert("Failed to save product. Please try again.")}}});const j=c.filter(T=>T.name.toLowerCase().includes(t.toLowerCase())||T.description.toLowerCase().includes(t.toLowerCase()));return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex justify-between items-center",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Store Management"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("p",{className:"text-muted-foreground",children:"Manage store products and categories"}),f&&o.jsxs("span",{className:"flex items-center gap-1 text-orange-600 font-medium text-sm",children:[o.jsx("div",{className:"h-2 w-2 bg-orange-600 rounded-full"}),"Offline Mode"]})]})]})}),u&&o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx(ds,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading products..."})]})}),h&&o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:" Error loading products"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:h}),o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx(X,{onClick:x,variant:"outline",children:"Retry Connection"}),o.jsx(X,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!u&&!h&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[o.jsxs(pe,{children:[o.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Ye,{className:"text-sm font-medium",children:"Total Products"}),o.jsx(Ov,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(ye,{children:o.jsx("div",{className:"text-2xl font-bold",children:c.length})})]}),o.jsxs(pe,{children:[o.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Ye,{className:"text-sm font-medium",children:"Average Price"}),o.jsx(nC,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(ye,{children:o.jsxs("div",{className:"text-2xl font-bold",children:["$",c.length>0?(c.reduce((T,M)=>{const $=M.types&&M.types.length>0?M.types[0].price:M.price||0;return T+$},0)/c.length).toFixed(2):"0.00"]})})]}),o.jsxs(pe,{children:[o.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Ye,{className:"text-sm font-medium",children:"Categories"}),o.jsx(yd,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(ye,{children:o.jsx("div",{className:"text-2xl font-bold",children:new Set(c.map(T=>T.categoryId).filter(T=>T&&T.trim())).size})})]})]}),o.jsxs(QP,{defaultValue:"products",className:"space-y-6",children:[o.jsxs(H0,{className:"grid w-full grid-cols-2",children:[o.jsxs(kc,{value:"products",className:"flex items-center gap-2",children:[o.jsx(rw,{className:"h-4 w-4"}),"Products (",c.length,")"]}),o.jsxs(kc,{value:"categories",className:"flex items-center gap-2",children:[o.jsx(yd,{className:"h-4 w-4"}),"Categories"]})]}),o.jsxs(Pc,{value:"products",className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"relative flex-1 max-w-sm",children:[o.jsx(xa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(we,{placeholder:"Search products...",value:t,onChange:T=>e(T.target.value),className:"pl-10"})]}),o.jsxs(X,{onClick:w,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),j.length===0?o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx(Ov,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:t?"No products found":"No products yet"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:t?"Try adjusting your search terms":"Add your first product to get started"}),!t&&o.jsxs(X,{onClick:w,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add First Product"]})]})}):o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:j.map(T=>o.jsxs(pe,{className:"overflow-hidden",children:[o.jsxs("div",{className:"aspect-video bg-muted relative",children:[T.images&&T.images[0]?o.jsx("img",{src:T.images[0],alt:T.name,className:"w-full h-full object-cover",onError:M=>{M.currentTarget.style.display="none";const $=M.currentTarget.nextElementSibling;$&&($.style.display="flex")}}):null,o.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{display:T.images&&T.images[0]?"none":"flex"},children:o.jsx(Dv,{className:"h-12 w-12 text-muted-foreground"})})]}),o.jsxs(Ke,{className:"pb-2",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx(Ye,{className:"text-lg line-clamp-1",children:T.name}),T.types&&T.types.length>1&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[T.types.length," options available"]})]}),o.jsx("div",{className:"mt-2",children:T.types&&T.types.length>0?o.jsx("div",{className:"flex gap-2 flex-wrap",children:T.types.map((M,$)=>o.jsxs(Rt,{variant:"secondary",className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium",children:M.name}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:["$",M.price.toFixed(2)]})]},$))}):o.jsxs("div",{className:"text-xl font-bold",children:["$",(T.price||0).toFixed(2)]})}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>b(T),className:"h-8 w-8",children:o.jsx(mr,{className:"h-3 w-3"})}),o.jsx(X,{variant:"ghost",size:"icon",onClick:async()=>{try{const M=document.createElement("input");M.type="file",M.accept="image/*",M.onchange=async()=>{var z;const $=(z=M.files)==null?void 0:z[0];if($)try{let R=null;try{R=await Mn($)}catch(I){console.warn("Cloudinary upload failed, trying ImageKit fallback",(I==null?void 0:I.message)||I);try{R=await cs($,$.name)}catch(k){throw console.error("ImageKit upload failed:",k),I}}if(!R||typeof R!="string"||!R.startsWith("http")){console.error("Invalid upload response:",R),alert("Image upload failed: unexpected response from upload provider");return}await y(T.id,{images:[R]})}catch(R){console.error(R);const k=((R==null?void 0:R.message)||String(R)||"").toLowerCase();if(k.includes("cloudinary cloud name is not configured")){const L=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!L){alert("No cloud name provided. Upload cancelled.");return}const D=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),O=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");try{al(L,D||null,O||null);const F=await Mn($);if(console.log("Cloudinary upload result after config:",F),!F||typeof F!="string"||!F.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await y(T.id,{images:[F]})}catch(F){console.error(F),alert("Image upload failed after configuring Cloudinary: "+(F.message||F))}return}else if(k.includes("cloudinary signing did not return an api key")||k.includes("missing required parameter - api_key")||k.includes("missing required parameter 'api_key'")){const L=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(L&&L.trim())try{al(null,null,L.trim());const D=await Mn($);if(!D||typeof D!="string"||!D.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await y(T.id,{images:[D]});return}catch(D){console.error(D),alert("Image upload failed after setting API key: "+(D.message||D));return}}alert("Image upload failed: "+(R.message||R))}},M.click()}catch(M){console.error(M),alert("Could not open file dialog")}},className:"h-8 w-8",children:o.jsx(Dv,{className:"h-3 w-3"})}),o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>A(T.id,T.name),className:"h-8 w-8 text-destructive hover:text-destructive",children:o.jsx(un,{className:"h-3 w-3"})}),o.jsx(X,{variant:"default",size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:async()=>{try{let M,$;if(T.types&&T.types.length>0)if(T.types.length===1)M=T.types[0].name,$=T.types[0].price;else{const F=T.types.map((Q,ee)=>`${ee+1}. ${Q.name} - $${Q.price.toFixed(2)}`).join(`
`),ne=window.prompt(`Select a type for "${T.name}":

${F}

Enter the number (1-${T.types.length}):`,"1");if(!ne)return;const oe=parseInt(ne)-1;if(oe<0||oe>=T.types.length){alert("Invalid selection. Please try again.");return}M=T.types[oe].name,$=T.types[oe].price}else $=T.price||0;const z=window.prompt("Your full name:");if(!z)return;const R=window.prompt("Your email:");if(!R)return;const I=window.prompt("Quantity:","1")||"1",k=parseInt(I)||1,L=window.prompt("Phone (optional):","")||"",D=window.prompt("Address (optional):","")||"",O=M?`${T.name} (${M})`:T.name;await E({username:z,userName:z,userEmail:R,userPhone:L,address:D,items:[{productId:T.id,name:O,quantity:k,price:$,selectedType:M}],total:$*k,status:"pending",createdAt:new Date}),alert(`Order placed successfully!

Product: ${O}
Quantity: ${k}
Total: $${($*k).toFixed(2)}`)}catch(M){console.error(M),alert("Failed to place order")}},children:T.types&&T.types.length>1?"Select & Buy":"Buy Now"})]})]}),o.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",(T.types&&T.types.length>0?T.types[0].price:T.price||0).toFixed(2)]})]}),o.jsxs(ye,{className:"pt-0",children:[T.description&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:T.description}),o.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[o.jsx("span",{children:T.createdAt.toLocaleDateString()}),T.categoryId&&o.jsx(Rt,{variant:"secondary",className:"text-xs",children:T.categoryId})]})]})]},T.id))})]}),o.jsxs(Pc,{value:"categories",className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Categories"}),o.jsxs(X,{disabled:!0,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Category"]})]}),o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx(yd,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Category Management"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Category management will be implemented in the future."}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"For now, you can specify category IDs when creating products."})]})})]})]})]})]})}function Gq({order:t,onChangeStatus:e,onDelete:n}){var r,s;return o.jsxs(pe,{children:[o.jsx(Ke,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Ye,{children:["Order for ",t.username||t.userName,o.jsx("div",{className:"text-xs text-muted-foreground",children:(s=(r=t.createdAt)==null?void 0:r.toLocaleString)==null?void 0:s.call(r)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(Rt,{variant:t.status==="completed"||t.iscompleted?"default":"secondary",children:[t.status,t.iscompleted?"  completed":""]}),o.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>e(t.id,"completed"),children:[o.jsx(Rv,{className:"h-4 w-4 mr-1"})," Complete"]}),o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>n(t.id),className:"text-destructive",children:o.jsx(un,{className:"h-4 w-4"})})]})]})}),o.jsxs(ye,{children:[o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact"}),o.jsx("div",{className:"font-medium",children:t.username||t.userName}),o.jsx("div",{className:"text-sm",children:t.userEmail}),t.userPhone&&o.jsx("div",{className:"text-sm",children:t.userPhone}),t.address&&o.jsx("div",{className:"text-sm",children:t.address})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:"Items"}),o.jsxs("div",{className:"space-y-2 mt-2",children:[t.items&&t.items.length>0?t.items.map((a,c)=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm",children:[a.name," x",a.quantity]}),o.jsxs("div",{className:"font-medium",children:["$",(a.price*a.quantity).toFixed(2)]})]},c)):o.jsx("div",{className:"text-sm text-muted-foreground",children:"No item details. Products IDs may be attached in the raw order."}),t.productsIds&&t.productsIds.length>0&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Product IDs: ",(t.productsIds||[]).join(", ")]}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t mt-2",children:[o.jsx("div",{className:"font-medium",children:"Total"}),o.jsxs("div",{className:"font-bold",children:["$",(t.total||0).toFixed(2)]})]})]})]})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[o.jsxs(X,{onClick:()=>e(t.id,"paid"),children:[o.jsx(Rv,{className:"h-4 w-4 mr-2"})," Mark Paid"]}),o.jsxs(X,{variant:"outline",onClick:()=>e(t.id,"cancelled"),children:[o.jsx(xD,{className:"h-4 w-4 mr-2"})," Cancel"]})]})]})]},t.id)}function Qq(){const{orders:t,loading:e,error:n,updateOrder:r,deleteOrder:s}=YP(),a=async(u,h)=>{u&&await r(u,{status:h})},c=async u=>{u&&confirm("Delete this order?")&&await s(u)};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Orders"}),o.jsx("p",{className:"text-muted-foreground",children:"View and manage store orders"})]})}),e&&o.jsx("div",{children:"Loading..."}),n&&o.jsx("div",{className:"text-destructive",children:n}),!e&&!n&&o.jsx("div",{className:"grid gap-4",children:t.map(u=>o.jsx(Gq,{order:u,onChangeStatus:a,onDelete:c},u.id))})]})}function K0(t,e){const[n,r]=_.useState([]),[s,a]=_.useState(!0),[c,u]=_.useState(null);return _.useEffect(()=>{let h=null,f=!0;return(async()=>{if(!t){r([]),a(!1);return}try{const y=nn(Rr(Ne,"lectures"),sa(OI(),"==",t)),v=await lt(y);if(v.empty){f&&(r([]),a(!1));return}const x=v.docs[0],E=Fe(x.ref,e);h=vi(E,w=>{if(!f)return;const b=[];w.forEach(A=>{const j=A.data();b.push({id:A.id,...j})}),r(b),a(!1)},w=>{console.error(`Failed to subscribe to ${e}:`,w),u(`Failed to load ${e}`),a(!1)})}catch(y){console.error(`Error resolving lecture for ${e}:`,y),f&&(u(y.message||String(y)),a(!1))}})(),()=>{f=!1,h&&h()}},[t,e]),{items:n,loading:s,error:c}}function Yq(t){return K0(t,"videos")}function Xq(t){return K0(t,"files")}function XP(t){return K0(t,"quizzes")}function Jq(){var f;const[t]=lh(),e=t.get("lecture"),{lectures:n,loading:r,error:s}=ig(),{items:a,loading:c,error:u}=Yq(e);if(c||r)return o.jsx("div",{children:"Loading..."});if(u||s)return o.jsx("div",{className:"text-destructive",children:u||s});const h=n.find(p=>p.id===e);return h?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Videos for ",h.title||h.id]}),o.jsx("p",{className:"text-muted-foreground",children:h.description})]}),o.jsx("div",{children:o.jsx(rr,{to:"/admin/resources",children:o.jsx(X,{variant:"ghost",children:"Back"})})})]}),o.jsxs(pe,{children:[o.jsx(Ke,{children:o.jsxs(Ye,{children:["Videos (",((f=h.videos)==null?void 0:f.length)||0,")"]})}),o.jsx(ye,{children:a&&a.length>0?o.jsx("div",{className:"space-y-3",children:a.map(p=>{var y;return o.jsxs("div",{className:"p-4 border rounded flex items-center justify-between hover:bg-muted/50 transition",children:[o.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[p.thumbnailUrl?o.jsx("img",{src:p.thumbnailUrl,alt:p.title,className:"w-32 h-20 object-cover rounded flex-shrink-0"}):o.jsx("div",{className:"w-32 h-20 bg-muted rounded flex-shrink-0"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-base",children:p.title||"Untitled Video"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:p.description}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[p.duration&&o.jsxs("span",{children:["Duration: ",o.jsx("strong",{children:p.duration})]}),p.url&&o.jsxs("span",{children:["  ",o.jsx("strong",{children:(y=p.url.split("/").pop())==null?void 0:y.substring(0,30)})]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>window.open(p.url||p.youtubeUrl||"","_blank"),title:"Play Video",children:o.jsx(ai,{className:"h-5 w-5 text-blue-600"})}),o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>alert("Edit video functionality coming soon"),title:"Edit Video",children:o.jsx(mr,{className:"h-5 w-5 text-amber-600"})}),o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>alert("Delete video functionality coming soon"),className:"text-destructive",title:"Delete Video",children:o.jsx(un,{className:"h-5 w-5"})})]})]},p.id)})}):o.jsx("p",{className:"text-muted-foreground",children:"No videos available for this lecture."})})]})]}):o.jsx(pe,{children:o.jsxs(ye,{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its videos."}),o.jsx("div",{className:"mt-4",children:o.jsx(rr,{to:"/admin/years",children:o.jsx(X,{children:"Back to Years"})})})]})})}function Zq(){var f;const[t]=lh(),e=t.get("lecture"),{lectures:n,loading:r,error:s}=ig(),{items:a,loading:c,error:u}=Xq(e);if(c||r)return o.jsx("div",{children:"Loading..."});if(u||s)return o.jsx("div",{className:"text-destructive",children:u||s});const h=n.find(p=>p.id===e);return h?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Files for ",h.title||h.id]}),o.jsx("p",{className:"text-muted-foreground",children:h.description})]}),o.jsx("div",{children:o.jsx(rr,{to:"/admin/resources",children:o.jsx(X,{variant:"ghost",children:"Back"})})})]}),o.jsxs(pe,{children:[o.jsx(Ke,{children:o.jsxs(Ye,{children:["Files (",((f=h.files)==null?void 0:f.length)||0,")"]})}),o.jsx(ye,{children:a&&a.length>0?o.jsx("div",{className:"space-y-3",children:a.map(p=>o.jsxs("div",{className:"p-4 border rounded flex items-center justify-between hover:bg-muted/50 transition",children:[o.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[o.jsx(Rs,{className:"h-8 w-8 text-green-600 flex-shrink-0"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-base",children:p.filename||p.title||p.name||"Untitled File"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:p.description}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[p.fileSize&&o.jsxs("span",{children:["Size: ",o.jsx("strong",{children:p.fileSize})]}),p.uploadedAt&&o.jsxs("span",{children:["  Uploaded: ",o.jsx("strong",{children:new Date(p.uploadedAt).toLocaleDateString()})]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>window.open(p.fileUrl||p.url||"","_blank"),title:"Download File",children:o.jsx(wD,{className:"h-5 w-5 text-green-600"})}),o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>alert("Edit file functionality coming soon"),title:"Edit File",children:o.jsx(mr,{className:"h-5 w-5 text-amber-600"})}),o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>alert("Delete file functionality coming soon"),className:"text-destructive",title:"Delete File",children:o.jsx(un,{className:"h-5 w-5"})})]})]},p.id))}):o.jsx("p",{className:"text-muted-foreground",children:"No files available for this lecture."})})]})]}):o.jsx(pe,{children:o.jsxs(ye,{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its files."}),o.jsx("div",{className:"mt-4",children:o.jsx(rr,{to:"/admin/years",children:o.jsx(X,{children:"Back to Years"})})})]})})}function eW(){var f;const[t]=lh(),e=t.get("lecture"),{lectures:n,loading:r,error:s}=ig(),{items:a,loading:c,error:u}=XP(e);if(c||r)return o.jsx("div",{children:"Loading..."});if(u||s)return o.jsx("div",{className:"text-destructive",children:u||s});const h=n.find(p=>p.id===e);return h?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Quizzes for ",h.title||h.id]}),o.jsx("p",{className:"text-muted-foreground",children:h.description})]}),o.jsx("div",{children:o.jsx(rr,{to:"/admin/resources",children:o.jsx(X,{variant:"ghost",children:"Back"})})})]}),o.jsxs(pe,{children:[o.jsx(Ke,{children:o.jsxs(Ye,{children:["Quizzes (",((f=h.quizzes)==null?void 0:f.length)||0,")"]})}),o.jsx(ye,{children:a&&a.length>0?o.jsx("div",{className:"space-y-3",children:a.map(p=>o.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Ls,{className:"h-6 w-6 text-purple-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:p.title||"Untitled Quiz"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:p.description}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",o.jsx("strong",{children:p.type||"multiple_choice"})]})]})]}),o.jsx("div",{children:(p.type||"multiple_choice")==="flashcard"?o.jsx(X,{onClick:()=>window.location.href=`/admin/flashcards?lecture=${e}&quiz=${p.id}`,children:"Flashcards"}):o.jsx(X,{onClick:()=>alert("Multiple choice runner not implemented. Use Flashcards or implement MCQ runner."),children:"Start"})})]},p.id))}):o.jsx("p",{className:"text-muted-foreground",children:"No quizzes available for this lecture."})})]})]}):o.jsx(pe,{children:o.jsxs(ye,{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its quizzes."}),o.jsx("div",{className:"mt-4",children:o.jsx(rr,{to:"/admin/years",children:o.jsx(X,{children:"Back to Years"})})})]})})}var G0="Progress",Q0=100,[tW,MW]=to(G0),[nW,rW]=tW(G0),JP=_.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=sW,...c}=t;(s||s===0)&&!cS(s)&&console.error(iW(`${s}`,"Progress"));const u=cS(s)?s:Q0;r!==null&&!uS(r,u)&&console.error(oW(`${r}`,"Progress"));const h=uS(r,u)?r:null,f=dp(h)?a(h,u):void 0;return o.jsx(nW,{scope:n,value:h,max:u,children:o.jsx(et.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":dp(h)?h:void 0,"aria-valuetext":f,role:"progressbar","data-state":tR(h,u),"data-value":h??void 0,"data-max":u,...c,ref:e})})});JP.displayName=G0;var ZP="ProgressIndicator",eR=_.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=rW(ZP,n);return o.jsx(et.div,{"data-state":tR(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});eR.displayName=ZP;function sW(t,e){return`${Math.round(t/e*100)}%`}function tR(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function dp(t){return typeof t=="number"}function cS(t){return dp(t)&&!isNaN(t)&&t>0}function uS(t,e){return dp(t)&&!isNaN(t)&&t<=e&&t>=0}function iW(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Q0}\`.`}function oW(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Q0} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var nR=JP,aW=eR;const rR=_.forwardRef(({className:t,value:e,...n},r)=>o.jsx(nR,{ref:r,className:Xe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:o.jsx(aW,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));rR.displayName=nR.displayName;function lW(){const[t]=lh(),e=t.get("lecture"),n=t.get("quiz"),{items:r,loading:s,error:a}=XP(e),c=r.find(O=>O.id===n),[u,h]=_.useState(0),[f,p]=_.useState([]);if(s)return o.jsx("div",{children:"Loading..."});if(a)return o.jsx("div",{className:"text-destructive",children:a});if(!c)return o.jsx(pe,{children:o.jsxs(ye,{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Quiz not found"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a quiz to start flashcards."}),o.jsx("div",{className:"mt-4",children:o.jsx(rr,{to:"/admin/quizzes",children:o.jsx(X,{children:"Back"})})})]})});const y=c.questions||[],v=y.reduce((O,F)=>O+(F.weight&&Number(F.weight)||1),0),x=y[u],E=x&&(x.weight||1)||1,w=f[u]??0,[b,A]=_.useState(!1),[j,T]=_.useState([]),[M,$]=_.useState(null);_.useEffect(()=>{A(!1),T([]),$(null)},[u]);const z=(O,F)=>{const ne=[...f];ne[O]=F,p(ne)},R=f.reduce((O,F,ne)=>O+(F||0),0),I=Math.round(R/v*100),k=O=>{if(!O)return[{type:"text",value:""}];const F=[],ne=/\[\[(.+?)\]\]/g;let oe=0,Q;for(;(Q=ne.exec(O))!==null;)Q.index>oe&&F.push({type:"text",value:O.slice(oe,Q.index)}),F.push({type:"blank",value:Q[1]}),oe=ne.lastIndex;return oe<O.length&&F.push({type:"text",value:O.slice(oe)}),F},L=()=>{const O=(x==null?void 0:x.question)||"",ne=k(O).filter(oe=>oe.type==="blank");ne.length>0?T(ne.map(()=>"")):T([""]),$(null),A(!0)},D=()=>{const O=(x==null?void 0:x.question)||"",ne=k(O).filter(q=>q.type==="blank").map(q=>q.value);let oe=[];ne.length>0?oe=ne:x&&Array.isArray(x.options)&&typeof x.correctAnswer=="number"?oe=[x.options[x.correctAnswer]||""]:x&&(x.answer||x.correct)&&(oe=[String(x.answer||x.correct)]);const ee=j.map((q,K)=>{const Y=(oe[K]??oe[0]??"").toString().trim().toLowerCase();return q.toString().trim().toLowerCase()===Y&&Y!==""}).every(Boolean);$(ee?"correct":"incorrect"),ee&&z(u,E)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Flashcards: ",c.title]}),o.jsx("p",{className:"text-muted-foreground",children:"Fill marks per question. Total progress shows weighted score."})]}),o.jsx("div",{children:o.jsx(rr,{to:"/admin/quizzes",children:o.jsx(X,{variant:"ghost",children:"Back"})})})]}),o.jsxs(pe,{children:[o.jsx(Ke,{children:o.jsx(Ye,{children:"Progress"})}),o.jsxs(ye,{children:[o.jsxs("div",{className:"mb-2 text-sm",children:["Total: ",v," points  Current: ",R," points"]}),o.jsx(rR,{value:I}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[I,"%"]})]})]}),o.jsxs(pe,{children:[o.jsx(Ke,{children:o.jsxs(Ye,{children:["Question ",u+1," / ",y.length]})}),o.jsx(ye,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"font-medium",children:b?o.jsxs("div",{className:"space-y-2",children:[(()=>{const O=k(x.question||"");let F=0;return o.jsxs("div",{children:[O.map((ne,oe)=>{if(ne.type==="text")return o.jsx("span",{children:ne.value},oe);const Q=F++;return o.jsx("input",{value:j[Q]??"",onChange:ee=>T(q=>{const K=[...q];return K[Q]=ee.target.value,K}),placeholder:"Fill the blank",className:"border-b-2 border-gray-300 px-1 mx-1"},oe)}),O.length===1&&O[0].type==="text"&&o.jsx("div",{children:o.jsx("input",{value:j[0]??"",onChange:ne=>T(oe=>{const Q=[...oe];return Q[0]=ne.target.value,Q}),placeholder:"Answer",className:"border-b-2 border-gray-300 px-1"})})]})})(),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx(X,{onClick:D,children:"Check"}),o.jsx(X,{variant:"outline",onClick:()=>{A(!1),$(null)},children:"Cancel"}),M&&o.jsxs("div",{className:`ml-2 text-sm font-medium flex items-center gap-2 ${M==="correct"?"text-green-600":"text-red-600"}`,children:[M==="correct"&&o.jsx(Rv,{className:"h-4 w-4"}),M==="correct"?"Correct!":"Incorrect"]})]})]}):o.jsx("span",{role:"button",tabIndex:0,onClick:L,onKeyDown:O=>{O.key==="Enter"&&L()},children:x.question})}),x.imageUrl&&o.jsx("img",{src:x.imageUrl,alt:"question",className:"w-full max-w-md object-contain"}),M==="correct"&&x.explanation&&o.jsxs(T0,{className:"border-green-200 bg-green-50 dark:bg-green-950",children:[o.jsx(Ls,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),o.jsx(I0,{className:"mt-2",children:o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("span",{className:"text-sm font-semibold text-green-900 dark:text-green-100",children:"Explanation"})}),x.explanation.text&&o.jsx("p",{className:"text-sm text-green-800 dark:text-green-200",children:x.explanation.text}),x.explanation.imageUrl&&o.jsx("img",{src:x.explanation.imageUrl,alt:"Explanation",className:"max-w-sm rounded border border-green-200"})]})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Weight: ",E]}),o.jsxs("label",{className:"text-sm",children:["Mark (0 - ",E,")"]}),o.jsx("input",{type:"number",min:0,max:E,value:w,onChange:O=>z(u,Math.max(0,Math.min(E,Number(O.target.value)||0))),className:"border rounded px-2 py-1 w-24"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(X,{disabled:u===0,onClick:()=>h(O=>Math.max(0,O-1)),children:"Previous"}),o.jsx(X,{disabled:u===y.length-1,onClick:()=>h(O=>Math.min(y.length-1,O+1)),children:"Next"}),o.jsx(X,{variant:"outline",onClick:()=>{p([]),h(0)},children:"Reset"})]}),o.jsx("div",{className:"mt-4",children:o.jsx(X,{onClick:()=>alert(`Final score: ${R}/${v} (${I}%)`),children:"Finish"})})]})})]})]})}function cW(){return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),o.jsx("p",{className:"text-muted-foreground",children:"Configure application settings and preferences"})]}),o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx(sC,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Application Settings"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"This section will provide configuration options for the admin panel."}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Features: User management, system configuration, backup settings, security options."})]})})]})}function uW(){const[t,e]=_.useState([]),[n,r]=_.useState(!0),[s,a]=_.useState(null);return _.useEffect(()=>{const f=nn(Fe(Ne,"maps")),p=vi(f,y=>{const v=[];y.forEach(x=>{var w,b;const E=x.data();v.push({id:x.id,name:E.name||"",location:E.location||"",description:E.description||E.desc||"",type:E.type||E.mapType||"",video_url:E.video_url||E.videoUrl||"",createdAt:((b=(w=E.createdAt)==null?void 0:w.toDate)==null?void 0:b.call(w))||void 0})}),e(v),r(!1)},y=>{console.error("Failed to load maps:",y),a("Failed to load maps"),r(!1)});return()=>p()},[]),{maps:t,loading:n,error:s,createMap:async f=>{const p={...f,createdAt:new Date};p.type&&!p.mapType&&(p.mapType=p.type),p.mapType&&!p.type&&(p.type=p.mapType),["name","location","description","video_url","type","mapType"].forEach(y=>{typeof p[y]=="string"&&(p[y]=p[y].trim())}),await pn(Fe(Ne,"maps"),p)},updateMap:async(f,p)=>{const y={...p};y.type&&!y.mapType&&(y.mapType=y.type),y.mapType&&!y.type&&(y.type=y.mapType),["name","location","description","video_url","type","mapType"].forEach(v=>{typeof y[v]=="string"&&(y[v]=y[v].trim())}),await zt(gt(Ne,"maps",f),y)},deleteMap:async f=>{await nr(gt(Ne,"maps",f))}}}function dW(){const{maps:t,loading:e,error:n,createMap:r,updateMap:s,deleteMap:a}=uW(),[c,u]=_.useState({name:"",location:"",description:"",video_url:"",type:""}),[h,f]=_.useState(!1),[p,y]=_.useState(null),v=()=>u({name:"",location:"",description:"",video_url:"",type:""}),x=async E=>{if(E.preventDefault(),!!c.name.trim()){f(!0);try{p?await s(p,c):await r(c),v(),y(null)}catch(w){console.error("Error saving map:",w),alert("Failed to save map")}finally{f(!1)}}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ad,{className:"h-6 w-6 text-blue-600"}),o.jsx("h1",{className:"text-3xl font-bold",children:"Maps"})]}),o.jsxs(pe,{children:[o.jsx(Ke,{children:o.jsx(Ye,{children:"Add Map"})}),o.jsx(ye,{children:o.jsxs("form",{onSubmit:x,className:"grid md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{children:"Name"}),o.jsx(we,{value:c.name,onChange:E=>u(w=>({...w,name:E.target.value})),placeholder:"Map name",required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{children:"Location"}),o.jsx(we,{value:c.location,onChange:E=>u(w=>({...w,location:E.target.value})),placeholder:"Location"})]}),o.jsxs("div",{className:"space-y-2 md:col-span-3",children:[o.jsx(Pe,{children:"Description"}),o.jsx("textarea",{value:c.description,onChange:E=>u(w=>({...w,description:E.target.value})),placeholder:"Short description",className:"w-full border rounded px-3 py-2",rows:3})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{children:"Type"}),o.jsxs("select",{className:"w-full border rounded px-3 py-2",value:c.type,onChange:E=>u(w=>({...w,type:E.target.value})),children:[o.jsx("option",{value:"",children:"Select type"}),o.jsx("option",{value:" ",children:" "}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:" ",children:" "}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{children:"Video URL"}),o.jsx(we,{value:c.video_url,onChange:E=>u(w=>({...w,video_url:E.target.value})),placeholder:"https://..."})]}),o.jsx("div",{className:"md:col-span-3 flex justify-end space-x-2",children:p?o.jsxs(o.Fragment,{children:[o.jsx(X,{type:"button",variant:"outline",onClick:()=>{y(null),v()},children:"Cancel"}),o.jsxs(X,{type:"submit",disabled:h,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),h?"Saving...":"Save"]})]}):o.jsxs(X,{type:"submit",disabled:h,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),h?"Adding...":"Add"]})})]})})]}),o.jsxs(pe,{children:[o.jsx(Ke,{children:o.jsxs(Ye,{children:["All Maps (",t.length,")"]})}),o.jsx(ye,{children:e?o.jsx("div",{children:"Loading..."}):n?o.jsx("div",{className:"text-destructive",children:n}):t.length===0?o.jsx("div",{className:"text-muted-foreground",children:"No maps yet."}):o.jsx("div",{className:"grid gap-3",children:t.map(E=>o.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-medium truncate",children:E.name}),o.jsx("div",{className:"text-xs text-muted-foreground truncate",children:E.location}),E.type&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",o.jsx("span",{className:"font-medium",children:E.type})]}),E.description&&o.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:E.description}),E.video_url&&o.jsx("a",{className:"text-xs text-blue-600 hover:underline",href:E.video_url,target:"_blank",rel:"noreferrer",children:E.video_url})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(X,{variant:"ghost",size:"sm",onClick:()=>{y(E.id),u({name:E.name||"",location:E.location||"",description:E.description||"",video_url:E.video_url||"",type:E.type||""}),window.scrollTo({top:0,behavior:"smooth"})},className:"",children:"Edit"}),o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>a(E.id),className:"text-destructive",children:o.jsx(un,{className:"h-4 w-4"})})]})]},E.id))})})]})]})}function hW({research:t,onClose:e,onSave:n}){const[r,s]=_.useState({projectTitle:"",abstract:"",fieldOfResearch:[],contactPerson:[],authorshipPosition:[],projectDuration:"",requiredSkills:[],supervisor:""}),[a,c]=_.useState(""),[u,h]=_.useState("");_.useEffect(()=>{t&&s({projectTitle:t.projectTitle||"",abstract:t.abstract||"",fieldOfResearch:t.fieldOfResearch||[],contactPerson:t.contactPerson||[],authorshipPosition:t.authorshipPosition||[],projectDuration:t.projectDuration||"",requiredSkills:t.requiredSkills||[],supervisor:t.supervisor||""})},[t]);const f=()=>{const E=a.trim();E&&(r.fieldOfResearch.includes(E)||s(w=>({...w,fieldOfResearch:[...w.fieldOfResearch,E]})),c(""))},p=()=>{const E=u.trim();E&&(r.requiredSkills.includes(E)||s(w=>({...w,requiredSkills:[...w.requiredSkills,E]})),h(""))},y=E=>s(w=>({...w,fieldOfResearch:w.fieldOfResearch.filter(b=>b!==E)})),v=E=>s(w=>({...w,requiredSkills:w.requiredSkills.filter(b=>b!==E)})),x=E=>{E.preventDefault();const w={projectTitle:r.projectTitle,abstract:r.abstract,fieldOfResearch:r.fieldOfResearch,contactPerson:r.contactPerson,authorshipPosition:r.authorshipPosition,projectDuration:r.projectDuration,requiredSkills:r.requiredSkills,supervisor:r.supervisor,updatedAt:new Date,...t?{}:{createdAt:new Date}};n(w)};return o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(X,{variant:"ghost",onClick:e,children:[o.jsx(us,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Research":"Create Research"}),o.jsx("p",{className:"text-muted-foreground",children:"Add or update research project details"})]})]})}),o.jsx("form",{onSubmit:x,className:"space-y-6",children:o.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsx(Ye,{children:"Project Details"}),o.jsx(Ct,{children:"Title and abstract"})]}),o.jsxs(ye,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"title",children:"Project Title *"}),o.jsx(we,{id:"title",placeholder:"Enter project title...",value:r.projectTitle,onChange:E=>s(w=>({...w,projectTitle:E.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"abstract",children:"Abstract"}),o.jsx(ls,{id:"abstract",placeholder:"Write a brief abstract...",value:r.abstract,onChange:E=>s(w=>({...w,abstract:E.target.value})),rows:8})]})]})]}),o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsx(Ye,{children:"Fields & Skills"}),o.jsx(Ct,{children:"Fields of research and required skills"})]}),o.jsxs(ye,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Pe,{children:"Field of Research"}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsx(we,{placeholder:"Add field e.g., Oncology",value:a,onChange:E=>c(E.target.value),onKeyDown:E=>{E.key==="Enter"&&(E.preventDefault(),f())}}),o.jsx(X,{type:"button",onClick:f,variant:"outline",children:"Add"})]}),o.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.fieldOfResearch.map(E=>o.jsxs(Rt,{variant:"secondary",className:"flex items-center gap-2",children:[E,o.jsx("button",{type:"button",onClick:()=>y(E),className:"ml-1 hover:text-destructive",children:o.jsx(Kc,{className:"h-3 w-3"})})]},E))})]}),o.jsxs("div",{children:[o.jsx(Pe,{children:"Required Skills"}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsx(we,{placeholder:"Add skill e.g., Data analysis",value:u,onChange:E=>h(E.target.value),onKeyDown:E=>{E.key==="Enter"&&(E.preventDefault(),p())}}),o.jsx(X,{type:"button",onClick:p,variant:"outline",children:"Add"})]}),o.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.requiredSkills.map(E=>o.jsxs(Rt,{variant:"secondary",className:"flex items-center gap-2",children:[E,o.jsx("button",{type:"button",onClick:()=>v(E),className:"ml-1 hover:text-destructive",children:o.jsx(Kc,{className:"h-3 w-3"})})]},E))})]})]})]})]}),o.jsx("div",{className:"space-y-6",children:o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsx(Ye,{children:"Meta"}),o.jsx(Ct,{children:"Contact, supervisor and duration"})]}),o.jsxs(ye,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{children:"Contact Person(s)"}),o.jsx(we,{placeholder:"Comma separated names",value:r.contactPerson.join(", "),onChange:E=>s(w=>({...w,contactPerson:E.target.value.split(",").map(b=>b.trim()).filter(Boolean)}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{children:"Authorship Positions"}),o.jsx(we,{placeholder:"Comma separated positions",value:r.authorshipPosition.join(", "),onChange:E=>s(w=>({...w,authorshipPosition:E.target.value.split(",").map(b=>b.trim()).filter(Boolean)}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{children:"Supervisor"}),o.jsx(we,{placeholder:"Supervisor name",value:r.supervisor,onChange:E=>s(w=>({...w,supervisor:E.target.value}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{children:"Project Duration"}),o.jsx(we,{placeholder:"e.g., 6 months",value:r.projectDuration,onChange:E=>s(w=>({...w,projectDuration:E.target.value}))})]}),o.jsxs("div",{className:"flex justify-end",children:[o.jsx(X,{variant:"ghost",onClick:e,className:"mr-2",children:"Cancel"}),o.jsx(X,{type:"submit",children:"Save"})]})]})]})})]})})]})}const fW=[{id:"r1",projectTitle:"Impact of Early Clinical Exposure on Medical Students",abstract:"A study investigating how early clinical exposure affects students' clinical reasoning and confidence.",fieldOfResearch:["Medical Education","Clinical Skills"],contactPerson:["Dr. Sarah Johnson"],authorshipPosition:["Lead","Co-author"],projectDuration:"6 months",requiredSkills:["Clinical observation","Data analysis"],supervisor:"Prof. Michael Chen",createdAt:new Date,updatedAt:new Date}];function mW(){const[t,e]=_.useState([]),[n,r]=_.useState(!0),[s,a]=_.useState(null),[c,u]=_.useState(!1);_.useEffect(()=>{const y=async()=>{try{const x=nn(Fe(Ne,"research"));await lt(x);const E=nn(Fe(Ne,"research"),io("createdAt","desc"));return vi(E,b=>{const A=[];b.forEach(j=>{var M,$;const T=j.data();A.push({id:j.id,projectTitle:T.projectTitle||T.title||"",abstract:T.abstract||"",fieldOfResearch:T.fieldOfResearch||[],contactPerson:T.contactPerson||[],authorshipPosition:T.authorshipPosition||[],projectDuration:T.projectDuration||"",requiredSkills:T.requiredSkills||[],supervisor:T.supervisor||"",createdAt:(M=T.createdAt)!=null&&M.toDate?T.createdAt.toDate():T.createdAt||new Date,updatedAt:($=T.updatedAt)!=null&&$.toDate?T.updatedAt.toDate():T.updatedAt||new Date})}),e(A),r(!1)},b=>{console.error("Error in research listener:",b),v()})}catch(x){return console.error("Firebase connection failed for research:",x),v(),null}},v=()=>{u(!0),e(fW),a(null),r(!1)};y()},[]);const h=async y=>{if(c){const v={id:`offline_${Date.now()}`,...y};e(x=>[v,...x]);return}try{await pn(Fe(Ne,"research"),y)}catch(v){console.error("Error creating research:",v),u(!0),await h(y)}};return{research:t,loading:n,error:s,createResearch:h,updateResearch:async(y,v)=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(x=>x.map(E=>E.id===y?{...E,...v}:E));return}try{await zt(gt(Ne,"research",y),v)}catch(x){console.error("Error updating research:",x),e(E=>E.map(w=>w.id===y?{...w,...v}:w))}},deleteResearch:async y=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(v=>v.filter(x=>x.id!==y));return}try{await nr(gt(Ne,"research",y))}catch(v){console.error("Error deleting research:",v),e(x=>x.filter(E=>E.id!==y))}},isOfflineMode:c}}function pW(){const[t,e]=_.useState(""),[n,r]=_.useState(null),[s,a]=_.useState(!1),{research:c,loading:u,error:h,createResearch:f,updateResearch:p,deleteResearch:y}=mW(),v=c.filter(A=>A.projectTitle.toLowerCase().includes(t.toLowerCase())),x=()=>{r(null),a(!0)},E=A=>{r(A),a(!0)},w=async A=>{window.confirm("Are you sure you want to delete this research entry?")&&await y(A)},b=async()=>{if(!window.confirm("This will add 8 sample research projects. Continue?"))return;const A=[{projectTitle:"Antibiotic Resistance Patterns in Local Hospitals",abstract:"A comprehensive study examining the prevalence and mechanisms of antibiotic resistance in bacterial pathogens isolated from three major hospitals in the region over a 12-month period.",fieldOfResearch:["Microbiology","Infectious Diseases","Public Health"],contactPerson:["Dr. Emily Rodriguez"],authorshipPosition:["Lead Researcher"],projectDuration:"12 months",requiredSkills:["Bacterial isolation and identification","Antibiotic susceptibility testing","Data analysis"],supervisor:"Prof. James Mitchell"},{projectTitle:"Impact of Sleep Deprivation on Cognitive Performance in Medical Students",abstract:"An observational study investigating the correlation between sleep patterns and academic performance, focusing on memory retention and clinical reasoning abilities.",fieldOfResearch:["Medical Education","Sleep Medicine","Neuroscience"],contactPerson:["Dr. Sarah Johnson","Dr. Michael Chen"],authorshipPosition:["Co-lead","Data Manager"],projectDuration:"8 months",requiredSkills:["Statistical analysis","Sleep assessment tools","Psychological testing"],supervisor:"Prof. Linda Patterson"},{projectTitle:"Effectiveness of Virtual Reality in Surgical Training",abstract:"A randomized controlled trial comparing traditional surgical training methods with VR-based simulation techniques in teaching laparoscopic procedures.",fieldOfResearch:["Surgery","Medical Education","Technology"],contactPerson:["Dr. Robert Williams"],authorshipPosition:["Principal Investigator"],projectDuration:"18 months",requiredSkills:["Surgical expertise","VR technology","Educational assessment"],supervisor:"Prof. David Thompson"},{projectTitle:"Cardiovascular Biomarkers in Early Diabetes Detection",abstract:"Investigation of novel biomarkers that can predict cardiovascular complications in newly diagnosed Type 2 diabetes patients with high sensitivity and specificity.",fieldOfResearch:["Cardiology","Endocrinology","Biomarker Research"],contactPerson:["Dr. Priya Sharma"],authorshipPosition:["Lead Researcher"],projectDuration:"14 months",requiredSkills:["Molecular biology","Biostatistics","Laboratory techniques"],supervisor:"Prof. Rajesh Kumar"},{projectTitle:"Mental Health Outcomes in Cancer Patients: A Longitudinal Study",abstract:"A long-term prospective study examining psychological adjustment, quality of life, and mental health disorders in patients undergoing cancer treatment.",fieldOfResearch:["Oncology","Psychiatry","Clinical Psychology"],contactPerson:["Dr. Margaret Stewart"],authorshipPosition:["Principal Investigator"],projectDuration:"24 months",requiredSkills:["Psychological assessment","Patient counseling","Longitudinal data analysis"],supervisor:"Prof. Helen Martinez"},{projectTitle:"Pharmacogenomics and Drug Response Variability in Hypertension Management",abstract:"Exploring genetic variations that influence antihypertensive drug efficacy and adverse effects to enable personalized medication selection for better patient outcomes.",fieldOfResearch:["Pharmacology","Genetics","Cardiovascular Medicine"],contactPerson:["Dr. Aditya Patel"],authorshipPosition:["Lead Researcher"],projectDuration:"10 months",requiredSkills:["Genetic sequencing","Pharmacokinetics","Clinical trial management"],supervisor:"Prof. Sunita Desai"},{projectTitle:"Environmental Factors and Asthma Exacerbation Rates",abstract:"An epidemiological investigation of air quality, allergen levels, and climatic factors as predictors of asthma hospitalizations in urban populations.",fieldOfResearch:["Pulmonology","Environmental Health","Epidemiology"],contactPerson:["Dr. Thomas Anderson"],authorshipPosition:["Co-lead"],projectDuration:"12 months",requiredSkills:["Environmental sampling","Epidemiological modeling","Respiratory assessment"],supervisor:"Prof. Jennifer Garcia"},{projectTitle:"Telehealth Efficacy in Rural Community Care: A Multicenter Trial",abstract:"Evaluating the effectiveness of telemedicine interventions in providing specialized medical care to underserved rural areas and measuring patient satisfaction and health outcomes.",fieldOfResearch:["Healthcare Technology","Public Health","Rural Medicine"],contactPerson:["Dr. Christopher Lee"],authorshipPosition:["Principal Investigator"],projectDuration:"15 months",requiredSkills:["Telehealth platform management","Outcome measurement","Community health assessment"],supervisor:"Prof. Victoria Wong"}];try{for(let j=0;j<A.length;j++)await f({...A[j],createdAt:new Date,updatedAt:new Date}),await new Promise(T=>setTimeout(T,300));alert(" Successfully added 8 sample research projects!")}catch(j){console.error("Error seeding research data:",j),alert("Failed to seed data. Please try again.")}};return s?o.jsx(hW,{research:n,onClose:()=>{a(!1),r(null)},onSave:async A=>{try{n?await p(n.id,A):await f(A),a(!1),r(null)}catch(j){console.error(j),alert("Failed to save. Please try again.")}}}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Research"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage research projects and student/faculty submissions"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(X,{onClick:b,variant:"outline",className:"flex items-center gap-2",children:" Seed Data"}),o.jsxs(X,{onClick:x,className:"flex items-center gap-2",children:[o.jsx(Jt,{className:"h-4 w-4"}),"Create Research"]})]})]}),o.jsx(pe,{children:o.jsx(ye,{className:"pt-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(xa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(we,{placeholder:"Search by project title...",value:t,onChange:A=>e(A.target.value),className:"pl-10"})]})})}),u&&o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx(ds,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading research entries..."})]})}),h&&o.jsx(pe,{children:o.jsxs(ye,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:" Error loading research"}),o.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&o.jsx("div",{className:"space-y-4",children:v.map(A=>o.jsx(pe,{className:"hover:shadow-md transition-shadow",children:o.jsx(ye,{className:"pt-6",children:o.jsx("div",{className:"flex gap-4",children:o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:A.projectTitle}),o.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mt-2",children:A.abstract}),o.jsx("div",{className:"flex gap-2 flex-wrap mt-3 text-xs text-muted-foreground",children:(A.fieldOfResearch||[]).map(j=>o.jsx("span",{className:"bg-muted px-2 py-1 rounded text-xs",children:j},j))})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[o.jsx(X,{variant:"ghost",onClick:()=>E(A),children:o.jsx(mr,{className:"h-4 w-4"})}),o.jsx(X,{variant:"ghost",onClick:()=>w(A.id),children:o.jsx(un,{className:"h-4 w-4"})})]})]})})})})},A.id))})]})}function gW({notification:t,onClose:e,onSave:n}){const{users:r}=rg(),{years:s}=oo(),[a,c]=_.useState({userId:"",title:"",message:"",type:"news",relatedId:"",batchId:"",yearId:""}),[u,h]=_.useState(!1);_.useEffect(()=>{t&&c({userId:t.userId||"",title:t.title||"",message:t.message||"",type:t.type||"news",relatedId:t.relatedId||"",batchId:t.batchId||"",yearId:""})},[t]),_.useEffect(()=>{if(a.yearId){const p=s.find(y=>y.id===a.yearId);p!=null&&p.batchId&&c(y=>({...y,batchId:p.batchId||""}))}},[a.yearId,s]);const f=async p=>{p.preventDefault(),h(!0);try{const y={userId:a.userId,title:a.title,message:a.message,type:a.type,relatedId:a.relatedId||void 0,read:!1,createdAt:new Date,batchId:a.batchId||void 0};n(y)}catch(y){console.error("Error saving notification:",y)}finally{h(!1)}};return Array.from(new Set(s.map(p=>({id:p.batchId,name:p.batchName})).filter(p=>p.id).map(p=>JSON.stringify(p)))).map(p=>JSON.parse(p)),o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(X,{variant:"ghost",onClick:e,children:[o.jsx(us,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Notification":"Create Notification"}),o.jsx("p",{className:"text-muted-foreground",children:t?"Update the notification details":"Create a new notification for users"})]})]})}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[o.jsx("div",{className:"lg:col-span-2 space-y-6",children:o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsx(Ye,{children:"Notification Content"}),o.jsx(Ct,{children:"Main notification information"})]}),o.jsxs(ye,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"title",children:"Title *"}),o.jsx(we,{id:"title",placeholder:"Enter notification title...",value:a.title,onChange:p=>c(y=>({...y,title:p.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"message",children:"Message *"}),o.jsx(ls,{id:"message",placeholder:"Write your notification message here...",value:a.message,onChange:p=>c(y=>({...y,message:p.target.value})),rows:8,required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"type",children:"Type *"}),o.jsxs(Em,{value:a.type,onValueChange:p=>c(y=>({...y,type:p})),children:[o.jsx(Td,{children:o.jsx(Nm,{placeholder:"Select notification type"})}),o.jsxs(Id,{children:[o.jsx(Mo,{value:"news",children:"News"}),o.jsx(Mo,{value:"announcement",children:"Announcement"}),o.jsx(Mo,{value:"system",children:"System"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"relatedId",children:"Related ID (Optional)"}),o.jsx(we,{id:"relatedId",placeholder:"e.g., news article ID",value:a.relatedId,onChange:p=>c(y=>({...y,relatedId:p.target.value}))}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional: ID of related item (e.g., news article ID)"})]})]})]})}),o.jsx("div",{className:"space-y-6",children:o.jsxs(pe,{children:[o.jsxs(Ke,{children:[o.jsx(Ye,{children:"Target Audience"}),o.jsx(Ct,{children:"Select who should receive this notification"})]}),o.jsxs(ye,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"userId",children:"User ID *"}),o.jsxs(Em,{value:a.userId,onValueChange:p=>c(y=>({...y,userId:p})),children:[o.jsx(Td,{children:o.jsx(Nm,{placeholder:"Select a user"})}),o.jsx(Id,{children:r.map(p=>o.jsx(Mo,{value:p.id||"",children:p.displayName||p.email||p.id},p.id))})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Select a specific user to notify"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"yearId",children:"Year (Optional)"}),o.jsxs(Em,{value:a.yearId,onValueChange:p=>c(y=>({...y,yearId:p})),children:[o.jsx(Td,{children:o.jsx(Nm,{placeholder:"Select a year"})}),o.jsxs(Id,{children:[o.jsx(Mo,{value:"",children:"All Years"}),s.map(p=>o.jsx(Mo,{value:p.id||"",children:p.batchName?`${p.batchName} - Year ${p.yearNumber}`:`Year ${p.yearNumber}`},p.id))]})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Selecting a year will automatically set the batch"})]}),a.batchId&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(Pe,{htmlFor:"batchId",children:"Batch ID"}),o.jsx(we,{id:"batchId",value:a.batchId,readOnly:!0,className:"bg-muted"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically set from selected year"})]})]})]})})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(X,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),o.jsx(X,{type:"submit",disabled:u,children:u?o.jsxs(o.Fragment,{children:[o.jsx(no,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):o.jsxs(o.Fragment,{children:[o.jsx(ol,{className:"h-4 w-4 mr-2"}),t?"Update Notification":"Create Notification"]})})]})]})]})}function yW(){const[t,e]=_.useState(""),[n,r]=_.useState(null),[s,a]=_.useState(!1),[c,u]=_.useState("all"),{notifications:h,loading:f,error:p,createNotification:y,updateNotification:v,markAsRead:x,markAllAsRead:E,deleteNotification:w,unreadCount:b}=kk(),{users:A}=rg(),j=D=>{const O=A.find(F=>F.id===D);return(O==null?void 0:O.displayName)||(O==null?void 0:O.email)||D},T=h.filter(D=>D.title.toLowerCase().includes(t.toLowerCase())||D.message.toLowerCase().includes(t.toLowerCase())||j(D.userId).toLowerCase().includes(t.toLowerCase())),M=T.filter(D=>!D.read),$=T.filter(D=>D.read),z=D=>{r(D),a(!0)},R=async D=>{if(window.confirm("Are you sure you want to delete this notification?"))try{await w(D)}catch(O){console.error("Error deleting notification:",O),alert("Failed to delete notification. Please try again.")}},I=async D=>{try{await x(D)}catch(O){console.error("Error marking notification as read:",O),alert("Failed to mark notification as read. Please try again.")}},k=async()=>{if(window.confirm("Mark all notifications as read?"))try{await E()}catch(D){console.error("Error marking all notifications as read:",D),alert("Failed to mark all notifications as read. Please try again.")}},L=()=>{r(null),a(!0)};return s?o.jsx(gW,{notification:n,onClose:()=>{a(!1),r(null)},onSave:async D=>{try{n?await v(n.id,D):await y(D),a(!1),r(null)}catch(O){console.error("Error saving notification:",O),alert("Failed to save notification. Please try again.")}}}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Notifications Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Create and manage notifications for users"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[b>0&&o.jsxs(X,{variant:"outline",onClick:k,className:"flex items-center gap-2",children:[o.jsx(pD,{className:"h-4 w-4"}),"Mark All Read"]}),o.jsxs(X,{onClick:L,className:"flex items-center gap-2",children:[o.jsx(Jt,{className:"h-4 w-4"}),"Create Notification"]})]})]}),p&&o.jsx(pe,{className:"border-destructive",children:o.jsx(ye,{className:"pt-6",children:o.jsx("p",{className:"text-destructive",children:p})})}),o.jsxs(pe,{children:[o.jsx(Ke,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(Ye,{children:"Notifications"}),o.jsx(Ct,{children:f?"Loading...":`${T.length} total notifications`})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("div",{className:"relative",children:[o.jsx(xa,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),o.jsx(we,{placeholder:"Search notifications...",value:t,onChange:D=>e(D.target.value),className:"pl-8 w-64"})]})})]})}),o.jsx(ye,{children:f?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx(ds,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):o.jsxs(QP,{value:c,onValueChange:u,children:[o.jsxs(H0,{children:[o.jsxs(kc,{value:"all",children:["All (",T.length,")"]}),o.jsxs(kc,{value:"unread",children:["Unread (",M.length,")"]}),o.jsxs(kc,{value:"read",children:["Read (",$.length,")"]})]}),o.jsx(Pc,{value:"all",className:"mt-4",children:T.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(ol,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No notifications found"})]}):o.jsx("div",{className:"space-y-3",children:T.map(D=>o.jsx(pe,{className:D.read?"opacity-75":"border-primary/50",children:o.jsx(ye,{className:"pt-4",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[!D.read&&o.jsx(Rt,{variant:"default",className:"h-2 w-2 p-0 rounded-full"}),o.jsx("h3",{className:"font-semibold text-lg",children:D.title}),o.jsx(Rt,{variant:"outline",children:D.type})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:D.message}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(as,{className:"h-3 w-3"}),j(D.userId)]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ec,{className:"h-3 w-3"}),D.createdAt.toLocaleDateString()]}),D.batchId&&o.jsxs(Rt,{variant:"secondary",className:"text-xs",children:["Batch: ",D.batchId.slice(0,8),"..."]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[!D.read&&o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>I(D.id),title:"Mark as read",children:o.jsx(Sm,{className:"h-4 w-4"})}),o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>z(D),title:"Edit",children:o.jsx(mr,{className:"h-4 w-4"})}),o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>R(D.id),title:"Delete",className:"text-destructive hover:text-destructive",children:o.jsx(un,{className:"h-4 w-4"})})]})]})})},D.id))})}),o.jsx(Pc,{value:"unread",className:"mt-4",children:M.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(eC,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No unread notifications"})]}):o.jsx("div",{className:"space-y-3",children:M.map(D=>o.jsx(pe,{className:"border-primary/50",children:o.jsx(ye,{className:"pt-4",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Rt,{variant:"default",className:"h-2 w-2 p-0 rounded-full"}),o.jsx("h3",{className:"font-semibold text-lg",children:D.title}),o.jsx(Rt,{variant:"outline",children:D.type})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:D.message}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(as,{className:"h-3 w-3"}),j(D.userId)]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ec,{className:"h-3 w-3"}),D.createdAt.toLocaleDateString()]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>I(D.id),title:"Mark as read",children:o.jsx(Sm,{className:"h-4 w-4"})}),o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>z(D),title:"Edit",children:o.jsx(mr,{className:"h-4 w-4"})}),o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>R(D.id),title:"Delete",className:"text-destructive hover:text-destructive",children:o.jsx(un,{className:"h-4 w-4"})})]})]})})},D.id))})}),o.jsx(Pc,{value:"read",className:"mt-4",children:$.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(ID,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No read notifications"})]}):o.jsx("div",{className:"space-y-3",children:$.map(D=>o.jsx(pe,{className:"opacity-75",children:o.jsx(ye,{className:"pt-4",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"font-semibold text-lg",children:D.title}),o.jsx(Rt,{variant:"outline",children:D.type})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:D.message}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(as,{className:"h-3 w-3"}),j(D.userId)]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ec,{className:"h-3 w-3"}),D.createdAt.toLocaleDateString()]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>z(D),title:"Edit",children:o.jsx(mr,{className:"h-4 w-4"})}),o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>R(D.id),title:"Delete",className:"text-destructive hover:text-destructive",children:o.jsx(un,{className:"h-4 w-4"})})]})]})})},D.id))})})]})})]})]})}const vW=()=>{const t=so();return _.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),o.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};_S(()=>Promise.resolve().then(()=>SB),void 0).catch(()=>{});const xW=new ZM({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:30*60*1e3,refetchOnWindowFocus:!1,retry:1}}});function wW({children:t}){const{currentUser:e}=eg();return e?o.jsx(o.Fragment,{children:t}):o.jsx(um,{to:"/login"})}const dS=()=>o.jsx(TB,{children:o.jsx(r4,{client:xW,children:o.jsxs(RM,{children:[o.jsx(vO,{}),o.jsx(QO,{}),o.jsx(pF,{basename:"/builder-stellar-world/",children:o.jsx(CB,{children:o.jsxs(oF,{children:[o.jsx($t,{path:"/login",element:o.jsx(VB,{})}),o.jsxs($t,{path:"/admin",element:o.jsx(wW,{children:o.jsx(DB,{})}),children:[o.jsx($t,{index:!0,element:o.jsx(t8,{})}),o.jsx($t,{path:"news",element:o.jsx(p7,{})}),o.jsx($t,{path:"years",element:o.jsx(v7,{})}),o.jsx($t,{path:"years/:id",element:o.jsx(x7,{})}),o.jsx($t,{path:"books",element:o.jsx(b7,{})}),o.jsx($t,{path:"subjects/:id",element:o.jsx(Aq,{})}),o.jsx($t,{path:"resources",element:o.jsx(lS,{})}),o.jsx($t,{path:"resources/*",element:o.jsx(lS,{})}),o.jsx($t,{path:"VIDEOS",element:o.jsx(um,{to:"/admin/years",replace:!0})}),o.jsx($t,{path:"VIDEOS/*",element:o.jsx(um,{to:"/admin/years",replace:!0})}),o.jsx($t,{path:"professors",element:o.jsx(Cq,{})}),o.jsx($t,{path:"users",element:o.jsx(jq,{})}),o.jsx($t,{path:"store",element:o.jsx(Kq,{})}),o.jsx($t,{path:"orders",element:o.jsx(Qq,{})}),o.jsx($t,{path:"videos",element:o.jsx(Jq,{})}),o.jsx($t,{path:"files",element:o.jsx(Zq,{})}),o.jsx($t,{path:"quizzes",element:o.jsx(eW,{})}),o.jsx($t,{path:"flashcards",element:o.jsx(lW,{})}),o.jsx($t,{path:"research",element:o.jsx(pW,{})}),o.jsx($t,{path:"maps",element:o.jsx(dW,{})}),o.jsx($t,{path:"notifications",element:o.jsx(yW,{})}),o.jsx($t,{path:"settings",element:o.jsx(cW,{})})]}),o.jsx($t,{path:"/",element:o.jsx(um,{to:"/admin"})}),o.jsx($t,{path:"*",element:o.jsx(vW,{})})]})})})]})})}),jv=document.getElementById("root");if(!jv)document.body.innerHTML="<div style='padding:20px;font-family:system-ui;'>Error: root element not found.</div>";else try{if(window.__appRoot)window.__appRoot.render(o.jsx(dS,{}));else{const t=wO.createRoot(jv);window.__appRoot=t,t.render(o.jsx(dS,{}))}}catch(t){const e=t instanceof Error?t.message:String(t);jv.innerHTML="<div style='padding:20px;font-family:system-ui;max-width:600px;'><h2>App failed to load</h2><p style='color:#666'>"+e.replace(/</g,"&lt;")+"</p><p style='margin-top:12px'><button onclick='location.reload()'>Reload</button></p></div>",console.error("App bootstrap error:",t)}
