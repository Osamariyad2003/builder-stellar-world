var lP=Object.defineProperty;var X0=n=>{throw TypeError(n)};var cP=(n,e,t)=>e in n?lP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var J0=(n,e,t)=>cP(n,typeof e!="symbol"?e+"":e,t),vg=(n,e,t)=>e.has(n)||X0("Cannot "+t);var ue=(n,e,t)=>(vg(n,e,"read from private field"),t?t.call(n):e.get(n)),Et=(n,e,t)=>e.has(n)?X0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),st=(n,e,t,r)=>(vg(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),$n=(n,e,t)=>(vg(n,e,"access private method"),t);var Oh=(n,e,t,r)=>({set _(s){st(n,e,s,t)},get _(){return ue(n,e,r)}});function uP(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function i1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yg={exports:{}},fu={},xg={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z0;function dP(){if(Z0)return lt;Z0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function y(U){return U===null||typeof U!="object"?null:(U=v&&U[v]||U["@@iterator"],typeof U=="function"?U:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,_={};function x(U,Y,le){this.props=U,this.context=Y,this.refs=_,this.updater=le||b}x.prototype.isReactComponent={},x.prototype.setState=function(U,Y){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Y,"setState")},x.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function A(){}A.prototype=x.prototype;function I(U,Y,le){this.props=U,this.context=Y,this.refs=_,this.updater=le||b}var C=I.prototype=new A;C.constructor=I,S(C,x.prototype),C.isPureReactComponent=!0;var O=Array.isArray,V=Object.prototype.hasOwnProperty,B={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function R(U,Y,le){var be,ve={},de=null,me=null;if(Y!=null)for(be in Y.ref!==void 0&&(me=Y.ref),Y.key!==void 0&&(de=""+Y.key),Y)V.call(Y,be)&&!P.hasOwnProperty(be)&&(ve[be]=Y[be]);var Se=arguments.length-2;if(Se===1)ve.children=le;else if(1<Se){for(var Pe=Array(Se),Ce=0;Ce<Se;Ce++)Pe[Ce]=arguments[Ce+2];ve.children=Pe}if(U&&U.defaultProps)for(be in Se=U.defaultProps,Se)ve[be]===void 0&&(ve[be]=Se[be]);return{$$typeof:n,type:U,key:de,ref:me,props:ve,_owner:B.current}}function D(U,Y){return{$$typeof:n,type:U.type,key:Y,ref:U.ref,props:U.props,_owner:U._owner}}function k(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function $(U){var Y={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(le){return Y[le]})}var z=/\/+/g;function M(U,Y){return typeof U=="object"&&U!==null&&U.key!=null?$(""+U.key):Y.toString(36)}function ie(U,Y,le,be,ve){var de=typeof U;(de==="undefined"||de==="boolean")&&(U=null);var me=!1;if(U===null)me=!0;else switch(de){case"string":case"number":me=!0;break;case"object":switch(U.$$typeof){case n:case e:me=!0}}if(me)return me=U,ve=ve(me),U=be===""?"."+M(me,0):be,O(ve)?(le="",U!=null&&(le=U.replace(z,"$&/")+"/"),ie(ve,Y,le,"",function(Ce){return Ce})):ve!=null&&(k(ve)&&(ve=D(ve,le+(!ve.key||me&&me.key===ve.key?"":(""+ve.key).replace(z,"$&/")+"/")+U)),Y.push(ve)),1;if(me=0,be=be===""?".":be+":",O(U))for(var Se=0;Se<U.length;Se++){de=U[Se];var Pe=be+M(de,Se);me+=ie(de,Y,le,Pe,ve)}else if(Pe=y(U),typeof Pe=="function")for(U=Pe.call(U),Se=0;!(de=U.next()).done;)de=de.value,Pe=be+M(de,Se++),me+=ie(de,Y,le,Pe,ve);else if(de==="object")throw Y=String(U),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return me}function K(U,Y,le){if(U==null)return U;var be=[],ve=0;return ie(U,be,"","",function(de){return Y.call(le,de,ve++)}),be}function J(U){if(U._status===-1){var Y=U._result;Y=Y(),Y.then(function(le){(U._status===0||U._status===-1)&&(U._status=1,U._result=le)},function(le){(U._status===0||U._status===-1)&&(U._status=2,U._result=le)}),U._status===-1&&(U._status=0,U._result=Y)}if(U._status===1)return U._result.default;throw U._result}var X={current:null},q={transition:null},Q={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:q,ReactCurrentOwner:B};function Z(){throw Error("act(...) is not supported in production builds of React.")}return lt.Children={map:K,forEach:function(U,Y,le){K(U,function(){Y.apply(this,arguments)},le)},count:function(U){var Y=0;return K(U,function(){Y++}),Y},toArray:function(U){return K(U,function(Y){return Y})||[]},only:function(U){if(!k(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},lt.Component=x,lt.Fragment=t,lt.Profiler=s,lt.PureComponent=I,lt.StrictMode=r,lt.Suspense=h,lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,lt.act=Z,lt.cloneElement=function(U,Y,le){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var be=S({},U.props),ve=U.key,de=U.ref,me=U._owner;if(Y!=null){if(Y.ref!==void 0&&(de=Y.ref,me=B.current),Y.key!==void 0&&(ve=""+Y.key),U.type&&U.type.defaultProps)var Se=U.type.defaultProps;for(Pe in Y)V.call(Y,Pe)&&!P.hasOwnProperty(Pe)&&(be[Pe]=Y[Pe]===void 0&&Se!==void 0?Se[Pe]:Y[Pe])}var Pe=arguments.length-2;if(Pe===1)be.children=le;else if(1<Pe){Se=Array(Pe);for(var Ce=0;Ce<Pe;Ce++)Se[Ce]=arguments[Ce+2];be.children=Se}return{$$typeof:n,type:U.type,key:ve,ref:de,props:be,_owner:me}},lt.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},lt.createElement=R,lt.createFactory=function(U){var Y=R.bind(null,U);return Y.type=U,Y},lt.createRef=function(){return{current:null}},lt.forwardRef=function(U){return{$$typeof:u,render:U}},lt.isValidElement=k,lt.lazy=function(U){return{$$typeof:g,_payload:{_status:-1,_result:U},_init:J}},lt.memo=function(U,Y){return{$$typeof:m,type:U,compare:Y===void 0?null:Y}},lt.startTransition=function(U){var Y=q.transition;q.transition={};try{U()}finally{q.transition=Y}},lt.unstable_act=Z,lt.useCallback=function(U,Y){return X.current.useCallback(U,Y)},lt.useContext=function(U){return X.current.useContext(U)},lt.useDebugValue=function(){},lt.useDeferredValue=function(U){return X.current.useDeferredValue(U)},lt.useEffect=function(U,Y){return X.current.useEffect(U,Y)},lt.useId=function(){return X.current.useId()},lt.useImperativeHandle=function(U,Y,le){return X.current.useImperativeHandle(U,Y,le)},lt.useInsertionEffect=function(U,Y){return X.current.useInsertionEffect(U,Y)},lt.useLayoutEffect=function(U,Y){return X.current.useLayoutEffect(U,Y)},lt.useMemo=function(U,Y){return X.current.useMemo(U,Y)},lt.useReducer=function(U,Y,le){return X.current.useReducer(U,Y,le)},lt.useRef=function(U){return X.current.useRef(U)},lt.useState=function(U){return X.current.useState(U)},lt.useSyncExternalStore=function(U,Y,le){return X.current.useSyncExternalStore(U,Y,le)},lt.useTransition=function(){return X.current.useTransition()},lt.version="18.3.1",lt}var e_;function cy(){return e_||(e_=1,xg.exports=dP()),xg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_;function hP(){if(t_)return fu;t_=1;var n=cy(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(u,h,m){var g,v={},y=null,b=null;m!==void 0&&(y=""+m),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(b=h.ref);for(g in h)r.call(h,g)&&!a.hasOwnProperty(g)&&(v[g]=h[g]);if(u&&u.defaultProps)for(g in h=u.defaultProps,h)v[g]===void 0&&(v[g]=h[g]);return{$$typeof:e,type:u,key:y,ref:b,props:v,_owner:s.current}}return fu.Fragment=t,fu.jsx=c,fu.jsxs=c,fu}var n_;function fP(){return n_||(n_=1,yg.exports=hP()),yg.exports}var l=fP();let yf=!1,mP=[],bu=0;const r_=3,fc=n=>{yf!==n&&(yf=n,console.log(`ðŸ”„ Firebase mode changed: ${n?"OFFLINE":"ONLINE"}`),mP.forEach(e=>e()))},s_=n=>{bu++,console.log(`ðŸš¨ Firebase error ${bu}/${r_}:`,n.message),bu>=r_&&(console.log("ðŸ”„ Too many Firebase errors - switching to global offline mode"),fc(!0))};if(!window.fetch.__firebasePatched){const n=window.fetch,e=(...t)=>{var a;const r=typeof t[0]=="string"?t[0]:(a=t[0])==null?void 0:a.url;if(!(!!r&&(r.includes("firestore.googleapis.com")||r.includes("firebase.googleapis.com")||r.includes("identitytoolkit.googleapis.com"))))try{return n(...t)}catch(c){return Promise.reject(c)}if(yf){const c=new Error("Firebase offline mode - request blocked");return c.isFirebaseOfflineError=!0,Promise.reject(c)}try{const c=n(...t);return Promise.resolve(c).then(u=>(u.ok&&(bu=0,yf&&(console.log("ðŸŸ¢ Firebase connection restored"),fc(!1))),u)).catch(u=>{console.log("ðŸ”´ Firebase request failed:",(u==null?void 0:u.message)||String(u));const h=String(u&&(u.stack||"")||""),m=String((u==null?void 0:u.message)||u||"").toLowerCase();throw!(h.includes("chrome-extension://")||h.includes("extension://")||m.includes("extension"))&&navigator.onLine&&s_(u),u})}catch(c){console.log("ðŸ”´ Firebase request threw synchronously:",(c==null?void 0:c.message)||String(c));const u=String(c&&(c.stack||"")||""),h=String((c==null?void 0:c.message)||c||"").toLowerCase();return!(u.includes("chrome-extension://")||u.includes("extension://")||h.includes("extension"))&&navigator.onLine&&s_(c),Promise.reject(c)}};e.__firebasePatched=!0,window.fetch=e}console.log("ðŸ”„ Initializing Firebase monitoring...");navigator.onLine||(console.log("ðŸš« No internet connection - starting in offline mode"),fc(!0));window.addEventListener("online",()=>{console.log("ðŸŸ¢ Internet connection restored"),bu=0,fc(!1)});window.addEventListener("offline",()=>{console.log("ðŸ”´ Internet connection lost"),fc(!0)});console.log("ðŸ”„ Starting Firebase monitoring in ONLINE mode");window.addEventListener("unhandledrejection",n=>{var r;const e=String(((r=n==null?void 0:n.reason)==null?void 0:r.message)||(n==null?void 0:n.reason)||""),t=String((n==null?void 0:n.reason)&&(n.reason.stack||"")||"");if((e.includes("Failed to fetch")||e.toLowerCase().includes("extension"))&&(t.includes("chrome-extension://")||t.includes("extension://")||t.includes("fullstory.com"))){n.preventDefault();return}if(t.includes("chrome-extension://")||t.includes("extension://")){n.preventDefault();return}});const pP=console.error,gP=console.warn,vP=console.log;console.error=(...n)=>{const e=n.map(s=>s&&typeof s=="object"?String(s):s).join(" "),t=n.some(s=>s&&typeof s=="object"&&s.stack&&s.stack.includes("chrome-extension://"));["Firebase offline mode - request blocked","FirebaseError: [code=unavailable]","Could not reach Cloud Firestore backend","Connection failed","The operation could not be completed","device does not have a healthy Internet connection","client will operate in offline mode","Most recent error: FirebaseError","@firebase/firestore: Firestore","fullstory.com","TypeError: Failed to fetch"].some(s=>e.includes(s))||t||e.includes("chrome-extension://")||e.includes("extension://")||pP.apply(console,n)};console.warn=(...n)=>{const e=n.join(" ");e.includes("Firebase")&&e.includes("offline")||gP.apply(console,n)};console.log=(...n)=>{const e=n.join(" ");e.includes("@firebase/firestore")&&e.includes("offline")||vP.apply(console,n)};setTimeout(()=>{navigator.onLine?console.log("ðŸŒ Internet available - Firebase enabled and ready"):(console.log("ðŸš« No internet connection detected - switching to offline mode"),fc(!0))},100);var E=cy();const Ee=i1(E),o1=uP({__proto__:null,default:Ee},[E]),yP=1,xP=1e6;let wg=0;function wP(){return wg=(wg+1)%Number.MAX_SAFE_INTEGER,wg.toString()}const _g=new Map,i_=n=>{if(_g.has(n))return;const e=setTimeout(()=>{_g.delete(n),Su({type:"REMOVE_TOAST",toastId:n})},xP);_g.set(n,e)},_P=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,yP)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?i_(t):n.toasts.forEach(r=>{i_(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},rf=[];let sf={toasts:[]};function Su(n){sf=_P(sf,n),rf.forEach(e=>{e(sf)})}function EP({...n}){const e=wP(),t=s=>Su({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Su({type:"DISMISS_TOAST",toastId:e});return Su({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:t}}function bP(){const[n,e]=E.useState(sf);return E.useEffect(()=>(rf.push(e),()=>{const t=rf.indexOf(e);t>-1&&rf.splice(t,1)}),[n]),{...n,toast:EP,dismiss:t=>Su({type:"DISMISS_TOAST",toastId:t})}}var Eg={exports:{}},dr={},bg={exports:{}},Sg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o_;function SP(){return o_||(o_=1,function(n){function e(q,Q){var Z=q.length;q.push(Q);e:for(;0<Z;){var U=Z-1>>>1,Y=q[U];if(0<s(Y,Q))q[U]=Q,q[Z]=Y,Z=U;else break e}}function t(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Q=q[0],Z=q.pop();if(Z!==Q){q[0]=Z;e:for(var U=0,Y=q.length,le=Y>>>1;U<le;){var be=2*(U+1)-1,ve=q[be],de=be+1,me=q[de];if(0>s(ve,Z))de<Y&&0>s(me,ve)?(q[U]=me,q[de]=Z,U=de):(q[U]=ve,q[be]=Z,U=be);else if(de<Y&&0>s(me,Z))q[U]=me,q[de]=Z,U=de;else break e}}return Q}function s(q,Q){var Z=q.sortIndex-Q.sortIndex;return Z!==0?Z:q.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var h=[],m=[],g=1,v=null,y=3,b=!1,S=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(q){for(var Q=t(m);Q!==null;){if(Q.callback===null)r(m);else if(Q.startTime<=q)r(m),Q.sortIndex=Q.expirationTime,e(h,Q);else break;Q=t(m)}}function O(q){if(_=!1,C(q),!S)if(t(h)!==null)S=!0,J(V);else{var Q=t(m);Q!==null&&X(O,Q.startTime-q)}}function V(q,Q){S=!1,_&&(_=!1,A(R),R=-1),b=!0;var Z=y;try{for(C(Q),v=t(h);v!==null&&(!(v.expirationTime>Q)||q&&!$());){var U=v.callback;if(typeof U=="function"){v.callback=null,y=v.priorityLevel;var Y=U(v.expirationTime<=Q);Q=n.unstable_now(),typeof Y=="function"?v.callback=Y:v===t(h)&&r(h),C(Q)}else r(h);v=t(h)}if(v!==null)var le=!0;else{var be=t(m);be!==null&&X(O,be.startTime-Q),le=!1}return le}finally{v=null,y=Z,b=!1}}var B=!1,P=null,R=-1,D=5,k=-1;function $(){return!(n.unstable_now()-k<D)}function z(){if(P!==null){var q=n.unstable_now();k=q;var Q=!0;try{Q=P(!0,q)}finally{Q?M():(B=!1,P=null)}}else B=!1}var M;if(typeof I=="function")M=function(){I(z)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,K=ie.port2;ie.port1.onmessage=z,M=function(){K.postMessage(null)}}else M=function(){x(z,0)};function J(q){P=q,B||(B=!0,M())}function X(q,Q){R=x(function(){q(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){S||b||(S=!0,J(V))},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(q){switch(y){case 1:case 2:case 3:var Q=3;break;default:Q=y}var Z=y;y=Q;try{return q()}finally{y=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,Q){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Z=y;y=q;try{return Q()}finally{y=Z}},n.unstable_scheduleCallback=function(q,Q,Z){var U=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?U+Z:U):Z=U,q){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=Z+Y,q={id:g++,callback:Q,priorityLevel:q,startTime:Z,expirationTime:Y,sortIndex:-1},Z>U?(q.sortIndex=Z,e(m,q),t(h)===null&&q===t(m)&&(_?(A(R),R=-1):_=!0,X(O,Z-U))):(q.sortIndex=Y,e(h,q),S||b||(S=!0,J(V))),q},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(q){var Q=y;return function(){var Z=y;y=Q;try{return q.apply(this,arguments)}finally{y=Z}}}}(Sg)),Sg}var a_;function NP(){return a_||(a_=1,bg.exports=SP()),bg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l_;function TP(){if(l_)return dr;l_=1;var n=cy(),e=NP();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,d=1;d<arguments.length;d++)o+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){c(i,o),c(i+"Capture",o)}function c(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function y(i){return h.call(v,i)?!0:h.call(g,i)?!1:m.test(i)?v[i]=!0:(g[i]=!0,!1)}function b(i,o,d,p){if(d!==null&&d.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return p?!1:d!==null?!d.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function S(i,o,d,p){if(o===null||typeof o>"u"||b(i,o,d,p))return!0;if(p)return!1;if(d!==null)switch(d.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function _(i,o,d,p,w,T,L){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=p,this.attributeNamespace=w,this.mustUseProperty=d,this.propertyName=i,this.type=o,this.sanitizeURL=T,this.removeEmptyString=L}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){x[i]=new _(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];x[o]=new _(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){x[i]=new _(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){x[i]=new _(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){x[i]=new _(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){x[i]=new _(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){x[i]=new _(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){x[i]=new _(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){x[i]=new _(i,5,!1,i.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function I(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(A,I);x[o]=new _(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(A,I);x[o]=new _(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(A,I);x[o]=new _(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){x[i]=new _(i,1,!1,i.toLowerCase(),null,!1,!1)}),x.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){x[i]=new _(i,1,!1,i.toLowerCase(),null,!0,!0)});function C(i,o,d,p){var w=x.hasOwnProperty(o)?x[o]:null;(w!==null?w.type!==0:p||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(S(o,d,w,p)&&(d=null),p||w===null?y(o)&&(d===null?i.removeAttribute(o):i.setAttribute(o,""+d)):w.mustUseProperty?i[w.propertyName]=d===null?w.type===3?!1:"":d:(o=w.attributeName,p=w.attributeNamespace,d===null?i.removeAttribute(o):(w=w.type,d=w===3||w===4&&d===!0?"":""+d,p?i.setAttributeNS(p,o,d):i.setAttribute(o,d))))}var O=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),B=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),$=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),X=Symbol.for("react.offscreen"),q=Symbol.iterator;function Q(i){return i===null||typeof i!="object"?null:(i=q&&i[q]||i["@@iterator"],typeof i=="function"?i:null)}var Z=Object.assign,U;function Y(i){if(U===void 0)try{throw Error()}catch(d){var o=d.stack.trim().match(/\n( *(at )?)/);U=o&&o[1]||""}return`
`+U+i}var le=!1;function be(i,o){if(!i||le)return"";le=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(se){var p=se}Reflect.construct(i,[],o)}else{try{o.call()}catch(se){p=se}i.call(o.prototype)}else{try{throw Error()}catch(se){p=se}i()}}catch(se){if(se&&p&&typeof se.stack=="string"){for(var w=se.stack.split(`
`),T=p.stack.split(`
`),L=w.length-1,W=T.length-1;1<=L&&0<=W&&w[L]!==T[W];)W--;for(;1<=L&&0<=W;L--,W--)if(w[L]!==T[W]){if(L!==1||W!==1)do if(L--,W--,0>W||w[L]!==T[W]){var H=`
`+w[L].replace(" at new "," at ");return i.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",i.displayName)),H}while(1<=L&&0<=W);break}}}finally{le=!1,Error.prepareStackTrace=d}return(i=i?i.displayName||i.name:"")?Y(i):""}function ve(i){switch(i.tag){case 5:return Y(i.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return i=be(i.type,!1),i;case 11:return i=be(i.type.render,!1),i;case 1:return i=be(i.type,!0),i;default:return""}}function de(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case B:return"Portal";case D:return"Profiler";case R:return"StrictMode";case M:return"Suspense";case ie:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case $:return(i.displayName||"Context")+".Consumer";case k:return(i._context.displayName||"Context")+".Provider";case z:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case K:return o=i.displayName||null,o!==null?o:de(i.type)||"Memo";case J:o=i._payload,i=i._init;try{return de(i(o))}catch{}}return null}function me(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(o);case 8:return o===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Se(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Pe(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ce(i){var o=Pe(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),p=""+i[o];if(!i.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var w=d.get,T=d.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return w.call(this)},set:function(L){p=""+L,T.call(this,L)}}),Object.defineProperty(i,o,{enumerable:d.enumerable}),{getValue:function(){return p},setValue:function(L){p=""+L},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function De(i){i._valueTracker||(i._valueTracker=Ce(i))}function Ue(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var d=o.getValue(),p="";return i&&(p=Pe(i)?i.checked?"true":"false":i.value),i=p,i!==d?(o.setValue(i),!0):!1}function bt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function kt(i,o){var d=o.checked;return Z({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??i._wrapperState.initialChecked})}function sn(i,o){var d=o.defaultValue==null?"":o.defaultValue,p=o.checked!=null?o.checked:o.defaultChecked;d=Se(o.value!=null?o.value:d),i._wrapperState={initialChecked:p,initialValue:d,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Ft(i,o){o=o.checked,o!=null&&C(i,"checked",o,!1)}function Tt(i,o){Ft(i,o);var d=Se(o.value),p=o.type;if(d!=null)p==="number"?(d===0&&i.value===""||i.value!=d)&&(i.value=""+d):i.value!==""+d&&(i.value=""+d);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?wt(i,o.type,d):o.hasOwnProperty("defaultValue")&&wt(i,o.type,Se(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function St(i,o,d){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var p=o.type;if(!(p!=="submit"&&p!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,d||o===i.value||(i.value=o),i.defaultValue=o}d=i.name,d!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,d!==""&&(i.name=d)}function wt(i,o,d){(o!=="number"||bt(i.ownerDocument)!==i)&&(d==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+d&&(i.defaultValue=""+d))}var En=Array.isArray;function gr(i,o,d,p){if(i=i.options,o){o={};for(var w=0;w<d.length;w++)o["$"+d[w]]=!0;for(d=0;d<i.length;d++)w=o.hasOwnProperty("$"+i[d].value),i[d].selected!==w&&(i[d].selected=w),w&&p&&(i[d].defaultSelected=!0)}else{for(d=""+Se(d),o=null,w=0;w<i.length;w++){if(i[w].value===d){i[w].selected=!0,p&&(i[w].defaultSelected=!0);return}o!==null||i[w].disabled||(o=i[w])}o!==null&&(o.selected=!0)}}function Ys(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return Z({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function vr(i,o){var d=o.value;if(d==null){if(d=o.children,o=o.defaultValue,d!=null){if(o!=null)throw Error(t(92));if(En(d)){if(1<d.length)throw Error(t(93));d=d[0]}o=d}o==null&&(o=""),d=o}i._wrapperState={initialValue:Se(d)}}function vs(i,o){var d=Se(o.value),p=Se(o.defaultValue);d!=null&&(d=""+d,d!==i.value&&(i.value=d),o.defaultValue==null&&i.defaultValue!==d&&(i.defaultValue=d)),p!=null&&(i.defaultValue=""+p)}function Br(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Vt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function It(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Vt(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var tr,nr=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,d,p,w){MSApp.execUnsafeLocalFunction(function(){return i(o,d,p,w)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(tr=tr||document.createElement("div"),tr.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=tr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function ae(i,o){if(o){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=o;return}}i.textContent=o}var Fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Le=["Webkit","ms","Moz","O"];Object.keys(Fe).forEach(function(i){Le.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Fe[o]=Fe[i]})});function pt(i,o,d){return o==null||typeof o=="boolean"||o===""?"":d||typeof o!="number"||o===0||Fe.hasOwnProperty(i)&&Fe[i]?(""+o).trim():o+"px"}function nt(i,o){i=i.style;for(var d in o)if(o.hasOwnProperty(d)){var p=d.indexOf("--")===0,w=pt(d,o[d],p);d==="float"&&(d="cssFloat"),p?i.setProperty(d,w):i[d]=w}}var ht=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ne(i,o){if(o){if(ht[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function ys(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qe=null;function ft(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ct=null,Dt=null,Wt=null;function rr(i){if(i=Jc(i)){if(typeof ct!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Yd(o),ct(i.stateNode,i.type,o))}}function Gn(i){Dt?Wt?Wt.push(i):Wt=[i]:Dt=i}function Ai(){if(Dt){var i=Dt,o=Wt;if(Wt=Dt=null,rr(i),o)for(i=0;i<o.length;i++)rr(o[i])}}function Qt(i,o){return i(o)}function Ac(){}var Xs=!1;function Pc(i,o,d){if(Xs)return i(o,d);Xs=!0;try{return Qt(i,o,d)}finally{Xs=!1,(Dt!==null||Wt!==null)&&(Ac(),Ai())}}function on(i,o){var d=i.stateNode;if(d===null)return null;var p=Yd(d);if(p===null)return null;d=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(t(231,o,typeof d));return d}var Wa=!1;if(u)try{var qr={};Object.defineProperty(qr,"passive",{get:function(){Wa=!0}}),window.addEventListener("test",qr,qr),window.removeEventListener("test",qr,qr)}catch{Wa=!1}function Ho(i,o,d,p,w,T,L,W,H){var se=Array.prototype.slice.call(arguments,3);try{o.apply(d,se)}catch(pe){this.onError(pe)}}var Ko=!1,Ha=null,Wr=!1,Rc=null,Wm={onError:function(i){Ko=!0,Ha=i}};function Ka(i,o,d,p,w,T,L,W,H){Ko=!1,Ha=null,Ho.apply(Wm,arguments)}function _d(i,o,d,p,w,T,L,W,H){if(Ka.apply(this,arguments),Ko){if(Ko){var se=Ha;Ko=!1,Ha=null}else throw Error(t(198));Wr||(Wr=!0,Rc=se)}}function Hr(i){var o=i,d=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(d=o.return),i=o.return;while(i)}return o.tag===3?d:null}function Go(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Kr(i){if(Hr(i)!==i)throw Error(t(188))}function Ed(i){var o=i.alternate;if(!o){if(o=Hr(i),o===null)throw Error(t(188));return o!==i?null:i}for(var d=i,p=o;;){var w=d.return;if(w===null)break;var T=w.alternate;if(T===null){if(p=w.return,p!==null){d=p;continue}break}if(w.child===T.child){for(T=w.child;T;){if(T===d)return Kr(w),i;if(T===p)return Kr(w),o;T=T.sibling}throw Error(t(188))}if(d.return!==p.return)d=w,p=T;else{for(var L=!1,W=w.child;W;){if(W===d){L=!0,d=w,p=T;break}if(W===p){L=!0,p=w,d=T;break}W=W.sibling}if(!L){for(W=T.child;W;){if(W===d){L=!0,d=T,p=w;break}if(W===p){L=!0,p=T,d=w;break}W=W.sibling}if(!L)throw Error(t(189))}}if(d.alternate!==p)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?i:o}function kc(i){return i=Ed(i),i!==null?Ga(i):null}function Ga(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Ga(i);if(o!==null)return o;i=i.sibling}return null}var Qa=e.unstable_scheduleCallback,Dc=e.unstable_cancelCallback,bd=e.unstable_shouldYield,Hm=e.unstable_requestPaint,Ot=e.unstable_now,Sd=e.unstable_getCurrentPriorityLevel,Qo=e.unstable_ImmediatePriority,Pi=e.unstable_UserBlockingPriority,Pr=e.unstable_NormalPriority,Oc=e.unstable_LowPriority,Nd=e.unstable_IdlePriority,Yo=null,yr=null;function Td(i){if(yr&&typeof yr.onCommitFiberRoot=="function")try{yr.onCommitFiberRoot(Yo,i,void 0,(i.current.flags&128)===128)}catch{}}var Qn=Math.clz32?Math.clz32:Id,Lc=Math.log,Cd=Math.LN2;function Id(i){return i>>>=0,i===0?32:31-(Lc(i)/Cd|0)|0}var Ya=64,Xa=4194304;function Ri(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Xo(i,o){var d=i.pendingLanes;if(d===0)return 0;var p=0,w=i.suspendedLanes,T=i.pingedLanes,L=d&268435455;if(L!==0){var W=L&~w;W!==0?p=Ri(W):(T&=L,T!==0&&(p=Ri(T)))}else L=d&~w,L!==0?p=Ri(L):T!==0&&(p=Ri(T));if(p===0)return 0;if(o!==0&&o!==p&&(o&w)===0&&(w=p&-p,T=o&-o,w>=T||w===16&&(T&4194240)!==0))return o;if((p&4)!==0&&(p|=d&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=p;0<o;)d=31-Qn(o),w=1<<d,p|=i[d],o&=~w;return p}function Km(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Js(i,o){for(var d=i.suspendedLanes,p=i.pingedLanes,w=i.expirationTimes,T=i.pendingLanes;0<T;){var L=31-Qn(T),W=1<<L,H=w[L];H===-1?((W&d)===0||(W&p)!==0)&&(w[L]=Km(W,o)):H<=o&&(i.expiredLanes|=W),T&=~W}}function xr(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Jo(){var i=Ya;return Ya<<=1,(Ya&4194240)===0&&(Ya=64),i}function ki(i){for(var o=[],d=0;31>d;d++)o.push(i);return o}function Di(i,o,d){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Qn(o),i[o]=d}function Pt(i,o){var d=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<d;){var w=31-Qn(d),T=1<<w;o[w]=0,p[w]=-1,i[w]=-1,d&=~T}}function Oi(i,o){var d=i.entangledLanes|=o;for(i=i.entanglements;d;){var p=31-Qn(d),w=1<<p;w&o|i[p]&o&&(i[p]|=o),d&=~w}}var mt=0;function Li(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var jd,Ja,Ad,Pd,Rd,Mc=!1,xs=[],jn=null,Gr=null,Qr=null,Mi=new Map,Rr=new Map,ws=[],Gm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kd(i,o){switch(i){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":Mi.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rr.delete(o.pointerId)}}function sr(i,o,d,p,w,T){return i===null||i.nativeEvent!==T?(i={blockedOn:o,domEventName:d,eventSystemFlags:p,nativeEvent:T,targetContainers:[w]},o!==null&&(o=Jc(o),o!==null&&Ja(o)),i):(i.eventSystemFlags|=p,o=i.targetContainers,w!==null&&o.indexOf(w)===-1&&o.push(w),i)}function Qm(i,o,d,p,w){switch(o){case"focusin":return jn=sr(jn,i,o,d,p,w),!0;case"dragenter":return Gr=sr(Gr,i,o,d,p,w),!0;case"mouseover":return Qr=sr(Qr,i,o,d,p,w),!0;case"pointerover":var T=w.pointerId;return Mi.set(T,sr(Mi.get(T)||null,i,o,d,p,w)),!0;case"gotpointercapture":return T=w.pointerId,Rr.set(T,sr(Rr.get(T)||null,i,o,d,p,w)),!0}return!1}function Dd(i){var o=ra(i.target);if(o!==null){var d=Hr(o);if(d!==null){if(o=d.tag,o===13){if(o=Go(d),o!==null){i.blockedOn=o,Rd(i.priority,function(){Ad(d)});return}}else if(o===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Zs(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var d=Za(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(d===null){d=i.nativeEvent;var p=new d.constructor(d.type,d);qe=p,d.target.dispatchEvent(p),qe=null}else return o=Jc(d),o!==null&&Ja(o),i.blockedOn=d,!1;o.shift()}return!0}function Zo(i,o,d){Zs(i)&&d.delete(o)}function Od(){Mc=!1,jn!==null&&Zs(jn)&&(jn=null),Gr!==null&&Zs(Gr)&&(Gr=null),Qr!==null&&Zs(Qr)&&(Qr=null),Mi.forEach(Zo),Rr.forEach(Zo)}function Yr(i,o){i.blockedOn===o&&(i.blockedOn=null,Mc||(Mc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Od)))}function Xr(i){function o(w){return Yr(w,i)}if(0<xs.length){Yr(xs[0],i);for(var d=1;d<xs.length;d++){var p=xs[d];p.blockedOn===i&&(p.blockedOn=null)}}for(jn!==null&&Yr(jn,i),Gr!==null&&Yr(Gr,i),Qr!==null&&Yr(Qr,i),Mi.forEach(o),Rr.forEach(o),d=0;d<ws.length;d++)p=ws[d],p.blockedOn===i&&(p.blockedOn=null);for(;0<ws.length&&(d=ws[0],d.blockedOn===null);)Dd(d),d.blockedOn===null&&ws.shift()}var ei=O.ReactCurrentBatchConfig,Fi=!0;function Ht(i,o,d,p){var w=mt,T=ei.transition;ei.transition=null;try{mt=1,Fc(i,o,d,p)}finally{mt=w,ei.transition=T}}function Ym(i,o,d,p){var w=mt,T=ei.transition;ei.transition=null;try{mt=4,Fc(i,o,d,p)}finally{mt=w,ei.transition=T}}function Fc(i,o,d,p){if(Fi){var w=Za(i,o,d,p);if(w===null)ap(i,o,p,ea,d),kd(i,p);else if(Qm(w,i,o,d,p))p.stopPropagation();else if(kd(i,p),o&4&&-1<Gm.indexOf(i)){for(;w!==null;){var T=Jc(w);if(T!==null&&jd(T),T=Za(i,o,d,p),T===null&&ap(i,o,p,ea,d),T===w)break;w=T}w!==null&&p.stopPropagation()}else ap(i,o,p,null,d)}}var ea=null;function Za(i,o,d,p){if(ea=null,i=ft(p),i=ra(i),i!==null)if(o=Hr(i),o===null)i=null;else if(d=o.tag,d===13){if(i=Go(o),i!==null)return i;i=null}else if(d===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return ea=i,null}function Vc(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sd()){case Qo:return 1;case Pi:return 4;case Pr:case Oc:return 16;case Nd:return 536870912;default:return 16}default:return 16}}var wr=null,el=null,ir=null;function Uc(){if(ir)return ir;var i,o=el,d=o.length,p,w="value"in wr?wr.value:wr.textContent,T=w.length;for(i=0;i<d&&o[i]===w[i];i++);var L=d-i;for(p=1;p<=L&&o[d-p]===w[T-p];p++);return ir=w.slice(i,1<p?1-p:void 0)}function tl(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function _s(){return!0}function $c(){return!1}function An(i){function o(d,p,w,T,L){this._reactName=d,this._targetInst=w,this.type=p,this.nativeEvent=T,this.target=L,this.currentTarget=null;for(var W in i)i.hasOwnProperty(W)&&(d=i[W],this[W]=d?d(T):T[W]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?_s:$c,this.isPropagationStopped=$c,this}return Z(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=_s)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=_s)},persist:function(){},isPersistent:_s}),o}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nl=An(Jr),Es=Z({},Jr,{view:0,detail:0}),Xm=An(Es),rl,ti,Vi,ta=Z({},Es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Vi&&(Vi&&i.type==="mousemove"?(rl=i.screenX-Vi.screenX,ti=i.screenY-Vi.screenY):ti=rl=0,Vi=i),rl)},movementY:function(i){return"movementY"in i?i.movementY:ti}}),sl=An(ta),zc=Z({},ta,{dataTransfer:0}),Ld=An(zc),il=Z({},Es,{relatedTarget:0}),ol=An(il),Md=Z({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),ni=An(Md),Fd=Z({},Jr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Vd=An(Fd),Ud=Z({},Jr,{data:0}),Bc=An(Ud),al={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$d={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zd(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=$d[i])?!!o[i]:!1}function bs(){return zd}var f=Z({},Es,{key:function(i){if(i.key){var o=al[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=tl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Yn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bs,charCode:function(i){return i.type==="keypress"?tl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?tl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),N=An(f),j=Z({},ta,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),F=An(j),ee=Z({},Es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bs}),oe=An(ee),_e=Z({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ct=An(_e),vn=Z({},ta,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),gt=An(vn),bn=[9,13,27,32],cn=u&&"CompositionEvent"in window,kr=null;u&&"documentMode"in document&&(kr=document.documentMode);var _r=u&&"TextEvent"in window&&!kr,na=u&&(!cn||kr&&8<kr&&11>=kr),ll=" ",Wx=!1;function Hx(i,o){switch(i){case"keyup":return bn.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kx(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var cl=!1;function iA(i,o){switch(i){case"compositionend":return Kx(o);case"keypress":return o.which!==32?null:(Wx=!0,ll);case"textInput":return i=o.data,i===ll&&Wx?null:i;default:return null}}function oA(i,o){if(cl)return i==="compositionend"||!cn&&Hx(i,o)?(i=Uc(),ir=el=wr=null,cl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return na&&o.locale!=="ko"?null:o.data;default:return null}}var aA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gx(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!aA[i.type]:o==="textarea"}function Qx(i,o,d,p){Gn(p),o=Kd(o,"onChange"),0<o.length&&(d=new nl("onChange","change",null,d,p),i.push({event:d,listeners:o}))}var qc=null,Wc=null;function lA(i){fw(i,0)}function Bd(i){var o=ml(i);if(Ue(o))return i}function cA(i,o){if(i==="change")return o}var Yx=!1;if(u){var Jm;if(u){var Zm="oninput"in document;if(!Zm){var Xx=document.createElement("div");Xx.setAttribute("oninput","return;"),Zm=typeof Xx.oninput=="function"}Jm=Zm}else Jm=!1;Yx=Jm&&(!document.documentMode||9<document.documentMode)}function Jx(){qc&&(qc.detachEvent("onpropertychange",Zx),Wc=qc=null)}function Zx(i){if(i.propertyName==="value"&&Bd(Wc)){var o=[];Qx(o,Wc,i,ft(i)),Pc(lA,o)}}function uA(i,o,d){i==="focusin"?(Jx(),qc=o,Wc=d,qc.attachEvent("onpropertychange",Zx)):i==="focusout"&&Jx()}function dA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Bd(Wc)}function hA(i,o){if(i==="click")return Bd(o)}function fA(i,o){if(i==="input"||i==="change")return Bd(o)}function mA(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Zr=typeof Object.is=="function"?Object.is:mA;function Hc(i,o){if(Zr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var d=Object.keys(i),p=Object.keys(o);if(d.length!==p.length)return!1;for(p=0;p<d.length;p++){var w=d[p];if(!h.call(o,w)||!Zr(i[w],o[w]))return!1}return!0}function ew(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function tw(i,o){var d=ew(i);i=0;for(var p;d;){if(d.nodeType===3){if(p=i+d.textContent.length,i<=o&&p>=o)return{node:d,offset:o-i};i=p}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=ew(d)}}function nw(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?nw(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function rw(){for(var i=window,o=bt();o instanceof i.HTMLIFrameElement;){try{var d=typeof o.contentWindow.location.href=="string"}catch{d=!1}if(d)i=o.contentWindow;else break;o=bt(i.document)}return o}function ep(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function pA(i){var o=rw(),d=i.focusedElem,p=i.selectionRange;if(o!==d&&d&&d.ownerDocument&&nw(d.ownerDocument.documentElement,d)){if(p!==null&&ep(d)){if(o=p.start,i=p.end,i===void 0&&(i=o),"selectionStart"in d)d.selectionStart=o,d.selectionEnd=Math.min(i,d.value.length);else if(i=(o=d.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var w=d.textContent.length,T=Math.min(p.start,w);p=p.end===void 0?T:Math.min(p.end,w),!i.extend&&T>p&&(w=p,p=T,T=w),w=tw(d,T);var L=tw(d,p);w&&L&&(i.rangeCount!==1||i.anchorNode!==w.node||i.anchorOffset!==w.offset||i.focusNode!==L.node||i.focusOffset!==L.offset)&&(o=o.createRange(),o.setStart(w.node,w.offset),i.removeAllRanges(),T>p?(i.addRange(o),i.extend(L.node,L.offset)):(o.setEnd(L.node,L.offset),i.addRange(o)))}}for(o=[],i=d;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<o.length;d++)i=o[d],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var gA=u&&"documentMode"in document&&11>=document.documentMode,ul=null,tp=null,Kc=null,np=!1;function sw(i,o,d){var p=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;np||ul==null||ul!==bt(p)||(p=ul,"selectionStart"in p&&ep(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Kc&&Hc(Kc,p)||(Kc=p,p=Kd(tp,"onSelect"),0<p.length&&(o=new nl("onSelect","select",null,o,d),i.push({event:o,listeners:p}),o.target=ul)))}function qd(i,o){var d={};return d[i.toLowerCase()]=o.toLowerCase(),d["Webkit"+i]="webkit"+o,d["Moz"+i]="moz"+o,d}var dl={animationend:qd("Animation","AnimationEnd"),animationiteration:qd("Animation","AnimationIteration"),animationstart:qd("Animation","AnimationStart"),transitionend:qd("Transition","TransitionEnd")},rp={},iw={};u&&(iw=document.createElement("div").style,"AnimationEvent"in window||(delete dl.animationend.animation,delete dl.animationiteration.animation,delete dl.animationstart.animation),"TransitionEvent"in window||delete dl.transitionend.transition);function Wd(i){if(rp[i])return rp[i];if(!dl[i])return i;var o=dl[i],d;for(d in o)if(o.hasOwnProperty(d)&&d in iw)return rp[i]=o[d];return i}var ow=Wd("animationend"),aw=Wd("animationiteration"),lw=Wd("animationstart"),cw=Wd("transitionend"),uw=new Map,dw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ui(i,o){uw.set(i,o),a(o,[i])}for(var sp=0;sp<dw.length;sp++){var ip=dw[sp],vA=ip.toLowerCase(),yA=ip[0].toUpperCase()+ip.slice(1);Ui(vA,"on"+yA)}Ui(ow,"onAnimationEnd"),Ui(aw,"onAnimationIteration"),Ui(lw,"onAnimationStart"),Ui("dblclick","onDoubleClick"),Ui("focusin","onFocus"),Ui("focusout","onBlur"),Ui(cw,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gc));function hw(i,o,d){var p=i.type||"unknown-event";i.currentTarget=d,_d(p,o,void 0,i),i.currentTarget=null}function fw(i,o){o=(o&4)!==0;for(var d=0;d<i.length;d++){var p=i[d],w=p.event;p=p.listeners;e:{var T=void 0;if(o)for(var L=p.length-1;0<=L;L--){var W=p[L],H=W.instance,se=W.currentTarget;if(W=W.listener,H!==T&&w.isPropagationStopped())break e;hw(w,W,se),T=H}else for(L=0;L<p.length;L++){if(W=p[L],H=W.instance,se=W.currentTarget,W=W.listener,H!==T&&w.isPropagationStopped())break e;hw(w,W,se),T=H}}}if(Wr)throw i=Rc,Wr=!1,Rc=null,i}function Ut(i,o){var d=o[fp];d===void 0&&(d=o[fp]=new Set);var p=i+"__bubble";d.has(p)||(mw(o,i,2,!1),d.add(p))}function op(i,o,d){var p=0;o&&(p|=4),mw(d,i,p,o)}var Hd="_reactListening"+Math.random().toString(36).slice(2);function Qc(i){if(!i[Hd]){i[Hd]=!0,r.forEach(function(d){d!=="selectionchange"&&(xA.has(d)||op(d,!1,i),op(d,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Hd]||(o[Hd]=!0,op("selectionchange",!1,o))}}function mw(i,o,d,p){switch(Vc(o)){case 1:var w=Ht;break;case 4:w=Ym;break;default:w=Fc}d=w.bind(null,o,d,i),w=void 0,!Wa||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(w=!0),p?w!==void 0?i.addEventListener(o,d,{capture:!0,passive:w}):i.addEventListener(o,d,!0):w!==void 0?i.addEventListener(o,d,{passive:w}):i.addEventListener(o,d,!1)}function ap(i,o,d,p,w){var T=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var L=p.tag;if(L===3||L===4){var W=p.stateNode.containerInfo;if(W===w||W.nodeType===8&&W.parentNode===w)break;if(L===4)for(L=p.return;L!==null;){var H=L.tag;if((H===3||H===4)&&(H=L.stateNode.containerInfo,H===w||H.nodeType===8&&H.parentNode===w))return;L=L.return}for(;W!==null;){if(L=ra(W),L===null)return;if(H=L.tag,H===5||H===6){p=T=L;continue e}W=W.parentNode}}p=p.return}Pc(function(){var se=T,pe=ft(d),ge=[];e:{var fe=uw.get(i);if(fe!==void 0){var Ie=nl,Oe=i;switch(i){case"keypress":if(tl(d)===0)break e;case"keydown":case"keyup":Ie=N;break;case"focusin":Oe="focus",Ie=ol;break;case"focusout":Oe="blur",Ie=ol;break;case"beforeblur":case"afterblur":Ie=ol;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=sl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=Ld;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=oe;break;case ow:case aw:case lw:Ie=ni;break;case cw:Ie=Ct;break;case"scroll":Ie=Xm;break;case"wheel":Ie=gt;break;case"copy":case"cut":case"paste":Ie=Vd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=F}var Me=(o&4)!==0,an=!Me&&i==="scroll",te=Me?fe!==null?fe+"Capture":null:fe;Me=[];for(var G=se,ne;G!==null;){ne=G;var ye=ne.stateNode;if(ne.tag===5&&ye!==null&&(ne=ye,te!==null&&(ye=on(G,te),ye!=null&&Me.push(Yc(G,ye,ne)))),an)break;G=G.return}0<Me.length&&(fe=new Ie(fe,Oe,null,d,pe),ge.push({event:fe,listeners:Me}))}}if((o&7)===0){e:{if(fe=i==="mouseover"||i==="pointerover",Ie=i==="mouseout"||i==="pointerout",fe&&d!==qe&&(Oe=d.relatedTarget||d.fromElement)&&(ra(Oe)||Oe[ri]))break e;if((Ie||fe)&&(fe=pe.window===pe?pe:(fe=pe.ownerDocument)?fe.defaultView||fe.parentWindow:window,Ie?(Oe=d.relatedTarget||d.toElement,Ie=se,Oe=Oe?ra(Oe):null,Oe!==null&&(an=Hr(Oe),Oe!==an||Oe.tag!==5&&Oe.tag!==6)&&(Oe=null)):(Ie=null,Oe=se),Ie!==Oe)){if(Me=sl,ye="onMouseLeave",te="onMouseEnter",G="mouse",(i==="pointerout"||i==="pointerover")&&(Me=F,ye="onPointerLeave",te="onPointerEnter",G="pointer"),an=Ie==null?fe:ml(Ie),ne=Oe==null?fe:ml(Oe),fe=new Me(ye,G+"leave",Ie,d,pe),fe.target=an,fe.relatedTarget=ne,ye=null,ra(pe)===se&&(Me=new Me(te,G+"enter",Oe,d,pe),Me.target=ne,Me.relatedTarget=an,ye=Me),an=ye,Ie&&Oe)t:{for(Me=Ie,te=Oe,G=0,ne=Me;ne;ne=hl(ne))G++;for(ne=0,ye=te;ye;ye=hl(ye))ne++;for(;0<G-ne;)Me=hl(Me),G--;for(;0<ne-G;)te=hl(te),ne--;for(;G--;){if(Me===te||te!==null&&Me===te.alternate)break t;Me=hl(Me),te=hl(te)}Me=null}else Me=null;Ie!==null&&pw(ge,fe,Ie,Me,!1),Oe!==null&&an!==null&&pw(ge,an,Oe,Me,!0)}}e:{if(fe=se?ml(se):window,Ie=fe.nodeName&&fe.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&fe.type==="file")var Ve=cA;else if(Gx(fe))if(Yx)Ve=fA;else{Ve=dA;var We=uA}else(Ie=fe.nodeName)&&Ie.toLowerCase()==="input"&&(fe.type==="checkbox"||fe.type==="radio")&&(Ve=hA);if(Ve&&(Ve=Ve(i,se))){Qx(ge,Ve,d,pe);break e}We&&We(i,fe,se),i==="focusout"&&(We=fe._wrapperState)&&We.controlled&&fe.type==="number"&&wt(fe,"number",fe.value)}switch(We=se?ml(se):window,i){case"focusin":(Gx(We)||We.contentEditable==="true")&&(ul=We,tp=se,Kc=null);break;case"focusout":Kc=tp=ul=null;break;case"mousedown":np=!0;break;case"contextmenu":case"mouseup":case"dragend":np=!1,sw(ge,d,pe);break;case"selectionchange":if(gA)break;case"keydown":case"keyup":sw(ge,d,pe)}var He;if(cn)e:{switch(i){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else cl?Hx(i,d)&&(Ze="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(Ze="onCompositionStart");Ze&&(na&&d.locale!=="ko"&&(cl||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&cl&&(He=Uc()):(wr=pe,el="value"in wr?wr.value:wr.textContent,cl=!0)),We=Kd(se,Ze),0<We.length&&(Ze=new Bc(Ze,i,null,d,pe),ge.push({event:Ze,listeners:We}),He?Ze.data=He:(He=Kx(d),He!==null&&(Ze.data=He)))),(He=_r?iA(i,d):oA(i,d))&&(se=Kd(se,"onBeforeInput"),0<se.length&&(pe=new Bc("onBeforeInput","beforeinput",null,d,pe),ge.push({event:pe,listeners:se}),pe.data=He))}fw(ge,o)})}function Yc(i,o,d){return{instance:i,listener:o,currentTarget:d}}function Kd(i,o){for(var d=o+"Capture",p=[];i!==null;){var w=i,T=w.stateNode;w.tag===5&&T!==null&&(w=T,T=on(i,d),T!=null&&p.unshift(Yc(i,T,w)),T=on(i,o),T!=null&&p.push(Yc(i,T,w))),i=i.return}return p}function hl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function pw(i,o,d,p,w){for(var T=o._reactName,L=[];d!==null&&d!==p;){var W=d,H=W.alternate,se=W.stateNode;if(H!==null&&H===p)break;W.tag===5&&se!==null&&(W=se,w?(H=on(d,T),H!=null&&L.unshift(Yc(d,H,W))):w||(H=on(d,T),H!=null&&L.push(Yc(d,H,W)))),d=d.return}L.length!==0&&i.push({event:o,listeners:L})}var wA=/\r\n?/g,_A=/\u0000|\uFFFD/g;function gw(i){return(typeof i=="string"?i:""+i).replace(wA,`
`).replace(_A,"")}function Gd(i,o,d){if(o=gw(o),gw(i)!==o&&d)throw Error(t(425))}function Qd(){}var lp=null,cp=null;function up(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var dp=typeof setTimeout=="function"?setTimeout:void 0,EA=typeof clearTimeout=="function"?clearTimeout:void 0,vw=typeof Promise=="function"?Promise:void 0,bA=typeof queueMicrotask=="function"?queueMicrotask:typeof vw<"u"?function(i){return vw.resolve(null).then(i).catch(SA)}:dp;function SA(i){setTimeout(function(){throw i})}function hp(i,o){var d=o,p=0;do{var w=d.nextSibling;if(i.removeChild(d),w&&w.nodeType===8)if(d=w.data,d==="/$"){if(p===0){i.removeChild(w),Xr(o);return}p--}else d!=="$"&&d!=="$?"&&d!=="$!"||p++;d=w}while(d);Xr(o)}function $i(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function yw(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(o===0)return i;o--}else d==="/$"&&o++}i=i.previousSibling}return null}var fl=Math.random().toString(36).slice(2),Ss="__reactFiber$"+fl,Xc="__reactProps$"+fl,ri="__reactContainer$"+fl,fp="__reactEvents$"+fl,NA="__reactListeners$"+fl,TA="__reactHandles$"+fl;function ra(i){var o=i[Ss];if(o)return o;for(var d=i.parentNode;d;){if(o=d[ri]||d[Ss]){if(d=o.alternate,o.child!==null||d!==null&&d.child!==null)for(i=yw(i);i!==null;){if(d=i[Ss])return d;i=yw(i)}return o}i=d,d=i.parentNode}return null}function Jc(i){return i=i[Ss]||i[ri],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ml(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Yd(i){return i[Xc]||null}var mp=[],pl=-1;function zi(i){return{current:i}}function $t(i){0>pl||(i.current=mp[pl],mp[pl]=null,pl--)}function Lt(i,o){pl++,mp[pl]=i.current,i.current=o}var Bi={},Mn=zi(Bi),or=zi(!1),sa=Bi;function gl(i,o){var d=i.type.contextTypes;if(!d)return Bi;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===o)return p.__reactInternalMemoizedMaskedChildContext;var w={},T;for(T in d)w[T]=o[T];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=w),w}function ar(i){return i=i.childContextTypes,i!=null}function Xd(){$t(or),$t(Mn)}function xw(i,o,d){if(Mn.current!==Bi)throw Error(t(168));Lt(Mn,o),Lt(or,d)}function ww(i,o,d){var p=i.stateNode;if(o=o.childContextTypes,typeof p.getChildContext!="function")return d;p=p.getChildContext();for(var w in p)if(!(w in o))throw Error(t(108,me(i)||"Unknown",w));return Z({},d,p)}function Jd(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Bi,sa=Mn.current,Lt(Mn,i),Lt(or,or.current),!0}function _w(i,o,d){var p=i.stateNode;if(!p)throw Error(t(169));d?(i=ww(i,o,sa),p.__reactInternalMemoizedMergedChildContext=i,$t(or),$t(Mn),Lt(Mn,i)):$t(or),Lt(or,d)}var si=null,Zd=!1,pp=!1;function Ew(i){si===null?si=[i]:si.push(i)}function CA(i){Zd=!0,Ew(i)}function qi(){if(!pp&&si!==null){pp=!0;var i=0,o=mt;try{var d=si;for(mt=1;i<d.length;i++){var p=d[i];do p=p(!0);while(p!==null)}si=null,Zd=!1}catch(w){throw si!==null&&(si=si.slice(i+1)),Qa(Qo,qi),w}finally{mt=o,pp=!1}}return null}var vl=[],yl=0,eh=null,th=0,Dr=[],Or=0,ia=null,ii=1,oi="";function oa(i,o){vl[yl++]=th,vl[yl++]=eh,eh=i,th=o}function bw(i,o,d){Dr[Or++]=ii,Dr[Or++]=oi,Dr[Or++]=ia,ia=i;var p=ii;i=oi;var w=32-Qn(p)-1;p&=~(1<<w),d+=1;var T=32-Qn(o)+w;if(30<T){var L=w-w%5;T=(p&(1<<L)-1).toString(32),p>>=L,w-=L,ii=1<<32-Qn(o)+w|d<<w|p,oi=T+i}else ii=1<<T|d<<w|p,oi=i}function gp(i){i.return!==null&&(oa(i,1),bw(i,1,0))}function vp(i){for(;i===eh;)eh=vl[--yl],vl[yl]=null,th=vl[--yl],vl[yl]=null;for(;i===ia;)ia=Dr[--Or],Dr[Or]=null,oi=Dr[--Or],Dr[Or]=null,ii=Dr[--Or],Dr[Or]=null}var Er=null,br=null,Kt=!1,es=null;function Sw(i,o){var d=Vr(5,null,null,0);d.elementType="DELETED",d.stateNode=o,d.return=i,o=i.deletions,o===null?(i.deletions=[d],i.flags|=16):o.push(d)}function Nw(i,o){switch(i.tag){case 5:var d=i.type;return o=o.nodeType!==1||d.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Er=i,br=$i(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Er=i,br=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(d=ia!==null?{id:ii,overflow:oi}:null,i.memoizedState={dehydrated:o,treeContext:d,retryLane:1073741824},d=Vr(18,null,null,0),d.stateNode=o,d.return=i,i.child=d,Er=i,br=null,!0):!1;default:return!1}}function yp(i){return(i.mode&1)!==0&&(i.flags&128)===0}function xp(i){if(Kt){var o=br;if(o){var d=o;if(!Nw(i,o)){if(yp(i))throw Error(t(418));o=$i(d.nextSibling);var p=Er;o&&Nw(i,o)?Sw(p,d):(i.flags=i.flags&-4097|2,Kt=!1,Er=i)}}else{if(yp(i))throw Error(t(418));i.flags=i.flags&-4097|2,Kt=!1,Er=i}}}function Tw(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Er=i}function nh(i){if(i!==Er)return!1;if(!Kt)return Tw(i),Kt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!up(i.type,i.memoizedProps)),o&&(o=br)){if(yp(i))throw Cw(),Error(t(418));for(;o;)Sw(i,o),o=$i(o.nextSibling)}if(Tw(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"){if(o===0){br=$i(i.nextSibling);break e}o--}else d!=="$"&&d!=="$!"&&d!=="$?"||o++}i=i.nextSibling}br=null}}else br=Er?$i(i.stateNode.nextSibling):null;return!0}function Cw(){for(var i=br;i;)i=$i(i.nextSibling)}function xl(){br=Er=null,Kt=!1}function wp(i){es===null?es=[i]:es.push(i)}var IA=O.ReactCurrentBatchConfig;function Zc(i,o,d){if(i=d.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var p=d.stateNode}if(!p)throw Error(t(147,i));var w=p,T=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===T?o.ref:(o=function(L){var W=w.refs;L===null?delete W[T]:W[T]=L},o._stringRef=T,o)}if(typeof i!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,i))}return i}function rh(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Iw(i){var o=i._init;return o(i._payload)}function jw(i){function o(te,G){if(i){var ne=te.deletions;ne===null?(te.deletions=[G],te.flags|=16):ne.push(G)}}function d(te,G){if(!i)return null;for(;G!==null;)o(te,G),G=G.sibling;return null}function p(te,G){for(te=new Map;G!==null;)G.key!==null?te.set(G.key,G):te.set(G.index,G),G=G.sibling;return te}function w(te,G){return te=Ji(te,G),te.index=0,te.sibling=null,te}function T(te,G,ne){return te.index=ne,i?(ne=te.alternate,ne!==null?(ne=ne.index,ne<G?(te.flags|=2,G):ne):(te.flags|=2,G)):(te.flags|=1048576,G)}function L(te){return i&&te.alternate===null&&(te.flags|=2),te}function W(te,G,ne,ye){return G===null||G.tag!==6?(G=dg(ne,te.mode,ye),G.return=te,G):(G=w(G,ne),G.return=te,G)}function H(te,G,ne,ye){var Ve=ne.type;return Ve===P?pe(te,G,ne.props.children,ye,ne.key):G!==null&&(G.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===J&&Iw(Ve)===G.type)?(ye=w(G,ne.props),ye.ref=Zc(te,G,ne),ye.return=te,ye):(ye=Ch(ne.type,ne.key,ne.props,null,te.mode,ye),ye.ref=Zc(te,G,ne),ye.return=te,ye)}function se(te,G,ne,ye){return G===null||G.tag!==4||G.stateNode.containerInfo!==ne.containerInfo||G.stateNode.implementation!==ne.implementation?(G=hg(ne,te.mode,ye),G.return=te,G):(G=w(G,ne.children||[]),G.return=te,G)}function pe(te,G,ne,ye,Ve){return G===null||G.tag!==7?(G=ma(ne,te.mode,ye,Ve),G.return=te,G):(G=w(G,ne),G.return=te,G)}function ge(te,G,ne){if(typeof G=="string"&&G!==""||typeof G=="number")return G=dg(""+G,te.mode,ne),G.return=te,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case V:return ne=Ch(G.type,G.key,G.props,null,te.mode,ne),ne.ref=Zc(te,null,G),ne.return=te,ne;case B:return G=hg(G,te.mode,ne),G.return=te,G;case J:var ye=G._init;return ge(te,ye(G._payload),ne)}if(En(G)||Q(G))return G=ma(G,te.mode,ne,null),G.return=te,G;rh(te,G)}return null}function fe(te,G,ne,ye){var Ve=G!==null?G.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number")return Ve!==null?null:W(te,G,""+ne,ye);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case V:return ne.key===Ve?H(te,G,ne,ye):null;case B:return ne.key===Ve?se(te,G,ne,ye):null;case J:return Ve=ne._init,fe(te,G,Ve(ne._payload),ye)}if(En(ne)||Q(ne))return Ve!==null?null:pe(te,G,ne,ye,null);rh(te,ne)}return null}function Ie(te,G,ne,ye,Ve){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return te=te.get(ne)||null,W(G,te,""+ye,Ve);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case V:return te=te.get(ye.key===null?ne:ye.key)||null,H(G,te,ye,Ve);case B:return te=te.get(ye.key===null?ne:ye.key)||null,se(G,te,ye,Ve);case J:var We=ye._init;return Ie(te,G,ne,We(ye._payload),Ve)}if(En(ye)||Q(ye))return te=te.get(ne)||null,pe(G,te,ye,Ve,null);rh(G,ye)}return null}function Oe(te,G,ne,ye){for(var Ve=null,We=null,He=G,Ze=G=0,Tn=null;He!==null&&Ze<ne.length;Ze++){He.index>Ze?(Tn=He,He=null):Tn=He.sibling;var _t=fe(te,He,ne[Ze],ye);if(_t===null){He===null&&(He=Tn);break}i&&He&&_t.alternate===null&&o(te,He),G=T(_t,G,Ze),We===null?Ve=_t:We.sibling=_t,We=_t,He=Tn}if(Ze===ne.length)return d(te,He),Kt&&oa(te,Ze),Ve;if(He===null){for(;Ze<ne.length;Ze++)He=ge(te,ne[Ze],ye),He!==null&&(G=T(He,G,Ze),We===null?Ve=He:We.sibling=He,We=He);return Kt&&oa(te,Ze),Ve}for(He=p(te,He);Ze<ne.length;Ze++)Tn=Ie(He,te,Ze,ne[Ze],ye),Tn!==null&&(i&&Tn.alternate!==null&&He.delete(Tn.key===null?Ze:Tn.key),G=T(Tn,G,Ze),We===null?Ve=Tn:We.sibling=Tn,We=Tn);return i&&He.forEach(function(Zi){return o(te,Zi)}),Kt&&oa(te,Ze),Ve}function Me(te,G,ne,ye){var Ve=Q(ne);if(typeof Ve!="function")throw Error(t(150));if(ne=Ve.call(ne),ne==null)throw Error(t(151));for(var We=Ve=null,He=G,Ze=G=0,Tn=null,_t=ne.next();He!==null&&!_t.done;Ze++,_t=ne.next()){He.index>Ze?(Tn=He,He=null):Tn=He.sibling;var Zi=fe(te,He,_t.value,ye);if(Zi===null){He===null&&(He=Tn);break}i&&He&&Zi.alternate===null&&o(te,He),G=T(Zi,G,Ze),We===null?Ve=Zi:We.sibling=Zi,We=Zi,He=Tn}if(_t.done)return d(te,He),Kt&&oa(te,Ze),Ve;if(He===null){for(;!_t.done;Ze++,_t=ne.next())_t=ge(te,_t.value,ye),_t!==null&&(G=T(_t,G,Ze),We===null?Ve=_t:We.sibling=_t,We=_t);return Kt&&oa(te,Ze),Ve}for(He=p(te,He);!_t.done;Ze++,_t=ne.next())_t=Ie(He,te,Ze,_t.value,ye),_t!==null&&(i&&_t.alternate!==null&&He.delete(_t.key===null?Ze:_t.key),G=T(_t,G,Ze),We===null?Ve=_t:We.sibling=_t,We=_t);return i&&He.forEach(function(aP){return o(te,aP)}),Kt&&oa(te,Ze),Ve}function an(te,G,ne,ye){if(typeof ne=="object"&&ne!==null&&ne.type===P&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case V:e:{for(var Ve=ne.key,We=G;We!==null;){if(We.key===Ve){if(Ve=ne.type,Ve===P){if(We.tag===7){d(te,We.sibling),G=w(We,ne.props.children),G.return=te,te=G;break e}}else if(We.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===J&&Iw(Ve)===We.type){d(te,We.sibling),G=w(We,ne.props),G.ref=Zc(te,We,ne),G.return=te,te=G;break e}d(te,We);break}else o(te,We);We=We.sibling}ne.type===P?(G=ma(ne.props.children,te.mode,ye,ne.key),G.return=te,te=G):(ye=Ch(ne.type,ne.key,ne.props,null,te.mode,ye),ye.ref=Zc(te,G,ne),ye.return=te,te=ye)}return L(te);case B:e:{for(We=ne.key;G!==null;){if(G.key===We)if(G.tag===4&&G.stateNode.containerInfo===ne.containerInfo&&G.stateNode.implementation===ne.implementation){d(te,G.sibling),G=w(G,ne.children||[]),G.return=te,te=G;break e}else{d(te,G);break}else o(te,G);G=G.sibling}G=hg(ne,te.mode,ye),G.return=te,te=G}return L(te);case J:return We=ne._init,an(te,G,We(ne._payload),ye)}if(En(ne))return Oe(te,G,ne,ye);if(Q(ne))return Me(te,G,ne,ye);rh(te,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"?(ne=""+ne,G!==null&&G.tag===6?(d(te,G.sibling),G=w(G,ne),G.return=te,te=G):(d(te,G),G=dg(ne,te.mode,ye),G.return=te,te=G),L(te)):d(te,G)}return an}var wl=jw(!0),Aw=jw(!1),sh=zi(null),ih=null,_l=null,_p=null;function Ep(){_p=_l=ih=null}function bp(i){var o=sh.current;$t(sh),i._currentValue=o}function Sp(i,o,d){for(;i!==null;){var p=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),i===d)break;i=i.return}}function El(i,o){ih=i,_p=_l=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(lr=!0),i.firstContext=null)}function Lr(i){var o=i._currentValue;if(_p!==i)if(i={context:i,memoizedValue:o,next:null},_l===null){if(ih===null)throw Error(t(308));_l=i,ih.dependencies={lanes:0,firstContext:i}}else _l=_l.next=i;return o}var aa=null;function Np(i){aa===null?aa=[i]:aa.push(i)}function Pw(i,o,d,p){var w=o.interleaved;return w===null?(d.next=d,Np(o)):(d.next=w.next,w.next=d),o.interleaved=d,ai(i,p)}function ai(i,o){i.lanes|=o;var d=i.alternate;for(d!==null&&(d.lanes|=o),d=i,i=i.return;i!==null;)i.childLanes|=o,d=i.alternate,d!==null&&(d.childLanes|=o),d=i,i=i.return;return d.tag===3?d.stateNode:null}var Wi=!1;function Tp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rw(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function li(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Hi(i,o,d){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(yt&2)!==0){var w=p.pending;return w===null?o.next=o:(o.next=w.next,w.next=o),p.pending=o,ai(i,d)}return w=p.interleaved,w===null?(o.next=o,Np(p)):(o.next=w.next,w.next=o),p.interleaved=o,ai(i,d)}function oh(i,o,d){if(o=o.updateQueue,o!==null&&(o=o.shared,(d&4194240)!==0)){var p=o.lanes;p&=i.pendingLanes,d|=p,o.lanes=d,Oi(i,d)}}function kw(i,o){var d=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,d===p)){var w=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var L={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};T===null?w=T=L:T=T.next=L,d=d.next}while(d!==null);T===null?w=T=o:T=T.next=o}else w=T=o;d={baseState:p.baseState,firstBaseUpdate:w,lastBaseUpdate:T,shared:p.shared,effects:p.effects},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=o:i.next=o,d.lastBaseUpdate=o}function ah(i,o,d,p){var w=i.updateQueue;Wi=!1;var T=w.firstBaseUpdate,L=w.lastBaseUpdate,W=w.shared.pending;if(W!==null){w.shared.pending=null;var H=W,se=H.next;H.next=null,L===null?T=se:L.next=se,L=H;var pe=i.alternate;pe!==null&&(pe=pe.updateQueue,W=pe.lastBaseUpdate,W!==L&&(W===null?pe.firstBaseUpdate=se:W.next=se,pe.lastBaseUpdate=H))}if(T!==null){var ge=w.baseState;L=0,pe=se=H=null,W=T;do{var fe=W.lane,Ie=W.eventTime;if((p&fe)===fe){pe!==null&&(pe=pe.next={eventTime:Ie,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var Oe=i,Me=W;switch(fe=o,Ie=d,Me.tag){case 1:if(Oe=Me.payload,typeof Oe=="function"){ge=Oe.call(Ie,ge,fe);break e}ge=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Me.payload,fe=typeof Oe=="function"?Oe.call(Ie,ge,fe):Oe,fe==null)break e;ge=Z({},ge,fe);break e;case 2:Wi=!0}}W.callback!==null&&W.lane!==0&&(i.flags|=64,fe=w.effects,fe===null?w.effects=[W]:fe.push(W))}else Ie={eventTime:Ie,lane:fe,tag:W.tag,payload:W.payload,callback:W.callback,next:null},pe===null?(se=pe=Ie,H=ge):pe=pe.next=Ie,L|=fe;if(W=W.next,W===null){if(W=w.shared.pending,W===null)break;fe=W,W=fe.next,fe.next=null,w.lastBaseUpdate=fe,w.shared.pending=null}}while(!0);if(pe===null&&(H=ge),w.baseState=H,w.firstBaseUpdate=se,w.lastBaseUpdate=pe,o=w.shared.interleaved,o!==null){w=o;do L|=w.lane,w=w.next;while(w!==o)}else T===null&&(w.shared.lanes=0);ua|=L,i.lanes=L,i.memoizedState=ge}}function Dw(i,o,d){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var p=i[o],w=p.callback;if(w!==null){if(p.callback=null,p=d,typeof w!="function")throw Error(t(191,w));w.call(p)}}}var eu={},Ns=zi(eu),tu=zi(eu),nu=zi(eu);function la(i){if(i===eu)throw Error(t(174));return i}function Cp(i,o){switch(Lt(nu,o),Lt(tu,i),Lt(Ns,eu),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:It(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=It(o,i)}$t(Ns),Lt(Ns,o)}function bl(){$t(Ns),$t(tu),$t(nu)}function Ow(i){la(nu.current);var o=la(Ns.current),d=It(o,i.type);o!==d&&(Lt(tu,i),Lt(Ns,d))}function Ip(i){tu.current===i&&($t(Ns),$t(tu))}var Yt=zi(0);function lh(i){for(var o=i;o!==null;){if(o.tag===13){var d=o.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var jp=[];function Ap(){for(var i=0;i<jp.length;i++)jp[i]._workInProgressVersionPrimary=null;jp.length=0}var ch=O.ReactCurrentDispatcher,Pp=O.ReactCurrentBatchConfig,ca=0,Xt=null,yn=null,Sn=null,uh=!1,ru=!1,su=0,jA=0;function Fn(){throw Error(t(321))}function Rp(i,o){if(o===null)return!1;for(var d=0;d<o.length&&d<i.length;d++)if(!Zr(i[d],o[d]))return!1;return!0}function kp(i,o,d,p,w,T){if(ca=T,Xt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,ch.current=i===null||i.memoizedState===null?kA:DA,i=d(p,w),ru){T=0;do{if(ru=!1,su=0,25<=T)throw Error(t(301));T+=1,Sn=yn=null,o.updateQueue=null,ch.current=OA,i=d(p,w)}while(ru)}if(ch.current=fh,o=yn!==null&&yn.next!==null,ca=0,Sn=yn=Xt=null,uh=!1,o)throw Error(t(300));return i}function Dp(){var i=su!==0;return su=0,i}function Ts(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?Xt.memoizedState=Sn=i:Sn=Sn.next=i,Sn}function Mr(){if(yn===null){var i=Xt.alternate;i=i!==null?i.memoizedState:null}else i=yn.next;var o=Sn===null?Xt.memoizedState:Sn.next;if(o!==null)Sn=o,yn=i;else{if(i===null)throw Error(t(310));yn=i,i={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},Sn===null?Xt.memoizedState=Sn=i:Sn=Sn.next=i}return Sn}function iu(i,o){return typeof o=="function"?o(i):o}function Op(i){var o=Mr(),d=o.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=i;var p=yn,w=p.baseQueue,T=d.pending;if(T!==null){if(w!==null){var L=w.next;w.next=T.next,T.next=L}p.baseQueue=w=T,d.pending=null}if(w!==null){T=w.next,p=p.baseState;var W=L=null,H=null,se=T;do{var pe=se.lane;if((ca&pe)===pe)H!==null&&(H=H.next={lane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),p=se.hasEagerState?se.eagerState:i(p,se.action);else{var ge={lane:pe,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null};H===null?(W=H=ge,L=p):H=H.next=ge,Xt.lanes|=pe,ua|=pe}se=se.next}while(se!==null&&se!==T);H===null?L=p:H.next=W,Zr(p,o.memoizedState)||(lr=!0),o.memoizedState=p,o.baseState=L,o.baseQueue=H,d.lastRenderedState=p}if(i=d.interleaved,i!==null){w=i;do T=w.lane,Xt.lanes|=T,ua|=T,w=w.next;while(w!==i)}else w===null&&(d.lanes=0);return[o.memoizedState,d.dispatch]}function Lp(i){var o=Mr(),d=o.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=i;var p=d.dispatch,w=d.pending,T=o.memoizedState;if(w!==null){d.pending=null;var L=w=w.next;do T=i(T,L.action),L=L.next;while(L!==w);Zr(T,o.memoizedState)||(lr=!0),o.memoizedState=T,o.baseQueue===null&&(o.baseState=T),d.lastRenderedState=T}return[T,p]}function Lw(){}function Mw(i,o){var d=Xt,p=Mr(),w=o(),T=!Zr(p.memoizedState,w);if(T&&(p.memoizedState=w,lr=!0),p=p.queue,Mp(Uw.bind(null,d,p,i),[i]),p.getSnapshot!==o||T||Sn!==null&&Sn.memoizedState.tag&1){if(d.flags|=2048,ou(9,Vw.bind(null,d,p,w,o),void 0,null),Nn===null)throw Error(t(349));(ca&30)!==0||Fw(d,o,w)}return w}function Fw(i,o,d){i.flags|=16384,i={getSnapshot:o,value:d},o=Xt.updateQueue,o===null?(o={lastEffect:null,stores:null},Xt.updateQueue=o,o.stores=[i]):(d=o.stores,d===null?o.stores=[i]:d.push(i))}function Vw(i,o,d,p){o.value=d,o.getSnapshot=p,$w(o)&&zw(i)}function Uw(i,o,d){return d(function(){$w(o)&&zw(i)})}function $w(i){var o=i.getSnapshot;i=i.value;try{var d=o();return!Zr(i,d)}catch{return!0}}function zw(i){var o=ai(i,1);o!==null&&ss(o,i,1,-1)}function Bw(i){var o=Ts();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:iu,lastRenderedState:i},o.queue=i,i=i.dispatch=RA.bind(null,Xt,i),[o.memoizedState,i]}function ou(i,o,d,p){return i={tag:i,create:o,destroy:d,deps:p,next:null},o=Xt.updateQueue,o===null?(o={lastEffect:null,stores:null},Xt.updateQueue=o,o.lastEffect=i.next=i):(d=o.lastEffect,d===null?o.lastEffect=i.next=i:(p=d.next,d.next=i,i.next=p,o.lastEffect=i)),i}function qw(){return Mr().memoizedState}function dh(i,o,d,p){var w=Ts();Xt.flags|=i,w.memoizedState=ou(1|o,d,void 0,p===void 0?null:p)}function hh(i,o,d,p){var w=Mr();p=p===void 0?null:p;var T=void 0;if(yn!==null){var L=yn.memoizedState;if(T=L.destroy,p!==null&&Rp(p,L.deps)){w.memoizedState=ou(o,d,T,p);return}}Xt.flags|=i,w.memoizedState=ou(1|o,d,T,p)}function Ww(i,o){return dh(8390656,8,i,o)}function Mp(i,o){return hh(2048,8,i,o)}function Hw(i,o){return hh(4,2,i,o)}function Kw(i,o){return hh(4,4,i,o)}function Gw(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Qw(i,o,d){return d=d!=null?d.concat([i]):null,hh(4,4,Gw.bind(null,o,i),d)}function Fp(){}function Yw(i,o){var d=Mr();o=o===void 0?null:o;var p=d.memoizedState;return p!==null&&o!==null&&Rp(o,p[1])?p[0]:(d.memoizedState=[i,o],i)}function Xw(i,o){var d=Mr();o=o===void 0?null:o;var p=d.memoizedState;return p!==null&&o!==null&&Rp(o,p[1])?p[0]:(i=i(),d.memoizedState=[i,o],i)}function Jw(i,o,d){return(ca&21)===0?(i.baseState&&(i.baseState=!1,lr=!0),i.memoizedState=d):(Zr(d,o)||(d=Jo(),Xt.lanes|=d,ua|=d,i.baseState=!0),o)}function AA(i,o){var d=mt;mt=d!==0&&4>d?d:4,i(!0);var p=Pp.transition;Pp.transition={};try{i(!1),o()}finally{mt=d,Pp.transition=p}}function Zw(){return Mr().memoizedState}function PA(i,o,d){var p=Yi(i);if(d={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null},e0(i))t0(o,d);else if(d=Pw(i,o,d,p),d!==null){var w=Jn();ss(d,i,p,w),n0(d,o,p)}}function RA(i,o,d){var p=Yi(i),w={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null};if(e0(i))t0(o,w);else{var T=i.alternate;if(i.lanes===0&&(T===null||T.lanes===0)&&(T=o.lastRenderedReducer,T!==null))try{var L=o.lastRenderedState,W=T(L,d);if(w.hasEagerState=!0,w.eagerState=W,Zr(W,L)){var H=o.interleaved;H===null?(w.next=w,Np(o)):(w.next=H.next,H.next=w),o.interleaved=w;return}}catch{}finally{}d=Pw(i,o,w,p),d!==null&&(w=Jn(),ss(d,i,p,w),n0(d,o,p))}}function e0(i){var o=i.alternate;return i===Xt||o!==null&&o===Xt}function t0(i,o){ru=uh=!0;var d=i.pending;d===null?o.next=o:(o.next=d.next,d.next=o),i.pending=o}function n0(i,o,d){if((d&4194240)!==0){var p=o.lanes;p&=i.pendingLanes,d|=p,o.lanes=d,Oi(i,d)}}var fh={readContext:Lr,useCallback:Fn,useContext:Fn,useEffect:Fn,useImperativeHandle:Fn,useInsertionEffect:Fn,useLayoutEffect:Fn,useMemo:Fn,useReducer:Fn,useRef:Fn,useState:Fn,useDebugValue:Fn,useDeferredValue:Fn,useTransition:Fn,useMutableSource:Fn,useSyncExternalStore:Fn,useId:Fn,unstable_isNewReconciler:!1},kA={readContext:Lr,useCallback:function(i,o){return Ts().memoizedState=[i,o===void 0?null:o],i},useContext:Lr,useEffect:Ww,useImperativeHandle:function(i,o,d){return d=d!=null?d.concat([i]):null,dh(4194308,4,Gw.bind(null,o,i),d)},useLayoutEffect:function(i,o){return dh(4194308,4,i,o)},useInsertionEffect:function(i,o){return dh(4,2,i,o)},useMemo:function(i,o){var d=Ts();return o=o===void 0?null:o,i=i(),d.memoizedState=[i,o],i},useReducer:function(i,o,d){var p=Ts();return o=d!==void 0?d(o):o,p.memoizedState=p.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},p.queue=i,i=i.dispatch=PA.bind(null,Xt,i),[p.memoizedState,i]},useRef:function(i){var o=Ts();return i={current:i},o.memoizedState=i},useState:Bw,useDebugValue:Fp,useDeferredValue:function(i){return Ts().memoizedState=i},useTransition:function(){var i=Bw(!1),o=i[0];return i=AA.bind(null,i[1]),Ts().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,d){var p=Xt,w=Ts();if(Kt){if(d===void 0)throw Error(t(407));d=d()}else{if(d=o(),Nn===null)throw Error(t(349));(ca&30)!==0||Fw(p,o,d)}w.memoizedState=d;var T={value:d,getSnapshot:o};return w.queue=T,Ww(Uw.bind(null,p,T,i),[i]),p.flags|=2048,ou(9,Vw.bind(null,p,T,d,o),void 0,null),d},useId:function(){var i=Ts(),o=Nn.identifierPrefix;if(Kt){var d=oi,p=ii;d=(p&~(1<<32-Qn(p)-1)).toString(32)+d,o=":"+o+"R"+d,d=su++,0<d&&(o+="H"+d.toString(32)),o+=":"}else d=jA++,o=":"+o+"r"+d.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},DA={readContext:Lr,useCallback:Yw,useContext:Lr,useEffect:Mp,useImperativeHandle:Qw,useInsertionEffect:Hw,useLayoutEffect:Kw,useMemo:Xw,useReducer:Op,useRef:qw,useState:function(){return Op(iu)},useDebugValue:Fp,useDeferredValue:function(i){var o=Mr();return Jw(o,yn.memoizedState,i)},useTransition:function(){var i=Op(iu)[0],o=Mr().memoizedState;return[i,o]},useMutableSource:Lw,useSyncExternalStore:Mw,useId:Zw,unstable_isNewReconciler:!1},OA={readContext:Lr,useCallback:Yw,useContext:Lr,useEffect:Mp,useImperativeHandle:Qw,useInsertionEffect:Hw,useLayoutEffect:Kw,useMemo:Xw,useReducer:Lp,useRef:qw,useState:function(){return Lp(iu)},useDebugValue:Fp,useDeferredValue:function(i){var o=Mr();return yn===null?o.memoizedState=i:Jw(o,yn.memoizedState,i)},useTransition:function(){var i=Lp(iu)[0],o=Mr().memoizedState;return[i,o]},useMutableSource:Lw,useSyncExternalStore:Mw,useId:Zw,unstable_isNewReconciler:!1};function ts(i,o){if(i&&i.defaultProps){o=Z({},o),i=i.defaultProps;for(var d in i)o[d]===void 0&&(o[d]=i[d]);return o}return o}function Vp(i,o,d,p){o=i.memoizedState,d=d(p,o),d=d==null?o:Z({},o,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var mh={isMounted:function(i){return(i=i._reactInternals)?Hr(i)===i:!1},enqueueSetState:function(i,o,d){i=i._reactInternals;var p=Jn(),w=Yi(i),T=li(p,w);T.payload=o,d!=null&&(T.callback=d),o=Hi(i,T,w),o!==null&&(ss(o,i,w,p),oh(o,i,w))},enqueueReplaceState:function(i,o,d){i=i._reactInternals;var p=Jn(),w=Yi(i),T=li(p,w);T.tag=1,T.payload=o,d!=null&&(T.callback=d),o=Hi(i,T,w),o!==null&&(ss(o,i,w,p),oh(o,i,w))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var d=Jn(),p=Yi(i),w=li(d,p);w.tag=2,o!=null&&(w.callback=o),o=Hi(i,w,p),o!==null&&(ss(o,i,p,d),oh(o,i,p))}};function r0(i,o,d,p,w,T,L){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,T,L):o.prototype&&o.prototype.isPureReactComponent?!Hc(d,p)||!Hc(w,T):!0}function s0(i,o,d){var p=!1,w=Bi,T=o.contextType;return typeof T=="object"&&T!==null?T=Lr(T):(w=ar(o)?sa:Mn.current,p=o.contextTypes,T=(p=p!=null)?gl(i,w):Bi),o=new o(d,T),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=mh,i.stateNode=o,o._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=w,i.__reactInternalMemoizedMaskedChildContext=T),o}function i0(i,o,d,p){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(d,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(d,p),o.state!==i&&mh.enqueueReplaceState(o,o.state,null)}function Up(i,o,d,p){var w=i.stateNode;w.props=d,w.state=i.memoizedState,w.refs={},Tp(i);var T=o.contextType;typeof T=="object"&&T!==null?w.context=Lr(T):(T=ar(o)?sa:Mn.current,w.context=gl(i,T)),w.state=i.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(Vp(i,o,T,d),w.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(o=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),o!==w.state&&mh.enqueueReplaceState(w,w.state,null),ah(i,d,w,p),w.state=i.memoizedState),typeof w.componentDidMount=="function"&&(i.flags|=4194308)}function Sl(i,o){try{var d="",p=o;do d+=ve(p),p=p.return;while(p);var w=d}catch(T){w=`
Error generating stack: `+T.message+`
`+T.stack}return{value:i,source:o,stack:w,digest:null}}function $p(i,o,d){return{value:i,source:null,stack:d??null,digest:o??null}}function zp(i,o){try{console.error(o.value)}catch(d){setTimeout(function(){throw d})}}var LA=typeof WeakMap=="function"?WeakMap:Map;function o0(i,o,d){d=li(-1,d),d.tag=3,d.payload={element:null};var p=o.value;return d.callback=function(){_h||(_h=!0,rg=p),zp(i,o)},d}function a0(i,o,d){d=li(-1,d),d.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var w=o.value;d.payload=function(){return p(w)},d.callback=function(){zp(i,o)}}var T=i.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(d.callback=function(){zp(i,o),typeof p!="function"&&(Gi===null?Gi=new Set([this]):Gi.add(this));var L=o.stack;this.componentDidCatch(o.value,{componentStack:L!==null?L:""})}),d}function l0(i,o,d){var p=i.pingCache;if(p===null){p=i.pingCache=new LA;var w=new Set;p.set(o,w)}else w=p.get(o),w===void 0&&(w=new Set,p.set(o,w));w.has(d)||(w.add(d),i=YA.bind(null,i,o,d),o.then(i,i))}function c0(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function u0(i,o,d,p,w){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(o=li(-1,1),o.tag=2,Hi(d,o,1))),d.lanes|=1),i):(i.flags|=65536,i.lanes=w,i)}var MA=O.ReactCurrentOwner,lr=!1;function Xn(i,o,d,p){o.child=i===null?Aw(o,null,d,p):wl(o,i.child,d,p)}function d0(i,o,d,p,w){d=d.render;var T=o.ref;return El(o,w),p=kp(i,o,d,p,T,w),d=Dp(),i!==null&&!lr?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~w,ci(i,o,w)):(Kt&&d&&gp(o),o.flags|=1,Xn(i,o,p,w),o.child)}function h0(i,o,d,p,w){if(i===null){var T=d.type;return typeof T=="function"&&!ug(T)&&T.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(o.tag=15,o.type=T,f0(i,o,T,p,w)):(i=Ch(d.type,null,p,o,o.mode,w),i.ref=o.ref,i.return=o,o.child=i)}if(T=i.child,(i.lanes&w)===0){var L=T.memoizedProps;if(d=d.compare,d=d!==null?d:Hc,d(L,p)&&i.ref===o.ref)return ci(i,o,w)}return o.flags|=1,i=Ji(T,p),i.ref=o.ref,i.return=o,o.child=i}function f0(i,o,d,p,w){if(i!==null){var T=i.memoizedProps;if(Hc(T,p)&&i.ref===o.ref)if(lr=!1,o.pendingProps=p=T,(i.lanes&w)!==0)(i.flags&131072)!==0&&(lr=!0);else return o.lanes=i.lanes,ci(i,o,w)}return Bp(i,o,d,p,w)}function m0(i,o,d){var p=o.pendingProps,w=p.children,T=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lt(Tl,Sr),Sr|=d;else{if((d&1073741824)===0)return i=T!==null?T.baseLanes|d:d,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Lt(Tl,Sr),Sr|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=T!==null?T.baseLanes:d,Lt(Tl,Sr),Sr|=p}else T!==null?(p=T.baseLanes|d,o.memoizedState=null):p=d,Lt(Tl,Sr),Sr|=p;return Xn(i,o,w,d),o.child}function p0(i,o){var d=o.ref;(i===null&&d!==null||i!==null&&i.ref!==d)&&(o.flags|=512,o.flags|=2097152)}function Bp(i,o,d,p,w){var T=ar(d)?sa:Mn.current;return T=gl(o,T),El(o,w),d=kp(i,o,d,p,T,w),p=Dp(),i!==null&&!lr?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~w,ci(i,o,w)):(Kt&&p&&gp(o),o.flags|=1,Xn(i,o,d,w),o.child)}function g0(i,o,d,p,w){if(ar(d)){var T=!0;Jd(o)}else T=!1;if(El(o,w),o.stateNode===null)gh(i,o),s0(o,d,p),Up(o,d,p,w),p=!0;else if(i===null){var L=o.stateNode,W=o.memoizedProps;L.props=W;var H=L.context,se=d.contextType;typeof se=="object"&&se!==null?se=Lr(se):(se=ar(d)?sa:Mn.current,se=gl(o,se));var pe=d.getDerivedStateFromProps,ge=typeof pe=="function"||typeof L.getSnapshotBeforeUpdate=="function";ge||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(W!==p||H!==se)&&i0(o,L,p,se),Wi=!1;var fe=o.memoizedState;L.state=fe,ah(o,p,L,w),H=o.memoizedState,W!==p||fe!==H||or.current||Wi?(typeof pe=="function"&&(Vp(o,d,pe,p),H=o.memoizedState),(W=Wi||r0(o,d,W,p,fe,H,se))?(ge||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(o.flags|=4194308)):(typeof L.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=H),L.props=p,L.state=H,L.context=se,p=W):(typeof L.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{L=o.stateNode,Rw(i,o),W=o.memoizedProps,se=o.type===o.elementType?W:ts(o.type,W),L.props=se,ge=o.pendingProps,fe=L.context,H=d.contextType,typeof H=="object"&&H!==null?H=Lr(H):(H=ar(d)?sa:Mn.current,H=gl(o,H));var Ie=d.getDerivedStateFromProps;(pe=typeof Ie=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(W!==ge||fe!==H)&&i0(o,L,p,H),Wi=!1,fe=o.memoizedState,L.state=fe,ah(o,p,L,w);var Oe=o.memoizedState;W!==ge||fe!==Oe||or.current||Wi?(typeof Ie=="function"&&(Vp(o,d,Ie,p),Oe=o.memoizedState),(se=Wi||r0(o,d,se,p,fe,Oe,H)||!1)?(pe||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(p,Oe,H),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(p,Oe,H)),typeof L.componentDidUpdate=="function"&&(o.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof L.componentDidUpdate!="function"||W===i.memoizedProps&&fe===i.memoizedState||(o.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||W===i.memoizedProps&&fe===i.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=Oe),L.props=p,L.state=Oe,L.context=H,p=se):(typeof L.componentDidUpdate!="function"||W===i.memoizedProps&&fe===i.memoizedState||(o.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||W===i.memoizedProps&&fe===i.memoizedState||(o.flags|=1024),p=!1)}return qp(i,o,d,p,T,w)}function qp(i,o,d,p,w,T){p0(i,o);var L=(o.flags&128)!==0;if(!p&&!L)return w&&_w(o,d,!1),ci(i,o,T);p=o.stateNode,MA.current=o;var W=L&&typeof d.getDerivedStateFromError!="function"?null:p.render();return o.flags|=1,i!==null&&L?(o.child=wl(o,i.child,null,T),o.child=wl(o,null,W,T)):Xn(i,o,W,T),o.memoizedState=p.state,w&&_w(o,d,!0),o.child}function v0(i){var o=i.stateNode;o.pendingContext?xw(i,o.pendingContext,o.pendingContext!==o.context):o.context&&xw(i,o.context,!1),Cp(i,o.containerInfo)}function y0(i,o,d,p,w){return xl(),wp(w),o.flags|=256,Xn(i,o,d,p),o.child}var Wp={dehydrated:null,treeContext:null,retryLane:0};function Hp(i){return{baseLanes:i,cachePool:null,transitions:null}}function x0(i,o,d){var p=o.pendingProps,w=Yt.current,T=!1,L=(o.flags&128)!==0,W;if((W=L)||(W=i!==null&&i.memoizedState===null?!1:(w&2)!==0),W?(T=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(w|=1),Lt(Yt,w&1),i===null)return xp(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(L=p.children,i=p.fallback,T?(p=o.mode,T=o.child,L={mode:"hidden",children:L},(p&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=L):T=Ih(L,p,0,null),i=ma(i,p,d,null),T.return=o,i.return=o,T.sibling=i,o.child=T,o.child.memoizedState=Hp(d),o.memoizedState=Wp,i):Kp(o,L));if(w=i.memoizedState,w!==null&&(W=w.dehydrated,W!==null))return FA(i,o,L,p,W,w,d);if(T){T=p.fallback,L=o.mode,w=i.child,W=w.sibling;var H={mode:"hidden",children:p.children};return(L&1)===0&&o.child!==w?(p=o.child,p.childLanes=0,p.pendingProps=H,o.deletions=null):(p=Ji(w,H),p.subtreeFlags=w.subtreeFlags&14680064),W!==null?T=Ji(W,T):(T=ma(T,L,d,null),T.flags|=2),T.return=o,p.return=o,p.sibling=T,o.child=p,p=T,T=o.child,L=i.child.memoizedState,L=L===null?Hp(d):{baseLanes:L.baseLanes|d,cachePool:null,transitions:L.transitions},T.memoizedState=L,T.childLanes=i.childLanes&~d,o.memoizedState=Wp,p}return T=i.child,i=T.sibling,p=Ji(T,{mode:"visible",children:p.children}),(o.mode&1)===0&&(p.lanes=d),p.return=o,p.sibling=null,i!==null&&(d=o.deletions,d===null?(o.deletions=[i],o.flags|=16):d.push(i)),o.child=p,o.memoizedState=null,p}function Kp(i,o){return o=Ih({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function ph(i,o,d,p){return p!==null&&wp(p),wl(o,i.child,null,d),i=Kp(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function FA(i,o,d,p,w,T,L){if(d)return o.flags&256?(o.flags&=-257,p=$p(Error(t(422))),ph(i,o,L,p)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(T=p.fallback,w=o.mode,p=Ih({mode:"visible",children:p.children},w,0,null),T=ma(T,w,L,null),T.flags|=2,p.return=o,T.return=o,p.sibling=T,o.child=p,(o.mode&1)!==0&&wl(o,i.child,null,L),o.child.memoizedState=Hp(L),o.memoizedState=Wp,T);if((o.mode&1)===0)return ph(i,o,L,null);if(w.data==="$!"){if(p=w.nextSibling&&w.nextSibling.dataset,p)var W=p.dgst;return p=W,T=Error(t(419)),p=$p(T,p,void 0),ph(i,o,L,p)}if(W=(L&i.childLanes)!==0,lr||W){if(p=Nn,p!==null){switch(L&-L){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(p.suspendedLanes|L))!==0?0:w,w!==0&&w!==T.retryLane&&(T.retryLane=w,ai(i,w),ss(p,i,w,-1))}return cg(),p=$p(Error(t(421))),ph(i,o,L,p)}return w.data==="$?"?(o.flags|=128,o.child=i.child,o=XA.bind(null,i),w._reactRetry=o,null):(i=T.treeContext,br=$i(w.nextSibling),Er=o,Kt=!0,es=null,i!==null&&(Dr[Or++]=ii,Dr[Or++]=oi,Dr[Or++]=ia,ii=i.id,oi=i.overflow,ia=o),o=Kp(o,p.children),o.flags|=4096,o)}function w0(i,o,d){i.lanes|=o;var p=i.alternate;p!==null&&(p.lanes|=o),Sp(i.return,o,d)}function Gp(i,o,d,p,w){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:d,tailMode:w}:(T.isBackwards=o,T.rendering=null,T.renderingStartTime=0,T.last=p,T.tail=d,T.tailMode=w)}function _0(i,o,d){var p=o.pendingProps,w=p.revealOrder,T=p.tail;if(Xn(i,o,p.children,d),p=Yt.current,(p&2)!==0)p=p&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&w0(i,d,o);else if(i.tag===19)w0(i,d,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(Lt(Yt,p),(o.mode&1)===0)o.memoizedState=null;else switch(w){case"forwards":for(d=o.child,w=null;d!==null;)i=d.alternate,i!==null&&lh(i)===null&&(w=d),d=d.sibling;d=w,d===null?(w=o.child,o.child=null):(w=d.sibling,d.sibling=null),Gp(o,!1,w,d,T);break;case"backwards":for(d=null,w=o.child,o.child=null;w!==null;){if(i=w.alternate,i!==null&&lh(i)===null){o.child=w;break}i=w.sibling,w.sibling=d,d=w,w=i}Gp(o,!0,d,null,T);break;case"together":Gp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function gh(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function ci(i,o,d){if(i!==null&&(o.dependencies=i.dependencies),ua|=o.lanes,(d&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,d=Ji(i,i.pendingProps),o.child=d,d.return=o;i.sibling!==null;)i=i.sibling,d=d.sibling=Ji(i,i.pendingProps),d.return=o;d.sibling=null}return o.child}function VA(i,o,d){switch(o.tag){case 3:v0(o),xl();break;case 5:Ow(o);break;case 1:ar(o.type)&&Jd(o);break;case 4:Cp(o,o.stateNode.containerInfo);break;case 10:var p=o.type._context,w=o.memoizedProps.value;Lt(sh,p._currentValue),p._currentValue=w;break;case 13:if(p=o.memoizedState,p!==null)return p.dehydrated!==null?(Lt(Yt,Yt.current&1),o.flags|=128,null):(d&o.child.childLanes)!==0?x0(i,o,d):(Lt(Yt,Yt.current&1),i=ci(i,o,d),i!==null?i.sibling:null);Lt(Yt,Yt.current&1);break;case 19:if(p=(d&o.childLanes)!==0,(i.flags&128)!==0){if(p)return _0(i,o,d);o.flags|=128}if(w=o.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),Lt(Yt,Yt.current),p)break;return null;case 22:case 23:return o.lanes=0,m0(i,o,d)}return ci(i,o,d)}var E0,Qp,b0,S0;E0=function(i,o){for(var d=o.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===o)break;for(;d.sibling===null;){if(d.return===null||d.return===o)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Qp=function(){},b0=function(i,o,d,p){var w=i.memoizedProps;if(w!==p){i=o.stateNode,la(Ns.current);var T=null;switch(d){case"input":w=kt(i,w),p=kt(i,p),T=[];break;case"select":w=Z({},w,{value:void 0}),p=Z({},p,{value:void 0}),T=[];break;case"textarea":w=Ys(i,w),p=Ys(i,p),T=[];break;default:typeof w.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=Qd)}Ne(d,p);var L;d=null;for(se in w)if(!p.hasOwnProperty(se)&&w.hasOwnProperty(se)&&w[se]!=null)if(se==="style"){var W=w[se];for(L in W)W.hasOwnProperty(L)&&(d||(d={}),d[L]="")}else se!=="dangerouslySetInnerHTML"&&se!=="children"&&se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&se!=="autoFocus"&&(s.hasOwnProperty(se)?T||(T=[]):(T=T||[]).push(se,null));for(se in p){var H=p[se];if(W=w!=null?w[se]:void 0,p.hasOwnProperty(se)&&H!==W&&(H!=null||W!=null))if(se==="style")if(W){for(L in W)!W.hasOwnProperty(L)||H&&H.hasOwnProperty(L)||(d||(d={}),d[L]="");for(L in H)H.hasOwnProperty(L)&&W[L]!==H[L]&&(d||(d={}),d[L]=H[L])}else d||(T||(T=[]),T.push(se,d)),d=H;else se==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,W=W?W.__html:void 0,H!=null&&W!==H&&(T=T||[]).push(se,H)):se==="children"?typeof H!="string"&&typeof H!="number"||(T=T||[]).push(se,""+H):se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&(s.hasOwnProperty(se)?(H!=null&&se==="onScroll"&&Ut("scroll",i),T||W===H||(T=[])):(T=T||[]).push(se,H))}d&&(T=T||[]).push("style",d);var se=T;(o.updateQueue=se)&&(o.flags|=4)}},S0=function(i,o,d,p){d!==p&&(o.flags|=4)};function au(i,o){if(!Kt)switch(i.tailMode){case"hidden":o=i.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function Vn(i){var o=i.alternate!==null&&i.alternate.child===i.child,d=0,p=0;if(o)for(var w=i.child;w!==null;)d|=w.lanes|w.childLanes,p|=w.subtreeFlags&14680064,p|=w.flags&14680064,w.return=i,w=w.sibling;else for(w=i.child;w!==null;)d|=w.lanes|w.childLanes,p|=w.subtreeFlags,p|=w.flags,w.return=i,w=w.sibling;return i.subtreeFlags|=p,i.childLanes=d,o}function UA(i,o,d){var p=o.pendingProps;switch(vp(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(o),null;case 1:return ar(o.type)&&Xd(),Vn(o),null;case 3:return p=o.stateNode,bl(),$t(or),$t(Mn),Ap(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(nh(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,es!==null&&(og(es),es=null))),Qp(i,o),Vn(o),null;case 5:Ip(o);var w=la(nu.current);if(d=o.type,i!==null&&o.stateNode!=null)b0(i,o,d,p,w),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!p){if(o.stateNode===null)throw Error(t(166));return Vn(o),null}if(i=la(Ns.current),nh(o)){p=o.stateNode,d=o.type;var T=o.memoizedProps;switch(p[Ss]=o,p[Xc]=T,i=(o.mode&1)!==0,d){case"dialog":Ut("cancel",p),Ut("close",p);break;case"iframe":case"object":case"embed":Ut("load",p);break;case"video":case"audio":for(w=0;w<Gc.length;w++)Ut(Gc[w],p);break;case"source":Ut("error",p);break;case"img":case"image":case"link":Ut("error",p),Ut("load",p);break;case"details":Ut("toggle",p);break;case"input":sn(p,T),Ut("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!T.multiple},Ut("invalid",p);break;case"textarea":vr(p,T),Ut("invalid",p)}Ne(d,T),w=null;for(var L in T)if(T.hasOwnProperty(L)){var W=T[L];L==="children"?typeof W=="string"?p.textContent!==W&&(T.suppressHydrationWarning!==!0&&Gd(p.textContent,W,i),w=["children",W]):typeof W=="number"&&p.textContent!==""+W&&(T.suppressHydrationWarning!==!0&&Gd(p.textContent,W,i),w=["children",""+W]):s.hasOwnProperty(L)&&W!=null&&L==="onScroll"&&Ut("scroll",p)}switch(d){case"input":De(p),St(p,T,!0);break;case"textarea":De(p),Br(p);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(p.onclick=Qd)}p=w,o.updateQueue=p,p!==null&&(o.flags|=4)}else{L=w.nodeType===9?w:w.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Vt(d)),i==="http://www.w3.org/1999/xhtml"?d==="script"?(i=L.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=L.createElement(d,{is:p.is}):(i=L.createElement(d),d==="select"&&(L=i,p.multiple?L.multiple=!0:p.size&&(L.size=p.size))):i=L.createElementNS(i,d),i[Ss]=o,i[Xc]=p,E0(i,o,!1,!1),o.stateNode=i;e:{switch(L=ys(d,p),d){case"dialog":Ut("cancel",i),Ut("close",i),w=p;break;case"iframe":case"object":case"embed":Ut("load",i),w=p;break;case"video":case"audio":for(w=0;w<Gc.length;w++)Ut(Gc[w],i);w=p;break;case"source":Ut("error",i),w=p;break;case"img":case"image":case"link":Ut("error",i),Ut("load",i),w=p;break;case"details":Ut("toggle",i),w=p;break;case"input":sn(i,p),w=kt(i,p),Ut("invalid",i);break;case"option":w=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},w=Z({},p,{value:void 0}),Ut("invalid",i);break;case"textarea":vr(i,p),w=Ys(i,p),Ut("invalid",i);break;default:w=p}Ne(d,w),W=w;for(T in W)if(W.hasOwnProperty(T)){var H=W[T];T==="style"?nt(i,H):T==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,H!=null&&nr(i,H)):T==="children"?typeof H=="string"?(d!=="textarea"||H!=="")&&ae(i,H):typeof H=="number"&&ae(i,""+H):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(s.hasOwnProperty(T)?H!=null&&T==="onScroll"&&Ut("scroll",i):H!=null&&C(i,T,H,L))}switch(d){case"input":De(i),St(i,p,!1);break;case"textarea":De(i),Br(i);break;case"option":p.value!=null&&i.setAttribute("value",""+Se(p.value));break;case"select":i.multiple=!!p.multiple,T=p.value,T!=null?gr(i,!!p.multiple,T,!1):p.defaultValue!=null&&gr(i,!!p.multiple,p.defaultValue,!0);break;default:typeof w.onClick=="function"&&(i.onclick=Qd)}switch(d){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Vn(o),null;case 6:if(i&&o.stateNode!=null)S0(i,o,i.memoizedProps,p);else{if(typeof p!="string"&&o.stateNode===null)throw Error(t(166));if(d=la(nu.current),la(Ns.current),nh(o)){if(p=o.stateNode,d=o.memoizedProps,p[Ss]=o,(T=p.nodeValue!==d)&&(i=Er,i!==null))switch(i.tag){case 3:Gd(p.nodeValue,d,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Gd(p.nodeValue,d,(i.mode&1)!==0)}T&&(o.flags|=4)}else p=(d.nodeType===9?d:d.ownerDocument).createTextNode(p),p[Ss]=o,o.stateNode=p}return Vn(o),null;case 13:if($t(Yt),p=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Kt&&br!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Cw(),xl(),o.flags|=98560,T=!1;else if(T=nh(o),p!==null&&p.dehydrated!==null){if(i===null){if(!T)throw Error(t(318));if(T=o.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(t(317));T[Ss]=o}else xl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Vn(o),T=!1}else es!==null&&(og(es),es=null),T=!0;if(!T)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=d,o):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(Yt.current&1)!==0?xn===0&&(xn=3):cg())),o.updateQueue!==null&&(o.flags|=4),Vn(o),null);case 4:return bl(),Qp(i,o),i===null&&Qc(o.stateNode.containerInfo),Vn(o),null;case 10:return bp(o.type._context),Vn(o),null;case 17:return ar(o.type)&&Xd(),Vn(o),null;case 19:if($t(Yt),T=o.memoizedState,T===null)return Vn(o),null;if(p=(o.flags&128)!==0,L=T.rendering,L===null)if(p)au(T,!1);else{if(xn!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(L=lh(i),L!==null){for(o.flags|=128,au(T,!1),p=L.updateQueue,p!==null&&(o.updateQueue=p,o.flags|=4),o.subtreeFlags=0,p=d,d=o.child;d!==null;)T=d,i=p,T.flags&=14680066,L=T.alternate,L===null?(T.childLanes=0,T.lanes=i,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=L.childLanes,T.lanes=L.lanes,T.child=L.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=L.memoizedProps,T.memoizedState=L.memoizedState,T.updateQueue=L.updateQueue,T.type=L.type,i=L.dependencies,T.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),d=d.sibling;return Lt(Yt,Yt.current&1|2),o.child}i=i.sibling}T.tail!==null&&Ot()>Cl&&(o.flags|=128,p=!0,au(T,!1),o.lanes=4194304)}else{if(!p)if(i=lh(L),i!==null){if(o.flags|=128,p=!0,d=i.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),au(T,!0),T.tail===null&&T.tailMode==="hidden"&&!L.alternate&&!Kt)return Vn(o),null}else 2*Ot()-T.renderingStartTime>Cl&&d!==1073741824&&(o.flags|=128,p=!0,au(T,!1),o.lanes=4194304);T.isBackwards?(L.sibling=o.child,o.child=L):(d=T.last,d!==null?d.sibling=L:o.child=L,T.last=L)}return T.tail!==null?(o=T.tail,T.rendering=o,T.tail=o.sibling,T.renderingStartTime=Ot(),o.sibling=null,d=Yt.current,Lt(Yt,p?d&1|2:d&1),o):(Vn(o),null);case 22:case 23:return lg(),p=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(o.flags|=8192),p&&(o.mode&1)!==0?(Sr&1073741824)!==0&&(Vn(o),o.subtreeFlags&6&&(o.flags|=8192)):Vn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function $A(i,o){switch(vp(o),o.tag){case 1:return ar(o.type)&&Xd(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return bl(),$t(or),$t(Mn),Ap(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Ip(o),null;case 13:if($t(Yt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));xl()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return $t(Yt),null;case 4:return bl(),null;case 10:return bp(o.type._context),null;case 22:case 23:return lg(),null;case 24:return null;default:return null}}var vh=!1,Un=!1,zA=typeof WeakSet=="function"?WeakSet:Set,Re=null;function Nl(i,o){var d=i.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(p){tn(i,o,p)}else d.current=null}function Yp(i,o,d){try{d()}catch(p){tn(i,o,p)}}var N0=!1;function BA(i,o){if(lp=Fi,i=rw(),ep(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var p=d.getSelection&&d.getSelection();if(p&&p.rangeCount!==0){d=p.anchorNode;var w=p.anchorOffset,T=p.focusNode;p=p.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var L=0,W=-1,H=-1,se=0,pe=0,ge=i,fe=null;t:for(;;){for(var Ie;ge!==d||w!==0&&ge.nodeType!==3||(W=L+w),ge!==T||p!==0&&ge.nodeType!==3||(H=L+p),ge.nodeType===3&&(L+=ge.nodeValue.length),(Ie=ge.firstChild)!==null;)fe=ge,ge=Ie;for(;;){if(ge===i)break t;if(fe===d&&++se===w&&(W=L),fe===T&&++pe===p&&(H=L),(Ie=ge.nextSibling)!==null)break;ge=fe,fe=ge.parentNode}ge=Ie}d=W===-1||H===-1?null:{start:W,end:H}}else d=null}d=d||{start:0,end:0}}else d=null;for(cp={focusedElem:i,selectionRange:d},Fi=!1,Re=o;Re!==null;)if(o=Re,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Re=i;else for(;Re!==null;){o=Re;try{var Oe=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Oe!==null){var Me=Oe.memoizedProps,an=Oe.memoizedState,te=o.stateNode,G=te.getSnapshotBeforeUpdate(o.elementType===o.type?Me:ts(o.type,Me),an);te.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var ne=o.stateNode.containerInfo;ne.nodeType===1?ne.textContent="":ne.nodeType===9&&ne.documentElement&&ne.removeChild(ne.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ye){tn(o,o.return,ye)}if(i=o.sibling,i!==null){i.return=o.return,Re=i;break}Re=o.return}return Oe=N0,N0=!1,Oe}function lu(i,o,d){var p=o.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var w=p=p.next;do{if((w.tag&i)===i){var T=w.destroy;w.destroy=void 0,T!==void 0&&Yp(o,d,T)}w=w.next}while(w!==p)}}function yh(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var d=o=o.next;do{if((d.tag&i)===i){var p=d.create;d.destroy=p()}d=d.next}while(d!==o)}}function Xp(i){var o=i.ref;if(o!==null){var d=i.stateNode;switch(i.tag){case 5:i=d;break;default:i=d}typeof o=="function"?o(i):o.current=i}}function T0(i){var o=i.alternate;o!==null&&(i.alternate=null,T0(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Ss],delete o[Xc],delete o[fp],delete o[NA],delete o[TA])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function C0(i){return i.tag===5||i.tag===3||i.tag===4}function I0(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||C0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Jp(i,o,d){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?d.nodeType===8?d.parentNode.insertBefore(i,o):d.insertBefore(i,o):(d.nodeType===8?(o=d.parentNode,o.insertBefore(i,d)):(o=d,o.appendChild(i)),d=d._reactRootContainer,d!=null||o.onclick!==null||(o.onclick=Qd));else if(p!==4&&(i=i.child,i!==null))for(Jp(i,o,d),i=i.sibling;i!==null;)Jp(i,o,d),i=i.sibling}function Zp(i,o,d){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?d.insertBefore(i,o):d.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(Zp(i,o,d),i=i.sibling;i!==null;)Zp(i,o,d),i=i.sibling}var Pn=null,ns=!1;function Ki(i,o,d){for(d=d.child;d!==null;)j0(i,o,d),d=d.sibling}function j0(i,o,d){if(yr&&typeof yr.onCommitFiberUnmount=="function")try{yr.onCommitFiberUnmount(Yo,d)}catch{}switch(d.tag){case 5:Un||Nl(d,o);case 6:var p=Pn,w=ns;Pn=null,Ki(i,o,d),Pn=p,ns=w,Pn!==null&&(ns?(i=Pn,d=d.stateNode,i.nodeType===8?i.parentNode.removeChild(d):i.removeChild(d)):Pn.removeChild(d.stateNode));break;case 18:Pn!==null&&(ns?(i=Pn,d=d.stateNode,i.nodeType===8?hp(i.parentNode,d):i.nodeType===1&&hp(i,d),Xr(i)):hp(Pn,d.stateNode));break;case 4:p=Pn,w=ns,Pn=d.stateNode.containerInfo,ns=!0,Ki(i,o,d),Pn=p,ns=w;break;case 0:case 11:case 14:case 15:if(!Un&&(p=d.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){w=p=p.next;do{var T=w,L=T.destroy;T=T.tag,L!==void 0&&((T&2)!==0||(T&4)!==0)&&Yp(d,o,L),w=w.next}while(w!==p)}Ki(i,o,d);break;case 1:if(!Un&&(Nl(d,o),p=d.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=d.memoizedProps,p.state=d.memoizedState,p.componentWillUnmount()}catch(W){tn(d,o,W)}Ki(i,o,d);break;case 21:Ki(i,o,d);break;case 22:d.mode&1?(Un=(p=Un)||d.memoizedState!==null,Ki(i,o,d),Un=p):Ki(i,o,d);break;default:Ki(i,o,d)}}function A0(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var d=i.stateNode;d===null&&(d=i.stateNode=new zA),o.forEach(function(p){var w=JA.bind(null,i,p);d.has(p)||(d.add(p),p.then(w,w))})}}function rs(i,o){var d=o.deletions;if(d!==null)for(var p=0;p<d.length;p++){var w=d[p];try{var T=i,L=o,W=L;e:for(;W!==null;){switch(W.tag){case 5:Pn=W.stateNode,ns=!1;break e;case 3:Pn=W.stateNode.containerInfo,ns=!0;break e;case 4:Pn=W.stateNode.containerInfo,ns=!0;break e}W=W.return}if(Pn===null)throw Error(t(160));j0(T,L,w),Pn=null,ns=!1;var H=w.alternate;H!==null&&(H.return=null),w.return=null}catch(se){tn(w,o,se)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)P0(o,i),o=o.sibling}function P0(i,o){var d=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(rs(o,i),Cs(i),p&4){try{lu(3,i,i.return),yh(3,i)}catch(Me){tn(i,i.return,Me)}try{lu(5,i,i.return)}catch(Me){tn(i,i.return,Me)}}break;case 1:rs(o,i),Cs(i),p&512&&d!==null&&Nl(d,d.return);break;case 5:if(rs(o,i),Cs(i),p&512&&d!==null&&Nl(d,d.return),i.flags&32){var w=i.stateNode;try{ae(w,"")}catch(Me){tn(i,i.return,Me)}}if(p&4&&(w=i.stateNode,w!=null)){var T=i.memoizedProps,L=d!==null?d.memoizedProps:T,W=i.type,H=i.updateQueue;if(i.updateQueue=null,H!==null)try{W==="input"&&T.type==="radio"&&T.name!=null&&Ft(w,T),ys(W,L);var se=ys(W,T);for(L=0;L<H.length;L+=2){var pe=H[L],ge=H[L+1];pe==="style"?nt(w,ge):pe==="dangerouslySetInnerHTML"?nr(w,ge):pe==="children"?ae(w,ge):C(w,pe,ge,se)}switch(W){case"input":Tt(w,T);break;case"textarea":vs(w,T);break;case"select":var fe=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!T.multiple;var Ie=T.value;Ie!=null?gr(w,!!T.multiple,Ie,!1):fe!==!!T.multiple&&(T.defaultValue!=null?gr(w,!!T.multiple,T.defaultValue,!0):gr(w,!!T.multiple,T.multiple?[]:"",!1))}w[Xc]=T}catch(Me){tn(i,i.return,Me)}}break;case 6:if(rs(o,i),Cs(i),p&4){if(i.stateNode===null)throw Error(t(162));w=i.stateNode,T=i.memoizedProps;try{w.nodeValue=T}catch(Me){tn(i,i.return,Me)}}break;case 3:if(rs(o,i),Cs(i),p&4&&d!==null&&d.memoizedState.isDehydrated)try{Xr(o.containerInfo)}catch(Me){tn(i,i.return,Me)}break;case 4:rs(o,i),Cs(i);break;case 13:rs(o,i),Cs(i),w=i.child,w.flags&8192&&(T=w.memoizedState!==null,w.stateNode.isHidden=T,!T||w.alternate!==null&&w.alternate.memoizedState!==null||(ng=Ot())),p&4&&A0(i);break;case 22:if(pe=d!==null&&d.memoizedState!==null,i.mode&1?(Un=(se=Un)||pe,rs(o,i),Un=se):rs(o,i),Cs(i),p&8192){if(se=i.memoizedState!==null,(i.stateNode.isHidden=se)&&!pe&&(i.mode&1)!==0)for(Re=i,pe=i.child;pe!==null;){for(ge=Re=pe;Re!==null;){switch(fe=Re,Ie=fe.child,fe.tag){case 0:case 11:case 14:case 15:lu(4,fe,fe.return);break;case 1:Nl(fe,fe.return);var Oe=fe.stateNode;if(typeof Oe.componentWillUnmount=="function"){p=fe,d=fe.return;try{o=p,Oe.props=o.memoizedProps,Oe.state=o.memoizedState,Oe.componentWillUnmount()}catch(Me){tn(p,d,Me)}}break;case 5:Nl(fe,fe.return);break;case 22:if(fe.memoizedState!==null){D0(ge);continue}}Ie!==null?(Ie.return=fe,Re=Ie):D0(ge)}pe=pe.sibling}e:for(pe=null,ge=i;;){if(ge.tag===5){if(pe===null){pe=ge;try{w=ge.stateNode,se?(T=w.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(W=ge.stateNode,H=ge.memoizedProps.style,L=H!=null&&H.hasOwnProperty("display")?H.display:null,W.style.display=pt("display",L))}catch(Me){tn(i,i.return,Me)}}}else if(ge.tag===6){if(pe===null)try{ge.stateNode.nodeValue=se?"":ge.memoizedProps}catch(Me){tn(i,i.return,Me)}}else if((ge.tag!==22&&ge.tag!==23||ge.memoizedState===null||ge===i)&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===i)break e;for(;ge.sibling===null;){if(ge.return===null||ge.return===i)break e;pe===ge&&(pe=null),ge=ge.return}pe===ge&&(pe=null),ge.sibling.return=ge.return,ge=ge.sibling}}break;case 19:rs(o,i),Cs(i),p&4&&A0(i);break;case 21:break;default:rs(o,i),Cs(i)}}function Cs(i){var o=i.flags;if(o&2){try{e:{for(var d=i.return;d!==null;){if(C0(d)){var p=d;break e}d=d.return}throw Error(t(160))}switch(p.tag){case 5:var w=p.stateNode;p.flags&32&&(ae(w,""),p.flags&=-33);var T=I0(i);Zp(i,T,w);break;case 3:case 4:var L=p.stateNode.containerInfo,W=I0(i);Jp(i,W,L);break;default:throw Error(t(161))}}catch(H){tn(i,i.return,H)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function qA(i,o,d){Re=i,R0(i)}function R0(i,o,d){for(var p=(i.mode&1)!==0;Re!==null;){var w=Re,T=w.child;if(w.tag===22&&p){var L=w.memoizedState!==null||vh;if(!L){var W=w.alternate,H=W!==null&&W.memoizedState!==null||Un;W=vh;var se=Un;if(vh=L,(Un=H)&&!se)for(Re=w;Re!==null;)L=Re,H=L.child,L.tag===22&&L.memoizedState!==null?O0(w):H!==null?(H.return=L,Re=H):O0(w);for(;T!==null;)Re=T,R0(T),T=T.sibling;Re=w,vh=W,Un=se}k0(i)}else(w.subtreeFlags&8772)!==0&&T!==null?(T.return=w,Re=T):k0(i)}}function k0(i){for(;Re!==null;){var o=Re;if((o.flags&8772)!==0){var d=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Un||yh(5,o);break;case 1:var p=o.stateNode;if(o.flags&4&&!Un)if(d===null)p.componentDidMount();else{var w=o.elementType===o.type?d.memoizedProps:ts(o.type,d.memoizedProps);p.componentDidUpdate(w,d.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var T=o.updateQueue;T!==null&&Dw(o,T,p);break;case 3:var L=o.updateQueue;if(L!==null){if(d=null,o.child!==null)switch(o.child.tag){case 5:d=o.child.stateNode;break;case 1:d=o.child.stateNode}Dw(o,L,d)}break;case 5:var W=o.stateNode;if(d===null&&o.flags&4){d=W;var H=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":H.autoFocus&&d.focus();break;case"img":H.src&&(d.src=H.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var se=o.alternate;if(se!==null){var pe=se.memoizedState;if(pe!==null){var ge=pe.dehydrated;ge!==null&&Xr(ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Un||o.flags&512&&Xp(o)}catch(fe){tn(o,o.return,fe)}}if(o===i){Re=null;break}if(d=o.sibling,d!==null){d.return=o.return,Re=d;break}Re=o.return}}function D0(i){for(;Re!==null;){var o=Re;if(o===i){Re=null;break}var d=o.sibling;if(d!==null){d.return=o.return,Re=d;break}Re=o.return}}function O0(i){for(;Re!==null;){var o=Re;try{switch(o.tag){case 0:case 11:case 15:var d=o.return;try{yh(4,o)}catch(H){tn(o,d,H)}break;case 1:var p=o.stateNode;if(typeof p.componentDidMount=="function"){var w=o.return;try{p.componentDidMount()}catch(H){tn(o,w,H)}}var T=o.return;try{Xp(o)}catch(H){tn(o,T,H)}break;case 5:var L=o.return;try{Xp(o)}catch(H){tn(o,L,H)}}}catch(H){tn(o,o.return,H)}if(o===i){Re=null;break}var W=o.sibling;if(W!==null){W.return=o.return,Re=W;break}Re=o.return}}var WA=Math.ceil,xh=O.ReactCurrentDispatcher,eg=O.ReactCurrentOwner,Fr=O.ReactCurrentBatchConfig,yt=0,Nn=null,un=null,Rn=0,Sr=0,Tl=zi(0),xn=0,cu=null,ua=0,wh=0,tg=0,uu=null,cr=null,ng=0,Cl=1/0,ui=null,_h=!1,rg=null,Gi=null,Eh=!1,Qi=null,bh=0,du=0,sg=null,Sh=-1,Nh=0;function Jn(){return(yt&6)!==0?Ot():Sh!==-1?Sh:Sh=Ot()}function Yi(i){return(i.mode&1)===0?1:(yt&2)!==0&&Rn!==0?Rn&-Rn:IA.transition!==null?(Nh===0&&(Nh=Jo()),Nh):(i=mt,i!==0||(i=window.event,i=i===void 0?16:Vc(i.type)),i)}function ss(i,o,d,p){if(50<du)throw du=0,sg=null,Error(t(185));Di(i,d,p),((yt&2)===0||i!==Nn)&&(i===Nn&&((yt&2)===0&&(wh|=d),xn===4&&Xi(i,Rn)),ur(i,p),d===1&&yt===0&&(o.mode&1)===0&&(Cl=Ot()+500,Zd&&qi()))}function ur(i,o){var d=i.callbackNode;Js(i,o);var p=Xo(i,i===Nn?Rn:0);if(p===0)d!==null&&Dc(d),i.callbackNode=null,i.callbackPriority=0;else if(o=p&-p,i.callbackPriority!==o){if(d!=null&&Dc(d),o===1)i.tag===0?CA(M0.bind(null,i)):Ew(M0.bind(null,i)),bA(function(){(yt&6)===0&&qi()}),d=null;else{switch(Li(p)){case 1:d=Qo;break;case 4:d=Pi;break;case 16:d=Pr;break;case 536870912:d=Nd;break;default:d=Pr}d=W0(d,L0.bind(null,i))}i.callbackPriority=o,i.callbackNode=d}}function L0(i,o){if(Sh=-1,Nh=0,(yt&6)!==0)throw Error(t(327));var d=i.callbackNode;if(Il()&&i.callbackNode!==d)return null;var p=Xo(i,i===Nn?Rn:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||o)o=Th(i,p);else{o=p;var w=yt;yt|=2;var T=V0();(Nn!==i||Rn!==o)&&(ui=null,Cl=Ot()+500,ha(i,o));do try{GA();break}catch(W){F0(i,W)}while(!0);Ep(),xh.current=T,yt=w,un!==null?o=0:(Nn=null,Rn=0,o=xn)}if(o!==0){if(o===2&&(w=xr(i),w!==0&&(p=w,o=ig(i,w))),o===1)throw d=cu,ha(i,0),Xi(i,p),ur(i,Ot()),d;if(o===6)Xi(i,p);else{if(w=i.current.alternate,(p&30)===0&&!HA(w)&&(o=Th(i,p),o===2&&(T=xr(i),T!==0&&(p=T,o=ig(i,T))),o===1))throw d=cu,ha(i,0),Xi(i,p),ur(i,Ot()),d;switch(i.finishedWork=w,i.finishedLanes=p,o){case 0:case 1:throw Error(t(345));case 2:fa(i,cr,ui);break;case 3:if(Xi(i,p),(p&130023424)===p&&(o=ng+500-Ot(),10<o)){if(Xo(i,0)!==0)break;if(w=i.suspendedLanes,(w&p)!==p){Jn(),i.pingedLanes|=i.suspendedLanes&w;break}i.timeoutHandle=dp(fa.bind(null,i,cr,ui),o);break}fa(i,cr,ui);break;case 4:if(Xi(i,p),(p&4194240)===p)break;for(o=i.eventTimes,w=-1;0<p;){var L=31-Qn(p);T=1<<L,L=o[L],L>w&&(w=L),p&=~T}if(p=w,p=Ot()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*WA(p/1960))-p,10<p){i.timeoutHandle=dp(fa.bind(null,i,cr,ui),p);break}fa(i,cr,ui);break;case 5:fa(i,cr,ui);break;default:throw Error(t(329))}}}return ur(i,Ot()),i.callbackNode===d?L0.bind(null,i):null}function ig(i,o){var d=uu;return i.current.memoizedState.isDehydrated&&(ha(i,o).flags|=256),i=Th(i,o),i!==2&&(o=cr,cr=d,o!==null&&og(o)),i}function og(i){cr===null?cr=i:cr.push.apply(cr,i)}function HA(i){for(var o=i;;){if(o.flags&16384){var d=o.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var p=0;p<d.length;p++){var w=d[p],T=w.getSnapshot;w=w.value;try{if(!Zr(T(),w))return!1}catch{return!1}}}if(d=o.child,o.subtreeFlags&16384&&d!==null)d.return=o,o=d;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Xi(i,o){for(o&=~tg,o&=~wh,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var d=31-Qn(o),p=1<<d;i[d]=-1,o&=~p}}function M0(i){if((yt&6)!==0)throw Error(t(327));Il();var o=Xo(i,0);if((o&1)===0)return ur(i,Ot()),null;var d=Th(i,o);if(i.tag!==0&&d===2){var p=xr(i);p!==0&&(o=p,d=ig(i,p))}if(d===1)throw d=cu,ha(i,0),Xi(i,o),ur(i,Ot()),d;if(d===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,fa(i,cr,ui),ur(i,Ot()),null}function ag(i,o){var d=yt;yt|=1;try{return i(o)}finally{yt=d,yt===0&&(Cl=Ot()+500,Zd&&qi())}}function da(i){Qi!==null&&Qi.tag===0&&(yt&6)===0&&Il();var o=yt;yt|=1;var d=Fr.transition,p=mt;try{if(Fr.transition=null,mt=1,i)return i()}finally{mt=p,Fr.transition=d,yt=o,(yt&6)===0&&qi()}}function lg(){Sr=Tl.current,$t(Tl)}function ha(i,o){i.finishedWork=null,i.finishedLanes=0;var d=i.timeoutHandle;if(d!==-1&&(i.timeoutHandle=-1,EA(d)),un!==null)for(d=un.return;d!==null;){var p=d;switch(vp(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Xd();break;case 3:bl(),$t(or),$t(Mn),Ap();break;case 5:Ip(p);break;case 4:bl();break;case 13:$t(Yt);break;case 19:$t(Yt);break;case 10:bp(p.type._context);break;case 22:case 23:lg()}d=d.return}if(Nn=i,un=i=Ji(i.current,null),Rn=Sr=o,xn=0,cu=null,tg=wh=ua=0,cr=uu=null,aa!==null){for(o=0;o<aa.length;o++)if(d=aa[o],p=d.interleaved,p!==null){d.interleaved=null;var w=p.next,T=d.pending;if(T!==null){var L=T.next;T.next=w,p.next=L}d.pending=p}aa=null}return i}function F0(i,o){do{var d=un;try{if(Ep(),ch.current=fh,uh){for(var p=Xt.memoizedState;p!==null;){var w=p.queue;w!==null&&(w.pending=null),p=p.next}uh=!1}if(ca=0,Sn=yn=Xt=null,ru=!1,su=0,eg.current=null,d===null||d.return===null){xn=1,cu=o,un=null;break}e:{var T=i,L=d.return,W=d,H=o;if(o=Rn,W.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){var se=H,pe=W,ge=pe.tag;if((pe.mode&1)===0&&(ge===0||ge===11||ge===15)){var fe=pe.alternate;fe?(pe.updateQueue=fe.updateQueue,pe.memoizedState=fe.memoizedState,pe.lanes=fe.lanes):(pe.updateQueue=null,pe.memoizedState=null)}var Ie=c0(L);if(Ie!==null){Ie.flags&=-257,u0(Ie,L,W,T,o),Ie.mode&1&&l0(T,se,o),o=Ie,H=se;var Oe=o.updateQueue;if(Oe===null){var Me=new Set;Me.add(H),o.updateQueue=Me}else Oe.add(H);break e}else{if((o&1)===0){l0(T,se,o),cg();break e}H=Error(t(426))}}else if(Kt&&W.mode&1){var an=c0(L);if(an!==null){(an.flags&65536)===0&&(an.flags|=256),u0(an,L,W,T,o),wp(Sl(H,W));break e}}T=H=Sl(H,W),xn!==4&&(xn=2),uu===null?uu=[T]:uu.push(T),T=L;do{switch(T.tag){case 3:T.flags|=65536,o&=-o,T.lanes|=o;var te=o0(T,H,o);kw(T,te);break e;case 1:W=H;var G=T.type,ne=T.stateNode;if((T.flags&128)===0&&(typeof G.getDerivedStateFromError=="function"||ne!==null&&typeof ne.componentDidCatch=="function"&&(Gi===null||!Gi.has(ne)))){T.flags|=65536,o&=-o,T.lanes|=o;var ye=a0(T,W,o);kw(T,ye);break e}}T=T.return}while(T!==null)}$0(d)}catch(Ve){o=Ve,un===d&&d!==null&&(un=d=d.return);continue}break}while(!0)}function V0(){var i=xh.current;return xh.current=fh,i===null?fh:i}function cg(){(xn===0||xn===3||xn===2)&&(xn=4),Nn===null||(ua&268435455)===0&&(wh&268435455)===0||Xi(Nn,Rn)}function Th(i,o){var d=yt;yt|=2;var p=V0();(Nn!==i||Rn!==o)&&(ui=null,ha(i,o));do try{KA();break}catch(w){F0(i,w)}while(!0);if(Ep(),yt=d,xh.current=p,un!==null)throw Error(t(261));return Nn=null,Rn=0,xn}function KA(){for(;un!==null;)U0(un)}function GA(){for(;un!==null&&!bd();)U0(un)}function U0(i){var o=q0(i.alternate,i,Sr);i.memoizedProps=i.pendingProps,o===null?$0(i):un=o,eg.current=null}function $0(i){var o=i;do{var d=o.alternate;if(i=o.return,(o.flags&32768)===0){if(d=UA(d,o,Sr),d!==null){un=d;return}}else{if(d=$A(d,o),d!==null){d.flags&=32767,un=d;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{xn=6,un=null;return}}if(o=o.sibling,o!==null){un=o;return}un=o=i}while(o!==null);xn===0&&(xn=5)}function fa(i,o,d){var p=mt,w=Fr.transition;try{Fr.transition=null,mt=1,QA(i,o,d,p)}finally{Fr.transition=w,mt=p}return null}function QA(i,o,d,p){do Il();while(Qi!==null);if((yt&6)!==0)throw Error(t(327));d=i.finishedWork;var w=i.finishedLanes;if(d===null)return null;if(i.finishedWork=null,i.finishedLanes=0,d===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var T=d.lanes|d.childLanes;if(Pt(i,T),i===Nn&&(un=Nn=null,Rn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Eh||(Eh=!0,W0(Pr,function(){return Il(),null})),T=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||T){T=Fr.transition,Fr.transition=null;var L=mt;mt=1;var W=yt;yt|=4,eg.current=null,BA(i,d),P0(d,i),pA(cp),Fi=!!lp,cp=lp=null,i.current=d,qA(d),Hm(),yt=W,mt=L,Fr.transition=T}else i.current=d;if(Eh&&(Eh=!1,Qi=i,bh=w),T=i.pendingLanes,T===0&&(Gi=null),Td(d.stateNode),ur(i,Ot()),o!==null)for(p=i.onRecoverableError,d=0;d<o.length;d++)w=o[d],p(w.value,{componentStack:w.stack,digest:w.digest});if(_h)throw _h=!1,i=rg,rg=null,i;return(bh&1)!==0&&i.tag!==0&&Il(),T=i.pendingLanes,(T&1)!==0?i===sg?du++:(du=0,sg=i):du=0,qi(),null}function Il(){if(Qi!==null){var i=Li(bh),o=Fr.transition,d=mt;try{if(Fr.transition=null,mt=16>i?16:i,Qi===null)var p=!1;else{if(i=Qi,Qi=null,bh=0,(yt&6)!==0)throw Error(t(331));var w=yt;for(yt|=4,Re=i.current;Re!==null;){var T=Re,L=T.child;if((Re.flags&16)!==0){var W=T.deletions;if(W!==null){for(var H=0;H<W.length;H++){var se=W[H];for(Re=se;Re!==null;){var pe=Re;switch(pe.tag){case 0:case 11:case 15:lu(8,pe,T)}var ge=pe.child;if(ge!==null)ge.return=pe,Re=ge;else for(;Re!==null;){pe=Re;var fe=pe.sibling,Ie=pe.return;if(T0(pe),pe===se){Re=null;break}if(fe!==null){fe.return=Ie,Re=fe;break}Re=Ie}}}var Oe=T.alternate;if(Oe!==null){var Me=Oe.child;if(Me!==null){Oe.child=null;do{var an=Me.sibling;Me.sibling=null,Me=an}while(Me!==null)}}Re=T}}if((T.subtreeFlags&2064)!==0&&L!==null)L.return=T,Re=L;else e:for(;Re!==null;){if(T=Re,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:lu(9,T,T.return)}var te=T.sibling;if(te!==null){te.return=T.return,Re=te;break e}Re=T.return}}var G=i.current;for(Re=G;Re!==null;){L=Re;var ne=L.child;if((L.subtreeFlags&2064)!==0&&ne!==null)ne.return=L,Re=ne;else e:for(L=G;Re!==null;){if(W=Re,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:yh(9,W)}}catch(Ve){tn(W,W.return,Ve)}if(W===L){Re=null;break e}var ye=W.sibling;if(ye!==null){ye.return=W.return,Re=ye;break e}Re=W.return}}if(yt=w,qi(),yr&&typeof yr.onPostCommitFiberRoot=="function")try{yr.onPostCommitFiberRoot(Yo,i)}catch{}p=!0}return p}finally{mt=d,Fr.transition=o}}return!1}function z0(i,o,d){o=Sl(d,o),o=o0(i,o,1),i=Hi(i,o,1),o=Jn(),i!==null&&(Di(i,1,o),ur(i,o))}function tn(i,o,d){if(i.tag===3)z0(i,i,d);else for(;o!==null;){if(o.tag===3){z0(o,i,d);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Gi===null||!Gi.has(p))){i=Sl(d,i),i=a0(o,i,1),o=Hi(o,i,1),i=Jn(),o!==null&&(Di(o,1,i),ur(o,i));break}}o=o.return}}function YA(i,o,d){var p=i.pingCache;p!==null&&p.delete(o),o=Jn(),i.pingedLanes|=i.suspendedLanes&d,Nn===i&&(Rn&d)===d&&(xn===4||xn===3&&(Rn&130023424)===Rn&&500>Ot()-ng?ha(i,0):tg|=d),ur(i,o)}function B0(i,o){o===0&&((i.mode&1)===0?o=1:(o=Xa,Xa<<=1,(Xa&130023424)===0&&(Xa=4194304)));var d=Jn();i=ai(i,o),i!==null&&(Di(i,o,d),ur(i,d))}function XA(i){var o=i.memoizedState,d=0;o!==null&&(d=o.retryLane),B0(i,d)}function JA(i,o){var d=0;switch(i.tag){case 13:var p=i.stateNode,w=i.memoizedState;w!==null&&(d=w.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(o),B0(i,d)}var q0;q0=function(i,o,d){if(i!==null)if(i.memoizedProps!==o.pendingProps||or.current)lr=!0;else{if((i.lanes&d)===0&&(o.flags&128)===0)return lr=!1,VA(i,o,d);lr=(i.flags&131072)!==0}else lr=!1,Kt&&(o.flags&1048576)!==0&&bw(o,th,o.index);switch(o.lanes=0,o.tag){case 2:var p=o.type;gh(i,o),i=o.pendingProps;var w=gl(o,Mn.current);El(o,d),w=kp(null,o,p,i,w,d);var T=Dp();return o.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,ar(p)?(T=!0,Jd(o)):T=!1,o.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,Tp(o),w.updater=mh,o.stateNode=w,w._reactInternals=o,Up(o,p,i,d),o=qp(null,o,p,!0,T,d)):(o.tag=0,Kt&&T&&gp(o),Xn(null,o,w,d),o=o.child),o;case 16:p=o.elementType;e:{switch(gh(i,o),i=o.pendingProps,w=p._init,p=w(p._payload),o.type=p,w=o.tag=eP(p),i=ts(p,i),w){case 0:o=Bp(null,o,p,i,d);break e;case 1:o=g0(null,o,p,i,d);break e;case 11:o=d0(null,o,p,i,d);break e;case 14:o=h0(null,o,p,ts(p.type,i),d);break e}throw Error(t(306,p,""))}return o;case 0:return p=o.type,w=o.pendingProps,w=o.elementType===p?w:ts(p,w),Bp(i,o,p,w,d);case 1:return p=o.type,w=o.pendingProps,w=o.elementType===p?w:ts(p,w),g0(i,o,p,w,d);case 3:e:{if(v0(o),i===null)throw Error(t(387));p=o.pendingProps,T=o.memoizedState,w=T.element,Rw(i,o),ah(o,p,null,d);var L=o.memoizedState;if(p=L.element,T.isDehydrated)if(T={element:p,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},o.updateQueue.baseState=T,o.memoizedState=T,o.flags&256){w=Sl(Error(t(423)),o),o=y0(i,o,p,d,w);break e}else if(p!==w){w=Sl(Error(t(424)),o),o=y0(i,o,p,d,w);break e}else for(br=$i(o.stateNode.containerInfo.firstChild),Er=o,Kt=!0,es=null,d=Aw(o,null,p,d),o.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(xl(),p===w){o=ci(i,o,d);break e}Xn(i,o,p,d)}o=o.child}return o;case 5:return Ow(o),i===null&&xp(o),p=o.type,w=o.pendingProps,T=i!==null?i.memoizedProps:null,L=w.children,up(p,w)?L=null:T!==null&&up(p,T)&&(o.flags|=32),p0(i,o),Xn(i,o,L,d),o.child;case 6:return i===null&&xp(o),null;case 13:return x0(i,o,d);case 4:return Cp(o,o.stateNode.containerInfo),p=o.pendingProps,i===null?o.child=wl(o,null,p,d):Xn(i,o,p,d),o.child;case 11:return p=o.type,w=o.pendingProps,w=o.elementType===p?w:ts(p,w),d0(i,o,p,w,d);case 7:return Xn(i,o,o.pendingProps,d),o.child;case 8:return Xn(i,o,o.pendingProps.children,d),o.child;case 12:return Xn(i,o,o.pendingProps.children,d),o.child;case 10:e:{if(p=o.type._context,w=o.pendingProps,T=o.memoizedProps,L=w.value,Lt(sh,p._currentValue),p._currentValue=L,T!==null)if(Zr(T.value,L)){if(T.children===w.children&&!or.current){o=ci(i,o,d);break e}}else for(T=o.child,T!==null&&(T.return=o);T!==null;){var W=T.dependencies;if(W!==null){L=T.child;for(var H=W.firstContext;H!==null;){if(H.context===p){if(T.tag===1){H=li(-1,d&-d),H.tag=2;var se=T.updateQueue;if(se!==null){se=se.shared;var pe=se.pending;pe===null?H.next=H:(H.next=pe.next,pe.next=H),se.pending=H}}T.lanes|=d,H=T.alternate,H!==null&&(H.lanes|=d),Sp(T.return,d,o),W.lanes|=d;break}H=H.next}}else if(T.tag===10)L=T.type===o.type?null:T.child;else if(T.tag===18){if(L=T.return,L===null)throw Error(t(341));L.lanes|=d,W=L.alternate,W!==null&&(W.lanes|=d),Sp(L,d,o),L=T.sibling}else L=T.child;if(L!==null)L.return=T;else for(L=T;L!==null;){if(L===o){L=null;break}if(T=L.sibling,T!==null){T.return=L.return,L=T;break}L=L.return}T=L}Xn(i,o,w.children,d),o=o.child}return o;case 9:return w=o.type,p=o.pendingProps.children,El(o,d),w=Lr(w),p=p(w),o.flags|=1,Xn(i,o,p,d),o.child;case 14:return p=o.type,w=ts(p,o.pendingProps),w=ts(p.type,w),h0(i,o,p,w,d);case 15:return f0(i,o,o.type,o.pendingProps,d);case 17:return p=o.type,w=o.pendingProps,w=o.elementType===p?w:ts(p,w),gh(i,o),o.tag=1,ar(p)?(i=!0,Jd(o)):i=!1,El(o,d),s0(o,p,w),Up(o,p,w,d),qp(null,o,p,!0,i,d);case 19:return _0(i,o,d);case 22:return m0(i,o,d)}throw Error(t(156,o.tag))};function W0(i,o){return Qa(i,o)}function ZA(i,o,d,p){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vr(i,o,d,p){return new ZA(i,o,d,p)}function ug(i){return i=i.prototype,!(!i||!i.isReactComponent)}function eP(i){if(typeof i=="function")return ug(i)?1:0;if(i!=null){if(i=i.$$typeof,i===z)return 11;if(i===K)return 14}return 2}function Ji(i,o){var d=i.alternate;return d===null?(d=Vr(i.tag,o,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=o,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&14680064,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,o=i.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d}function Ch(i,o,d,p,w,T){var L=2;if(p=i,typeof i=="function")ug(i)&&(L=1);else if(typeof i=="string")L=5;else e:switch(i){case P:return ma(d.children,w,T,o);case R:L=8,w|=8;break;case D:return i=Vr(12,d,o,w|2),i.elementType=D,i.lanes=T,i;case M:return i=Vr(13,d,o,w),i.elementType=M,i.lanes=T,i;case ie:return i=Vr(19,d,o,w),i.elementType=ie,i.lanes=T,i;case X:return Ih(d,w,T,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case k:L=10;break e;case $:L=9;break e;case z:L=11;break e;case K:L=14;break e;case J:L=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Vr(L,d,o,w),o.elementType=i,o.type=p,o.lanes=T,o}function ma(i,o,d,p){return i=Vr(7,i,p,o),i.lanes=d,i}function Ih(i,o,d,p){return i=Vr(22,i,p,o),i.elementType=X,i.lanes=d,i.stateNode={isHidden:!1},i}function dg(i,o,d){return i=Vr(6,i,null,o),i.lanes=d,i}function hg(i,o,d){return o=Vr(4,i.children!==null?i.children:[],i.key,o),o.lanes=d,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function tP(i,o,d,p,w){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ki(0),this.expirationTimes=ki(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ki(0),this.identifierPrefix=p,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function fg(i,o,d,p,w,T,L,W,H){return i=new tP(i,o,d,W,H),o===1?(o=1,T===!0&&(o|=8)):o=0,T=Vr(3,null,null,o),i.current=T,T.stateNode=i,T.memoizedState={element:p,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tp(T),i}function nP(i,o,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:p==null?null:""+p,children:i,containerInfo:o,implementation:d}}function H0(i){if(!i)return Bi;i=i._reactInternals;e:{if(Hr(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(ar(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var d=i.type;if(ar(d))return ww(i,d,o)}return o}function K0(i,o,d,p,w,T,L,W,H){return i=fg(d,p,!0,i,w,T,L,W,H),i.context=H0(null),d=i.current,p=Jn(),w=Yi(d),T=li(p,w),T.callback=o??null,Hi(d,T,w),i.current.lanes=w,Di(i,w,p),ur(i,p),i}function jh(i,o,d,p){var w=o.current,T=Jn(),L=Yi(w);return d=H0(d),o.context===null?o.context=d:o.pendingContext=d,o=li(T,L),o.payload={element:i},p=p===void 0?null:p,p!==null&&(o.callback=p),i=Hi(w,o,L),i!==null&&(ss(i,w,L,T),oh(i,w,L)),L}function Ah(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function G0(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<o?d:o}}function mg(i,o){G0(i,o),(i=i.alternate)&&G0(i,o)}function rP(){return null}var Q0=typeof reportError=="function"?reportError:function(i){console.error(i)};function pg(i){this._internalRoot=i}Ph.prototype.render=pg.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));jh(i,o,null,null)},Ph.prototype.unmount=pg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;da(function(){jh(null,i,null,null)}),o[ri]=null}};function Ph(i){this._internalRoot=i}Ph.prototype.unstable_scheduleHydration=function(i){if(i){var o=Pd();i={blockedOn:null,target:i,priority:o};for(var d=0;d<ws.length&&o!==0&&o<ws[d].priority;d++);ws.splice(d,0,i),d===0&&Dd(i)}};function gg(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Rh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Y0(){}function sP(i,o,d,p,w){if(w){if(typeof p=="function"){var T=p;p=function(){var se=Ah(L);T.call(se)}}var L=K0(o,p,i,0,null,!1,!1,"",Y0);return i._reactRootContainer=L,i[ri]=L.current,Qc(i.nodeType===8?i.parentNode:i),da(),L}for(;w=i.lastChild;)i.removeChild(w);if(typeof p=="function"){var W=p;p=function(){var se=Ah(H);W.call(se)}}var H=fg(i,0,!1,null,null,!1,!1,"",Y0);return i._reactRootContainer=H,i[ri]=H.current,Qc(i.nodeType===8?i.parentNode:i),da(function(){jh(o,H,d,p)}),H}function kh(i,o,d,p,w){var T=d._reactRootContainer;if(T){var L=T;if(typeof w=="function"){var W=w;w=function(){var H=Ah(L);W.call(H)}}jh(o,L,i,w)}else L=sP(d,o,i,w,p);return Ah(L)}jd=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var d=Ri(o.pendingLanes);d!==0&&(Oi(o,d|1),ur(o,Ot()),(yt&6)===0&&(Cl=Ot()+500,qi()))}break;case 13:da(function(){var p=ai(i,1);if(p!==null){var w=Jn();ss(p,i,1,w)}}),mg(i,1)}},Ja=function(i){if(i.tag===13){var o=ai(i,134217728);if(o!==null){var d=Jn();ss(o,i,134217728,d)}mg(i,134217728)}},Ad=function(i){if(i.tag===13){var o=Yi(i),d=ai(i,o);if(d!==null){var p=Jn();ss(d,i,o,p)}mg(i,o)}},Pd=function(){return mt},Rd=function(i,o){var d=mt;try{return mt=i,o()}finally{mt=d}},ct=function(i,o,d){switch(o){case"input":if(Tt(i,d),o=d.name,d.type==="radio"&&o!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<d.length;o++){var p=d[o];if(p!==i&&p.form===i.form){var w=Yd(p);if(!w)throw Error(t(90));Ue(p),Tt(p,w)}}}break;case"textarea":vs(i,d);break;case"select":o=d.value,o!=null&&gr(i,!!d.multiple,o,!1)}},Qt=ag,Ac=da;var iP={usingClientEntryPoint:!1,Events:[Jc,ml,Yd,Gn,Ai,ag]},hu={findFiberByHostInstance:ra,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oP={bundleType:hu.bundleType,version:hu.version,rendererPackageName:hu.rendererPackageName,rendererConfig:hu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=kc(i),i===null?null:i.stateNode},findFiberByHostInstance:hu.findFiberByHostInstance||rP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dh.isDisabled&&Dh.supportsFiber)try{Yo=Dh.inject(oP),yr=Dh}catch{}}return dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iP,dr.createPortal=function(i,o){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gg(o))throw Error(t(200));return nP(i,o,null,d)},dr.createRoot=function(i,o){if(!gg(i))throw Error(t(299));var d=!1,p="",w=Q0;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(w=o.onRecoverableError)),o=fg(i,1,!1,null,null,d,!1,p,w),i[ri]=o.current,Qc(i.nodeType===8?i.parentNode:i),new pg(o)},dr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=kc(o),i=i===null?null:i.stateNode,i},dr.flushSync=function(i){return da(i)},dr.hydrate=function(i,o,d){if(!Rh(o))throw Error(t(200));return kh(null,i,o,!0,d)},dr.hydrateRoot=function(i,o,d){if(!gg(i))throw Error(t(405));var p=d!=null&&d.hydratedSources||null,w=!1,T="",L=Q0;if(d!=null&&(d.unstable_strictMode===!0&&(w=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onRecoverableError!==void 0&&(L=d.onRecoverableError)),o=K0(o,null,i,1,d??null,w,!1,T,L),i[ri]=o.current,Qc(i),p)for(i=0;i<p.length;i++)d=p[i],w=d._getVersion,w=w(d._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[d,w]:o.mutableSourceEagerHydrationData.push(d,w);return new Ph(o)},dr.render=function(i,o,d){if(!Rh(o))throw Error(t(200));return kh(null,i,o,!1,d)},dr.unmountComponentAtNode=function(i){if(!Rh(i))throw Error(t(40));return i._reactRootContainer?(da(function(){kh(null,null,i,!1,function(){i._reactRootContainer=null,i[ri]=null})}),!0):!1},dr.unstable_batchedUpdates=ag,dr.unstable_renderSubtreeIntoContainer=function(i,o,d,p){if(!Rh(d))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return kh(i,o,d,!1,p)},dr.version="18.3.1-next-f1338f8080-20240426",dr}var c_;function a1(){if(c_)return Eg.exports;c_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Eg.exports=TP(),Eg.exports}var Fa=a1();const Zf=i1(Fa);function ze(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function CP(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function l1(...n){return e=>n.forEach(t=>CP(t,e))}function xt(...n){return E.useCallback(l1(...n),n)}function Ti(n,e=[]){let t=[];function r(a,c){const u=E.createContext(c),h=t.length;t=[...t,c];function m(v){const{scope:y,children:b,...S}=v,_=(y==null?void 0:y[n][h])||u,x=E.useMemo(()=>S,Object.values(S));return l.jsx(_.Provider,{value:x,children:b})}function g(v,y){const b=(y==null?void 0:y[n][h])||u,S=E.useContext(b);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${a}\``)}return m.displayName=a+"Provider",[m,g]}const s=()=>{const a=t.map(c=>E.createContext(c));return function(u){const h=(u==null?void 0:u[n])||a;return E.useMemo(()=>({[`__scope${n}`]:{...u,[n]:h}}),[u,h])}};return s.scopeName=n,[r,IP(s,...e)]}function IP(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:m})=>{const v=h(a)[`__scope${m}`];return{...u,...v}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var Ta=E.forwardRef((n,e)=>{const{children:t,...r}=n,s=E.Children.toArray(t),a=s.find(jP);if(a){const c=a.props.children,u=s.map(h=>h===a?E.Children.count(c)>1?E.Children.only(null):E.isValidElement(c)?c.props.children:null:h);return l.jsx(tv,{...r,ref:e,children:E.isValidElement(c)?E.cloneElement(c,void 0,u):null})}return l.jsx(tv,{...r,ref:e,children:t})});Ta.displayName="Slot";var tv=E.forwardRef((n,e)=>{const{children:t,...r}=n;if(E.isValidElement(t)){const s=PP(t);return E.cloneElement(t,{...AP(r,t.props),ref:e?l1(e,s):s})}return E.Children.count(t)>1?E.Children.only(null):null});tv.displayName="SlotClone";var c1=({children:n})=>l.jsx(l.Fragment,{children:n});function jP(n){return E.isValidElement(n)&&n.type===c1}function AP(n,e){const t={...e};for(const r in e){const s=n[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?t[r]=(...u)=>{a(...u),s(...u)}:s&&(t[r]=s):r==="style"?t[r]={...s,...a}:r==="className"&&(t[r]=[s,a].filter(Boolean).join(" "))}return{...n,...t}}function PP(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function uy(n){const e=n+"CollectionProvider",[t,r]=Ti(e),[s,a]=t(e,{collectionRef:{current:null},itemMap:new Map}),c=b=>{const{scope:S,children:_}=b,x=Ee.useRef(null),A=Ee.useRef(new Map).current;return l.jsx(s,{scope:S,itemMap:A,collectionRef:x,children:_})};c.displayName=e;const u=n+"CollectionSlot",h=Ee.forwardRef((b,S)=>{const{scope:_,children:x}=b,A=a(u,_),I=xt(S,A.collectionRef);return l.jsx(Ta,{ref:I,children:x})});h.displayName=u;const m=n+"CollectionItemSlot",g="data-radix-collection-item",v=Ee.forwardRef((b,S)=>{const{scope:_,children:x,...A}=b,I=Ee.useRef(null),C=xt(S,I),O=a(m,_);return Ee.useEffect(()=>(O.itemMap.set(I,{ref:I,...A}),()=>void O.itemMap.delete(I))),l.jsx(Ta,{[g]:"",ref:C,children:x})});v.displayName=m;function y(b){const S=a(n+"CollectionConsumer",b);return Ee.useCallback(()=>{const x=S.collectionRef.current;if(!x)return[];const A=Array.from(x.querySelectorAll(`[${g}]`));return Array.from(S.itemMap.values()).sort((O,V)=>A.indexOf(O.ref.current)-A.indexOf(V.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:c,Slot:h,ItemSlot:v},y,r]}var RP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ke=RP.reduce((n,e)=>{const t=E.forwardRef((r,s)=>{const{asChild:a,...c}=r,u=a?Ta:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(u,{...c,ref:s})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function em(n,e){n&&Fa.flushSync(()=>n.dispatchEvent(e))}function _n(n){const e=E.useRef(n);return E.useEffect(()=>{e.current=n}),E.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function dy(n,e=globalThis==null?void 0:globalThis.document){const t=_n(n);E.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var kP="DismissableLayer",nv="dismissableLayer.update",DP="dismissableLayer.pointerDownOutside",OP="dismissableLayer.focusOutside",u_,u1=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),d1=E.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=n,m=E.useContext(u1),[g,v]=E.useState(null),y=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=E.useState({}),S=xt(e,P=>v(P)),_=Array.from(m.layers),[x]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),A=_.indexOf(x),I=g?_.indexOf(g):-1,C=m.layersWithOutsidePointerEventsDisabled.size>0,O=I>=A,V=MP(P=>{const R=P.target,D=[...m.branches].some(k=>k.contains(R));!O||D||(s==null||s(P),c==null||c(P),P.defaultPrevented||u==null||u())},y),B=FP(P=>{const R=P.target;[...m.branches].some(k=>k.contains(R))||(a==null||a(P),c==null||c(P),P.defaultPrevented||u==null||u())},y);return dy(P=>{I===m.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},y),E.useEffect(()=>{if(g)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(u_=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(g)),m.layers.add(g),d_(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=u_)}},[g,y,t,m]),E.useEffect(()=>()=>{g&&(m.layers.delete(g),m.layersWithOutsidePointerEventsDisabled.delete(g),d_())},[g,m]),E.useEffect(()=>{const P=()=>b({});return document.addEventListener(nv,P),()=>document.removeEventListener(nv,P)},[]),l.jsx(Ke.div,{...h,ref:S,style:{pointerEvents:C?O?"auto":"none":void 0,...n.style},onFocusCapture:ze(n.onFocusCapture,B.onFocusCapture),onBlurCapture:ze(n.onBlurCapture,B.onBlurCapture),onPointerDownCapture:ze(n.onPointerDownCapture,V.onPointerDownCapture)})});d1.displayName=kP;var LP="DismissableLayerBranch",h1=E.forwardRef((n,e)=>{const t=E.useContext(u1),r=E.useRef(null),s=xt(e,r);return E.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),l.jsx(Ke.div,{...n,ref:s})});h1.displayName=LP;function MP(n,e=globalThis==null?void 0:globalThis.document){const t=_n(n),r=E.useRef(!1),s=E.useRef(()=>{});return E.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){f1(DP,t,m,{discrete:!0})};const m={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function FP(n,e=globalThis==null?void 0:globalThis.document){const t=_n(n),r=E.useRef(!1);return E.useEffect(()=>{const s=a=>{a.target&&!r.current&&f1(OP,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function d_(){const n=new CustomEvent(nv);document.dispatchEvent(n)}function f1(n,e,t,{discrete:r}){const s=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?em(s,a):s.dispatchEvent(a)}var VP=d1,UP=h1,Gt=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},$P="Portal",m1=E.forwardRef((n,e)=>{var u;const{container:t,...r}=n,[s,a]=E.useState(!1);Gt(()=>a(!0),[]);const c=t||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?Zf.createPortal(l.jsx(Ke.div,{...r,ref:e}),c):null});m1.displayName=$P;function zP(n,e){return E.useReducer((t,r)=>e[t][r]??t,n)}var hy=n=>{const{present:e,children:t}=n,r=BP(e),s=typeof t=="function"?t({present:r.isPresent}):E.Children.only(t),a=xt(r.ref,qP(s));return typeof t=="function"||r.isPresent?E.cloneElement(s,{ref:a}):null};hy.displayName="Presence";function BP(n){const[e,t]=E.useState(),r=E.useRef({}),s=E.useRef(n),a=E.useRef("none"),c=n?"mounted":"unmounted",[u,h]=zP(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const m=Lh(r.current);a.current=u==="mounted"?m:"none"},[u]),Gt(()=>{const m=r.current,g=s.current;if(g!==n){const y=a.current,b=Lh(m);n?h("MOUNT"):b==="none"||(m==null?void 0:m.display)==="none"?h("UNMOUNT"):h(g&&y!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,h]),Gt(()=>{if(e){const m=v=>{const b=Lh(r.current).includes(v.animationName);v.target===e&&b&&Fa.flushSync(()=>h("ANIMATION_END"))},g=v=>{v.target===e&&(a.current=Lh(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:E.useCallback(m=>{m&&(r.current=getComputedStyle(m)),t(m)},[])}}function Lh(n){return(n==null?void 0:n.animationName)||"none"}function qP(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Ca({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,s]=WP({defaultProp:e,onChange:t}),a=n!==void 0,c=a?n:r,u=_n(t),h=E.useCallback(m=>{if(a){const v=typeof m=="function"?m(n):m;v!==n&&u(v)}else s(m)},[a,n,s,u]);return[c,h]}function WP({defaultProp:n,onChange:e}){const t=E.useState(n),[r]=t,s=E.useRef(r),a=_n(e);return E.useEffect(()=>{s.current!==r&&(a(r),s.current=r)},[r,s,a]),t}var HP="VisuallyHidden",nd=E.forwardRef((n,e)=>l.jsx(Ke.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));nd.displayName=HP;var KP=nd,fy="ToastProvider",[my,GP,QP]=uy("Toast"),[p1,Iz]=Ti("Toast",[QP]),[YP,tm]=p1(fy),g1=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:c}=n,[u,h]=E.useState(null),[m,g]=E.useState(0),v=E.useRef(!1),y=E.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${fy}\`. Expected non-empty \`string\`.`),l.jsx(my.Provider,{scope:e,children:l.jsx(YP,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:m,viewport:u,onViewportChange:h,onToastAdd:E.useCallback(()=>g(b=>b+1),[]),onToastRemove:E.useCallback(()=>g(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:v,isClosePausedRef:y,children:c})})};g1.displayName=fy;var v1="ToastViewport",XP=["F8"],rv="toast.viewportPause",sv="toast.viewportResume",y1=E.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=XP,label:s="Notifications ({hotkey})",...a}=n,c=tm(v1,t),u=GP(t),h=E.useRef(null),m=E.useRef(null),g=E.useRef(null),v=E.useRef(null),y=xt(e,v,c.onViewportChange),b=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=c.toastCount>0;E.useEffect(()=>{const x=A=>{var C;r.every(O=>A[O]||A.code===O)&&((C=v.current)==null||C.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),E.useEffect(()=>{const x=h.current,A=v.current;if(S&&x&&A){const I=()=>{if(!c.isClosePausedRef.current){const B=new CustomEvent(rv);A.dispatchEvent(B),c.isClosePausedRef.current=!0}},C=()=>{if(c.isClosePausedRef.current){const B=new CustomEvent(sv);A.dispatchEvent(B),c.isClosePausedRef.current=!1}},O=B=>{!x.contains(B.relatedTarget)&&C()},V=()=>{x.contains(document.activeElement)||C()};return x.addEventListener("focusin",I),x.addEventListener("focusout",O),x.addEventListener("pointermove",I),x.addEventListener("pointerleave",V),window.addEventListener("blur",I),window.addEventListener("focus",C),()=>{x.removeEventListener("focusin",I),x.removeEventListener("focusout",O),x.removeEventListener("pointermove",I),x.removeEventListener("pointerleave",V),window.removeEventListener("blur",I),window.removeEventListener("focus",C)}}},[S,c.isClosePausedRef]);const _=E.useCallback(({tabbingDirection:x})=>{const I=u().map(C=>{const O=C.ref.current,V=[O,...uR(O)];return x==="forwards"?V:V.reverse()});return(x==="forwards"?I.reverse():I).flat()},[u]);return E.useEffect(()=>{const x=v.current;if(x){const A=I=>{var V,B,P;const C=I.altKey||I.ctrlKey||I.metaKey;if(I.key==="Tab"&&!C){const R=document.activeElement,D=I.shiftKey;if(I.target===x&&D){(V=m.current)==null||V.focus();return}const z=_({tabbingDirection:D?"backwards":"forwards"}),M=z.findIndex(ie=>ie===R);Ng(z.slice(M+1))?I.preventDefault():D?(B=m.current)==null||B.focus():(P=g.current)==null||P.focus()}};return x.addEventListener("keydown",A),()=>x.removeEventListener("keydown",A)}},[u,_]),l.jsxs(UP,{ref:h,role:"region","aria-label":s.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&l.jsx(iv,{ref:m,onFocusFromOutsideViewport:()=>{const x=_({tabbingDirection:"forwards"});Ng(x)}}),l.jsx(my.Slot,{scope:t,children:l.jsx(Ke.ol,{tabIndex:-1,...a,ref:y})}),S&&l.jsx(iv,{ref:g,onFocusFromOutsideViewport:()=>{const x=_({tabbingDirection:"backwards"});Ng(x)}})]})});y1.displayName=v1;var x1="ToastFocusProxy",iv=E.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,a=tm(x1,t);return l.jsx(nd,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:c=>{var m;const u=c.relatedTarget;!((m=a.viewport)!=null&&m.contains(u))&&r()}})});iv.displayName=x1;var nm="Toast",JP="toast.swipeStart",ZP="toast.swipeMove",eR="toast.swipeCancel",tR="toast.swipeEnd",w1=E.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:a,...c}=n,[u=!0,h]=Ca({prop:r,defaultProp:s,onChange:a});return l.jsx(hy,{present:t||u,children:l.jsx(sR,{open:u,...c,ref:e,onClose:()=>h(!1),onPause:_n(n.onPause),onResume:_n(n.onResume),onSwipeStart:ze(n.onSwipeStart,m=>{m.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ze(n.onSwipeMove,m=>{const{x:g,y:v}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","move"),m.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${g}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:ze(n.onSwipeCancel,m=>{m.currentTarget.setAttribute("data-swipe","cancel"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ze(n.onSwipeEnd,m=>{const{x:g,y:v}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","end"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${g}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),h(!1)})})})});w1.displayName=nm;var[nR,rR]=p1(nm,{onClose(){}}),sR=E.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:a,onClose:c,onEscapeKeyDown:u,onPause:h,onResume:m,onSwipeStart:g,onSwipeMove:v,onSwipeCancel:y,onSwipeEnd:b,...S}=n,_=tm(nm,t),[x,A]=E.useState(null),I=xt(e,ie=>A(ie)),C=E.useRef(null),O=E.useRef(null),V=s||_.duration,B=E.useRef(0),P=E.useRef(V),R=E.useRef(0),{onToastAdd:D,onToastRemove:k}=_,$=_n(()=>{var K;(x==null?void 0:x.contains(document.activeElement))&&((K=_.viewport)==null||K.focus()),c()}),z=E.useCallback(ie=>{!ie||ie===1/0||(window.clearTimeout(R.current),B.current=new Date().getTime(),R.current=window.setTimeout($,ie))},[$]);E.useEffect(()=>{const ie=_.viewport;if(ie){const K=()=>{z(P.current),m==null||m()},J=()=>{const X=new Date().getTime()-B.current;P.current=P.current-X,window.clearTimeout(R.current),h==null||h()};return ie.addEventListener(rv,J),ie.addEventListener(sv,K),()=>{ie.removeEventListener(rv,J),ie.removeEventListener(sv,K)}}},[_.viewport,V,h,m,z]),E.useEffect(()=>{a&&!_.isClosePausedRef.current&&z(V)},[a,V,_.isClosePausedRef,z]),E.useEffect(()=>(D(),()=>k()),[D,k]);const M=E.useMemo(()=>x?C1(x):null,[x]);return _.viewport?l.jsxs(l.Fragment,{children:[M&&l.jsx(iR,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:M}),l.jsx(nR,{scope:t,onClose:$,children:Fa.createPortal(l.jsx(my.ItemSlot,{scope:t,children:l.jsx(VP,{asChild:!0,onEscapeKeyDown:ze(u,()=>{_.isFocusedToastEscapeKeyDownRef.current||$(),_.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(Ke.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":_.swipeDirection,...S,ref:I,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:ze(n.onKeyDown,ie=>{ie.key==="Escape"&&(u==null||u(ie.nativeEvent),ie.nativeEvent.defaultPrevented||(_.isFocusedToastEscapeKeyDownRef.current=!0,$()))}),onPointerDown:ze(n.onPointerDown,ie=>{ie.button===0&&(C.current={x:ie.clientX,y:ie.clientY})}),onPointerMove:ze(n.onPointerMove,ie=>{if(!C.current)return;const K=ie.clientX-C.current.x,J=ie.clientY-C.current.y,X=!!O.current,q=["left","right"].includes(_.swipeDirection),Q=["left","up"].includes(_.swipeDirection)?Math.min:Math.max,Z=q?Q(0,K):0,U=q?0:Q(0,J),Y=ie.pointerType==="touch"?10:2,le={x:Z,y:U},be={originalEvent:ie,delta:le};X?(O.current=le,Mh(ZP,v,be,{discrete:!1})):h_(le,_.swipeDirection,Y)?(O.current=le,Mh(JP,g,be,{discrete:!1}),ie.target.setPointerCapture(ie.pointerId)):(Math.abs(K)>Y||Math.abs(J)>Y)&&(C.current=null)}),onPointerUp:ze(n.onPointerUp,ie=>{const K=O.current,J=ie.target;if(J.hasPointerCapture(ie.pointerId)&&J.releasePointerCapture(ie.pointerId),O.current=null,C.current=null,K){const X=ie.currentTarget,q={originalEvent:ie,delta:K};h_(K,_.swipeDirection,_.swipeThreshold)?Mh(tR,b,q,{discrete:!0}):Mh(eR,y,q,{discrete:!0}),X.addEventListener("click",Q=>Q.preventDefault(),{once:!0})}})})})}),_.viewport)})]}):null}),iR=n=>{const{__scopeToast:e,children:t,...r}=n,s=tm(nm,e),[a,c]=E.useState(!1),[u,h]=E.useState(!1);return lR(()=>c(!0)),E.useEffect(()=>{const m=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(m)},[]),u?null:l.jsx(m1,{asChild:!0,children:l.jsx(nd,{...r,children:a&&l.jsxs(l.Fragment,{children:[s.label," ",t]})})})},oR="ToastTitle",_1=E.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return l.jsx(Ke.div,{...r,ref:e})});_1.displayName=oR;var aR="ToastDescription",E1=E.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return l.jsx(Ke.div,{...r,ref:e})});E1.displayName=aR;var b1="ToastAction",S1=E.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?l.jsx(T1,{altText:t,asChild:!0,children:l.jsx(py,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${b1}\`. Expected non-empty \`string\`.`),null)});S1.displayName=b1;var N1="ToastClose",py=E.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=rR(N1,t);return l.jsx(T1,{asChild:!0,children:l.jsx(Ke.button,{type:"button",...r,ref:e,onClick:ze(n.onClick,s.onClose)})})});py.displayName=N1;var T1=E.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return l.jsx(Ke.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function C1(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),cR(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const c=r.dataset.radixToastAnnounceAlt;c&&e.push(c)}else e.push(...C1(r))}}),e}function Mh(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,a=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?em(s,a):s.dispatchEvent(a)}var h_=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),a=r>s;return e==="left"||e==="right"?a&&r>t:!a&&s>t};function lR(n=()=>{}){const e=_n(n);Gt(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function cR(n){return n.nodeType===n.ELEMENT_NODE}function uR(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Ng(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var dR=g1,I1=y1,j1=w1,A1=_1,P1=E1,R1=S1,k1=py;function D1(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=D1(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function O1(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=D1(n))&&(r&&(r+=" "),r+=e);return r}const f_=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,m_=O1,rd=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return m_(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:a}=e,c=Object.keys(s).map(m=>{const g=t==null?void 0:t[m],v=a==null?void 0:a[m];if(g===null)return null;const y=f_(g)||f_(v);return s[m][y]}),u=t&&Object.entries(t).reduce((m,g)=>{let[v,y]=g;return y===void 0||(m[v]=y),m},{}),h=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((m,g)=>{let{class:v,className:y,...b}=g;return Object.entries(b).every(S=>{let[_,x]=S;return Array.isArray(x)?x.includes({...a,...u}[_]):{...a,...u}[_]===x})?[...m,v,y]:m},[]);return m_(n,c,h,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),L1=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=E.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:c,...u},h)=>E.createElement("svg",{ref:h,...fR,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:L1("lucide",s),...u},[...c.map(([m,g])=>E.createElement(m,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=(n,e)=>{const t=E.forwardRef(({className:r,...s},a)=>E.createElement(mR,{ref:a,iconNode:e,className:L1(`lucide-${hR(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=Je("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=Je("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=Je("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=Je("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=Je("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=Je("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=Je("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=Je("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=Je("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=Je("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=Je("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=Je("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=Je("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=Je("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=Je("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=Je("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=Je("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=Je("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=Je("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=Je("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=Je("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=Je("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=Je("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wf=Je("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=Je("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=Je("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=Je("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=Je("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=Je("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=Je("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=Je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=Je("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=Je("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=Je("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=Je("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=Je("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=Je("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=Je("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=Je("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=Je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=Je("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=Je("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=Je("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=Je("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=Je("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=Je("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=Je("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=Je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),vy="-",PR=n=>{const e=kR(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:c=>{const u=c.split(vy);return u[0]===""&&u.length!==1&&u.shift(),z1(u,e)||RR(c)},getConflictingClassGroupIds:(c,u)=>{const h=t[c]||[];return u&&r[c]?[...h,...r[c]]:h}}},z1=(n,e)=>{var c;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?z1(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const a=n.join(vy);return(c=e.validators.find(({validator:u})=>u(a)))==null?void 0:c.classGroupId},v_=/^\[(.+)\]$/,RR=n=>{if(v_.test(n)){const e=v_.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},kR=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return OR(Object.entries(n.classGroups),t).forEach(([a,c])=>{cv(c,r,a,e)}),r},cv=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const a=s===""?e:y_(e,s);a.classGroupId=t;return}if(typeof s=="function"){if(DR(s)){cv(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([a,c])=>{cv(c,y_(e,a),t,r)})})},y_=(n,e)=>{let t=n;return e.split(vy).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},DR=n=>n.isThemeGetter,OR=(n,e)=>e?n.map(([t,r])=>{const s=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([c,u])=>[e+c,u])):a);return[t,s]}):n,LR=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(a,c)=>{t.set(a,c),e++,e>n&&(e=0,r=t,t=new Map)};return{get(a){let c=t.get(a);if(c!==void 0)return c;if((c=r.get(a))!==void 0)return s(a,c),c},set(a,c){t.has(a)?t.set(a,c):s(a,c)}}},B1="!",MR=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],a=e.length,c=u=>{const h=[];let m=0,g=0,v;for(let x=0;x<u.length;x++){let A=u[x];if(m===0){if(A===s&&(r||u.slice(x,x+a)===e)){h.push(u.slice(g,x)),g=x+a;continue}if(A==="/"){v=x;continue}}A==="["?m++:A==="]"&&m--}const y=h.length===0?u:u.substring(g),b=y.startsWith(B1),S=b?y.substring(1):y,_=v&&v>g?v-g:void 0;return{modifiers:h,hasImportantModifier:b,baseClassName:S,maybePostfixModifierPosition:_}};return t?u=>t({className:u,parseClassName:c}):c},FR=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},VR=n=>({cache:LR(n.cacheSize),parseClassName:MR(n),...PR(n)}),UR=/\s+/,$R=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,a=[],c=n.trim().split(UR);let u="";for(let h=c.length-1;h>=0;h-=1){const m=c[h],{modifiers:g,hasImportantModifier:v,baseClassName:y,maybePostfixModifierPosition:b}=t(m);let S=!!b,_=r(S?y.substring(0,b):y);if(!_){if(!S){u=m+(u.length>0?" "+u:u);continue}if(_=r(y),!_){u=m+(u.length>0?" "+u:u);continue}S=!1}const x=FR(g).join(":"),A=v?x+B1:x,I=A+_;if(a.includes(I))continue;a.push(I);const C=s(_,S);for(let O=0;O<C.length;++O){const V=C[O];a.push(A+V)}u=m+(u.length>0?" "+u:u)}return u};function zR(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=q1(e))&&(r&&(r+=" "),r+=t);return r}const q1=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=q1(n[r]))&&(t&&(t+=" "),t+=e);return t};function BR(n,...e){let t,r,s,a=c;function c(h){const m=e.reduce((g,v)=>v(g),n());return t=VR(m),r=t.cache.get,s=t.cache.set,a=u,u(h)}function u(h){const m=r(h);if(m)return m;const g=$R(h,t);return s(h,g),g}return function(){return a(zR.apply(null,arguments))}}const zt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},W1=/^\[(?:([a-z-]+):)?(.+)\]$/i,qR=/^\d+\/\d+$/,WR=new Set(["px","full","screen"]),HR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,KR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,GR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,QR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,YR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,di=n=>Vl(n)||WR.has(n)||qR.test(n),eo=n=>pc(n,"length",s2),Vl=n=>!!n&&!Number.isNaN(Number(n)),Tg=n=>pc(n,"number",Vl),mu=n=>!!n&&Number.isInteger(Number(n)),XR=n=>n.endsWith("%")&&Vl(n.slice(0,-1)),ot=n=>W1.test(n),to=n=>HR.test(n),JR=new Set(["length","size","percentage"]),ZR=n=>pc(n,JR,H1),e2=n=>pc(n,"position",H1),t2=new Set(["image","url"]),n2=n=>pc(n,t2,o2),r2=n=>pc(n,"",i2),pu=()=>!0,pc=(n,e,t)=>{const r=W1.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},s2=n=>KR.test(n)&&!GR.test(n),H1=()=>!1,i2=n=>QR.test(n),o2=n=>YR.test(n),a2=()=>{const n=zt("colors"),e=zt("spacing"),t=zt("blur"),r=zt("brightness"),s=zt("borderColor"),a=zt("borderRadius"),c=zt("borderSpacing"),u=zt("borderWidth"),h=zt("contrast"),m=zt("grayscale"),g=zt("hueRotate"),v=zt("invert"),y=zt("gap"),b=zt("gradientColorStops"),S=zt("gradientColorStopPositions"),_=zt("inset"),x=zt("margin"),A=zt("opacity"),I=zt("padding"),C=zt("saturate"),O=zt("scale"),V=zt("sepia"),B=zt("skew"),P=zt("space"),R=zt("translate"),D=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",ot,e],z=()=>[ot,e],M=()=>["",di,eo],ie=()=>["auto",Vl,ot],K=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],J=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>["start","end","center","between","around","evenly","stretch"],Q=()=>["","0",ot],Z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[Vl,ot];return{cacheSize:500,separator:":",theme:{colors:[pu],spacing:[di,eo],blur:["none","",to,ot],brightness:U(),borderColor:[n],borderRadius:["none","","full",to,ot],borderSpacing:z(),borderWidth:M(),contrast:U(),grayscale:Q(),hueRotate:U(),invert:Q(),gap:z(),gradientColorStops:[n],gradientColorStopPositions:[XR,eo],inset:$(),margin:$(),opacity:U(),padding:z(),saturate:U(),scale:U(),sepia:Q(),skew:U(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",ot]}],container:["container"],columns:[{columns:[to]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...K(),ot]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",mu,ot]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ot]}],grow:[{grow:Q()}],shrink:[{shrink:Q()}],order:[{order:["first","last","none",mu,ot]}],"grid-cols":[{"grid-cols":[pu]}],"col-start-end":[{col:["auto",{span:["full",mu,ot]},ot]}],"col-start":[{"col-start":ie()}],"col-end":[{"col-end":ie()}],"grid-rows":[{"grid-rows":[pu]}],"row-start-end":[{row:["auto",{span:[mu,ot]},ot]}],"row-start":[{"row-start":ie()}],"row-end":[{"row-end":ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ot]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ot]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",...q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[I]}],px:[{px:[I]}],py:[{py:[I]}],ps:[{ps:[I]}],pe:[{pe:[I]}],pt:[{pt:[I]}],pr:[{pr:[I]}],pb:[{pb:[I]}],pl:[{pl:[I]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ot,e]}],"min-w":[{"min-w":[ot,e,"min","max","fit"]}],"max-w":[{"max-w":[ot,e,"none","full","min","max","fit","prose",{screen:[to]},to]}],h:[{h:[ot,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ot,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ot,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ot,e,"auto","min","max","fit"]}],"font-size":[{text:["base",to,eo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Tg]}],"font-family":[{font:[pu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ot]}],"line-clamp":[{"line-clamp":["none",Vl,Tg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",di,ot]}],"list-image":[{"list-image":["none",ot]}],"list-style-type":[{list:["none","disc","decimal",ot]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[A]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",di,eo]}],"underline-offset":[{"underline-offset":["auto",di,ot]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ot]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ot]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[A]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...K(),e2]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ZR]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},n2]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[A]}],"border-style":[{border:[...J(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[A]}],"divide-style":[{divide:J()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...J()]}],"outline-offset":[{"outline-offset":[di,ot]}],"outline-w":[{outline:[di,eo]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[A]}],"ring-offset-w":[{"ring-offset":[di,eo]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",to,r2]}],"shadow-color":[{shadow:[pu]}],opacity:[{opacity:[A]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",to,ot]}],grayscale:[{grayscale:[m]}],"hue-rotate":[{"hue-rotate":[g]}],invert:[{invert:[v]}],saturate:[{saturate:[C]}],sepia:[{sepia:[V]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[m]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[g]}],"backdrop-invert":[{"backdrop-invert":[v]}],"backdrop-opacity":[{"backdrop-opacity":[A]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[V]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ot]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",ot]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",ot]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[O]}],"scale-x":[{"scale-x":[O]}],"scale-y":[{"scale-y":[O]}],rotate:[{rotate:[mu,ot]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[B]}],"skew-y":[{"skew-y":[B]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ot]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ot]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ot]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[di,eo,Tg]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},l2=BR(a2);function et(...n){return l2(O1(n))}function c2(n){if(!n||typeof n!="string")return null;const e=n.trim();try{const t=e.match(/https?:\/\/(?:drive\.google\.com)\/(?:file\/d\/([a-zA-Z0-9_-]+)\/view|open\?id=([a-zA-Z0-9_-]+))/i);if(t){const r=t[1]||t[2];if(r)return`https://drive.google.com/uc?export=view&id=${r}`}if(/dropbox\.com\//i.test(e)){if(e.includes("dl=0"))return e.replace("dl=0","dl=1");if(!e.includes("dl="))return e+"?dl=1"}return e}catch{return e}}const u2=dR,K1=E.forwardRef(({className:n,...e},t)=>l.jsx(I1,{ref:t,className:et("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));K1.displayName=I1.displayName;const d2=rd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),G1=E.forwardRef(({className:n,variant:e,...t},r)=>l.jsx(j1,{ref:r,className:et(d2({variant:e}),n),...t}));G1.displayName=j1.displayName;const h2=E.forwardRef(({className:n,...e},t)=>l.jsx(R1,{ref:t,className:et("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));h2.displayName=R1.displayName;const Q1=E.forwardRef(({className:n,...e},t)=>l.jsx(k1,{ref:t,className:et("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:l.jsx(tc,{className:"h-4 w-4"})}));Q1.displayName=k1.displayName;const Y1=E.forwardRef(({className:n,...e},t)=>l.jsx(A1,{ref:t,className:et("text-sm font-semibold",n),...e}));Y1.displayName=A1.displayName;const X1=E.forwardRef(({className:n,...e},t)=>l.jsx(P1,{ref:t,className:et("text-sm opacity-90",n),...e}));X1.displayName=P1.displayName;function f2(){const{toasts:n}=bP();return l.jsxs(u2,{children:[n.map(function({id:e,title:t,description:r,action:s,...a}){return l.jsxs(G1,{...a,children:[l.jsxs("div",{className:"grid gap-1",children:[t&&l.jsx(Y1,{children:t}),r&&l.jsx(X1,{children:r})]}),s,l.jsx(Q1,{})]},e)}),l.jsx(K1,{})]})}var Fh={},x_;function m2(){if(x_)return Fh;x_=1;var n=a1();return Fh.createRoot=n.createRoot,Fh.hydrateRoot=n.hydrateRoot,Fh}var p2=m2(),w_=["light","dark"],g2="(prefers-color-scheme: dark)",v2=E.createContext(void 0),y2={setTheme:n=>{},themes:[]},x2=()=>{var n;return(n=E.useContext(v2))!=null?n:y2};E.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:c,attrs:u,nonce:h})=>{let m=a==="system",g=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${u.map(S=>`'${S}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,v=s?w_.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",y=(S,_=!1,x=!0)=>{let A=c?c[S]:S,I=_?S+"|| ''":`'${A}'`,C="";return s&&x&&!_&&w_.includes(S)&&(C+=`d.style.colorScheme = '${S}';`),t==="class"?_||A?C+=`c.add(${I})`:C+="null":A&&(C+=`d[s](n,${I})`),C},b=n?`!function(){${g}${y(n)}}()`:r?`!function(){try{${g}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${m})){var t='${g2}',m=window.matchMedia(t);if(m.media!==t||m.matches){${y("dark")}}else{${y("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${y(c?"x[e]":"e",!0)}}${m?"":"else{"+y(a,!1,!1)+"}"}${v}}catch(e){}}()`:`!function(){try{${g}var e=localStorage.getItem('${e}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${y(c?"x[e]":"e",!0)}}else{${y(a,!1,!1)};}${v}}catch(t){}}();`;return E.createElement("script",{nonce:h,dangerouslySetInnerHTML:{__html:b}})});var w2=n=>{switch(n){case"success":return b2;case"info":return N2;case"warning":return S2;case"error":return T2;default:return null}},_2=Array(12).fill(0),E2=({visible:n})=>Ee.createElement("div",{className:"sonner-loading-wrapper","data-visible":n},Ee.createElement("div",{className:"sonner-spinner"},_2.map((e,t)=>Ee.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),b2=Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ee.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),S2=Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ee.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),N2=Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ee.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),T2=Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ee.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),C2=()=>{let[n,e]=Ee.useState(document.hidden);return Ee.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},uv=1,I2=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...s}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:uv++,c=this.toasts.find(h=>h.id===a),u=e.dismissible===void 0?!0:e.dismissible;return c?this.toasts=this.toasts.map(h=>h.id===a?(this.publish({...h,...e,id:a,title:r}),{...h,...e,id:a,dismissible:u,title:r}):h):this.addToast({title:r,...s,dismissible:u,id:a}),a},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),a=r!==void 0;return s.then(async c=>{if(A2(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,h=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:u,description:h})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:u,description:h})}}).catch(async c=>{if(t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:u,description:h})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),r},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||uv++;return this.create({jsx:e(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},Nr=new I2,j2=(n,e)=>{let t=(e==null?void 0:e.id)||uv++;return Nr.addToast({title:n,...e,id:t}),t},A2=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",P2=j2,R2=()=>Nr.toasts;Object.assign(P2,{success:Nr.success,info:Nr.info,warning:Nr.warning,error:Nr.error,custom:Nr.custom,message:Nr.message,promise:Nr.promise,dismiss:Nr.dismiss,loading:Nr.loading},{getHistory:R2});function k2(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}k2(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Vh(n){return n.label!==void 0}var D2=3,O2="32px",L2=4e3,M2=356,F2=14,V2=20,U2=200;function $2(...n){return n.filter(Boolean).join(" ")}var z2=n=>{var e,t,r,s,a,c,u,h,m,g;let{invert:v,toast:y,unstyled:b,interacting:S,setHeights:_,visibleToasts:x,heights:A,index:I,toasts:C,expanded:O,removeToast:V,defaultRichColors:B,closeButton:P,style:R,cancelButtonStyle:D,actionButtonStyle:k,className:$="",descriptionClassName:z="",duration:M,position:ie,gap:K,loadingIcon:J,expandByDefault:X,classNames:q,icons:Q,closeButtonAriaLabel:Z="Close toast",pauseWhenPageIsHidden:U,cn:Y}=n,[le,be]=Ee.useState(!1),[ve,de]=Ee.useState(!1),[me,Se]=Ee.useState(!1),[Pe,Ce]=Ee.useState(!1),[De,Ue]=Ee.useState(0),[bt,kt]=Ee.useState(0),sn=Ee.useRef(null),Ft=Ee.useRef(null),Tt=I===0,St=I+1<=x,wt=y.type,En=y.dismissible!==!1,gr=y.className||"",Ys=y.descriptionClassName||"",vr=Ee.useMemo(()=>A.findIndex(qe=>qe.toastId===y.id)||0,[A,y.id]),vs=Ee.useMemo(()=>{var qe;return(qe=y.closeButton)!=null?qe:P},[y.closeButton,P]),Br=Ee.useMemo(()=>y.duration||M||L2,[y.duration,M]),Vt=Ee.useRef(0),It=Ee.useRef(0),tr=Ee.useRef(0),nr=Ee.useRef(null),[ae,Fe]=ie.split("-"),Le=Ee.useMemo(()=>A.reduce((qe,ft,ct)=>ct>=vr?qe:qe+ft.height,0),[A,vr]),pt=C2(),nt=y.invert||v,ht=wt==="loading";It.current=Ee.useMemo(()=>vr*K+Le,[vr,Le]),Ee.useEffect(()=>{be(!0)},[]),Ee.useLayoutEffect(()=>{if(!le)return;let qe=Ft.current,ft=qe.style.height;qe.style.height="auto";let ct=qe.getBoundingClientRect().height;qe.style.height=ft,kt(ct),_(Dt=>Dt.find(Wt=>Wt.toastId===y.id)?Dt.map(Wt=>Wt.toastId===y.id?{...Wt,height:ct}:Wt):[{toastId:y.id,height:ct,position:y.position},...Dt])},[le,y.title,y.description,_,y.id]);let Ne=Ee.useCallback(()=>{de(!0),Ue(It.current),_(qe=>qe.filter(ft=>ft.toastId!==y.id)),setTimeout(()=>{V(y)},U2)},[y,V,_,It]);Ee.useEffect(()=>{if(y.promise&&wt==="loading"||y.duration===1/0||y.type==="loading")return;let qe,ft=Br;return O||S||U&&pt?(()=>{if(tr.current<Vt.current){let ct=new Date().getTime()-Vt.current;ft=ft-ct}tr.current=new Date().getTime()})():ft!==1/0&&(Vt.current=new Date().getTime(),qe=setTimeout(()=>{var ct;(ct=y.onAutoClose)==null||ct.call(y,y),Ne()},ft)),()=>clearTimeout(qe)},[O,S,X,y,Br,Ne,y.promise,wt,U,pt]),Ee.useEffect(()=>{let qe=Ft.current;if(qe){let ft=qe.getBoundingClientRect().height;return kt(ft),_(ct=>[{toastId:y.id,height:ft,position:y.position},...ct]),()=>_(ct=>ct.filter(Dt=>Dt.toastId!==y.id))}},[_,y.id]),Ee.useEffect(()=>{y.delete&&Ne()},[Ne,y.delete]);function ys(){return Q!=null&&Q.loading?Ee.createElement("div",{className:"sonner-loader","data-visible":wt==="loading"},Q.loading):J?Ee.createElement("div",{className:"sonner-loader","data-visible":wt==="loading"},J):Ee.createElement(E2,{visible:wt==="loading"})}return Ee.createElement("li",{"aria-live":y.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Ft,className:Y($,gr,q==null?void 0:q.toast,(e=y==null?void 0:y.classNames)==null?void 0:e.toast,q==null?void 0:q.default,q==null?void 0:q[wt],(t=y==null?void 0:y.classNames)==null?void 0:t[wt]),"data-sonner-toast":"","data-rich-colors":(r=y.richColors)!=null?r:B,"data-styled":!(y.jsx||y.unstyled||b),"data-mounted":le,"data-promise":!!y.promise,"data-removed":ve,"data-visible":St,"data-y-position":ae,"data-x-position":Fe,"data-index":I,"data-front":Tt,"data-swiping":me,"data-dismissible":En,"data-type":wt,"data-invert":nt,"data-swipe-out":Pe,"data-expanded":!!(O||X&&le),style:{"--index":I,"--toasts-before":I,"--z-index":C.length-I,"--offset":`${ve?De:It.current}px`,"--initial-height":X?"auto":`${bt}px`,...R,...y.style},onPointerDown:qe=>{ht||!En||(sn.current=new Date,Ue(It.current),qe.target.setPointerCapture(qe.pointerId),qe.target.tagName!=="BUTTON"&&(Se(!0),nr.current={x:qe.clientX,y:qe.clientY}))},onPointerUp:()=>{var qe,ft,ct,Dt;if(Pe||!En)return;nr.current=null;let Wt=Number(((qe=Ft.current)==null?void 0:qe.style.getPropertyValue("--swipe-amount").replace("px",""))||0),rr=new Date().getTime()-((ft=sn.current)==null?void 0:ft.getTime()),Gn=Math.abs(Wt)/rr;if(Math.abs(Wt)>=V2||Gn>.11){Ue(It.current),(ct=y.onDismiss)==null||ct.call(y,y),Ne(),Ce(!0);return}(Dt=Ft.current)==null||Dt.style.setProperty("--swipe-amount","0px"),Se(!1)},onPointerMove:qe=>{var ft;if(!nr.current||!En)return;let ct=qe.clientY-nr.current.y,Dt=qe.clientX-nr.current.x,Wt=(ae==="top"?Math.min:Math.max)(0,ct),rr=qe.pointerType==="touch"?10:2;Math.abs(Wt)>rr?(ft=Ft.current)==null||ft.style.setProperty("--swipe-amount",`${ct}px`):Math.abs(Dt)>rr&&(nr.current=null)}},vs&&!y.jsx?Ee.createElement("button",{"aria-label":Z,"data-disabled":ht,"data-close-button":!0,onClick:ht||!En?()=>{}:()=>{var qe;Ne(),(qe=y.onDismiss)==null||qe.call(y,y)},className:Y(q==null?void 0:q.closeButton,(s=y==null?void 0:y.classNames)==null?void 0:s.closeButton)},Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ee.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ee.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,y.jsx||Ee.isValidElement(y.title)?y.jsx||y.title:Ee.createElement(Ee.Fragment,null,wt||y.icon||y.promise?Ee.createElement("div",{"data-icon":"",className:Y(q==null?void 0:q.icon,(a=y==null?void 0:y.classNames)==null?void 0:a.icon)},y.promise||y.type==="loading"&&!y.icon?y.icon||ys():null,y.type!=="loading"?y.icon||(Q==null?void 0:Q[wt])||w2(wt):null):null,Ee.createElement("div",{"data-content":"",className:Y(q==null?void 0:q.content,(c=y==null?void 0:y.classNames)==null?void 0:c.content)},Ee.createElement("div",{"data-title":"",className:Y(q==null?void 0:q.title,(u=y==null?void 0:y.classNames)==null?void 0:u.title)},y.title),y.description?Ee.createElement("div",{"data-description":"",className:Y(z,Ys,q==null?void 0:q.description,(h=y==null?void 0:y.classNames)==null?void 0:h.description)},y.description):null),Ee.isValidElement(y.cancel)?y.cancel:y.cancel&&Vh(y.cancel)?Ee.createElement("button",{"data-button":!0,"data-cancel":!0,style:y.cancelButtonStyle||D,onClick:qe=>{var ft,ct;Vh(y.cancel)&&En&&((ct=(ft=y.cancel).onClick)==null||ct.call(ft,qe),Ne())},className:Y(q==null?void 0:q.cancelButton,(m=y==null?void 0:y.classNames)==null?void 0:m.cancelButton)},y.cancel.label):null,Ee.isValidElement(y.action)?y.action:y.action&&Vh(y.action)?Ee.createElement("button",{"data-button":!0,"data-action":!0,style:y.actionButtonStyle||k,onClick:qe=>{var ft,ct;Vh(y.action)&&(qe.defaultPrevented||((ct=(ft=y.action).onClick)==null||ct.call(ft,qe),Ne()))},className:Y(q==null?void 0:q.actionButton,(g=y==null?void 0:y.classNames)==null?void 0:g.actionButton)},y.action.label):null))};function __(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}var B2=n=>{let{invert:e,position:t="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:a,className:c,offset:u,theme:h="light",richColors:m,duration:g,style:v,visibleToasts:y=D2,toastOptions:b,dir:S=__(),gap:_=F2,loadingIcon:x,icons:A,containerAriaLabel:I="Notifications",pauseWhenPageIsHidden:C,cn:O=$2}=n,[V,B]=Ee.useState([]),P=Ee.useMemo(()=>Array.from(new Set([t].concat(V.filter(U=>U.position).map(U=>U.position)))),[V,t]),[R,D]=Ee.useState([]),[k,$]=Ee.useState(!1),[z,M]=Ee.useState(!1),[ie,K]=Ee.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),J=Ee.useRef(null),X=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),q=Ee.useRef(null),Q=Ee.useRef(!1),Z=Ee.useCallback(U=>{var Y;(Y=V.find(le=>le.id===U.id))!=null&&Y.delete||Nr.dismiss(U.id),B(le=>le.filter(({id:be})=>be!==U.id))},[V]);return Ee.useEffect(()=>Nr.subscribe(U=>{if(U.dismiss){B(Y=>Y.map(le=>le.id===U.id?{...le,delete:!0}:le));return}setTimeout(()=>{Zf.flushSync(()=>{B(Y=>{let le=Y.findIndex(be=>be.id===U.id);return le!==-1?[...Y.slice(0,le),{...Y[le],...U},...Y.slice(le+1)]:[U,...Y]})})})}),[]),Ee.useEffect(()=>{if(h!=="system"){K(h);return}h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?K("dark"):K("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:U})=>{K(U?"dark":"light")})},[h]),Ee.useEffect(()=>{V.length<=1&&$(!1)},[V]),Ee.useEffect(()=>{let U=Y=>{var le,be;r.every(ve=>Y[ve]||Y.code===ve)&&($(!0),(le=J.current)==null||le.focus()),Y.code==="Escape"&&(document.activeElement===J.current||(be=J.current)!=null&&be.contains(document.activeElement))&&$(!1)};return document.addEventListener("keydown",U),()=>document.removeEventListener("keydown",U)},[r]),Ee.useEffect(()=>{if(J.current)return()=>{q.current&&(q.current.focus({preventScroll:!0}),q.current=null,Q.current=!1)}},[J.current]),V.length?Ee.createElement("section",{"aria-label":`${I} ${X}`,tabIndex:-1},P.map((U,Y)=>{var le;let[be,ve]=U.split("-");return Ee.createElement("ol",{key:U,dir:S==="auto"?__():S,tabIndex:-1,ref:J,className:c,"data-sonner-toaster":!0,"data-theme":ie,"data-y-position":be,"data-x-position":ve,style:{"--front-toast-height":`${((le=R[0])==null?void 0:le.height)||0}px`,"--offset":typeof u=="number"?`${u}px`:u||O2,"--width":`${M2}px`,"--gap":`${_}px`,...v},onBlur:de=>{Q.current&&!de.currentTarget.contains(de.relatedTarget)&&(Q.current=!1,q.current&&(q.current.focus({preventScroll:!0}),q.current=null))},onFocus:de=>{de.target instanceof HTMLElement&&de.target.dataset.dismissible==="false"||Q.current||(Q.current=!0,q.current=de.relatedTarget)},onMouseEnter:()=>$(!0),onMouseMove:()=>$(!0),onMouseLeave:()=>{z||$(!1)},onPointerDown:de=>{de.target instanceof HTMLElement&&de.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},V.filter(de=>!de.position&&Y===0||de.position===U).map((de,me)=>{var Se,Pe;return Ee.createElement(z2,{key:de.id,icons:A,index:me,toast:de,defaultRichColors:m,duration:(Se=b==null?void 0:b.duration)!=null?Se:g,className:b==null?void 0:b.className,descriptionClassName:b==null?void 0:b.descriptionClassName,invert:e,visibleToasts:y,closeButton:(Pe=b==null?void 0:b.closeButton)!=null?Pe:a,interacting:z,position:U,style:b==null?void 0:b.style,unstyled:b==null?void 0:b.unstyled,classNames:b==null?void 0:b.classNames,cancelButtonStyle:b==null?void 0:b.cancelButtonStyle,actionButtonStyle:b==null?void 0:b.actionButtonStyle,removeToast:Z,toasts:V.filter(Ce=>Ce.position==de.position),heights:R.filter(Ce=>Ce.position==de.position),setHeights:D,expandByDefault:s,gap:_,loadingIcon:x,expanded:k,pauseWhenPageIsHidden:C,cn:O})}))})):null};const q2=({...n})=>{const{theme:e="system"}=x2();return l.jsx(B2,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};function W2(n,e=[]){let t=[];function r(a,c){const u=E.createContext(c),h=t.length;t=[...t,c];const m=v=>{var A;const{scope:y,children:b,...S}=v,_=((A=y==null?void 0:y[n])==null?void 0:A[h])||u,x=E.useMemo(()=>S,Object.values(S));return l.jsx(_.Provider,{value:x,children:b})};m.displayName=a+"Provider";function g(v,y){var _;const b=((_=y==null?void 0:y[n])==null?void 0:_[h])||u,S=E.useContext(b);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${a}\``)}return[m,g]}const s=()=>{const a=t.map(c=>E.createContext(c));return function(u){const h=(u==null?void 0:u[n])||a;return E.useMemo(()=>({[`__scope${n}`]:{...u,[n]:h}}),[u,h])}};return s.scopeName=n,[r,H2(s,...e)]}function H2(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:m})=>{const v=h(a)[`__scope${m}`];return{...u,...v}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var K2="DismissableLayer",dv="dismissableLayer.update",G2="dismissableLayer.pointerDownOutside",Q2="dismissableLayer.focusOutside",E_,J1=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),yy=E.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=n,m=E.useContext(J1),[g,v]=E.useState(null),y=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=E.useState({}),S=xt(e,P=>v(P)),_=Array.from(m.layers),[x]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),A=_.indexOf(x),I=g?_.indexOf(g):-1,C=m.layersWithOutsidePointerEventsDisabled.size>0,O=I>=A,V=J2(P=>{const R=P.target,D=[...m.branches].some(k=>k.contains(R));!O||D||(s==null||s(P),c==null||c(P),P.defaultPrevented||u==null||u())},y),B=Z2(P=>{const R=P.target;[...m.branches].some(k=>k.contains(R))||(a==null||a(P),c==null||c(P),P.defaultPrevented||u==null||u())},y);return dy(P=>{I===m.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},y),E.useEffect(()=>{if(g)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(E_=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(g)),m.layers.add(g),b_(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=E_)}},[g,y,t,m]),E.useEffect(()=>()=>{g&&(m.layers.delete(g),m.layersWithOutsidePointerEventsDisabled.delete(g),b_())},[g,m]),E.useEffect(()=>{const P=()=>b({});return document.addEventListener(dv,P),()=>document.removeEventListener(dv,P)},[]),l.jsx(Ke.div,{...h,ref:S,style:{pointerEvents:C?O?"auto":"none":void 0,...n.style},onFocusCapture:ze(n.onFocusCapture,B.onFocusCapture),onBlurCapture:ze(n.onBlurCapture,B.onBlurCapture),onPointerDownCapture:ze(n.onPointerDownCapture,V.onPointerDownCapture)})});yy.displayName=K2;var Y2="DismissableLayerBranch",X2=E.forwardRef((n,e)=>{const t=E.useContext(J1),r=E.useRef(null),s=xt(e,r);return E.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),l.jsx(Ke.div,{...n,ref:s})});X2.displayName=Y2;function J2(n,e=globalThis==null?void 0:globalThis.document){const t=_n(n),r=E.useRef(!1),s=E.useRef(()=>{});return E.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){Z1(G2,t,m,{discrete:!0})};const m={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function Z2(n,e=globalThis==null?void 0:globalThis.document){const t=_n(n),r=E.useRef(!1);return E.useEffect(()=>{const s=a=>{a.target&&!r.current&&Z1(Q2,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function b_(){const n=new CustomEvent(dv);document.dispatchEvent(n)}function Z1(n,e,t,{discrete:r}){const s=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?em(s,a):s.dispatchEvent(a)}var ek=o1.useId||(()=>{}),tk=0;function yo(n){const[e,t]=E.useState(ek());return Gt(()=>{t(r=>r??String(tk++))},[n]),e?`radix-${e}`:""}const nk=["top","right","bottom","left"],Io=Math.min,Tr=Math.max,Ef=Math.round,Uh=Math.floor,jo=n=>({x:n,y:n}),rk={left:"right",right:"left",bottom:"top",top:"bottom"},sk={start:"end",end:"start"};function hv(n,e,t){return Tr(n,Io(e,t))}function xi(n,e){return typeof n=="function"?n(e):n}function wi(n){return n.split("-")[0]}function gc(n){return n.split("-")[1]}function xy(n){return n==="x"?"y":"x"}function wy(n){return n==="y"?"height":"width"}function Ao(n){return["top","bottom"].includes(wi(n))?"y":"x"}function _y(n){return xy(Ao(n))}function ik(n,e,t){t===void 0&&(t=!1);const r=gc(n),s=_y(n),a=wy(s);let c=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(c=bf(c)),[c,bf(c)]}function ok(n){const e=bf(n);return[fv(n),e,fv(e)]}function fv(n){return n.replace(/start|end/g,e=>sk[e])}function ak(n,e,t){const r=["left","right"],s=["right","left"],a=["top","bottom"],c=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:r:e?r:s;case"left":case"right":return e?a:c;default:return[]}}function lk(n,e,t,r){const s=gc(n);let a=ak(wi(n),t==="start",r);return s&&(a=a.map(c=>c+"-"+s),e&&(a=a.concat(a.map(fv)))),a}function bf(n){return n.replace(/left|right|bottom|top/g,e=>rk[e])}function ck(n){return{top:0,right:0,bottom:0,left:0,...n}}function eS(n){return typeof n!="number"?ck(n):{top:n,right:n,bottom:n,left:n}}function Sf(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function S_(n,e,t){let{reference:r,floating:s}=n;const a=Ao(e),c=_y(e),u=wy(c),h=wi(e),m=a==="y",g=r.x+r.width/2-s.width/2,v=r.y+r.height/2-s.height/2,y=r[u]/2-s[u]/2;let b;switch(h){case"top":b={x:g,y:r.y-s.height};break;case"bottom":b={x:g,y:r.y+r.height};break;case"right":b={x:r.x+r.width,y:v};break;case"left":b={x:r.x-s.width,y:v};break;default:b={x:r.x,y:r.y}}switch(gc(e)){case"start":b[c]-=y*(t&&m?-1:1);break;case"end":b[c]+=y*(t&&m?-1:1);break}return b}const uk=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:c}=t,u=a.filter(Boolean),h=await(c.isRTL==null?void 0:c.isRTL(e));let m=await c.getElementRects({reference:n,floating:e,strategy:s}),{x:g,y:v}=S_(m,r,h),y=r,b={},S=0;for(let _=0;_<u.length;_++){const{name:x,fn:A}=u[_],{x:I,y:C,data:O,reset:V}=await A({x:g,y:v,initialPlacement:r,placement:y,strategy:s,middlewareData:b,rects:m,platform:c,elements:{reference:n,floating:e}});g=I??g,v=C??v,b={...b,[x]:{...b[x],...O}},V&&S<=50&&(S++,typeof V=="object"&&(V.placement&&(y=V.placement),V.rects&&(m=V.rects===!0?await c.getElementRects({reference:n,floating:e,strategy:s}):V.rects),{x:g,y:v}=S_(m,y,h)),_=-1)}return{x:g,y:v,placement:y,strategy:s,middlewareData:b}};async function Mu(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:a,rects:c,elements:u,strategy:h}=n,{boundary:m="clippingAncestors",rootBoundary:g="viewport",elementContext:v="floating",altBoundary:y=!1,padding:b=0}=xi(e,n),S=eS(b),x=u[y?v==="floating"?"reference":"floating":v],A=Sf(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(x)))==null||t?x:x.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(u.floating)),boundary:m,rootBoundary:g,strategy:h})),I=v==="floating"?{x:r,y:s,width:c.floating.width,height:c.floating.height}:c.reference,C=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u.floating)),O=await(a.isElement==null?void 0:a.isElement(C))?await(a.getScale==null?void 0:a.getScale(C))||{x:1,y:1}:{x:1,y:1},V=Sf(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:I,offsetParent:C,strategy:h}):I);return{top:(A.top-V.top+S.top)/O.y,bottom:(V.bottom-A.bottom+S.bottom)/O.y,left:(A.left-V.left+S.left)/O.x,right:(V.right-A.right+S.right)/O.x}}const dk=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:a,platform:c,elements:u,middlewareData:h}=e,{element:m,padding:g=0}=xi(n,e)||{};if(m==null)return{};const v=eS(g),y={x:t,y:r},b=_y(s),S=wy(b),_=await c.getDimensions(m),x=b==="y",A=x?"top":"left",I=x?"bottom":"right",C=x?"clientHeight":"clientWidth",O=a.reference[S]+a.reference[b]-y[b]-a.floating[S],V=y[b]-a.reference[b],B=await(c.getOffsetParent==null?void 0:c.getOffsetParent(m));let P=B?B[C]:0;(!P||!await(c.isElement==null?void 0:c.isElement(B)))&&(P=u.floating[C]||a.floating[S]);const R=O/2-V/2,D=P/2-_[S]/2-1,k=Io(v[A],D),$=Io(v[I],D),z=k,M=P-_[S]-$,ie=P/2-_[S]/2+R,K=hv(z,ie,M),J=!h.arrow&&gc(s)!=null&&ie!==K&&a.reference[S]/2-(ie<z?k:$)-_[S]/2<0,X=J?ie<z?ie-z:ie-M:0;return{[b]:y[b]+X,data:{[b]:K,centerOffset:ie-K-X,...J&&{alignmentOffset:X}},reset:J}}}),hk=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:a,rects:c,initialPlacement:u,platform:h,elements:m}=e,{mainAxis:g=!0,crossAxis:v=!0,fallbackPlacements:y,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:_=!0,...x}=xi(n,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const A=wi(s),I=Ao(u),C=wi(u)===u,O=await(h.isRTL==null?void 0:h.isRTL(m.floating)),V=y||(C||!_?[bf(u)]:ok(u)),B=S!=="none";!y&&B&&V.push(...lk(u,_,S,O));const P=[u,...V],R=await Mu(e,x),D=[];let k=((r=a.flip)==null?void 0:r.overflows)||[];if(g&&D.push(R[A]),v){const ie=ik(s,c,O);D.push(R[ie[0]],R[ie[1]])}if(k=[...k,{placement:s,overflows:D}],!D.every(ie=>ie<=0)){var $,z;const ie=((($=a.flip)==null?void 0:$.index)||0)+1,K=P[ie];if(K)return{data:{index:ie,overflows:k},reset:{placement:K}};let J=(z=k.filter(X=>X.overflows[0]<=0).sort((X,q)=>X.overflows[1]-q.overflows[1])[0])==null?void 0:z.placement;if(!J)switch(b){case"bestFit":{var M;const X=(M=k.filter(q=>{if(B){const Q=Ao(q.placement);return Q===I||Q==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(Q=>Q>0).reduce((Q,Z)=>Q+Z,0)]).sort((q,Q)=>q[1]-Q[1])[0])==null?void 0:M[0];X&&(J=X);break}case"initialPlacement":J=u;break}if(s!==J)return{reset:{placement:J}}}return{}}}};function N_(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function T_(n){return nk.some(e=>n[e]>=0)}const fk=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=xi(n,e);switch(r){case"referenceHidden":{const a=await Mu(e,{...s,elementContext:"reference"}),c=N_(a,t.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:T_(c)}}}case"escaped":{const a=await Mu(e,{...s,altBoundary:!0}),c=N_(a,t.floating);return{data:{escapedOffsets:c,escaped:T_(c)}}}default:return{}}}}};async function mk(n,e){const{placement:t,platform:r,elements:s}=n,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),c=wi(t),u=gc(t),h=Ao(t)==="y",m=["left","top"].includes(c)?-1:1,g=a&&h?-1:1,v=xi(e,n);let{mainAxis:y,crossAxis:b,alignmentAxis:S}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return u&&typeof S=="number"&&(b=u==="end"?S*-1:S),h?{x:b*g,y:y*m}:{x:y*m,y:b*g}}const pk=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:a,placement:c,middlewareData:u}=e,h=await mk(e,n);return c===((t=u.offset)==null?void 0:t.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+h.x,y:a+h.y,data:{...h,placement:c}}}}},gk=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:a=!0,crossAxis:c=!1,limiter:u={fn:x=>{let{x:A,y:I}=x;return{x:A,y:I}}},...h}=xi(n,e),m={x:t,y:r},g=await Mu(e,h),v=Ao(wi(s)),y=xy(v);let b=m[y],S=m[v];if(a){const x=y==="y"?"top":"left",A=y==="y"?"bottom":"right",I=b+g[x],C=b-g[A];b=hv(I,b,C)}if(c){const x=v==="y"?"top":"left",A=v==="y"?"bottom":"right",I=S+g[x],C=S-g[A];S=hv(I,S,C)}const _=u.fn({...e,[y]:b,[v]:S});return{..._,data:{x:_.x-t,y:_.y-r,enabled:{[y]:a,[v]:c}}}}}},vk=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:a,middlewareData:c}=e,{offset:u=0,mainAxis:h=!0,crossAxis:m=!0}=xi(n,e),g={x:t,y:r},v=Ao(s),y=xy(v);let b=g[y],S=g[v];const _=xi(u,e),x=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(h){const C=y==="y"?"height":"width",O=a.reference[y]-a.floating[C]+x.mainAxis,V=a.reference[y]+a.reference[C]-x.mainAxis;b<O?b=O:b>V&&(b=V)}if(m){var A,I;const C=y==="y"?"width":"height",O=["top","left"].includes(wi(s)),V=a.reference[v]-a.floating[C]+(O&&((A=c.offset)==null?void 0:A[v])||0)+(O?0:x.crossAxis),B=a.reference[v]+a.reference[C]+(O?0:((I=c.offset)==null?void 0:I[v])||0)-(O?x.crossAxis:0);S<V?S=V:S>B&&(S=B)}return{[y]:b,[v]:S}}}},yk=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:a,platform:c,elements:u}=e,{apply:h=()=>{},...m}=xi(n,e),g=await Mu(e,m),v=wi(s),y=gc(s),b=Ao(s)==="y",{width:S,height:_}=a.floating;let x,A;v==="top"||v==="bottom"?(x=v,A=y===(await(c.isRTL==null?void 0:c.isRTL(u.floating))?"start":"end")?"left":"right"):(A=v,x=y==="end"?"top":"bottom");const I=_-g.top-g.bottom,C=S-g.left-g.right,O=Io(_-g[x],I),V=Io(S-g[A],C),B=!e.middlewareData.shift;let P=O,R=V;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(R=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=I),B&&!y){const k=Tr(g.left,0),$=Tr(g.right,0),z=Tr(g.top,0),M=Tr(g.bottom,0);b?R=S-2*(k!==0||$!==0?k+$:Tr(g.left,g.right)):P=_-2*(z!==0||M!==0?z+M:Tr(g.top,g.bottom))}await h({...e,availableWidth:R,availableHeight:P});const D=await c.getDimensions(u.floating);return S!==D.width||_!==D.height?{reset:{rects:!0}}:{}}}};function rm(){return typeof window<"u"}function vc(n){return tS(n)?(n.nodeName||"").toLowerCase():"#document"}function jr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Hs(n){var e;return(e=(tS(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function tS(n){return rm()?n instanceof Node||n instanceof jr(n).Node:!1}function hs(n){return rm()?n instanceof Element||n instanceof jr(n).Element:!1}function zs(n){return rm()?n instanceof HTMLElement||n instanceof jr(n).HTMLElement:!1}function C_(n){return!rm()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof jr(n).ShadowRoot}function id(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=fs(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(s)}function xk(n){return["table","td","th"].includes(vc(n))}function sm(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function Ey(n){const e=by(),t=hs(n)?fs(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function wk(n){let e=Po(n);for(;zs(e)&&!nc(e);){if(Ey(e))return e;if(sm(e))return null;e=Po(e)}return null}function by(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function nc(n){return["html","body","#document"].includes(vc(n))}function fs(n){return jr(n).getComputedStyle(n)}function im(n){return hs(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Po(n){if(vc(n)==="html")return n;const e=n.assignedSlot||n.parentNode||C_(n)&&n.host||Hs(n);return C_(e)?e.host:e}function nS(n){const e=Po(n);return nc(e)?n.ownerDocument?n.ownerDocument.body:n.body:zs(e)&&id(e)?e:nS(e)}function Fu(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=nS(n),a=s===((r=n.ownerDocument)==null?void 0:r.body),c=jr(s);if(a){const u=mv(c);return e.concat(c,c.visualViewport||[],id(s)?s:[],u&&t?Fu(u):[])}return e.concat(s,Fu(s,[],t))}function mv(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function rS(n){const e=fs(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=zs(n),a=s?n.offsetWidth:t,c=s?n.offsetHeight:r,u=Ef(t)!==a||Ef(r)!==c;return u&&(t=a,r=c),{width:t,height:r,$:u}}function Sy(n){return hs(n)?n:n.contextElement}function Ul(n){const e=Sy(n);if(!zs(e))return jo(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:a}=rS(e);let c=(a?Ef(t.width):t.width)/r,u=(a?Ef(t.height):t.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const _k=jo(0);function sS(n){const e=jr(n);return!by()||!e.visualViewport?_k:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Ek(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==jr(n)?!1:e}function Ia(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),a=Sy(n);let c=jo(1);e&&(r?hs(r)&&(c=Ul(r)):c=Ul(n));const u=Ek(a,t,r)?sS(a):jo(0);let h=(s.left+u.x)/c.x,m=(s.top+u.y)/c.y,g=s.width/c.x,v=s.height/c.y;if(a){const y=jr(a),b=r&&hs(r)?jr(r):r;let S=y,_=mv(S);for(;_&&r&&b!==S;){const x=Ul(_),A=_.getBoundingClientRect(),I=fs(_),C=A.left+(_.clientLeft+parseFloat(I.paddingLeft))*x.x,O=A.top+(_.clientTop+parseFloat(I.paddingTop))*x.y;h*=x.x,m*=x.y,g*=x.x,v*=x.y,h+=C,m+=O,S=jr(_),_=mv(S)}}return Sf({width:g,height:v,x:h,y:m})}function bk(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const a=s==="fixed",c=Hs(r),u=e?sm(e.floating):!1;if(r===c||u&&a)return t;let h={scrollLeft:0,scrollTop:0},m=jo(1);const g=jo(0),v=zs(r);if((v||!v&&!a)&&((vc(r)!=="body"||id(c))&&(h=im(r)),zs(r))){const y=Ia(r);m=Ul(r),g.x=y.x+r.clientLeft,g.y=y.y+r.clientTop}return{width:t.width*m.x,height:t.height*m.y,x:t.x*m.x-h.scrollLeft*m.x+g.x,y:t.y*m.y-h.scrollTop*m.y+g.y}}function Sk(n){return Array.from(n.getClientRects())}function pv(n,e){const t=im(n).scrollLeft;return e?e.left+t:Ia(Hs(n)).left+t}function Nk(n){const e=Hs(n),t=im(n),r=n.ownerDocument.body,s=Tr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Tr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-t.scrollLeft+pv(n);const u=-t.scrollTop;return fs(r).direction==="rtl"&&(c+=Tr(e.clientWidth,r.clientWidth)-s),{width:s,height:a,x:c,y:u}}function Tk(n,e){const t=jr(n),r=Hs(n),s=t.visualViewport;let a=r.clientWidth,c=r.clientHeight,u=0,h=0;if(s){a=s.width,c=s.height;const m=by();(!m||m&&e==="fixed")&&(u=s.offsetLeft,h=s.offsetTop)}return{width:a,height:c,x:u,y:h}}function Ck(n,e){const t=Ia(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,a=zs(n)?Ul(n):jo(1),c=n.clientWidth*a.x,u=n.clientHeight*a.y,h=s*a.x,m=r*a.y;return{width:c,height:u,x:h,y:m}}function I_(n,e,t){let r;if(e==="viewport")r=Tk(n,t);else if(e==="document")r=Nk(Hs(n));else if(hs(e))r=Ck(e,t);else{const s=sS(n);r={...e,x:e.x-s.x,y:e.y-s.y}}return Sf(r)}function iS(n,e){const t=Po(n);return t===e||!hs(t)||nc(t)?!1:fs(t).position==="fixed"||iS(t,e)}function Ik(n,e){const t=e.get(n);if(t)return t;let r=Fu(n,[],!1).filter(u=>hs(u)&&vc(u)!=="body"),s=null;const a=fs(n).position==="fixed";let c=a?Po(n):n;for(;hs(c)&&!nc(c);){const u=fs(c),h=Ey(c);!h&&u.position==="fixed"&&(s=null),(a?!h&&!s:!h&&u.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||id(c)&&!h&&iS(n,c))?r=r.filter(g=>g!==c):s=u,c=Po(c)}return e.set(n,r),r}function jk(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const c=[...t==="clippingAncestors"?sm(e)?[]:Ik(e,this._c):[].concat(t),r],u=c[0],h=c.reduce((m,g)=>{const v=I_(e,g,s);return m.top=Tr(v.top,m.top),m.right=Io(v.right,m.right),m.bottom=Io(v.bottom,m.bottom),m.left=Tr(v.left,m.left),m},I_(e,u,s));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function Ak(n){const{width:e,height:t}=rS(n);return{width:e,height:t}}function Pk(n,e,t){const r=zs(e),s=Hs(e),a=t==="fixed",c=Ia(n,!0,a,e);let u={scrollLeft:0,scrollTop:0};const h=jo(0);if(r||!r&&!a)if((vc(e)!=="body"||id(s))&&(u=im(e)),r){const b=Ia(e,!0,a,e);h.x=b.x+e.clientLeft,h.y=b.y+e.clientTop}else s&&(h.x=pv(s));let m=0,g=0;if(s&&!r&&!a){const b=s.getBoundingClientRect();g=b.top+u.scrollTop,m=b.left+u.scrollLeft-pv(s,b)}const v=c.left+u.scrollLeft-h.x-m,y=c.top+u.scrollTop-h.y-g;return{x:v,y,width:c.width,height:c.height}}function Cg(n){return fs(n).position==="static"}function j_(n,e){if(!zs(n)||fs(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Hs(n)===t&&(t=t.ownerDocument.body),t}function oS(n,e){const t=jr(n);if(sm(n))return t;if(!zs(n)){let s=Po(n);for(;s&&!nc(s);){if(hs(s)&&!Cg(s))return s;s=Po(s)}return t}let r=j_(n,e);for(;r&&xk(r)&&Cg(r);)r=j_(r,e);return r&&nc(r)&&Cg(r)&&!Ey(r)?t:r||wk(n)||t}const Rk=async function(n){const e=this.getOffsetParent||oS,t=this.getDimensions,r=await t(n.floating);return{reference:Pk(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function kk(n){return fs(n).direction==="rtl"}const Dk={convertOffsetParentRelativeRectToViewportRelativeRect:bk,getDocumentElement:Hs,getClippingRect:jk,getOffsetParent:oS,getElementRects:Rk,getClientRects:Sk,getDimensions:Ak,getScale:Ul,isElement:hs,isRTL:kk};function Ok(n,e){let t=null,r;const s=Hs(n);function a(){var u;clearTimeout(r),(u=t)==null||u.disconnect(),t=null}function c(u,h){u===void 0&&(u=!1),h===void 0&&(h=1),a();const{left:m,top:g,width:v,height:y}=n.getBoundingClientRect();if(u||e(),!v||!y)return;const b=Uh(g),S=Uh(s.clientWidth-(m+v)),_=Uh(s.clientHeight-(g+y)),x=Uh(m),I={rootMargin:-b+"px "+-S+"px "+-_+"px "+-x+"px",threshold:Tr(0,Io(1,h))||1};let C=!0;function O(V){const B=V[0].intersectionRatio;if(B!==h){if(!C)return c();B?c(!1,B):r=setTimeout(()=>{c(!1,1e-7)},1e3)}C=!1}try{t=new IntersectionObserver(O,{...I,root:s.ownerDocument})}catch{t=new IntersectionObserver(O,I)}t.observe(n)}return c(!0),a}function Lk(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:h=!1}=r,m=Sy(n),g=s||a?[...m?Fu(m):[],...Fu(e)]:[];g.forEach(A=>{s&&A.addEventListener("scroll",t,{passive:!0}),a&&A.addEventListener("resize",t)});const v=m&&u?Ok(m,t):null;let y=-1,b=null;c&&(b=new ResizeObserver(A=>{let[I]=A;I&&I.target===m&&b&&(b.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var C;(C=b)==null||C.observe(e)})),t()}),m&&!h&&b.observe(m),b.observe(e));let S,_=h?Ia(n):null;h&&x();function x(){const A=Ia(n);_&&(A.x!==_.x||A.y!==_.y||A.width!==_.width||A.height!==_.height)&&t(),_=A,S=requestAnimationFrame(x)}return t(),()=>{var A;g.forEach(I=>{s&&I.removeEventListener("scroll",t),a&&I.removeEventListener("resize",t)}),v==null||v(),(A=b)==null||A.disconnect(),b=null,h&&cancelAnimationFrame(S)}}const Mk=pk,Fk=gk,Vk=hk,Uk=yk,$k=fk,A_=dk,zk=vk,Bk=(n,e,t)=>{const r=new Map,s={platform:Dk,...t},a={...s.platform,_c:r};return uk(n,e,{...s,platform:a})};var of=typeof document<"u"?E.useLayoutEffect:E.useEffect;function Nf(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Nf(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const a=s[r];if(!(a==="_owner"&&n.$$typeof)&&!Nf(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function aS(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function P_(n,e){const t=aS(n);return Math.round(e*t)/t}function Ig(n){const e=E.useRef(n);return of(()=>{e.current=n}),e}function qk(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:c}={},transform:u=!0,whileElementsMounted:h,open:m}=n,[g,v]=E.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[y,b]=E.useState(r);Nf(y,r)||b(r);const[S,_]=E.useState(null),[x,A]=E.useState(null),I=E.useCallback(q=>{q!==B.current&&(B.current=q,_(q))},[]),C=E.useCallback(q=>{q!==P.current&&(P.current=q,A(q))},[]),O=a||S,V=c||x,B=E.useRef(null),P=E.useRef(null),R=E.useRef(g),D=h!=null,k=Ig(h),$=Ig(s),z=Ig(m),M=E.useCallback(()=>{if(!B.current||!P.current)return;const q={placement:e,strategy:t,middleware:y};$.current&&(q.platform=$.current),Bk(B.current,P.current,q).then(Q=>{const Z={...Q,isPositioned:z.current!==!1};ie.current&&!Nf(R.current,Z)&&(R.current=Z,Fa.flushSync(()=>{v(Z)}))})},[y,e,t,$,z]);of(()=>{m===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,v(q=>({...q,isPositioned:!1})))},[m]);const ie=E.useRef(!1);of(()=>(ie.current=!0,()=>{ie.current=!1}),[]),of(()=>{if(O&&(B.current=O),V&&(P.current=V),O&&V){if(k.current)return k.current(O,V,M);M()}},[O,V,M,k,D]);const K=E.useMemo(()=>({reference:B,floating:P,setReference:I,setFloating:C}),[I,C]),J=E.useMemo(()=>({reference:O,floating:V}),[O,V]),X=E.useMemo(()=>{const q={position:t,left:0,top:0};if(!J.floating)return q;const Q=P_(J.floating,g.x),Z=P_(J.floating,g.y);return u?{...q,transform:"translate("+Q+"px, "+Z+"px)",...aS(J.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:Q,top:Z}},[t,u,J.floating,g.x,g.y]);return E.useMemo(()=>({...g,update:M,refs:K,elements:J,floatingStyles:X}),[g,M,K,J,X])}const Wk=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?A_({element:r.current,padding:s}).fn(t):{}:r?A_({element:r,padding:s}).fn(t):{}}}},Hk=(n,e)=>({...Mk(n),options:[n,e]}),Kk=(n,e)=>({...Fk(n),options:[n,e]}),Gk=(n,e)=>({...zk(n),options:[n,e]}),Qk=(n,e)=>({...Vk(n),options:[n,e]}),Yk=(n,e)=>({...Uk(n),options:[n,e]}),Xk=(n,e)=>({...$k(n),options:[n,e]}),Jk=(n,e)=>({...Wk(n),options:[n,e]});var Zk="Arrow",lS=E.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...a}=n;return l.jsx(Ke.svg,{...a,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});lS.displayName=Zk;var eD=lS;function cS(n){const[e,t]=E.useState(void 0);return Gt(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let c,u;if("borderBoxSize"in a){const h=a.borderBoxSize,m=Array.isArray(h)?h[0]:h;c=m.inlineSize,u=m.blockSize}else c=n.offsetWidth,u=n.offsetHeight;t({width:c,height:u})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var Ny="Popper",[uS,om]=Ti(Ny),[tD,dS]=uS(Ny),hS=n=>{const{__scopePopper:e,children:t}=n,[r,s]=E.useState(null);return l.jsx(tD,{scope:e,anchor:r,onAnchorChange:s,children:t})};hS.displayName=Ny;var fS="PopperAnchor",mS=E.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,a=dS(fS,t),c=E.useRef(null),u=xt(e,c);return E.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||c.current)}),r?null:l.jsx(Ke.div,{...s,ref:u})});mS.displayName=fS;var Ty="PopperContent",[nD,rD]=uS(Ty),pS=E.forwardRef((n,e)=>{var me,Se,Pe,Ce,De,Ue;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:c=0,arrowPadding:u=0,avoidCollisions:h=!0,collisionBoundary:m=[],collisionPadding:g=0,sticky:v="partial",hideWhenDetached:y=!1,updatePositionStrategy:b="optimized",onPlaced:S,..._}=n,x=dS(Ty,t),[A,I]=E.useState(null),C=xt(e,bt=>I(bt)),[O,V]=E.useState(null),B=cS(O),P=(B==null?void 0:B.width)??0,R=(B==null?void 0:B.height)??0,D=r+(a!=="center"?"-"+a:""),k=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},$=Array.isArray(m)?m:[m],z=$.length>0,M={padding:k,boundary:$.filter(iD),altBoundary:z},{refs:ie,floatingStyles:K,placement:J,isPositioned:X,middlewareData:q}=qk({strategy:"fixed",placement:D,whileElementsMounted:(...bt)=>Lk(...bt,{animationFrame:b==="always"}),elements:{reference:x.anchor},middleware:[Hk({mainAxis:s+R,alignmentAxis:c}),h&&Kk({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?Gk():void 0,...M}),h&&Qk({...M}),Yk({...M,apply:({elements:bt,rects:kt,availableWidth:sn,availableHeight:Ft})=>{const{width:Tt,height:St}=kt.reference,wt=bt.floating.style;wt.setProperty("--radix-popper-available-width",`${sn}px`),wt.setProperty("--radix-popper-available-height",`${Ft}px`),wt.setProperty("--radix-popper-anchor-width",`${Tt}px`),wt.setProperty("--radix-popper-anchor-height",`${St}px`)}}),O&&Jk({element:O,padding:u}),oD({arrowWidth:P,arrowHeight:R}),y&&Xk({strategy:"referenceHidden",...M})]}),[Q,Z]=yS(J),U=_n(S);Gt(()=>{X&&(U==null||U())},[X,U]);const Y=(me=q.arrow)==null?void 0:me.x,le=(Se=q.arrow)==null?void 0:Se.y,be=((Pe=q.arrow)==null?void 0:Pe.centerOffset)!==0,[ve,de]=E.useState();return Gt(()=>{A&&de(window.getComputedStyle(A).zIndex)},[A]),l.jsx("div",{ref:ie.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:X?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[(Ce=q.transformOrigin)==null?void 0:Ce.x,(De=q.transformOrigin)==null?void 0:De.y].join(" "),...((Ue=q.hide)==null?void 0:Ue.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:l.jsx(nD,{scope:t,placedSide:Q,onArrowChange:V,arrowX:Y,arrowY:le,shouldHideArrow:be,children:l.jsx(Ke.div,{"data-side":Q,"data-align":Z,..._,ref:C,style:{..._.style,animation:X?void 0:"none"}})})})});pS.displayName=Ty;var gS="PopperArrow",sD={top:"bottom",right:"left",bottom:"top",left:"right"},vS=E.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,a=rD(gS,r),c=sD[a.placedSide];return l.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:l.jsx(eD,{...s,ref:t,style:{...s.style,display:"block"}})})});vS.displayName=gS;function iD(n){return n!==null}var oD=n=>({name:"transformOrigin",options:n,fn(e){var x,A,I;const{placement:t,rects:r,middlewareData:s}=e,c=((x=s.arrow)==null?void 0:x.centerOffset)!==0,u=c?0:n.arrowWidth,h=c?0:n.arrowHeight,[m,g]=yS(t),v={start:"0%",center:"50%",end:"100%"}[g],y=(((A=s.arrow)==null?void 0:A.x)??0)+u/2,b=(((I=s.arrow)==null?void 0:I.y)??0)+h/2;let S="",_="";return m==="bottom"?(S=c?v:`${y}px`,_=`${-h}px`):m==="top"?(S=c?v:`${y}px`,_=`${r.floating.height+h}px`):m==="right"?(S=`${-h}px`,_=c?v:`${b}px`):m==="left"&&(S=`${r.floating.width+h}px`,_=c?v:`${b}px`),{data:{x:S,y:_}}}});function yS(n){const[e,t="center"]=n.split("-");return[e,t]}var aD=hS,xS=mS,wS=pS,_S=vS,lD="Portal",ES=E.forwardRef((n,e)=>{var u;const{container:t,...r}=n,[s,a]=E.useState(!1);Gt(()=>a(!0),[]);const c=t||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?Zf.createPortal(l.jsx(Ke.div,{...r,ref:e}),c):null});ES.displayName=lD;function cD(n,e){return E.useReducer((t,r)=>e[t][r]??t,n)}var bS=n=>{const{present:e,children:t}=n,r=uD(e),s=typeof t=="function"?t({present:r.isPresent}):E.Children.only(t),a=xt(r.ref,dD(s));return typeof t=="function"||r.isPresent?E.cloneElement(s,{ref:a}):null};bS.displayName="Presence";function uD(n){const[e,t]=E.useState(),r=E.useRef({}),s=E.useRef(n),a=E.useRef("none"),c=n?"mounted":"unmounted",[u,h]=cD(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const m=$h(r.current);a.current=u==="mounted"?m:"none"},[u]),Gt(()=>{const m=r.current,g=s.current;if(g!==n){const y=a.current,b=$h(m);n?h("MOUNT"):b==="none"||(m==null?void 0:m.display)==="none"?h("UNMOUNT"):h(g&&y!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,h]),Gt(()=>{if(e){let m;const g=e.ownerDocument.defaultView??window,v=b=>{const _=$h(r.current).includes(b.animationName);if(b.target===e&&_&&(h("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",m=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},y=b=>{b.target===e&&(a.current=$h(r.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{g.clearTimeout(m),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:E.useCallback(m=>{m&&(r.current=getComputedStyle(m)),t(m)},[])}}function $h(n){return(n==null?void 0:n.animationName)||"none"}function dD(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var[am,Az]=W2("Tooltip",[om]),Cy=om(),SS="TooltipProvider",hD=700,R_="tooltip.open",[fD,NS]=am(SS),TS=n=>{const{__scopeTooltip:e,delayDuration:t=hD,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=n,[c,u]=E.useState(!0),h=E.useRef(!1),m=E.useRef(0);return E.useEffect(()=>{const g=m.current;return()=>window.clearTimeout(g)},[]),l.jsx(fD,{scope:e,isOpenDelayed:c,delayDuration:t,onOpen:E.useCallback(()=>{window.clearTimeout(m.current),u(!1)},[]),onClose:E.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>u(!0),r)},[r]),isPointerInTransitRef:h,onPointerInTransitChange:E.useCallback(g=>{h.current=g},[]),disableHoverableContent:s,children:a})};TS.displayName=SS;var CS="Tooltip",[Pz,lm]=am(CS),gv="TooltipTrigger",mD=E.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=lm(gv,t),a=NS(gv,t),c=Cy(t),u=E.useRef(null),h=xt(e,u,s.onTriggerChange),m=E.useRef(!1),g=E.useRef(!1),v=E.useCallback(()=>m.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),l.jsx(xS,{asChild:!0,...c,children:l.jsx(Ke.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:h,onPointerMove:ze(n.onPointerMove,y=>{y.pointerType!=="touch"&&!g.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),g.current=!0)}),onPointerLeave:ze(n.onPointerLeave,()=>{s.onTriggerLeave(),g.current=!1}),onPointerDown:ze(n.onPointerDown,()=>{m.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:ze(n.onFocus,()=>{m.current||s.onOpen()}),onBlur:ze(n.onBlur,s.onClose),onClick:ze(n.onClick,s.onClose)})})});mD.displayName=gv;var pD="TooltipPortal",[Rz,gD]=am(pD,{forceMount:void 0}),rc="TooltipContent",IS=E.forwardRef((n,e)=>{const t=gD(rc,n.__scopeTooltip),{forceMount:r=t.forceMount,side:s="top",...a}=n,c=lm(rc,n.__scopeTooltip);return l.jsx(bS,{present:r||c.open,children:c.disableHoverableContent?l.jsx(jS,{side:s,...a,ref:e}):l.jsx(vD,{side:s,...a,ref:e})})}),vD=E.forwardRef((n,e)=>{const t=lm(rc,n.__scopeTooltip),r=NS(rc,n.__scopeTooltip),s=E.useRef(null),a=xt(e,s),[c,u]=E.useState(null),{trigger:h,onClose:m}=t,g=s.current,{onPointerInTransitChange:v}=r,y=E.useCallback(()=>{u(null),v(!1)},[v]),b=E.useCallback((S,_)=>{const x=S.currentTarget,A={x:S.clientX,y:S.clientY},I=_D(A,x.getBoundingClientRect()),C=ED(A,I),O=bD(_.getBoundingClientRect()),V=ND([...C,...O]);u(V),v(!0)},[v]);return E.useEffect(()=>()=>y(),[y]),E.useEffect(()=>{if(h&&g){const S=x=>b(x,g),_=x=>b(x,h);return h.addEventListener("pointerleave",S),g.addEventListener("pointerleave",_),()=>{h.removeEventListener("pointerleave",S),g.removeEventListener("pointerleave",_)}}},[h,g,b,y]),E.useEffect(()=>{if(c){const S=_=>{const x=_.target,A={x:_.clientX,y:_.clientY},I=(h==null?void 0:h.contains(x))||(g==null?void 0:g.contains(x)),C=!SD(A,c);I?y():C&&(y(),m())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[h,g,c,m,y]),l.jsx(jS,{...n,ref:a})}),[yD,xD]=am(CS,{isInside:!1}),jS=E.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:c,...u}=n,h=lm(rc,t),m=Cy(t),{onClose:g}=h;return E.useEffect(()=>(document.addEventListener(R_,g),()=>document.removeEventListener(R_,g)),[g]),E.useEffect(()=>{if(h.trigger){const v=y=>{const b=y.target;b!=null&&b.contains(h.trigger)&&g()};return window.addEventListener("scroll",v,{capture:!0}),()=>window.removeEventListener("scroll",v,{capture:!0})}},[h.trigger,g]),l.jsx(yy,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:v=>v.preventDefault(),onDismiss:g,children:l.jsxs(wS,{"data-state":h.stateAttribute,...m,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(c1,{children:r}),l.jsx(yD,{scope:t,isInside:!0,children:l.jsx(KP,{id:h.contentId,role:"tooltip",children:s||r})})]})})});IS.displayName=rc;var AS="TooltipArrow",wD=E.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=Cy(t);return xD(AS,t).isInside?null:l.jsx(_S,{...s,...r,ref:e})});wD.displayName=AS;function _D(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),a=Math.abs(e.left-n.x);switch(Math.min(t,r,s,a)){case a:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function ED(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function bD(n){const{top:e,right:t,bottom:r,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:r},{x:s,y:r}]}function SD(n,e){const{x:t,y:r}=n;let s=!1;for(let a=0,c=e.length-1;a<e.length;c=a++){const u=e[a].x,h=e[a].y,m=e[c].x,g=e[c].y;h>r!=g>r&&t<(m-u)*(r-h)/(g-h)+u&&(s=!s)}return s}function ND(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),TD(e)}function TD(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const s=n[r];for(;e.length>=2;){const a=e[e.length-1],c=e[e.length-2];if((a.x-c.x)*(s.y-c.y)>=(a.y-c.y)*(s.x-c.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;t.length>=2;){const a=t[t.length-1],c=t[t.length-2];if((a.x-c.x)*(s.y-c.y)>=(a.y-c.y)*(s.x-c.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var CD=TS,PS=IS;const ID=CD,jD=E.forwardRef(({className:n,sideOffset:e=4,...t},r)=>l.jsx(PS,{ref:r,sideOffset:e,className:et("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));jD.displayName=PS.displayName;var cm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},um=typeof window>"u"||"Deno"in globalThis;function is(){}function AD(n,e){return typeof n=="function"?n(e):n}function PD(n){return typeof n=="number"&&n>=0&&n!==1/0}function RD(n,e){return Math.max(n+(e||0)-Date.now(),0)}function vv(n,e){return typeof n=="function"?n(e):n}function kD(n,e){return typeof n=="function"?n(e):n}function k_(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:a,queryKey:c,stale:u}=n;if(c){if(r){if(e.queryHash!==Iy(c,e.options))return!1}else if(!Uu(e.queryKey,c))return!1}if(t!=="all"){const h=e.isActive();if(t==="active"&&!h||t==="inactive"&&h)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||a&&!a(e))}function D_(n,e){const{exact:t,status:r,predicate:s,mutationKey:a}=n;if(a){if(!e.options.mutationKey)return!1;if(t){if(Vu(e.options.mutationKey)!==Vu(a))return!1}else if(!Uu(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Iy(n,e){return((e==null?void 0:e.queryKeyHashFn)||Vu)(n)}function Vu(n){return JSON.stringify(n,(e,t)=>yv(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function Uu(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Uu(n[t],e[t])):!1}function RS(n,e){if(n===e)return n;const t=O_(n)&&O_(e);if(t||yv(n)&&yv(e)){const r=t?n:Object.keys(n),s=r.length,a=t?e:Object.keys(e),c=a.length,u=t?[]:{},h=new Set(r);let m=0;for(let g=0;g<c;g++){const v=t?g:a[g];(!t&&h.has(v)||t)&&n[v]===void 0&&e[v]===void 0?(u[v]=void 0,m++):(u[v]=RS(n[v],e[v]),u[v]===n[v]&&n[v]!==void 0&&m++)}return s===c&&m===s?n:u}return e}function O_(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function yv(n){if(!L_(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!L_(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function L_(n){return Object.prototype.toString.call(n)==="[object Object]"}function DD(n){return new Promise(e=>{setTimeout(e,n)})}function OD(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?RS(n,e):e}function LD(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function MD(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var jy=Symbol();function kS(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===jy?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var va,co,Hl,Xb,FD=(Xb=class extends cm{constructor(){super();Et(this,va);Et(this,co);Et(this,Hl);st(this,Hl,e=>{if(!um&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){ue(this,co)||this.setEventListener(ue(this,Hl))}onUnsubscribe(){var e;this.hasListeners()||((e=ue(this,co))==null||e.call(this),st(this,co,void 0))}setEventListener(e){var t;st(this,Hl,e),(t=ue(this,co))==null||t.call(this),st(this,co,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ue(this,va)!==e&&(st(this,va,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof ue(this,va)=="boolean"?ue(this,va):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},va=new WeakMap,co=new WeakMap,Hl=new WeakMap,Xb),DS=new FD,Kl,uo,Gl,Jb,VD=(Jb=class extends cm{constructor(){super();Et(this,Kl,!0);Et(this,uo);Et(this,Gl);st(this,Gl,e=>{if(!um&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){ue(this,uo)||this.setEventListener(ue(this,Gl))}onUnsubscribe(){var e;this.hasListeners()||((e=ue(this,uo))==null||e.call(this),st(this,uo,void 0))}setEventListener(e){var t;st(this,Gl,e),(t=ue(this,uo))==null||t.call(this),st(this,uo,e(this.setOnline.bind(this)))}setOnline(e){ue(this,Kl)!==e&&(st(this,Kl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ue(this,Kl)}},Kl=new WeakMap,uo=new WeakMap,Gl=new WeakMap,Jb),Tf=new VD;function UD(){let n,e;const t=new Promise((s,a)=>{n=s,e=a});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function $D(n){return Math.min(1e3*2**n,3e4)}function OS(n){return(n??"online")==="online"?Tf.isOnline():!0}var LS=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function jg(n){return n instanceof LS}function MS(n){let e=!1,t=0,r=!1,s;const a=UD(),c=_=>{var x;r||(y(new LS(_)),(x=n.abort)==null||x.call(n))},u=()=>{e=!0},h=()=>{e=!1},m=()=>DS.isFocused()&&(n.networkMode==="always"||Tf.isOnline())&&n.canRun(),g=()=>OS(n.networkMode)&&n.canRun(),v=_=>{var x;r||(r=!0,(x=n.onSuccess)==null||x.call(n,_),s==null||s(),a.resolve(_))},y=_=>{var x;r||(r=!0,(x=n.onError)==null||x.call(n,_),s==null||s(),a.reject(_))},b=()=>new Promise(_=>{var x;s=A=>{(r||m())&&_(A)},(x=n.onPause)==null||x.call(n)}).then(()=>{var _;s=void 0,r||(_=n.onContinue)==null||_.call(n)}),S=()=>{if(r)return;let _;const x=t===0?n.initialPromise:void 0;try{_=x??n.fn()}catch(A){_=Promise.reject(A)}Promise.resolve(_).then(v).catch(A=>{var B;if(r)return;const I=n.retry??(um?0:3),C=n.retryDelay??$D,O=typeof C=="function"?C(t,A):C,V=I===!0||typeof I=="number"&&t<I||typeof I=="function"&&I(t,A);if(e||!V){y(A);return}t++,(B=n.onFail)==null||B.call(n,t,A),DD(O).then(()=>m()?void 0:b()).then(()=>{e?y(A):S()})})};return{promise:a,cancel:c,continue:()=>(s==null||s(),a),cancelRetry:u,continueRetry:h,canStart:g,start:()=>(g()?S():b().then(S),a)}}var zD=n=>setTimeout(n,0);function BD(){let n=[],e=0,t=u=>{u()},r=u=>{u()},s=zD;const a=u=>{e?n.push(u):s(()=>{t(u)})},c=()=>{const u=n;n=[],u.length&&s(()=>{r(()=>{u.forEach(h=>{t(h)})})})};return{batch:u=>{let h;e++;try{h=u()}finally{e--,e||c()}return h},batchCalls:u=>(...h)=>{a(()=>{u(...h)})},schedule:a,setNotifyFunction:u=>{t=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var er=BD(),ya,Zb,FS=(Zb=class{constructor(){Et(this,ya)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),PD(this.gcTime)&&st(this,ya,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(um?1/0:5*60*1e3))}clearGcTimeout(){ue(this,ya)&&(clearTimeout(ue(this,ya)),st(this,ya,void 0))}},ya=new WeakMap,Zb),Ql,xa,Ur,wa,Bn,ed,_a,os,hi,e1,qD=(e1=class extends FS{constructor(t){super();Et(this,os);Et(this,Ql);Et(this,xa);Et(this,Ur);Et(this,wa);Et(this,Bn);Et(this,ed);Et(this,_a);st(this,_a,!1),st(this,ed,t.defaultOptions),this.setOptions(t.options),this.observers=[],st(this,wa,t.client),st(this,Ur,ue(this,wa).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,st(this,Ql,HD(this.options)),this.state=t.state??ue(this,Ql),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=ue(this,Bn))==null?void 0:t.promise}setOptions(t){this.options={...ue(this,ed),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ue(this,Ur).remove(this)}setData(t,r){const s=OD(this.state.data,t,this.options);return $n(this,os,hi).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){$n(this,os,hi).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,a;const r=(s=ue(this,Bn))==null?void 0:s.promise;return(a=ue(this,Bn))==null||a.cancel(t),r?r.then(is).catch(is):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ue(this,Ql))}isActive(){return this.observers.some(t=>kD(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===jy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>vv(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!RD(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=ue(this,Bn))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=ue(this,Bn))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),ue(this,Ur).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(ue(this,Bn)&&(ue(this,_a)?ue(this,Bn).cancel({revert:!0}):ue(this,Bn).cancelRetry()),this.scheduleGc()),ue(this,Ur).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||$n(this,os,hi).call(this,{type:"invalidate"})}fetch(t,r){var g,v,y;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(ue(this,Bn))return ue(this,Bn).continueRetry(),ue(this,Bn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const b=this.observers.find(S=>S.options.queryFn);b&&this.setOptions(b.options)}const s=new AbortController,a=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(st(this,_a,!0),s.signal)})},c=()=>{const b=kS(this.options,r),_=(()=>{const x={client:ue(this,wa),queryKey:this.queryKey,meta:this.meta};return a(x),x})();return st(this,_a,!1),this.options.persister?this.options.persister(b,_,this):b(_)},h=(()=>{const b={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:ue(this,wa),state:this.state,fetchFn:c};return a(b),b})();(g=this.options.behavior)==null||g.onFetch(h,this),st(this,xa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((v=h.fetchOptions)==null?void 0:v.meta))&&$n(this,os,hi).call(this,{type:"fetch",meta:(y=h.fetchOptions)==null?void 0:y.meta});const m=b=>{var S,_,x,A;jg(b)&&b.silent||$n(this,os,hi).call(this,{type:"error",error:b}),jg(b)||((_=(S=ue(this,Ur).config).onError)==null||_.call(S,b,this),(A=(x=ue(this,Ur).config).onSettled)==null||A.call(x,this.state.data,b,this)),this.scheduleGc()};return st(this,Bn,MS({initialPromise:r==null?void 0:r.initialPromise,fn:h.fetchFn,abort:s.abort.bind(s),onSuccess:b=>{var S,_,x,A;if(b===void 0){m(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(b)}catch(I){m(I);return}(_=(S=ue(this,Ur).config).onSuccess)==null||_.call(S,b,this),(A=(x=ue(this,Ur).config).onSettled)==null||A.call(x,b,this.state.error,this),this.scheduleGc()},onError:m,onFail:(b,S)=>{$n(this,os,hi).call(this,{type:"failed",failureCount:b,error:S})},onPause:()=>{$n(this,os,hi).call(this,{type:"pause"})},onContinue:()=>{$n(this,os,hi).call(this,{type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0})),ue(this,Bn).start()}},Ql=new WeakMap,xa=new WeakMap,Ur=new WeakMap,wa=new WeakMap,Bn=new WeakMap,ed=new WeakMap,_a=new WeakMap,os=new WeakSet,hi=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...WD(s.data,this.options),fetchMeta:t.meta??null};case"success":return st(this,xa,void 0),{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return jg(a)&&a.revert&&ue(this,xa)?{...ue(this,xa),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),er.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),ue(this,Ur).notify({query:this,type:"updated",action:t})})},e1);function WD(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:OS(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function HD(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var js,t1,KD=(t1=class extends cm{constructor(e={}){super();Et(this,js);this.config=e,st(this,js,new Map)}build(e,t,r){const s=t.queryKey,a=t.queryHash??Iy(s,t);let c=this.get(a);return c||(c=new qD({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(c)),c}add(e){ue(this,js).has(e.queryHash)||(ue(this,js).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=ue(this,js).get(e.queryHash);t&&(e.destroy(),t===e&&ue(this,js).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){er.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ue(this,js).get(e)}getAll(){return[...ue(this,js).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>k_(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>k_(e,r)):t}notify(e){er.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){er.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){er.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},js=new WeakMap,t1),As,Zn,Ea,Ps,ro,n1,GD=(n1=class extends FS{constructor(t){super();Et(this,Ps);Et(this,As);Et(this,Zn);Et(this,Ea);this.mutationId=t.mutationId,st(this,Zn,t.mutationCache),st(this,As,[]),this.state=t.state||QD(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){ue(this,As).includes(t)||(ue(this,As).push(t),this.clearGcTimeout(),ue(this,Zn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){st(this,As,ue(this,As).filter(r=>r!==t)),this.scheduleGc(),ue(this,Zn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){ue(this,As).length||(this.state.status==="pending"?this.scheduleGc():ue(this,Zn).remove(this))}continue(){var t;return((t=ue(this,Ea))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var c,u,h,m,g,v,y,b,S,_,x,A,I,C,O,V,B,P,R,D;const r=()=>{$n(this,Ps,ro).call(this,{type:"continue"})};st(this,Ea,MS({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(k,$)=>{$n(this,Ps,ro).call(this,{type:"failed",failureCount:k,error:$})},onPause:()=>{$n(this,Ps,ro).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ue(this,Zn).canRun(this)}));const s=this.state.status==="pending",a=!ue(this,Ea).canStart();try{if(s)r();else{$n(this,Ps,ro).call(this,{type:"pending",variables:t,isPaused:a}),await((u=(c=ue(this,Zn).config).onMutate)==null?void 0:u.call(c,t,this));const $=await((m=(h=this.options).onMutate)==null?void 0:m.call(h,t));$!==this.state.context&&$n(this,Ps,ro).call(this,{type:"pending",context:$,variables:t,isPaused:a})}const k=await ue(this,Ea).start();return await((v=(g=ue(this,Zn).config).onSuccess)==null?void 0:v.call(g,k,t,this.state.context,this)),await((b=(y=this.options).onSuccess)==null?void 0:b.call(y,k,t,this.state.context)),await((_=(S=ue(this,Zn).config).onSettled)==null?void 0:_.call(S,k,null,this.state.variables,this.state.context,this)),await((A=(x=this.options).onSettled)==null?void 0:A.call(x,k,null,t,this.state.context)),$n(this,Ps,ro).call(this,{type:"success",data:k}),k}catch(k){try{throw await((C=(I=ue(this,Zn).config).onError)==null?void 0:C.call(I,k,t,this.state.context,this)),await((V=(O=this.options).onError)==null?void 0:V.call(O,k,t,this.state.context)),await((P=(B=ue(this,Zn).config).onSettled)==null?void 0:P.call(B,void 0,k,this.state.variables,this.state.context,this)),await((D=(R=this.options).onSettled)==null?void 0:D.call(R,void 0,k,t,this.state.context)),k}finally{$n(this,Ps,ro).call(this,{type:"error",error:k})}}finally{ue(this,Zn).runNext(this)}}},As=new WeakMap,Zn=new WeakMap,Ea=new WeakMap,Ps=new WeakSet,ro=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),er.batch(()=>{ue(this,As).forEach(s=>{s.onMutationUpdate(t)}),ue(this,Zn).notify({mutation:this,type:"updated",action:t})})},n1);function QD(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var mi,as,td,r1,YD=(r1=class extends cm{constructor(e={}){super();Et(this,mi);Et(this,as);Et(this,td);this.config=e,st(this,mi,new Set),st(this,as,new Map),st(this,td,0)}build(e,t,r){const s=new GD({mutationCache:this,mutationId:++Oh(this,td)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){ue(this,mi).add(e);const t=zh(e);if(typeof t=="string"){const r=ue(this,as).get(t);r?r.push(e):ue(this,as).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ue(this,mi).delete(e)){const t=zh(e);if(typeof t=="string"){const r=ue(this,as).get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&ue(this,as).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=zh(e);if(typeof t=="string"){const r=ue(this,as).get(t),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const t=zh(e);if(typeof t=="string"){const s=(r=ue(this,as).get(t))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){er.batch(()=>{ue(this,mi).forEach(e=>{this.notify({type:"removed",mutation:e})}),ue(this,mi).clear(),ue(this,as).clear()})}getAll(){return Array.from(ue(this,mi))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>D_(t,r))}findAll(e={}){return this.getAll().filter(t=>D_(e,t))}notify(e){er.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return er.batch(()=>Promise.all(e.map(t=>t.continue().catch(is))))}},mi=new WeakMap,as=new WeakMap,td=new WeakMap,r1);function zh(n){var e;return(e=n.options.scope)==null?void 0:e.id}function M_(n){return{onFetch:(e,t)=>{var g,v,y,b,S;const r=e.options,s=(y=(v=(g=e.fetchOptions)==null?void 0:g.meta)==null?void 0:v.fetchMore)==null?void 0:y.direction,a=((b=e.state.data)==null?void 0:b.pages)||[],c=((S=e.state.data)==null?void 0:S.pageParams)||[];let u={pages:[],pageParams:[]},h=0;const m=async()=>{let _=!1;const x=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?_=!0:e.signal.addEventListener("abort",()=>{_=!0}),e.signal)})},A=kS(e.options,e.fetchOptions),I=async(C,O,V)=>{if(_)return Promise.reject();if(O==null&&C.pages.length)return Promise.resolve(C);const P=(()=>{const $={client:e.client,queryKey:e.queryKey,pageParam:O,direction:V?"backward":"forward",meta:e.options.meta};return x($),$})(),R=await A(P),{maxPages:D}=e.options,k=V?MD:LD;return{pages:k(C.pages,R,D),pageParams:k(C.pageParams,O,D)}};if(s&&a.length){const C=s==="backward",O=C?XD:F_,V={pages:a,pageParams:c},B=O(r,V);u=await I(V,B,C)}else{const C=n??a.length;do{const O=h===0?c[0]??r.initialPageParam:F_(r,u);if(h>0&&O==null)break;u=await I(u,O),h++}while(h<C)}return u};e.options.persister?e.fetchFn=()=>{var _,x;return(x=(_=e.options).persister)==null?void 0:x.call(_,m,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=m}}}function F_(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function XD(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var nn,ho,fo,Yl,Xl,mo,Jl,Zl,s1,JD=(s1=class{constructor(n={}){Et(this,nn);Et(this,ho);Et(this,fo);Et(this,Yl);Et(this,Xl);Et(this,mo);Et(this,Jl);Et(this,Zl);st(this,nn,n.queryCache||new KD),st(this,ho,n.mutationCache||new YD),st(this,fo,n.defaultOptions||{}),st(this,Yl,new Map),st(this,Xl,new Map),st(this,mo,0)}mount(){Oh(this,mo)._++,ue(this,mo)===1&&(st(this,Jl,DS.subscribe(async n=>{n&&(await this.resumePausedMutations(),ue(this,nn).onFocus())})),st(this,Zl,Tf.subscribe(async n=>{n&&(await this.resumePausedMutations(),ue(this,nn).onOnline())})))}unmount(){var n,e;Oh(this,mo)._--,ue(this,mo)===0&&((n=ue(this,Jl))==null||n.call(this),st(this,Jl,void 0),(e=ue(this,Zl))==null||e.call(this),st(this,Zl,void 0))}isFetching(n){return ue(this,nn).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return ue(this,ho).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ue(this,nn).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=ue(this,nn).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(vv(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return ue(this,nn).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=ue(this,nn).get(r.queryHash),a=s==null?void 0:s.state.data,c=AD(e,a);if(c!==void 0)return ue(this,nn).build(this,r).setData(c,{...t,manual:!0})}setQueriesData(n,e,t){return er.batch(()=>ue(this,nn).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ue(this,nn).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=ue(this,nn);er.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=ue(this,nn);return er.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=er.batch(()=>ue(this,nn).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(is).catch(is)}invalidateQueries(n,e={}){return er.batch(()=>(ue(this,nn).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=er.batch(()=>ue(this,nn).findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,t);return t.throwOnError||(a=a.catch(is)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(is)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=ue(this,nn).build(this,e);return t.isStaleByTime(vv(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(is).catch(is)}fetchInfiniteQuery(n){return n.behavior=M_(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(is).catch(is)}ensureInfiniteQueryData(n){return n.behavior=M_(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Tf.isOnline()?ue(this,ho).resumePausedMutations():Promise.resolve()}getQueryCache(){return ue(this,nn)}getMutationCache(){return ue(this,ho)}getDefaultOptions(){return ue(this,fo)}setDefaultOptions(n){st(this,fo,n)}setQueryDefaults(n,e){ue(this,Yl).set(Vu(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...ue(this,Yl).values()],t={};return e.forEach(r=>{Uu(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){ue(this,Xl).set(Vu(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...ue(this,Xl).values()],t={};return e.forEach(r=>{Uu(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...ue(this,fo).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Iy(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===jy&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...ue(this,fo).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){ue(this,nn).clear(),ue(this,ho).clear()}},nn=new WeakMap,ho=new WeakMap,fo=new WeakMap,Yl=new WeakMap,Xl=new WeakMap,mo=new WeakMap,Jl=new WeakMap,Zl=new WeakMap,s1),ZD=E.createContext(void 0),eO=({client:n,children:e})=>(E.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),l.jsx(ZD.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $u(){return $u=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$u.apply(this,arguments)}var go;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(go||(go={}));const V_="popstate";function tO(n){n===void 0&&(n={});function e(r,s){let{pathname:a,search:c,hash:u}=r.location;return xv("",{pathname:a,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Cf(s)}return rO(e,t,null,n)}function Zt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function VS(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nO(){return Math.random().toString(36).substr(2,8)}function U_(n,e){return{usr:n.state,key:n.key,idx:e}}function xv(n,e,t,r){return t===void 0&&(t=null),$u({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?yc(e):e,{state:t,key:e&&e.key||r||nO()})}function Cf(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function yc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function rO(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,c=s.history,u=go.Pop,h=null,m=g();m==null&&(m=0,c.replaceState($u({},c.state,{idx:m}),""));function g(){return(c.state||{idx:null}).idx}function v(){u=go.Pop;let x=g(),A=x==null?null:x-m;m=x,h&&h({action:u,location:_.location,delta:A})}function y(x,A){u=go.Push;let I=xv(_.location,x,A);m=g()+1;let C=U_(I,m),O=_.createHref(I);try{c.pushState(C,"",O)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(O)}a&&h&&h({action:u,location:_.location,delta:1})}function b(x,A){u=go.Replace;let I=xv(_.location,x,A);m=g();let C=U_(I,m),O=_.createHref(I);c.replaceState(C,"",O),a&&h&&h({action:u,location:_.location,delta:0})}function S(x){let A=s.location.origin!=="null"?s.location.origin:s.location.href,I=typeof x=="string"?x:Cf(x);return I=I.replace(/ $/,"%20"),Zt(A,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,A)}let _={get action(){return u},get location(){return n(s,c)},listen(x){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(V_,v),h=x,()=>{s.removeEventListener(V_,v),h=null}},createHref(x){return e(s,x)},createURL:S,encodeLocation(x){let A=S(x);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:y,replace:b,go(x){return c.go(x)}};return _}var $_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})($_||($_={}));function sO(n,e,t){return t===void 0&&(t="/"),iO(n,e,t)}function iO(n,e,t,r){let s=typeof e=="string"?yc(e):e,a=sc(s.pathname||"/",t);if(a==null)return null;let c=US(n);oO(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let m=vO(a);u=pO(c[h],m)}return u}function US(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(a,c,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};h.relativePath.startsWith("/")&&(Zt(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let m=xo([r,h.relativePath]),g=t.concat(h);a.children&&a.children.length>0&&(Zt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),US(a.children,e,g,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:fO(m,a.index),routesMeta:g})};return n.forEach((a,c)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))s(a,c);else for(let h of $S(a.path))s(a,c,h)}),e}function $S(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let c=$S(r.join("/")),u=[];return u.push(...c.map(h=>h===""?a:[a,h].join("/"))),s&&u.push(...c),u.map(h=>n.startsWith("/")&&h===""?"/":h)}function oO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:mO(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const aO=/^:[\w-]+$/,lO=3,cO=2,uO=1,dO=10,hO=-2,z_=n=>n==="*";function fO(n,e){let t=n.split("/"),r=t.length;return t.some(z_)&&(r+=hO),e&&(r+=cO),t.filter(s=>!z_(s)).reduce((s,a)=>s+(aO.test(a)?lO:a===""?uO:dO),r)}function mO(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function pO(n,e,t){let{routesMeta:r}=n,s={},a="/",c=[];for(let u=0;u<r.length;++u){let h=r[u],m=u===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",v=wv({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},g),y=h.route;if(!v)return null;Object.assign(s,v.params),c.push({params:s,pathname:xo([a,v.pathname]),pathnameBase:_O(xo([a,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(a=xo([a,v.pathnameBase]))}return c}function wv(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=gO(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],c=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((m,g,v)=>{let{paramName:y,isOptional:b}=g;if(y==="*"){let _=u[v]||"";c=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const S=u[v];return b&&!S?m[y]=void 0:m[y]=(S||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:c,pattern:n}}function gO(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),VS(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function vO(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return VS(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function sc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function yO(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?yc(n):n;return{pathname:t?t.startsWith("/")?t:xO(t,e):e,search:EO(r),hash:bO(s)}}function xO(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Ag(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Ay(n,e){let t=wO(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Py(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=yc(n):(s=$u({},n),Zt(!s.pathname||!s.pathname.includes("?"),Ag("?","pathname","search",s)),Zt(!s.pathname||!s.pathname.includes("#"),Ag("#","pathname","hash",s)),Zt(!s.search||!s.search.includes("#"),Ag("#","search","hash",s)));let a=n===""||s.pathname==="",c=a?"/":s.pathname,u;if(c==null)u=t;else{let v=e.length-1;if(!r&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),v-=1;s.pathname=y.join("/")}u=v>=0?e[v]:"/"}let h=yO(s,u),m=c&&c!=="/"&&c.endsWith("/"),g=(a||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(m||g)&&(h.pathname+="/"),h}const xo=n=>n.join("/").replace(/\/\/+/g,"/"),_O=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),EO=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,bO=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function SO(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const zS=["post","put","patch","delete"];new Set(zS);const NO=["get",...zS];new Set(NO);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zu(){return zu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},zu.apply(this,arguments)}const dm=E.createContext(null),BS=E.createContext(null),Ci=E.createContext(null),hm=E.createContext(null),Ks=E.createContext({outlet:null,matches:[],isDataRoute:!1}),qS=E.createContext(null);function TO(n,e){let{relative:t}=e===void 0?{}:e;xc()||Zt(!1);let{basename:r,navigator:s}=E.useContext(Ci),{hash:a,pathname:c,search:u}=fm(n,{relative:t}),h=c;return r!=="/"&&(h=c==="/"?r:xo([r,c])),s.createHref({pathname:h,search:u,hash:a})}function xc(){return E.useContext(hm)!=null}function Ii(){return xc()||Zt(!1),E.useContext(hm).location}function WS(n){E.useContext(Ci).static||E.useLayoutEffect(n)}function wc(){let{isDataRoute:n}=E.useContext(Ks);return n?$O():CO()}function CO(){xc()||Zt(!1);let n=E.useContext(dm),{basename:e,future:t,navigator:r}=E.useContext(Ci),{matches:s}=E.useContext(Ks),{pathname:a}=Ii(),c=JSON.stringify(Ay(s,t.v7_relativeSplatPath)),u=E.useRef(!1);return WS(()=>{u.current=!0}),E.useCallback(function(m,g){if(g===void 0&&(g={}),!u.current)return;if(typeof m=="number"){r.go(m);return}let v=Py(m,JSON.parse(c),a,g.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:xo([e,v.pathname])),(g.replace?r.replace:r.push)(v,g.state,g)},[e,r,c,a,n])}const IO=E.createContext(null);function jO(n){let e=E.useContext(Ks).outlet;return e&&E.createElement(IO.Provider,{value:n},e)}function HS(){let{matches:n}=E.useContext(Ks),e=n[n.length-1];return e?e.params:{}}function fm(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=E.useContext(Ci),{matches:s}=E.useContext(Ks),{pathname:a}=Ii(),c=JSON.stringify(Ay(s,r.v7_relativeSplatPath));return E.useMemo(()=>Py(n,JSON.parse(c),a,t==="path"),[n,c,a,t])}function AO(n,e){return PO(n,e)}function PO(n,e,t,r){xc()||Zt(!1);let{navigator:s}=E.useContext(Ci),{matches:a}=E.useContext(Ks),c=a[a.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let m=Ii(),g;if(e){var v;let x=typeof e=="string"?yc(e):e;h==="/"||(v=x.pathname)!=null&&v.startsWith(h)||Zt(!1),g=x}else g=m;let y=g.pathname||"/",b=y;if(h!=="/"){let x=h.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(x.length).join("/")}let S=sO(n,{pathname:b}),_=LO(S&&S.map(x=>Object.assign({},x,{params:Object.assign({},u,x.params),pathname:xo([h,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?h:xo([h,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),a,t,r);return e&&_?E.createElement(hm.Provider,{value:{location:zu({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:go.Pop}},_):_}function RO(){let n=UO(),e=SO(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),t?E.createElement("pre",{style:s},t):null,null)}const kO=E.createElement(RO,null);class DO extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?E.createElement(Ks.Provider,{value:this.props.routeContext},E.createElement(qS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function OO(n){let{routeContext:e,match:t,children:r}=n,s=E.useContext(dm);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),E.createElement(Ks.Provider,{value:e},r)}function LO(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,u=(s=t)==null?void 0:s.errors;if(u!=null){let g=c.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);g>=0||Zt(!1),c=c.slice(0,Math.min(c.length,g+1))}let h=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let g=0;g<c.length;g++){let v=c[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=g),v.route.id){let{loaderData:y,errors:b}=t,S=v.route.loader&&y[v.route.id]===void 0&&(!b||b[v.route.id]===void 0);if(v.route.lazy||S){h=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}return c.reduceRight((g,v,y)=>{let b,S=!1,_=null,x=null;t&&(b=u&&v.route.id?u[v.route.id]:void 0,_=v.route.errorElement||kO,h&&(m<0&&y===0?(zO("route-fallback"),S=!0,x=null):m===y&&(S=!0,x=v.route.hydrateFallbackElement||null)));let A=e.concat(c.slice(0,y+1)),I=()=>{let C;return b?C=_:S?C=x:v.route.Component?C=E.createElement(v.route.Component,null):v.route.element?C=v.route.element:C=g,E.createElement(OO,{match:v,routeContext:{outlet:g,matches:A,isDataRoute:t!=null},children:C})};return t&&(v.route.ErrorBoundary||v.route.errorElement||y===0)?E.createElement(DO,{location:t.location,revalidation:t.revalidation,component:_,error:b,children:I(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):I()},null)}var KS=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(KS||{}),GS=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(GS||{});function MO(n){let e=E.useContext(dm);return e||Zt(!1),e}function FO(n){let e=E.useContext(BS);return e||Zt(!1),e}function VO(n){let e=E.useContext(Ks);return e||Zt(!1),e}function QS(n){let e=VO(),t=e.matches[e.matches.length-1];return t.route.id||Zt(!1),t.route.id}function UO(){var n;let e=E.useContext(qS),t=FO(),r=QS();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function $O(){let{router:n}=MO(KS.UseNavigateStable),e=QS(GS.UseNavigateStable),t=E.useRef(!1);return WS(()=>{t.current=!0}),E.useCallback(function(s,a){a===void 0&&(a={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,zu({fromRouteId:e},a)))},[n,e])}const B_={};function zO(n,e,t){B_[n]||(B_[n]=!0)}function af(n){let{to:e,replace:t,state:r,relative:s}=n;xc()||Zt(!1);let{future:a,static:c}=E.useContext(Ci),{matches:u}=E.useContext(Ks),{pathname:h}=Ii(),m=wc(),g=Py(e,Ay(u,a.v7_relativeSplatPath),h,s==="path"),v=JSON.stringify(g);return E.useEffect(()=>m(JSON.parse(v),{replace:t,state:r,relative:s}),[m,v,s,t,r]),null}function BO(n){return jO(n.context)}function Bt(n){Zt(!1)}function qO(n){let{basename:e="/",children:t=null,location:r,navigationType:s=go.Pop,navigator:a,static:c=!1,future:u}=n;xc()&&Zt(!1);let h=e.replace(/^\/*/,"/"),m=E.useMemo(()=>({basename:h,navigator:a,static:c,future:zu({v7_relativeSplatPath:!1},u)}),[h,u,a,c]);typeof r=="string"&&(r=yc(r));let{pathname:g="/",search:v="",hash:y="",state:b=null,key:S="default"}=r,_=E.useMemo(()=>{let x=sc(g,h);return x==null?null:{location:{pathname:x,search:v,hash:y,state:b,key:S},navigationType:s}},[h,g,v,y,b,S,s]);return _==null?null:E.createElement(Ci.Provider,{value:m},E.createElement(hm.Provider,{children:t,value:_}))}function WO(n){let{children:e,location:t}=n;return AO(_v(e),t)}new Promise(()=>{});function _v(n,e){e===void 0&&(e=[]);let t=[];return E.Children.forEach(n,(r,s)=>{if(!E.isValidElement(r))return;let a=[...e,s];if(r.type===E.Fragment){t.push.apply(t,_v(r.props.children,a));return}r.type!==Bt&&Zt(!1),!r.props.index||!r.props.children||Zt(!1);let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=_v(r.props.children,a)),t.push(c)}),t}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function If(){return If=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},If.apply(this,arguments)}function YS(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function HO(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function KO(n,e){return n.button===0&&(!e||e==="_self")&&!HO(n)}function Ev(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(s=>[t,s]):[[t,r]])},[]))}function GO(n,e){let t=Ev(n);return e&&e.forEach((r,s)=>{t.has(s)||e.getAll(s).forEach(a=>{t.append(s,a)})}),t}const QO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],YO=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],XO="6";try{window.__reactRouterVersion=XO}catch{}const JO=E.createContext({isTransitioning:!1}),ZO="startTransition",q_=o1[ZO];function eL(n){let{basename:e,children:t,future:r,window:s}=n,a=E.useRef();a.current==null&&(a.current=tO({window:s,v5Compat:!0}));let c=a.current,[u,h]=E.useState({action:c.action,location:c.location}),{v7_startTransition:m}=r||{},g=E.useCallback(v=>{m&&q_?q_(()=>h(v)):h(v)},[h,m]);return E.useLayoutEffect(()=>c.listen(g),[c,g]),E.createElement(qO,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:c,future:r})}const tL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hn=E.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:a,replace:c,state:u,target:h,to:m,preventScrollReset:g,unstable_viewTransition:v}=e,y=YS(e,QO),{basename:b}=E.useContext(Ci),S,_=!1;if(typeof m=="string"&&nL.test(m)&&(S=m,tL))try{let C=new URL(window.location.href),O=m.startsWith("//")?new URL(C.protocol+m):new URL(m),V=sc(O.pathname,b);O.origin===C.origin&&V!=null?m=V+O.search+O.hash:_=!0}catch{}let x=TO(m,{relative:s}),A=sL(m,{replace:c,state:u,target:h,preventScrollReset:g,relative:s,unstable_viewTransition:v});function I(C){r&&r(C),C.defaultPrevented||A(C)}return E.createElement("a",If({},y,{href:S||x,onClick:_||a?r:I,ref:t,target:h}))}),W_=E.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:s=!1,className:a="",end:c=!1,style:u,to:h,unstable_viewTransition:m,children:g}=e,v=YS(e,YO),y=fm(h,{relative:v.relative}),b=Ii(),S=E.useContext(BS),{navigator:_,basename:x}=E.useContext(Ci),A=S!=null&&iL(y)&&m===!0,I=_.encodeLocation?_.encodeLocation(y).pathname:y.pathname,C=b.pathname,O=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;s||(C=C.toLowerCase(),O=O?O.toLowerCase():null,I=I.toLowerCase()),O&&x&&(O=sc(O,x)||O);const V=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let B=C===I||!c&&C.startsWith(I)&&C.charAt(V)==="/",P=O!=null&&(O===I||!c&&O.startsWith(I)&&O.charAt(I.length)==="/"),R={isActive:B,isPending:P,isTransitioning:A},D=B?r:void 0,k;typeof a=="function"?k=a(R):k=[a,B?"active":null,P?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let $=typeof u=="function"?u(R):u;return E.createElement(Hn,If({},v,{"aria-current":D,className:k,ref:t,style:$,to:h,unstable_viewTransition:m}),typeof g=="function"?g(R):g)});var bv;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(bv||(bv={}));var H_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(H_||(H_={}));function rL(n){let e=E.useContext(dm);return e||Zt(!1),e}function sL(n,e){let{target:t,replace:r,state:s,preventScrollReset:a,relative:c,unstable_viewTransition:u}=e===void 0?{}:e,h=wc(),m=Ii(),g=fm(n,{relative:c});return E.useCallback(v=>{if(KO(v,t)){v.preventDefault();let y=r!==void 0?r:Cf(m)===Cf(g);h(n,{replace:y,state:s,preventScrollReset:a,relative:c,unstable_viewTransition:u})}},[m,h,g,r,s,t,n,a,c,u])}function od(n){let e=E.useRef(Ev(n)),t=E.useRef(!1),r=Ii(),s=E.useMemo(()=>GO(r.search,t.current?null:e.current),[r.search]),a=wc(),c=E.useCallback((u,h)=>{const m=Ev(typeof u=="function"?u(s):u);t.current=!0,a("?"+m,h)},[a,s]);return[s,c]}function iL(n,e){e===void 0&&(e={});let t=E.useContext(JO);t==null&&Zt(!1);let{basename:r}=rL(bv.useViewTransitionState),s=fm(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=sc(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=sc(t.nextLocation.pathname,r)||t.nextLocation.pathname;return wv(s.pathname,c)!=null||wv(s.pathname,a)!=null}const oL=()=>{};var K_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},aL=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],c=n[t++],u=n[t++],h=((s&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|c&63)}}return e.join("")},JS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],c=s+1<n.length,u=c?n[s+1]:0,h=s+2<n.length,m=h?n[s+2]:0,g=a>>2,v=(a&3)<<4|u>>4;let y=(u&15)<<2|m>>6,b=m&63;h||(b=64,c||(y=64)),r.push(t[g],t[v],t[y],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(XS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):aL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||u==null||m==null||v==null)throw new lL;const y=a<<2|u>>4;if(r.push(y),m!==64){const b=u<<4&240|m>>2;if(r.push(b),v!==64){const S=m<<6&192|v;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class lL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cL=function(n){const e=XS(n);return JS.encodeByteArray(e,!0)},jf=function(n){return cL(n).replace(/\./g,"")},ZS=function(n){try{return JS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=()=>uL().__FIREBASE_DEFAULTS__,hL=()=>{if(typeof process>"u"||typeof K_>"u")return;const n=K_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},fL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&ZS(n[1]);return e&&JSON.parse(e)},mm=()=>{try{return oL()||dL()||hL()||fL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},eN=n=>{var e,t;return(t=(e=mm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},mL=n=>{const e=eN(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},tN=()=>{var n;return(n=mm())===null||n===void 0?void 0:n.config},nN=n=>{var e;return(e=mm())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ry(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[jf(JSON.stringify(t)),jf(JSON.stringify(c)),""].join(".")}const Iu={};function vL(){const n={prod:[],emulator:[]};for(const e of Object.keys(Iu))Iu[e]?n.emulator.push(e):n.prod.push(e);return n}function yL(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let G_=!1;function rN(n,e){if(typeof window>"u"||typeof document>"u"||!Va(window.location.host)||Iu[n]===e||Iu[n]||G_)return;Iu[n]=e;function t(y){return`__firebase__banner__${y}`}const r="__firebase__banner",a=vL().prod.length>0;function c(){const y=document.getElementById(r);y&&y.remove()}function u(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function h(y,b){y.setAttribute("width","24"),y.setAttribute("id",b),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function m(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{G_=!0,c()},y}function g(y,b){y.setAttribute("id",b),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function v(){const y=yL(r),b=t("text"),S=document.getElementById(b)||document.createElement("span"),_=t("learnmore"),x=document.getElementById(_)||document.createElement("a"),A=t("preprendIcon"),I=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const C=y.element;u(C),g(x,_);const O=m();h(I,A),C.append(I,S,x,O),document.body.appendChild(C)}a?(S.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kn())}function wL(){var n;const e=(n=mm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _L(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function EL(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function bL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SL(){const n=Kn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function NL(){return!wL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TL(){try{return typeof indexedDB=="object"}catch{return!1}}function CL(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL="FirebaseError";class Gs extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=IL,Object.setPrototypeOf(this,Gs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ad.prototype.create)}}class ad{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],c=a?jL(a,r):"Error",u=`${this.serviceName}: ${c} (${s}).`;return new Gs(s,u,r)}}function jL(n,e){return n.replace(AL,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const AL=/\{\$([^}]+)}/g;function PL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ja(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],c=e[s];if(Q_(a)&&Q_(c)){if(!ja(a,c))return!1}else if(a!==c)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function Q_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function gu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function vu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function RL(n,e){const t=new kL(n,e);return t.subscribe.bind(t)}class kL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");DL(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Pg),s.error===void 0&&(s.error=Pg),s.complete===void 0&&(s.complete=Pg);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Pg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(n){return n&&n._delegate?n._delegate:n}class Ro{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new pL;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ML(e))try{this.getOrInitializeService({instanceIdentifier:pa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=pa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pa){return this.instances.has(e)}getOptions(e=pa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&c.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=pa){return this.component?this.component.multipleInstances?e:pa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LL(n){return n===pa?void 0:n}function ML(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new OL(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ut||(ut={}));const VL={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},UL=ut.INFO,$L={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},zL=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=$L[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ky{constructor(e){this.name=e,this._logLevel=UL,this._logHandler=zL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...e),this._logHandler(this,ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...e),this._logHandler(this,ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...e),this._logHandler(this,ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...e),this._logHandler(this,ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...e),this._logHandler(this,ut.ERROR,...e)}}const BL=(n,e)=>e.some(t=>n instanceof t);let Y_,X_;function qL(){return Y_||(Y_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WL(){return X_||(X_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sN=new WeakMap,Sv=new WeakMap,iN=new WeakMap,Rg=new WeakMap,Dy=new WeakMap;function HL(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(wo(n.result)),s()},c=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&sN.set(t,n)}).catch(()=>{}),Dy.set(e,n),e}function KL(n){if(Sv.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),s()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});Sv.set(n,e)}let Nv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Sv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||iN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function GL(n){Nv=n(Nv)}function QL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(kg(this),e,...t);return iN.set(r,e.sort?e.sort():[e]),wo(r)}:WL().includes(n)?function(...e){return n.apply(kg(this),e),wo(sN.get(this))}:function(...e){return wo(n.apply(kg(this),e))}}function YL(n){return typeof n=="function"?QL(n):(n instanceof IDBTransaction&&KL(n),BL(n,qL())?new Proxy(n,Nv):n)}function wo(n){if(n instanceof IDBRequest)return HL(n);if(Rg.has(n))return Rg.get(n);const e=YL(n);return e!==n&&(Rg.set(n,e),Dy.set(e,n)),e}const kg=n=>Dy.get(n);function XL(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const c=indexedDB.open(n,e),u=wo(c);return r&&c.addEventListener("upgradeneeded",h=>{r(wo(c.result),h.oldVersion,h.newVersion,wo(c.transaction),h)}),t&&c.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{a&&h.addEventListener("close",()=>a()),s&&h.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),u}const JL=["get","getKey","getAll","getAllKeys","count"],ZL=["put","add","delete","clear"],Dg=new Map;function J_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Dg.get(e))return Dg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=ZL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||JL.includes(t)))return;const a=async function(c,...u){const h=this.transaction(c,s?"readwrite":"readonly");let m=h.store;return r&&(m=m.index(u.shift())),(await Promise.all([m[t](...u),s&&h.done]))[0]};return Dg.set(e,a),a}GL(n=>({...n,get:(e,t,r)=>J_(e,t)||n.get(e,t,r),has:(e,t)=>!!J_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(t4(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function t4(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tv="@firebase/app",Z_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i=new ky("@firebase/app"),n4="@firebase/app-compat",r4="@firebase/analytics-compat",s4="@firebase/analytics",i4="@firebase/app-check-compat",o4="@firebase/app-check",a4="@firebase/auth",l4="@firebase/auth-compat",c4="@firebase/database",u4="@firebase/data-connect",d4="@firebase/database-compat",h4="@firebase/functions",f4="@firebase/functions-compat",m4="@firebase/installations",p4="@firebase/installations-compat",g4="@firebase/messaging",v4="@firebase/messaging-compat",y4="@firebase/performance",x4="@firebase/performance-compat",w4="@firebase/remote-config",_4="@firebase/remote-config-compat",E4="@firebase/storage",b4="@firebase/storage-compat",S4="@firebase/firestore",N4="@firebase/ai",T4="@firebase/firestore-compat",C4="firebase",I4="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="[DEFAULT]",j4={[Tv]:"fire-core",[n4]:"fire-core-compat",[s4]:"fire-analytics",[r4]:"fire-analytics-compat",[o4]:"fire-app-check",[i4]:"fire-app-check-compat",[a4]:"fire-auth",[l4]:"fire-auth-compat",[c4]:"fire-rtdb",[u4]:"fire-data-connect",[d4]:"fire-rtdb-compat",[h4]:"fire-fn",[f4]:"fire-fn-compat",[m4]:"fire-iid",[p4]:"fire-iid-compat",[g4]:"fire-fcm",[v4]:"fire-fcm-compat",[y4]:"fire-perf",[x4]:"fire-perf-compat",[w4]:"fire-rc",[_4]:"fire-rc-compat",[E4]:"fire-gcs",[b4]:"fire-gcs-compat",[S4]:"fire-fst",[T4]:"fire-fst-compat",[N4]:"fire-vertex","fire-js":"fire-js",[C4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new Map,A4=new Map,Iv=new Map;function eE(n,e){try{n.container.addComponent(e)}catch(t){_i.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Aa(n){const e=n.name;if(Iv.has(e))return _i.debug(`There were multiple attempts to register component ${e}.`),!1;Iv.set(e,n);for(const t of Af.values())eE(t,n);for(const t of A4.values())eE(t,n);return!0}function pm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function $r(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_o=new ad("app","Firebase",P4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ro("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _o.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua=I4;function oN(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Cv,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw _o.create("bad-app-name",{appName:String(s)});if(t||(t=tN()),!t)throw _o.create("no-options");const a=Af.get(s);if(a){if(ja(t,a.options)&&ja(r,a.config))return a;throw _o.create("duplicate-app",{appName:s})}const c=new FL(s);for(const h of Iv.values())c.addComponent(h);const u=new R4(t,r,c);return Af.set(s,u),u}function aN(n=Cv){const e=Af.get(n);if(!e&&n===Cv&&tN())return oN();if(!e)throw _o.create("no-app",{appName:n});return e}function ks(n,e,t){var r;let s=(r=j4[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_i.warn(u.join(" "));return}Aa(new Ro(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4="firebase-heartbeat-database",D4=1,Bu="firebase-heartbeat-store";let Og=null;function lN(){return Og||(Og=XL(k4,D4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Bu)}catch(t){console.warn(t)}}}}).catch(n=>{throw _o.create("idb-open",{originalErrorMessage:n.message})})),Og}async function O4(n){try{const t=(await lN()).transaction(Bu),r=await t.objectStore(Bu).get(cN(n));return await t.done,r}catch(e){if(e instanceof Gs)_i.warn(e.message);else{const t=_o.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_i.warn(t.message)}}}async function tE(n,e){try{const r=(await lN()).transaction(Bu,"readwrite");await r.objectStore(Bu).put(e,cN(n)),await r.done}catch(t){if(t instanceof Gs)_i.warn(t.message);else{const r=_o.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});_i.warn(r.message)}}}function cN(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=1024,M4=30;class F4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new U4(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=nE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>M4){const c=$4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){_i.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=nE(),{heartbeatsToSend:r,unsentEntries:s}=V4(this._heartbeatsCache.heartbeats),a=jf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return _i.warn(t),""}}}function nE(){return new Date().toISOString().substring(0,10)}function V4(n,e=L4){const t=[];let r=n.slice();for(const s of n){const a=t.find(c=>c.agent===s.agent);if(a){if(a.dates.push(s.date),rE(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),rE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class U4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TL()?CL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await O4(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return tE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return tE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function rE(n){return jf(JSON.stringify({version:2,heartbeats:n})).length}function $4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(n){Aa(new Ro("platform-logger",e=>new e4(e),"PRIVATE")),Aa(new Ro("heartbeat",e=>new F4(e),"PRIVATE")),ks(Tv,Z_,n),ks(Tv,Z_,"esm2017"),ks("fire-js","")}z4("");var Wn=function(){return Wn=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Wn.apply(this,arguments)};function _c(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function uN(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}function dN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const B4=dN,hN=new ad("auth","Firebase",dN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=new ky("@firebase/auth");function q4(n,...e){Pf.logLevel<=ut.WARN&&Pf.warn(`Auth (${Ua}): ${n}`,...e)}function lf(n,...e){Pf.logLevel<=ut.ERROR&&Pf.error(`Auth (${Ua}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(n,...e){throw Oy(n,...e)}function Ds(n,...e){return Oy(n,...e)}function fN(n,e,t){const r=Object.assign(Object.assign({},B4()),{[e]:t});return new ad("auth","Firebase",r).create(e,{appName:n.name})}function Eo(n){return fN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Oy(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return hN.create(n,...e)}function Qe(n,e,...t){if(!n)throw Oy(e,...t)}function pi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw lf(e),new Error(e)}function Ei(n,e){n||pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function W4(){return sE()==="http:"||sE()==="https:"}function sE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(W4()||EL()||"connection"in navigator)?navigator.onLine:!0}function K4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ei(t>e,"Short delay should be less than long delay!"),this.isMobile=xL()||bL()}get(){return H4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(n,e){Ei(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Y4=new cd(3e4,6e4);function $a(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Uo(n,e,t,r,s={}){return pN(n,s,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const u=ld(Object.assign({key:n.config.apiKey},c)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:h},a);return _L()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Va(n.emulatorConfig.host)&&(m.credentials="include"),mN.fetch()(await gN(n,n.config.apiHost,t,u),m)})}async function pN(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},G4),e);try{const s=new J4(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Bh(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const u=a.ok?c.errorMessage:c.error.message,[h,m]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bh(n,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw Bh(n,"email-already-in-use",c);if(h==="USER_DISABLED")throw Bh(n,"user-disabled",c);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw fN(n,g,m);ms(n,g)}}catch(s){if(s instanceof Gs)throw s;ms(n,"network-request-failed",{message:String(s)})}}async function gm(n,e,t,r,s={}){const a=await Uo(n,e,t,r,s);return"mfaPendingCredential"in a&&ms(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function gN(n,e,t,r){const s=`${e}${t}?${r}`,a=n,c=a.config.emulator?Ly(n.config,s):`${n.config.apiScheme}://${s}`;return Q4.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function X4(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class J4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ds(this.auth,"network-request-failed")),Y4.get())})}}function Bh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Ds(n,e,r);return s.customData._tokenResponse=t,s}function iE(n){return n!==void 0&&n.enterprise!==void 0}class Z4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return X4(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function eM(n,e){return Uo(n,"GET","/v2/recaptchaConfig",$a(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tM(n,e){return Uo(n,"POST","/v1/accounts:delete",e)}async function Rf(n,e){return Uo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nM(n,e=!1){const t=gn(n),r=await t.getIdToken(e),s=My(r);Qe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:ju(Lg(s.auth_time)),issuedAtTime:ju(Lg(s.iat)),expirationTime:ju(Lg(s.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Lg(n){return Number(n)*1e3}function My(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return lf("JWT malformed, contained fewer than 3 sections"),null;try{const s=ZS(t);return s?JSON.parse(s):(lf("Failed to decode base64 JWT payload"),null)}catch(s){return lf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function oE(n){const e=My(n);return Qe(e,"internal-error"),Qe(typeof e.exp<"u","internal-error"),Qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Gs&&rM(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function rM({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ju(this.lastLoginAt),this.creationTime=ju(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kf(n){var e;const t=n.auth,r=await n.getIdToken(),s=await qu(n,Rf(t,{idToken:r}));Qe(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?vN(a.providerUserInfo):[],u=oM(n.providerData,c),h=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(u!=null&&u.length),g=h?m:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Av(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function iM(n){const e=gn(n);await kf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oM(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function vN(n){return n.map(e=>{var{providerId:t}=e,r=_c(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aM(n,e){const t=await pN(n,{},async()=>{const r=ld({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,c=await gN(n,s,"/v1/token",`key=${a}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return n.emulatorConfig&&Va(n.emulatorConfig.host)&&(h.credentials="include"),mN.fetch()(c,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function lM(n,e){return Uo(n,"POST","/v2/accounts:revokeToken",$a(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qe(e.idToken,"internal-error"),Qe(typeof e.idToken<"u","internal-error"),Qe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Qe(e.length!==0,"internal-error");const t=oE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await aM(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,c=new $l;return r&&(Qe(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(Qe(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),a&&(Qe(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $l,this.toJSON())}_performRefresh(){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(n,e){Qe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class cs{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=_c(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Av(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await qu(this,this.stsTokenManager.getToken(this.auth,e));return Qe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return nM(this,e)}reload(){return iM(this)}_assign(e){this!==e&&(Qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new cs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await kf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($r(this.auth.app))return Promise.reject(Eo(this.auth));const e=await this.getIdToken();return await qu(this,tM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,c,u,h,m,g;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(s=t.email)!==null&&s!==void 0?s:void 0,b=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,S=(c=t.photoURL)!==null&&c!==void 0?c:void 0,_=(u=t.tenantId)!==null&&u!==void 0?u:void 0,x=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,A=(m=t.createdAt)!==null&&m!==void 0?m:void 0,I=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:C,emailVerified:O,isAnonymous:V,providerData:B,stsTokenManager:P}=t;Qe(C&&P,e,"internal-error");const R=$l.fromJSON(this.name,P);Qe(typeof C=="string",e,"internal-error"),no(v,e.name),no(y,e.name),Qe(typeof O=="boolean",e,"internal-error"),Qe(typeof V=="boolean",e,"internal-error"),no(b,e.name),no(S,e.name),no(_,e.name),no(x,e.name),no(A,e.name),no(I,e.name);const D=new cs({uid:C,auth:e,email:y,emailVerified:O,displayName:v,isAnonymous:V,photoURL:S,phoneNumber:b,tenantId:_,stsTokenManager:R,createdAt:A,lastLoginAt:I});return B&&Array.isArray(B)&&(D.providerData=B.map(k=>Object.assign({},k))),x&&(D._redirectEventId=x),D}static async _fromIdTokenResponse(e,t,r=!1){const s=new $l;s.updateFromServerResponse(t);const a=new cs({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await kf(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Qe(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?vN(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),u=new $l;u.updateFromIdToken(r);const h=new cs({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:c}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Av(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,m),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=new Map;function gi(n){Ei(n instanceof Function,"Expected a class definition");let e=aE.get(n);return e?(Ei(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,aE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yN.type="NONE";const lE=yN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(n,e,t){return`firebase:${n}:${e}:${t}`}class zl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=cf(this.userKey,s.apiKey,a),this.fullPersistenceKey=cf("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Rf(this.auth,{idToken:e}).catch(()=>{});return t?cs._fromGetAccountInfoResponse(this.auth,t,e):null}return cs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new zl(gi(lE),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||gi(lE);const c=cf(r,e.config.apiKey,e.name);let u=null;for(const m of t)try{const g=await m._get(c);if(g){let v;if(typeof g=="string"){const y=await Rf(e,{idToken:g}).catch(()=>{});if(!y)break;v=await cs._fromGetAccountInfoResponse(e,y,g)}else v=cs._fromJSON(e,g);m!==a&&(u=v),a=m;break}}catch{}const h=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new zl(a,e,r):(a=h[0],u&&await a._set(c,u.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(c)}catch{}})),new zl(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(EN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(SN(e))return"Blackberry";if(NN(e))return"Webos";if(wN(e))return"Safari";if((e.includes("chrome/")||_N(e))&&!e.includes("edge/"))return"Chrome";if(bN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function xN(n=Kn()){return/firefox\//i.test(n)}function wN(n=Kn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _N(n=Kn()){return/crios\//i.test(n)}function EN(n=Kn()){return/iemobile/i.test(n)}function bN(n=Kn()){return/android/i.test(n)}function SN(n=Kn()){return/blackberry/i.test(n)}function NN(n=Kn()){return/webos/i.test(n)}function Fy(n=Kn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function cM(n=Kn()){var e;return Fy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function uM(){return SL()&&document.documentMode===10}function TN(n=Kn()){return Fy(n)||bN(n)||NN(n)||SN(n)||/windows phone/i.test(n)||EN(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(n,e=[]){let t;switch(n){case"Browser":t=cE(Kn());break;case"Worker":t=`${cE(Kn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ua}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,u)=>{try{const h=e(a);c(h)}catch(h){u(h)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hM(n,e={}){return Uo(n,"GET","/v2/passwordPolicy",$a(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM=6;class mM{constructor(e){var t,r,s,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:fM,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,c,u;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(s=h.containsLowercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsUppercaseLetter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(c=h.containsNumericCharacter)!==null&&c!==void 0?c:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uE(this),this.idTokenSubscription=new uE(this),this.beforeStateQueue=new dM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gi(t)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await zl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Rf(this,{idToken:e}),r=await cs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if($r(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=s==null?void 0:s._redirectEventId,h=await this.tryRedirectSignIn(e);(!c||c===u)&&(h!=null&&h.user)&&(s=h.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=K4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($r(this.app))return Promise.reject(Eo(this));const t=e?gn(e):null;return t&&Qe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $r(this.app)?Promise.reject(Eo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $r(this.app)?Promise.reject(Eo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hM(this),t=new mM(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ad("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await lM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&gi(e)||this._popupRedirectResolver;Qe(t,this,"argument-error"),this.redirectPersistenceManager=await zl.create(this,[gi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qe(u,this,"internal-error"),u.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,s);return()=>{c=!0,h()}}else{const h=e.addObserver(t);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if($r(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&q4(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ec(n){return gn(n)}class uE{constructor(e){this.auth=e,this.observer=null,this.addObserver=RL(t=>this.observer=t)}get next(){return Qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gM(n){vm=n}function IN(n){return vm.loadJS(n)}function vM(){return vm.recaptchaEnterpriseScript}function yM(){return vm.gapiScript}function xM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class wM{constructor(){this.enterprise=new _M}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class _M{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const EM="recaptcha-enterprise",jN="NO_RECAPTCHA";class bM{constructor(e){this.type=EM,this.auth=Ec(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,u)=>{eM(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const m=new Z4(h);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,c(m.siteKey)}}).catch(h=>{u(h)})})}function s(a,c,u){const h=window.grecaptcha;iE(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(m=>{c(m)}).catch(()=>{c(jN)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wM().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(u=>{if(!t&&iE(window.grecaptcha))s(u,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=vM();h.length!==0&&(h+=u),IN(h).then(()=>{s(u,a,c)}).catch(m=>{c(m)})}}).catch(u=>{c(u)})})}}async function dE(n,e,t,r=!1,s=!1){const a=new bM(n);let c;if(s)c=jN;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,m=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function hE(n,e,t,r,s){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await dE(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await dE(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(n,e){const t=pm(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(ja(a,e??{}))return s;ms(s,"already-initialized")}return t.initialize({options:e})}function NM(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(gi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function TM(n,e,t){const r=Ec(n);Qe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=AN(e),{host:c,port:u}=CM(e),h=u===null?"":`:${u}`,m={url:`${a}//${c}${h}/`},g=Object.freeze({host:c,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Qe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Qe(ja(m,r.config.emulator)&&ja(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Va(c)?(Ry(`${a}//${c}${h}`),rN("Auth",!0)):IM()}function AN(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function CM(n){const e=AN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:fE(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:fE(c)}}}function fE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function IM(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return pi("not implemented")}_getIdTokenResponse(e){return pi("not implemented")}_linkToIdToken(e,t){return pi("not implemented")}_getReauthenticationResolver(e){return pi("not implemented")}}async function jM(n,e){return Uo(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AM(n,e){return gm(n,"POST","/v1/accounts:signInWithPassword",$a(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PM(n,e){return gm(n,"POST","/v1/accounts:signInWithEmailLink",$a(n,e))}async function RM(n,e){return gm(n,"POST","/v1/accounts:signInWithEmailLink",$a(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu extends Vy{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Wu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Wu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hE(e,t,"signInWithPassword",AM);case"emailLink":return PM(e,{email:this._email,oobCode:this._password});default:ms(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hE(e,r,"signUpPassword",jM);case"emailLink":return RM(e,{idToken:t,email:this._email,oobCode:this._password});default:ms(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(n,e){return gm(n,"POST","/v1/accounts:signInWithIdp",$a(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM="http://localhost";class Pa extends Vy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Pa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ms("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=_c(t,["providerId","signInMethod"]);if(!r||!s)return null;const c=new Pa(r,s);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Bl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Bl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Bl(e,t)}buildRequest(){const e={requestUri:kM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ld(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function OM(n){const e=gu(vu(n)).link,t=e?gu(vu(e)).deep_link_id:null,r=gu(vu(n)).deep_link_id;return(r?gu(vu(r)).link:null)||r||t||e||n}class Uy{constructor(e){var t,r,s,a,c,u;const h=gu(vu(e)),m=(t=h.apiKey)!==null&&t!==void 0?t:null,g=(r=h.oobCode)!==null&&r!==void 0?r:null,v=DM((s=h.mode)!==null&&s!==void 0?s:null);Qe(m&&g&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=g,this.continueUrl=(a=h.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=h.lang)!==null&&c!==void 0?c:null,this.tenantId=(u=h.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=OM(e);try{return new Uy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(){this.providerId=bc.PROVIDER_ID}static credential(e,t){return Wu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Uy.parseLink(t);return Qe(r,"argument-error"),Wu._fromEmailAndCode(e,r.code,r.tenantId)}}bc.PROVIDER_ID="password";bc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";bc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud extends PN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends ud{constructor(){super("facebook.com")}static credential(e){return Pa._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return io.credential(e.oauthAccessToken)}catch{return null}}}io.FACEBOOK_SIGN_IN_METHOD="facebook.com";io.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends ud{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Pa._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return oo.credential(t,r)}catch{return null}}}oo.GOOGLE_SIGN_IN_METHOD="google.com";oo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao extends ud{constructor(){super("github.com")}static credential(e){return Pa._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ao.credential(e.oauthAccessToken)}catch{return null}}}ao.GITHUB_SIGN_IN_METHOD="github.com";ao.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends ud{constructor(){super("twitter.com")}static credential(e,t){return Pa._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return lo.credential(t,r)}catch{return null}}}lo.TWITTER_SIGN_IN_METHOD="twitter.com";lo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await cs._fromIdTokenResponse(e,r,s),c=mE(r);return new ic({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=mE(r);return new ic({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function mE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df extends Gs{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Df.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Df(e,t,r,s)}}function RN(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Df._fromErrorAndOperation(n,a,e,r):a})}async function LM(n,e,t=!1){const r=await qu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ic._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MM(n,e,t=!1){const{auth:r}=n;if($r(r.app))return Promise.reject(Eo(r));const s="reauthenticate";try{const a=await qu(n,RN(r,s,e,n),t);Qe(a.idToken,r,"internal-error");const c=My(a.idToken);Qe(c,r,"internal-error");const{sub:u}=c;return Qe(n.uid===u,r,"user-mismatch"),ic._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ms(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(n,e,t=!1){if($r(n.app))return Promise.reject(Eo(n));const r="signIn",s=await RN(n,r,e),a=await ic._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}async function FM(n,e){return kN(Ec(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VM(n){const e=Ec(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function UM(n,e,t){return $r(n.app)?Promise.reject(Eo(n)):FM(gn(n),bc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&VM(n),r})}function $M(n,e,t,r){return gn(n).onIdTokenChanged(e,t,r)}function zM(n,e,t){return gn(n).beforeAuthStateChanged(e,t)}function BM(n,e,t,r){return gn(n).onAuthStateChanged(e,t,r)}function qM(n){return gn(n).signOut()}const Of="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Of,"1"),this.storage.removeItem(Of),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=1e3,HM=10;class ON extends DN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);uM()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,HM):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},WM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ON.type="LOCAL";const KM=ON;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN extends DN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}LN.type="SESSION";const MN=LN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new ym(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(c).map(async m=>m(t.origin,a)),h=await GM(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ym.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,c;return new Promise((u,h)=>{const m=$y("",20);s.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(v){const y=v;if(y.data.eventId===m)switch(y.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(y.data.response);break;default:clearTimeout(g),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(){return window}function YM(n){Os().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(){return typeof Os().WorkerGlobalScope<"u"&&typeof Os().importScripts=="function"}async function XM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JM(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function ZM(){return FN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="firebaseLocalStorageDb",eF=1,Lf="firebaseLocalStorage",UN="fbase_key";class dd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function xm(n,e){return n.transaction([Lf],e?"readwrite":"readonly").objectStore(Lf)}function tF(){const n=indexedDB.deleteDatabase(VN);return new dd(n).toPromise()}function Pv(){const n=indexedDB.open(VN,eF);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Lf,{keyPath:UN})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Lf)?e(r):(r.close(),await tF(),e(await Pv()))})})}async function pE(n,e,t){const r=xm(n,!0).put({[UN]:e,value:t});return new dd(r).toPromise()}async function nF(n,e){const t=xm(n,!1).get(e),r=await new dd(t).toPromise();return r===void 0?null:r.value}function gE(n,e){const t=xm(n,!0).delete(e);return new dd(t).toPromise()}const rF=800,sF=3;class $N{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>sF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ym._getInstance(ZM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await XM(),!this.activeServiceWorker)return;this.sender=new QM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pv();return await pE(e,Of,"1"),await gE(e,Of),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>pE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>nF(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>gE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=xm(s,!1).getAll();return new dd(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$N.type="LOCAL";const iF=$N;new cd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(n,e){return e?gi(e):(Qe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy extends Vy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Bl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Bl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function aF(n){return kN(n.auth,new zy(n),n.bypassAuthState)}function lF(n){const{auth:e,user:t}=n;return Qe(t,e,"internal-error"),MM(t,new zy(n),n.bypassAuthState)}async function cF(n){const{auth:e,user:t}=n;return Qe(t,e,"internal-error"),LM(t,new zy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:c,type:u}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aF;case"linkViaPopup":case"linkViaRedirect":return cF;case"reauthViaPopup":case"reauthViaRedirect":return lF;default:ms(this.auth,"internal-error")}}resolve(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF=new cd(2e3,1e4);class Fl extends zN{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Fl.currentPopupAction&&Fl.currentPopupAction.cancel(),Fl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qe(e,this.auth,"internal-error"),e}async onExecution(){Ei(this.filter.length===1,"Popup operations only handle one event");const e=$y();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ds(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ds(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ds(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uF.get())};e()}}Fl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF="pendingRedirect",uf=new Map;class hF extends zN{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=uf.get(this.auth._key());if(!e){try{const r=await fF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}uf.set(this.auth._key(),e)}return this.bypassAuthState||uf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fF(n,e){const t=gF(e),r=pF(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function mF(n,e){uf.set(n._key(),e)}function pF(n){return gi(n._redirectPersistence)}function gF(n){return cf(dF,n.config.apiKey,n.name)}async function vF(n,e,t=!1){if($r(n.app))return Promise.reject(Eo(n));const r=Ec(n),s=oF(r,e),c=await new hF(r,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yF=10*60*1e3;class xF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wF(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!BN(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ds(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yF&&this.cachedEventUids.clear(),this.cachedEventUids.has(vE(e))}saveEventToCache(e){this.cachedEventUids.add(vE(e)),this.lastProcessedEventTime=Date.now()}}function vE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function BN({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wF(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BN(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _F(n,e={}){return Uo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bF=/^https?/;async function SF(n){if(n.config.emulator)return;const{authorizedDomains:e}=await _F(n);for(const t of e)try{if(NF(t))return}catch{}ms(n,"unauthorized-domain")}function NF(n){const e=jv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!bF.test(t))return!1;if(EF.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF=new cd(3e4,6e4);function yE(){const n=Os().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function CF(n){return new Promise((e,t)=>{var r,s,a;function c(){yE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yE(),t(Ds(n,"network-request-failed"))},timeout:TF.get()})}if(!((s=(r=Os().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Os().gapi)===null||a===void 0)&&a.load)c();else{const u=xM("iframefcb");return Os()[u]=()=>{gapi.load?c():t(Ds(n,"network-request-failed"))},IN(`${yM()}?onload=${u}`).catch(h=>t(h))}}).catch(e=>{throw df=null,e})}let df=null;function IF(n){return df=df||CF(n),df}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF=new cd(5e3,15e3),AF="__/auth/iframe",PF="emulator/auth/iframe",RF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DF(n){const e=n.config;Qe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Ly(e,PF):`https://${n.config.authDomain}/${AF}`,r={apiKey:e.apiKey,appName:n.name,v:Ua},s=kF.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${ld(r).slice(1)}`}async function OF(n){const e=await IF(n),t=Os().gapi;return Qe(t,n,"internal-error"),e.open({where:document.body,url:DF(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RF,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const c=Ds(n,"network-request-failed"),u=Os().setTimeout(()=>{a(c)},jF.get());function h(){Os().clearTimeout(u),s(r)}r.ping(h).then(h,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MF=500,FF=600,VF="_blank",UF="http://localhost";class xE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $F(n,e,t,r=MF,s=FF){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h=Object.assign(Object.assign({},LF),{width:r.toString(),height:s.toString(),top:a,left:c}),m=Kn().toLowerCase();t&&(u=_N(m)?VF:t),xN(m)&&(e=e||UF,h.scrollbars="yes");const g=Object.entries(h).reduce((y,[b,S])=>`${y}${b}=${S},`,"");if(cM(m)&&u!=="_self")return zF(e||"",u),new xE(null);const v=window.open(e||"",u,g);Qe(v,n,"popup-blocked");try{v.focus()}catch{}return new xE(v)}function zF(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF="__/auth/handler",qF="emulator/auth/handler",WF=encodeURIComponent("fac");async function wE(n,e,t,r,s,a){Qe(n.config.authDomain,n,"auth-domain-config-required"),Qe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ua,eventId:s};if(e instanceof PN){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",PL(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))c[g]=v}if(e instanceof ud){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(c.scopes=g.join(","))}n.tenantId&&(c.tid=n.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await n._getAppCheckToken(),m=h?`#${WF}=${encodeURIComponent(h)}`:"";return`${HF(n)}?${ld(u).slice(1)}${m}`}function HF({config:n}){return n.emulator?Ly(n,qF):`https://${n.authDomain}/${BF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="webStorageSupport";class KF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=MN,this._completeRedirectFn=vF,this._overrideRedirectResult=mF}async _openPopup(e,t,r,s){var a;Ei((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await wE(e,t,r,jv(),s);return $F(e,c,$y())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await wE(e,t,r,jv(),s);return YM(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(Ei(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await OF(e),r=new xF(e);return t.register("authEvent",s=>(Qe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mg,{type:Mg},s=>{var a;const c=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Mg];c!==void 0&&t(!!c),ms(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=SF(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return TN()||wN()||Fy()}}const GF=KF;var _E="@firebase/auth",EE="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XF(n){Aa(new Ro("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;Qe(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CN(n)},m=new pM(r,s,a,h);return NM(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Aa(new Ro("auth-internal",e=>{const t=Ec(e.getProvider("auth").getImmediate());return(r=>new QF(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ks(_E,EE,YF(n)),ks(_E,EE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF=5*60,ZF=nN("authIdTokenMaxAge")||JF;let bE=null;const eV=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>ZF)return;const s=t==null?void 0:t.token;bE!==s&&(bE=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function tV(n=aN()){const e=pm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=SM(n,{popupRedirectResolver:GF,persistence:[iF,KM,MN]}),r=nN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=eV(a.toString());zM(t,c,()=>c(t.currentUser)),$M(t,u=>c(u))}}const s=eN("auth");return s&&TM(t,`http://${s}`),t}function nV(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}gM({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=Ds("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",nV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XF("Browser");var rV="firebase",sV="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ks(rV,sV,"app");var SE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bo,qN;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,R){function D(){}D.prototype=R.prototype,P.D=R.prototype,P.prototype=new D,P.prototype.constructor=P,P.C=function(k,$,z){for(var M=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)M[ie-2]=arguments[ie];return R.prototype[$].apply(k,M)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,R,D){D||(D=0);var k=Array(16);if(typeof R=="string")for(var $=0;16>$;++$)k[$]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for($=0;16>$;++$)k[$]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=P.g[0],D=P.g[1],$=P.g[2];var z=P.g[3],M=R+(z^D&($^z))+k[0]+3614090360&4294967295;R=D+(M<<7&4294967295|M>>>25),M=z+($^R&(D^$))+k[1]+3905402710&4294967295,z=R+(M<<12&4294967295|M>>>20),M=$+(D^z&(R^D))+k[2]+606105819&4294967295,$=z+(M<<17&4294967295|M>>>15),M=D+(R^$&(z^R))+k[3]+3250441966&4294967295,D=$+(M<<22&4294967295|M>>>10),M=R+(z^D&($^z))+k[4]+4118548399&4294967295,R=D+(M<<7&4294967295|M>>>25),M=z+($^R&(D^$))+k[5]+1200080426&4294967295,z=R+(M<<12&4294967295|M>>>20),M=$+(D^z&(R^D))+k[6]+2821735955&4294967295,$=z+(M<<17&4294967295|M>>>15),M=D+(R^$&(z^R))+k[7]+4249261313&4294967295,D=$+(M<<22&4294967295|M>>>10),M=R+(z^D&($^z))+k[8]+1770035416&4294967295,R=D+(M<<7&4294967295|M>>>25),M=z+($^R&(D^$))+k[9]+2336552879&4294967295,z=R+(M<<12&4294967295|M>>>20),M=$+(D^z&(R^D))+k[10]+4294925233&4294967295,$=z+(M<<17&4294967295|M>>>15),M=D+(R^$&(z^R))+k[11]+2304563134&4294967295,D=$+(M<<22&4294967295|M>>>10),M=R+(z^D&($^z))+k[12]+1804603682&4294967295,R=D+(M<<7&4294967295|M>>>25),M=z+($^R&(D^$))+k[13]+4254626195&4294967295,z=R+(M<<12&4294967295|M>>>20),M=$+(D^z&(R^D))+k[14]+2792965006&4294967295,$=z+(M<<17&4294967295|M>>>15),M=D+(R^$&(z^R))+k[15]+1236535329&4294967295,D=$+(M<<22&4294967295|M>>>10),M=R+($^z&(D^$))+k[1]+4129170786&4294967295,R=D+(M<<5&4294967295|M>>>27),M=z+(D^$&(R^D))+k[6]+3225465664&4294967295,z=R+(M<<9&4294967295|M>>>23),M=$+(R^D&(z^R))+k[11]+643717713&4294967295,$=z+(M<<14&4294967295|M>>>18),M=D+(z^R&($^z))+k[0]+3921069994&4294967295,D=$+(M<<20&4294967295|M>>>12),M=R+($^z&(D^$))+k[5]+3593408605&4294967295,R=D+(M<<5&4294967295|M>>>27),M=z+(D^$&(R^D))+k[10]+38016083&4294967295,z=R+(M<<9&4294967295|M>>>23),M=$+(R^D&(z^R))+k[15]+3634488961&4294967295,$=z+(M<<14&4294967295|M>>>18),M=D+(z^R&($^z))+k[4]+3889429448&4294967295,D=$+(M<<20&4294967295|M>>>12),M=R+($^z&(D^$))+k[9]+568446438&4294967295,R=D+(M<<5&4294967295|M>>>27),M=z+(D^$&(R^D))+k[14]+3275163606&4294967295,z=R+(M<<9&4294967295|M>>>23),M=$+(R^D&(z^R))+k[3]+4107603335&4294967295,$=z+(M<<14&4294967295|M>>>18),M=D+(z^R&($^z))+k[8]+1163531501&4294967295,D=$+(M<<20&4294967295|M>>>12),M=R+($^z&(D^$))+k[13]+2850285829&4294967295,R=D+(M<<5&4294967295|M>>>27),M=z+(D^$&(R^D))+k[2]+4243563512&4294967295,z=R+(M<<9&4294967295|M>>>23),M=$+(R^D&(z^R))+k[7]+1735328473&4294967295,$=z+(M<<14&4294967295|M>>>18),M=D+(z^R&($^z))+k[12]+2368359562&4294967295,D=$+(M<<20&4294967295|M>>>12),M=R+(D^$^z)+k[5]+4294588738&4294967295,R=D+(M<<4&4294967295|M>>>28),M=z+(R^D^$)+k[8]+2272392833&4294967295,z=R+(M<<11&4294967295|M>>>21),M=$+(z^R^D)+k[11]+1839030562&4294967295,$=z+(M<<16&4294967295|M>>>16),M=D+($^z^R)+k[14]+4259657740&4294967295,D=$+(M<<23&4294967295|M>>>9),M=R+(D^$^z)+k[1]+2763975236&4294967295,R=D+(M<<4&4294967295|M>>>28),M=z+(R^D^$)+k[4]+1272893353&4294967295,z=R+(M<<11&4294967295|M>>>21),M=$+(z^R^D)+k[7]+4139469664&4294967295,$=z+(M<<16&4294967295|M>>>16),M=D+($^z^R)+k[10]+3200236656&4294967295,D=$+(M<<23&4294967295|M>>>9),M=R+(D^$^z)+k[13]+681279174&4294967295,R=D+(M<<4&4294967295|M>>>28),M=z+(R^D^$)+k[0]+3936430074&4294967295,z=R+(M<<11&4294967295|M>>>21),M=$+(z^R^D)+k[3]+3572445317&4294967295,$=z+(M<<16&4294967295|M>>>16),M=D+($^z^R)+k[6]+76029189&4294967295,D=$+(M<<23&4294967295|M>>>9),M=R+(D^$^z)+k[9]+3654602809&4294967295,R=D+(M<<4&4294967295|M>>>28),M=z+(R^D^$)+k[12]+3873151461&4294967295,z=R+(M<<11&4294967295|M>>>21),M=$+(z^R^D)+k[15]+530742520&4294967295,$=z+(M<<16&4294967295|M>>>16),M=D+($^z^R)+k[2]+3299628645&4294967295,D=$+(M<<23&4294967295|M>>>9),M=R+($^(D|~z))+k[0]+4096336452&4294967295,R=D+(M<<6&4294967295|M>>>26),M=z+(D^(R|~$))+k[7]+1126891415&4294967295,z=R+(M<<10&4294967295|M>>>22),M=$+(R^(z|~D))+k[14]+2878612391&4294967295,$=z+(M<<15&4294967295|M>>>17),M=D+(z^($|~R))+k[5]+4237533241&4294967295,D=$+(M<<21&4294967295|M>>>11),M=R+($^(D|~z))+k[12]+1700485571&4294967295,R=D+(M<<6&4294967295|M>>>26),M=z+(D^(R|~$))+k[3]+2399980690&4294967295,z=R+(M<<10&4294967295|M>>>22),M=$+(R^(z|~D))+k[10]+4293915773&4294967295,$=z+(M<<15&4294967295|M>>>17),M=D+(z^($|~R))+k[1]+2240044497&4294967295,D=$+(M<<21&4294967295|M>>>11),M=R+($^(D|~z))+k[8]+1873313359&4294967295,R=D+(M<<6&4294967295|M>>>26),M=z+(D^(R|~$))+k[15]+4264355552&4294967295,z=R+(M<<10&4294967295|M>>>22),M=$+(R^(z|~D))+k[6]+2734768916&4294967295,$=z+(M<<15&4294967295|M>>>17),M=D+(z^($|~R))+k[13]+1309151649&4294967295,D=$+(M<<21&4294967295|M>>>11),M=R+($^(D|~z))+k[4]+4149444226&4294967295,R=D+(M<<6&4294967295|M>>>26),M=z+(D^(R|~$))+k[11]+3174756917&4294967295,z=R+(M<<10&4294967295|M>>>22),M=$+(R^(z|~D))+k[2]+718787259&4294967295,$=z+(M<<15&4294967295|M>>>17),M=D+(z^($|~R))+k[9]+3951481745&4294967295,P.g[0]=P.g[0]+R&4294967295,P.g[1]=P.g[1]+($+(M<<21&4294967295|M>>>11))&4294967295,P.g[2]=P.g[2]+$&4294967295,P.g[3]=P.g[3]+z&4294967295}r.prototype.u=function(P,R){R===void 0&&(R=P.length);for(var D=R-this.blockSize,k=this.B,$=this.h,z=0;z<R;){if($==0)for(;z<=D;)s(this,P,z),z+=this.blockSize;if(typeof P=="string"){for(;z<R;)if(k[$++]=P.charCodeAt(z++),$==this.blockSize){s(this,k),$=0;break}}else for(;z<R;)if(k[$++]=P[z++],$==this.blockSize){s(this,k),$=0;break}}this.h=$,this.o+=R},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var R=1;R<P.length-8;++R)P[R]=0;var D=8*this.o;for(R=P.length-8;R<P.length;++R)P[R]=D&255,D/=256;for(this.u(P),P=Array(16),R=D=0;4>R;++R)for(var k=0;32>k;k+=8)P[D++]=this.g[R]>>>k&255;return P};function a(P,R){var D=u;return Object.prototype.hasOwnProperty.call(D,P)?D[P]:D[P]=R(P)}function c(P,R){this.h=R;for(var D=[],k=!0,$=P.length-1;0<=$;$--){var z=P[$]|0;k&&z==R||(D[$]=z,k=!1)}this.g=D}var u={};function h(P){return-128<=P&&128>P?a(P,function(R){return new c([R|0],0>R?-1:0)}):new c([P|0],0>P?-1:0)}function m(P){if(isNaN(P)||!isFinite(P))return v;if(0>P)return x(m(-P));for(var R=[],D=1,k=0;P>=D;k++)R[k]=P/D|0,D*=4294967296;return new c(R,0)}function g(P,R){if(P.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(P.charAt(0)=="-")return x(g(P.substring(1),R));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=m(Math.pow(R,8)),k=v,$=0;$<P.length;$+=8){var z=Math.min(8,P.length-$),M=parseInt(P.substring($,$+z),R);8>z?(z=m(Math.pow(R,z)),k=k.j(z).add(m(M))):(k=k.j(D),k=k.add(m(M)))}return k}var v=h(0),y=h(1),b=h(16777216);n=c.prototype,n.m=function(){if(_(this))return-x(this).m();for(var P=0,R=1,D=0;D<this.g.length;D++){var k=this.i(D);P+=(0<=k?k:4294967296+k)*R,R*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(S(this))return"0";if(_(this))return"-"+x(this).toString(P);for(var R=m(Math.pow(P,6)),D=this,k="";;){var $=O(D,R).g;D=A(D,$.j(R));var z=((0<D.g.length?D.g[0]:D.h)>>>0).toString(P);if(D=$,S(D))return z+k;for(;6>z.length;)z="0"+z;k=z+k}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function S(P){if(P.h!=0)return!1;for(var R=0;R<P.g.length;R++)if(P.g[R]!=0)return!1;return!0}function _(P){return P.h==-1}n.l=function(P){return P=A(this,P),_(P)?-1:S(P)?0:1};function x(P){for(var R=P.g.length,D=[],k=0;k<R;k++)D[k]=~P.g[k];return new c(D,~P.h).add(y)}n.abs=function(){return _(this)?x(this):this},n.add=function(P){for(var R=Math.max(this.g.length,P.g.length),D=[],k=0,$=0;$<=R;$++){var z=k+(this.i($)&65535)+(P.i($)&65535),M=(z>>>16)+(this.i($)>>>16)+(P.i($)>>>16);k=M>>>16,z&=65535,M&=65535,D[$]=M<<16|z}return new c(D,D[D.length-1]&-2147483648?-1:0)};function A(P,R){return P.add(x(R))}n.j=function(P){if(S(this)||S(P))return v;if(_(this))return _(P)?x(this).j(x(P)):x(x(this).j(P));if(_(P))return x(this.j(x(P)));if(0>this.l(b)&&0>P.l(b))return m(this.m()*P.m());for(var R=this.g.length+P.g.length,D=[],k=0;k<2*R;k++)D[k]=0;for(k=0;k<this.g.length;k++)for(var $=0;$<P.g.length;$++){var z=this.i(k)>>>16,M=this.i(k)&65535,ie=P.i($)>>>16,K=P.i($)&65535;D[2*k+2*$]+=M*K,I(D,2*k+2*$),D[2*k+2*$+1]+=z*K,I(D,2*k+2*$+1),D[2*k+2*$+1]+=M*ie,I(D,2*k+2*$+1),D[2*k+2*$+2]+=z*ie,I(D,2*k+2*$+2)}for(k=0;k<R;k++)D[k]=D[2*k+1]<<16|D[2*k];for(k=R;k<2*R;k++)D[k]=0;return new c(D,0)};function I(P,R){for(;(P[R]&65535)!=P[R];)P[R+1]+=P[R]>>>16,P[R]&=65535,R++}function C(P,R){this.g=P,this.h=R}function O(P,R){if(S(R))throw Error("division by zero");if(S(P))return new C(v,v);if(_(P))return R=O(x(P),R),new C(x(R.g),x(R.h));if(_(R))return R=O(P,x(R)),new C(x(R.g),R.h);if(30<P.g.length){if(_(P)||_(R))throw Error("slowDivide_ only works with positive integers.");for(var D=y,k=R;0>=k.l(P);)D=V(D),k=V(k);var $=B(D,1),z=B(k,1);for(k=B(k,2),D=B(D,2);!S(k);){var M=z.add(k);0>=M.l(P)&&($=$.add(D),z=M),k=B(k,1),D=B(D,1)}return R=A(P,$.j(R)),new C($,R)}for($=v;0<=P.l(R);){for(D=Math.max(1,Math.floor(P.m()/R.m())),k=Math.ceil(Math.log(D)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),z=m(D),M=z.j(R);_(M)||0<M.l(P);)D-=k,z=m(D),M=z.j(R);S(z)&&(z=y),$=$.add(z),P=A(P,M)}return new C($,P)}n.A=function(P){return O(this,P).h},n.and=function(P){for(var R=Math.max(this.g.length,P.g.length),D=[],k=0;k<R;k++)D[k]=this.i(k)&P.i(k);return new c(D,this.h&P.h)},n.or=function(P){for(var R=Math.max(this.g.length,P.g.length),D=[],k=0;k<R;k++)D[k]=this.i(k)|P.i(k);return new c(D,this.h|P.h)},n.xor=function(P){for(var R=Math.max(this.g.length,P.g.length),D=[],k=0;k<R;k++)D[k]=this.i(k)^P.i(k);return new c(D,this.h^P.h)};function V(P){for(var R=P.g.length+1,D=[],k=0;k<R;k++)D[k]=P.i(k)<<1|P.i(k-1)>>>31;return new c(D,P.h)}function B(P,R){var D=R>>5;R%=32;for(var k=P.g.length-D,$=[],z=0;z<k;z++)$[z]=0<R?P.i(z+D)>>>R|P.i(z+D+1)<<32-R:P.i(z+D);return new c($,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qN=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=g,bo=c}).apply(typeof SE<"u"?SE:typeof self<"u"?self:typeof window<"u"?window:{});var qh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WN,yu,HN,hf,Rv,KN,GN,QN;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,N,j){return f==Array.prototype||f==Object.prototype||(f[N]=j.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof qh=="object"&&qh];for(var N=0;N<f.length;++N){var j=f[N];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var r=t(this);function s(f,N){if(N)e:{var j=r;f=f.split(".");for(var F=0;F<f.length-1;F++){var ee=f[F];if(!(ee in j))break e;j=j[ee]}f=f[f.length-1],F=j[f],N=N(F),N!=F&&N!=null&&e(j,f,{configurable:!0,writable:!0,value:N})}}function a(f,N){f instanceof String&&(f+="");var j=0,F=!1,ee={next:function(){if(!F&&j<f.length){var oe=j++;return{value:N(oe,f[oe]),done:!1}}return F=!0,{done:!0,value:void 0}}};return ee[Symbol.iterator]=function(){return ee},ee}s("Array.prototype.values",function(f){return f||function(){return a(this,function(N,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function h(f){var N=typeof f;return N=N!="object"?N:f?Array.isArray(f)?"array":N:"null",N=="array"||N=="object"&&typeof f.length=="number"}function m(f){var N=typeof f;return N=="object"&&f!=null||N=="function"}function g(f,N,j){return f.call.apply(f.bind,arguments)}function v(f,N,j){if(!f)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var ee=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ee,F),f.apply(N,ee)}}return function(){return f.apply(N,arguments)}}function y(f,N,j){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:v,y.apply(null,arguments)}function b(f,N){var j=Array.prototype.slice.call(arguments,1);return function(){var F=j.slice();return F.push.apply(F,arguments),f.apply(this,F)}}function S(f,N){function j(){}j.prototype=N.prototype,f.aa=N.prototype,f.prototype=new j,f.prototype.constructor=f,f.Qb=function(F,ee,oe){for(var _e=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)_e[Ct-2]=arguments[Ct];return N.prototype[ee].apply(F,_e)}}function _(f){const N=f.length;if(0<N){const j=Array(N);for(let F=0;F<N;F++)j[F]=f[F];return j}return[]}function x(f,N){for(let j=1;j<arguments.length;j++){const F=arguments[j];if(h(F)){const ee=f.length||0,oe=F.length||0;f.length=ee+oe;for(let _e=0;_e<oe;_e++)f[ee+_e]=F[_e]}else f.push(F)}}class A{constructor(N,j){this.i=N,this.j=j,this.h=0,this.g=null}get(){let N;return 0<this.h?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function I(f){return/^[\s\xa0]*$/.test(f)}function C(){var f=u.navigator;return f&&(f=f.userAgent)?f:""}function O(f){return O[" "](f),f}O[" "]=function(){};var V=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function B(f,N,j){for(const F in f)N.call(j,f[F],F,f)}function P(f,N){for(const j in f)N.call(void 0,f[j],j,f)}function R(f){const N={};for(const j in f)N[j]=f[j];return N}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(f,N){let j,F;for(let ee=1;ee<arguments.length;ee++){F=arguments[ee];for(j in F)f[j]=F[j];for(let oe=0;oe<D.length;oe++)j=D[oe],Object.prototype.hasOwnProperty.call(F,j)&&(f[j]=F[j])}}function $(f){var N=1;f=f.split(":");const j=[];for(;0<N&&f.length;)j.push(f.shift()),N--;return f.length&&j.push(f.join(":")),j}function z(f){u.setTimeout(()=>{throw f},0)}function M(){var f=Q;let N=null;return f.g&&(N=f.g,f.g=f.g.next,f.g||(f.h=null),N.next=null),N}class ie{constructor(){this.h=this.g=null}add(N,j){const F=K.get();F.set(N,j),this.h?this.h.next=F:this.g=F,this.h=F}}var K=new A(()=>new J,f=>f.reset());class J{constructor(){this.next=this.g=this.h=null}set(N,j){this.h=N,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let X,q=!1,Q=new ie,Z=()=>{const f=u.Promise.resolve(void 0);X=()=>{f.then(U)}};var U=()=>{for(var f;f=M();){try{f.h.call(f.g)}catch(j){z(j)}var N=K;N.j(f),100>N.h&&(N.h++,f.next=N.g,N.g=f)}q=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(f,N){this.type=f,this.g=this.target=N,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var f=!1,N=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const j=()=>{};u.addEventListener("test",j,N),u.removeEventListener("test",j,N)}catch{}return f}();function ve(f,N){if(le.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var j=this.type=f.type,F=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=N,N=f.relatedTarget){if(V){e:{try{O(N.nodeName);var ee=!0;break e}catch{}ee=!1}ee||(N=null)}}else j=="mouseover"?N=f.fromElement:j=="mouseout"&&(N=f.toElement);this.relatedTarget=N,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:de[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ve.aa.h.call(this)}}S(ve,le);var de={2:"touch",3:"pen",4:"mouse"};ve.prototype.h=function(){ve.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var me="closure_listenable_"+(1e6*Math.random()|0),Se=0;function Pe(f,N,j,F,ee){this.listener=f,this.proxy=null,this.src=N,this.type=j,this.capture=!!F,this.ha=ee,this.key=++Se,this.da=this.fa=!1}function Ce(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function De(f){this.src=f,this.g={},this.h=0}De.prototype.add=function(f,N,j,F,ee){var oe=f.toString();f=this.g[oe],f||(f=this.g[oe]=[],this.h++);var _e=bt(f,N,F,ee);return-1<_e?(N=f[_e],j||(N.fa=!1)):(N=new Pe(N,this.src,oe,!!F,ee),N.fa=j,f.push(N)),N};function Ue(f,N){var j=N.type;if(j in f.g){var F=f.g[j],ee=Array.prototype.indexOf.call(F,N,void 0),oe;(oe=0<=ee)&&Array.prototype.splice.call(F,ee,1),oe&&(Ce(N),f.g[j].length==0&&(delete f.g[j],f.h--))}}function bt(f,N,j,F){for(var ee=0;ee<f.length;++ee){var oe=f[ee];if(!oe.da&&oe.listener==N&&oe.capture==!!j&&oe.ha==F)return ee}return-1}var kt="closure_lm_"+(1e6*Math.random()|0),sn={};function Ft(f,N,j,F,ee){if(Array.isArray(N)){for(var oe=0;oe<N.length;oe++)Ft(f,N[oe],j,F,ee);return null}return j=Br(j),f&&f[me]?f.K(N,j,m(F)?!!F.capture:!1,ee):Tt(f,N,j,!1,F,ee)}function Tt(f,N,j,F,ee,oe){if(!N)throw Error("Invalid event type");var _e=m(ee)?!!ee.capture:!!ee,Ct=vr(f);if(Ct||(f[kt]=Ct=new De(f)),j=Ct.add(N,j,F,_e,oe),j.proxy)return j;if(F=St(),j.proxy=F,F.src=f,F.listener=j,f.addEventListener)be||(ee=_e),ee===void 0&&(ee=!1),f.addEventListener(N.toString(),F,ee);else if(f.attachEvent)f.attachEvent(gr(N.toString()),F);else if(f.addListener&&f.removeListener)f.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return j}function St(){function f(j){return N.call(f.src,f.listener,j)}const N=Ys;return f}function wt(f,N,j,F,ee){if(Array.isArray(N))for(var oe=0;oe<N.length;oe++)wt(f,N[oe],j,F,ee);else F=m(F)?!!F.capture:!!F,j=Br(j),f&&f[me]?(f=f.i,N=String(N).toString(),N in f.g&&(oe=f.g[N],j=bt(oe,j,F,ee),-1<j&&(Ce(oe[j]),Array.prototype.splice.call(oe,j,1),oe.length==0&&(delete f.g[N],f.h--)))):f&&(f=vr(f))&&(N=f.g[N.toString()],f=-1,N&&(f=bt(N,j,F,ee)),(j=-1<f?N[f]:null)&&En(j))}function En(f){if(typeof f!="number"&&f&&!f.da){var N=f.src;if(N&&N[me])Ue(N.i,f);else{var j=f.type,F=f.proxy;N.removeEventListener?N.removeEventListener(j,F,f.capture):N.detachEvent?N.detachEvent(gr(j),F):N.addListener&&N.removeListener&&N.removeListener(F),(j=vr(N))?(Ue(j,f),j.h==0&&(j.src=null,N[kt]=null)):Ce(f)}}}function gr(f){return f in sn?sn[f]:sn[f]="on"+f}function Ys(f,N){if(f.da)f=!0;else{N=new ve(N,this);var j=f.listener,F=f.ha||f.src;f.fa&&En(f),f=j.call(F,N)}return f}function vr(f){return f=f[kt],f instanceof De?f:null}var vs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Br(f){return typeof f=="function"?f:(f[vs]||(f[vs]=function(N){return f.handleEvent(N)}),f[vs])}function Vt(){Y.call(this),this.i=new De(this),this.M=this,this.F=null}S(Vt,Y),Vt.prototype[me]=!0,Vt.prototype.removeEventListener=function(f,N,j,F){wt(this,f,N,j,F)};function It(f,N){var j,F=f.F;if(F)for(j=[];F;F=F.F)j.push(F);if(f=f.M,F=N.type||N,typeof N=="string")N=new le(N,f);else if(N instanceof le)N.target=N.target||f;else{var ee=N;N=new le(F,f),k(N,ee)}if(ee=!0,j)for(var oe=j.length-1;0<=oe;oe--){var _e=N.g=j[oe];ee=tr(_e,F,!0,N)&&ee}if(_e=N.g=f,ee=tr(_e,F,!0,N)&&ee,ee=tr(_e,F,!1,N)&&ee,j)for(oe=0;oe<j.length;oe++)_e=N.g=j[oe],ee=tr(_e,F,!1,N)&&ee}Vt.prototype.N=function(){if(Vt.aa.N.call(this),this.i){var f=this.i,N;for(N in f.g){for(var j=f.g[N],F=0;F<j.length;F++)Ce(j[F]);delete f.g[N],f.h--}}this.F=null},Vt.prototype.K=function(f,N,j,F){return this.i.add(String(f),N,!1,j,F)},Vt.prototype.L=function(f,N,j,F){return this.i.add(String(f),N,!0,j,F)};function tr(f,N,j,F){if(N=f.i.g[String(N)],!N)return!0;N=N.concat();for(var ee=!0,oe=0;oe<N.length;++oe){var _e=N[oe];if(_e&&!_e.da&&_e.capture==j){var Ct=_e.listener,vn=_e.ha||_e.src;_e.fa&&Ue(f.i,_e),ee=Ct.call(vn,F)!==!1&&ee}}return ee&&!F.defaultPrevented}function nr(f,N,j){if(typeof f=="function")j&&(f=y(f,j));else if(f&&typeof f.handleEvent=="function")f=y(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(N)?-1:u.setTimeout(f,N||0)}function ae(f){f.g=nr(()=>{f.g=null,f.i&&(f.i=!1,ae(f))},f.l);const N=f.h;f.h=null,f.m.apply(null,N)}class Fe extends Y{constructor(N,j){super(),this.m=N,this.l=j,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Le(f){Y.call(this),this.h=f,this.g={}}S(Le,Y);var pt=[];function nt(f){B(f.g,function(N,j){this.g.hasOwnProperty(j)&&En(N)},f),f.g={}}Le.prototype.N=function(){Le.aa.N.call(this),nt(this)},Le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ht=u.JSON.stringify,Ne=u.JSON.parse,ys=class{stringify(f){return u.JSON.stringify(f,void 0)}parse(f){return u.JSON.parse(f,void 0)}};function qe(){}qe.prototype.h=null;function ft(f){return f.h||(f.h=f.i())}function ct(){}var Dt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wt(){le.call(this,"d")}S(Wt,le);function rr(){le.call(this,"c")}S(rr,le);var Gn={},Ai=null;function Qt(){return Ai=Ai||new Vt}Gn.La="serverreachability";function Ac(f){le.call(this,Gn.La,f)}S(Ac,le);function Xs(f){const N=Qt();It(N,new Ac(N))}Gn.STAT_EVENT="statevent";function Pc(f,N){le.call(this,Gn.STAT_EVENT,f),this.stat=N}S(Pc,le);function on(f){const N=Qt();It(N,new Pc(N,f))}Gn.Ma="timingevent";function Wa(f,N){le.call(this,Gn.Ma,f),this.size=N}S(Wa,le);function qr(f,N){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){f()},N)}function Ho(){this.g=!0}Ho.prototype.xa=function(){this.g=!1};function Ko(f,N,j,F,ee,oe){f.info(function(){if(f.g)if(oe)for(var _e="",Ct=oe.split("&"),vn=0;vn<Ct.length;vn++){var gt=Ct[vn].split("=");if(1<gt.length){var bn=gt[0];gt=gt[1];var cn=bn.split("_");_e=2<=cn.length&&cn[1]=="type"?_e+(bn+"="+gt+"&"):_e+(bn+"=redacted&")}}else _e=null;else _e=oe;return"XMLHTTP REQ ("+F+") [attempt "+ee+"]: "+N+`
`+j+`
`+_e})}function Ha(f,N,j,F,ee,oe,_e){f.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+ee+"]: "+N+`
`+j+`
`+oe+" "+_e})}function Wr(f,N,j,F){f.info(function(){return"XMLHTTP TEXT ("+N+"): "+Wm(f,j)+(F?" "+F:"")})}function Rc(f,N){f.info(function(){return"TIMEOUT: "+N})}Ho.prototype.info=function(){};function Wm(f,N){if(!f.g)return N;if(!N)return null;try{var j=JSON.parse(N);if(j){for(f=0;f<j.length;f++)if(Array.isArray(j[f])){var F=j[f];if(!(2>F.length)){var ee=F[1];if(Array.isArray(ee)&&!(1>ee.length)){var oe=ee[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(var _e=1;_e<ee.length;_e++)ee[_e]=""}}}}return ht(j)}catch{return N}}var Ka={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_d={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hr;function Go(){}S(Go,qe),Go.prototype.g=function(){return new XMLHttpRequest},Go.prototype.i=function(){return{}},Hr=new Go;function Kr(f,N,j,F){this.j=f,this.i=N,this.l=j,this.R=F||1,this.U=new Le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ed}function Ed(){this.i=null,this.g="",this.h=!1}var kc={},Ga={};function Qa(f,N,j){f.L=1,f.v=Oi(xr(N)),f.m=j,f.P=!0,Dc(f,null)}function Dc(f,N){f.F=Date.now(),Ot(f),f.A=xr(f.v);var j=f.A,F=f.R;Array.isArray(F)||(F=[String(F)]),Mi(j.i,"t",F),f.C=0,j=f.j.J,f.h=new Ed,f.g=Ud(f.j,j?N:null,!f.m),0<f.O&&(f.M=new Fe(y(f.Y,f,f.g),f.O)),N=f.U,j=f.g,F=f.ca;var ee="readystatechange";Array.isArray(ee)||(ee&&(pt[0]=ee.toString()),ee=pt);for(var oe=0;oe<ee.length;oe++){var _e=Ft(j,ee[oe],F||N.handleEvent,!1,N.h||N);if(!_e)break;N.g[_e.key]=_e}N=f.H?R(f.H):{},f.m?(f.u||(f.u="POST"),N["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,N)):(f.u="GET",f.g.ea(f.A,f.u,null,N)),Xs(),Ko(f.i,f.u,f.A,f.l,f.R,f.m)}Kr.prototype.ca=function(f){f=f.target;const N=this.M;N&&ir(f)==3?N.j():this.Y(f)},Kr.prototype.Y=function(f){try{if(f==this.g)e:{const cn=ir(this.g);var N=this.g.Ba();const kr=this.g.Z();if(!(3>cn)&&(cn!=3||this.g&&(this.h.h||this.g.oa()||Uc(this.g)))){this.J||cn!=4||N==7||(N==8||0>=kr?Xs(3):Xs(2)),Qo(this);var j=this.g.Z();this.X=j;t:if(bd(this)){var F=Uc(this.g);f="";var ee=F.length,oe=ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pr(this),Pi(this);var _e="";break t}this.h.i=new u.TextDecoder}for(N=0;N<ee;N++)this.h.h=!0,f+=this.h.i.decode(F[N],{stream:!(oe&&N==ee-1)});F.length=0,this.h.g+=f,this.C=0,_e=this.h.g}else _e=this.g.oa();if(this.o=j==200,Ha(this.i,this.u,this.A,this.l,this.R,cn,j),this.o){if(this.T&&!this.K){t:{if(this.g){var Ct,vn=this.g;if((Ct=vn.g?vn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Ct)){var gt=Ct;break t}}gt=null}if(j=gt)Wr(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Oc(this,j);else{this.o=!1,this.s=3,on(12),Pr(this),Pi(this);break e}}if(this.P){j=!0;let _r;for(;!this.J&&this.C<_e.length;)if(_r=Hm(this,_e),_r==Ga){cn==4&&(this.s=4,on(14),j=!1),Wr(this.i,this.l,null,"[Incomplete Response]");break}else if(_r==kc){this.s=4,on(15),Wr(this.i,this.l,_e,"[Invalid Chunk]"),j=!1;break}else Wr(this.i,this.l,_r,null),Oc(this,_r);if(bd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),cn!=4||_e.length!=0||this.h.h||(this.s=1,on(16),j=!1),this.o=this.o&&j,!j)Wr(this.i,this.l,_e,"[Invalid Chunked Response]"),Pr(this),Pi(this);else if(0<_e.length&&!this.W){this.W=!0;var bn=this.j;bn.g==this&&bn.ba&&!bn.M&&(bn.j.info("Great, no buffering proxy detected. Bytes received: "+_e.length),zc(bn),bn.M=!0,on(11))}}else Wr(this.i,this.l,_e,null),Oc(this,_e);cn==4&&Pr(this),this.o&&!this.J&&(cn==4?ol(this.j,this):(this.o=!1,Ot(this)))}else tl(this.g),j==400&&0<_e.indexOf("Unknown SID")?(this.s=3,on(12)):(this.s=0,on(13)),Pr(this),Pi(this)}}}catch{}finally{}};function bd(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Hm(f,N){var j=f.C,F=N.indexOf(`
`,j);return F==-1?Ga:(j=Number(N.substring(j,F)),isNaN(j)?kc:(F+=1,F+j>N.length?Ga:(N=N.slice(F,F+j),f.C=F+j,N)))}Kr.prototype.cancel=function(){this.J=!0,Pr(this)};function Ot(f){f.S=Date.now()+f.I,Sd(f,f.I)}function Sd(f,N){if(f.B!=null)throw Error("WatchDog timer not null");f.B=qr(y(f.ba,f),N)}function Qo(f){f.B&&(u.clearTimeout(f.B),f.B=null)}Kr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Rc(this.i,this.A),this.L!=2&&(Xs(),on(17)),Pr(this),this.s=2,Pi(this)):Sd(this,this.S-f)};function Pi(f){f.j.G==0||f.J||ol(f.j,f)}function Pr(f){Qo(f);var N=f.M;N&&typeof N.ma=="function"&&N.ma(),f.M=null,nt(f.U),f.g&&(N=f.g,f.g=null,N.abort(),N.ma())}function Oc(f,N){try{var j=f.j;if(j.G!=0&&(j.g==f||Qn(j.h,f))){if(!f.K&&Qn(j.h,f)&&j.G==3){try{var F=j.Da.g.parse(N)}catch{F=null}if(Array.isArray(F)&&F.length==3){var ee=F;if(ee[0]==0){e:if(!j.u){if(j.g)if(j.g.F+3e3<f.F)il(j),Jr(j);else break e;sl(j),on(18)}}else j.za=ee[1],0<j.za-j.T&&37500>ee[2]&&j.F&&j.v==0&&!j.C&&(j.C=qr(y(j.Za,j),6e3));if(1>=Td(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else ni(j,11)}else if((f.K||j.g==f)&&il(j),!I(N))for(ee=j.Da.g.parse(N),N=0;N<ee.length;N++){let gt=ee[N];if(j.T=gt[0],gt=gt[1],j.G==2)if(gt[0]=="c"){j.K=gt[1],j.ia=gt[2];const bn=gt[3];bn!=null&&(j.la=bn,j.j.info("VER="+j.la));const cn=gt[4];cn!=null&&(j.Aa=cn,j.j.info("SVER="+j.Aa));const kr=gt[5];kr!=null&&typeof kr=="number"&&0<kr&&(F=1.5*kr,j.L=F,j.j.info("backChannelRequestTimeoutMs_="+F)),F=j;const _r=f.g;if(_r){const na=_r.g?_r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(na){var oe=F.h;oe.g||na.indexOf("spdy")==-1&&na.indexOf("quic")==-1&&na.indexOf("h2")==-1||(oe.j=oe.l,oe.g=new Set,oe.h&&(Lc(oe,oe.h),oe.h=null))}if(F.D){const ll=_r.g?_r.g.getResponseHeader("X-HTTP-Session-Id"):null;ll&&(F.ya=ll,Pt(F.I,F.D,ll))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-f.F,j.j.info("Handshake RTT: "+j.R+"ms")),F=j;var _e=f;if(F.qa=Vd(F,F.J?F.ia:null,F.W),_e.K){Cd(F.h,_e);var Ct=_e,vn=F.L;vn&&(Ct.I=vn),Ct.B&&(Qo(Ct),Ot(Ct)),F.g=_e}else ta(F);0<j.i.length&&Es(j)}else gt[0]!="stop"&&gt[0]!="close"||ni(j,7);else j.G==3&&(gt[0]=="stop"||gt[0]=="close"?gt[0]=="stop"?ni(j,7):An(j):gt[0]!="noop"&&j.l&&j.l.ta(gt),j.v=0)}}Xs(4)}catch{}}var Nd=class{constructor(f,N){this.g=f,this.map=N}};function Yo(f){this.l=f||10,u.PerformanceNavigationTiming?(f=u.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yr(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Td(f){return f.h?1:f.g?f.g.size:0}function Qn(f,N){return f.h?f.h==N:f.g?f.g.has(N):!1}function Lc(f,N){f.g?f.g.add(N):f.h=N}function Cd(f,N){f.h&&f.h==N?f.h=null:f.g&&f.g.has(N)&&f.g.delete(N)}Yo.prototype.cancel=function(){if(this.i=Id(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Id(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let N=f.i;for(const j of f.g.values())N=N.concat(j.D);return N}return _(f.i)}function Ya(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(h(f)){for(var N=[],j=f.length,F=0;F<j;F++)N.push(f[F]);return N}N=[],j=0;for(F in f)N[j++]=f[F];return N}function Xa(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(h(f)||typeof f=="string"){var N=[];f=f.length;for(var j=0;j<f;j++)N.push(j);return N}N=[],j=0;for(const F in f)N[j++]=F;return N}}}function Ri(f,N){if(f.forEach&&typeof f.forEach=="function")f.forEach(N,void 0);else if(h(f)||typeof f=="string")Array.prototype.forEach.call(f,N,void 0);else for(var j=Xa(f),F=Ya(f),ee=F.length,oe=0;oe<ee;oe++)N.call(void 0,F[oe],j&&j[oe],f)}var Xo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Km(f,N){if(f){f=f.split("&");for(var j=0;j<f.length;j++){var F=f[j].indexOf("="),ee=null;if(0<=F){var oe=f[j].substring(0,F);ee=f[j].substring(F+1)}else oe=f[j];N(oe,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function Js(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Js){this.h=f.h,Jo(this,f.j),this.o=f.o,this.g=f.g,ki(this,f.s),this.l=f.l;var N=f.i,j=new xs;j.i=N.i,N.g&&(j.g=new Map(N.g),j.h=N.h),Di(this,j),this.m=f.m}else f&&(N=String(f).match(Xo))?(this.h=!1,Jo(this,N[1]||"",!0),this.o=mt(N[2]||""),this.g=mt(N[3]||"",!0),ki(this,N[4]),this.l=mt(N[5]||"",!0),Di(this,N[6]||"",!0),this.m=mt(N[7]||"")):(this.h=!1,this.i=new xs(null,this.h))}Js.prototype.toString=function(){var f=[],N=this.j;N&&f.push(Li(N,Ja,!0),":");var j=this.g;return(j||N=="file")&&(f.push("//"),(N=this.o)&&f.push(Li(N,Ja,!0),"@"),f.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&f.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&f.push("/"),f.push(Li(j,j.charAt(0)=="/"?Pd:Ad,!0))),(j=this.i.toString())&&f.push("?",j),(j=this.m)&&f.push("#",Li(j,Mc)),f.join("")};function xr(f){return new Js(f)}function Jo(f,N,j){f.j=j?mt(N,!0):N,f.j&&(f.j=f.j.replace(/:$/,""))}function ki(f,N){if(N){if(N=Number(N),isNaN(N)||0>N)throw Error("Bad port number "+N);f.s=N}else f.s=null}function Di(f,N,j){N instanceof xs?(f.i=N,ws(f.i,f.h)):(j||(N=Li(N,Rd)),f.i=new xs(N,f.h))}function Pt(f,N,j){f.i.set(N,j)}function Oi(f){return Pt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function mt(f,N){return f?N?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Li(f,N,j){return typeof f=="string"?(f=encodeURI(f).replace(N,jd),j&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function jd(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Ja=/[#\/\?@]/g,Ad=/[#\?:]/g,Pd=/[#\?]/g,Rd=/[#\?@]/g,Mc=/#/g;function xs(f,N){this.h=this.g=null,this.i=f||null,this.j=!!N}function jn(f){f.g||(f.g=new Map,f.h=0,f.i&&Km(f.i,function(N,j){f.add(decodeURIComponent(N.replace(/\+/g," ")),j)}))}n=xs.prototype,n.add=function(f,N){jn(this),this.i=null,f=Rr(this,f);var j=this.g.get(f);return j||this.g.set(f,j=[]),j.push(N),this.h+=1,this};function Gr(f,N){jn(f),N=Rr(f,N),f.g.has(N)&&(f.i=null,f.h-=f.g.get(N).length,f.g.delete(N))}function Qr(f,N){return jn(f),N=Rr(f,N),f.g.has(N)}n.forEach=function(f,N){jn(this),this.g.forEach(function(j,F){j.forEach(function(ee){f.call(N,ee,F,this)},this)},this)},n.na=function(){jn(this);const f=Array.from(this.g.values()),N=Array.from(this.g.keys()),j=[];for(let F=0;F<N.length;F++){const ee=f[F];for(let oe=0;oe<ee.length;oe++)j.push(N[F])}return j},n.V=function(f){jn(this);let N=[];if(typeof f=="string")Qr(this,f)&&(N=N.concat(this.g.get(Rr(this,f))));else{f=Array.from(this.g.values());for(let j=0;j<f.length;j++)N=N.concat(f[j])}return N},n.set=function(f,N){return jn(this),this.i=null,f=Rr(this,f),Qr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[N]),this.h+=1,this},n.get=function(f,N){return f?(f=this.V(f),0<f.length?String(f[0]):N):N};function Mi(f,N,j){Gr(f,N),0<j.length&&(f.i=null,f.g.set(Rr(f,N),_(j)),f.h+=j.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],N=Array.from(this.g.keys());for(var j=0;j<N.length;j++){var F=N[j];const oe=encodeURIComponent(String(F)),_e=this.V(F);for(F=0;F<_e.length;F++){var ee=oe;_e[F]!==""&&(ee+="="+encodeURIComponent(String(_e[F]))),f.push(ee)}}return this.i=f.join("&")};function Rr(f,N){return N=String(N),f.j&&(N=N.toLowerCase()),N}function ws(f,N){N&&!f.j&&(jn(f),f.i=null,f.g.forEach(function(j,F){var ee=F.toLowerCase();F!=ee&&(Gr(this,F),Mi(this,ee,j))},f)),f.j=N}function Gm(f,N){const j=new Ho;if(u.Image){const F=new Image;F.onload=b(sr,j,"TestLoadImage: loaded",!0,N,F),F.onerror=b(sr,j,"TestLoadImage: error",!1,N,F),F.onabort=b(sr,j,"TestLoadImage: abort",!1,N,F),F.ontimeout=b(sr,j,"TestLoadImage: timeout",!1,N,F),u.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=f}else N(!1)}function kd(f,N){const j=new Ho,F=new AbortController,ee=setTimeout(()=>{F.abort(),sr(j,"TestPingServer: timeout",!1,N)},1e4);fetch(f,{signal:F.signal}).then(oe=>{clearTimeout(ee),oe.ok?sr(j,"TestPingServer: ok",!0,N):sr(j,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(ee),sr(j,"TestPingServer: error",!1,N)})}function sr(f,N,j,F,ee){try{ee&&(ee.onload=null,ee.onerror=null,ee.onabort=null,ee.ontimeout=null),F(j)}catch{}}function Qm(){this.g=new ys}function Dd(f,N,j){const F=j||"";try{Ri(f,function(ee,oe){let _e=ee;m(ee)&&(_e=ht(ee)),N.push(F+oe+"="+encodeURIComponent(_e))})}catch(ee){throw N.push(F+"type="+encodeURIComponent("_badmap")),ee}}function Zs(f){this.l=f.Ub||null,this.j=f.eb||!1}S(Zs,qe),Zs.prototype.g=function(){return new Zo(this.l,this.j)},Zs.prototype.i=function(f){return function(){return f}}({});function Zo(f,N){Vt.call(this),this.D=f,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Zo,Vt),n=Zo.prototype,n.open=function(f,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=N,this.readyState=1,Xr(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const N={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(N.body=f),(this.D||u).fetch(new Request(this.A,N)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yr(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Xr(this)),this.g&&(this.readyState=3,Xr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Od(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Od(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var N=f.value?f.value:new Uint8Array(0);(N=this.v.decode(N,{stream:!f.done}))&&(this.response=this.responseText+=N)}f.done?Yr(this):Xr(this),this.readyState==3&&Od(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Yr(this))},n.Qa=function(f){this.g&&(this.response=f,Yr(this))},n.ga=function(){this.g&&Yr(this)};function Yr(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Xr(f)}n.setRequestHeader=function(f,N){this.u.append(f,N)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],N=this.h.entries();for(var j=N.next();!j.done;)j=j.value,f.push(j[0]+": "+j[1]),j=N.next();return f.join(`\r
`)};function Xr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Zo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ei(f){let N="";return B(f,function(j,F){N+=F,N+=":",N+=j,N+=`\r
`}),N}function Fi(f,N,j){e:{for(F in j){var F=!1;break e}F=!0}F||(j=ei(j),typeof f=="string"?j!=null&&encodeURIComponent(String(j)):Pt(f,N,j))}function Ht(f){Vt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ht,Vt);var Ym=/^https?$/i,Fc=["POST","PUT"];n=Ht.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,N,j,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);N=N?N.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hr.g(),this.v=this.o?ft(this.o):ft(Hr),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(N,String(f),!0),this.B=!1}catch(oe){ea(this,oe);return}if(f=j||"",j=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var ee in F)j.set(ee,F[ee]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const oe of F.keys())j.set(oe,F.get(oe));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(j.keys()).find(oe=>oe.toLowerCase()=="content-type"),ee=u.FormData&&f instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Fc,N,void 0))||F||ee||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,_e]of j)this.g.setRequestHeader(oe,_e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{el(this),this.u=!0,this.g.send(f),this.u=!1}catch(oe){ea(this,oe)}};function ea(f,N){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=N,f.m=5,Za(f),wr(f)}function Za(f){f.A||(f.A=!0,It(f,"complete"),It(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,It(this,"complete"),It(this,"abort"),wr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wr(this,!0)),Ht.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Vc(this):this.bb())},n.bb=function(){Vc(this)};function Vc(f){if(f.h&&typeof c<"u"&&(!f.v[1]||ir(f)!=4||f.Z()!=2)){if(f.u&&ir(f)==4)nr(f.Ea,0,f);else if(It(f,"readystatechange"),ir(f)==4){f.h=!1;try{const _e=f.Z();e:switch(_e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var j;if(!(j=N)){var F;if(F=_e===0){var ee=String(f.D).match(Xo)[1]||null;!ee&&u.self&&u.self.location&&(ee=u.self.location.protocol.slice(0,-1)),F=!Ym.test(ee?ee.toLowerCase():"")}j=F}if(j)It(f,"complete"),It(f,"success");else{f.m=6;try{var oe=2<ir(f)?f.g.statusText:""}catch{oe=""}f.l=oe+" ["+f.Z()+"]",Za(f)}}finally{wr(f)}}}}function wr(f,N){if(f.g){el(f);const j=f.g,F=f.v[0]?()=>{}:null;f.g=null,f.v=null,N||It(f,"ready");try{j.onreadystatechange=F}catch{}}}function el(f){f.I&&(u.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function ir(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<ir(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var N=this.g.responseText;return f&&N.indexOf(f)==0&&(N=N.substring(f.length)),Ne(N)}};function Uc(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function tl(f){const N={};f=(f.g&&2<=ir(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<f.length;F++){if(I(f[F]))continue;var j=$(f[F]);const ee=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const oe=N[ee]||[];N[ee]=oe,oe.push(j)}P(N,function(F){return F.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _s(f,N,j){return j&&j.internalChannelParams&&j.internalChannelParams[f]||N}function $c(f){this.Aa=0,this.i=[],this.j=new Ho,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_s("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_s("baseRetryDelayMs",5e3,f),this.cb=_s("retryDelaySeedMs",1e4,f),this.Wa=_s("forwardChannelMaxRetries",2,f),this.wa=_s("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Yo(f&&f.concurrentRequestLimit),this.Da=new Qm,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=$c.prototype,n.la=8,n.G=1,n.connect=function(f,N,j,F){on(0),this.W=f,this.H=N||{},j&&F!==void 0&&(this.H.OSID=j,this.H.OAID=F),this.F=this.X,this.I=Vd(this,null,this.W),Es(this)};function An(f){if(nl(f),f.G==3){var N=f.U++,j=xr(f.I);if(Pt(j,"SID",f.K),Pt(j,"RID",N),Pt(j,"TYPE","terminate"),ti(f,j),N=new Kr(f,f.j,N),N.L=2,N.v=Oi(xr(j)),j=!1,u.navigator&&u.navigator.sendBeacon)try{j=u.navigator.sendBeacon(N.v.toString(),"")}catch{}!j&&u.Image&&(new Image().src=N.v,j=!0),j||(N.g=Ud(N.j,null),N.g.ea(N.v)),N.F=Date.now(),Ot(N)}Fd(f)}function Jr(f){f.g&&(zc(f),f.g.cancel(),f.g=null)}function nl(f){Jr(f),f.u&&(u.clearTimeout(f.u),f.u=null),il(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&u.clearTimeout(f.s),f.s=null)}function Es(f){if(!yr(f.h)&&!f.s){f.s=!0;var N=f.Ga;X||Z(),q||(X(),q=!0),Q.add(N,f),f.B=0}}function Xm(f,N){return Td(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=N.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=qr(y(f.Ga,f,N),Md(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const ee=new Kr(this,this.j,f);let oe=this.o;if(this.S&&(oe?(oe=R(oe),k(oe,this.S)):oe=this.S),this.m!==null||this.O||(ee.H=oe,oe=null),this.P)e:{for(var N=0,j=0;j<this.i.length;j++){t:{var F=this.i[j];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(N+=F,4096<N){N=j;break e}if(N===4096||j===this.i.length-1){N=j+1;break e}}N=1e3}else N=1e3;N=Vi(this,ee,N),j=xr(this.I),Pt(j,"RID",f),Pt(j,"CVER",22),this.D&&Pt(j,"X-HTTP-Session-Id",this.D),ti(this,j),oe&&(this.O?N="headers="+encodeURIComponent(String(ei(oe)))+"&"+N:this.m&&Fi(j,this.m,oe)),Lc(this.h,ee),this.Ua&&Pt(j,"TYPE","init"),this.P?(Pt(j,"$req",N),Pt(j,"SID","null"),ee.T=!0,Qa(ee,j,null)):Qa(ee,j,N),this.G=2}}else this.G==3&&(f?rl(this,f):this.i.length==0||yr(this.h)||rl(this))};function rl(f,N){var j;N?j=N.l:j=f.U++;const F=xr(f.I);Pt(F,"SID",f.K),Pt(F,"RID",j),Pt(F,"AID",f.T),ti(f,F),f.m&&f.o&&Fi(F,f.m,f.o),j=new Kr(f,f.j,j,f.B+1),f.m===null&&(j.H=f.o),N&&(f.i=N.D.concat(f.i)),N=Vi(f,j,1e3),j.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Lc(f.h,j),Qa(j,F,N)}function ti(f,N){f.H&&B(f.H,function(j,F){Pt(N,F,j)}),f.l&&Ri({},function(j,F){Pt(N,F,j)})}function Vi(f,N,j){j=Math.min(f.i.length,j);var F=f.l?y(f.l.Na,f.l,f):null;e:{var ee=f.i;let oe=-1;for(;;){const _e=["count="+j];oe==-1?0<j?(oe=ee[0].g,_e.push("ofs="+oe)):oe=0:_e.push("ofs="+oe);let Ct=!0;for(let vn=0;vn<j;vn++){let gt=ee[vn].g;const bn=ee[vn].map;if(gt-=oe,0>gt)oe=Math.max(0,ee[vn].g-100),Ct=!1;else try{Dd(bn,_e,"req"+gt+"_")}catch{F&&F(bn)}}if(Ct){F=_e.join("&");break e}}}return f=f.i.splice(0,j),N.D=f,F}function ta(f){if(!f.g&&!f.u){f.Y=1;var N=f.Fa;X||Z(),q||(X(),q=!0),Q.add(N,f),f.v=0}}function sl(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=qr(y(f.Fa,f),Md(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Ld(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=qr(y(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,on(10),Jr(this),Ld(this))};function zc(f){f.A!=null&&(u.clearTimeout(f.A),f.A=null)}function Ld(f){f.g=new Kr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var N=xr(f.qa);Pt(N,"RID","rpc"),Pt(N,"SID",f.K),Pt(N,"AID",f.T),Pt(N,"CI",f.F?"0":"1"),!f.F&&f.ja&&Pt(N,"TO",f.ja),Pt(N,"TYPE","xmlhttp"),ti(f,N),f.m&&f.o&&Fi(N,f.m,f.o),f.L&&(f.g.I=f.L);var j=f.g;f=f.ia,j.L=1,j.v=Oi(xr(N)),j.m=null,j.P=!0,Dc(j,f)}n.Za=function(){this.C!=null&&(this.C=null,Jr(this),sl(this),on(19))};function il(f){f.C!=null&&(u.clearTimeout(f.C),f.C=null)}function ol(f,N){var j=null;if(f.g==N){il(f),zc(f),f.g=null;var F=2}else if(Qn(f.h,N))j=N.D,Cd(f.h,N),F=1;else return;if(f.G!=0){if(N.o)if(F==1){j=N.m?N.m.length:0,N=Date.now()-N.F;var ee=f.B;F=Qt(),It(F,new Wa(F,j)),Es(f)}else ta(f);else if(ee=N.s,ee==3||ee==0&&0<N.X||!(F==1&&Xm(f,N)||F==2&&sl(f)))switch(j&&0<j.length&&(N=f.h,N.i=N.i.concat(j)),ee){case 1:ni(f,5);break;case 4:ni(f,10);break;case 3:ni(f,6);break;default:ni(f,2)}}}function Md(f,N){let j=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(j*=2),j*N}function ni(f,N){if(f.j.info("Error code "+N),N==2){var j=y(f.fb,f),F=f.Xa;const ee=!F;F=new Js(F||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Jo(F,"https"),Oi(F),ee?Gm(F.toString(),j):kd(F.toString(),j)}else on(2);f.G=0,f.l&&f.l.sa(N),Fd(f),nl(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),on(2)):(this.j.info("Failed to ping google.com"),on(1))};function Fd(f){if(f.G=0,f.ka=[],f.l){const N=Id(f.h);(N.length!=0||f.i.length!=0)&&(x(f.ka,N),x(f.ka,f.i),f.h.i.length=0,_(f.i),f.i.length=0),f.l.ra()}}function Vd(f,N,j){var F=j instanceof Js?xr(j):new Js(j);if(F.g!="")N&&(F.g=N+"."+F.g),ki(F,F.s);else{var ee=u.location;F=ee.protocol,N=N?N+"."+ee.hostname:ee.hostname,ee=+ee.port;var oe=new Js(null);F&&Jo(oe,F),N&&(oe.g=N),ee&&ki(oe,ee),j&&(oe.l=j),F=oe}return j=f.D,N=f.ya,j&&N&&Pt(F,j,N),Pt(F,"VER",f.la),ti(f,F),F}function Ud(f,N,j){if(N&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return N=f.Ca&&!f.pa?new Ht(new Zs({eb:j})):new Ht(f.pa),N.Ha(f.J),N}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bc(){}n=Bc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function al(){}al.prototype.g=function(f,N){return new Yn(f,N)};function Yn(f,N){Vt.call(this),this.g=new $c(N),this.l=f,this.h=N&&N.messageUrlParams||null,f=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(f?f["X-WebChannel-Content-Type"]=N.messageContentType:f={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.va&&(f?f["X-WebChannel-Client-Profile"]=N.va:f={"X-WebChannel-Client-Profile":N.va}),this.g.S=f,(f=N&&N.Sb)&&!I(f)&&(this.g.m=f),this.v=N&&N.supportsCrossDomainXhr||!1,this.u=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!I(N)&&(this.g.D=N,f=this.h,f!==null&&N in f&&(f=this.h,N in f&&delete f[N])),this.j=new bs(this)}S(Yn,Vt),Yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yn.prototype.close=function(){An(this.g)},Yn.prototype.o=function(f){var N=this.g;if(typeof f=="string"){var j={};j.__data__=f,f=j}else this.u&&(j={},j.__data__=ht(f),f=j);N.i.push(new Nd(N.Ya++,f)),N.G==3&&Es(N)},Yn.prototype.N=function(){this.g.l=null,delete this.j,An(this.g),delete this.g,Yn.aa.N.call(this)};function $d(f){Wt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var N=f.__sm__;if(N){e:{for(const j in N){f=j;break e}f=void 0}(this.i=f)&&(f=this.i,N=N!==null&&f in N?N[f]:void 0),this.data=N}else this.data=f}S($d,Wt);function zd(){rr.call(this),this.status=1}S(zd,rr);function bs(f){this.g=f}S(bs,Bc),bs.prototype.ua=function(){It(this.g,"a")},bs.prototype.ta=function(f){It(this.g,new $d(f))},bs.prototype.sa=function(f){It(this.g,new zd)},bs.prototype.ra=function(){It(this.g,"b")},al.prototype.createWebChannel=al.prototype.g,Yn.prototype.send=Yn.prototype.o,Yn.prototype.open=Yn.prototype.m,Yn.prototype.close=Yn.prototype.close,QN=function(){return new al},GN=function(){return Qt()},KN=Gn,Rv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ka.NO_ERROR=0,Ka.TIMEOUT=8,Ka.HTTP_ERROR=6,hf=Ka,_d.COMPLETE="complete",HN=_d,ct.EventType=Dt,Dt.OPEN="a",Dt.CLOSE="b",Dt.ERROR="c",Dt.MESSAGE="d",Vt.prototype.listen=Vt.prototype.K,yu=ct,Ht.prototype.listenOnce=Ht.prototype.L,Ht.prototype.getLastError=Ht.prototype.Ka,Ht.prototype.getLastErrorCode=Ht.prototype.Ba,Ht.prototype.getStatus=Ht.prototype.Z,Ht.prototype.getResponseJson=Ht.prototype.Oa,Ht.prototype.getResponseText=Ht.prototype.oa,Ht.prototype.send=Ht.prototype.ea,Ht.prototype.setWithCredentials=Ht.prototype.Ha,WN=Ht}).apply(typeof qh<"u"?qh:typeof self<"u"?self:typeof window<"u"?window:{});const NE="@firebase/firestore",TE="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hr.UNAUTHENTICATED=new hr(null),hr.GOOGLE_CREDENTIALS=new hr("google-credentials-uid"),hr.FIRST_PARTY=new hr("first-party-uid"),hr.MOCK_USER=new hr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sc="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=new ky("@firebase/firestore");function Dl(){return Ra.logLevel}function je(n,...e){if(Ra.logLevel<=ut.DEBUG){const t=e.map(By);Ra.debug(`Firestore (${Sc}): ${n}`,...t)}}function bi(n,...e){if(Ra.logLevel<=ut.ERROR){const t=e.map(By);Ra.error(`Firestore (${Sc}): ${n}`,...t)}}function ka(n,...e){if(Ra.logLevel<=ut.WARN){const t=e.map(By);Ra.warn(`Firestore (${Sc}): ${n}`,...t)}}function By(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,YN(n,r,t)}function YN(n,e,t){let r=`FIRESTORE (${Sc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw bi(r),new Error(r)}function Nt(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||YN(e,s,r)}function rt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Gs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hr.UNAUTHENTICATED))}shutdown(){}}class aV{constructor(e){this.t=e,this.currentUser=hr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Nt(this.o===void 0,42304);let r=this.i;const s=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let a=new So;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new So,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const h=a;e.enqueueRetryable(async()=>{await h.promise,await s(this.currentUser)})},u=h=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new So)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Nt(typeof r.accessToken=="string",31837,{l:r}),new iV(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Nt(e===null||typeof e=="string",2055,{h:e}),new hr(e)}}class lV{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=hr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cV{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new lV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(hr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class CE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$r(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Nt(this.o===void 0,3512);const r=a=>{a.error!=null&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,je("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new CE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Nt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new CE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=dV(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function at(n,e){return n<e?-1:n>e?1:0}function kv(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return at(r,s);{const a=XN(),c=hV(a.encode(IE(n,t)),a.encode(IE(e,t)));return c!==0?c:at(r,s)}}t+=r>65535?2:1}return at(n.length,e.length)}function IE(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function hV(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return at(n[t],e[t]);return at(n.length,e.length)}function oc(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="__name__";class Is{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ye(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ye(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Is.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Is?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=Is.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return at(e.length,t.length)}static compareSegments(e,t){const r=Is.isNumericId(e),s=Is.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Is.extractNumericId(e).compare(Is.extractNumericId(t)):kv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bo.fromString(e.substring(4,e.length-2))}}class Rt extends Is{construct(e,t,r){return new Rt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Rt(t)}static emptyPath(){return new Rt([])}}const fV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dn extends Is{construct(e,t,r){return new Dn(e,t,r)}static isValidIdentifier(e){return fV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Dv}static keyField(){return new Dn([Dv])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new Te(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Te(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Te(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else u==="`"?(c=!c,s++):u!=="."||c?(r+=u,s++):(a(),s++)}if(a(),c)throw new Te(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dn(t)}static emptyPath(){return new Dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Rt.fromString(e))}static fromName(e){return new Be(Rt.fromString(e).popFirst(5))}static empty(){return new Be(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(n,e,t){if(!t)throw new Te(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function mV(n,e,t,r){if(e===!0&&r===!0)throw new Te(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function jE(n){if(!Be.isDocumentKey(n))throw new Te(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function AE(n){if(Be.isDocumentKey(n))throw new Te(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function JN(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function wm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ye(12329,{type:typeof n})}function Ls(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wm(n);throw new Te(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(n,e){const t={typeString:n};return e&&(t.value=e),t}function hd(n,e){if(!JN(n))throw new Te(ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(s&&typeof c!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new Te(ce.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=-62135596800,RE=1e6;class qt{static now(){return qt.fromMillis(Date.now())}static fromDate(e){return qt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*RE);return new qt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<PE)throw new Te(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/RE}_compareTo(e){return this.seconds===e.seconds?at(this.nanoseconds,e.nanoseconds):at(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hd(e,qt._jsonSchema))return new qt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-PE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qt._jsonSchemaVersion="firestore/timestamp/1.0",qt._jsonSchema={type:mn("string",qt._jsonSchemaVersion),seconds:mn("number"),nanoseconds:mn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{static fromTimestamp(e){return new tt(e)}static min(){return new tt(new qt(0,0))}static max(){return new tt(new qt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu=-1;function pV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=tt.fromTimestamp(r===1e9?new qt(t+1,0):new qt(t,r));return new ko(s,Be.empty(),e)}function gV(n){return new ko(n.readTime,n.key,Hu)}class ko{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ko(tt.min(),Be.empty(),Hu)}static max(){return new ko(tt.max(),Be.empty(),Hu)}}function vV(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Be.comparator(n.documentKey,e.documentKey),t!==0?t:at(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nc(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==yV)throw n;je("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let s=0,a=0,c=!1;e.forEach(u=>{++s,u.next(()=>{++a,c&&a===s&&t()},h=>r(h))}),c=!0,a===s&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(s=>s?he.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,a)=>{r.push(t.call(this,s,a))}),this.waitFor(r)}static mapArray(e,t){return new he((r,s)=>{const a=e.length,c=new Array(a);let u=0;for(let h=0;h<a;h++){const m=h;t(e[m]).next(g=>{c[m]=g,++u,u===a&&r(c)},g=>s(g))}})}static doWhile(e,t){return new he((r,s)=>{const a=()=>{e()===!0?t().next(()=>{a()},s):r()};a()})}}function wV(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Tc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}_m.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy=-1;function Em(n){return n==null}function Mf(n){return n===0&&1/n==-1/0}function _V(n){return typeof n=="number"&&Number.isInteger(n)&&!Mf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN="";function EV(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=kE(e)),e=bV(n.get(t),e);return kE(e)}function bV(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case ZN:t+="";break;default:t+=a}}return t}function kE(n){return n+ZN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $o(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function eT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,t){this.comparator=e,this.root=t||kn.EMPTY}insert(e,t){return new en(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kn.BLACK,null,null))}remove(e){return new en(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wh(this.root,e,this.comparator,!0)}}class Wh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kn{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??kn.RED,this.left=s??kn.EMPTY,this.right=a??kn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new kn(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return kn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return kn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ye(27949);return e+(this.isRed()?0:1)}}kn.EMPTY=null,kn.RED=!0,kn.BLACK=!1;kn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ye(57766)}get value(){throw Ye(16141)}get color(){throw Ye(16727)}get left(){throw Ye(29726)}get right(){throw Ye(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new kn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.comparator=e,this.data=new en(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new OE(this.data.getIterator())}getIteratorFrom(e){return new OE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof wn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new wn(this.comparator);return t.data=e,t}}class OE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.fields=e,e.sort(Dn.comparator)}static empty(){return new Ir([])}unionWith(e){let t=new wn(Dn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ir(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new tT("Invalid base64 string: "+a):a}}(e);return new Ln(t)}static fromUint8Array(e){const t=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new Ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return at(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ln.EMPTY_BYTE_STRING=new Ln("");const SV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Do(n){if(Nt(!!n,39018),typeof n=="string"){let e=0;const t=SV.exec(n);if(Nt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ln(n.seconds),nanos:ln(n.nanos)}}function ln(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Oo(n){return typeof n=="string"?Ln.fromBase64String(n):Ln.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="server_timestamp",rT="__type__",sT="__previous_value__",iT="__local_write_time__";function Ky(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[rT])===null||t===void 0?void 0:t.stringValue)===nT}function bm(n){const e=n.mapValue.fields[sT];return Ky(e)?bm(e):e}function Ku(n){const e=Do(n.mapValue.fields[iT].timestampValue);return new qt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e,t,r,s,a,c,u,h,m,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=m,this.isUsingEmulator=g}}const Ff="(default)";class Gu{constructor(e,t){this.projectId=e,this.database=t||Ff}static empty(){return new Gu("","")}get isDefaultDatabase(){return this.database===Ff}isEqual(e){return e instanceof Gu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="__type__",TV="__max__",Hh={mapValue:{}},aT="__vector__",Vf="value";function Lo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ky(n)?4:IV(n)?9007199254740991:CV(n)?10:11:Ye(28295,{value:n})}function Bs(n,e){if(n===e)return!0;const t=Lo(n);if(t!==Lo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ku(n).isEqual(Ku(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=Do(s.timestampValue),u=Do(a.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,a){return Oo(s.bytesValue).isEqual(Oo(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return ln(s.geoPointValue.latitude)===ln(a.geoPointValue.latitude)&&ln(s.geoPointValue.longitude)===ln(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return ln(s.integerValue)===ln(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=ln(s.doubleValue),u=ln(a.doubleValue);return c===u?Mf(c)===Mf(u):isNaN(c)&&isNaN(u)}return!1}(n,e);case 9:return oc(n.arrayValue.values||[],e.arrayValue.values||[],Bs);case 10:case 11:return function(s,a){const c=s.mapValue.fields||{},u=a.mapValue.fields||{};if(DE(c)!==DE(u))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(u[h]===void 0||!Bs(c[h],u[h])))return!1;return!0}(n,e);default:return Ye(52216,{left:n})}}function Qu(n,e){return(n.values||[]).find(t=>Bs(t,e))!==void 0}function ac(n,e){if(n===e)return 0;const t=Lo(n),r=Lo(e);if(t!==r)return at(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return at(n.booleanValue,e.booleanValue);case 2:return function(a,c){const u=ln(a.integerValue||a.doubleValue),h=ln(c.integerValue||c.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return LE(n.timestampValue,e.timestampValue);case 4:return LE(Ku(n),Ku(e));case 5:return kv(n.stringValue,e.stringValue);case 6:return function(a,c){const u=Oo(a),h=Oo(c);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const u=a.split("/"),h=c.split("/");for(let m=0;m<u.length&&m<h.length;m++){const g=at(u[m],h[m]);if(g!==0)return g}return at(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const u=at(ln(a.latitude),ln(c.latitude));return u!==0?u:at(ln(a.longitude),ln(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ME(n.arrayValue,e.arrayValue);case 10:return function(a,c){var u,h,m,g;const v=a.fields||{},y=c.fields||{},b=(u=v[Vf])===null||u===void 0?void 0:u.arrayValue,S=(h=y[Vf])===null||h===void 0?void 0:h.arrayValue,_=at(((m=b==null?void 0:b.values)===null||m===void 0?void 0:m.length)||0,((g=S==null?void 0:S.values)===null||g===void 0?void 0:g.length)||0);return _!==0?_:ME(b,S)}(n.mapValue,e.mapValue);case 11:return function(a,c){if(a===Hh.mapValue&&c===Hh.mapValue)return 0;if(a===Hh.mapValue)return 1;if(c===Hh.mapValue)return-1;const u=a.fields||{},h=Object.keys(u),m=c.fields||{},g=Object.keys(m);h.sort(),g.sort();for(let v=0;v<h.length&&v<g.length;++v){const y=kv(h[v],g[v]);if(y!==0)return y;const b=ac(u[h[v]],m[g[v]]);if(b!==0)return b}return at(h.length,g.length)}(n.mapValue,e.mapValue);default:throw Ye(23264,{le:t})}}function LE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return at(n,e);const t=Do(n),r=Do(e),s=at(t.seconds,r.seconds);return s!==0?s:at(t.nanos,r.nanos)}function ME(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=ac(t[s],r[s]);if(a)return a}return at(t.length,r.length)}function lc(n){return Ov(n)}function Ov(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Do(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Oo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Be.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Ov(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const c of r)a?a=!1:s+=",",s+=`${c}:${Ov(t.fields[c])}`;return s+"}"}(n.mapValue):Ye(61005,{value:n})}function ff(n){switch(Lo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bm(n);return e?16+ff(e):16;case 5:return 2*n.stringValue.length;case 6:return Oo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+ff(a),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return $o(r.fields,(a,c)=>{s+=a.length+ff(c)}),s}(n.mapValue);default:throw Ye(13486,{value:n})}}function FE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Lv(n){return!!n&&"integerValue"in n}function Gy(n){return!!n&&"arrayValue"in n}function VE(n){return!!n&&"nullValue"in n}function UE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function mf(n){return!!n&&"mapValue"in n}function CV(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[oT])===null||t===void 0?void 0:t.stringValue)===aT}function Au(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return $o(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Au(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Au(n.arrayValue.values[t]);return e}return Object.assign({},n)}function IV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===TV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.value=e}static empty(){return new mr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!mf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Au(t)}setAll(e){let t=Dn.emptyPath(),r={},s=[];e.forEach((c,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,r,s),r={},s=[],t=u.popLast()}c?r[u.lastSegment()]=Au(c):s.push(u.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());mf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];mf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){$o(t,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new mr(Au(this.value))}}function lT(n){const e=[];return $o(n.fields,(t,r)=>{const s=new Dn([t]);if(mf(r)){const a=lT(r.mapValue).fields;if(a.length===0)e.push(s);else for(const c of a)e.push(s.child(c))}else e.push(s)}),new Ir(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,t,r,s,a,c,u){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=c,this.documentState=u}static newInvalidDocument(e){return new qn(e,0,tt.min(),tt.min(),tt.min(),mr.empty(),0)}static newFoundDocument(e,t,r,s){return new qn(e,1,t,tt.min(),r,s,0)}static newNoDocument(e,t){return new qn(e,2,t,tt.min(),tt.min(),mr.empty(),0)}static newUnknownDocument(e,t){return new qn(e,3,t,tt.min(),tt.min(),mr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t){this.position=e,this.inclusive=t}}function $E(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],c=n.position[s];if(a.field.isKeyField()?r=Be.comparator(Be.fromName(c.referenceValue),t.key):r=ac(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function zE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Bs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,t="asc"){this.field=e,this.dir=t}}function jV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{}class fn extends cT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new PV(e,t,r):t==="array-contains"?new DV(e,r):t==="in"?new OV(e,r):t==="not-in"?new LV(e,r):t==="array-contains-any"?new MV(e,r):new fn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new RV(e,r):new kV(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ac(t,this.value)):t!==null&&Lo(this.value)===Lo(t)&&this.matchesComparison(ac(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ps extends cT{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new ps(e,t)}matches(e){return uT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function uT(n){return n.op==="and"}function dT(n){return AV(n)&&uT(n)}function AV(n){for(const e of n.filters)if(e instanceof ps)return!1;return!0}function Mv(n){if(n instanceof fn)return n.field.canonicalString()+n.op.toString()+lc(n.value);if(dT(n))return n.filters.map(e=>Mv(e)).join(",");{const e=n.filters.map(t=>Mv(t)).join(",");return`${n.op}(${e})`}}function hT(n,e){return n instanceof fn?function(r,s){return s instanceof fn&&r.op===s.op&&r.field.isEqual(s.field)&&Bs(r.value,s.value)}(n,e):n instanceof ps?function(r,s){return s instanceof ps&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,c,u)=>a&&hT(c,s.filters[u]),!0):!1}(n,e):void Ye(19439)}function fT(n){return n instanceof fn?function(t){return`${t.field.canonicalString()} ${t.op} ${lc(t.value)}`}(n):n instanceof ps?function(t){return t.op.toString()+" {"+t.getFilters().map(fT).join(" ,")+"}"}(n):"Filter"}class PV extends fn{constructor(e,t,r){super(e,t,r),this.key=Be.fromName(r.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.matchesComparison(t)}}class RV extends fn{constructor(e,t){super(e,"in",t),this.keys=mT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kV extends fn{constructor(e,t){super(e,"not-in",t),this.keys=mT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function mT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Be.fromName(r.referenceValue))}class DV extends fn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Gy(t)&&Qu(t.arrayValue,this.value)}}class OV extends fn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Qu(this.value.arrayValue,t)}}class LV extends fn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Qu(this.value.arrayValue,t)}}class MV extends fn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Gy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Qu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e,t=null,r=[],s=[],a=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=c,this.endAt=u,this.Pe=null}}function BE(n,e=null,t=[],r=[],s=null,a=null,c=null){return new FV(n,e,t,r,s,a,c)}function Qy(n){const e=rt(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Mv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Em(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>lc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>lc(r)).join(",")),e.Pe=t}return e.Pe}function Yy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!jV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!hT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!zE(n.startAt,e.startAt)&&zE(n.endAt,e.endAt)}function Fv(n){return Be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,t=null,r=[],s=[],a=null,c="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=c,this.startAt=u,this.endAt=h,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function VV(n,e,t,r,s,a,c,u){return new za(n,e,t,r,s,a,c,u)}function Xy(n){return new za(n)}function qE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pT(n){return n.collectionGroup!==null}function Pu(n){const e=rt(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new wn(Dn.comparator);return c.filters.forEach(h=>{h.getFlattenedFilters().forEach(m=>{m.isInequality()&&(u=u.add(m.field))})}),u})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Yu(a,r))}),t.has(Dn.keyField().canonicalString())||e.Te.push(new Yu(Dn.keyField(),r))}return e.Te}function Ms(n){const e=rt(n);return e.Ie||(e.Ie=UV(e,Pu(n))),e.Ie}function UV(n,e){if(n.limitType==="F")return BE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Yu(s.field,a)});const t=n.endAt?new Uf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Uf(n.startAt.position,n.startAt.inclusive):null;return BE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Vv(n,e){const t=n.filters.concat([e]);return new za(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Uv(n,e,t){return new za(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Sm(n,e){return Yy(Ms(n),Ms(e))&&n.limitType===e.limitType}function gT(n){return`${Qy(Ms(n))}|lt:${n.limitType}`}function Ol(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>fT(s)).join(", ")}]`),Em(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>lc(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>lc(s)).join(",")),`Target(${r})`}(Ms(n))}; limitType=${n.limitType})`}function Nm(n,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Be.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,s){for(const a of Pu(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(c,u,h){const m=$E(c,u,h);return c.inclusive?m<=0:m<0}(r.startAt,Pu(r),s)||r.endAt&&!function(c,u,h){const m=$E(c,u,h);return c.inclusive?m>=0:m>0}(r.endAt,Pu(r),s))}(n,e)}function $V(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vT(n){return(e,t)=>{let r=!1;for(const s of Pu(n)){const a=zV(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function zV(n,e,t){const r=n.field.isKeyField()?Be.comparator(e.key,t.key):function(a,c,u){const h=c.data.field(a),m=u.data.field(a);return h!==null&&m!==null?ac(h,m):Ye(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ye(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){$o(this.inner,(t,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return eT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV=new en(Be.comparator);function Si(){return BV}const yT=new en(Be.comparator);function xu(...n){let e=yT;for(const t of n)e=e.insert(t.key,t);return e}function xT(n){let e=yT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ga(){return Ru()}function wT(){return Ru()}function Ru(){return new Ba(n=>n.toString(),(n,e)=>n.isEqual(e))}const qV=new en(Be.comparator),WV=new wn(Be.comparator);function dt(...n){let e=WV;for(const t of n)e=e.add(t);return e}const HV=new wn(at);function KV(){return HV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mf(e)?"-0":e}}function _T(n){return{integerValue:""+n}}function GV(n,e){return _V(e)?_T(e):Jy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(){this._=void 0}}function QV(n,e,t){return n instanceof $f?function(s,a){const c={fields:{[rT]:{stringValue:nT},[iT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Ky(a)&&(a=bm(a)),a&&(c.fields[sT]=a),{mapValue:c}}(t,e):n instanceof Xu?bT(n,e):n instanceof Ju?ST(n,e):function(s,a){const c=ET(s,a),u=WE(c)+WE(s.Ee);return Lv(c)&&Lv(s.Ee)?_T(u):Jy(s.serializer,u)}(n,e)}function YV(n,e,t){return n instanceof Xu?bT(n,e):n instanceof Ju?ST(n,e):t}function ET(n,e){return n instanceof zf?function(r){return Lv(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class $f extends Tm{}class Xu extends Tm{constructor(e){super(),this.elements=e}}function bT(n,e){const t=NT(e);for(const r of n.elements)t.some(s=>Bs(s,r))||t.push(r);return{arrayValue:{values:t}}}class Ju extends Tm{constructor(e){super(),this.elements=e}}function ST(n,e){let t=NT(e);for(const r of n.elements)t=t.filter(s=>!Bs(s,r));return{arrayValue:{values:t}}}class zf extends Tm{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function WE(n){return ln(n.integerValue||n.doubleValue)}function NT(n){return Gy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function XV(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Xu&&s instanceof Xu||r instanceof Ju&&s instanceof Ju?oc(r.elements,s.elements,Bs):r instanceof zf&&s instanceof zf?Bs(r.Ee,s.Ee):r instanceof $f&&s instanceof $f}(n.transform,e.transform)}class JV{constructor(e,t){this.version=e,this.transformResults=t}}class ds{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ds}static exists(e){return new ds(void 0,e)}static updateTime(e){return new ds(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Cm{}function TT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Zy(n.key,ds.none()):new fd(n.key,n.data,ds.none());{const t=n.data,r=mr.empty();let s=new wn(Dn.comparator);for(let a of e.fields)if(!s.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),s=s.add(a)}return new zo(n.key,r,new Ir(s.toArray()),ds.none())}}function ZV(n,e,t){n instanceof fd?function(s,a,c){const u=s.value.clone(),h=KE(s.fieldTransforms,a,c.transformResults);u.setAll(h),a.convertToFoundDocument(c.version,u).setHasCommittedMutations()}(n,e,t):n instanceof zo?function(s,a,c){if(!pf(s.precondition,a))return void a.convertToUnknownDocument(c.version);const u=KE(s.fieldTransforms,a,c.transformResults),h=a.data;h.setAll(CT(s)),h.setAll(u),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):function(s,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function ku(n,e,t,r){return n instanceof fd?function(a,c,u,h){if(!pf(a.precondition,c))return u;const m=a.value.clone(),g=GE(a.fieldTransforms,h,c);return m.setAll(g),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof zo?function(a,c,u,h){if(!pf(a.precondition,c))return u;const m=GE(a.fieldTransforms,h,c),g=c.data;return g.setAll(CT(a)),g.setAll(m),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(a,c,u){return pf(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u}(n,e,t)}function e3(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=ET(r.transform,s||null);a!=null&&(t===null&&(t=mr.empty()),t.set(r.field,a))}return t||null}function HE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&oc(r,s,(a,c)=>XV(a,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class fd extends Cm{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class zo extends Cm{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function CT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function KE(n,e,t){const r=new Map;Nt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const a=n[s],c=a.transform,u=e.data.field(a.field);r.set(a.field,YV(c,u,t[s]))}return r}function GE(n,e,t){const r=new Map;for(const s of n){const a=s.transform,c=t.data.field(s.field);r.set(s.field,QV(a,c,e))}return r}class Zy extends Cm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class t3 extends Cm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&ZV(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ku(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ku(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=wT();return this.mutations.forEach(s=>{const a=e.get(s.key),c=a.overlayedDocument;let u=this.applyToLocalView(c,a.mutatedFields);u=t.has(s.key)?null:u;const h=TT(c,u);h!==null&&r.set(s.key,h),c.isValidDocument()||c.convertToNoDocument(tt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),dt())}isEqual(e){return this.batchId===e.batchId&&oc(this.mutations,e.mutations,(t,r)=>HE(t,r))&&oc(this.baseMutations,e.baseMutations,(t,r)=>HE(t,r))}}class ex{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Nt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return qV}();const a=e.mutations;for(let c=0;c<a.length;c++)s=s.insert(a[c].key,r[c].version);return new ex(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r3=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dn,vt;function i3(n){switch(n){case ce.OK:return Ye(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Ye(15467,{code:n})}}function IT(n){if(n===void 0)return bi("GRPC error has no .code"),ce.UNKNOWN;switch(n){case dn.OK:return ce.OK;case dn.CANCELLED:return ce.CANCELLED;case dn.UNKNOWN:return ce.UNKNOWN;case dn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case dn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case dn.INTERNAL:return ce.INTERNAL;case dn.UNAVAILABLE:return ce.UNAVAILABLE;case dn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case dn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case dn.NOT_FOUND:return ce.NOT_FOUND;case dn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case dn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case dn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case dn.ABORTED:return ce.ABORTED;case dn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case dn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case dn.DATA_LOSS:return ce.DATA_LOSS;default:return Ye(39323,{code:n})}}(vt=dn||(dn={}))[vt.OK=0]="OK",vt[vt.CANCELLED=1]="CANCELLED",vt[vt.UNKNOWN=2]="UNKNOWN",vt[vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vt[vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vt[vt.NOT_FOUND=5]="NOT_FOUND",vt[vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",vt[vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",vt[vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",vt[vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vt[vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vt[vt.ABORTED=10]="ABORTED",vt[vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",vt[vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",vt[vt.INTERNAL=13]="INTERNAL",vt[vt.UNAVAILABLE=14]="UNAVAILABLE",vt[vt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3=new bo([4294967295,4294967295],0);function QE(n){const e=XN().encode(n),t=new qN;return t.update(e),new Uint8Array(t.digest())}function YE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new bo([t,r],0),new bo([s,a],0)]}class tx{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new wu(`Invalid padding: ${t}`);if(r<0)throw new wu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new wu(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=bo.fromNumber(this.fe)}pe(e,t,r){let s=e.add(t.multiply(bo.fromNumber(r)));return s.compare(o3)===1&&(s=new bo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=QE(e),[r,s]=YE(t);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,s,a);if(!this.ye(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new tx(a,s,t);return r.forEach(u=>c.insert(u)),c}insert(e){if(this.fe===0)return;const t=QE(e),[r,s]=YE(t);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,s,a);this.we(c)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class wu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,md.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Im(tt.min(),s,new en(at),Si(),dt())}}class md{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new md(r,t,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=s}}class jT{constructor(e,t){this.targetId=e,this.De=t}}class AT{constructor(e,t,r=Ln.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class XE{constructor(){this.ve=0,this.Ce=JE(),this.Fe=Ln.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=dt(),t=dt(),r=dt();return this.Ce.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ye(38017,{changeType:a})}}),new md(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=JE()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Nt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class a3{constructor(e){this.We=e,this.Ge=new Map,this.ze=Si(),this.je=Kh(),this.Je=Kh(),this.He=new en(at)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Ye(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,s)=>{this.nt(s)&&t(s)})}it(e){const t=e.targetId,r=e.De.count,s=this.st(t);if(s){const a=s.target;if(Fv(a))if(r===0){const c=new Be(a.path);this.Xe(t,c,qn.newNoDocument(c,tt.min()))}else Nt(r===1,20013,{expectedCount:r});else{const c=this.ot(t);if(c!==r){const u=this._t(e),h=u?this.ut(u,e,c):1;if(h!==0){this.rt(t);const m=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let c,u;try{c=Oo(r).toUint8Array()}catch(h){if(h instanceof tT)return ka("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new tx(c,s,a)}catch(h){return ka(h instanceof wu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.fe===0?null:u}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let s=0;return r.forEach(a=>{const c=this.We.lt(),u=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.Xe(t,a,null),s++)}),s}Pt(e){const t=new Map;this.Ge.forEach((a,c)=>{const u=this.st(c);if(u){if(a.current&&Fv(u.target)){const h=new Be(u.target.path);this.Tt(h).has(c)||this.It(c,h)||this.Xe(c,h,qn.newNoDocument(h,e))}a.Ne&&(t.set(c,a.Le()),a.ke())}});let r=dt();this.Je.forEach((a,c)=>{let u=!0;c.forEachWhile(h=>{const m=this.st(h);return!m||m.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(a))}),this.ze.forEach((a,c)=>c.setReadTime(e));const s=new Im(e,t,this.He,this.ze,r);return this.ze=Si(),this.je=Kh(),this.Je=Kh(),this.He=new en(at),s}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new XE,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new wn(at),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new wn(at),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||je("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new XE),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Kh(){return new en(Be.comparator)}function JE(){return new en(Be.comparator)}const l3={asc:"ASCENDING",desc:"DESCENDING"},c3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},u3={and:"AND",or:"OR"};class d3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $v(n,e){return n.useProto3Json||Em(e)?e:{value:e}}function Bf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function h3(n,e){return Bf(n,e.toTimestamp())}function Fs(n){return Nt(!!n,49232),tt.fromTimestamp(function(t){const r=Do(t);return new qt(r.seconds,r.nanos)}(n))}function nx(n,e){return zv(n,e).canonicalString()}function zv(n,e){const t=function(s){return new Rt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function RT(n){const e=Rt.fromString(n);return Nt(MT(e),10190,{key:e.toString()}),e}function Bv(n,e){return nx(n.databaseId,e.path)}function Fg(n,e){const t=RT(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(DT(t))}function kT(n,e){return nx(n.databaseId,e)}function f3(n){const e=RT(n);return e.length===4?Rt.emptyPath():DT(e)}function qv(n){return new Rt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function DT(n){return Nt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ZE(n,e,t){return{name:Bv(n,e),fields:t.value.mapValue.fields}}function m3(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ye(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(m,g){return m.useProto3Json?(Nt(g===void 0||typeof g=="string",58123),Ln.fromBase64String(g||"")):(Nt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Ln.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&function(m){const g=m.code===void 0?ce.UNKNOWN:IT(m.code);return new Te(g,m.message||"")}(c);t=new AT(r,s,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Fg(n,r.document.name),a=Fs(r.document.updateTime),c=r.document.createTime?Fs(r.document.createTime):tt.min(),u=new mr({mapValue:{fields:r.document.fields}}),h=qn.newFoundDocument(s,a,c,u),m=r.targetIds||[],g=r.removedTargetIds||[];t=new gf(m,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Fg(n,r.document),a=r.readTime?Fs(r.readTime):tt.min(),c=qn.newNoDocument(s,a),u=r.removedTargetIds||[];t=new gf([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Fg(n,r.document),a=r.removedTargetIds||[];t=new gf([],a,s,null)}else{if(!("filter"in e))return Ye(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,c=new s3(s,a),u=r.targetId;t=new jT(u,c)}}return t}function p3(n,e){let t;if(e instanceof fd)t={update:ZE(n,e.key,e.value)};else if(e instanceof Zy)t={delete:Bv(n,e.key)};else if(e instanceof zo)t={update:ZE(n,e.key,e.data),updateMask:S3(e.fieldMask)};else{if(!(e instanceof t3))return Ye(16599,{Rt:e.type});t={verify:Bv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const u=c.transform;if(u instanceof $f)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Xu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ju)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof zf)return{fieldPath:c.field.canonicalString(),increment:u.Ee};throw Ye(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:h3(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ye(27497)}(n,e.precondition)),t}function g3(n,e){return n&&n.length>0?(Nt(e!==void 0,14353),n.map(t=>function(s,a){let c=s.updateTime?Fs(s.updateTime):Fs(a);return c.isEqual(tt.min())&&(c=Fs(a)),new JV(c,s.transformResults||[])}(t,e))):[]}function v3(n,e){return{documents:[kT(n,e.path)]}}function y3(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=kT(n,s);const a=function(m){if(m.length!==0)return LT(ps.create(m,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(m){if(m.length!==0)return m.map(g=>function(y){return{field:Ll(y.field),direction:_3(y.dir)}}(g))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=$v(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{Vt:t,parent:s}}function x3(n){let e=f3(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Nt(r===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let a=[];t.where&&(a=function(v){const y=OT(v);return y instanceof ps&&dT(y)?y.getFilters():[y]}(t.where));let c=[];t.orderBy&&(c=function(v){return v.map(y=>function(S){return new Yu(Ml(S.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(y))}(t.orderBy));let u=null;t.limit&&(u=function(v){let y;return y=typeof v=="object"?v.value:v,Em(y)?null:y}(t.limit));let h=null;t.startAt&&(h=function(v){const y=!!v.before,b=v.values||[];return new Uf(b,y)}(t.startAt));let m=null;return t.endAt&&(m=function(v){const y=!v.before,b=v.values||[];return new Uf(b,y)}(t.endAt)),VV(e,s,c,a,u,"F",h,m)}function w3(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ye(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function OT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ml(t.unaryFilter.field);return fn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ml(t.unaryFilter.field);return fn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ml(t.unaryFilter.field);return fn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ml(t.unaryFilter.field);return fn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ye(61313);default:return Ye(60726)}}(n):n.fieldFilter!==void 0?function(t){return fn.create(Ml(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ye(58110);default:return Ye(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ps.create(t.compositeFilter.filters.map(r=>OT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ye(1026)}}(t.compositeFilter.op))}(n):Ye(30097,{filter:n})}function _3(n){return l3[n]}function E3(n){return c3[n]}function b3(n){return u3[n]}function Ll(n){return{fieldPath:n.canonicalString()}}function Ml(n){return Dn.fromServerFormat(n.fieldPath)}function LT(n){return n instanceof fn?function(t){if(t.op==="=="){if(UE(t.value))return{unaryFilter:{field:Ll(t.field),op:"IS_NAN"}};if(VE(t.value))return{unaryFilter:{field:Ll(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(UE(t.value))return{unaryFilter:{field:Ll(t.field),op:"IS_NOT_NAN"}};if(VE(t.value))return{unaryFilter:{field:Ll(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ll(t.field),op:E3(t.op),value:t.value}}}(n):n instanceof ps?function(t){const r=t.getFilters().map(s=>LT(s));return r.length===1?r[0]:{compositeFilter:{op:b3(t.op),filters:r}}}(n):Ye(54877,{filter:n})}function S3(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function MT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,t,r,s,a=tt.min(),c=tt.min(),u=Ln.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new vo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e){this.gt=e}}function T3(n){const e=x3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Uv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(){this.Dn=new I3}addToCollectionParentIndex(e,t){return this.Dn.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(ko.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(ko.min())}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class I3{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new wn(Rt.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new wn(Rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FT=41943040;class fr{static withCacheSize(e){return new fr(e,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fr.DEFAULT_COLLECTION_PERCENTILE=10,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fr.DEFAULT=new fr(FT,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fr.DISABLED=new fr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new cc(0)}static ur(){return new cc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="LruGarbageCollector",VT=1048576;function nb([n,e],[t,r]){const s=at(n,t);return s===0?at(e,r):s}class j3{constructor(e){this.Tr=e,this.buffer=new wn(nb),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();nb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class A3{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){je(tb,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Tc(t)?je(tb,"Ignoring IndexedDB error during garbage collection: ",t):await Nc(t)}await this.Rr(3e5)})}}class P3{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return he.resolve(_m.ue);const r=new j3(t);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(je("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(eb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eb):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,s,a,c,u,h,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,c=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,u=Date.now(),this.removeTargets(e,r,t))).next(v=>(a=v,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(m=Date.now(),Dl()<=ut.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(u-c)+`ms
	Removed ${a} targets in `+(h-u)+`ms
	Removed ${v} documents in `+(m-h)+`ms
Total Duration: ${m-g}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:v})))}}function R3(n,e){return new P3(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(){this.changes=new Ba(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&ku(r.mutation,s,Ir.empty(),qt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,dt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=dt()){const s=ga();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(a=>{let c=xu();return a.forEach((u,h)=>{c=c.insert(u,h.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=ga();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,dt()))}populateOverlays(e,t,r){const s=[];return r.forEach(a=>{t.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((c,u)=>{t.set(c,u)})})}computeViews(e,t,r,s){let a=Si();const c=Ru(),u=function(){return Ru()}();return t.forEach((h,m)=>{const g=r.get(m.key);s.has(m.key)&&(g===void 0||g.mutation instanceof zo)?a=a.insert(m.key,m):g!==void 0?(c.set(m.key,g.mutation.getFieldMask()),ku(g.mutation,m,g.mutation.getFieldMask(),qt.now())):c.set(m.key,Ir.empty())}),this.recalculateAndSaveOverlays(e,a).next(h=>(h.forEach((m,g)=>c.set(m,g)),t.forEach((m,g)=>{var v;return u.set(m,new D3(g,(v=c.get(m))!==null&&v!==void 0?v:null))}),u))}recalculateAndSaveOverlays(e,t){const r=Ru();let s=new en((c,u)=>c-u),a=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const u of c)u.keys().forEach(h=>{const m=t.get(h);if(m===null)return;let g=r.get(h)||Ir.empty();g=u.applyToLocalView(m,g),r.set(h,g);const v=(s.get(u.batchId)||dt()).add(h);s=s.insert(u.batchId,v)})}).next(()=>{const c=[],u=s.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),m=h.key,g=h.value,v=wT();g.forEach(y=>{if(!a.has(y)){const b=TT(t.get(y),r.get(y));b!==null&&v.set(y,b),a=a.add(y)}}),c.push(this.documentOverlayCache.saveOverlays(e,m,v))}return he.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(c){return Be.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(a=>{const c=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):he.resolve(ga());let u=Hu,h=a;return c.next(m=>he.forEach(m,(g,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),a.get(g)?he.resolve():this.remoteDocumentCache.getEntry(e,g).next(y=>{h=h.insert(g,y)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,h,m,dt())).next(g=>({batchId:u,changes:xT(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Be(t)).next(r=>{let s=xu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let c=xu();return this.indexManager.getCollectionParents(e,a).next(u=>he.forEach(u,h=>{const m=function(v,y){return new za(y,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next(g=>{g.forEach((v,y)=>{c=c.insert(v,y)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s))).next(c=>{a.forEach((h,m)=>{const g=m.getKey();c.get(g)===null&&(c=c.insert(g,qn.newInvalidDocument(g)))});let u=xu();return c.forEach((h,m)=>{const g=a.get(h);g!==void 0&&ku(g.mutation,m,Ir.empty(),qt.now()),Nm(t,m)&&(u=u.insert(h,m))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return he.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Fs(s.createTime)}}(t)),he.resolve()}getNamedQuery(e,t){return he.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(s){return{name:s.name,query:T3(s.bundledQuery),readTime:Fs(s.readTime)}}(t)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(){this.overlays=new en(Be.comparator),this.kr=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ga();return he.forEach(t,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,a)=>{this.wt(e,t,a)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const s=ga(),a=t.length+1,c=new Be(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const h=u.getNext().value,m=h.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&h.largestBatchId>r&&s.set(h.getKey(),h)}return he.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new en((m,g)=>m-g);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let g=a.get(m.largestBatchId);g===null&&(g=ga(),a=a.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const u=ga(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((m,g)=>u.set(m,g)),!(u.size()>=s)););return he.resolve(u)}wt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new r3(t,r));let a=this.kr.get(t);a===void 0&&(a=dt(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(){this.sessionToken=Ln.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(){this.qr=new wn(Cn.Qr),this.$r=new wn(Cn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Cn(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Cn(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){const t=new Be(new Rt([])),r=new Cn(t,e),s=new Cn(t,e+1),a=[];return this.$r.forEachInRange([r,s],c=>{this.Wr(c),a.push(c.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Be(new Rt([])),r=new Cn(t,e),s=new Cn(t,e+1);let a=dt();return this.$r.forEachInRange([r,s],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Cn(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Cn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Be.comparator(e.key,t.key)||at(e.Hr,t.Hr)}static Ur(e,t){return at(e.Hr,t.Hr)||Be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new wn(Cn.Qr)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new n3(a,t,r,s);this.mutationQueue.push(c);for(const u of s)this.Yr=this.Yr.add(new Cn(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return he.resolve(c)}lookupMutationBatch(e,t){return he.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),a=s<0?0:s;return he.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?Hy:this.er-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Cn(t,0),s=new Cn(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,s],c=>{const u=this.Zr(c.Hr);a.push(u)}),he.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wn(at);return t.forEach(s=>{const a=new Cn(s,0),c=new Cn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,c],u=>{r=r.add(u.Hr)})}),he.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;Be.isDocumentKey(a)||(a=a.child(""));const c=new Cn(new Be(a),0);let u=new wn(at);return this.Yr.forEachWhile(h=>{const m=h.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(u=u.add(h.Hr)),!0)},c),he.resolve(this.ei(u))}ei(e){const t=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Nt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return he.forEach(t.mutations,s=>{const a=new Cn(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){const r=new Cn(t,0),s=this.Yr.firstAfterOrEqual(r);return he.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this.ni=e,this.docs=function(){return new en(Be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,c=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():qn.newInvalidDocument(t))}getEntries(e,t){let r=Si();return t.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():qn.newInvalidDocument(s))}),he.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=Si();const c=t.path,u=new Be(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:m,value:{document:g}}=h.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||vV(gV(g),r)<=0||(s.has(g.key)||Nm(t,g))&&(a=a.insert(g.key,g.mutableCopy()))}return he.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Ye(9500)}ri(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new $3(this)}getSize(e){return he.resolve(this.size)}}class $3 extends k3{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e){this.persistence=e,this.ii=new Ba(t=>Qy(t),Yy),this.lastRemoteSnapshotVersion=tt.min(),this.highestTargetId=0,this.si=0,this.oi=new rx,this.targetCount=0,this._i=cc.ar()}forEachTarget(e,t){return this.ii.forEach((r,s)=>t(s)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),he.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new cc(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.hr(t),he.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ii.forEach((c,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.ii.delete(c),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),he.waitFor(a).next(()=>s)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach(c=>{a.push(s.markPotentiallyOrphaned(e,c))}),he.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,t){this.ai={},this.overlays={},this.ui=new _m(0),this.ci=!1,this.ci=!0,this.li=new F3,this.referenceDelegate=e(this),this.hi=new z3(this),this.indexManager=new C3,this.remoteDocumentCache=function(s){return new U3(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new N3(t),this.Ti=new L3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new M3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new V3(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){je("MemoryPersistence","Starting transaction:",e);const s=new B3(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ei(e,t){return he.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class B3 extends xV{constructor(e){super(),this.currentSequenceNumber=e}}class sx{constructor(e){this.persistence=e,this.Ai=new rx,this.Ri=null}static Vi(e){return new sx(e)}get mi(){if(this.Ri)return this.Ri;throw Ye(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.mi,r=>{const s=Be.fromPath(r);return this.fi(e,s).next(a=>{a||t.removeEntry(s,tt.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return he.or([()=>he.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class qf{constructor(e,t){this.persistence=e,this.gi=new Ba(r=>EV(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=R3(this,t)}static Vi(e,t){return new qf(e,t)}Ii(){}di(e){return he.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return he.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(a=>a?he.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,c=>this.Sr(e,c,t).next(u=>{u||(r++,a.removeEntry(c,tt.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),he.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),he.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),he.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ff(e.data.value)),t}Sr(e,t,r){return he.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return he.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=s}static Es(e,t){let r=dt(),s=dt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new ix(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return NL()?8:wV(Kn())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.ps(e,t).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.ys(e,t,s,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new q3;return this.ws(e,t,c).next(u=>{if(a.result=u,this.Rs)return this.Ss(e,t,c,u.size)})}).next(()=>a.result)}Ss(e,t,r,s){return r.documentReadCount<this.Vs?(Dl()<=ut.DEBUG&&je("QueryEngine","SDK will not create cache indexes for query:",Ol(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),he.resolve()):(Dl()<=ut.DEBUG&&je("QueryEngine","Query:",Ol(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Dl()<=ut.DEBUG&&je("QueryEngine","The SDK decides to create cache indexes for query:",Ol(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ms(t))):he.resolve())}ps(e,t){if(qE(t))return he.resolve(null);let r=Ms(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Uv(t,null,"F"),r=Ms(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=dt(...a);return this.gs.getDocuments(e,c).next(u=>this.indexManager.getMinOffset(e,r).next(h=>{const m=this.bs(t,u);return this.Ds(t,m,c,h.readTime)?this.ps(e,Uv(t,null,"F")):this.vs(e,m,t,h)}))})))}ys(e,t,r,s){return qE(t)||s.isEqual(tt.min())?he.resolve(null):this.gs.getDocuments(e,r).next(a=>{const c=this.bs(t,a);return this.Ds(t,c,r,s)?he.resolve(null):(Dl()<=ut.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ol(t)),this.vs(e,c,t,pV(s,Hu)).next(u=>u))})}bs(e,t){let r=new wn(vT(e));return t.forEach((s,a)=>{Nm(e,a)&&(r=r.add(a))}),r}Ds(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,t,r){return Dl()<=ut.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",Ol(t)),this.gs.getDocumentsMatchingQuery(e,t,ko.min(),r)}vs(e,t,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="LocalStore",H3=3e8;class K3{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new en(at),this.Ms=new Ba(a=>Qy(a),Yy),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new O3(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function G3(n,e,t,r){return new K3(n,e,t,r)}async function $T(n,e){const t=rt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],u=[];let h=dt();for(const m of s){c.push(m.batchId);for(const g of m.mutations)h=h.add(g.key)}for(const m of a){u.push(m.batchId);for(const g of m.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(r,h).next(m=>({Bs:m,removedBatchIds:c,addedBatchIds:u}))})})}function Q3(n,e){const t=rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return function(u,h,m,g){const v=m.batch,y=v.keys();let b=he.resolve();return y.forEach(S=>{b=b.next(()=>g.getEntry(h,S)).next(_=>{const x=m.docVersions.get(S);Nt(x!==null,48541),_.version.compareTo(x)<0&&(v.applyToRemoteDocument(_,m),_.isValidDocument()&&(_.setReadTime(m.commitVersion),g.addEntry(_)))})}),b.next(()=>u.mutationQueue.removeMutationBatch(h,v))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=dt();for(let m=0;m<u.mutationResults.length;++m)u.mutationResults[m].transformResults.length>0&&(h=h.add(u.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function zT(n){const e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Y3(n,e){const t=rt(n),r=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const u=[];e.targetChanges.forEach((g,v)=>{const y=s.get(v);if(!y)return;u.push(t.hi.removeMatchingKeys(a,g.removedDocuments,v).next(()=>t.hi.addMatchingKeys(a,g.addedDocuments,v)));let b=y.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(Ln.EMPTY_BYTE_STRING,tt.min()).withLastLimboFreeSnapshotVersion(tt.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,r)),s=s.insert(v,b),function(_,x,A){return _.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=H3?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(y,b,g)&&u.push(t.hi.updateTargetData(a,b))});let h=Si(),m=dt();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(a,g))}),u.push(X3(a,c,e.documentUpdates).next(g=>{h=g.Ls,m=g.ks})),!r.isEqual(tt.min())){const g=t.hi.getLastRemoteSnapshotVersion(a).next(v=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));u.push(g)}return he.waitFor(u).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,h,m)).next(()=>h)}).then(a=>(t.Fs=s,a))}function X3(n,e,t){let r=dt(),s=dt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=Si();return t.forEach((u,h)=>{const m=a.get(u);h.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(u)),h.isNoDocument()&&h.version.isEqual(tt.min())?(e.removeEntry(u,h.readTime),c=c.insert(u,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||h.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(h),c=c.insert(u,h)):je(ox,"Ignoring outdated watch update for ",u,". Current version:",m.version," Watch version:",h.version)}),{Ls:c,ks:s}})}function J3(n,e){const t=rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Hy),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Z3(n,e){const t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.hi.getTargetData(r,e).next(a=>a?(s=a,he.resolve(s)):t.hi.allocateTargetId(r).next(c=>(s=new vo(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function Wv(n,e,t){const r=rt(n),s=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!Tc(c))throw c;je(ox,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function rb(n,e,t){const r=rt(n);let s=tt.min(),a=dt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(h,m,g){const v=rt(h),y=v.Ms.get(g);return y!==void 0?he.resolve(v.Fs.get(y)):v.hi.getTargetData(m,g)}(r,c,Ms(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,u.targetId).next(h=>{a=h})}).next(()=>r.Cs.getDocumentsMatchingQuery(c,e,t?s:tt.min(),t?a:dt())).next(u=>(eU(r,$V(e),u),{documents:u,qs:a})))}function eU(n,e,t){let r=n.xs.get(e)||tt.min();t.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.xs.set(e,r)}class sb{constructor(){this.activeTargetIds=KV()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tU{constructor(){this.Fo=new sb,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new sb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib="ConnectivityMonitor";class ob{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){je(ib,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){je(ib,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh=null;function Hv(){return Gh===null?Gh=function(){return 268435456+Math.round(2147483648*Math.random())}():Gh++,"0x"+Gh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="RestConnection",rU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sU{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Ff?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,a){const c=Hv(),u=this.Go(e,t.toUriEncodedString());je(Vg,`Sending RPC '${e}' ${c}:`,u,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(h,s,a);const{host:m}=new URL(u),g=Va(m);return this.jo(e,u,h,r,g).then(v=>(je(Vg,`Received RPC '${e}' ${c}: `,v),v),v=>{throw ka(Vg,`RPC '${e}' ${c} failed with error: `,v,"url: ",u,"request:",r),v})}Jo(e,t,r,s,a,c){return this.Wo(e,t,r,s,a)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}Go(e,t){const r=rU[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn="WebChannelConnection";class oU extends sU{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,s,a){const c=Hv();return new Promise((u,h)=>{const m=new WN;m.setWithCredentials(!0),m.listenOnce(HN.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case hf.NO_ERROR:const v=m.getResponseJson();je(zn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),u(v);break;case hf.TIMEOUT:je(zn,`RPC '${e}' ${c} timed out`),h(new Te(ce.DEADLINE_EXCEEDED,"Request time out"));break;case hf.HTTP_ERROR:const y=m.getStatus();if(je(zn,`RPC '${e}' ${c} failed with status:`,y,"response text:",m.getResponseText()),y>0){let b=m.getResponseJson();Array.isArray(b)&&(b=b[0]);const S=b==null?void 0:b.error;if(S&&S.status&&S.message){const _=function(A){const I=A.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(I)>=0?I:ce.UNKNOWN}(S.status);h(new Te(_,S.message))}else h(new Te(ce.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Te(ce.UNAVAILABLE,"Connection failed."));break;default:Ye(9055,{c_:e,streamId:c,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{je(zn,`RPC '${e}' ${c} completed.`)}});const g=JSON.stringify(s);je(zn,`RPC '${e}' ${c} sending request:`,s),m.send(t,"POST",g,r,15)})}P_(e,t,r){const s=Hv(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=QN(),u=GN(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(h.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(h.useFetchStreams=!0),this.zo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const g=a.join("");je(zn,`Creating RPC '${e}' stream ${s}: ${g}`,h);const v=c.createWebChannel(g,h);this.T_(v);let y=!1,b=!1;const S=new iU({Ho:x=>{b?je(zn,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(y||(je(zn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),y=!0),je(zn,`RPC '${e}' stream ${s} sending:`,x),v.send(x))},Yo:()=>v.close()}),_=(x,A,I)=>{x.listen(A,C=>{try{I(C)}catch(O){setTimeout(()=>{throw O},0)}})};return _(v,yu.EventType.OPEN,()=>{b||(je(zn,`RPC '${e}' stream ${s} transport opened.`),S.s_())}),_(v,yu.EventType.CLOSE,()=>{b||(b=!0,je(zn,`RPC '${e}' stream ${s} transport closed`),S.__(),this.I_(v))}),_(v,yu.EventType.ERROR,x=>{b||(b=!0,ka(zn,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),S.__(new Te(ce.UNAVAILABLE,"The operation could not be completed")))}),_(v,yu.EventType.MESSAGE,x=>{var A;if(!b){const I=x.data[0];Nt(!!I,16349);const C=I,O=(C==null?void 0:C.error)||((A=C[0])===null||A===void 0?void 0:A.error);if(O){je(zn,`RPC '${e}' stream ${s} received error:`,O);const V=O.status;let B=function(D){const k=dn[D];if(k!==void 0)return IT(k)}(V),P=O.message;B===void 0&&(B=ce.INTERNAL,P="Unknown error status: "+V+" with message "+O.message),b=!0,S.__(new Te(B,P)),v.close()}else je(zn,`RPC '${e}' stream ${s} received:`,I),S.a_(I)}}),_(u,KN.STAT_EVENT,x=>{x.stat===Rv.PROXY?je(zn,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===Rv.NOPROXY&&je(zn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Ug(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(n){return new d3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-r);s>0&&je("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="PersistentStream";class qT{constructor(e,t,r,s,a,c,u,h){this.Fi=e,this.w_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new BT(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(bi(t.toString()),bi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===t&&this.W_(r,s)},r=>{e(()=>{const s=new Te(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return je(ab,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(je(ab,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aU extends qT{constructor(e,t,r,s,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=m3(this.serializer,e),r=function(a){if(!("targetChange"in a))return tt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?tt.min():c.readTime?Fs(c.readTime):tt.min()}(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=qv(this.serializer),t.addTarget=function(a,c){let u;const h=c.target;if(u=Fv(h)?{documents:v3(a,h)}:{query:y3(a,h).Vt},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=PT(a,c.resumeToken);const m=$v(a,c.expectedCount);m!==null&&(u.expectedCount=m)}else if(c.snapshotVersion.compareTo(tt.min())>0){u.readTime=Bf(a,c.snapshotVersion.toTimestamp());const m=$v(a,c.expectedCount);m!==null&&(u.expectedCount=m)}return u}(this.serializer,e);const r=w3(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=qv(this.serializer),t.removeTarget=e,this.k_(t)}}class lU extends qT{constructor(e,t,r,s,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=g3(e.writeResults,e.commitTime),r=Fs(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=qv(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>p3(this.serializer,r))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{}class uU extends cU{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Te(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Wo(e,zv(t,r),s,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Te(ce.UNKNOWN,a.toString())})}Jo(e,t,r,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.Jo(e,zv(t,r),s,c,u,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Te(ce.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class dU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(bi(t),this._a=!1):je("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da="RemoteStore";class hU{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(c=>{r.enqueueAndForget(async()=>{qa(this)&&(je(Da,"Restarting streams for network reachability change."),await async function(h){const m=rt(h);m.Ia.add(4),await pd(m),m.Aa.set("Unknown"),m.Ia.delete(4),await Am(m)}(this))})}),this.Aa=new dU(r,s)}}async function Am(n){if(qa(n))for(const e of n.da)await e(!0)}async function pd(n){for(const e of n.da)await e(!1)}function WT(n,e){const t=rt(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),ux(t)?cx(t):Cc(t).x_()&&lx(t,e))}function ax(n,e){const t=rt(n),r=Cc(t);t.Ta.delete(e),r.x_()&&HT(t,e),t.Ta.size===0&&(r.x_()?r.B_():qa(t)&&t.Aa.set("Unknown"))}function lx(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(tt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Cc(n).H_(e)}function HT(n,e){n.Ra.$e(e),Cc(n).Y_(e)}function cx(n){n.Ra=new a3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Cc(n).start(),n.Aa.aa()}function ux(n){return qa(n)&&!Cc(n).M_()&&n.Ta.size>0}function qa(n){return rt(n).Ia.size===0}function KT(n){n.Ra=void 0}async function fU(n){n.Aa.set("Online")}async function mU(n){n.Ta.forEach((e,t)=>{lx(n,e)})}async function pU(n,e){KT(n),ux(n)?(n.Aa.la(e),cx(n)):n.Aa.set("Unknown")}async function gU(n,e,t){if(n.Aa.set("Online"),e instanceof AT&&e.state===2&&e.cause)try{await async function(s,a){const c=a.cause;for(const u of a.targetIds)s.Ta.has(u)&&(await s.remoteSyncer.rejectListen(u,c),s.Ta.delete(u),s.Ra.removeTarget(u))}(n,e)}catch(r){je(Da,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wf(n,r)}else if(e instanceof gf?n.Ra.Ye(e):e instanceof jT?n.Ra.it(e):n.Ra.et(e),!t.isEqual(tt.min()))try{const r=await zT(n.localStore);t.compareTo(r)>=0&&await function(a,c){const u=a.Ra.Pt(c);return u.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const g=a.Ta.get(m);g&&a.Ta.set(m,g.withResumeToken(h.resumeToken,c))}}),u.targetMismatches.forEach((h,m)=>{const g=a.Ta.get(h);if(!g)return;a.Ta.set(h,g.withResumeToken(Ln.EMPTY_BYTE_STRING,g.snapshotVersion)),HT(a,h);const v=new vo(g.target,h,m,g.sequenceNumber);lx(a,v)}),a.remoteSyncer.applyRemoteEvent(u)}(n,t)}catch(r){je(Da,"Failed to raise snapshot:",r),await Wf(n,r)}}async function Wf(n,e,t){if(!Tc(e))throw e;n.Ia.add(1),await pd(n),n.Aa.set("Offline"),t||(t=()=>zT(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{je(Da,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Am(n)})}function GT(n,e){return e().catch(t=>Wf(n,t,e))}async function Pm(n){const e=rt(n),t=Mo(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Hy;for(;vU(e);)try{const s=await J3(e.localStore,r);if(s===null){e.Pa.length===0&&t.B_();break}r=s.batchId,yU(e,s)}catch(s){await Wf(e,s)}QT(e)&&YT(e)}function vU(n){return qa(n)&&n.Pa.length<10}function yU(n,e){n.Pa.push(e);const t=Mo(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function QT(n){return qa(n)&&!Mo(n).M_()&&n.Pa.length>0}function YT(n){Mo(n).start()}async function xU(n){Mo(n).na()}async function wU(n){const e=Mo(n);for(const t of n.Pa)e.X_(t.mutations)}async function _U(n,e,t){const r=n.Pa.shift(),s=ex.from(r,e,t);await GT(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Pm(n)}async function EU(n,e){e&&Mo(n).Z_&&await async function(r,s){if(function(c){return i3(c)&&c!==ce.ABORTED}(s.code)){const a=r.Pa.shift();Mo(r).N_(),await GT(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Pm(r)}}(n,e),QT(n)&&YT(n)}async function lb(n,e){const t=rt(n);t.asyncQueue.verifyOperationInProgress(),je(Da,"RemoteStore received new credentials");const r=qa(t);t.Ia.add(3),await pd(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Am(t)}async function bU(n,e){const t=rt(n);e?(t.Ia.delete(2),await Am(t)):e||(t.Ia.add(2),await pd(t),t.Aa.set("Unknown"))}function Cc(n){return n.Va||(n.Va=function(t,r,s){const a=rt(t);return a.ia(),new aU(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Zo:fU.bind(null,n),e_:mU.bind(null,n),n_:pU.bind(null,n),J_:gU.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),ux(n)?cx(n):n.Aa.set("Unknown")):(await n.Va.stop(),KT(n))})),n.Va}function Mo(n){return n.ma||(n.ma=function(t,r,s){const a=rt(t);return a.ia(),new lU(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:xU.bind(null,n),n_:EU.bind(null,n),ea:wU.bind(null,n),ta:_U.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Pm(n)):(await n.ma.stop(),n.Pa.length>0&&(je(Da,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new So,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const c=Date.now()+r,u=new dx(e,t,c,s,a);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hx(n,e){if(bi("AsyncQueue",`${e}: ${n}`),Tc(n))return new Te(ce.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{static emptySet(e){return new ql(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Be.comparator(t.key,r.key):(t,r)=>Be.comparator(t.key,r.key),this.keyedMap=xu(),this.sortedSet=new en(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ql)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ql;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(){this.fa=new en(Be.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ye(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class uc{constructor(e,t,r,s,a,c,u,h,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const c=[];return t.forEach(u=>{c.push({type:0,doc:u})}),new uc(e,t,ql.emptySet(t),c,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class NU{constructor(){this.queries=ub(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const s=rt(t),a=s.queries;s.queries=ub(),a.forEach((c,u)=>{for(const h of u.wa)h.onError(r)})})(this,new Te(ce.ABORTED,"Firestore shutting down"))}}function ub(){return new Ba(n=>gT(n),Sm)}async function XT(n,e){const t=rt(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.ba()&&(r=2):(a=new SU,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(s,!0);break;case 1:a.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const u=hx(c,`Initialization of query '${Ol(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&fx(t)}async function JT(n,e){const t=rt(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const c=a.wa.indexOf(e);c>=0&&(a.wa.splice(c,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function TU(n,e){const t=rt(n);let r=!1;for(const s of e){const a=s.query,c=t.queries.get(a);if(c){for(const u of c.wa)u.Ca(s)&&(r=!0);c.ya=s}}r&&fx(t)}function CU(n,e,t){const r=rt(n),s=r.queries.get(e);if(s)for(const a of s.wa)a.onError(t);r.queries.delete(e)}function fx(n){n.Da.forEach(e=>{e.next()})}var Kv,db;(db=Kv||(Kv={})).Fa="default",db.Cache="cache";class ZT{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new uc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=uc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Kv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.key=e}}class tC{constructor(e){this.key=e}}class IU{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=dt(),this.mutatedKeys=dt(),this.Xa=vT(e),this.eu=new ql(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new cb,s=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,c=s,u=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,v)=>{const y=s.get(g),b=Nm(this.query,v)?v:null,S=!!y&&this.mutatedKeys.has(y.key),_=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let x=!1;y&&b?y.data.isEqual(b.data)?S!==_&&(r.track({type:3,doc:b}),x=!0):this.iu(y,b)||(r.track({type:2,doc:b}),x=!0,(h&&this.Xa(b,h)>0||m&&this.Xa(b,m)<0)&&(u=!0)):!y&&b?(r.track({type:0,doc:b}),x=!0):y&&!b&&(r.track({type:1,doc:y}),x=!0,(h||m)&&(u=!0)),x&&(b?(c=c.add(b),a=_?a.add(g):a.delete(g)):(c=c.delete(g),a=a.delete(g)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{eu:c,ru:r,Ds:u,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((g,v)=>function(b,S){const _=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ye(20277,{At:x})}};return _(b)-_(S)}(g.type,v.type)||this.Xa(g.doc,v.doc)),this.su(r),s=s!=null&&s;const u=t&&!s?this.ou():[],h=this.Za.size===0&&this.current&&!s?1:0,m=h!==this.Ya;return this.Ya=h,c.length!==0||m?{snapshot:new uc(this.query,e.eu,a,c,e.mutatedKeys,h===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new cb,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=dt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new tC(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new eC(r))}),t}uu(e){this.Ha=e.qs,this.Za=dt();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return uc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const mx="SyncEngine";class jU{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class AU{constructor(e){this.key=e,this.lu=!1}}class PU{constructor(e,t,r,s,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Ba(u=>gT(u),Sm),this.Tu=new Map,this.Iu=new Set,this.du=new en(Be.comparator),this.Eu=new Map,this.Au=new rx,this.Ru={},this.Vu=new Map,this.mu=cc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function RU(n,e,t=!0){const r=aC(n);let s;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await nC(r,e,t,!0),s}async function kU(n,e){const t=aC(n);await nC(t,e,!0,!1)}async function nC(n,e,t,r){const s=await Z3(n.localStore,Ms(e)),a=s.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let u;return r&&(u=await DU(n,e,a,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&WT(n.remoteStore,s),u}async function DU(n,e,t,r,s){n.gu=(v,y,b)=>async function(_,x,A,I){let C=x.view.nu(A);C.Ds&&(C=await rb(_.localStore,x.query,!1).then(({documents:P})=>x.view.nu(P,C)));const O=I&&I.targetChanges.get(x.targetId),V=I&&I.targetMismatches.get(x.targetId)!=null,B=x.view.applyChanges(C,_.isPrimaryClient,O,V);return fb(_,x.targetId,B._u),B.snapshot}(n,v,y,b);const a=await rb(n.localStore,e,!0),c=new IU(e,a.qs),u=c.nu(a.documents),h=md.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=c.applyChanges(u,n.isPrimaryClient,h);fb(n,t,m._u);const g=new jU(e,t,c);return n.Pu.set(e,g),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function OU(n,e,t){const r=rt(n),s=r.Pu.get(e),a=r.Tu.get(s.targetId);if(a.length>1)return r.Tu.set(s.targetId,a.filter(c=>!Sm(c,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Wv(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&ax(r.remoteStore,s.targetId),Gv(r,s.targetId)}).catch(Nc)):(Gv(r,s.targetId),await Wv(r.localStore,s.targetId,!0))}async function LU(n,e){const t=rt(n),r=t.Pu.get(e),s=t.Tu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ax(t.remoteStore,r.targetId))}async function MU(n,e,t){const r=qU(n);try{const s=await function(c,u){const h=rt(c),m=qt.now(),g=u.reduce((b,S)=>b.add(S.key),dt());let v,y;return h.persistence.runTransaction("Locally write mutations","readwrite",b=>{let S=Si(),_=dt();return h.Os.getEntries(b,g).next(x=>{S=x,S.forEach((A,I)=>{I.isValidDocument()||(_=_.add(A))})}).next(()=>h.localDocuments.getOverlayedDocuments(b,S)).next(x=>{v=x;const A=[];for(const I of u){const C=e3(I,v.get(I.key).overlayedDocument);C!=null&&A.push(new zo(I.key,C,lT(C.value.mapValue),ds.exists(!0)))}return h.mutationQueue.addMutationBatch(b,m,A,u)}).next(x=>{y=x;const A=x.applyToLocalDocumentSet(v,_);return h.documentOverlayCache.saveOverlays(b,x.batchId,A)})}).then(()=>({batchId:y.batchId,changes:xT(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(c,u,h){let m=c.Ru[c.currentUser.toKey()];m||(m=new en(at)),m=m.insert(u,h),c.Ru[c.currentUser.toKey()]=m}(r,s.batchId,t),await gd(r,s.changes),await Pm(r.remoteStore)}catch(s){const a=hx(s,"Failed to persist write");t.reject(a)}}async function rC(n,e){const t=rt(n);try{const r=await Y3(t.localStore,e);e.targetChanges.forEach((s,a)=>{const c=t.Eu.get(a);c&&(Nt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.lu=!0:s.modifiedDocuments.size>0?Nt(c.lu,14607):s.removedDocuments.size>0&&(Nt(c.lu,42227),c.lu=!1))}),await gd(t,r,e)}catch(r){await Nc(r)}}function hb(n,e,t){const r=rt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Pu.forEach((a,c)=>{const u=c.view.va(e);u.snapshot&&s.push(u.snapshot)}),function(c,u){const h=rt(c);h.onlineState=u;let m=!1;h.queries.forEach((g,v)=>{for(const y of v.wa)y.va(u)&&(m=!0)}),m&&fx(h)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function FU(n,e,t){const r=rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Eu.get(e),a=s&&s.key;if(a){let c=new en(Be.comparator);c=c.insert(a,qn.newNoDocument(a,tt.min()));const u=dt().add(a),h=new Im(tt.min(),new Map,new en(at),c,u);await rC(r,h),r.du=r.du.remove(a),r.Eu.delete(e),px(r)}else await Wv(r.localStore,e,!1).then(()=>Gv(r,e,t)).catch(Nc)}async function VU(n,e){const t=rt(n),r=e.batch.batchId;try{const s=await Q3(t.localStore,e);iC(t,r,null),sC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await gd(t,s)}catch(s){await Nc(s)}}async function UU(n,e,t){const r=rt(n);try{const s=await function(c,u){const h=rt(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let g;return h.mutationQueue.lookupMutationBatch(m,u).next(v=>(Nt(v!==null,37113),g=v.keys(),h.mutationQueue.removeMutationBatch(m,v))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,g,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g)).next(()=>h.localDocuments.getDocuments(m,g))})}(r.localStore,e);iC(r,e,t),sC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await gd(r,s)}catch(s){await Nc(s)}}function sC(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function iC(n,e,t){const r=rt(n);let s=r.Ru[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function Gv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||oC(n,r)})}function oC(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(ax(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),px(n))}function fb(n,e,t){for(const r of t)r instanceof eC?(n.Au.addReference(r.key,e),$U(n,r)):r instanceof tC?(je(mx,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||oC(n,r.key)):Ye(19791,{yu:r})}function $U(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(je(mx,"New document in limbo: "+t),n.Iu.add(r),px(n))}function px(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Be(Rt.fromString(e)),r=n.mu.next();n.Eu.set(r,new AU(t)),n.du=n.du.insert(t,r),WT(n.remoteStore,new vo(Ms(Xy(t.path)),r,"TargetPurposeLimboResolution",_m.ue))}}async function gd(n,e,t){const r=rt(n),s=[],a=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach((u,h)=>{c.push(r.gu(h,e,t).then(m=>{var g;if((m||t)&&r.isPrimaryClient){const v=m?!m.fromCache:(g=t==null?void 0:t.targetChanges.get(h.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(h.targetId,v?"current":"not-current")}if(m){s.push(m);const v=ix.Es(h.targetId,m);a.push(v)}}))}),await Promise.all(c),r.hu.J_(s),await async function(h,m){const g=rt(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>he.forEach(m,y=>he.forEach(y.Is,b=>g.persistence.referenceDelegate.addReference(v,y.targetId,b)).next(()=>he.forEach(y.ds,b=>g.persistence.referenceDelegate.removeReference(v,y.targetId,b)))))}catch(v){if(!Tc(v))throw v;je(ox,"Failed to update sequence numbers: "+v)}for(const v of m){const y=v.targetId;if(!v.fromCache){const b=g.Fs.get(y),S=b.snapshotVersion,_=b.withLastLimboFreeSnapshotVersion(S);g.Fs=g.Fs.insert(y,_)}}}(r.localStore,a))}async function zU(n,e){const t=rt(n);if(!t.currentUser.isEqual(e)){je(mx,"User change. New user:",e.toKey());const r=await $T(t.localStore,e);t.currentUser=e,function(a,c){a.Vu.forEach(u=>{u.forEach(h=>{h.reject(new Te(ce.CANCELLED,c))})}),a.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gd(t,r.Bs)}}function BU(n,e){const t=rt(n),r=t.Eu.get(e);if(r&&r.lu)return dt().add(r.key);{let s=dt();const a=t.Tu.get(e);if(!a)return s;for(const c of a){const u=t.Pu.get(c);s=s.unionWith(u.view.tu)}return s}}function aC(n){const e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FU.bind(null,e),e.hu.J_=TU.bind(null,e.eventManager),e.hu.pu=CU.bind(null,e.eventManager),e}function qU(n){const e=rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UU.bind(null,e),e}class Hf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jm(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return G3(this.persistence,new W3,e.initialUser,this.serializer)}Du(e){return new UT(sx.Vi,this.serializer)}bu(e){return new tU}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hf.provider={build:()=>new Hf};class WU extends Hf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Nt(this.persistence.referenceDelegate instanceof qf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new A3(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?fr.withCacheSize(this.cacheSizeBytes):fr.DEFAULT;return new UT(r=>qf.Vi(r,t),this.serializer)}}class Qv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zU.bind(null,this.syncEngine),await bU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new NU}()}createDatastore(e){const t=jm(e.databaseInfo.databaseId),r=function(a){return new oU(a)}(e.databaseInfo);return function(a,c,u,h){return new uU(a,c,u,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,a,c,u){return new hU(r,s,a,c,u)}(this.localStore,this.datastore,e.asyncQueue,t=>hb(this.syncEngine,t,0),function(){return ob.C()?new ob:new nU}())}createSyncEngine(e,t){return function(s,a,c,u,h,m,g){const v=new PU(s,a,c,u,h,m);return g&&(v.fu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const a=rt(s);je(Da,"RemoteStore shutting down."),a.Ia.add(5),await pd(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Qv.provider={build:()=>new Qv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):bi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo="FirestoreClient";class HU{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=hr.UNAUTHENTICATED,this.clientId=qy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{je(Fo,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(je(Fo,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new So;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=hx(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $g(n,e){n.asyncQueue.verifyOperationInProgress(),je(Fo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await $T(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{ka("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{je("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{ka("Terminating Firestore due to IndexedDb database deletion failed",s)})}),n._offlineComponents=e}async function mb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await KU(n);je(Fo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>lb(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>lb(e.remoteStore,s)),n._onlineComponents=e}async function KU(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){je(Fo,"Using user provided OfflineComponentProvider");try{await $g(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===ce.FAILED_PRECONDITION||s.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;ka("Error using user provided cache. Falling back to memory cache: "+t),await $g(n,new Hf)}}else je(Fo,"Using default OfflineComponentProvider"),await $g(n,new WU(void 0));return n._offlineComponents}async function cC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(je(Fo,"Using user provided OnlineComponentProvider"),await mb(n,n._uninitializedComponentsProvider._online)):(je(Fo,"Using default OnlineComponentProvider"),await mb(n,new Qv))),n._onlineComponents}function GU(n){return cC(n).then(e=>e.syncEngine)}async function Yv(n){const e=await cC(n),t=e.eventManager;return t.onListen=RU.bind(null,e.syncEngine),t.onUnlisten=OU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=LU.bind(null,e.syncEngine),t}function QU(n,e,t={}){const r=new So;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,u,h,m){const g=new lC({next:y=>{g.Ou(),c.enqueueAndForget(()=>JT(a,v)),y.fromCache&&h.source==="server"?m.reject(new Te(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(y)},error:y=>m.reject(y)}),v=new ZT(u,g,{includeMetadataChanges:!0,ka:!0});return XT(a,v)}(await Yv(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU="firestore.googleapis.com",gb=!0;class vb{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=YU,this.ssl=gb}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:gb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=FT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VT)throw new Te(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Te(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Te(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Te(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rm{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new oV;switch(r.type){case"firstParty":return new cV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Te(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=pb.get(t);r&&(je("ComponentProvider","Removing Datastore"),pb.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ji(this.firestore,e,this._query)}}class pn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new No(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}toJSON(){return{type:pn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(hd(t,pn._jsonSchema))return new pn(e,r||null,new Be(Rt.fromString(t.referencePath)))}}pn._jsonSchemaVersion="firestore/documentReference/1.0",pn._jsonSchema={type:mn("string",pn._jsonSchemaVersion),referencePath:mn("string")};class No extends ji{constructor(e,t,r){super(e,t,Xy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new Be(e))}withConverter(e){return new No(this.firestore,e,this._path)}}function it(n,e,...t){if(n=gn(n),Wy("collection","path",e),n instanceof Rm){const r=Rt.fromString(e,...t);return AE(r),new No(n,null,r)}{if(!(n instanceof pn||n instanceof No))throw new Te(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rt.fromString(e,...t));return AE(r),new No(n.firestore,null,r)}}function vi(n,e){if(n=Ls(n,Rm),Wy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Te(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ji(n,null,function(r){return new za(Rt.emptyPath(),r)}(e))}function jt(n,e,...t){if(n=gn(n),arguments.length===1&&(e=qy.newId()),Wy("doc","path",e),n instanceof Rm){const r=Rt.fromString(e,...t);return jE(r),new pn(n,null,new Be(r))}{if(!(n instanceof pn||n instanceof No))throw new Te(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rt.fromString(e,...t));return jE(r),new pn(n.firestore,n instanceof No?n.converter:null,new Be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="AsyncQueue";class xb{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new BT(this,"async_queue_retry"),this.oc=()=>{const r=Ug();r&&je(yb,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=Ug();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Ug();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new So;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Tc(e))throw e;je(yb,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,bi("INTERNAL UNHANDLED ERROR: ",wb(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=dx.createAndSchedule(this,e,t,r,a=>this.lc(a));return this.ec.push(s),s}ac(){this.tc&&Ye(47125,{hc:wb(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function wb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(n,["next","error","complete"])}class Oa extends Rm{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new xb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xb(e),this._firestoreClient=void 0,await e}}}function XU(n,e,t){t||(t=Ff);const r=pm(n,"firestore");if(r.isInitialized(t)){const s=r.getImmediate({identifier:t}),a=r.getOptions(t);if(ja(a,e))return s;throw new Te(ce.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Te(ce.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VT)throw new Te(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Va(e.host)&&Ry(e.host),r.initialize({options:e,instanceIdentifier:t})}function gx(n){if(n._terminated)throw new Te(ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||JU(n),n._firestoreClient}function JU(n){var e,t,r;const s=n._freezeSettings(),a=function(u,h,m,g){return new NV(u,h,m,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,uC(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new HU(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zr(Ln.fromBase64String(e))}catch(t){throw new Te(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zr(Ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hd(e,zr._jsonSchema))return zr.fromBase64String(e.bytes)}}zr._jsonSchemaVersion="firestore/bytes/1.0",zr._jsonSchema={type:mn("string",zr._jsonSchemaVersion),bytes:mn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Te(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function ZU(){return new vd(Dv)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return at(this._lat,e._lat)||at(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vs._jsonSchemaVersion}}static fromJSON(e){if(hd(e,Vs._jsonSchema))return new Vs(e.latitude,e.longitude)}}Vs._jsonSchemaVersion="firestore/geoPoint/1.0",Vs._jsonSchema={type:mn("string",Vs._jsonSchemaVersion),latitude:mn("number"),longitude:mn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Us._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hd(e,Us._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Us(e.vectorValues);throw new Te(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Us._jsonSchemaVersion="firestore/vectorValue/1.0",Us._jsonSchema={type:mn("string",Us._jsonSchemaVersion),vectorValues:mn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=/^__.*__$/;class t6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new zo(e,this.data,this.fieldMask,t,this.fieldTransforms):new fd(e,this.data,t,this.fieldTransforms)}}class dC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new zo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ye(40011,{Ec:n})}}class yx{constructor(e,t,r,s,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new yx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Kf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(hC(this.Ec)&&e6.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class n6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||jm(e)}Dc(e,t,r,s=!1){return new yx({Ec:e,methodName:t,bc:r,path:Dn.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xx(n){const e=n._freezeSettings(),t=jm(n._databaseId);return new n6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function r6(n,e,t,r,s,a={}){const c=n.Dc(a.merge||a.mergeFields?2:0,e,t,s);wx("Data must be an object, but it was:",c,r);const u=fC(r,c);let h,m;if(a.merge)h=new Ir(c.fieldMask),m=c.fieldTransforms;else if(a.mergeFields){const g=[];for(const v of a.mergeFields){const y=Xv(e,v,t);if(!c.contains(y))throw new Te(ce.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);pC(g,y)||g.push(y)}h=new Ir(g),m=c.fieldTransforms.filter(v=>h.covers(v.field))}else h=null,m=c.fieldTransforms;return new t6(new mr(u),h,m)}class km extends vx{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof km}}function s6(n,e,t,r){const s=n.Dc(1,e,t);wx("Data must be an object, but it was:",s,r);const a=[],c=mr.empty();$o(r,(h,m)=>{const g=_x(e,h,t);m=gn(m);const v=s.gc(g);if(m instanceof km)a.push(g);else{const y=yd(m,v);y!=null&&(a.push(g),c.set(g,y))}});const u=new Ir(a);return new dC(c,u,s.fieldTransforms)}function i6(n,e,t,r,s,a){const c=n.Dc(1,e,t),u=[Xv(e,r,t)],h=[s];if(a.length%2!=0)throw new Te(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<a.length;y+=2)u.push(Xv(e,a[y])),h.push(a[y+1]);const m=[],g=mr.empty();for(let y=u.length-1;y>=0;--y)if(!pC(m,u[y])){const b=u[y];let S=h[y];S=gn(S);const _=c.gc(b);if(S instanceof km)m.push(b);else{const x=yd(S,_);x!=null&&(m.push(b),g.set(b,x))}}const v=new Ir(m);return new dC(g,v,c.fieldTransforms)}function o6(n,e,t,r=!1){return yd(t,n.Dc(r?4:3,e))}function yd(n,e){if(mC(n=gn(n)))return wx("Unsupported field value:",e,n),fC(n,e);if(n instanceof vx)return function(r,s){if(!hC(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const a=[];let c=0;for(const u of r){let h=yd(u,s.yc(c));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),c++}return{arrayValue:{values:a}}}(n,e)}return function(r,s){if((r=gn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return GV(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=qt.fromDate(r);return{timestampValue:Bf(s.serializer,a)}}if(r instanceof qt){const a=new qt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bf(s.serializer,a)}}if(r instanceof Vs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zr)return{bytesValue:PT(s.serializer,r._byteString)};if(r instanceof pn){const a=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw s.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:nx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Us)return function(c,u){return{mapValue:{fields:{[oT]:{stringValue:aT},[Vf]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw u.wc("VectorValues must only contain numeric values.");return Jy(u.serializer,m)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${wm(r)}`)}(n,e)}function fC(n,e){const t={};return eT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$o(n,(r,s)=>{const a=yd(s,e.Vc(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function mC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof qt||n instanceof Vs||n instanceof zr||n instanceof pn||n instanceof vx||n instanceof Us)}function wx(n,e,t){if(!mC(t)||!JN(t)){const r=wm(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Xv(n,e,t){if((e=gn(e))instanceof vd)return e._internalPath;if(typeof e=="string")return _x(n,e);throw Kf("Field path arguments must be of type string or ",n,!1,void 0,t)}const a6=new RegExp("[~\\*/\\[\\]]");function _x(n,e,t){if(e.search(a6)>=0)throw Kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vd(...e.split("."))._internalPath}catch{throw Kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Kf(n,e,t,r,s){const a=r&&!r.isEmpty(),c=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(a||c)&&(h+=" (found",a&&(h+=` in field ${r}`),c&&(h+=` in document ${s}`),h+=")"),new Te(ce.INVALID_ARGUMENT,u+n+h)}function pC(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new l6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Dm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class l6 extends gC{data(){return super.data()}}function Dm(n,e){return typeof e=="string"?_x(n,e):e instanceof vd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Te(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ex{}class yC extends Ex{}function Ar(n,e,...t){let r=[];e instanceof Ex&&r.push(e),r=r.concat(t),function(a){const c=a.filter(h=>h instanceof bx).length,u=a.filter(h=>h instanceof Om).length;if(c>1||c>0&&u>0)throw new Te(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Om extends yC{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Om(e,t,r)}_apply(e){const t=this._parse(e);return xC(e._query,t),new ji(e.firestore,e.converter,Vv(e._query,t))}_parse(e){const t=xx(e.firestore);return function(a,c,u,h,m,g,v){let y;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new Te(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){bb(v,g);const S=[];for(const _ of v)S.push(Eb(h,a,_));y={arrayValue:{values:S}}}else y=Eb(h,a,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||bb(v,g),y=o6(u,c,v,g==="in"||g==="not-in");return fn.create(m,g,y)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function c6(n,e,t){const r=e,s=Dm("where",n);return Om._create(s,r,t)}class bx extends Ex{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new bx(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ps.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,a){let c=s;const u=a.getFlattenedFilters();for(const h of u)xC(c,h),c=Vv(c,h)}(e._query,t),new ji(e.firestore,e.converter,Vv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Sx extends yC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Sx(e,t)}_apply(e){const t=function(s,a,c){if(s.startAt!==null)throw new Te(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Te(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yu(a,c)}(e._query,this._field,this._direction);return new ji(e.firestore,e.converter,function(s,a){const c=s.explicitOrderBy.concat([a]);return new za(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function xd(n,e="asc"){const t=e,r=Dm("orderBy",n);return Sx._create(r,t)}function Eb(n,e,t){if(typeof(t=gn(t))=="string"){if(t==="")throw new Te(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pT(e)&&t.indexOf("/")!==-1)throw new Te(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Rt.fromString(t));if(!Be.isDocumentKey(r))throw new Te(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return FE(n,new Be(r))}if(t instanceof pn)return FE(n,t._key);throw new Te(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wm(t)}.`)}function bb(n,e){if(!Array.isArray(n)||n.length===0)throw new Te(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xC(n,e){const t=function(s,a){for(const c of s)for(const u of c.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Te(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Te(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class u6{convertValue(e,t="none"){switch(Lo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ln(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return $o(e,(s,a)=>{r[s]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[Vf].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(c=>ln(c.doubleValue));return new Us(a)}convertGeoPoint(e){return new Vs(ln(e.latitude),ln(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=bm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ku(e));default:return null}}convertTimestamp(e){const t=Do(e);return new qt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Rt.fromString(e);Nt(MT(r),9688,{name:e});const s=new Gu(r.get(1),r.get(3)),a=new Be(r.popFirst(5));return s.isEqual(t)||bi(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class _u{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ba extends gC{constructor(e,t,r,s,a,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Dm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ba._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ba._jsonSchemaVersion="firestore/documentSnapshot/1.0",ba._jsonSchema={type:mn("string",ba._jsonSchemaVersion),bundleSource:mn("string","DocumentSnapshot"),bundleName:mn("string"),bundle:mn("string")};class vf extends ba{data(e={}){return super.data(e)}}class Sa{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new _u(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new vf(this._firestore,this._userDataWriter,r.key,r,new _u(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(u=>{const h=new vf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new _u(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>a||u.type!==3).map(u=>{const h=new vf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new _u(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,g=-1;return u.type!==0&&(m=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:h6(u.type),doc:h,oldIndex:m,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Sa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function h6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ye(61501,{type:n})}}Sa._jsonSchemaVersion="firestore/querySnapshot/1.0",Sa._jsonSchema={type:mn("string",Sa._jsonSchemaVersion),bundleSource:mn("string","QuerySnapshot"),bundleName:mn("string"),bundle:mn("string")};class Nx extends u6{constructor(e){super(),this.firestore=e}convertBytes(e){return new zr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,t)}}function Mt(n){n=Ls(n,ji);const e=Ls(n.firestore,Oa),t=gx(e),r=new Nx(e);return vC(n._query),QU(t,n._query).then(s=>new Sa(e,r,n,s))}function hn(n,e,t,...r){n=Ls(n,pn);const s=Ls(n.firestore,Oa),a=xx(s);let c;return c=typeof(e=gn(e))=="string"||e instanceof vd?i6(a,"updateDoc",n._key,e,t,r):s6(a,"updateDoc",n._key,e),Tx(s,[c.toMutation(n._key,ds.exists(!0))])}function Cr(n){return Tx(Ls(n.firestore,Oa),[new Zy(n._key,ds.none())])}function In(n,e){const t=Ls(n.firestore,Oa),r=jt(n),s=d6(n.converter,e);return Tx(t,[r6(xx(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,ds.exists(!1))]).then(()=>r)}function Bo(n,...e){var t,r,s;n=gn(n);let a={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||_b(e[c])||(a=e[c++]);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(_b(e[c])){const v=e[c];e[c]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[c+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[c+2]=(s=v.complete)===null||s===void 0?void 0:s.bind(v)}let h,m,g;if(n instanceof pn)m=Ls(n.firestore,Oa),g=Xy(n._key.path),h={next:v=>{e[c]&&e[c](f6(m,n,v))},error:e[c+1],complete:e[c+2]};else{const v=Ls(n,ji);m=Ls(v.firestore,Oa),g=v._query;const y=new Nx(m);h={next:b=>{e[c]&&e[c](new Sa(m,y,v,b))},error:e[c+1],complete:e[c+2]},vC(n._query)}return function(y,b,S,_){const x=new lC(_),A=new ZT(b,x,S);return y.asyncQueue.enqueueAndForget(async()=>XT(await Yv(y),A)),()=>{x.Ou(),y.asyncQueue.enqueueAndForget(async()=>JT(await Yv(y),A))}}(gx(m),g,u,h)}function Tx(n,e){return function(r,s){const a=new So;return r.asyncQueue.enqueueAndForget(async()=>MU(await GU(r),s,a)),a.promise}(gx(n),e)}function f6(n,e,t){const r=t.docs.get(e._key),s=new Nx(n);return new ba(n,s,e._key,r,new _u(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){Sc=s})(Ua),Aa(new Ro("firestore",(r,{instanceIdentifier:s,options:a})=>{const c=r.getProvider("app").getImmediate(),u=new Oa(new aV(r.getProvider("auth-internal")),new uV(c,r.getProvider("app-check-internal")),function(m,g){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Te(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gu(m.options.projectId,g)}(c,s),c);return a=Object.assign({useFetchStreams:t},a),u._setSettings(a),u},"PUBLIC").setMultipleInstances(!0)),ks(NE,TE,e),ks(NE,TE,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="firebasestorage.googleapis.com",m6="storageBucket",p6=2*60*1e3,g6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends Gs{constructor(e,t,r=0){super(zg(e),`Firebase Storage: ${t} (${zg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var qs;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(qs||(qs={}));function zg(n){return"storage/"+n}function v6(){const n="An unknown error occurred, please check the error payload for server response.";return new Qs(qs.UNKNOWN,n)}function y6(){return new Qs(qs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function x6(){return new Qs(qs.CANCELED,"User canceled the upload/download.")}function w6(n){return new Qs(qs.INVALID_URL,"Invalid URL '"+n+"'.")}function _6(n){return new Qs(qs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Sb(n){return new Qs(qs.INVALID_ARGUMENT,n)}function _C(){return new Qs(qs.APP_DELETED,"The Firebase app was deleted.")}function E6(n){return new Qs(qs.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=us.makeFromUrl(e,t)}catch{return new us(e,"")}if(r.path==="")return r;throw _6(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+s+c,"i"),h={bucket:1,path:3};function m(O){O.path_=decodeURIComponent(O.path)}const g="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",b=new RegExp(`^https?://${v}/${g}/b/${s}/o${y}`,"i"),S={bucket:1,path:3},_=t===wC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,x="([^?#]*)",A=new RegExp(`^https?://${_}/${s}/${x}`,"i"),C=[{regex:u,indices:h,postModify:a},{regex:b,indices:S,postModify:m},{regex:A,indices:{bucket:1,path:2},postModify:m}];for(let O=0;O<C.length;O++){const V=C[O],B=V.regex.exec(e);if(B){const P=B[V.indices.bucket];let R=B[V.indices.path];R||(R=""),r=new us(P,R),V.postModify(r);break}}if(r==null)throw w6(e);return r}}class b6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(n,e,t){let r=1,s=null,a=null,c=!1,u=0;function h(){return u===2}let m=!1;function g(...x){m||(m=!0,e.apply(null,x))}function v(x){s=setTimeout(()=>{s=null,n(b,h())},x)}function y(){a&&clearTimeout(a)}function b(x,...A){if(m){y();return}if(x){y(),g.call(null,x,...A);return}if(h()||c){y(),g.call(null,x,...A);return}r<64&&(r*=2);let C;u===1?(u=2,C=0):C=(r+Math.random())*1e3,v(C)}let S=!1;function _(x){S||(S=!0,y(),!m&&(s!==null?(x||(u=2),clearTimeout(s),v(0)):x||(u=1)))}return v(0),a=setTimeout(()=>{c=!0,_(!0)},t),_}function N6(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T6(n){return n!==void 0}function Nb(n,e,t,r){if(r<e)throw Sb(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Sb(`Invalid value for '${n}'. Expected ${t} or less.`)}function C6(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Gf;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Gf||(Gf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,t,r,s,a,c,u,h,m,g,v,y=!0,b=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=h,this.timeout_=m,this.progressCallback_=g,this.connectionFactory_=v,this.retry=y,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,_)=>{this.resolve_=S,this.reject_=_,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Qh(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const c=u=>{const h=u.loaded,m=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,m)};this.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const u=a.getErrorCode()===Gf.NO_ERROR,h=a.getStatus();if(!u||I6(h,this.additionalRetryCodes_)&&this.retry){const g=a.getErrorCode()===Gf.ABORT;r(!1,new Qh(!1,null,g));return}const m=this.successCodes_.indexOf(h)!==-1;r(!0,new Qh(m,a))})},t=(r,s)=>{const a=this.resolve_,c=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());T6(h)?a(h):a()}catch(h){c(h)}else if(u!==null){const h=v6();h.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,h)):c(h)}else if(s.canceled){const h=this.appDelete_?_C():x6();c(h)}else{const h=y6();c(h)}};this.canceled_?t(!1,new Qh(!1,null,!0)):this.backoffId_=S6(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&N6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function A6(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function P6(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function R6(n,e){e&&(n["X-Firebase-GMPID"]=e)}function k6(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function D6(n,e,t,r,s,a,c=!0,u=!1){const h=C6(n.urlParams),m=n.url+h,g=Object.assign({},n.headers);return R6(g,e),A6(g,t),P6(g,a),k6(g,r),new j6(m,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,c,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function L6(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t){this._service=e,t instanceof us?this._location=t:this._location=us.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Qf(e,t)}get root(){const e=new us(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return L6(this._location.path)}get storage(){return this._service}get parent(){const e=O6(this._location.path);if(e===null)return null;const t=new us(this._location.bucket,e);return new Qf(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw E6(e)}}function Tb(n,e){const t=e==null?void 0:e[m6];return t==null?null:us.makeFromBucketSpec(t,n)}function M6(n,e,t,r={}){n.host=`${e}:${t}`;const s=Va(e);s&&(Ry(`https://${n.host}/b`),rN("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:gL(a,n.app.options.projectId))}class F6{constructor(e,t,r,s,a,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=c,this._bucket=null,this._host=wC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=p6,this._maxUploadRetryTime=g6,this._requests=new Set,s!=null?this._bucket=us.makeFromBucketSpec(s,this._host):this._bucket=Tb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=us.makeFromBucketSpec(this._url,e):this._bucket=Tb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Nb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Nb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if($r(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qf(this,e)}_makeRequest(e,t,r,s,a=!0){if(this._deleted)return new b6(_C());{const c=D6(e,this._appId,r,s,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const Cb="@firebase/storage",Ib="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="storage";function V6(n=aN(),e){n=gn(n);const r=pm(n,EC).getImmediate({identifier:e}),s=mL("storage");return s&&U6(r,...s),r}function U6(n,e,t,r={}){M6(n,e,t,r)}function $6(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new F6(t,r,s,e,Ua)}function z6(){Aa(new Ro(EC,$6,"PUBLIC").setMultipleInstances(!0)),ks(Cb,Ib,""),ks(Cb,Ib,"esm2017")}z6();const B6={apiKey:"AIzaSyDUR89i6kvh3bp51GCgBX0fTwh3bFt1Ksg",authDomain:"medjust-d26eb.firebaseapp.com",projectId:"medjust-d26eb",storageBucket:"medjust-d26eb.appspot.com",messagingSenderId:"631362355665",appId:"1:631362355665:web:4d7f8eadba1bca0969e0f0"},Cx=oN(B6),Bg=tV(Cx),$e=XU(Cx,{experimentalForceLongPolling:!0,useFetchStreams:!1});V6(Cx);const bC=E.createContext(void 0);function Ix(){const n=E.useContext(bC);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function q6({children:n}){const[e,t]=E.useState(null),[r,s]=E.useState(!0),[a,c]=E.useState(null),u=v=>new Promise(y=>setTimeout(y,v)),h=async(v,y)=>{if(typeof navigator<"u"&&!navigator.onLine){const x=new Error("No network connection (navigator offline)");throw console.error("Login pre-check failed:",x),c("No network connection - please connect to the internet"),x}const b=3;let S=0,_=null;for(;S<b;){S+=1;try{await UM(Bg,v,y),c(null);return}catch(x){if(_=x,console.error(`Login attempt ${S} failed:`,x),!((x==null?void 0:x.code)==="auth/network-request-failed"||(x==null?void 0:x.message)&&x.message.toLowerCase().includes("fetch")))throw(x==null?void 0:x.code)==="auth/wrong-password"||(x==null?void 0:x.code)==="auth/user-not-found"?c("Invalid email or password"):c("Authentication error - see console for details"),x;if(c(`Network error (attempt ${S} of ${b}) - checking connection...`),S<b){const I=500*Math.pow(2,S-1);console.log(`Retrying login in ${I}ms...`),await u(I);continue}}}throw console.error("Login failed after retries:",_),c("Network error - unable to reach Firebase. Check your internet connection, disabling browser extensions (adblockers), or ensure your site domain is added to Firebase Authentication -> Authorized domains."),_},m=async()=>{try{await qM(Bg),c(null)}catch(v){console.error("Logout error:",v),t(null)}};E.useEffect(()=>{const v=setTimeout(()=>{r&&(console.log("ðŸ”„ Auth taking too long - continuing without authentication"),s(!1))},5e3),y=BM(Bg,b=>{clearTimeout(v),t(b),s(!1),c(null)},b=>{clearTimeout(v),console.error("Auth state change error:",b),c("Authentication error - working offline"),s(!1)});return()=>{clearTimeout(v),y()}},[]);const g={currentUser:e,login:h,logout:m,loading:r,authError:a};return l.jsx(bC.Provider,{value:g,children:!r&&n})}const W6=rd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),re=E.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},a)=>{const c=r?Ta:"button";return l.jsx(c,{className:et(W6({variant:e,size:t,className:n})),ref:a,...s})});re.displayName="Button";const xe=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:et("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));xe.displayName="Card";const Ge=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:et("flex flex-col space-y-1.5 p-6",n),...e}));Ge.displayName="CardHeader";const Xe=E.forwardRef(({className:n,...e},t)=>l.jsx("h3",{ref:t,className:et("text-2xl font-semibold leading-none tracking-tight",n),...e}));Xe.displayName="CardTitle";const At=E.forwardRef(({className:n,...e},t)=>l.jsx("p",{ref:t,className:et("text-sm text-muted-foreground",n),...e}));At.displayName="CardDescription";const we=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:et("p-6 pt-0",n),...e}));we.displayName="CardContent";const H6=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:et("flex items-center p-6 pt-0",n),...e}));H6.displayName="CardFooter";class K6 extends Ee.Component{constructor(t){super(t);J0(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),window.location.replace(window.location.href)});this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("ErrorBoundary caught an error:",t,r),(t.message.includes("fetch")||t.message.includes("Firebase")||t.message.includes("Firestore"))&&console.log("ðŸ”„ Firebase error detected - this is a known connectivity issue"),this.setState({error:t,errorInfo:r})}render(){var t,r,s;if(this.state.hasError){const a=((t=this.state.error)==null?void 0:t.message.includes("fetch"))||((r=this.state.error)==null?void 0:r.message.includes("Firebase"))||((s=this.state.error)==null?void 0:s.message.includes("Firestore"));return l.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:l.jsxs(xe,{className:"max-w-md w-full",children:[l.jsx(Ge,{children:l.jsxs(Xe,{className:"flex items-center gap-2 text-destructive",children:[l.jsx(IR,{className:"h-5 w-5"}),a?"Connection Error":"Application Error"]})}),l.jsxs(we,{className:"space-y-4",children:[l.jsx("p",{className:"text-muted-foreground",children:a?"There's a connectivity issue with Firebase services. The app will work in offline mode.":"Something went wrong. Please try refreshing the page."}),!1,l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(re,{onClick:this.handleRetry,className:"flex-1",children:[l.jsx(NR,{className:"h-4 w-4 mr-2"}),"Retry"]}),l.jsx(re,{variant:"outline",onClick:()=>window.location.href="/admin/years",className:"flex-1",children:"Go to Years"})]})]})]})})}return this.props.children}}var jx="Avatar",[G6,Mz]=Ti(jx),[Q6,SC]=G6(jx),NC=E.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,a]=E.useState("idle");return l.jsx(Q6,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:l.jsx(Ke.span,{...r,ref:e})})});NC.displayName=jx;var TC="AvatarImage",CC=E.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...a}=n,c=SC(TC,t),u=Y6(r),h=_n(m=>{s(m),c.onImageLoadingStatusChange(m)});return Gt(()=>{u!=="idle"&&h(u)},[u,h]),u==="loaded"?l.jsx(Ke.img,{...a,ref:e,src:r}):null});CC.displayName=TC;var IC="AvatarFallback",jC=E.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,a=SC(IC,t),[c,u]=E.useState(r===void 0);return E.useEffect(()=>{if(r!==void 0){const h=window.setTimeout(()=>u(!0),r);return()=>window.clearTimeout(h)}},[r]),c&&a.imageLoadingStatus!=="loaded"?l.jsx(Ke.span,{...s,ref:e}):null});jC.displayName=IC;function Y6(n){const[e,t]=E.useState("idle");return Gt(()=>{if(!n){t("error");return}let r=!0;const s=new window.Image,a=c=>()=>{r&&t(c)};return t("loading"),s.onload=a("loaded"),s.onerror=a("error"),s.src=n,()=>{r=!1}},[n]),e}var AC=NC,PC=CC,RC=jC;const dc=E.forwardRef(({className:n,...e},t)=>l.jsx(AC,{ref:t,className:et("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));dc.displayName=AC.displayName;const Zu=E.forwardRef(({className:n,...e},t)=>l.jsx(PC,{ref:t,className:et("aspect-square h-full w-full",n),...e}));Zu.displayName=PC.displayName;const hc=E.forwardRef(({className:n,...e},t)=>l.jsx(RC,{ref:t,className:et("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));hc.displayName=RC.displayName;const X6=[{icon:_R,label:"Dashboard",path:"/admin"},{icon:_f,label:"News",path:"/admin/news"},{icon:ls,label:"Years",path:"/admin/years"},{icon:ec,label:"Users",path:"/admin/users"},{icon:ec,label:"Professors",path:"/admin/professors"},{icon:gy,label:"Store",path:"/admin/store"},{icon:$s,label:"Orders",path:"/admin/orders"},{icon:yi,label:"Research",path:"/admin/research"},{icon:Lu,label:"Maps",path:"/admin/maps"},{icon:$1,label:"Settings",path:"/admin/settings"}];function J6({isOpen:n}){return l.jsx("div",{className:et("fixed left-0 top-16 h-[calc(100vh-4rem)] bg-card border-r transition-all duration-300 z-40",n?"w-64":"w-16"),children:l.jsx("nav",{className:"p-4 space-y-2",children:X6.map(e=>l.jsxs("div",{children:[l.jsxs(W_,{to:e.path,className:({isActive:t})=>et("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors","hover:bg-accent hover:text-accent-foreground",t&&"bg-primary text-primary-foreground hover:bg-primary/90",!n&&"justify-center"),children:[l.jsx(e.icon,{className:"h-5 w-5 flex-shrink-0"}),n&&l.jsx("span",{className:"font-medium",children:e.label})]}),e.children&&n&&l.jsx("div",{className:"ml-6 mt-2 space-y-1",children:e.children.map(t=>l.jsxs(W_,{to:t.path,className:({isActive:r})=>et("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors text-sm","hover:bg-accent hover:text-accent-foreground",r&&"bg-primary text-primary-foreground hover:bg-primary/90"),children:[l.jsx(t.icon,{className:"h-4 w-4 flex-shrink-0"}),l.jsx("span",{children:t.label})]},t.path))})]},e.path))})})}function Z6(){var a;const[n,e]=E.useState(!0),{currentUser:t,logout:r}=Ix(),s=async()=>{try{await r()}catch(c){console.error("Error logging out:",c)}};return l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-card shadow-sm",children:l.jsxs("div",{className:"flex h-16 items-center px-4",children:[l.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e(!n),className:"mr-4",children:l.jsx(SR,{className:"h-5 w-5"})}),l.jsx("div",{className:"flex-1",children:l.jsx("h1",{className:"text-xl font-semibold text-primary",children:"MedJust Admin Dashboard"})}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(dc,{className:"h-8 w-8",children:l.jsx(hc,{children:l.jsx(po,{className:"h-4 w-4"})})}),l.jsx("span",{className:"text-sm font-medium",children:((a=t==null?void 0:t.email)==null?void 0:a.split("@")[0])||"Admin"})]}),l.jsx(re,{variant:"ghost",size:"icon",onClick:s,className:"text-muted-foreground hover:text-destructive",children:l.jsx(bR,{className:"h-4 w-4"})})]})]})}),l.jsxs("div",{className:"flex",children:[l.jsx(J6,{isOpen:n}),l.jsx("main",{className:`flex-1 transition-all duration-300 ${n?"ml-64":"ml-16"}`,children:l.jsx("div",{className:"p-6",children:l.jsx(BO,{})})})]})]})}const ke=E.forwardRef(({className:n,type:e,...t},r)=>l.jsx("input",{type:e,className:et("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));ke.displayName="Input";var e5="Label",kC=E.forwardRef((n,e)=>l.jsx(Ke.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));kC.displayName=e5;var DC=kC;const t5=rd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ae=E.forwardRef(({className:n,...e},t)=>l.jsx(DC,{ref:t,className:et(t5(),n),...e}));Ae.displayName=DC.displayName;const n5=rd("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),OC=E.forwardRef(({className:n,variant:e,...t},r)=>l.jsx("div",{ref:r,role:"alert",className:et(n5({variant:e}),n),...t}));OC.displayName="Alert";const r5=E.forwardRef(({className:n,...e},t)=>l.jsx("h5",{ref:t,className:et("mb-1 font-medium leading-none tracking-tight",n),...e}));r5.displayName="AlertTitle";const LC=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:et("text-sm [&_p]:leading-relaxed",n),...e}));LC.displayName="AlertDescription";function s5(){const[n,e]=E.useState(""),[t,r]=E.useState(""),[s,a]=E.useState(""),[c,u]=E.useState(!1),{login:h,authError:m}=Ix(),g=wc(),v=async y=>{if(y.preventDefault(),!n||!t){a("Please fill in all fields");return}try{if(typeof navigator<"u"&&!navigator.onLine){a("No network connection. Please connect to the internet and try again.");return}a(""),u(!0),await h(n,t),g("/admin")}catch(b){console.error("Login error:",b),m?a(m):(b==null?void 0:b.code)==="auth/network-request-failed"?a("Network error - check your connection and try again."):(b==null?void 0:b.code)==="auth/wrong-password"||(b==null?void 0:b.code)==="auth/user-not-found"?a("Invalid email or password."):a("Failed to log in. Please check your credentials.")}finally{u(!1)}};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-secondary/20 flex items-center justify-center p-4",children:l.jsxs(xe,{className:"w-full max-w-md shadow-xl",children:[l.jsxs(Ge,{className:"space-y-1 text-center",children:[l.jsx("div",{className:"mx-auto w-12 h-12 bg-primary rounded-lg flex items-center justify-center mb-4",children:l.jsx(g_,{className:"h-6 w-6 text-primary-foreground"})}),l.jsx(Xe,{className:"text-2xl font-bold",children:"MedJust Admin"}),l.jsx(At,{children:"Sign in to access the admin dashboard"})]}),l.jsx(we,{children:l.jsxs("form",{onSubmit:v,className:"space-y-4",children:[s&&l.jsx(OC,{variant:"destructive",children:l.jsx(LC,{children:s})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"email",children:"Email"}),l.jsxs("div",{className:"relative",children:[l.jsx(wf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(ke,{id:"email",type:"email",placeholder:"MedAdmin@gmail.com",value:n,onChange:y=>e(y.target.value),className:"pl-10",required:!0})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"password",children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(g_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(ke,{id:"password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:t,onChange:y=>r(y.target.value),className:"pl-10",required:!0})]})]}),l.jsx(re,{type:"submit",className:"w-full",disabled:c,children:c?l.jsxs(l.Fragment,{children:[l.jsx(Co,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})})]})})}const i5=rd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function rn({className:n,variant:e,...t}){return l.jsx("div",{className:et(i5({variant:e}),n),...t})}const o5=[{id:"1",title:"Revolutionary Gene Therapy Shows Promise in Cancer Treatment",content:"Recent studies demonstrate significant progress in targeted gene therapy for various cancer types. This breakthrough research could change how we approach oncological treatments in the future.",authorName:"Dr. Sarah Johnson",authorId:"user1",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15"),tags:["oncology","gene-therapy","research"],isPinned:!0,viewsCount:1247,attachments:[],imageUrl:"https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=300&h=200&fit=crop"},{id:"2",title:"Medical Education Technology Trends for 2024",content:"Exploring the latest innovations in medical education platforms, including VR simulations, AI-powered learning, and interactive case studies that are transforming how medical students learn.",authorName:"Prof. Michael Chen",authorId:"user2",createdAt:new Date("2024-01-14"),updatedAt:new Date("2024-01-14"),tags:["education","technology","trends"],isPinned:!1,viewsCount:892,attachments:[],imageUrl:"https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=300&h=200&fit=crop"},{id:"3",title:"New Guidelines for Emergency Medicine Protocols",content:"Updated protocols for emergency medical procedures and best practices have been released. These guidelines incorporate the latest research and improve patient care outcomes.",authorName:"Dr. Emily Rodriguez",authorId:"user3",createdAt:new Date("2024-01-13"),updatedAt:new Date("2024-01-13"),tags:["emergency","protocols","guidelines"],isPinned:!1,viewsCount:654,attachments:["protocol-guide.pdf"],imageUrl:"https://images.unsplash.com/photo-1551190822-a9333d879b1f?w=300&h=200&fit=crop"}];function Ax(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,a]=E.useState(null);return E.useEffect(()=>{const m=Ar(it($e,"news"),xd("updatedAt","desc")),g=Bo(m,v=>{const y=[];v.forEach(b=>{var _,x;const S=b.data();y.push({id:b.id,title:S.title||"",content:S.content||"",imageUrl:S.imageUrl||"",videoUrl:S.videoUrl||"",createdAt:((_=S.createdAt)==null?void 0:_.toDate())||new Date,updatedAt:((x=S.updatedAt)==null?void 0:x.toDate())||new Date,authorName:S.authorName||"",authorId:S.newsId||b.id,tags:S.tags||[],isPinned:S.isPinned||!1,viewsCount:S.viewsCount||0,attachments:S.attachments||[],yearId:S.yearId||"",yearNumber:S.yearNumber||void 0})}),e(y),r(!1)},v=>{console.error("Error fetching news:",v),console.log("Using mock data for news"),e(o5),a(null),r(!1)});return()=>g()},[]),{news:n,loading:t,error:s,createNews:async m=>{try{await In(it($e,"news"),m)}catch(g){console.error("Error creating news:",g);const v={id:`mock_${Date.now()}`,...m,createdAt:new Date,updatedAt:new Date,viewsCount:0,attachments:m.attachments||[]};e(y=>[v,...y]),console.log("Added news to mock data:",v)}},updateNews:async(m,g)=>{try{await hn(jt($e,"news",m),g)}catch(v){console.error("Error updating news:",v),e(y=>y.map(b=>b.id===m?{...b,...g,updatedAt:new Date}:b)),console.log("Updated news in mock data")}},deleteNews:async m=>{try{await Cr(jt($e,"news",m))}catch(g){console.error("Error deleting news:",g),e(v=>v.filter(y=>y.id!==m)),console.log("Removed news from mock data")}}}}function MC(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,a]=E.useState(null),[c,u]=E.useState(!1),h=[{id:"product1",productId:"product1",name:"Medical Textbook",description:"Comprehensive medical textbook for students",price:89.99,images:["https://example.com/book1.jpg"],categoryId:"books",createdAt:new Date},{id:"product2",productId:"product2",name:"Stethoscope",description:"Professional grade stethoscope",price:120,images:["https://example.com/stethoscope.jpg"],categoryId:"equipment",createdAt:new Date}];E.useEffect(()=>{(async()=>{const S=setTimeout(()=>{t&&!c&&(console.log("ðŸ”„ Firebase taking too long - switching to offline mode"),u(!0),r(!1),a("Working in offline mode - Firebase unavailable"),e(h))},3e3);try{console.log("ðŸ”„ Fetching products from Firebase...");const _=await Mt(it($e,"products")),x=[];_.forEach(A=>{var C;const I=A.data();x.push({id:A.id,productId:I.productId||A.id,name:I.name||"",description:I.description||"",price:I.price||0,types:I.types||(I.price?[{name:"Default",price:I.price}]:[]),images:I.images||[],categoryId:I.categoryId||"",createdAt:((C=I.createdAt)==null?void 0:C.toDate())||new Date})}),clearTimeout(S),e(x.sort((A,I)=>I.createdAt.getTime()-A.createdAt.getTime())),r(!1),a(null),console.log("âœ… Products loaded successfully:",x.length)}catch(_){clearTimeout(S),_.isFirebaseOfflineError?console.log("ðŸ”„ Firebase offline mode detected - using mock data"):console.error("Firebase error - switching to offline mode:",_.message),u(!0),r(!1),a("Working in offline mode - Firebase unavailable"),e(h)}})()},[]);const m=async b=>{var S,_;if(c){const x={id:`product_${Date.now()}`,productId:`product_${Date.now()}`,...b,createdAt:new Date};e(A=>[x,...A]),console.log("âœ… Added product to offline mode:",x.name);return}try{const x={name:b.name,description:b.description,price:b.price||((_=(S=b.types)==null?void 0:S[0])==null?void 0:_.price)||0,types:b.types||(b.price?[{name:"Default",price:b.price}]:[]),images:b.images,categoryId:b.categoryId||"",createdAt:new Date,productId:""};console.log("ðŸ“ Creating new product:",x);const A=await In(it($e,"products"),x);await hn(A,{productId:A.id}),console.log("âœ… Created product with ID:",A.id),window.location.replace(window.location.href)}catch(x){console.error("Error creating product:",x),u(!0),await m(b)}};return{products:n,loading:t,error:s,isOfflineMode:c,createProduct:m,updateProduct:async(b,S)=>{var _;if(c){e(x=>x.map(A=>A.id===b?{...A,...S}:A)),console.log("âœ… Updated product in offline mode");return}try{const x=jt($e,"products",b),A={...S};S.types&&(A.types=S.types,A.price=((_=S.types[0])==null?void 0:_.price)||S.price||0),await hn(x,A),console.log("âœ… Updated product in Firebase:",b),window.location.replace(window.location.href)}catch(x){console.error("Error updating product:",x)}},deleteProduct:async b=>{if(c){e(S=>S.filter(_=>_.id!==b)),console.log("âœ… Deleted product from offline mode");return}try{await Cr(jt($e,"products",b)),console.log("âœ… Deleted product from Firebase:",b),window.location.replace(window.location.href)}catch(S){console.error("Error deleting product:",S)}},retryConnection:()=>{console.log("ðŸ”„ Retrying Firebase connection..."),r(!0),a(null),u(!1),window.location.replace(window.location.href)}}}const a5=[{id:"1",name:"Dr. Sarah Johnson",department:"Internal Medicine",email:"sarah.johnson@medjust.com",officeLocation:"Medical Building, Room 301",imageUrl:"https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=300&h=300&fit=crop&crop=face"},{id:"2",name:"Prof. Michael Chen",department:"Surgery",email:"michael.chen@medjust.com",officeLocation:"Surgical Wing, Room 205",imageUrl:"https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=300&h=300&fit=crop&crop=face"},{id:"3",name:"Dr. Emily Rodriguez",department:"Emergency Medicine",email:"emily.rodriguez@medjust.com",officeLocation:"Emergency Department, Office 12",imageUrl:"https://images.unsplash.com/photo-1594824928909-90ad1d93d7c3?w=300&h=300&fit=crop&crop=face"}];function FC(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,a]=E.useState(null),[c,u]=E.useState(!1);E.useEffect(()=>{const v=async()=>{try{const b=Ar(it($e,"professors"));await Mt(b);const S=Ar(it($e,"professors"),xd("name","asc"));return Bo(S,x=>{const A=[];x.forEach(I=>{const C=I.data();A.push({id:I.id,name:C.name||"",title:C.title||"",department:C.department||"",email:C.email||"",phone:C.phone||"",officeLocation:C.officeLocation||"",bio:C.bio||"",researchAreas:C.researchAreas||[],website:C.website||"",linkedin:C.linkedin||"",imageUrl:C.imageUrl||""})}),e(A),r(!1)},x=>{console.error("Error in Firebase listener:",x),y()})}catch(b){return console.error("Firebase connection failed:",b),y(),null}},y=()=>{console.log("ðŸ”„ Switching to offline mode with mock data"),u(!0),e(a5),a(null),r(!1)};v()},[]);const h=async v=>{if(c){const y={id:`offline_${Date.now()}`,...v};e(b=>[...b,y]),console.log("âœ… Added professor in offline mode:",y.name);return}try{await In(it($e,"professors"),{...v,professorId:`prof_${Date.now()}`}),console.log("âœ… Added professor to Firebase:",v.name)}catch(y){console.error("Error creating professor:",y),u(!0),await h(v)}};return{professors:n,loading:t,error:s,createProfessor:h,updateProfessor:async(v,y)=>{if(c||v.startsWith("offline_")||v.startsWith("mock_")){e(b=>b.map(S=>S.id===v?{...S,...y}:S)),console.log("âœ… Updated professor in offline mode");return}try{await hn(jt($e,"professors",v),y),console.log("âœ… Updated professor in Firebase")}catch(b){console.error("Error updating professor:",b),e(S=>S.map(_=>_.id===v?{..._,...y}:_)),console.log("âœ… Updated professor locally (Firebase failed)")}},deleteProfessor:async v=>{if(c||v.startsWith("offline_")||v.startsWith("mock_")){e(y=>y.filter(b=>b.id!==v)),console.log("âœ… Deleted professor in offline mode");return}try{await Cr(jt($e,"professors",v)),console.log("âœ… Deleted professor from Firebase")}catch(y){console.error("Error deleting professor:",y),e(b=>b.filter(S=>S.id!==v)),console.log("âœ… Deleted professor locally (Firebase failed)")}},isOfflineMode:c}}function Ic(){const[n,e]=E.useState([]),[t,r]=E.useState([]),[s,a]=E.useState([]),[c,u]=E.useState(!0),[h,m]=E.useState(null),[g,v]=E.useState(!1),[y,b]=E.useState(1),[S,_]=E.useState("connecting"),x=()=>{console.log("ðŸ”„ Activating offline mode immediately"),v(!0),_("offline"),u(!1),m(null),e([{id:"offline_year1",yearNumber:1,type:"basic",batchName:"",subjects:[]},{id:"offline_year2",yearNumber:2,type:"basic",batchName:"",subjects:[]},{id:"offline_year3",yearNumber:3,type:"basic",batchName:"",subjects:[]},{id:"offline_year4",yearNumber:4,type:"clinical",batchName:"",subjects:[]},{id:"offline_year5",yearNumber:5,type:"clinical",batchName:"",subjects:[]},{id:"offline_year6",yearNumber:6,type:"clinical",batchName:"",subjects:[]}]),a([])};E.useEffect(()=>{},[]),E.useEffect(()=>{(async()=>{var J,X,q;if(!navigator.onLine){console.log("ðŸš« No internet connection detected - activating offline mode"),x();return}_("connecting"),u(!0);try{console.log("ðŸ”„ Attempting Firebase connection...");const Q=await Mt(it($e,"batches"));let Z=[];const U=[];for(const ve of Q.docs){const de=ve.data(),me=ve.id,Se=de.batch_name||de.batchName||"";U.push({id:me,batchName:Se,imageUrl:de.image_url||de.imageUrl||"",aca_supervisor:de.aca_supervisor||de.acadmic_supervisor||de.academic_supervisor||"",cr:de.cr||"",actor:de.actor||"",group_link:de.group_link||de.groupUrl||de.group_url||""});try{(await Mt(it(ve.ref,"years"))).forEach(Ce=>{const De=Ce.data();let Ue=De.order||1;if(De.name){const bt=String(De.name).match(/\d+/);bt&&(Ue=parseInt(bt[0]))}Z.push({id:Ce.id,yearNumber:Ue,name:De.name||De.title||"",type:Ue<=3?"basic":"clinical",batchName:Se,imageUrl:De.imageUrl||De.image_url||"",academicSupervisor:De.aca_supervisor||De.acadmic_supervisor||De.academic_supervisor||"",actor:De.actor||"",cr:De.cr||"",groupUrl:De.group_link||De.group_url||De.groupUrl||"",subjects:[],batchId:me})})}catch(Pe){console.warn("Failed to fetch years for batch",me,Pe)}}r(U),typeof yearsSnapshot<"u"&&yearsSnapshot&&!yearsSnapshot.empty&&yearsSnapshot.forEach(ve=>{const de=ve.data();let me=de.order||1;if(de.name){const Se=de.name.match(/\d+/);Se&&(me=parseInt(Se[0]))}Z.push({id:ve.id,yearNumber:me,name:de.name||de.title||"",type:me<=3?"basic":"clinical",batchName:de.batch_name||de.batchName||"",imageUrl:de.imageUrl||de.image_url||"",academicSupervisor:de.aca_supervisor||de.acadmic_supervisor||de.academic_supervisor||"",actor:de.actor||"",cr:de.cr||"",groupUrl:de.group_url||de.groupUrl||"",subjects:[]})});const Y=await Mt(it($e,"Subjects")),le=[];for(const ve of Y.docs){const de=ve.data(),me=await Mt(it(ve.ref,"lectures")),Se=[];for(const Pe of me.docs){const Ce=Pe.data(),De=await Mt(it(Pe.ref,"videos")),Ue=[];De.forEach(Tt=>{var wt;const St=Tt.data();Ue.push({id:Tt.id,title:St.title||St.name||"",url:St.url||"",thumbnailUrl:St.thumbnailUrl||"",description:St.description||"",uploadedAt:((wt=St.uploadedAt)==null?void 0:wt.toDate())||new Date})});const bt=await Mt(it(Pe.ref,"files")),kt=[];bt.forEach(Tt=>{var wt;const St=Tt.data();kt.push({id:Tt.id,title:St.title||St.name||"",url:St.url||"",description:St.description||"",uploadedAt:((wt=St.uploadedAt)==null?void 0:wt.toDate())||new Date})});const sn=await Mt(it(Pe.ref,"quizzes")),Ft=[];sn.forEach(Tt=>{const St=Tt.data();Ft.push({id:Tt.id,title:St.title||St.name||"",description:St.description||"",duration:St.duration||30,passRate:St.passRate||70,questions:St.questions||[]})}),Se.push({id:Pe.id,name:Ce.name||Ce.title||"",description:Ce.description||"",subjectId:ve.id,order:Ce.order||1,imageUrl:Ce.imageUrl||"",createdAt:((J=Ce.createdAt)==null?void 0:J.toDate())||new Date,uploadedBy:Ce.uploadedBy||"Unknown",videos:Ue,files:kt,quizzes:Ft})}le.push({id:ve.id,name:de.name||"",subjectId:de.subjectId||ve.id,yearId:de.yearId||"",imageUrl:de.imageUrl||"",lectures:Se.sort((Pe,Ce)=>Pe.order-Ce.order)})}const be=Z.map(ve=>({...ve,subjects:le.filter(de=>de.yearId===ve.id).sort((de,me)=>de.name.localeCompare(me.name))}));e(be.sort((ve,de)=>ve.yearNumber-de.yearNumber)),a(be.flatMap(ve=>ve.subjects)),u(!1),v(!1),_("connected"),m(null),console.log("âœ… Firebase data loaded successfully");try{if(navigator.onLine)for(const ve of Q.docs)try{const de=await Mt(it(ve.ref,"years"));for(const me of de.docs){const Se=me.data(),Pe=jt(it(ve.ref,"years"),me.id),Ce={};if(Se.imageUrl===void 0&&(Ce.imageUrl=""),Se.batch_name===void 0&&Se.batchName===void 0&&(Ce.batch_name=((X=ve.data())==null?void 0:X.batch_name)||((q=ve.data())==null?void 0:q.batchName)||""),Object.keys(Ce).length>0)try{await hn(Pe,Ce),console.log(`ðŸ”„ Set missing fields for year ${me.id}:`,Ce)}catch(De){console.warn(`Failed to set defaults for ${me.id}:`,De)}}}catch(de){console.warn("Could not ensure fields for years under batch",ve.id,de)}}catch(ve){console.warn("Could not ensure imageUrl fields:",ve)}}catch{console.log("âŒ Firebase connection failed - staying in offline mode"),x()}})()},[y]);const A=()=>{console.log("ï¿½ï¿½ï¿½ Retrying Firebase connection..."),u(!0),m(null),v(!1),_("connecting"),b(K=>K+1)},I=async(K,J)=>{if(K){if(g||!navigator.onLine){e(X=>X.map(q=>q.id===K?{...q,...J}:q));return}try{const X=vi($e,"years"),Q=(await Mt(X)).docs.find(Z=>Z.id===K);if(Q){await hn(Q.ref,{...J,updatedAt:new Date}),b(Z=>Z+1);return}e(Z=>Z.map(U=>U.id===K?{...U,...J}:U))}catch(X){console.error("Error updating year:",X),e(q=>q.map(Q=>Q.id===K?{...Q,...J}:Q))}}},C=async(K,J)=>{if(K){if(g||!navigator.onLine){r(X=>X.map(q=>q.id===K?{...q,...J}:q));return}try{const X=jt($e,"batches",K);await hn(X,{...J,updatedAt:new Date}),b(q=>q+1)}catch(X){console.error("Failed to update batch:",X),r(q=>q.map(Q=>Q.id===K?{...Q,...J}:Q))}}},O=async(K,J=3)=>{for(let X=0;X<J;X++)try{return await K()}catch(q){if(console.log(`Attempt ${X+1} failed:`,q.message),X===J-1)throw q;await new Promise(Q=>setTimeout(Q,1e3*(X+1)))}},V=async K=>{if(g||!navigator.onLine){const J={id:`subject_${Date.now()}`,name:K.name,subjectId:`subject_${Date.now()}`,yearId:K.yearId,imageUrl:K.imageUrl||"",lectures:[]};a(X=>[...X,J]),e(X=>X.map(q=>q.id===K.yearId?{...q,subjects:[...q.subjects,J]}:q)),console.log("âœ… Added subject to offline mode:",J.name);return}try{console.log("ðŸ”„ Creating subject with data:",K),await O(async()=>{const J="7RpQaRoWKFLKiPA7A9Aq",X=jt($e,"Subjects",J);await hn(X,{name:K.name,imageUrl:K.imageUrl||"",hours:K.hours||3,yearId:K.yearId,subjectId:J,updatedAt:new Date}),console.log("âœ… Updated existing subject document:",J);const q=it(X,"lectures");if((await Mt(q)).empty){const U=await In(q,{name:"Sample Lecture",title:"Sample Lecture",description:"",imageUrl:"",order:1,uploadedBy:"System",createdAt:new Date,lectureId:""});await hn(U,{lectureId:U.id});const Y=["videos","files","quizzes"];for(const le of Y){const be=it(U,le);let ve={};le==="videos"?ve={title:"Sample Video",description:"",thumbnailUrl:"",url:"",uploadedAt:new Date,videoId:""}:le==="files"?ve={title:"Sample File",description:"",url:"",uploadedAt:new Date,fileId:""}:le==="quizzes"&&(ve={title:"Sample Quiz",description:"",duration:30,passRate:70,questions:[],quizId:""});const de=await In(be,ve),me=`${le.slice(0,-1)}Id`;await hn(de,{[me]:de.id})}console.log("âœ… Created complete lecture structure for subject:",J)}b(Z=>Z+1)})}catch(J){console.error("Error creating subject:",J),v(!0),await V(K)}},B=async K=>{if(g){const J={id:`lecture_${Date.now()}`,...K};a(X=>X.map(q=>q.id===K.subjectId?{...q,lectures:[...q.lectures,J]}:q)),e(X=>X.map(q=>({...q,subjects:q.subjects.map(Q=>Q.id===K.subjectId?{...Q,lectures:[...Q.lectures,J]}:Q)}))),console.log("âœ… Added lecture to offline mode:",J.name);return}try{await O(async()=>{const J=jt($e,"Subjects",K.subjectId),X=it(J,"lectures"),q={title:K.name,description:K.description||"",imageUrl:K.imageUrl||"",order:K.order||1,uploadedBy:K.uploadedBy||"Current User",createdAt:new Date,lectureId:""};console.log("ðŸ“ Creating lecture in subcollection:",q);const Q=await In(X,q);await hn(Q,{lectureId:Q.id}),console.log("âœ… Created lecture document with ID:",Q.id),console.log("ðŸ“ Path: /Subjects/"+K.subjectId+"/lectures/"+Q.id),b(Z=>Z+1)})}catch(J){console.error("Error creating lecture:",J),v(!0),await B(K)}},P=async(K,J)=>{if(g){a(X=>X.map(q=>q.id===K?{...q,lectures:q.lectures.filter(Q=>Q.id!==J)}:q)),e(X=>X.map(q=>({...q,subjects:q.subjects.map(Q=>Q.id===K?{...Q,lectures:Q.lectures.filter(Z=>Z.id!==J)}:Q)}))),console.log("âœ… Deleted lecture from offline mode");return}try{const X=jt($e,"Subjects",K),q=jt(X,"lectures",J);await Cr(q),console.log("âœ… Deleted lecture from Firebase"),b(Q=>Q+1)}catch(X){console.error("Error deleting lecture:",X)}},R=async K=>{if(K){if(g){a(J=>J.filter(X=>X.id!==K)),e(J=>J.map(X=>({...X,subjects:X.subjects.filter(q=>q.id!==K)}))),console.log("âœ… Deleted subject in offline mode");return}try{const J=jt($e,"Subjects",K);await Cr(J),console.log("âœ… Deleted subject from Firebase"),b(X=>X+1)}catch(J){console.error("Error deleting subject:",J)}}},D=async(K,J,X)=>{if(!(!K||!J)){if(g){e(q=>q.map(Q=>({...Q,subjects:Q.subjects.map(Z=>Z.id===K?{...Z,lectures:Z.lectures.map(U=>U.id===J?{...U,videos:[...U.videos||[],{id:`video_${Date.now()}`,title:X.title,url:X.url,thumbnailUrl:X.thumbnailUrl||"",description:X.description||"",uploadedAt:new Date}]}:U)}:Z)})));return}try{const q=jt($e,"Subjects",K,"lectures",J);await In(it(q,"videos"),{title:X.title,description:X.description||"",url:X.url,duration:X.duration||"",thumbnailUrl:X.thumbnailUrl||"",platform:X.platform||"",uploadedAt:new Date,uploadedBy:"Current User"}),b(Q=>Q+1)}catch(q){console.error("Error adding video:",q)}}},k=async(K,J,X)=>{if(!(!K||!J)){if(g){e(q=>q.map(Q=>({...Q,subjects:Q.subjects.map(Z=>Z.id===K?{...Z,lectures:Z.lectures.map(U=>U.id===J?{...U,files:[...U.files||[],{id:`file_${Date.now()}`,title:X.title,url:X.fileUrl,description:X.description||"",uploadedAt:new Date}]}:U)}:Z)})));return}try{const q=jt($e,"Subjects",K,"lectures",J);await In(it(q,"files"),{title:X.title,description:X.description||"",url:X.fileUrl,fileType:X.fileType||"",fileSize:X.fileSize||"",uploadedAt:new Date,uploadedBy:"Current User"}),b(Q=>Q+1)}catch(q){console.error("Error adding file:",q)}}},$=async(K,J,X)=>{if(!(!K||!J)){if(g){e(q=>q.map(Q=>({...Q,subjects:Q.subjects.map(Z=>Z.id===K?{...Z,lectures:Z.lectures.map(U=>U.id===J?{...U,quizzes:[...U.quizzes||[],{id:`quiz_${Date.now()}`,title:X.title,description:X.description||"",duration:X.timeLimit||30,passRate:X.passingScore||70,questions:X.questions||[]}]}:U)}:Z)})));return}try{const q=jt($e,"Subjects",K,"lectures",J);await In(it(q,"quizzes"),{title:X.title,description:X.description||"",duration:X.timeLimit||30,passRate:X.passingScore||70,questions:X.questions||[],createdAt:new Date,uploadedBy:"Current User"}),b(Q=>Q+1)}catch(q){console.error("Error adding quiz:",q)}}},z=async(K,J={})=>{const X=J.yearNumber||1,q=J.name||`Year ${X}`,Q=J.type||(X<=3?"basic":"clinical");if(g||!navigator.onLine){const Z={id:`year_${Date.now()}`,yearNumber:X,name:q,type:Q,batchName:"",batchId:K||void 0,imageUrl:"",academicSupervisor:"",actor:"",cr:"",groupUrl:"",subjects:[]};e(U=>[...U,Z]),K&&r(U=>U.map(Y=>Y.id===K?{...Y}:Y)),console.log("âœ… Added year in offline mode:",Z);return}try{await O(async()=>{if(K){const Z=jt($e,"batches",K),U=it(Z,"years"),Y=await In(U,{name:q,order:X,imageUrl:"",batch_name:q,createdAt:new Date});try{await hn(Y,{yearId:Y.id})}catch{}}else{const Z=it($e,"years"),U=await In(Z,{name:q,order:X,imageUrl:"",batch_name:q,createdAt:new Date});try{await hn(U,{yearId:U.id})}catch{}}b(Z=>Z+1)})}catch(Z){console.error("Error creating year:",Z),v(!0),await z(K,J)}};return{years:n,batches:t,subjects:s,loading:c,error:h,isOfflineMode:g,connectionStatus:S,retryConnection:A,updateYear:I,updateBatch:C,createSubject:V,createLecture:B,createYear:z,createBatch:async(K={})=>{const J=K.batchName||"New Batch",X=K.imageUrl||"",q=K.cr||"",Q=`batch_temp_${Date.now()}`,Z={id:Q,batchName:J,imageUrl:X,cr:q};if(r(U=>[Z,...U]),g||!navigator.onLine){console.log("âœ… Added batch in offline mode:",Z);return}try{await O(async()=>{const U=it($e,"batches"),Y=await In(U,{batch_name:J,image_url:X,cr:q,createdAt:new Date});try{await hn(Y,{batchId:Y.id})}catch{}const le={id:Y.id,batchName:J,imageUrl:X,cr:q};r(be=>[le,...be.filter(ve=>ve.id!==Q)]),b(be=>be+1)})}catch(U){console.error("Error creating batch:",U),r(le=>le.filter(be=>be.id!==Q)),v(!0);const Y={id:`batch_${Date.now()}`,batchName:J,imageUrl:X,cr:q};r(le=>[Y,...le])}},deleteBatch:async(K,J={deleteYears:!0})=>{if(!K)return;const X=t,q=n;if(r(Q=>Q.filter(Z=>Z.id!==K)),e(Q=>Q.filter(Z=>(Z.batchId||Z.batch_name)!==K)),g||!navigator.onLine){console.log("âœ… Removed batch in offline mode:",K);return}try{await O(async()=>{const Q=jt($e,"batches",K);if(J.deleteYears)try{const Z=it(Q,"years"),U=await Mt(Z);for(const Y of U.docs)await Cr(Y.ref)}catch{const U=vi($e,"years"),Y=await Mt(U);for(const le of Y.docs){const be=le.data();(be.batchId||be.batch_id)===K&&await Cr(le.ref)}}else{const Z=vi($e,"years"),U=await Mt(Z);for(const Y of U.docs){const le=Y.data();if((le.batchId||le.batch_id)===K)try{await hn(Y.ref,{batchId:null,batch_name:null})}catch{}}}await Cr(Q),b(Z=>Z+1)})}catch(Q){throw console.error("Error deleting batch:",Q),r(X||[]),e(q||[]),Q}},deleteLecture:P,deleteSubject:R,addVideo:D,addFile:k,addQuiz:$}}const l5=[{id:1,type:"news",title:"New cardiology study published",time:"2 hours ago",author:"Dr. Smith"},{id:2,type:"video",title:"Anatomy lecture uploaded",time:"4 hours ago",author:"Prof. Johnson"},{id:3,type:"quiz",title:"Pharmacology quiz created",time:"6 hours ago",author:"Dr. Brown"},{id:4,type:"product",title:"New stethoscope added to store",time:"1 day ago",author:"Admin"}];function c5(){const{news:n,loading:e}=Ax(),{products:t,loading:r}=MC(),{professors:s,loading:a}=FC(),{years:c,loading:u}=Ic(),h=n.length,m=s.length,g=t.reduce((b,S)=>b+(S.price||0),0);c.reduce((b,S)=>b+S.subjects.reduce((_,x)=>_+x.lectures.reduce((A,I)=>{var C;return A+(((C=I.videos)==null?void 0:C.length)||0)},0),0),0);const v=c.reduce((b,S)=>{var _;return b+(((_=S.subjects)==null?void 0:_.length)||0)},0),y=[{title:"Total News Articles",value:e?"...":String(h),change:"+12%",icon:_f,color:"text-blue-600"},{title:"Subjects",value:u?"...":String(v),change:"+5%",icon:ls,color:"text-green-600"},{title:"Active Professors",value:a?"...":String(m),change:"+2%",icon:ec,color:"text-purple-600"},{title:"Store Revenue",value:r?"...":`$${g.toLocaleString()}`,change:"+18%",icon:V1,color:"text-emerald-600"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard"}),l.jsx("p",{className:"text-muted-foreground",children:"Welcome to the MedJust Admin Dashboard"})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:y.map(b=>l.jsxs(xe,{children:[l.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Xe,{className:"text-sm font-medium",children:b.title}),l.jsx(b.icon,{className:`h-4 w-4 ${b.color}`})]}),l.jsxs(we,{children:[l.jsx("div",{className:"text-2xl font-bold",children:b.value}),l.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[l.jsxs(rn,{variant:"secondary",className:"text-green-600",children:[l.jsx(CR,{className:"h-3 w-3 mr-1"}),b.change]}),l.jsx("span",{className:"text-muted-foreground",children:"from last month"})]})]})]},b.title))}),l.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Recent Activity"}),l.jsx(At,{children:"Latest updates across all modules"})]}),l.jsx(we,{children:l.jsx("div",{className:"space-y-4",children:l5.map(b=>l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium",children:b.title}),l.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[l.jsx("span",{children:b.author}),l.jsx("span",{children:"â€¢"}),l.jsx("span",{children:b.time})]})]})]},b.id))})})]}),l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Quick Actions"}),l.jsx(At,{children:"Common administrative tasks"})]}),l.jsx(we,{children:l.jsxs("div",{className:"grid gap-2",children:[l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(_f,{className:"h-5 w-5 text-blue-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Create News Article"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Publish new content"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(Rs,{className:"h-5 w-5 text-green-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Upload Video"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Add learning resource"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(ec,{className:"h-5 w-5 text-purple-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Add Professor"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Register new faculty"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(gy,{className:"h-5 w-5 text-emerald-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Add Product"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Expand store catalog"})]})]})]})})]})]})]})}const Ni=E.forwardRef(({className:n,...e},t)=>l.jsx("textarea",{className:et("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));Ni.displayName="Textarea";function VC(n){const e=E.useRef({value:n,previous:n});return E.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var Px="Switch",[u5,Fz]=Ti(Px),[d5,h5]=u5(Px),UC=E.forwardRef((n,e)=>{const{__scopeSwitch:t,name:r,checked:s,defaultChecked:a,required:c,disabled:u,value:h="on",onCheckedChange:m,...g}=n,[v,y]=E.useState(null),b=xt(e,I=>y(I)),S=E.useRef(!1),_=v?!!v.closest("form"):!0,[x=!1,A]=Ca({prop:s,defaultProp:a,onChange:m});return l.jsxs(d5,{scope:t,checked:x,disabled:u,children:[l.jsx(Ke.button,{type:"button",role:"switch","aria-checked":x,"aria-required":c,"data-state":BC(x),"data-disabled":u?"":void 0,disabled:u,value:h,...g,ref:b,onClick:ze(n.onClick,I=>{A(C=>!C),_&&(S.current=I.isPropagationStopped(),S.current||I.stopPropagation())})}),_&&l.jsx(f5,{control:v,bubbles:!S.current,name:r,value:h,checked:x,required:c,disabled:u,style:{transform:"translateX(-100%)"}})]})});UC.displayName=Px;var $C="SwitchThumb",zC=E.forwardRef((n,e)=>{const{__scopeSwitch:t,...r}=n,s=h5($C,t);return l.jsx(Ke.span,{"data-state":BC(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});zC.displayName=$C;var f5=n=>{const{control:e,checked:t,bubbles:r=!0,...s}=n,a=E.useRef(null),c=VC(t),u=cS(e);return E.useEffect(()=>{const h=a.current,m=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==t&&v){const y=new Event("click",{bubbles:r});v.call(h,t),h.dispatchEvent(y)}},[c,t,r]),l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...s,tabIndex:-1,ref:a,style:{...n.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function BC(n){return n?"checked":"unchecked"}var qC=UC,m5=zC;const WC=E.forwardRef(({className:n,...e},t)=>l.jsx(qC,{className:et("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...e,ref:t,children:l.jsx(m5,{className:et("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));WC.displayName=qC.displayName;function p5({news:n,onClose:e,onSave:t}){var x,A,I;const{years:r}=Ic(),[s,a]=E.useState(null),[c,u]=E.useState({title:"",content:"",imageUrl:"",videoUrl:"",tags:[],isPinned:!1,attachments:[],yearId:"",subjectId:""}),[h,m]=E.useState(""),[g,v]=E.useState(!1);E.useEffect(()=>{n&&u({title:n.title||"",content:n.content||"",imageUrl:n.imageUrl||"",videoUrl:n.videoUrl||"",tags:n.tags||[],isPinned:n.isPinned||!1,attachments:n.attachments||[],yearId:n.yearId||"",subjectId:n.subjectId||""})},[n]),E.useEffect(()=>{let C=!0;return(async()=>{try{if(r&&r.length>0||s)return;const V=await Mt(vi($e,"years")),B=[];V.forEach(P=>{const R=P.data();let D=R.order||1;if(R.name){const k=String(R.name).match(/\d+/);k&&(D=parseInt(k[0]))}B.push({id:P.id,yearNumber:D,type:D<=3?"basic":"clinical",subjects:R.subjects||[]})}),C&&B.length>0&&a(B)}catch{}})(),()=>{C=!1}},[r,s]);const y=async C=>{C.preventDefault(),v(!0);try{const O={...c,yearNumber:void 0,updatedAt:new Date,...n?{}:{createdAt:new Date,authorName:"Current User",authorId:"current-user-id",viewsCount:0}};if(c.yearId){const V=r.find(B=>B.id===c.yearId);V&&(O.yearNumber=V.yearNumber)}c.subjectId&&(O.subjectId=c.subjectId),t(O)}catch(O){console.error("Error saving news:",O)}finally{v(!1)}},b=()=>{h.trim()&&!c.tags.includes(h.trim())&&(u(C=>({...C,tags:[...C.tags,h.trim()]})),m(""))},S=C=>{u(O=>({...O,tags:O.tags.filter(V=>V!==C)}))},_=C=>{C.key==="Enter"&&(C.preventDefault(),b())};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(re,{variant:"ghost",onClick:e,children:[l.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Article":"Create Article"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update the news article details":"Create a new news article for medical students"})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(WC,{id:"pinned",checked:c.isPinned,onCheckedChange:C=>u(O=>({...O,isPinned:C}))}),l.jsxs(Ae,{htmlFor:"pinned",className:"flex items-center gap-2",children:[l.jsx(U1,{className:"h-4 w-4"}),"Pin Article"]})]})})]}),l.jsx("form",{onSubmit:y,className:"space-y-6",children:l.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Article Content"}),l.jsx(At,{children:"Main article information and content"})]}),l.jsxs(we,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"title",children:"Title *"}),l.jsx(ke,{id:"title",placeholder:"Enter article title...",value:c.title,onChange:C=>u(O=>({...O,title:C.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"content",children:"Content *"}),l.jsx(Ni,{id:"content",placeholder:"Write your article content here...",value:c.content,onChange:C=>u(O=>({...O,content:C.target.value})),rows:12,required:!0})]})]})]}),l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Tags"}),l.jsx(At,{children:"Add relevant tags to help categorize this article"})]}),l.jsxs(we,{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx(ke,{placeholder:"Add a tag...",value:h,onChange:C=>m(C.target.value),onKeyPress:_}),l.jsxs(re,{type:"button",onClick:b,variant:"outline",children:[l.jsx(Cu,{className:"h-4 w-4 mr-2"}),"Add"]})]}),c.tags.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map(C=>l.jsxs(rn,{variant:"secondary",className:"flex items-center gap-1",children:[C,l.jsx("button",{type:"button",onClick:()=>S(C),className:"ml-1 hover:text-destructive",children:l.jsx(tc,{className:"h-3 w-3"})})]},C))})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Media"}),l.jsx(At,{children:"Add images and videos to your article"})]}),l.jsxs(we,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"imageUrl",children:"Featured Image URL"}),l.jsx(ke,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:c.imageUrl,onChange:C=>u(O=>({...O,imageUrl:C.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"videoUrl",children:"Video URL"}),l.jsx(ke,{id:"videoUrl",placeholder:"https://youtube.com/watch?v=...",value:c.videoUrl,onChange:C=>u(O=>({...O,videoUrl:C.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"yearId",children:"Related Year"}),l.jsxs("select",{id:"yearId",value:c.yearId,onChange:C=>u(O=>({...O,yearId:C.target.value,subjectId:""})),className:"w-full border rounded px-3 py-2",children:[l.jsx("option",{value:"",children:"-- Not related to a specific year --"}),(s&&s.length>0?s:r)&&(s&&s.length>0?s:r).length>0?(s&&s.length>0?s:r).map(C=>l.jsx("option",{value:C.id,children:`Year ${C.yearNumber}`},C.id)):l.jsx("option",{value:"",children:"No years available"})]})]}),c.yearId&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(Ae,{htmlFor:"subjectId",children:"Related Subject"}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Selected year: ",(x=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))!=null&&x.yearNumber?`Year ${(A=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))==null?void 0:A.yearNumber}`:""]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{id:"subjectId",value:c.subjectId,onChange:C=>u(O=>({...O,subjectId:C.target.value})),className:"flex-1 border rounded px-3 py-2",children:[l.jsx("option",{value:"",children:"-- Not related to a specific subject --"}),(((I=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))==null?void 0:I.subjects)||[]).map(C=>l.jsx("option",{value:C.id,children:C.name},C.id))]}),l.jsx(re,{type:"button",variant:"outline",size:"sm",onClick:()=>{var C;(C=navigator.clipboard)==null||C.writeText(c.yearId||""),alert("Year id copied")},children:"Copy ID"})]})]}),c.imageUrl&&l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{children:"Preview"}),l.jsx("img",{src:c.imageUrl,alt:"Preview",className:"w-full h-32 object-cover rounded-lg border",onError:C=>{C.currentTarget.style.display="none"}})]})]})]}),l.jsxs(xe,{children:[l.jsx(Ge,{children:l.jsx(Xe,{children:"Actions"})}),l.jsxs(we,{className:"space-y-4",children:[l.jsxs(re,{type:"submit",className:"w-full",disabled:g,children:[l.jsx(Vo,{className:"h-4 w-4 mr-2"}),g?"Saving...":n?"Update Article":"Create Article"]}),l.jsx(re,{type:"button",variant:"outline",className:"w-full",onClick:e,children:"Cancel"})]})]})]})]})})]})}function g5(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[s,a]=E.useState(!1),[c,u]=E.useState("all"),{news:h,loading:m,error:g,createNews:v,updateNews:y,deleteNews:b}=Ax(),S=h.filter(I=>I.title.toLowerCase().includes(n.toLowerCase())||I.tags.some(C=>C.toLowerCase().includes(n.toLowerCase()))),_=I=>{r(I),a(!0)},x=async I=>{if(window.confirm("Are you sure you want to delete this article?"))try{await b(I)}catch(C){console.error("Error deleting news:",C),alert("Failed to delete article. Please try again.")}},A=()=>{r(null),a(!0)};return s?l.jsx(p5,{news:t,onClose:()=>{a(!1),r(null)},onSave:async I=>{try{t?await y(t.id,I):await v(I),a(!1),r(null)}catch(C){console.error("Error saving news:",C),alert("Failed to save article. Please try again.")}}}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"News Management"}),l.jsx("p",{className:"text-muted-foreground",children:"Create and manage news articles for medical students"})]}),l.jsxs(re,{onClick:A,className:"flex items-center gap-2",children:[l.jsx(Jt,{className:"h-4 w-4"}),"Create Article"]})]}),l.jsx(xe,{children:l.jsx(we,{className:"pt-6",children:l.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:l.jsxs("div",{className:"relative flex-1",children:[l.jsx(mc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(ke,{placeholder:"Search articles by title or tags...",value:n,onChange:I=>e(I.target.value),className:"pl-10"})]})})})}),m&&l.jsx(xe,{children:l.jsxs(we,{className:"text-center py-12",children:[l.jsx(Co,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading news articles..."})]})}),g&&l.jsx(xe,{children:l.jsxs(we,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading news"}),l.jsx("p",{className:"text-muted-foreground",children:g})]})}),!m&&!g&&l.jsx("div",{className:"space-y-4",children:S.map(I=>l.jsx(xe,{className:"hover:shadow-md transition-shadow",children:l.jsx(we,{className:"pt-6",children:l.jsxs("div",{className:"flex gap-4",children:[I.imageUrl&&l.jsx("img",{src:I.imageUrl,alt:I.title,className:"w-24 h-24 object-cover rounded-lg flex-shrink-0"}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:I.title}),I.isPinned&&l.jsx(U1,{className:"h-4 w-4 text-yellow-500"})]}),l.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mb-3",children:I.content}),l.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:I.tags.map(C=>l.jsxs(rn,{variant:"secondary",className:"text-xs",children:[l.jsx(Cu,{className:"h-3 w-3 mr-1"}),C]},C))}),l.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(po,{className:"h-3 w-3"}),I.authorName]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(M1,{className:"h-3 w-3"}),I.createdAt.toLocaleDateString()]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(xR,{className:"h-3 w-3"}),I.viewsCount," views"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx(re,{variant:"ghost",size:"icon",onClick:()=>_(I),children:l.jsx(sd,{className:"h-4 w-4"})}),l.jsx(re,{variant:"ghost",size:"icon",onClick:()=>x(I.id),className:"text-destructive hover:text-destructive",children:l.jsx(On,{className:"h-4 w-4"})})]})]})})]})})},I.id))}),!m&&!g&&S.length===0&&l.jsx(xe,{children:l.jsxs(we,{className:"text-center py-12",children:[l.jsx(_f,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No articles found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No articles match your search criteria.":"Start by creating your first news article."}),l.jsxs(re,{onClick:A,children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Create Article"]})]})})]})}function v5(n,e){const t=E.createContext(e),r=a=>{const{children:c,...u}=a,h=E.useMemo(()=>u,Object.values(u));return l.jsx(t.Provider,{value:h,children:c})};r.displayName=n+"Provider";function s(a){const c=E.useContext(t);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${n}\``)}return[r,s]}function y5(n,e=[]){let t=[];function r(a,c){const u=E.createContext(c),h=t.length;t=[...t,c];const m=v=>{var A;const{scope:y,children:b,...S}=v,_=((A=y==null?void 0:y[n])==null?void 0:A[h])||u,x=E.useMemo(()=>S,Object.values(S));return l.jsx(_.Provider,{value:x,children:b})};m.displayName=a+"Provider";function g(v,y){var _;const b=((_=y==null?void 0:y[n])==null?void 0:_[h])||u,S=E.useContext(b);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${a}\``)}return[m,g]}const s=()=>{const a=t.map(c=>E.createContext(c));return function(u){const h=(u==null?void 0:u[n])||a;return E.useMemo(()=>({[`__scope${n}`]:{...u,[n]:h}}),[u,h])}};return s.scopeName=n,[r,x5(s,...e)]}function x5(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:m})=>{const v=h(a)[`__scope${m}`];return{...u,...v}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var qg="focusScope.autoFocusOnMount",Wg="focusScope.autoFocusOnUnmount",jb={bubbles:!1,cancelable:!0},w5="FocusScope",Rx=E.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...c}=n,[u,h]=E.useState(null),m=_n(s),g=_n(a),v=E.useRef(null),y=xt(e,_=>h(_)),b=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(r){let _=function(C){if(b.paused||!u)return;const O=C.target;u.contains(O)?v.current=O:so(v.current,{select:!0})},x=function(C){if(b.paused||!u)return;const O=C.relatedTarget;O!==null&&(u.contains(O)||so(v.current,{select:!0}))},A=function(C){if(document.activeElement===document.body)for(const V of C)V.removedNodes.length>0&&so(u)};document.addEventListener("focusin",_),document.addEventListener("focusout",x);const I=new MutationObserver(A);return u&&I.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",x),I.disconnect()}}},[r,u,b.paused]),E.useEffect(()=>{if(u){Pb.add(b);const _=document.activeElement;if(!u.contains(_)){const A=new CustomEvent(qg,jb);u.addEventListener(qg,m),u.dispatchEvent(A),A.defaultPrevented||(_5(T5(HC(u)),{select:!0}),document.activeElement===_&&so(u))}return()=>{u.removeEventListener(qg,m),setTimeout(()=>{const A=new CustomEvent(Wg,jb);u.addEventListener(Wg,g),u.dispatchEvent(A),A.defaultPrevented||so(_??document.body,{select:!0}),u.removeEventListener(Wg,g),Pb.remove(b)},0)}}},[u,m,g,b]);const S=E.useCallback(_=>{if(!t&&!r||b.paused)return;const x=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,A=document.activeElement;if(x&&A){const I=_.currentTarget,[C,O]=E5(I);C&&O?!_.shiftKey&&A===O?(_.preventDefault(),t&&so(C,{select:!0})):_.shiftKey&&A===C&&(_.preventDefault(),t&&so(O,{select:!0})):A===I&&_.preventDefault()}},[t,r,b.paused]);return l.jsx(Ke.div,{tabIndex:-1,...c,ref:y,onKeyDown:S})});Rx.displayName=w5;function _5(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(so(r,{select:e}),document.activeElement!==t)return}function E5(n){const e=HC(n),t=Ab(e,n),r=Ab(e.reverse(),n);return[t,r]}function HC(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Ab(n,e){for(const t of n)if(!b5(t,{upTo:e}))return t}function b5(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function S5(n){return n instanceof HTMLInputElement&&"select"in n}function so(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&S5(n)&&e&&n.select()}}var Pb=N5();function N5(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=Rb(n,e),n.unshift(e)},remove(e){var t;n=Rb(n,e),(t=n[0])==null||t.resume()}}}function Rb(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function T5(n){return n.filter(e=>e.tagName!=="A")}function C5(n,e){return E.useReducer((t,r)=>e[t][r]??t,n)}var Lm=n=>{const{present:e,children:t}=n,r=I5(e),s=typeof t=="function"?t({present:r.isPresent}):E.Children.only(t),a=xt(r.ref,j5(s));return typeof t=="function"||r.isPresent?E.cloneElement(s,{ref:a}):null};Lm.displayName="Presence";function I5(n){const[e,t]=E.useState(),r=E.useRef({}),s=E.useRef(n),a=E.useRef("none"),c=n?"mounted":"unmounted",[u,h]=C5(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const m=Yh(r.current);a.current=u==="mounted"?m:"none"},[u]),Gt(()=>{const m=r.current,g=s.current;if(g!==n){const y=a.current,b=Yh(m);n?h("MOUNT"):b==="none"||(m==null?void 0:m.display)==="none"?h("UNMOUNT"):h(g&&y!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,h]),Gt(()=>{if(e){let m;const g=e.ownerDocument.defaultView??window,v=b=>{const _=Yh(r.current).includes(b.animationName);if(b.target===e&&_&&(h("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",m=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},y=b=>{b.target===e&&(a.current=Yh(r.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{g.clearTimeout(m),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:E.useCallback(m=>{m&&(r.current=getComputedStyle(m)),t(m)},[])}}function Yh(n){return(n==null?void 0:n.animationName)||"none"}function j5(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Hg=0;function A5(){E.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??kb()),document.body.insertAdjacentElement("beforeend",n[1]??kb()),Hg++,()=>{Hg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Hg--}},[])}function kb(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Du="right-scroll-bar-position",Ou="width-before-scroll-bar",P5="with-scroll-bars-hidden",R5="--removed-body-scroll-bar-size";function Kg(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function k5(n,e){var t=E.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var D5=typeof window<"u"?E.useLayoutEffect:E.useEffect,Db=new WeakMap;function KC(n,e){var t=k5(null,function(r){return n.forEach(function(s){return Kg(s,r)})});return D5(function(){var r=Db.get(t);if(r){var s=new Set(r),a=new Set(n),c=t.current;s.forEach(function(u){a.has(u)||Kg(u,null)}),a.forEach(function(u){s.has(u)||Kg(u,c)})}Db.set(t,n)},[n]),t}function O5(n){return n}function L5(n,e){e===void 0&&(e=O5);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(a){var c=e(a,r);return t.push(c),function(){t=t.filter(function(u){return u!==c})}},assignSyncMedium:function(a){for(r=!0;t.length;){var c=t;t=[],c.forEach(a)}t={push:function(u){return a(u)},filter:function(){return t}}},assignMedium:function(a){r=!0;var c=[];if(t.length){var u=t;t=[],u.forEach(a),c=t}var h=function(){var g=c;c=[],g.forEach(a)},m=function(){return Promise.resolve().then(h)};m(),t={push:function(g){c.push(g),m()},filter:function(g){return c=c.filter(g),t}}}};return s}function GC(n){n===void 0&&(n={});var e=L5(null);return e.options=Wn({async:!0,ssr:!1},n),e}var QC=function(n){var e=n.sideCar,t=_c(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return E.createElement(r,Wn({},t))};QC.isSideCarExport=!0;function YC(n,e){return n.useMedium(e),QC}var XC=GC(),Gg=function(){},Mm=E.forwardRef(function(n,e){var t=E.useRef(null),r=E.useState({onScrollCapture:Gg,onWheelCapture:Gg,onTouchMoveCapture:Gg}),s=r[0],a=r[1],c=n.forwardProps,u=n.children,h=n.className,m=n.removeScrollBar,g=n.enabled,v=n.shards,y=n.sideCar,b=n.noIsolation,S=n.inert,_=n.allowPinchZoom,x=n.as,A=x===void 0?"div":x,I=n.gapMode,C=_c(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=y,V=KC([t,e]),B=Wn(Wn({},C),s);return E.createElement(E.Fragment,null,g&&E.createElement(O,{sideCar:XC,removeScrollBar:m,shards:v,noIsolation:b,inert:S,setCallbacks:a,allowPinchZoom:!!_,lockRef:t,gapMode:I}),c?E.cloneElement(E.Children.only(u),Wn(Wn({},B),{ref:V})):E.createElement(A,Wn({},B,{className:h,ref:V}),u))});Mm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Mm.classNames={fullWidth:Ou,zeroRight:Du};var M5=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function F5(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=M5();return e&&n.setAttribute("nonce",e),n}function V5(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function U5(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var $5=function(){var n=0,e=null;return{add:function(t){n==0&&(e=F5())&&(V5(e,t),U5(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},z5=function(){var n=$5();return function(e,t){E.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},kx=function(){var n=z5(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},B5={left:0,top:0,right:0,gap:0},Qg=function(n){return parseInt(n||"",10)||0},q5=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[Qg(t),Qg(r),Qg(s)]},W5=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return B5;var e=q5(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},H5=kx(),Wl="data-scroll-locked",K5=function(n,e,t,r){var s=n.left,a=n.top,c=n.right,u=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(P5,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(Wl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Du,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Ou,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Du," .").concat(Du,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ou," .").concat(Ou,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Wl,`] {
    `).concat(R5,": ").concat(u,`px;
  }
`)},Ob=function(){var n=parseInt(document.body.getAttribute(Wl)||"0",10);return isFinite(n)?n:0},G5=function(){E.useEffect(function(){return document.body.setAttribute(Wl,(Ob()+1).toString()),function(){var n=Ob()-1;n<=0?document.body.removeAttribute(Wl):document.body.setAttribute(Wl,n.toString())}},[])},JC=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;G5();var a=E.useMemo(function(){return W5(s)},[s]);return E.createElement(H5,{styles:K5(a,!e,s,t?"":"!important")})},Jv=!1;if(typeof window<"u")try{var Xh=Object.defineProperty({},"passive",{get:function(){return Jv=!0,!0}});window.addEventListener("test",Xh,Xh),window.removeEventListener("test",Xh,Xh)}catch{Jv=!1}var jl=Jv?{passive:!1}:!1,Q5=function(n){return n.tagName==="TEXTAREA"},ZC=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!Q5(n)&&t[e]==="visible")},Y5=function(n){return ZC(n,"overflowY")},X5=function(n){return ZC(n,"overflowX")},Lb=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=eI(n,r);if(s){var a=tI(n,r),c=a[1],u=a[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},J5=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},Z5=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},eI=function(n,e){return n==="v"?Y5(e):X5(e)},tI=function(n,e){return n==="v"?J5(e):Z5(e)},e9=function(n,e){return n==="h"&&e==="rtl"?-1:1},t9=function(n,e,t,r,s){var a=e9(n,window.getComputedStyle(e).direction),c=a*r,u=t.target,h=e.contains(u),m=!1,g=c>0,v=0,y=0;do{var b=tI(n,u),S=b[0],_=b[1],x=b[2],A=_-x-a*S;(S||A)&&eI(n,u)&&(v+=A,y+=S),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(g&&Math.abs(v)<1||!g&&Math.abs(y)<1)&&(m=!0),m},Jh=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Mb=function(n){return[n.deltaX,n.deltaY]},Fb=function(n){return n&&"current"in n?n.current:n},n9=function(n,e){return n[0]===e[0]&&n[1]===e[1]},r9=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},s9=0,Al=[];function i9(n){var e=E.useRef([]),t=E.useRef([0,0]),r=E.useRef(),s=E.useState(s9++)[0],a=E.useState(kx)[0],c=E.useRef(n);E.useEffect(function(){c.current=n},[n]),E.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var _=uN([n.lockRef.current],(n.shards||[]).map(Fb),!0).filter(Boolean);return _.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),_.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var u=E.useCallback(function(_,x){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!c.current.allowPinchZoom;var A=Jh(_),I=t.current,C="deltaX"in _?_.deltaX:I[0]-A[0],O="deltaY"in _?_.deltaY:I[1]-A[1],V,B=_.target,P=Math.abs(C)>Math.abs(O)?"h":"v";if("touches"in _&&P==="h"&&B.type==="range")return!1;var R=Lb(P,B);if(!R)return!0;if(R?V=P:(V=P==="v"?"h":"v",R=Lb(P,B)),!R)return!1;if(!r.current&&"changedTouches"in _&&(C||O)&&(r.current=V),!V)return!0;var D=r.current||V;return t9(D,x,_,D==="h"?C:O)},[]),h=E.useCallback(function(_){var x=_;if(!(!Al.length||Al[Al.length-1]!==a)){var A="deltaY"in x?Mb(x):Jh(x),I=e.current.filter(function(V){return V.name===x.type&&(V.target===x.target||x.target===V.shadowParent)&&n9(V.delta,A)})[0];if(I&&I.should){x.cancelable&&x.preventDefault();return}if(!I){var C=(c.current.shards||[]).map(Fb).filter(Boolean).filter(function(V){return V.contains(x.target)}),O=C.length>0?u(x,C[0]):!c.current.noIsolation;O&&x.cancelable&&x.preventDefault()}}},[]),m=E.useCallback(function(_,x,A,I){var C={name:_,delta:x,target:A,should:I,shadowParent:o9(A)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(O){return O!==C})},1)},[]),g=E.useCallback(function(_){t.current=Jh(_),r.current=void 0},[]),v=E.useCallback(function(_){m(_.type,Mb(_),_.target,u(_,n.lockRef.current))},[]),y=E.useCallback(function(_){m(_.type,Jh(_),_.target,u(_,n.lockRef.current))},[]);E.useEffect(function(){return Al.push(a),n.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:y}),document.addEventListener("wheel",h,jl),document.addEventListener("touchmove",h,jl),document.addEventListener("touchstart",g,jl),function(){Al=Al.filter(function(_){return _!==a}),document.removeEventListener("wheel",h,jl),document.removeEventListener("touchmove",h,jl),document.removeEventListener("touchstart",g,jl)}},[]);var b=n.removeScrollBar,S=n.inert;return E.createElement(E.Fragment,null,S?E.createElement(a,{styles:r9(s)}):null,b?E.createElement(JC,{gapMode:n.gapMode}):null)}function o9(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const a9=YC(XC,i9);var nI=E.forwardRef(function(n,e){return E.createElement(Mm,Wn({},n,{ref:e,sideCar:a9}))});nI.classNames=Mm.classNames;var l9=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Pl=new WeakMap,Zh=new WeakMap,ef={},Yg=0,rI=function(n){return n&&(n.host||rI(n.parentNode))},c9=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=rI(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},u9=function(n,e,t,r){var s=c9(e,Array.isArray(n)?n:[n]);ef[t]||(ef[t]=new WeakMap);var a=ef[t],c=[],u=new Set,h=new Set(s),m=function(v){!v||u.has(v)||(u.add(v),m(v.parentNode))};s.forEach(m);var g=function(v){!v||h.has(v)||Array.prototype.forEach.call(v.children,function(y){if(u.has(y))g(y);else try{var b=y.getAttribute(r),S=b!==null&&b!=="false",_=(Pl.get(y)||0)+1,x=(a.get(y)||0)+1;Pl.set(y,_),a.set(y,x),c.push(y),_===1&&S&&Zh.set(y,!0),x===1&&y.setAttribute(t,"true"),S||y.setAttribute(r,"true")}catch(A){console.error("aria-hidden: cannot operate on ",y,A)}})};return g(e),u.clear(),Yg++,function(){c.forEach(function(v){var y=Pl.get(v)-1,b=a.get(v)-1;Pl.set(v,y),a.set(v,b),y||(Zh.has(v)||v.removeAttribute(r),Zh.delete(v)),b||v.removeAttribute(t)}),Yg--,Yg||(Pl=new WeakMap,Pl=new WeakMap,Zh=new WeakMap,ef={})}},sI=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=l9(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),u9(r,s,t,"aria-hidden")):function(){return null}},Dx="Dialog",[iI,Vz]=y5(Dx),[d9,gs]=iI(Dx),oI=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:a,modal:c=!0}=n,u=E.useRef(null),h=E.useRef(null),[m=!1,g]=Ca({prop:r,defaultProp:s,onChange:a});return l.jsx(d9,{scope:e,triggerRef:u,contentRef:h,contentId:yo(),titleId:yo(),descriptionId:yo(),open:m,onOpenChange:g,onOpenToggle:E.useCallback(()=>g(v=>!v),[g]),modal:c,children:t})};oI.displayName=Dx;var aI="DialogTrigger",lI=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=gs(aI,t),a=xt(e,s.triggerRef);return l.jsx(Ke.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Mx(s.open),...r,ref:a,onClick:ze(n.onClick,s.onOpenToggle)})});lI.displayName=aI;var Ox="DialogPortal",[h9,cI]=iI(Ox,{forceMount:void 0}),uI=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,a=gs(Ox,e);return l.jsx(h9,{scope:e,forceMount:t,children:E.Children.map(r,c=>l.jsx(Lm,{present:t||a.open,children:l.jsx(ES,{asChild:!0,container:s,children:c})}))})};uI.displayName=Ox;var Yf="DialogOverlay",dI=E.forwardRef((n,e)=>{const t=cI(Yf,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,a=gs(Yf,n.__scopeDialog);return a.modal?l.jsx(Lm,{present:r||a.open,children:l.jsx(f9,{...s,ref:e})}):null});dI.displayName=Yf;var f9=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=gs(Yf,t);return l.jsx(nI,{as:Ta,allowPinchZoom:!0,shards:[s.contentRef],children:l.jsx(Ke.div,{"data-state":Mx(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),La="DialogContent",hI=E.forwardRef((n,e)=>{const t=cI(La,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,a=gs(La,n.__scopeDialog);return l.jsx(Lm,{present:r||a.open,children:a.modal?l.jsx(m9,{...s,ref:e}):l.jsx(p9,{...s,ref:e})})});hI.displayName=La;var m9=E.forwardRef((n,e)=>{const t=gs(La,n.__scopeDialog),r=E.useRef(null),s=xt(e,t.contentRef,r);return E.useEffect(()=>{const a=r.current;if(a)return sI(a)},[]),l.jsx(fI,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ze(n.onCloseAutoFocus,a=>{var c;a.preventDefault(),(c=t.triggerRef.current)==null||c.focus()}),onPointerDownOutside:ze(n.onPointerDownOutside,a=>{const c=a.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&a.preventDefault()}),onFocusOutside:ze(n.onFocusOutside,a=>a.preventDefault())})}),p9=E.forwardRef((n,e)=>{const t=gs(La,n.__scopeDialog),r=E.useRef(!1),s=E.useRef(!1);return l.jsx(fI,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var c,u;(c=n.onCloseAutoFocus)==null||c.call(n,a),a.defaultPrevented||(r.current||(u=t.triggerRef.current)==null||u.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var h,m;(h=n.onInteractOutside)==null||h.call(n,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const c=a.target;((m=t.triggerRef.current)==null?void 0:m.contains(c))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),fI=E.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...c}=n,u=gs(La,t),h=E.useRef(null),m=xt(e,h);return A5(),l.jsxs(l.Fragment,{children:[l.jsx(Rx,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:l.jsx(yy,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Mx(u.open),...c,ref:m,onDismiss:()=>u.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(g9,{titleId:u.titleId}),l.jsx(y9,{contentRef:h,descriptionId:u.descriptionId})]})]})}),Lx="DialogTitle",mI=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=gs(Lx,t);return l.jsx(Ke.h2,{id:s.titleId,...r,ref:e})});mI.displayName=Lx;var pI="DialogDescription",gI=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=gs(pI,t);return l.jsx(Ke.p,{id:s.descriptionId,...r,ref:e})});gI.displayName=pI;var vI="DialogClose",yI=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=gs(vI,t);return l.jsx(Ke.button,{type:"button",...r,ref:e,onClick:ze(n.onClick,()=>s.onOpenChange(!1))})});yI.displayName=vI;function Mx(n){return n?"open":"closed"}var xI="DialogTitleWarning",[Uz,wI]=v5(xI,{contentName:La,titleName:Lx,docsSlug:"dialog"}),g9=({titleId:n})=>{const e=wI(xI),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return E.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},v9="DialogDescriptionWarning",y9=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${wI(v9).contentName}}.`;return E.useEffect(()=>{var a;const s=(a=n.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},x9=oI,w9=lI,_9=uI,_I=dI,EI=hI,bI=mI,SI=gI,NI=yI;const E9=x9,b9=w9,S9=_9,N9=NI,TI=E.forwardRef(({className:n,...e},t)=>l.jsx(_I,{ref:t,className:et("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));TI.displayName=_I.displayName;const CI=E.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(S9,{children:[l.jsx(TI,{}),l.jsxs(EI,{ref:r,className:et("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,l.jsxs(NI,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[l.jsx(tc,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));CI.displayName=EI.displayName;const II=({className:n,...e})=>l.jsx("div",{className:et("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});II.displayName="DialogHeader";const jI=({className:n,...e})=>l.jsx("div",{className:et("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});jI.displayName="DialogFooter";const AI=E.forwardRef(({className:n,...e},t)=>l.jsx(bI,{ref:t,className:et("text-lg font-semibold leading-none tracking-tight",n),...e}));AI.displayName=bI.displayName;const PI=E.forwardRef(({className:n,...e},t)=>l.jsx(SI,{ref:t,className:et("text-sm text-muted-foreground",n),...e}));PI.displayName=SI.displayName;function RI({quiz:n,onClose:e,onSave:t}){const[r,s]=E.useState({title:"",description:"",timeLimit:30,passingScore:70,questions:[]}),[a,c]=E.useState({question:"",options:["","","",""],correctAnswer:0,imageUrl:"",weight:1}),[u,h]=E.useState(!1);E.useEffect(()=>{n&&s({title:n.title||"",description:n.description||"",timeLimit:n.timeLimit||30,passingScore:n.passingScore||70,questions:n.questions||[],type:n.type||"multiple_choice"})},[n]);const m=async _=>{_.preventDefault(),h(!0);try{const x={...r,...n?{}:{createdAt:new Date,createdBy:"Current User"}};x.type||(x.type="multiple_choice"),t(x)}catch(x){console.error("Error saving quiz:",x)}finally{h(!1)}},g=()=>{var A;const _=r.type==="flashcard",x=a.question.trim();if(_){const I=a.options&&String(a.options[0]).trim()||a.answer;if(x&&I){const C={...a,options:[String(((A=a.options)==null?void 0:A[0])||a.answer||"").trim()],correctAnswer:0};s(O=>({...O,questions:[...O.questions,C]})),c({question:"",options:[""],correctAnswer:0,imageUrl:"",weight:1})}return}x&&Array.isArray(a.options)&&a.options.filter(I=>String(I).trim()).length>=2&&typeof a.correctAnswer=="number"&&String(a.options[a.correctAnswer]||"").trim()&&(s(I=>({...I,questions:[...I.questions,{...a}]})),c({question:"",options:["","","",""],correctAnswer:0,imageUrl:"",weight:1}))},v=_=>{s(x=>({...x,questions:x.questions.filter((A,I)=>I!==_)}))},y=(_,x)=>{const A=[...a.options||[]];A[_]=x,c(I=>({...I,options:A}))},b=()=>{c(_=>({..._,options:[..._.options||[],""]}))},S=_=>{c(x=>{const A=[...x.options||[]];A.splice(_,1);let I=x.correctAnswer;return I>=A.length&&(I=Math.max(0,A.length-1)),{...x,options:A,correctAnswer:I}})};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(re,{variant:"ghost",onClick:e,children:[l.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Quiz":"Create Quiz"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update the quiz details and questions":"Create a new quiz for students"})]})]})}),l.jsxs("form",{onSubmit:m,className:"space-y-6",children:[l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsxs(Xe,{className:"flex items-center gap-2",children:[l.jsx(yi,{className:"h-5 w-5"}),"Quiz Information"]}),l.jsx(At,{children:"Basic information about the quiz"})]}),l.jsxs(we,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"title",children:"Quiz Title *"}),l.jsx(ke,{id:"title",placeholder:"Enter quiz title...",value:r.title,onChange:_=>s(x=>({...x,title:_.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"description",children:"Description"}),l.jsx(Ni,{id:"description",placeholder:"Describe what this quiz covers...",value:r.description,onChange:_=>s(x=>({...x,description:_.target.value})),rows:3})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Ae,{htmlFor:"timeLimit",className:"flex items-center gap-2",children:[l.jsx(xf,{className:"h-4 w-4"}),"Time Limit (minutes)"]}),l.jsx(ke,{id:"timeLimit",type:"number",min:"1",value:r.timeLimit,onChange:_=>s(x=>({...x,timeLimit:parseInt(_.target.value)||30}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Ae,{htmlFor:"passingScore",className:"flex items-center gap-2",children:[l.jsx(TR,{className:"h-4 w-4"}),"Passing Score (%)"]}),l.jsx(ke,{id:"passingScore",type:"number",min:"0",max:"100",value:r.passingScore,onChange:_=>s(x=>({...x,passingScore:parseInt(_.target.value)||70}))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"quizType",children:"Quiz Type"}),l.jsxs("select",{id:"quizType",value:r.type||"multiple_choice",onChange:_=>s(x=>({...x,type:_.target.value})),className:"w-full border rounded px-3 py-2",children:[l.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),l.jsx("option",{value:"flashcard",children:"Flashcard"})]}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose how this quiz will be presented to students."})]})]})]}),l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Add Question"}),l.jsx(At,{children:"Create multiple choice questions for the quiz"})]}),l.jsxs(we,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"question",children:"Question"}),l.jsx(Ni,{id:"question",placeholder:"Enter your question...",value:a.question,onChange:_=>c(x=>({...x,question:_.target.value})),rows:3})]}),l.jsx("div",{className:"space-y-2",children:r.type==="flashcard"?l.jsxs(l.Fragment,{children:[l.jsx(Ae,{children:"Correct Answer"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(ke,{placeholder:"Correct answer",value:a.options[0]??a.answer??"",onChange:_=>{c(x=>({...x,options:[_.target.value]}))}}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"For flashcards enter the correct answer (single). Use [[answer]] in the question to create blanks."})]})]}):l.jsxs(l.Fragment,{children:[l.jsx(Ae,{children:"Answer Options"}),l.jsxs("div",{className:"space-y-2",children:[a.options.map((_,x)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[l.jsx(Ae,{className:"w-8 h-8 rounded-full bg-secondary flex items-center justify-center text-sm",children:String.fromCharCode(65+x)}),l.jsx(ke,{placeholder:`Option ${String.fromCharCode(65+x)}`,value:_,onChange:A=>y(x,A.target.value),className:a.correctAnswer===x?"ring-2 ring-green-500":""})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(re,{type:"button",variant:a.correctAnswer===x?"default":"outline",size:"sm",onClick:()=>c(A=>({...A,correctAnswer:x})),children:a.correctAnswer===x?"Correct":"Mark Correct"}),a.options.length>2&&l.jsx(re,{type:"button",variant:"ghost",size:"sm",onClick:()=>S(x),children:"Remove"})]})]},x)),l.jsx("div",{children:l.jsx(re,{type:"button",variant:"outline",onClick:b,className:"mt-2",children:"Add Option"})})]})]})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),l.jsx(ke,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:a.imageUrl,onChange:_=>c(x=>({...x,imageUrl:_.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"weight",children:"Question Weight"}),l.jsx(ke,{id:"weight",type:"number",min:1,value:a.weight,onChange:_=>c(x=>({...x,weight:parseFloat(_.target.value)||1}))})]}),l.jsxs(re,{type:"button",onClick:g,className:"w-full",children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Question"]})]})]}),r.questions.length>0&&l.jsxs(xe,{children:[l.jsx(Ge,{children:l.jsxs(Xe,{children:["Quiz Questions (",r.questions.length,")"]})}),l.jsx(we,{children:l.jsx("div",{className:"space-y-4",children:r.questions.map((_,x)=>l.jsx("div",{className:"p-4 border rounded-lg space-y-3",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("p",{className:"font-medium",children:[x+1,". ",_.question]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ae,{className:"text-sm",children:"Weight"}),l.jsx(ke,{type:"number",min:1,value:_.weight||1,onChange:A=>{const I=parseFloat(A.target.value)||1;s(C=>({...C,questions:C.questions.map((O,V)=>V===x?{...O,weight:I}:O)}))},className:"w-20 text-sm"})]})]}),l.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:_.options.map((A,I)=>l.jsxs("div",{className:`flex items-center gap-2 p-2 rounded ${_.correctAnswer===I?"bg-green-100 text-green-800":"bg-secondary/50"}`,children:[l.jsx("span",{className:"w-6 h-6 rounded-full bg-white flex items-center justify-center text-sm font-medium",children:String.fromCharCode(65+I)}),l.jsx("span",{className:"text-sm",children:A}),_.correctAnswer===I&&l.jsx(rn,{variant:"outline",className:"ml-auto text-xs bg-green-200",children:"Correct"})]},I))})]}),l.jsx("div",{className:"flex flex-col items-end gap-2",children:l.jsx(re,{type:"button",variant:"ghost",size:"icon",onClick:()=>v(x),className:"text-destructive hover:text-destructive",children:l.jsx(On,{className:"h-4 w-4"})})})]})},x))})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(re,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(re,{type:"submit",disabled:u||r.questions.length===0,children:[l.jsx(Vo,{className:"h-4 w-4 mr-2"}),u?"Saving...":n?"Update Quiz":"Create Quiz"]})]})]})]})}function kI({year:n,yearType:e,onClose:t,onSave:r}){const[s,a]=E.useState({name:"",imageUrl:"",hours:3}),[c,u]=E.useState(!1),h=async m=>{m.preventDefault(),u(!0);try{const g={name:s.name,imageUrl:s.imageUrl||"",hours:s.hours||3,createdAt:new Date};r(g)}catch(g){console.error("Error saving subject:",g)}finally{u(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(re,{variant:"ghost",onClick:t,children:[l.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Add Subject to Year ",n]}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e==="basic"?l.jsx(Nu,{className:"h-4 w-4 text-blue-600"}):l.jsx(Tu,{className:"h-4 w-4 text-red-600"}),l.jsxs("p",{className:"text-muted-foreground",children:["Adding to ",e==="basic"?"Basic":"Clinical"," Years â€¢ Year ",n]})]})]})]})}),l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l.jsx(xe,{className:`border-l-4 ${e==="basic"?"border-l-blue-500 bg-blue-50/50":"border-l-red-500 bg-red-50/50"}`,children:l.jsx(we,{className:"pt-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[e==="basic"?l.jsx(Nu,{className:"h-8 w-8 text-blue-600"}):l.jsx(Tu,{className:"h-8 w-8 text-red-600"}),l.jsxs("div",{children:[l.jsxs("h3",{className:"font-semibold text-lg",children:["Year ",n]}),l.jsx("p",{className:"text-sm text-muted-foreground",children:e==="basic"?"Basic Years":"Clinical Years"})]})]})})}),l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsxs(Xe,{className:"flex items-center gap-2",children:[e==="basic"?l.jsx(Nu,{className:"h-5 w-5 text-blue-600"}):l.jsx(Tu,{className:"h-5 w-5 text-red-600"}),"Subject Information"]}),l.jsx(At,{children:"Basic information about the subject"})]}),l.jsx(we,{className:"space-y-4",children:l.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"year",children:"Year"}),l.jsx(ke,{id:"year",value:`Year ${n} (${e==="basic"?"Basic":"Clinical"})`,disabled:!0,className:"bg-muted"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"name",children:"Subject Name *"}),l.jsx(ke,{id:"name",placeholder:"e.g., Anatomy & Physiology",value:s.name,onChange:m=>a(g=>({...g,name:m.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"hours",children:"Credit Hours"}),l.jsx(ke,{id:"hours",type:"number",placeholder:"3",value:s.hours,onChange:m=>a(g=>({...g,hours:parseInt(m.target.value)||3})),min:"1",max:"12"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),l.jsx(ke,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:s.imageUrl,onChange:m=>a(g=>({...g,imageUrl:m.target.value}))})]})]})})]}),s.name&&l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Preview"}),l.jsxs(At,{children:["How the subject will appear in Year ",n]})]}),l.jsx(we,{children:l.jsxs("div",{className:"p-4 border rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.imageUrl?l.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-8 h-8 object-cover rounded",onError:m=>{m.currentTarget.style.display="none"}}):l.jsx(ls,{className:"h-5 w-5 text-primary"}),l.jsx("h3",{className:"font-semibold text-lg",children:s.name})]}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Year ",n," â€¢ ",e," years"]})]})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(re,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),l.jsxs(re,{type:"submit",disabled:c,children:[l.jsx(Vo,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add Subject"]})]})]})]})}function Vb(n,[e,t]){return Math.min(t,Math.max(e,n))}var T9=E.createContext(void 0);function Fx(n){const e=E.useContext(T9);return n||e||"ltr"}var C9="DismissableLayer",Zv="dismissableLayer.update",I9="dismissableLayer.pointerDownOutside",j9="dismissableLayer.focusOutside",Ub,DI=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),OI=E.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=n,m=E.useContext(DI),[g,v]=E.useState(null),y=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=E.useState({}),S=xt(e,P=>v(P)),_=Array.from(m.layers),[x]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),A=_.indexOf(x),I=g?_.indexOf(g):-1,C=m.layersWithOutsidePointerEventsDisabled.size>0,O=I>=A,V=R9(P=>{const R=P.target,D=[...m.branches].some(k=>k.contains(R));!O||D||(s==null||s(P),c==null||c(P),P.defaultPrevented||u==null||u())},y),B=k9(P=>{const R=P.target;[...m.branches].some(k=>k.contains(R))||(a==null||a(P),c==null||c(P),P.defaultPrevented||u==null||u())},y);return dy(P=>{I===m.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},y),E.useEffect(()=>{if(g)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(Ub=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(g)),m.layers.add(g),$b(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=Ub)}},[g,y,t,m]),E.useEffect(()=>()=>{g&&(m.layers.delete(g),m.layersWithOutsidePointerEventsDisabled.delete(g),$b())},[g,m]),E.useEffect(()=>{const P=()=>b({});return document.addEventListener(Zv,P),()=>document.removeEventListener(Zv,P)},[]),l.jsx(Ke.div,{...h,ref:S,style:{pointerEvents:C?O?"auto":"none":void 0,...n.style},onFocusCapture:ze(n.onFocusCapture,B.onFocusCapture),onBlurCapture:ze(n.onBlurCapture,B.onBlurCapture),onPointerDownCapture:ze(n.onPointerDownCapture,V.onPointerDownCapture)})});OI.displayName=C9;var A9="DismissableLayerBranch",P9=E.forwardRef((n,e)=>{const t=E.useContext(DI),r=E.useRef(null),s=xt(e,r);return E.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),l.jsx(Ke.div,{...n,ref:s})});P9.displayName=A9;function R9(n,e=globalThis==null?void 0:globalThis.document){const t=_n(n),r=E.useRef(!1),s=E.useRef(()=>{});return E.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){LI(I9,t,m,{discrete:!0})};const m={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function k9(n,e=globalThis==null?void 0:globalThis.document){const t=_n(n),r=E.useRef(!1);return E.useEffect(()=>{const s=a=>{a.target&&!r.current&&LI(j9,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function $b(){const n=new CustomEvent(Zv);document.dispatchEvent(n)}function LI(n,e,t,{discrete:r}){const s=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?em(s,a):s.dispatchEvent(a)}var Xg=0;function D9(){E.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??zb()),document.body.insertAdjacentElement("beforeend",n[1]??zb()),Xg++,()=>{Xg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Xg--}},[])}function zb(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",n}var O9="Portal",MI=E.forwardRef((n,e)=>{var u;const{container:t,...r}=n,[s,a]=E.useState(!1);Gt(()=>a(!0),[]);const c=t||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?Zf.createPortal(l.jsx(Ke.div,{...r,ref:e}),c):null});MI.displayName=O9;var FI=GC(),Jg=function(){},Fm=E.forwardRef(function(n,e){var t=E.useRef(null),r=E.useState({onScrollCapture:Jg,onWheelCapture:Jg,onTouchMoveCapture:Jg}),s=r[0],a=r[1],c=n.forwardProps,u=n.children,h=n.className,m=n.removeScrollBar,g=n.enabled,v=n.shards,y=n.sideCar,b=n.noIsolation,S=n.inert,_=n.allowPinchZoom,x=n.as,A=x===void 0?"div":x,I=n.gapMode,C=_c(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=y,V=KC([t,e]),B=Wn(Wn({},C),s);return E.createElement(E.Fragment,null,g&&E.createElement(O,{sideCar:FI,removeScrollBar:m,shards:v,noIsolation:b,inert:S,setCallbacks:a,allowPinchZoom:!!_,lockRef:t,gapMode:I}),c?E.cloneElement(E.Children.only(u),Wn(Wn({},B),{ref:V})):E.createElement(A,Wn({},B,{className:h,ref:V}),u))});Fm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Fm.classNames={fullWidth:Ou,zeroRight:Du};var ey=!1;if(typeof window<"u")try{var tf=Object.defineProperty({},"passive",{get:function(){return ey=!0,!0}});window.addEventListener("test",tf,tf),window.removeEventListener("test",tf,tf)}catch{ey=!1}var Rl=ey?{passive:!1}:!1,L9=function(n){return n.tagName==="TEXTAREA"},VI=function(n,e){var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!L9(n)&&t[e]==="visible")},M9=function(n){return VI(n,"overflowY")},F9=function(n){return VI(n,"overflowX")},Bb=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=UI(n,r);if(s){var a=$I(n,r),c=a[1],u=a[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},V9=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},U9=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},UI=function(n,e){return n==="v"?M9(e):F9(e)},$I=function(n,e){return n==="v"?V9(e):U9(e)},$9=function(n,e){return n==="h"&&e==="rtl"?-1:1},z9=function(n,e,t,r,s){var a=$9(n,window.getComputedStyle(e).direction),c=a*r,u=t.target,h=e.contains(u),m=!1,g=c>0,v=0,y=0;do{var b=$I(n,u),S=b[0],_=b[1],x=b[2],A=_-x-a*S;(S||A)&&UI(n,u)&&(v+=A,y+=S),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(g&&Math.abs(v)<1||!g&&Math.abs(y)<1)&&(m=!0),m},nf=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},qb=function(n){return[n.deltaX,n.deltaY]},Wb=function(n){return n&&"current"in n?n.current:n},B9=function(n,e){return n[0]===e[0]&&n[1]===e[1]},q9=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},W9=0,kl=[];function H9(n){var e=E.useRef([]),t=E.useRef([0,0]),r=E.useRef(),s=E.useState(W9++)[0],a=E.useState(kx)[0],c=E.useRef(n);E.useEffect(function(){c.current=n},[n]),E.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var _=uN([n.lockRef.current],(n.shards||[]).map(Wb),!0).filter(Boolean);return _.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),_.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var u=E.useCallback(function(_,x){if("touches"in _&&_.touches.length===2)return!c.current.allowPinchZoom;var A=nf(_),I=t.current,C="deltaX"in _?_.deltaX:I[0]-A[0],O="deltaY"in _?_.deltaY:I[1]-A[1],V,B=_.target,P=Math.abs(C)>Math.abs(O)?"h":"v";if("touches"in _&&P==="h"&&B.type==="range")return!1;var R=Bb(P,B);if(!R)return!0;if(R?V=P:(V=P==="v"?"h":"v",R=Bb(P,B)),!R)return!1;if(!r.current&&"changedTouches"in _&&(C||O)&&(r.current=V),!V)return!0;var D=r.current||V;return z9(D,x,_,D==="h"?C:O)},[]),h=E.useCallback(function(_){var x=_;if(!(!kl.length||kl[kl.length-1]!==a)){var A="deltaY"in x?qb(x):nf(x),I=e.current.filter(function(V){return V.name===x.type&&(V.target===x.target||x.target===V.shadowParent)&&B9(V.delta,A)})[0];if(I&&I.should){x.cancelable&&x.preventDefault();return}if(!I){var C=(c.current.shards||[]).map(Wb).filter(Boolean).filter(function(V){return V.contains(x.target)}),O=C.length>0?u(x,C[0]):!c.current.noIsolation;O&&x.cancelable&&x.preventDefault()}}},[]),m=E.useCallback(function(_,x,A,I){var C={name:_,delta:x,target:A,should:I,shadowParent:K9(A)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(O){return O!==C})},1)},[]),g=E.useCallback(function(_){t.current=nf(_),r.current=void 0},[]),v=E.useCallback(function(_){m(_.type,qb(_),_.target,u(_,n.lockRef.current))},[]),y=E.useCallback(function(_){m(_.type,nf(_),_.target,u(_,n.lockRef.current))},[]);E.useEffect(function(){return kl.push(a),n.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:y}),document.addEventListener("wheel",h,Rl),document.addEventListener("touchmove",h,Rl),document.addEventListener("touchstart",g,Rl),function(){kl=kl.filter(function(_){return _!==a}),document.removeEventListener("wheel",h,Rl),document.removeEventListener("touchmove",h,Rl),document.removeEventListener("touchstart",g,Rl)}},[]);var b=n.removeScrollBar,S=n.inert;return E.createElement(E.Fragment,null,S?E.createElement(a,{styles:q9(s)}):null,b?E.createElement(JC,{gapMode:n.gapMode}):null)}function K9(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const G9=YC(FI,H9);var zI=E.forwardRef(function(n,e){return E.createElement(Fm,Wn({},n,{ref:e,sideCar:G9}))});zI.classNames=Fm.classNames;var Q9=[" ","Enter","ArrowUp","ArrowDown"],Y9=[" ","Enter"],wd="Select",[Vm,Um,X9]=uy(wd),[jc,$z]=Ti(wd,[X9,om]),$m=om(),[J9,qo]=jc(wd),[Z9,e$]=jc(wd),BI=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:a,value:c,defaultValue:u,onValueChange:h,dir:m,name:g,autoComplete:v,disabled:y,required:b}=n,S=$m(e),[_,x]=E.useState(null),[A,I]=E.useState(null),[C,O]=E.useState(!1),V=Fx(m),[B=!1,P]=Ca({prop:r,defaultProp:s,onChange:a}),[R,D]=Ca({prop:c,defaultProp:u,onChange:h}),k=E.useRef(null),$=_?!!_.closest("form"):!0,[z,M]=E.useState(new Set),ie=Array.from(z).map(K=>K.props.value).join(";");return l.jsx(aD,{...S,children:l.jsxs(J9,{required:b,scope:e,trigger:_,onTriggerChange:x,valueNode:A,onValueNodeChange:I,valueNodeHasChildren:C,onValueNodeHasChildrenChange:O,contentId:yo(),value:R,onValueChange:D,open:B,onOpenChange:P,dir:V,triggerPointerDownPosRef:k,disabled:y,children:[l.jsx(Vm.Provider,{scope:e,children:l.jsx(Z9,{scope:n.__scopeSelect,onNativeOptionAdd:E.useCallback(K=>{M(J=>new Set(J).add(K))},[]),onNativeOptionRemove:E.useCallback(K=>{M(J=>{const X=new Set(J);return X.delete(K),X})},[]),children:t})}),$?l.jsxs(mj,{"aria-hidden":!0,required:b,tabIndex:-1,name:g,autoComplete:v,value:R,onChange:K=>D(K.target.value),disabled:y,children:[R===void 0?l.jsx("option",{value:""}):null,Array.from(z)]},ie):null]})})};BI.displayName=wd;var qI="SelectTrigger",WI=E.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,a=$m(t),c=qo(qI,t),u=c.disabled||r,h=xt(e,c.onTriggerChange),m=Um(t),[g,v,y]=pj(S=>{const _=m().filter(I=>!I.disabled),x=_.find(I=>I.value===c.value),A=gj(_,S,x);A!==void 0&&c.onValueChange(A.value)}),b=()=>{u||(c.onOpenChange(!0),y())};return l.jsx(xS,{asChild:!0,...a,children:l.jsx(Ke.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":fj(c.value)?"":void 0,...s,ref:h,onClick:ze(s.onClick,S=>{S.currentTarget.focus()}),onPointerDown:ze(s.onPointerDown,S=>{const _=S.target;_.hasPointerCapture(S.pointerId)&&_.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&(b(),c.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)},S.preventDefault())}),onKeyDown:ze(s.onKeyDown,S=>{const _=g.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&v(S.key),!(_&&S.key===" ")&&Q9.includes(S.key)&&(b(),S.preventDefault())})})})});WI.displayName=qI;var HI="SelectValue",KI=E.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:a,placeholder:c="",...u}=n,h=qo(HI,t),{onValueNodeHasChildrenChange:m}=h,g=a!==void 0,v=xt(e,h.onValueNodeChange);return Gt(()=>{m(g)},[m,g]),l.jsx(Ke.span,{...u,ref:v,style:{pointerEvents:"none"},children:fj(h.value)?l.jsx(l.Fragment,{children:c}):a})});KI.displayName=HI;var t$="SelectIcon",GI=E.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return l.jsx(Ke.span,{"aria-hidden":!0,...s,ref:e,children:r||"â–¼"})});GI.displayName=t$;var n$="SelectPortal",QI=n=>l.jsx(MI,{asChild:!0,...n});QI.displayName=n$;var Ma="SelectContent",YI=E.forwardRef((n,e)=>{const t=qo(Ma,n.__scopeSelect),[r,s]=E.useState();if(Gt(()=>{s(new DocumentFragment)},[]),!t.open){const a=r;return a?Fa.createPortal(l.jsx(XI,{scope:n.__scopeSelect,children:l.jsx(Vm.Slot,{scope:n.__scopeSelect,children:l.jsx("div",{children:n.children})})}),a):null}return l.jsx(JI,{...n,ref:e})});YI.displayName=Ma;var fi=10,[XI,Wo]=jc(Ma),r$="SelectContentImpl",JI=E.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:c,side:u,sideOffset:h,align:m,alignOffset:g,arrowPadding:v,collisionBoundary:y,collisionPadding:b,sticky:S,hideWhenDetached:_,avoidCollisions:x,...A}=n,I=qo(Ma,t),[C,O]=E.useState(null),[V,B]=E.useState(null),P=xt(e,me=>O(me)),[R,D]=E.useState(null),[k,$]=E.useState(null),z=Um(t),[M,ie]=E.useState(!1),K=E.useRef(!1);E.useEffect(()=>{if(C)return sI(C)},[C]),D9();const J=E.useCallback(me=>{const[Se,...Pe]=z().map(Ue=>Ue.ref.current),[Ce]=Pe.slice(-1),De=document.activeElement;for(const Ue of me)if(Ue===De||(Ue==null||Ue.scrollIntoView({block:"nearest"}),Ue===Se&&V&&(V.scrollTop=0),Ue===Ce&&V&&(V.scrollTop=V.scrollHeight),Ue==null||Ue.focus(),document.activeElement!==De))return},[z,V]),X=E.useCallback(()=>J([R,C]),[J,R,C]);E.useEffect(()=>{M&&X()},[M,X]);const{onOpenChange:q,triggerPointerDownPosRef:Q}=I;E.useEffect(()=>{if(C){let me={x:0,y:0};const Se=Ce=>{var De,Ue;me={x:Math.abs(Math.round(Ce.pageX)-(((De=Q.current)==null?void 0:De.x)??0)),y:Math.abs(Math.round(Ce.pageY)-(((Ue=Q.current)==null?void 0:Ue.y)??0))}},Pe=Ce=>{me.x<=10&&me.y<=10?Ce.preventDefault():C.contains(Ce.target)||q(!1),document.removeEventListener("pointermove",Se),Q.current=null};return Q.current!==null&&(document.addEventListener("pointermove",Se),document.addEventListener("pointerup",Pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Se),document.removeEventListener("pointerup",Pe,{capture:!0})}}},[C,q,Q]),E.useEffect(()=>{const me=()=>q(!1);return window.addEventListener("blur",me),window.addEventListener("resize",me),()=>{window.removeEventListener("blur",me),window.removeEventListener("resize",me)}},[q]);const[Z,U]=pj(me=>{const Se=z().filter(De=>!De.disabled),Pe=Se.find(De=>De.ref.current===document.activeElement),Ce=gj(Se,me,Pe);Ce&&setTimeout(()=>Ce.ref.current.focus())}),Y=E.useCallback((me,Se,Pe)=>{const Ce=!K.current&&!Pe;(I.value!==void 0&&I.value===Se||Ce)&&(D(me),Ce&&(K.current=!0))},[I.value]),le=E.useCallback(()=>C==null?void 0:C.focus(),[C]),be=E.useCallback((me,Se,Pe)=>{const Ce=!K.current&&!Pe;(I.value!==void 0&&I.value===Se||Ce)&&$(me)},[I.value]),ve=r==="popper"?ty:ZI,de=ve===ty?{side:u,sideOffset:h,align:m,alignOffset:g,arrowPadding:v,collisionBoundary:y,collisionPadding:b,sticky:S,hideWhenDetached:_,avoidCollisions:x}:{};return l.jsx(XI,{scope:t,content:C,viewport:V,onViewportChange:B,itemRefCallback:Y,selectedItem:R,onItemLeave:le,itemTextRefCallback:be,focusSelectedItem:X,selectedItemText:k,position:r,isPositioned:M,searchRef:Z,children:l.jsx(zI,{as:Ta,allowPinchZoom:!0,children:l.jsx(Rx,{asChild:!0,trapped:I.open,onMountAutoFocus:me=>{me.preventDefault()},onUnmountAutoFocus:ze(s,me=>{var Se;(Se=I.trigger)==null||Se.focus({preventScroll:!0}),me.preventDefault()}),children:l.jsx(OI,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:me=>me.preventDefault(),onDismiss:()=>I.onOpenChange(!1),children:l.jsx(ve,{role:"listbox",id:I.contentId,"data-state":I.open?"open":"closed",dir:I.dir,onContextMenu:me=>me.preventDefault(),...A,...de,onPlaced:()=>ie(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...A.style},onKeyDown:ze(A.onKeyDown,me=>{const Se=me.ctrlKey||me.altKey||me.metaKey;if(me.key==="Tab"&&me.preventDefault(),!Se&&me.key.length===1&&U(me.key),["ArrowUp","ArrowDown","Home","End"].includes(me.key)){let Ce=z().filter(De=>!De.disabled).map(De=>De.ref.current);if(["ArrowUp","End"].includes(me.key)&&(Ce=Ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(me.key)){const De=me.target,Ue=Ce.indexOf(De);Ce=Ce.slice(Ue+1)}setTimeout(()=>J(Ce)),me.preventDefault()}})})})})})})});JI.displayName=r$;var s$="SelectItemAlignedPosition",ZI=E.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,a=qo(Ma,t),c=Wo(Ma,t),[u,h]=E.useState(null),[m,g]=E.useState(null),v=xt(e,P=>g(P)),y=Um(t),b=E.useRef(!1),S=E.useRef(!0),{viewport:_,selectedItem:x,selectedItemText:A,focusSelectedItem:I}=c,C=E.useCallback(()=>{if(a.trigger&&a.valueNode&&u&&m&&_&&x&&A){const P=a.trigger.getBoundingClientRect(),R=m.getBoundingClientRect(),D=a.valueNode.getBoundingClientRect(),k=A.getBoundingClientRect();if(a.dir!=="rtl"){const De=k.left-R.left,Ue=D.left-De,bt=P.left-Ue,kt=P.width+bt,sn=Math.max(kt,R.width),Ft=window.innerWidth-fi,Tt=Vb(Ue,[fi,Ft-sn]);u.style.minWidth=kt+"px",u.style.left=Tt+"px"}else{const De=R.right-k.right,Ue=window.innerWidth-D.right-De,bt=window.innerWidth-P.right-Ue,kt=P.width+bt,sn=Math.max(kt,R.width),Ft=window.innerWidth-fi,Tt=Vb(Ue,[fi,Ft-sn]);u.style.minWidth=kt+"px",u.style.right=Tt+"px"}const $=y(),z=window.innerHeight-fi*2,M=_.scrollHeight,ie=window.getComputedStyle(m),K=parseInt(ie.borderTopWidth,10),J=parseInt(ie.paddingTop,10),X=parseInt(ie.borderBottomWidth,10),q=parseInt(ie.paddingBottom,10),Q=K+J+M+q+X,Z=Math.min(x.offsetHeight*5,Q),U=window.getComputedStyle(_),Y=parseInt(U.paddingTop,10),le=parseInt(U.paddingBottom,10),be=P.top+P.height/2-fi,ve=z-be,de=x.offsetHeight/2,me=x.offsetTop+de,Se=K+J+me,Pe=Q-Se;if(Se<=be){const De=x===$[$.length-1].ref.current;u.style.bottom="0px";const Ue=m.clientHeight-_.offsetTop-_.offsetHeight,bt=Math.max(ve,de+(De?le:0)+Ue+X),kt=Se+bt;u.style.height=kt+"px"}else{const De=x===$[0].ref.current;u.style.top="0px";const bt=Math.max(be,K+_.offsetTop+(De?Y:0)+de)+Pe;u.style.height=bt+"px",_.scrollTop=Se-be+_.offsetTop}u.style.margin=`${fi}px 0`,u.style.minHeight=Z+"px",u.style.maxHeight=z+"px",r==null||r(),requestAnimationFrame(()=>b.current=!0)}},[y,a.trigger,a.valueNode,u,m,_,x,A,a.dir,r]);Gt(()=>C(),[C]);const[O,V]=E.useState();Gt(()=>{m&&V(window.getComputedStyle(m).zIndex)},[m]);const B=E.useCallback(P=>{P&&S.current===!0&&(C(),I==null||I(),S.current=!1)},[C,I]);return l.jsx(o$,{scope:t,contentWrapper:u,shouldExpandOnScrollRef:b,onScrollButtonChange:B,children:l.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:O},children:l.jsx(Ke.div,{...s,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});ZI.displayName=s$;var i$="SelectPopperPosition",ty=E.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=fi,...a}=n,c=$m(t);return l.jsx(wS,{...c,...a,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ty.displayName=i$;var[o$,Vx]=jc(Ma,{}),ny="SelectViewport",ej=E.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,a=Wo(ny,t),c=Vx(ny,t),u=xt(e,a.onViewportChange),h=E.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(Vm.Slot,{scope:t,children:l.jsx(Ke.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:u,style:{position:"relative",flex:1,overflow:"auto",...s.style},onScroll:ze(s.onScroll,m=>{const g=m.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:y}=c;if(y!=null&&y.current&&v){const b=Math.abs(h.current-g.scrollTop);if(b>0){const S=window.innerHeight-fi*2,_=parseFloat(v.style.minHeight),x=parseFloat(v.style.height),A=Math.max(_,x);if(A<S){const I=A+b,C=Math.min(S,I),O=I-C;v.style.height=C+"px",v.style.bottom==="0px"&&(g.scrollTop=O>0?O:0,v.style.justifyContent="flex-end")}}}h.current=g.scrollTop})})})]})});ej.displayName=ny;var tj="SelectGroup",[a$,l$]=jc(tj),c$=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=yo();return l.jsx(a$,{scope:t,id:s,children:l.jsx(Ke.div,{role:"group","aria-labelledby":s,...r,ref:e})})});c$.displayName=tj;var nj="SelectLabel",rj=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=l$(nj,t);return l.jsx(Ke.div,{id:s.id,...r,ref:e})});rj.displayName=nj;var Xf="SelectItem",[u$,sj]=jc(Xf),ij=E.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:a,...c}=n,u=qo(Xf,t),h=Wo(Xf,t),m=u.value===r,[g,v]=E.useState(a??""),[y,b]=E.useState(!1),S=xt(e,A=>{var I;return(I=h.itemRefCallback)==null?void 0:I.call(h,A,r,s)}),_=yo(),x=()=>{s||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(u$,{scope:t,value:r,disabled:s,textId:_,isSelected:m,onItemTextChange:E.useCallback(A=>{v(I=>I||((A==null?void 0:A.textContent)??"").trim())},[]),children:l.jsx(Vm.ItemSlot,{scope:t,value:r,disabled:s,textValue:g,children:l.jsx(Ke.div,{role:"option","aria-labelledby":_,"data-highlighted":y?"":void 0,"aria-selected":m&&y,"data-state":m?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...c,ref:S,onFocus:ze(c.onFocus,()=>b(!0)),onBlur:ze(c.onBlur,()=>b(!1)),onPointerUp:ze(c.onPointerUp,x),onPointerMove:ze(c.onPointerMove,A=>{var I;s?(I=h.onItemLeave)==null||I.call(h):A.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ze(c.onPointerLeave,A=>{var I;A.currentTarget===document.activeElement&&((I=h.onItemLeave)==null||I.call(h))}),onKeyDown:ze(c.onKeyDown,A=>{var C;((C=h.searchRef)==null?void 0:C.current)!==""&&A.key===" "||(Y9.includes(A.key)&&x(),A.key===" "&&A.preventDefault())})})})})});ij.displayName=Xf;var Eu="SelectItemText",oj=E.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...a}=n,c=qo(Eu,t),u=Wo(Eu,t),h=sj(Eu,t),m=e$(Eu,t),[g,v]=E.useState(null),y=xt(e,A=>v(A),h.onItemTextChange,A=>{var I;return(I=u.itemTextRefCallback)==null?void 0:I.call(u,A,h.value,h.disabled)}),b=g==null?void 0:g.textContent,S=E.useMemo(()=>l.jsx("option",{value:h.value,disabled:h.disabled,children:b},h.value),[h.disabled,h.value,b]),{onNativeOptionAdd:_,onNativeOptionRemove:x}=m;return Gt(()=>(_(S),()=>x(S)),[_,x,S]),l.jsxs(l.Fragment,{children:[l.jsx(Ke.span,{id:h.textId,...a,ref:y}),h.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Fa.createPortal(a.children,c.valueNode):null]})});oj.displayName=Eu;var aj="SelectItemIndicator",lj=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return sj(aj,t).isSelected?l.jsx(Ke.span,{"aria-hidden":!0,...r,ref:e}):null});lj.displayName=aj;var ry="SelectScrollUpButton",cj=E.forwardRef((n,e)=>{const t=Wo(ry,n.__scopeSelect),r=Vx(ry,n.__scopeSelect),[s,a]=E.useState(!1),c=xt(e,r.onScrollButtonChange);return Gt(()=>{if(t.viewport&&t.isPositioned){let u=function(){const m=h.scrollTop>0;a(m)};const h=t.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),s?l.jsx(dj,{...n,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=t;u&&h&&(u.scrollTop=u.scrollTop-h.offsetHeight)}}):null});cj.displayName=ry;var sy="SelectScrollDownButton",uj=E.forwardRef((n,e)=>{const t=Wo(sy,n.__scopeSelect),r=Vx(sy,n.__scopeSelect),[s,a]=E.useState(!1),c=xt(e,r.onScrollButtonChange);return Gt(()=>{if(t.viewport&&t.isPositioned){let u=function(){const m=h.scrollHeight-h.clientHeight,g=Math.ceil(h.scrollTop)<m;a(g)};const h=t.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),s?l.jsx(dj,{...n,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=t;u&&h&&(u.scrollTop=u.scrollTop+h.offsetHeight)}}):null});uj.displayName=sy;var dj=E.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,a=Wo("SelectScrollButton",t),c=E.useRef(null),u=Um(t),h=E.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return E.useEffect(()=>()=>h(),[h]),Gt(()=>{var g;const m=u().find(v=>v.ref.current===document.activeElement);(g=m==null?void 0:m.ref.current)==null||g.scrollIntoView({block:"nearest"})},[u]),l.jsx(Ke.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ze(s.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:ze(s.onPointerMove,()=>{var m;(m=a.onItemLeave)==null||m.call(a),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:ze(s.onPointerLeave,()=>{h()})})}),d$="SelectSeparator",hj=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return l.jsx(Ke.div,{"aria-hidden":!0,...r,ref:e})});hj.displayName=d$;var iy="SelectArrow",h$=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=$m(t),a=qo(iy,t),c=Wo(iy,t);return a.open&&c.position==="popper"?l.jsx(_S,{...s,...r,ref:e}):null});h$.displayName=iy;function fj(n){return n===""||n===void 0}var mj=E.forwardRef((n,e)=>{const{value:t,...r}=n,s=E.useRef(null),a=xt(e,s),c=VC(t);return E.useEffect(()=>{const u=s.current,h=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(h,"value").set;if(c!==t&&g){const v=new Event("change",{bubbles:!0});g.call(u,t),u.dispatchEvent(v)}},[c,t]),l.jsx(nd,{asChild:!0,children:l.jsx("select",{...r,ref:a,defaultValue:t})})});mj.displayName="BubbleSelect";function pj(n){const e=_n(n),t=E.useRef(""),r=E.useRef(0),s=E.useCallback(c=>{const u=t.current+c;e(u),function h(m){t.current=m,window.clearTimeout(r.current),m!==""&&(r.current=window.setTimeout(()=>h(""),1e3))}(u)},[e]),a=E.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,a]}function gj(n,e,t){const s=e.length>1&&Array.from(e).every(m=>m===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let c=f$(n,Math.max(a,0));s.length===1&&(c=c.filter(m=>m!==t));const h=c.find(m=>m.textValue.toLowerCase().startsWith(s.toLowerCase()));return h!==t?h:void 0}function f$(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var m$=BI,vj=WI,p$=KI,g$=GI,v$=QI,yj=YI,y$=ej,xj=rj,wj=ij,x$=oj,w$=lj,_j=cj,Ej=uj,bj=hj;const _$=m$,E$=p$,Sj=E.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(vj,{ref:r,className:et("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,l.jsx(g$,{asChild:!0,children:l.jsx(F1,{className:"h-4 w-4 opacity-50"})})]}));Sj.displayName=vj.displayName;const Nj=E.forwardRef(({className:n,...e},t)=>l.jsx(_j,{ref:t,className:et("flex cursor-default items-center justify-center py-1",n),...e,children:l.jsx(vR,{className:"h-4 w-4"})}));Nj.displayName=_j.displayName;const Tj=E.forwardRef(({className:n,...e},t)=>l.jsx(Ej,{ref:t,className:et("flex cursor-default items-center justify-center py-1",n),...e,children:l.jsx(F1,{className:"h-4 w-4"})}));Tj.displayName=Ej.displayName;const Cj=E.forwardRef(({className:n,children:e,position:t="popper",...r},s)=>l.jsx(v$,{children:l.jsxs(yj,{ref:s,className:et("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[l.jsx(Nj,{}),l.jsx(y$,{className:et("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),l.jsx(Tj,{})]})}));Cj.displayName=yj.displayName;const b$=E.forwardRef(({className:n,...e},t)=>l.jsx(xj,{ref:t,className:et("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));b$.displayName=xj.displayName;const Ij=E.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(wj,{ref:r,className:et("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(w$,{children:l.jsx(gR,{className:"h-4 w-4"})})}),l.jsx(x$,{children:e})]}));Ij.displayName=wj.displayName;const S$=E.forwardRef(({className:n,...e},t)=>l.jsx(bj,{ref:t,className:et("-mx-1 my-1 h-px bg-muted",n),...e}));S$.displayName=bj.displayName;function jj({lectureId:n,onClose:e,onSave:t}){const[r,s]=E.useState({title:"",description:"",fileUrl:"",fileType:"",fileSize:""}),[a,c]=E.useState(!1),u=["PDF","DOCX","PPTX","XLSX","TXT","ZIP","MP3","MP4","JPG","PNG"],h=async m=>{m.preventDefault(),c(!0);try{const g={...r,id:`file_${Date.now()}`,lectureId:n,uploadedAt:new Date,uploadedBy:"Current User"};t(g)}catch(g){console.error("Error saving file:",g)}finally{c(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(re,{variant:"ghost",onClick:e,children:[l.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Add File"}),l.jsx("p",{className:"text-muted-foreground",children:"Add a file resource to the lecture"})]})]})}),l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsxs(Xe,{className:"flex items-center gap-2",children:[l.jsx($s,{className:"h-5 w-5 text-blue-600"}),"File Information"]}),l.jsx(At,{children:"Upload or link to educational files"})]}),l.jsxs(we,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"title",children:"File Title *"}),l.jsx(ke,{id:"title",placeholder:"e.g., Anatomy Reference Guide",value:r.title,onChange:m=>s(g=>({...g,title:m.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"description",children:"Description"}),l.jsx(Ni,{id:"description",placeholder:"Describe the file content...",value:r.description,onChange:m=>s(g=>({...g,description:m.target.value})),rows:3})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"fileType",children:"File Type *"}),l.jsxs(_$,{value:r.fileType,onValueChange:m=>s(g=>({...g,fileType:m})),children:[l.jsx(Sj,{children:l.jsx(E$,{placeholder:"Select file type"})}),l.jsx(Cj,{children:u.map(m=>l.jsx(Ij,{value:m,children:m},m))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"fileSize",children:"File Size"}),l.jsx(ke,{id:"fileSize",placeholder:"e.g., 2.5 MB",value:r.fileSize,onChange:m=>s(g=>({...g,fileSize:m.target.value}))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"fileUrl",children:"File URL *"}),l.jsx(ke,{id:"fileUrl",placeholder:"https://example.com/file.pdf or /uploads/file.pdf",value:r.fileUrl,onChange:m=>s(g=>({...g,fileUrl:m.target.value})),required:!0}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"You can upload to Firebase Storage or use external links"})]})]})]}),r.title&&l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Preview"}),l.jsx(At,{children:"How the file will appear in the lecture"})]}),l.jsx(we,{children:l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx($s,{className:"h-8 w-8 text-blue-600"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-medium",children:r.title}),r.description&&l.jsx("p",{className:"text-sm text-muted-foreground",children:r.description}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.fileType&&l.jsx(rn,{variant:"secondary",children:r.fileType}),r.fileSize&&l.jsx(rn,{variant:"outline",children:r.fileSize})]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(re,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(re,{type:"submit",disabled:a,children:[l.jsx(Vo,{className:"h-4 w-4 mr-2"}),a?"Adding...":"Add File"]})]})]})]})}function Aj({lectureId:n,onClose:e,onSave:t}){const[r,s]=E.useState({title:"",description:"",url:"",duration:"",thumbnailUrl:"",platform:"YouTube"}),[a,c]=E.useState(!1),u=async v=>{v.preventDefault(),c(!0);try{const y={...r,id:`video_${Date.now()}`,lectureId:n,uploadedAt:new Date,uploadedBy:"Current User"};t(y)}catch(y){console.error("Error saving video:",y)}finally{c(!1)}},h=v=>{const y=v.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);return y?y[1]:null},m=v=>{const y=h(v);return y?`https://img.youtube.com/vi/${y}/maxresdefault.jpg`:""},g=v=>{s(y=>({...y,url:v,thumbnailUrl:m(v)}))};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(re,{variant:"ghost",onClick:e,children:[l.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Add Video"}),l.jsx("p",{className:"text-muted-foreground",children:"Add a video resource to the lecture"})]})]})}),l.jsxs("form",{onSubmit:u,className:"space-y-6",children:[l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsxs(Xe,{className:"flex items-center gap-2",children:[l.jsx(Rs,{className:"h-5 w-5 text-green-600"}),"Video Information"]}),l.jsx(At,{children:"Add YouTube videos or other video links"})]}),l.jsxs(we,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"title",children:"Video Title *"}),l.jsx(ke,{id:"title",placeholder:"e.g., Introduction to Human Anatomy",value:r.title,onChange:v=>s(y=>({...y,title:v.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"description",children:"Description"}),l.jsx(Ni,{id:"description",placeholder:"Describe the video content...",value:r.description,onChange:v=>s(y=>({...y,description:v.target.value})),rows:3})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"url",children:"Video URL *"}),l.jsx(ke,{id:"url",placeholder:"https://youtube.com/watch?v=... or https://vimeo.com/...",value:r.url,onChange:v=>g(v.target.value),required:!0}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Supports YouTube, Vimeo, and direct video links"})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"duration",children:"Duration"}),l.jsx(ke,{id:"duration",placeholder:"e.g., 45:30",value:r.duration,onChange:v=>s(y=>({...y,duration:v.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"platform",children:"Platform"}),l.jsx(ke,{id:"platform",value:r.platform,onChange:v=>s(y=>({...y,platform:v.target.value})),disabled:!0})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"thumbnailUrl",children:"Thumbnail URL"}),l.jsx(ke,{id:"thumbnailUrl",placeholder:"Auto-generated for YouTube videos",value:r.thumbnailUrl,onChange:v=>s(y=>({...y,thumbnailUrl:v.target.value}))})]})]})]}),r.title&&l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Preview"}),l.jsx(At,{children:"How the video will appear in the lecture"})]}),l.jsx(we,{children:l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"relative",children:[r.thumbnailUrl?l.jsx("img",{src:r.thumbnailUrl,alt:r.title,className:"w-24 h-16 object-cover rounded"}):l.jsx("div",{className:"w-24 h-16 bg-gray-200 rounded flex items-center justify-center",children:l.jsx(lv,{className:"h-6 w-6 text-gray-400"})}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx(Rs,{className:"h-8 w-8 text-white opacity-80"})})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-medium",children:r.title}),r.description&&l.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:r.description}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.duration&&l.jsxs(rn,{variant:"secondary",className:"text-xs",children:[l.jsx(xf,{className:"h-3 w-3 mr-1"}),r.duration]}),l.jsxs(rn,{variant:"outline",className:"text-xs",children:[l.jsx(ER,{className:"h-3 w-3 mr-1"}),r.platform]})]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(re,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(re,{type:"submit",disabled:a,children:[l.jsx(Vo,{className:"h-4 w-4 mr-2"}),a?"Adding...":"Add Video"]})]})]})]})}function zm({subjectId:n,subjectName:e,yearType:t,onClose:r,onSave:s}){const[a,c]=E.useState({name:"",description:"",order:1,imageUrl:""}),[u,h]=E.useState(!1),m=async g=>{g.preventDefault(),h(!0);try{const v={...a,subjectId:n,createdAt:new Date,uploadedBy:"Current User"};s(v)}catch(v){console.error("Error saving lecture:",v)}finally{h(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(re,{variant:"ghost",onClick:r,children:[l.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Add Lecture"}),l.jsxs("p",{className:"text-muted-foreground",children:["Add a new lecture to ",e]})]})]})}),l.jsxs("form",{onSubmit:m,className:"space-y-6",children:[l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsxs(Xe,{className:"flex items-center gap-2",children:[t==="basic"?l.jsx(Nu,{className:"h-5 w-5 text-blue-600"}):l.jsx(Tu,{className:"h-5 w-5 text-red-600"}),"Lecture Information"]}),l.jsx(At,{children:"Basic information about the lecture"})]}),l.jsxs(we,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"name",children:"Lecture Name *"}),l.jsx(ke,{id:"name",placeholder:"e.g., Introduction to Cell Biology",value:a.name,onChange:g=>c(v=>({...v,name:g.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"description",children:"Description"}),l.jsx(Ni,{id:"description",placeholder:"Describe what this lecture covers...",value:a.description,onChange:g=>c(v=>({...v,description:g.target.value})),rows:4})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"order",children:"Order"}),l.jsx(ke,{id:"order",type:"number",min:"1",value:a.order,onChange:g=>c(v=>({...v,order:parseInt(g.target.value)||1}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),l.jsx(ke,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:a.imageUrl,onChange:g=>c(v=>({...v,imageUrl:g.target.value}))})]})]})]})]}),a.name&&l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Preview"}),l.jsxs(At,{children:["How the lecture will appear in ",e]})]}),l.jsx(we,{children:l.jsx("div",{className:"p-4 border rounded-lg bg-secondary/20",children:l.jsxs("div",{className:"flex items-start gap-3",children:[a.imageUrl?l.jsx("img",{src:a.imageUrl,alt:a.name,className:"w-16 h-16 object-cover rounded",onError:g=>{g.currentTarget.style.display="none"}}):l.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center",children:l.jsx(ls,{className:"h-6 w-6 text-gray-400"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-lg",children:a.name}),a.description&&l.jsx("p",{className:"text-sm text-muted-foreground",children:a.description}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Lecture ",a.order," â€¢ ",e]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(re,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),l.jsxs(re,{type:"submit",disabled:u,children:[l.jsx(Vo,{className:"h-4 w-4 mr-2"}),u?"Adding...":"Add Lecture"]})]})]})]})}async function pr(n){let e,t;const r="".replace(/\/$/,"");try{const I=await fetch(`${r}/api/cloudinary/config`);if(I.ok)try{const C=await I.json();e=C.cloudName||e,t=C.uploadPreset||C.upload_preset||t}catch{const C=I.headers.get("x-cloudinary-cloudname"),O=I.headers.get("x-cloudinary-upload-preset");C&&(e=e||C),O&&(t=t||O)}}catch{}if(!e)try{const I=localStorage.getItem("cloudinary.cloudName"),C=localStorage.getItem("cloudinary.uploadPreset");I&&(e=I,t=t||C||t)}catch{}if(!e)throw new Error("Cloudinary cloud name is not configured. Set VITE_CLOUDINARY_CLOUD_NAME in your environment or provide server config.");const s=`https://api.cloudinary.com/v1_1/${e}/upload`;try{const I=await Zg(n);if(I&&typeof I=="string"&&I.startsWith("http"))return I}catch(I){const C=String((I==null?void 0:I.message)||I||"");console.warn("Server upload failed, falling back to client upload:",C)}async function a(I){if(I.bodyUsed)throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.");try{const C=I.clone();try{return{json:await C.json(),text:null}}catch{}}catch{if(I.bodyUsed)throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.")}try{const C=await I.text();try{return{json:JSON.parse(C),text:C}}catch{return{json:null,text:C}}}catch(C){throw new Error("Could not read response body: "+String(C))}}async function c(I,C){const O=async(B,P)=>{const R=await fetch(B,P),D=await a(R).catch(k=>{throw k});return{res:R,body:D}},V=typeof I=="string"?I:I.url;try{return await O(V,C)}catch(B){const P=String((B==null?void 0:B.message)||B||"").toLowerCase();if(P.includes("response body already read")||P.includes("body already read")){const R=V+(V.includes("?")?`&_retry=${Date.now()}`:`?_retry=${Date.now()}`);try{return await O(R,C)}catch{}}if(P.includes("failed to fetch")||P.includes("networkerror")||P.includes("network request failed")||P.includes("script error")||P.includes("response body already read")||P.includes("body already read"))try{return await(async()=>await new Promise((R,D)=>{const k=new XMLHttpRequest;let $=C&&C.method||"GET",z=!1;try{if(k.open($,V,!0),C&&C.headers){const M=C.headers;Object.keys(M).forEach(ie=>{try{k.setRequestHeader(ie,M[ie])}catch{}})}if(k.onreadystatechange=()=>{if(k.readyState!==4)return;const M=k.status||0,ie={};(k.getAllResponseHeaders()||"").split(`\r
`).forEach(Z=>{const U=Z.indexOf(":");if(U>0){const Y=Z.substring(0,U).trim().toLowerCase(),le=Z.substring(U+1).trim();ie[Y]=le}});const J={ok:M>=200&&M<400,status:M,headers:{get:Z=>ie[Z.toLowerCase()]||null}},X=k.responseText;let q=null;try{q=X?JSON.parse(X):null}catch{q=null}R({res:J,body:{json:q,text:X}})},k.onerror=()=>D(new Error("XHR network error")),k.ontimeout=()=>D(new Error("XHR timeout")),C&&C.body)try{if(C.body instanceof FormData)z=!0,k.send(C.body);else if(typeof C.body=="string")k.send(C.body);else try{k.send(JSON.stringify(C.body))}catch{k.send(String(C.body))}}catch(M){D(M)}else k.send()}catch(M){D(M)}}))()}catch{}throw B}}if(t){const I=new FormData;I.append("file",n),I.append("upload_preset",t);const{res:C,body:O}=await c(s,{method:"POST",body:I});if(!C.ok){const V=O!=null&&O.json?JSON.stringify(O.json):(O==null?void 0:O.text)||"";throw new Error(`Cloudinary upload failed: ${C.status} ${V}`)}if(O.json&&(O.json.secure_url||O.json.url))return O.json.secure_url||O.json.url;if(O.text&&typeof O.text=="string"&&O.text.startsWith("http"))return O.text;throw new Error("Cloudinary upload returned unexpected response.")}const u=(()=>{try{return localStorage.getItem("cloudinary.apiKey")}catch{return null}})()||null;let h,m;try{const I=await c(`${r}/api/cloudinary/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:u})});h=I.res,m=I.body}catch(I){const C=String((I==null?void 0:I.message)||I||"");if(C.toLowerCase().includes("response body already read")||C.toLowerCase().includes("body already read")){try{const O=await fetch(`${r}/api/cloudinary/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:u})}),V=O.headers.get("x-cloudinary-signature"),B=O.headers.get("x-cloudinary-timestamp"),P=O.headers.get("x-cloudinary-apikey"),R=O.headers.get("x-cloudinary-cloudname"),D=O.headers.get("x-cloudinary-upload-preset");if(V&&B){const k=P||u||null,$=V,z=Number(B);R&&(e=e||R);const M=new FormData;M.append("file",n),k&&M.append("api_key",k),M.append("timestamp",String(z)),M.append("signature",$);const{res:ie,body:K}=await c(s,{method:"POST",body:M});if(!ie.ok){const J=K!=null&&K.json?JSON.stringify(K.json):(K==null?void 0:K.text)||"",X=(J||"").toLowerCase();if(X.includes("missing required parameter - api_key")||X.includes("missing required parameter - api key")||X.includes("missing required parameter 'api_key'")){const q=u||(()=>{try{return localStorage.getItem("cloudinary.apiKey")}catch{return null}})();if(q){const Q=new FormData;Q.append("file",n),Q.append("api_key",q),Q.append("timestamp",String(z)),Q.append("signature",$);const{res:Z,body:U}=await c(s,{method:"POST",body:Q});if(!Z.ok){const Y=U!=null&&U.json?JSON.stringify(U.json):(U==null?void 0:U.text)||"";throw new Error(`Cloudinary signed upload retry failed: ${Z.status} ${Y}`)}if(U.json&&(U.json.secure_url||U.json.url))return U.json.secure_url||U.json.url;if(U.text&&typeof U.text=="string"&&U.text.startsWith("http"))return U.text;throw new Error("Cloudinary signed upload retry returned unexpected response.")}if(t){const Q=new FormData;Q.append("file",n),Q.append("upload_preset",t);const Z=await fetch(s,{method:"POST",body:Q});if(!Z.ok){const le=await Z.text().catch(()=>"");throw new Error(`Cloudinary unsigned fallback failed: ${Z.status} ${le}`)}const U=await Z.json().catch(()=>null);if(U&&(U.secure_url||U.url))return U.secure_url||U.url;const Y=await Z.text().catch(()=>"");if(Y&&Y.startsWith("http"))return Y;throw new Error("Cloudinary unsigned fallback returned unexpected response.")}}throw new Error(`Cloudinary signed upload failed: ${ie.status} ${J}`)}if(K.json&&(K.json.secure_url||K.json.url))return K.json.secure_url||K.json.url;if(K.text&&typeof K.text=="string"&&K.text.startsWith("http"))return K.text;throw new Error("Cloudinary signed upload returned unexpected response.")}if(D){const k=new FormData;k.append("file",n),k.append("upload_preset",D);const $=await fetch(s,{method:"POST",body:k});if(!$.ok){const ie=await $.text().catch(()=>"");throw new Error(`Cloudinary upload fallback failed: ${$.status} ${ie}`)}const z=await $.json().catch(()=>null);if(z&&(z.secure_url||z.url))return z.secure_url||z.url;const M=await $.text().catch(()=>"");if(M&&M.startsWith("http"))return M;throw new Error("Cloudinary fallback upload returned unexpected response.")}}catch{}try{const O=await Zg(n);if(O&&typeof O=="string"&&O.startsWith("http"))return O}catch{}throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.")}throw I}if(!h.ok){const I=m!=null&&m.json?JSON.stringify(m.json):(m==null?void 0:m.text)||"";throw new Error(`Cloudinary signing failed: ${h.status} ${I}`)}const g=m.json||{},{signature:v,apiKey:y,timestamp:b}=g,S=y||u||null;if(!v||!b)throw new Error("Cloudinary signing endpoint returned invalid data.");if(!S){if(t){const I=new FormData;I.append("file",n),I.append("upload_preset",t);const{res:C,body:O}=await c(s,{method:"POST",body:I});if(!C.ok){const V=O!=null&&O.json?JSON.stringify(O.json):(O==null?void 0:O.text)||"";throw new Error(`Cloudinary unsigned upload (preset) failed: ${C.status} ${V}`)}if(O.json&&(O.json.secure_url||O.json.url))return O.json.secure_url||O.json.url;if(O.text&&typeof O.text=="string"&&O.text.startsWith("http"))return O.text;throw new Error("Cloudinary unsigned upload (preset) returned unexpected response.")}try{const I=await Zg(n);if(I&&typeof I=="string"&&I.startsWith("http"))return I}catch{}throw new Error("Cloudinary signing did not return an API key and no unsigned preset is configured. Set CLOUDINARY_API_KEY on the server, or set CLOUDINARY_UPLOAD_PRESET, or set a public API key in localStorage (for testing).")}const _=new FormData;_.append("file",n),_.append("api_key",S),_.append("timestamp",String(b)),_.append("signature",v);const{res:x,body:A}=await c(s,{method:"POST",body:_});if(!x.ok){const I=A!=null&&A.json?JSON.stringify(A.json):(A==null?void 0:A.text)||"",C=(I||"").toLowerCase();if(C.includes("missing required parameter - api_key")||C.includes("missing required parameter - api key")||C.includes("missing required parameter 'api_key'")){const O=u||(()=>{try{return localStorage.getItem("cloudinary.apiKey")}catch{return null}})();if(O){const V=new FormData;V.append("file",n),V.append("api_key",O),V.append("timestamp",String(b)),V.append("signature",v);const{res:B,body:P}=await c(s,{method:"POST",body:V});if(!B.ok){const R=P!=null&&P.json?JSON.stringify(P.json):(P==null?void 0:P.text)||"";throw new Error(`Cloudinary signed upload retry failed: ${B.status} ${R}`)}if(P.json&&(P.json.secure_url||P.json.url))return P.json.secure_url||P.json.url;if(P.text&&typeof P.text=="string"&&P.text.startsWith("http"))return P.text;throw new Error("Cloudinary signed upload retry returned unexpected response.")}if(t){const V=new FormData;V.append("file",n),V.append("upload_preset",t);const B=await fetch(s,{method:"POST",body:V});if(!B.ok){const D=await B.text().catch(()=>"");throw new Error(`Cloudinary unsigned fallback failed: ${B.status} ${D}`)}const P=await B.json().catch(()=>null);if(P&&(P.secure_url||P.url))return P.secure_url||P.url;const R=await B.text().catch(()=>"");if(R&&R.startsWith("http"))return R;throw new Error("Cloudinary unsigned fallback returned unexpected response.")}}throw new Error(`Cloudinary signed upload failed: ${x.status} ${I}`)}if(A.json&&(A.json.secure_url||A.json.url))return A.json.secure_url||A.json.url;if(A.text&&typeof A.text=="string"&&A.text.startsWith("http"))return A.text;throw new Error("Cloudinary signed upload returned unexpected response.")}async function Zg(n){const e=await new Promise((t,r)=>{const s=new FileReader;s.onload=()=>t(s.result),s.onerror=()=>r(new Error("Failed to read file")),s.readAsDataURL(n)});return await new Promise((t,r)=>{try{const s=new XMLHttpRequest;s.open("POST",`${API_BASE}/api/cloudinary/upload`,!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(s.readyState!==4)return;const a=s.status||0,c=s.responseText||"";if(a<200||a>=400){let u=c;try{const h=c?JSON.parse(c):null;h&&h.error&&(u=h.error)}catch{}return r(new Error(`Server upload failed: ${a} ${u}`))}try{const u=c?JSON.parse(c):{};return u&&(u.secure_url||u.url)?t(u.secure_url||u.url):r(new Error("Server upload returned unexpected response"))}catch{return r(new Error("Server upload returned non-JSON response"))}},s.onerror=()=>r(new Error("Server upload XHR error")),s.send(JSON.stringify({file:e,filename:n.name}))}catch(s){r(s)}}).catch(async t=>{try{const r=String((t==null?void 0:t.message)||"").toLowerCase();if(r.includes("cloudinary not configured")||r.includes("404")||r.includes("server upload failed"))return await new Promise((s,a)=>{try{const c=new XMLHttpRequest;c.open("POST",`${API_BASE}/api/imagekit/upload`,!0),c.setRequestHeader("Content-Type","application/json"),c.onreadystatechange=()=>{if(c.readyState!==4)return;const u=c.status||0,h=c.responseText||"";if(u<200||u>=400){let m=h;try{const g=h?JSON.parse(h):null;g&&g.error&&(m=g.error)}catch{}return a(new Error(`ImageKit server upload failed: ${u} ${m}`))}try{const m=h?JSON.parse(h):{};return m&&(m.url||m.filePath)?s(m.url||m.filePath):a(new Error("ImageKit server upload returned unexpected response"))}catch{return a(new Error("ImageKit server upload returned non-JSON response"))}},c.onerror=()=>a(new Error("ImageKit server upload XHR error")),c.send(JSON.stringify({file:e,filename:n.name}))}catch(c){a(c)}})}catch{}throw t})}function Na(n,e,t){try{n&&localStorage.setItem("cloudinary.cloudName",n),e&&localStorage.setItem("cloudinary.uploadPreset",e),t&&localStorage.setItem("cloudinary.apiKey",t)}catch(r){console.warn("Could not persist Cloudinary config to localStorage",r)}}async function Hb(n,e){if(!n)throw new Error("No URL provided");return await new Promise((t,r)=>{try{const s=new XMLHttpRequest;s.open("POST",`${API_BASE}/api/cloudinary/upload`,!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(s.readyState!==4)return;const a=s.status||0,c=s.responseText||"";if(a<200||a>=400){let u=c;try{const h=c?JSON.parse(c):null;h&&h.error&&(u=h.error)}catch{}return r(new Error(`Server upload failed: ${a} ${u}`))}try{const u=c?JSON.parse(c):{};return u&&(u.secure_url||u.url)?t(u.secure_url||u.url):r(new Error("Server upload returned unexpected response"))}catch{return r(new Error("Server upload returned non-JSON response"))}},s.onerror=()=>r(new Error("Server upload XHR error")),s.send(JSON.stringify({file:n,filename:e||"remote"}))}catch(s){r(new Error("Failed to call server upload endpoint: "+String(s)))}})}const N$="".replace(/\/$/,"");async function T$(n,e){const t=await fetch(n,e);let r=null,s="";try{r=await t.json()}catch{try{s=await t.text()}catch{}}return{res:t,json:r,text:s}}async function To(n,e){let t;typeof n=="string"?t=n:t=await new Promise((u,h)=>{const m=new FileReader;m.onload=()=>u(m.result),m.onerror=()=>h(new Error("Failed to read file")),m.readAsDataURL(n)});const r=`${N$}/api/imagekit/upload`,{res:s,json:a,text:c}=await T$(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:t,filename:e})});if(!s.ok){const u=a?JSON.stringify(a):c||"";throw new Error(`ImageKit server upload failed: ${s.status} ${u}`)}if(a&&(a.url||a.filePath||a.name))return a.url||a.filePath||a.name;throw new Error("ImageKit server upload returned unexpected response.")}function C$(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[s,a]=E.useState(!1),[c,u]=E.useState(!1),[h,m]=E.useState(!1),[g,v]=E.useState(!1),[y,b]=E.useState(!1),[S,_]=E.useState(null),[x,A]=E.useState(null),[I,C]=E.useState(null),[O,V]=E.useState("basic"),[B,P]=E.useState({}),[R,D]=E.useState(null),[k,$]=E.useState(""),[z,M]=E.useState(""),[ie,K]=E.useState(""),[J,X]=E.useState(""),[q,Q]=E.useState(""),[Z,U]=E.useState(null),Y=wc(),le=Ii();Ee.useEffect(()=>{const Fe=new URLSearchParams(le.search).get("batch");U(Fe)},[le.search]);const be=(ae,Fe)=>{P(Le=>{var pt;return{...Le,[ae]:{videos:!1,files:!1,quizzes:!1,...Le[ae]||{},[Fe]:!((pt=Le[ae])!=null&&pt[Fe])}}})},{years:ve,batches:de,loading:me,error:Se,connectionStatus:Pe,retryConnection:Ce,updateYear:De,updateBatch:Ue,createSubject:bt,createLecture:kt,createYear:sn,createBatch:Ft,deleteBatch:Tt,deleteLecture:St,deleteSubject:wt,addVideo:En,addFile:gr,addQuiz:Ys}=Ic(),{news:vr}=Ax(),vs=(ae,Fe)=>{C(ae),A(Fe),r(null),a(!0)},Br=(ae,Fe)=>{console.log("ðŸ”„ Opening subject form for year:",ae.yearNumber,"type:",Fe),_({id:ae.id,number:ae.yearNumber}),V(Fe),u(!0)},Vt=(ae,Fe)=>{C(ae),V(Fe),b(!0)},It=(ae,Fe)=>{C(ae),A(Fe),m(!0)},tr=(ae,Fe)=>{C(ae),A(Fe),v(!0)};if(s)return l.jsx(RI,{quiz:t,onClose:()=>{a(!1),r(null),A(null)},onSave:async ae=>{I!=null&&I.id&&x&&await Ys(I.id,x,{title:ae.title,description:ae.description,questions:ae.questions||[],timeLimit:ae.timeLimit,passingScore:ae.passingScore}),a(!1),r(null),A(null)}});if(console.log("ðŸ” Render check - isSubjectFormOpen:",c,"selectedYear:",S),c)return console.log("ðŸ“ Rendering SubjectForm"),l.jsx(kI,{year:S==null?void 0:S.number,yearType:O,onClose:()=>{u(!1),_(null)},onSave:async ae=>{try{await bt({...ae,yearId:(S==null?void 0:S.id)||"",order:1}),u(!1),_(null)}catch(Fe){console.error("Error saving subject:",Fe),alert("Failed to save subject. Please try again.")}}});if(y)return l.jsx(zm,{subjectId:I==null?void 0:I.id,subjectName:I==null?void 0:I.name,yearType:O,onClose:()=>{b(!1),C(null)},onSave:async ae=>{try{await kt(ae),b(!1),C(null)}catch(Fe){console.error("Error saving lecture:",Fe),alert("Failed to save lecture. Please try again.")}}});if(h)return l.jsx(jj,{lectureId:x,onClose:()=>{m(!1),A(null)},onSave:async ae=>{I!=null&&I.id&&x&&await gr(I.id,x,ae),m(!1),A(null)}});if(g)return l.jsx(Aj,{lectureId:x,onClose:()=>{v(!1),A(null)},onSave:async ae=>{I!=null&&I.id&&x&&await En(I.id,x,ae),v(!1),A(null)}});const nr=(ae,Fe)=>{var Le,pt;return l.jsxs(xe,{className:`border-l-4 ${Fe==="basic"?"border-l-blue-500":"border-l-red-500"}`,children:[l.jsx(Ge,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[ae.imageUrl?l.jsx("img",{src:ae.imageUrl,alt:`Year ${ae.yearNumber}`,className:"w-24 h-24 object-cover rounded-md flex-shrink-0",onError:nt=>{nt.currentTarget.style.display="none"}}):l.jsx("div",{className:"w-24 h-24 rounded-md flex-shrink-0 bg-muted flex items-center justify-center",children:Fe==="basic"?l.jsx(Nu,{className:"h-6 w-6 text-blue-600"}):l.jsx(Tu,{className:"h-6 w-6 text-red-600"})}),l.jsx(Xe,{className:"flex flex-col",children:R===ae.id?l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx(ke,{value:k,onChange:nt=>$(nt.target.value),className:"w-48",placeholder:"Batch name"}),l.jsx(re,{size:"sm",onClick:async()=>{try{await(De==null?void 0:De(ae.id,{batchName:k,batch_name:k})),D(null),$("")}catch(nt){console.error(nt),alert("Failed to save batch name")}},children:"Save"}),l.jsx(re,{variant:"ghost",size:"sm",onClick:()=>{D(null),$("")},children:"Cancel"})]}):l.jsx(l.Fragment,{children:ae.batchName?l.jsxs(l.Fragment,{children:[l.jsx(Hn,{to:`/admin/years/${ae.id}`,className:"text-lg font-bold text-foreground hover:underline",children:ae.batchName}),l.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[l.jsxs("span",{className:"text-sm text-muted",children:["Year ",ae.yearNumber]}),ae.name&&l.jsxs("span",{className:"ml-2",children:["â€¢ ",ae.name]}),ae.academicSupervisor&&l.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Academic Supervisor: ",ae.academicSupervisor]}),ae.cr&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["CR: ",ae.cr]}),ae.actor&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actor: ",ae.actor]})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs(Hn,{to:`/admin/years/${ae.id}`,className:"text-lg font-medium text-blue-600 hover:underline",children:["Year ",ae.yearNumber]}),l.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[ae.name?l.jsx("span",{className:"mr-2",children:ae.name}):l.jsx("span",{className:"italic",children:"No batch name"}),ae.academicSupervisor&&l.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Academic Supervisor: ",ae.academicSupervisor]}),ae.cr&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["CR: ",ae.cr]}),ae.actor&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actor: ",ae.actor]})]})]})})})]}),l.jsx("div",{className:"flex items-center gap-2"})]})}),l.jsx(we,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ls,{className:"h-4 w-4 text-blue-600"}),l.jsx("span",{className:"font-semibold",children:"Subjects"}),l.jsxs(rn,{variant:"secondary",children:[((Le=ae.subjects)==null?void 0:Le.length)||0," subjects"]}),l.jsxs(rn,{variant:"outline",children:[(vr||[]).filter(nt=>nt.yearId===ae.id).length," ","news"]})]}),l.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>Br(ae,Fe),className:"flex items-center gap-1",children:[l.jsx(Jt,{className:"h-3 w-3"}),"Add Subject"]})]}),!ae.subjects||ae.subjects.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(ls,{className:"h-8 w-8 mx-auto mb-3 text-muted-foreground"}),l.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No subjects added yet"}),l.jsx(re,{variant:"outline",size:"sm",onClick:()=>Br(ae,Fe),children:"Add first subject"})]}):l.jsx("div",{className:"grid gap-4",children:(pt=ae.subjects)==null?void 0:pt.map(nt=>{var ht;return l.jsxs(xe,{className:"bg-secondary/10",children:[l.jsx(Ge,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[nt.imageUrl?l.jsx("img",{src:nt.imageUrl,alt:nt.name,className:"w-8 h-8 object-cover rounded",onError:Ne=>{Ne.currentTarget.style.display="none"}}):l.jsx(ls,{className:"h-5 w-5 text-blue-600"}),l.jsx(Hn,{to:`/admin/subjects/${nt.id}`,className:"font-medium text-lg text-blue-600 hover:underline",children:nt.name}),l.jsxs(rn,{variant:"outline",className:"text-xs",children:[((ht=nt.lectures)==null?void 0:ht.length)||0," lectures"]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>Vt(nt,Fe),className:"h-8 px-3 text-xs",children:[l.jsx(Jt,{className:"h-3 w-3 mr-1"}),"Add Lecture"]}),l.jsx(re,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:async()=>{if(confirm(`Delete subject "${nt.name}"? This will remove its lectures.`))try{await wt(nt.id)}catch(Ne){console.error(Ne),alert("Failed to delete subject")}},children:l.jsx(On,{className:"h-3 w-3"})})]})]})}),nt.lectures&&nt.lectures.length>0&&l.jsx(we,{className:"pt-0",children:l.jsxs("div",{className:"grid gap-3",children:[nt.lectures.slice(0,3).map(Ne=>{var ys,qe,ft,ct,Dt,Wt,rr,Gn,Ai;return l.jsx(xe,{className:"bg-background border",children:l.jsx(we,{className:"p-3",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:Ne.imageUrl?l.jsx("img",{src:Ne.imageUrl,alt:Ne.name,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(Rs,{className:"h-6 w-6 text-muted-foreground"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:Ne.name}),l.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:Ne.description||"No description available"}),l.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[l.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>be(Ne.id,"videos"),className:`h-6 px-2 text-xs ${(ys=B[Ne.id])!=null&&ys.videos?"bg-accent":""}`,children:[l.jsx(lv,{className:"h-3 w-3 mr-1"}),"Videos (",((qe=Ne.videos)==null?void 0:qe.length)||0,")"]}),l.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>be(Ne.id,"files"),className:`h-6 px-2 text-xs ${(ft=B[Ne.id])!=null&&ft.files?"bg-accent":""}`,children:[l.jsx($s,{className:"h-3 w-3 mr-1"}),"Files (",((ct=Ne.files)==null?void 0:ct.length)||0,")"]}),l.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>be(Ne.id,"quizzes"),className:`h-6 px-2 text-xs ${(Dt=B[Ne.id])!=null&&Dt.quizzes?"bg-accent":""}`,children:[l.jsx(yi,{className:"h-3 w-3 mr-1"}),"Quizzes (",((Wt=Ne.quizzes)==null?void 0:Wt.length)||0,")"]}),l.jsx(re,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${Ne.name}"?`))try{await St(nt.id,Ne.id)}catch(Qt){console.error(Qt),alert("Failed to delete lecture")}},children:l.jsx(On,{className:"h-3 w-3"})})]}),((rr=B[Ne.id])==null?void 0:rr.videos)&&l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Videos:"}),l.jsxs(re,{variant:"ghost",size:"xs",onClick:()=>tr(nt,Ne.id),className:"h-6 px-2 text-xs",children:[l.jsx(Jt,{className:"h-3 w-3 mr-1"})," Add"]})]}),l.jsxs("div",{className:"space-y-1",children:[Ne.videos&&Ne.videos.length>0?Ne.videos.slice(0,4).map(Qt=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(lv,{className:"h-3 w-3 text-blue-600"}),l.jsx("a",{href:Qt.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline truncate",children:Qt.title||Qt.name||"Untitled Video"})]},Qt.id)):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"}),Ne.videos&&Ne.videos.length>4&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",Ne.videos.length-4," more videos"]})]})]}),((Gn=B[Ne.id])==null?void 0:Gn.files)&&l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Files:"}),l.jsxs(re,{variant:"ghost",size:"xs",onClick:()=>It(nt,Ne.id),className:"h-6 px-2 text-xs",children:[l.jsx(Jt,{className:"h-3 w-3 mr-1"})," Add"]})]}),l.jsxs("div",{className:"space-y-1",children:[Ne.files&&Ne.files.length>0?Ne.files.slice(0,4).map(Qt=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx($s,{className:"h-3 w-3 text-green-600"}),l.jsx("a",{href:Qt.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-green-600 hover:underline truncate",children:Qt.title||Qt.name||"Untitled File"})]},Qt.id)):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"}),Ne.files&&Ne.files.length>4&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",Ne.files.length-4," more files"]})]})]}),((Ai=B[Ne.id])==null?void 0:Ai.quizzes)&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Quizzes:"}),l.jsxs(re,{variant:"ghost",size:"xs",onClick:()=>vs(nt,Ne.id),className:"h-6 px-2 text-xs",children:[l.jsx(Jt,{className:"h-3 w-3 mr-1"})," Add"]})]}),l.jsxs("div",{className:"space-y-1",children:[Ne.quizzes&&Ne.quizzes.length>0?Ne.quizzes.slice(0,4).map(Qt=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(yi,{className:"h-3 w-3 text-purple-600"}),l.jsx("span",{className:"text-xs text-purple-600",children:Qt.title||Qt.name||"Untitled Quiz"})]},Qt.id)):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"}),Ne.quizzes&&Ne.quizzes.length>4&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",Ne.quizzes.length-4," more quizzes"]})]})]})]})]})})},Ne.id)}),nt.lectures.length>3&&l.jsxs("div",{className:"text-center text-muted-foreground text-xs pt-2",children:["+",nt.lectures.length-3," more lectures"]})]})})]},nt.id)})})]})})]},ae.yearNumber)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Academic Years Management"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-muted-foreground",children:"Manage curriculum by academic years, subjects, and lectures"}),Pe==="connecting"&&l.jsxs("span",{className:"flex items-center gap-1 text-blue-600 font-medium text-sm",children:[l.jsx(Co,{className:"h-3 w-3 animate-spin"}),"Connecting..."]}),Pe==="connected"&&l.jsxs("span",{className:"flex items-center gap-1 text-green-600 font-medium text-sm",children:[l.jsx("div",{className:"h-2 w-2 bg-green-600 rounded-full"}),"Connected"]}),Pe==="offline"&&l.jsxs("span",{className:"flex items-center gap-1 text-orange-600 font-medium text-sm",children:[l.jsx("div",{className:"h-2 w-2 bg-orange-600 rounded-full"}),"Offline Mode"]})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs(E9,{children:[l.jsx(b9,{asChild:!0,children:l.jsxs(re,{children:[l.jsx(wR,{className:"h-4 w-4 mr-2"})," Add Batch"]})}),l.jsxs(CI,{children:[l.jsxs(II,{children:[l.jsx(AI,{children:"Add Batch"}),l.jsx(PI,{children:"Create a new batch for grouping years"})]}),l.jsxs("div",{className:"space-y-3 mt-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Batch name"}),l.jsx(ke,{value:J,onChange:ae=>X(ae.target.value),placeholder:"e.g., Batch A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"CR (optional)"}),l.jsx(ke,{value:q,onChange:ae=>Q(ae.target.value),placeholder:"Class representative"})]})]}),l.jsxs(jI,{className:"mt-4",children:[l.jsx(re,{onClick:async()=>{try{if(!J||!J.trim()){alert("Please provide a batch name");return}await(Ft==null?void 0:Ft({batchName:J.trim(),cr:q==null?void 0:q.trim()})),X(""),Q("");const ae=document.querySelector("[data-dialog-close]");ae&&ae.click(),alert("Batch created")}catch(ae){console.error(ae),alert("Failed to create batch")}},children:"Create"}),l.jsx(N9,{asChild:!0,children:l.jsx(re,{variant:"ghost",className:"ml-2","data-dialog-close":!0,children:"Cancel"})})]})]})]})})]}),me&&l.jsx(xe,{children:l.jsxs(we,{className:"text-center py-12",children:[l.jsx(Co,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading academic years..."})]})}),Se&&l.jsx(xe,{children:l.jsxs(we,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading years"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:Se}),l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx(re,{onClick:Ce,variant:"outline",children:"Retry Connection"}),l.jsx(re,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!me&&!Se&&l.jsxs(l.Fragment,{children:[l.jsx(xe,{children:l.jsx(we,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(mc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(ke,{placeholder:"Search lectures, subjects, or content...",value:n,onChange:ae=>e(ae.target.value),className:"pl-10"})]})})}),l.jsx("div",{className:"space-y-6",children:!de||de.length===0?l.jsx(xe,{children:l.jsxs(we,{className:"text-center py-12",children:[l.jsx(ls,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No batches found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"Create a batch to start adding academic years."})]})}):Z?(()=>{const ae=(de||[]).find(Le=>Le.id===Z)||null,Fe=(ve||[]).filter(Le=>(Le.batchId||Le.batch_name)===Z);return l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[ae!=null&&ae.imageUrl?l.jsx("img",{src:ae.imageUrl,alt:ae.batchName,className:"w-24 h-24 object-cover rounded-md flex-shrink-0"}):l.jsx("div",{className:"w-24 h-24 rounded-md flex-shrink-0 bg-muted flex items-center justify-center",children:l.jsx(ls,{className:"h-6 w-6 text-muted-foreground"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold",children:(ae==null?void 0:ae.batchName)||"Batch"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:ae!=null&&ae.cr?`CR: ${ae.cr}`:""})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(re,{onClick:()=>{U(null),Y("/admin/years")},children:"Back to Batches"}),l.jsx(re,{size:"sm",variant:"ghost",onClick:async()=>{try{const Le=document.createElement("input");Le.type="file",Le.accept="image/*",Le.onchange=async()=>{var nt;const pt=(nt=Le.files)==null?void 0:nt[0];if(pt)try{let ht=null;try{ht=await pr(pt)}catch(Ne){console.warn("Cloudinary upload failed, trying ImageKit",(Ne==null?void 0:Ne.message)||Ne),ht=await To(pt,pt.name)}if(!ht){alert("Upload failed");return}await(Ue==null?void 0:Ue(ae==null?void 0:ae.id,{image_url:ht,imageUrl:ht})),alert("Image updated")}catch(ht){console.error(ht),alert("Failed to upload image")}},Le.click()}catch(Le){console.error(Le),alert("Could not open file dialog")}},children:"Change Image"}),l.jsxs(re,{onClick:async()=>{try{const Le=window.prompt("Enter year number for this batch:");if(!Le)return;const pt=parseInt(Le,10);if(isNaN(pt)){alert("Invalid");return}await(sn==null?void 0:sn((ae==null?void 0:ae.id)||null,{yearNumber:pt})),alert("Year created")}catch(Le){console.error(Le),alert("Failed")}},children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"})," Add Year"]}),l.jsxs(re,{variant:"destructive",onClick:async()=>{try{if(!confirm("Delete this batch and all its years?"))return;await(Tt==null?void 0:Tt(ae==null?void 0:ae.id)),U(null),Y("/admin/years"),alert("Batch deleted")}catch(Le){console.error(Le),alert("Failed to delete batch")}},children:[l.jsx(On,{className:"h-4 w-4"})," Delete"]})]})]}),l.jsx("div",{className:"mt-4 space-y-4",children:Fe.length===0?l.jsx(xe,{children:l.jsx(we,{className:"p-6 text-center",children:"No years in this batch yet."})}):Fe.sort((Le,pt)=>Le.yearNumber-pt.yearNumber).map(Le=>l.jsx("div",{children:nr(Le,Le.type)},Le.id))})]})})():l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(de||[]).map(ae=>l.jsxs(xe,{className:"cursor-pointer h-44",onClick:()=>{Y(`/admin/years?batch=${ae.id}`),U(ae.id)},children:[l.jsx(Ge,{children:l.jsxs("div",{className:"flex items-center gap-4",children:[ae.imageUrl?l.jsx("img",{src:ae.imageUrl,alt:ae.batchName,className:"w-24 h-24 object-cover rounded-md flex-shrink-0"}):l.jsx("div",{className:"w-24 h-24 rounded-md flex-shrink-0 bg-muted"}),l.jsx("div",{children:R===ae.id?l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(ke,{value:k,onChange:Fe=>$(Fe.target.value),placeholder:"Batch name",className:"w-48"}),l.jsx(ke,{value:z||"",onChange:Fe=>M(Fe.target.value),placeholder:"CR",className:"w-32"}),l.jsx(ke,{value:ie,onChange:Fe=>K(Fe.target.value),placeholder:"Image URL (or upload)",className:"w-64"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(re,{size:"sm",onClick:Fe=>{Fe.stopPropagation();try{const Le=document.createElement("input");Le.type="file",Le.accept="image/*",Le.onchange=async()=>{var nt;const pt=(nt=Le.files)==null?void 0:nt[0];if(pt)try{let ht=null;try{ht=await pr(pt)}catch(Ne){console.warn("Cloudinary upload failed, trying ImageKit",(Ne==null?void 0:Ne.message)||Ne),ht=await To(pt,pt.name)}if(!ht){alert("Upload failed");return}K(ht)}catch(ht){console.error(ht),alert("Upload failed")}},Le.click()}catch(Le){console.error(Le),alert("Could not open file dialog")}},children:"Upload"}),l.jsx(re,{size:"sm",onClick:async Fe=>{Fe.stopPropagation();try{await(Ue==null?void 0:Ue(ae.id,{batch_name:k,batchName:k,cr:z,image_url:ie,imageUrl:ie})),D(null),$(""),M(""),K(""),alert("Saved")}catch(Le){console.error(Le),alert("Failed to save")}},children:"Save"}),l.jsx(re,{size:"sm",variant:"ghost",onClick:Fe=>{Fe.stopPropagation(),D(null),$(""),M(""),K("")},children:"Cancel"})]})]}):l.jsxs(l.Fragment,{children:[l.jsx(Xe,{className:"text-lg",children:ae.batchName||"Batch"}),l.jsx(At,{className:"text-sm text-muted-foreground",children:ae.cr?`CR: ${ae.cr}`:""})]})})]})}),l.jsx(we,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Years:"," ",(ve||[]).filter(Fe=>(Fe.batchId||Fe.batch_name)===ae.id).length]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(re,{size:"sm",variant:"outline",onClick:Fe=>{Fe.stopPropagation(),Y(`/admin/years?batch=${ae.id}`),U(ae.id)},children:"View Years"}),l.jsx(re,{size:"sm",variant:"ghost",onClick:Fe=>{Fe.stopPropagation(),D(ae.id),$(ae.batchName||""),M(ae.cr||""),K(ae.imageUrl||"")},children:"Edit"}),l.jsx(re,{size:"sm",variant:"ghost",onClick:async Fe=>{Fe.stopPropagation();try{const Le=document.createElement("input");Le.type="file",Le.accept="image/*",Le.onchange=async()=>{var nt;const pt=(nt=Le.files)==null?void 0:nt[0];if(pt)try{let ht=null;try{ht=await pr(pt)}catch(Ne){console.warn("Cloudinary upload failed, trying ImageKit",(Ne==null?void 0:Ne.message)||Ne),ht=await To(pt,pt.name)}if(!ht){alert("Upload failed");return}await(Ue==null?void 0:Ue(ae.id,{image_url:ht,imageUrl:ht})),alert("Image updated")}catch(ht){console.error(ht),alert("Failed to upload image")}},Le.click()}catch(Le){console.error(Le),alert("Could not open file dialog")}},children:"Change Image"}),l.jsx(re,{size:"sm",variant:"destructive",onClick:async Fe=>{Fe.stopPropagation();try{if(!confirm("Delete this batch and all its years? This cannot be undone."))return;await(Tt==null?void 0:Tt(ae.id)),alert("Batch deleted")}catch(Le){console.error(Le),alert("Failed to delete batch")}},children:"Delete"})]})]})})]},ae.id))})})]})]})}function I$(){var V;const{id:n}=HS(),[e,t]=E.useState(!1),[r,s]=E.useState(!1),[a,c]=E.useState(null),[u,h]=E.useState(null),[m,g]=E.useState(""),{years:v,loading:y,updateYear:b,createSubject:S,createLecture:_,deleteSubject:x,deleteLecture:A}=Ic(),I=v.find(B=>B.id===n);if(y)return l.jsx(xe,{children:l.jsx(we,{className:"text-center py-12",children:"Loading..."})});if(!I)return l.jsx(xe,{children:l.jsxs(we,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"Year not found"}),l.jsx("div",{className:"flex gap-2 justify-center",children:l.jsx(Hn,{to:"/admin/years",children:l.jsx(re,{variant:"outline",children:"Back to Years"})})})]})});const C=async B=>{try{await S({...B,yearId:I.id}),t(!1)}catch(P){console.error(P),alert("Failed to add subject")}},O=async B=>{try{await _(B),s(!1),c(null)}catch(P){console.error(P),alert("Failed to add lecture")}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Hn,{to:"/admin/years",children:l.jsxs(re,{variant:"ghost",children:[l.jsx(Ws,{className:"h-4 w-4 mr-2"})," Back"]})}),l.jsxs("div",{children:[I.batchName?l.jsxs(l.Fragment,{children:[l.jsx("h1",{className:"text-2xl font-bold",children:I.batchName}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Year ",I.yearNumber]})]}):l.jsxs("h1",{className:"text-2xl font-bold",children:["Year ",I.yearNumber]}),l.jsx("p",{className:"text-muted-foreground",children:"Manage subjects and lectures for this year"})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:!window.__yearEditing&&l.jsxs(l.Fragment,{children:[l.jsxs(re,{variant:"ghost",onClick:async()=>{try{const B=document.createElement("input");B.type="file",B.accept="image/*",B.onchange=async()=>{var R;const P=(R=B.files)==null?void 0:R[0];if(P)try{let D=null;try{D=await pr(P)}catch(k){console.warn("Cloudinary upload failed, attempting ImageKit fallback:",(k==null?void 0:k.message)||k);try{D=await To(P,P.name)}catch($){throw console.error("ImageKit upload also failed:",$),k}}if(!D||typeof D!="string"||!D.startsWith("http")){console.error("Invalid upload response:",D),alert("Image upload failed: unexpected response from upload provider"),window.__yearEditing=!1;return}await(b==null?void 0:b(I.id,{imageUrl:D,image_url:D})),window.__yearEditing=!1}catch(D){console.error(D);const $=((D==null?void 0:D.message)||String(D)||"").toLowerCase();if($.includes("cloudinary cloud name is not configured")){const z=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!z){alert("No cloud name provided. Upload cancelled."),window.__yearEditing=!1;return}const M=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),ie=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");try{Na(z,M||null,ie||null);const K=await pr(P);if(console.log("Cloudinary upload result after config:",K),!K||typeof K!="string"||!K.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(b==null?void 0:b(I.id,{imageUrl:K,image_url:K}))}catch(K){console.error(K),alert("Image upload failed after configuring Cloudinary: "+(K.message||K))}window.__yearEditing=!1;return}else if($.includes("cloudinary signing did not return an api key")||$.includes("missing required parameter - api_key")||$.includes("missing required parameter 'api_key'")){const z=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(z&&z.trim())try{Na(null,null,z.trim());const M=await pr(P);if(!M||typeof M!="string"||!M.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(b==null?void 0:b(I.id,{imageUrl:M,image_url:M})),window.__yearEditing=!1;return}catch(M){console.error(M),alert("Image upload failed after setting API key: "+(M.message||M)),window.__yearEditing=!1;return}}alert("Image upload failed: "+(D.message||D))}},B.click()}catch(B){console.error(B),alert("Could not open file dialog")}},children:[l.jsx(jR,{className:"h-4 w-4 mr-2"})," ",I.imageUrl?"Change Image":"Add Image"]}),l.jsx(re,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("academicSupervisor"),g(I.academicSupervisor||I.acadmic_supervisor||"")},children:"Academic Supervisor"}),l.jsx(re,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("actor"),g(I.actor||"")},children:"Actor"}),l.jsx(re,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("groupUrl"),g(I.groupUrl||I.group_url||"")},children:"Group URL"}),l.jsx(re,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("batchName"),g(I.batchName||I.batch_name||"")},children:"Batch Name"}),I.imageUrl&&l.jsx(re,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm("Remove year image?"))try{await(b==null?void 0:b(I.id,{imageUrl:""}))}catch(B){console.error(B),alert("Failed to remove year image")}},children:l.jsx(On,{className:"h-3 w-3"})})]})})]}),u&&l.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[l.jsx(ke,{placeholder:u==="image"?"Image URL":u==="groupUrl"?"Group URL":u==="academicSupervisor"?"Academic Supervisor":"Actor",value:m,onChange:B=>g(B.target.value),className:"w-full max-w-2xl"}),l.jsx(re,{onClick:async()=>{try{const B={};u==="image"?B.imageUrl=m:u==="academicSupervisor"?(B.academicSupervisor=m,B.acadmic_supervisor=m):u==="actor"?B.actor=m:u==="groupUrl"?(B.groupUrl=m,B.group_url=m):u==="batchName"&&(B.batchName=m,B.batch_name=m),await(b==null?void 0:b(I.id,B)),h(null),g(""),window.__yearEditing=!1}catch(B){console.error(B),alert("Failed to save field")}},children:"Save"}),l.jsx(re,{variant:"ghost",onClick:()=>{h(null),g(""),window.__yearEditing=!1},children:"Cancel"})]}),l.jsxs(xe,{children:[l.jsx(Ge,{children:l.jsxs(Xe,{className:"flex items-center gap-2",children:["Subjects",l.jsxs(rn,{variant:"secondary",children:[((V=I.subjects)==null?void 0:V.length)||0," subjects"]})]})}),l.jsxs(we,{children:[l.jsx("div",{className:"flex justify-end mb-4",children:l.jsxs(re,{onClick:()=>t(!0),className:"flex items-center gap-2",children:[l.jsx(Jt,{className:"h-3 w-3"})," Add Subject"]})}),!I.subjects||I.subjects.length===0?l.jsx("div",{className:"text-center py-8",children:"No subjects added yet."}):l.jsx("div",{className:"grid gap-4",children:I.subjects.map(B=>l.jsxs(xe,{className:"bg-secondary/10",children:[l.jsx(Ge,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[B.imageUrl?l.jsx("img",{src:B.imageUrl,alt:B.name,className:"w-8 h-8 object-cover rounded"}):l.jsx("div",{className:"w-8 h-8 bg-muted rounded"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-lg",children:B.name}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:[(B.lectures||[]).length," lectures"]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(re,{onClick:()=>{c(B),s(!0)},variant:"ghost",size:"sm",children:"Add Lecture"}),l.jsx(re,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete subject "${B.name}"?`))try{await x(B.id)}catch(P){console.error(P),alert("Failed to delete subject")}},children:l.jsx(On,{className:"h-3 w-3"})})]})]})}),B.lectures&&B.lectures.length>0&&l.jsx(we,{children:l.jsx("div",{className:"grid gap-3",children:B.lectures.map(P=>l.jsx(xe,{className:"bg-background border",children:l.jsx(we,{className:"p-3",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:P.imageUrl?l.jsx("img",{src:P.imageUrl,alt:P.name,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"No image"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:P.name}),l.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:P.description||"No description available"})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(re,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${P.name}"?`))try{await A(B.id,P.id)}catch(R){console.error(R),alert("Failed to delete lecture")}},children:l.jsx(On,{className:"h-3 w-3"})})})]})})},P.id))})})]},B.id))})]})]}),e&&l.jsx(kI,{year:I.yearNumber,yearType:I.type,onClose:()=>t(!1),onSave:C}),r&&a&&l.jsx(zm,{subjectId:a.id,subjectName:a.name,yearType:I.type,onClose:()=>{s(!1),c(null)},onSave:O})]})}function Bm(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,a]=E.useState(null);return E.useEffect(()=>{const m=Ar(vi($e,"lectures")),g=Bo(m,async v=>{var b;const y=[];for(const S of v.docs){const _=S.data(),x=S.id,A=S.ref,I=await Mt(it(A,"files")),C=[];I.forEach(R=>{var k;const D=R.data();C.push({id:R.id,title:D.title||"",fileUrl:D.fileUrl||"",fileType:D.fileType||"",fileSize:D.fileSize||"",description:D.description||"",uploadedAt:((k=D.uploadedAt)==null?void 0:k.toDate())||new Date,uploadedBy:D.uploadedBy||""})});const O=await Mt(it(A,"quizzes")),V=[];O.forEach(R=>{var k;const D=R.data();V.push({id:R.id,title:D.title||"",description:D.description||"",questions:D.questions||[],timeLimit:D.duration||30,passingScore:D.passRate||70,createdAt:((k=D.createdAt)==null?void 0:k.toDate())||new Date,createdBy:D.uploadedBy||""})});const B=await Mt(it(A,"videos")),P=[];B.empty?(_.videos||[]).forEach(D=>{var k,$;P.push({id:D.id||D.videoId||"",title:D.title||D.name||"",youtubeUrl:D.url||D.youtubeUrl||"",thumbnailUrl:D.thumbnailUrl||D.thumbnail||"",duration:D.duration||D.time||"",description:D.description||"",uploadedAt:(($=(k=D.uploadedAt)==null?void 0:k.toDate)==null?void 0:$.call(k))||new Date,uploadedBy:D.uploadedBy||D.uploader||"",imageUrl:D.thumbnailUrl||""})}):B.forEach(R=>{var k,$;const D=R.data();P.push({id:R.id,title:D.title||D.name||"",youtubeUrl:D.url||D.youtubeUrl||"",thumbnailUrl:D.thumbnailUrl||D.thumbnail||"",duration:D.duration||D.time||"",description:D.description||"",uploadedAt:(($=(k=D.uploadedAt)==null?void 0:k.toDate)==null?void 0:$.call(k))||new Date,uploadedBy:D.uploadedBy||D.uploader||"",imageUrl:D.thumbnailUrl||""})}),y.push({id:x,title:_.title||"",description:_.description||"",subject:_.subjectId||"Unknown",order:_.order||1,createdAt:((b=_.createdAt)==null?void 0:b.toDate())||new Date,createdBy:_.uploadedBy||"",videos:P,files:C,quizzes:V})}y.sort((S,_)=>(S.order||0)-(_.order||0)),e(y),r(!1)},v=>{console.error("Error fetching lectures:",v),a("Failed to fetch lectures"),r(!1)});return()=>g()},[]),{lectures:n,loading:t,error:s,createLecture:async(m,g)=>{try{const v=jt($e,"Subjects",g),y=it(v,"lectures"),{videos:b,files:S,quizzes:_,...x}=m,A=await In(y,{...x,videos:b,subjectId:g});if(S&&S.length>0){const I=it(A,"files");for(const C of S)await In(I,C)}if(_&&_.length>0){const I=it(A,"quizzes");for(const C of _)await In(I,C)}}catch(v){throw console.error("Error creating lecture:",v),v}},updateLecture:async(m,g)=>{try{const v=Ar(vi($e,"lectures")),y=await Mt(v);for(const b of y.docs)if(b.id===m){await hn(b.ref,g);break}}catch(v){throw console.error("Error updating lecture:",v),v}},deleteLecture:async m=>{try{const g=Ar(vi($e,"lectures")),v=await Mt(g);for(const y of v.docs)if(y.id===m){await Cr(y.ref);break}}catch(g){throw console.error("Error deleting lecture:",g),g}}}}function Kb(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[s,a]=E.useState(!1),{lectures:c,loading:u,error:h,createLecture:m,updateLecture:g}=Bm(),[v]=od(),y=v.get("lecture");v.get("tab");let b=c.filter(x=>x.title.toLowerCase().includes(n.toLowerCase())||x.subject.toLowerCase().includes(n.toLowerCase()));y&&(b=c.filter(x=>x.id===y));const S=()=>{r(null),a(!0)},_=x=>{r(x),a(!0)};return s?l.jsx(zm,{lecture:t,onClose:()=>{a(!1),r(null)},onSave:async x=>{try{t?await g(t.id,x):await m(x,"default-subject"),a(!1),r(null)}catch(A){console.error("Error saving lecture:",A)}}}):(y&&c.find(x=>x.id===y),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Resources Management"}),l.jsx("p",{className:"text-muted-foreground",children:"Organize educational content by lectures with videos, files, and quizzes"})]}),l.jsxs(re,{onClick:S,className:"flex items-center gap-2",children:[l.jsx(Jt,{className:"h-4 w-4"}),"Create Lecture"]})]}),l.jsx(xe,{children:l.jsx(we,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(mc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(ke,{placeholder:"Search lectures by title or subject...",value:n,onChange:x=>e(x.target.value),className:"pl-10"})]})})}),u&&l.jsx(xe,{children:l.jsxs(we,{className:"text-center py-12",children:[l.jsx(Co,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading lectures..."})]})}),h&&l.jsx(xe,{children:l.jsxs(we,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading lectures"}),l.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&l.jsx("div",{className:"space-y-6",children:b.map(x=>l.jsxs(xe,{className:`hover:shadow-lg transition-all duration-200 border-l-4 ${y===x.id?"border-l-primary bg-primary/5":"border-l-primary/20 hover:border-l-primary"}`,children:[l.jsx(Ge,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx(ls,{className:"h-5 w-5 text-primary"}),l.jsx(Xe,{className:"text-xl",children:x.title}),l.jsx(rn,{variant:"secondary",children:x.subject})]}),l.jsx(At,{className:"text-base",children:x.description}),l.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(ec,{className:"h-3 w-3"}),x.createdBy]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(M1,{className:"h-3 w-3"}),x.createdAt.toLocaleDateString()]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(re,{variant:"ghost",size:"icon",onClick:()=>_(x),children:l.jsx(sd,{className:"h-4 w-4"})}),l.jsx(re,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",children:l.jsx(On,{className:"h-4 w-4"})})]})]})}),l.jsx(we,{children:l.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(Rs,{className:"h-4 w-4 text-green-600"}),"Videos (",x.videos.length,")"]}),x.videos.length>0&&l.jsx(re,{variant:"ghost",size:"sm",onClick:()=>{x.videos.forEach(A=>window.open(A.youtubeUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Play All"})]}),x.videos.length>0?l.jsx("div",{className:"space-y-2",children:x.videos.map(A=>l.jsx("button",{onClick:()=>window.open(A.youtubeUrl,"_blank"),className:"w-full p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"relative",children:[A.thumbnailUrl&&l.jsx("img",{src:A.thumbnailUrl,alt:A.title,className:"w-16 h-12 object-cover rounded"}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx(Rs,{className:"h-6 w-6 text-white"})})]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:A.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(xf,{className:"h-3 w-3"}),A.duration]})]})]})},A.id))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx($s,{className:"h-4 w-4 text-blue-600"}),"Files (",x.files.length,")"]}),x.files.length>0&&l.jsx(re,{variant:"ghost",size:"sm",onClick:()=>{x.files.forEach(A=>window.open(A.fileUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Download All"})]}),x.files.length>0?l.jsx("div",{className:"space-y-2",children:x.files.map(A=>l.jsx("button",{onClick:()=>window.open(A.fileUrl,"_blank"),className:"w-full p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx($s,{className:"h-4 w-4 text-blue-600 mt-1 flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:A.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(rn,{variant:"outline",className:"text-xs",children:A.fileType}),l.jsx("span",{children:A.fileSize})]})]})]})},A.id))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(yi,{className:"h-4 w-4 text-purple-600"}),"Quizzes (",x.quizzes.length,")"]}),x.quizzes.length>0&&l.jsx(re,{variant:"ghost",size:"sm",onClick:()=>{alert(`Starting all ${x.quizzes.length} quizzes for: ${x.title}`)},className:"h-6 px-2 text-xs",children:"Start All"})]}),x.quizzes.length>0?l.jsx("div",{className:"space-y-2",children:x.quizzes.map(A=>l.jsx("button",{onClick:()=>{alert(`Starting quiz: ${A.title}
Time limit: ${A.timeLimit} minutes
Passing score: ${A.passingScore}%`)},className:"w-full p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(yi,{className:"h-4 w-4 text-purple-600 mt-1 flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:A.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(xf,{className:"h-3 w-3"}),A.timeLimit,"min",l.jsx("span",{children:"â€¢"}),l.jsxs("span",{children:[A.passingScore,"% pass"]})]})]})]})},A.id))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"})]})]})})]},x.id))}),!u&&!h&&b.length===0&&l.jsx(xe,{children:l.jsxs(we,{className:"text-center py-12",children:[l.jsx(ls,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No lectures found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No lectures match your search criteria.":"Start by creating your first lecture with videos, files, and quizzes."}),l.jsxs(re,{onClick:S,children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Create Lecture"]})]})})]}))}function j$({professor:n,onClose:e,onSave:t}){const[r,s]=E.useState({name:"",title:"",department:"",email:"",others:"",officeLocation:"",researchAreas:"",imageUrl:""}),[a,c]=E.useState(!1);E.useEffect(()=>{n&&s({name:n.name||"",title:n.title||"",department:n.department||"",email:n.email||"",others:n.others||"",officeLocation:n.officeLocation||"",researchAreas:(n.researchAreas||[]).join(", "),imageUrl:n.imageUrl||""})},[n]);const u=async h=>{h.preventDefault(),c(!0);try{const m={...r,researchAreas:r.researchAreas?r.researchAreas.split(",").map(g=>g.trim()).filter(Boolean):[]};t(m)}catch(m){console.error("Error saving professor:",m)}finally{c(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(re,{variant:"ghost",onClick:e,children:[l.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Professor":"Add Professor"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update professor information":"Add a new professor to the faculty"})]})]})}),l.jsxs("form",{onSubmit:u,className:"space-y-6",children:[l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsxs(Xe,{className:"flex items-center gap-2",children:[l.jsx(po,{className:"h-5 w-5"}),"Professor Information"]}),l.jsx(At,{children:"Basic information about the professor"})]}),l.jsxs(we,{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsxs(dc,{className:"w-20 h-20",children:[l.jsx(Zu,{src:r.imageUrl,alt:r.name}),l.jsx(hc,{children:l.jsx(po,{className:"w-8 h-8"})})]}),l.jsxs("div",{className:"space-y-2 flex-1",children:[l.jsx(Ae,{htmlFor:"imageUrl",children:"Profile Image URL"}),l.jsx(ke,{id:"imageUrl",placeholder:"https://example.com/profile.jpg",value:r.imageUrl,onChange:h=>s(m=>({...m,imageUrl:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"name",children:"Full Name *"}),l.jsx(ke,{id:"name",placeholder:"Dr. John Smith",value:r.name,onChange:h=>s(m=>({...m,name:h.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"title",children:"Title"}),l.jsx(ke,{id:"title",placeholder:"e.g., Associate Professor",value:r.title,onChange:h=>s(m=>({...m,title:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Ae,{htmlFor:"department",className:"flex items-center gap-2",children:[l.jsx(pR,{className:"h-4 w-4"}),"Department"]}),l.jsx(ke,{id:"department",placeholder:"Internal Medicine",value:r.department,onChange:h=>s(m=>({...m,department:h.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"others",children:"Others"}),l.jsx(ke,{id:"others",placeholder:"Other contact or notes",value:r.others,onChange:h=>s(m=>({...m,others:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Ae,{htmlFor:"email",className:"flex items-center gap-2",children:[l.jsx(wf,{className:"h-4 w-4"}),"Email Address"]}),l.jsx(ke,{id:"email",type:"email",placeholder:"john.smith@university.edu",value:r.email,onChange:h=>s(m=>({...m,email:h.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Ae,{htmlFor:"officeLocation",className:"flex items-center gap-2",children:[l.jsx(Lu,{className:"h-4 w-4"}),"Office Location"]}),l.jsx(ke,{id:"officeLocation",placeholder:"Medical Building, Room 301",value:r.officeLocation,onChange:h=>s(m=>({...m,officeLocation:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"researchAreas",children:"Research Areas"}),l.jsx(ke,{id:"researchAreas",placeholder:"e.g., Cardiology, Epidemiology",value:r.researchAreas,onChange:h=>s(m=>({...m,researchAreas:h.target.value}))})]}),l.jsx("div",{className:"space-y-2",children:l.jsx("div",{})})]})]})]}),r.name&&l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Preview"}),l.jsx(At,{children:"How the professor will appear in the system"})]}),l.jsx(we,{children:l.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[l.jsxs(dc,{className:"h-12 w-12",children:[l.jsx(Zu,{src:r.imageUrl,alt:r.name}),l.jsx(hc,{children:l.jsx(po,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold",children:r.name}),l.jsx("p",{className:"text-sm text-muted-foreground",children:r.department}),l.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-sm text-muted-foreground",children:[r.email&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(wf,{className:"h-3 w-3"}),l.jsx("span",{children:r.email})]}),r.officeLocation&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Lu,{className:"h-3 w-3"}),l.jsx("span",{children:r.officeLocation})]}),r.others&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(po,{className:"h-3 w-3"}),l.jsx("span",{children:r.others})]})]})]})]})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(re,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(re,{type:"submit",disabled:a,children:[l.jsx(Vo,{className:"h-4 w-4 mr-2"}),a?"Saving...":n?"Update Professor":"Add Professor"]})]})]})]})}function A$(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[s,a]=E.useState(!1),{professors:c,loading:u,error:h,createProfessor:m,updateProfessor:g,deleteProfessor:v,isOfflineMode:y}=FC(),b=c.filter(_=>_.name.toLowerCase().includes(n.toLowerCase())||_.department.toLowerCase().includes(n.toLowerCase())||_.email.toLowerCase().includes(n.toLowerCase())),S=async _=>{if(window.confirm("Are you sure you want to delete this professor?"))try{await v(_)}catch(x){console.error("Error deleting professor:",x),alert("Failed to delete professor. Please try again.")}};return s?l.jsx(j$,{professor:t,onClose:()=>{a(!1),r(null)},onSave:async _=>{try{t?await g(t.id,_):await m(_),a(!1),r(null)}catch(x){console.error("Error saving professor:",x),alert("Failed to save professor. Please try again.")}}}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Professors Management"}),l.jsxs("p",{className:"text-muted-foreground",children:["Manage faculty information and profiles",y&&l.jsx("span",{className:"ml-2 text-orange-600 font-medium",children:"â€¢ Working in offline mode"})]})]}),l.jsxs(re,{onClick:()=>a(!0),children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]}),l.jsx(xe,{children:l.jsx(we,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(mc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(ke,{placeholder:"Search professors by name, department, or email...",value:n,onChange:_=>e(_.target.value),className:"pl-10"})]})})}),u&&l.jsx(xe,{children:l.jsxs(we,{className:"text-center py-12",children:[l.jsx(Co,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading professors..."})]})}),h&&l.jsx(xe,{children:l.jsxs(we,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading professors"}),l.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:b.map(_=>l.jsxs(xe,{className:"hover:shadow-md transition-shadow",children:[l.jsx(Ge,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs(dc,{className:"h-12 w-12",children:[l.jsx(Zu,{src:_.imageUrl,alt:_.name}),l.jsx(hc,{children:l.jsx(po,{className:"h-6 w-6"})})]}),l.jsxs("div",{children:[l.jsx(Xe,{className:"text-lg",children:_.name}),l.jsx(rn,{variant:"secondary",className:"text-xs",children:_.department})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(re,{variant:"ghost",size:"icon",onClick:()=>{r(_),a(!0)},children:l.jsx(sd,{className:"h-4 w-4"})}),l.jsx(re,{variant:"ghost",size:"icon",onClick:()=>S(_.id),className:"text-destructive hover:text-destructive",children:l.jsx(On,{className:"h-4 w-4"})})]})]})}),l.jsx(we,{children:l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsxs("div",{className:"",children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:_.title}),l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mt-1",children:[l.jsx(wf,{className:"h-4 w-4"}),l.jsx("span",{children:_.email})]})]}),_.phone&&l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[l.jsx(po,{className:"h-4 w-4"}),l.jsx("span",{children:_.phone})]}),_.officeLocation&&l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[l.jsx(Lu,{className:"h-4 w-4"}),l.jsx("span",{children:_.officeLocation})]}),_.bio&&l.jsx("div",{className:"text-sm text-muted-foreground line-clamp-3",children:_.bio}),_.researchAreas&&_.researchAreas.length>0&&l.jsx("div",{className:"flex gap-2 flex-wrap",children:_.researchAreas.map(x=>l.jsx(rn,{children:x},x))}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[_.website&&l.jsx("a",{href:_.website,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"Website"}),_.linkedin&&l.jsx("a",{href:_.linkedin,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"LinkedIn"})]})]})})]},_.id))}),!u&&!h&&b.length===0&&l.jsx(xe,{children:l.jsxs(we,{className:"text-center py-12",children:[l.jsx(ec,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No professors found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No professors match your search criteria.":"Start by adding your first professor."}),l.jsxs(re,{onClick:()=>a(!0),children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]})})]})}const P$=[{id:"user_1",displayName:"Ali Ahmed",email:"ali.ahmed@example.com",role:"student",photoURL:"",createdAt:new Date},{id:"user_2",displayName:"Mona Hassan",email:"mona.hassan@example.com",role:"staff",photoURL:"",createdAt:new Date(Date.now()-1e3*60*60*24)}];function R$(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,a]=E.useState(null),[c,u]=E.useState(!1),{years:h}=Ic();return E.useEffect(()=>{const v=async()=>{try{const b=Ar(it($e,"users"));await Mt(b);const S=Ar(it($e,"users"),xd("createdAt","desc")),_=Bo(S,x=>{const A=[];x.forEach(C=>{var R,D;const O=C.data(),V=O.yearId||O.year||O.year_id||O.yearId||null;let B=V,P="-";if(typeof V=="string"&&V.includes(":")){const[k,$]=V.split(":",2);B=k||null,$&&$.trim()&&(P=$.trim())}if(B&&P==="-"){const k=h.find($=>$.id===B);k&&(k.batchName?P=k.batchName:P=`Year ${{1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six"}[k.yearNumber]||String(k.yearNumber)}`)}A.push({id:C.id,displayName:O.displayName||O.name||"",email:O.email||"",role:O.role||"student",photoURL:O.photoURL||O.avatar||"",createdAt:((D=(R=O.createdAt)==null?void 0:R.toDate)==null?void 0:D.call(R))||void 0,yearId:B||void 0,yearLabel:P})}),e(A);const I=Array.from(new Set(A.map(C=>C.yearId).filter(Boolean).filter(C=>!h.find(O=>O.id===C))));I.length>0&&Promise.all(I.map(async C=>{try{const V=(await Mt(vi($e,"years"))).docs.find(D=>D.id===C);if(!V)return null;const B=V.data(),P=B.yearNumber||B.order||(()=>{const D=(B.name||"").match(/\d+/);return D?parseInt(D[0]):void 0})(),R=B.batchName||(P?`Year ${P}`:void 0)||void 0;return{id:C,label:R}}catch{return null}})).then(C=>{const O={};C.forEach(V=>{V&&V.id&&V.label&&(O[V.id]=V.label)}),Object.keys(O).length>0&&e(V=>V.map(B=>B.yearId&&O[B.yearId]?{...B,yearLabel:O[B.yearId]}:B))}),r(!1)},x=>{console.error("Failed to listen to users:",x),y()});return()=>_()}catch(b){console.error("Failed to load users, entering offline mode:",b),y()}},y=()=>{u(!0),e(P$),r(!1),a(null)};v()},[]),E.useEffect(()=>{!h||h.length===0||e(v=>v.map(y=>{if(!y)return y;const b=y.yearId||null;if(!b)return y;const S=h.find(I=>I.id===b);if(!S)return y;const x={1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six"}[S.yearNumber]||String(S.yearNumber),A=S.batchName?S.batchName:`Year ${x}`;return{...y,yearLabel:A}}))},[h]),{users:n,loading:t,error:s,updateUser:async(v,y)=>{if(c||v.startsWith("mock_")||v.startsWith("offline_")){e(b=>b.map(S=>S.id===v?{...S,...y}:S));return}try{await hn(jt($e,"users",v),y)}catch(b){console.error("Failed to update user:",b),e(S=>S.map(_=>_.id===v?{..._,...y}:_))}},deleteUser:async v=>{if(c||v.startsWith("mock_")||v.startsWith("offline_")){e(y=>y.filter(b=>b.id!==v));return}try{await Cr(jt($e,"users",v))}catch(y){console.error("Failed to delete user:",y),e(b=>b.filter(S=>S.id!==v))}},isOfflineMode:c}}function k$(){const{users:n,loading:e,error:t,updateUser:r,deleteUser:s}=R$(),a=async u=>{const h=u.role==="admin"?"user":"admin";await r(u.id,{role:h})},c=(u,h)=>{if(!u)return"-";const m=u.match(/(19|20)\d{2}/);if(m)return m[0];if(h)try{const g=new Date(h);if(!isNaN(g.getTime()))return String(g.getFullYear())}catch{}return"-"};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(AR,{className:"h-6 w-6 text-blue-600"}),l.jsx("h1",{className:"text-3xl font-bold",children:"Users"})]}),l.jsxs(xe,{children:[l.jsx(Ge,{children:l.jsxs(Xe,{children:["All Users (",n.length,")"]})}),l.jsx(we,{children:e?l.jsx("div",{children:"Loading..."}):t?l.jsx("div",{className:"text-destructive",children:t}):n.length===0?l.jsx("div",{className:"text-muted-foreground",children:"No users found."}):(()=>{const u={};n.forEach(m=>{const g=m.yearLabel&&String(m.yearLabel).trim()!==""?String(m.yearLabel):"Unassigned";u[g]||(u[g]=[]),u[g].push(m)});const h=Object.keys(u).sort((m,g)=>{const v=m.match(/Year\s*(\d+)/i),y=g.match(/Year\s*(\d+)/i);return v&&y?parseInt(v[1],10)-parseInt(y[1],10):v?-1:y||m==="Unassigned"?1:g==="Unassigned"?-1:m.localeCompare(g)});return l.jsx("div",{className:"space-y-6",children:h.map(m=>l.jsxs("div",{children:[l.jsx("div",{className:"flex items-center justify-between mb-2",children:l.jsxs("h3",{className:"text-lg font-semibold",children:[m," ",l.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",u[m].length,")"]})]})}),l.jsx("div",{className:"space-y-2",children:u[m].map(g=>{var v;return l.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[l.jsx(dc,{className:"h-12 w-12",children:g.photoURL?l.jsx(Zu,{src:g.photoURL,alt:g.displayName}):l.jsx(hc,{children:((v=g.displayName)==null?void 0:v[0])||"U"})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-medium truncate",children:g.displayName}),l.jsx("div",{className:"text-xs text-muted-foreground truncate",children:g.email}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Created: ",g.createdAt?new Date(g.createdAt).toLocaleString():"-",l.jsxs("span",{className:"ml-3",children:["Year: ",g.yearLabel||c(g.id,g.createdAt)]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(rn,{children:g.role||"user"}),l.jsx(re,{size:"sm",variant:"outline",onClick:()=>a(g),children:g.role==="admin"?"Demote":"Make Admin"}),l.jsx(re,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>s(g.id),children:l.jsx(On,{className:"h-4 w-4"})})]})]},g.id)})})]},m))})})()})]})]})}function D$(n){if(!n)return 0;if(typeof n=="number")return n;const e=String(n).trim();if(/^\d+$/.test(e))return parseInt(e,10);const t=e.split(":").map(r=>parseInt(r,10));return t.length===3?t[0]*3600+(t[1]||0)*60+(t[2]||0):t.length===2?(t[0]||0)*60+(t[1]||0):0}function O$(n){if(!n||n<=0)return"0:00";const e=Math.floor(n/3600),t=Math.floor(n%3600/60),r=n%60;return e>0?`${e}:${String(t).padStart(2,"0")}:${String(r).padStart(2,"0")}`:`${t}:${String(r).padStart(2,"0")}`}function L$(){var D;const{id:n}=HS(),e=wc(),{years:t,subjects:r,loading:s,createLecture:a,deleteLecture:c,deleteSubject:u,addVideo:h,addFile:m,addQuiz:g}=Ic(),[v,y]=E.useState(null),[b,S]=E.useState(!1),[_,x]=E.useState(!1),[A,I]=E.useState(!1),[C,O]=E.useState(!1),V=r.find(k=>k.id===n),B=k=>{y(k||null),S(!0)},P=k=>{y(k||null),x(!0)},R=k=>{y(k||null),I(!0)};return b&&v?l.jsx(Aj,{lectureId:v,onClose:()=>{S(!1),y(null)},onSave:async k=>{V!=null&&V.id&&v&&await h(V.id,v,k),S(!1),y(null)}}):_&&v?l.jsx(jj,{lectureId:v,onClose:()=>{x(!1),y(null)},onSave:async k=>{V!=null&&V.id&&v&&await m(V.id,v,k),x(!1),y(null)}}):A&&v?l.jsx(RI,{lectureId:v,onClose:()=>{I(!1),y(null)},onSave:async k=>{V!=null&&V.id&&v&&await g(V.id,v,k),I(!1),y(null)}}):C?l.jsx(zm,{subjectId:(V==null?void 0:V.id)||null,subjectName:V==null?void 0:V.name,yearType:(D=t.find(k=>k.id===(V==null?void 0:V.yearId)))==null?void 0:D.type,onClose:()=>O(!1),onSave:async k=>{V!=null&&V.id&&await a(k),O(!1)}}):s?l.jsx("div",{children:"Loading..."}):V?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:V.name}),l.jsx("p",{className:"text-muted-foreground",children:"Subject details and lectures"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(re,{variant:"outline",size:"sm",onClick:()=>O(!0),className:"flex items-center gap-2",children:[l.jsx(Jt,{className:"h-4 w-4"}),"Add Lecture"]}),l.jsx(re,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if(V&&confirm(`Delete subject "${V.name}"? This will remove all lectures.`))try{await u(V.id),e("/admin/years")}catch(k){console.error(k),alert("Failed to delete subject")}},children:l.jsx(On,{className:"h-4 w-4"})}),l.jsx(Hn,{to:"/admin/years",children:l.jsx(re,{variant:"ghost",children:"Back"})})]})]}),l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Lectures"}),l.jsx(At,{children:"All lectures for this subject"})]}),l.jsx(we,{children:l.jsx("div",{className:"grid gap-4",children:V.lectures&&V.lectures.length>0?V.lectures.map(k=>{var z,M;const $=k.imageUrl||k.videos&&k.videos[0]&&k.videos[0].thumbnailUrl||"";return l.jsxs("div",{className:"p-3 border rounded-md flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[$?l.jsx("img",{src:$,alt:k.name,width:1280,height:720,style:{width:160,height:90,objectFit:"cover"},className:"rounded"}):l.jsx("div",{className:"w-40 h-24 bg-muted rounded flex items-center justify-center text-xs",children:"No image"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:k.name}),l.jsx("div",{className:"text-sm text-muted-foreground",children:k.description})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>B(k.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Video",children:[l.jsx(Rs,{className:"h-3 w-3 text-blue-600"}),l.jsx("span",{children:"Add Video"})]}),l.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>P(k.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add File",children:[l.jsx($s,{className:"h-3 w-3 text-green-600"}),l.jsx("span",{children:"Add File"})]}),l.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>R(k.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Quiz",children:[l.jsx(yi,{className:"h-3 w-3 text-purple-600"}),l.jsx("span",{children:"Add Quiz"})]}),l.jsx(re,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if(V&&confirm(`Delete lecture "${k.name}"?`))try{await c(V.id,k.id)}catch(ie){console.error(ie),alert("Failed to delete lecture")}},children:l.jsx(On,{className:"h-3 w-3"})}),l.jsxs("div",{className:"flex items-center gap-2",children:[k.videos&&k.videos.length>0?(()=>{const ie=(k.videos||[]).reduce((K,J)=>K+D$(J.duration||J.time||J.durationSeconds||J.length),0);return l.jsxs("button",{onClick:()=>e(`/admin/videos?lecture=${k.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:[l.jsx(Rs,{className:"h-4 w-4"}),l.jsxs("span",{children:["(",k.videos.length,")"]}),l.jsx("span",{className:"text-muted-foreground",children:O$(ie)})]})})():l.jsx("button",{onClick:()=>e(`/admin/videos?lecture=${k.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:l.jsx(Rs,{className:"h-4 w-4"})}),l.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${k.id}&tab=files`),className:"text-xs text-green-600 flex items-center gap-1 px-2",title:"Files",children:[l.jsx($s,{className:"h-4 w-4"}),l.jsxs("span",{children:["(",((z=k.files)==null?void 0:z.length)||0,")"]})]}),l.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${k.id}&tab=quizzes`),className:"text-xs text-purple-600 flex items-center gap-1 px-2",title:"Quizzes",children:[l.jsx(yi,{className:"h-4 w-4"}),l.jsxs("span",{children:["(",((M=k.quizzes)==null?void 0:M.length)||0,")"]})]})]})]})]},k.id)}):l.jsx("div",{className:"text-muted-foreground",children:"No lectures yet for this subject."})})})]})]}):l.jsx(xe,{children:l.jsxs(we,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Subject not found"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"The subject you requested does not exist."}),l.jsx("div",{className:"mt-4",children:l.jsx(Hn,{to:"/admin/years",children:l.jsx(re,{children:"Back to Years"})})})]})})}var ev="rovingFocusGroup.onEntryFocus",M$={bubbles:!1,cancelable:!0},qm="RovingFocusGroup",[oy,Pj,F$]=uy(qm),[V$,Rj]=Ti(qm,[F$]),[U$,$$]=V$(qm),kj=E.forwardRef((n,e)=>l.jsx(oy.Provider,{scope:n.__scopeRovingFocusGroup,children:l.jsx(oy.Slot,{scope:n.__scopeRovingFocusGroup,children:l.jsx(z$,{...n,ref:e})})}));kj.displayName=qm;var z$=E.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:a,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:h,onEntryFocus:m,preventScrollOnEntryFocus:g=!1,...v}=n,y=E.useRef(null),b=xt(e,y),S=Fx(a),[_=null,x]=Ca({prop:c,defaultProp:u,onChange:h}),[A,I]=E.useState(!1),C=_n(m),O=Pj(t),V=E.useRef(!1),[B,P]=E.useState(0);return E.useEffect(()=>{const R=y.current;if(R)return R.addEventListener(ev,C),()=>R.removeEventListener(ev,C)},[C]),l.jsx(U$,{scope:t,orientation:r,dir:S,loop:s,currentTabStopId:_,onItemFocus:E.useCallback(R=>x(R),[x]),onItemShiftTab:E.useCallback(()=>I(!0),[]),onFocusableItemAdd:E.useCallback(()=>P(R=>R+1),[]),onFocusableItemRemove:E.useCallback(()=>P(R=>R-1),[]),children:l.jsx(Ke.div,{tabIndex:A||B===0?-1:0,"data-orientation":r,...v,ref:b,style:{outline:"none",...n.style},onMouseDown:ze(n.onMouseDown,()=>{V.current=!0}),onFocus:ze(n.onFocus,R=>{const D=!V.current;if(R.target===R.currentTarget&&D&&!A){const k=new CustomEvent(ev,M$);if(R.currentTarget.dispatchEvent(k),!k.defaultPrevented){const $=O().filter(J=>J.focusable),z=$.find(J=>J.active),M=$.find(J=>J.id===_),K=[z,M,...$].filter(Boolean).map(J=>J.ref.current);Lj(K,g)}}V.current=!1}),onBlur:ze(n.onBlur,()=>I(!1))})})}),Dj="RovingFocusGroupItem",Oj=E.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:a,...c}=n,u=yo(),h=a||u,m=$$(Dj,t),g=m.currentTabStopId===h,v=Pj(t),{onFocusableItemAdd:y,onFocusableItemRemove:b}=m;return E.useEffect(()=>{if(r)return y(),()=>b()},[r,y,b]),l.jsx(oy.ItemSlot,{scope:t,id:h,focusable:r,active:s,children:l.jsx(Ke.span,{tabIndex:g?0:-1,"data-orientation":m.orientation,...c,ref:e,onMouseDown:ze(n.onMouseDown,S=>{r?m.onItemFocus(h):S.preventDefault()}),onFocus:ze(n.onFocus,()=>m.onItemFocus(h)),onKeyDown:ze(n.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){m.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const _=W$(S,m.orientation,m.dir);if(_!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let A=v().filter(I=>I.focusable).map(I=>I.ref.current);if(_==="last")A.reverse();else if(_==="prev"||_==="next"){_==="prev"&&A.reverse();const I=A.indexOf(S.currentTarget);A=m.loop?H$(A,I+1):A.slice(I+1)}setTimeout(()=>Lj(A))}})})})});Oj.displayName=Dj;var B$={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function q$(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function W$(n,e,t){const r=q$(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return B$[r]}function Lj(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function H$(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var K$=kj,G$=Oj,Ux="Tabs",[Q$,zz]=Ti(Ux,[Rj]),Mj=Rj(),[Y$,$x]=Q$(Ux),Fj=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:s,defaultValue:a,orientation:c="horizontal",dir:u,activationMode:h="automatic",...m}=n,g=Fx(u),[v,y]=Ca({prop:r,onChange:s,defaultProp:a});return l.jsx(Y$,{scope:t,baseId:yo(),value:v,onValueChange:y,orientation:c,dir:g,activationMode:h,children:l.jsx(Ke.div,{dir:g,"data-orientation":c,...m,ref:e})})});Fj.displayName=Ux;var Vj="TabsList",Uj=E.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...s}=n,a=$x(Vj,t),c=Mj(t);return l.jsx(K$,{asChild:!0,...c,orientation:a.orientation,dir:a.dir,loop:r,children:l.jsx(Ke.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});Uj.displayName=Vj;var $j="TabsTrigger",zj=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:s=!1,...a}=n,c=$x($j,t),u=Mj(t),h=Wj(c.baseId,r),m=Hj(c.baseId,r),g=r===c.value;return l.jsx(G$,{asChild:!0,...u,focusable:!s,active:g,children:l.jsx(Ke.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":m,"data-state":g?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:h,...a,ref:e,onMouseDown:ze(n.onMouseDown,v=>{!s&&v.button===0&&v.ctrlKey===!1?c.onValueChange(r):v.preventDefault()}),onKeyDown:ze(n.onKeyDown,v=>{[" ","Enter"].includes(v.key)&&c.onValueChange(r)}),onFocus:ze(n.onFocus,()=>{const v=c.activationMode!=="manual";!g&&!s&&v&&c.onValueChange(r)})})})});zj.displayName=$j;var Bj="TabsContent",qj=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:s,children:a,...c}=n,u=$x(Bj,t),h=Wj(u.baseId,r),m=Hj(u.baseId,r),g=r===u.value,v=E.useRef(g);return E.useEffect(()=>{const y=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(y)},[]),l.jsx(hy,{present:s||g,children:({present:y})=>l.jsx(Ke.div,{"data-state":g?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!y,id:m,tabIndex:0,...c,ref:e,style:{...n.style,animationDuration:v.current?"0s":void 0},children:y&&a})})});qj.displayName=Bj;function Wj(n,e){return`${n}-trigger-${e}`}function Hj(n,e){return`${n}-content-${e}`}var X$=Fj,Kj=Uj,Gj=zj,Qj=qj;const J$=X$,Yj=E.forwardRef(({className:n,...e},t)=>l.jsx(Kj,{ref:t,className:et("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));Yj.displayName=Kj.displayName;const ay=E.forwardRef(({className:n,...e},t)=>l.jsx(Gj,{ref:t,className:et("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));ay.displayName=Gj.displayName;const ly=E.forwardRef(({className:n,...e},t)=>l.jsx(Qj,{ref:t,className:et("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));ly.displayName=Qj.displayName;function Z$({product:n,onClose:e,onSave:t}){const[r,s]=E.useState({name:(n==null?void 0:n.name)||"",description:(n==null?void 0:n.description)||"",price:(n==null?void 0:n.price)||0,types:(n==null?void 0:n.types)||(n!=null&&n.price?[{name:"Default",price:n.price}]:[]),images:(n==null?void 0:n.images)||[""],categoryId:(n==null?void 0:n.categoryId)||""}),[a,c]=E.useState(!1),[u,h]=E.useState(null),m=async b=>{b.preventDefault(),c(!0);try{const S={...r,images:r.images.filter(_=>_.trim()!=="")};S.types&&S.types.length>0?(S.types=S.types.map(_=>({name:String(_.name||"").trim(),price:parseFloat(_.price)||0})),S.price=S.types[0].price||0):S.types=[],t(S)}catch(S){console.error("Error saving product:",S)}finally{c(!1)}},g=()=>{s(b=>({...b,images:[...b.images,""]}))},v=(b,S)=>{s(_=>({..._,images:_.images.map((x,A)=>A===b?S:x)}))},y=b=>{s(S=>({...S,images:S.images.filter((_,x)=>x!==b)}))};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(re,{variant:"ghost",onClick:e,children:[l.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Product":"Add Product"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update product details":"Create a new product"})]})]})}),l.jsxs("form",{onSubmit:m,className:"space-y-6",children:[l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsxs(Xe,{className:"flex items-center gap-2",children:[l.jsx(av,{className:"h-5 w-5 text-blue-600"}),"Product Information"]}),l.jsx(At,{children:"Basic information about the product"})]}),l.jsxs(we,{className:"space-y-4",children:[l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"name",children:"Product Name *"}),l.jsx(ke,{id:"name",placeholder:"e.g., Medical Textbook",value:r.name,onChange:b=>s(S=>({...S,name:b.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{children:"Types & Prices"}),l.jsxs("div",{className:"space-y-2",children:[r.types&&r.types.length>0?r.types.map((b,S)=>l.jsxs("div",{className:"flex gap-2",children:[l.jsx(ke,{placeholder:"Type name (e.g., Pen)",value:b.name,onChange:_=>s(x=>({...x,types:x.types.map((A,I)=>I===S?{...A,name:_.target.value}:A)})),required:!0}),l.jsx(ke,{type:"number",step:"0.01",placeholder:"0.00",value:b.price,onChange:_=>s(x=>({...x,types:x.types.map((A,I)=>I===S?{...A,price:parseFloat(_.target.value)||0}:A)})),required:!0,className:"w-32"}),l.jsx(re,{type:"button",variant:"ghost",onClick:()=>s(_=>({..._,types:_.types.filter((x,A)=>A!==S)})),children:"Remove"})]},S)):l.jsx("div",{className:"text-muted-foreground",children:"No types defined."}),l.jsx("div",{children:l.jsxs(re,{type:"button",variant:"outline",onClick:()=>s(b=>({...b,types:[...b.types||[],{name:"Default",price:0}]})),children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"})," Add Type"]})})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"description",children:"Description"}),l.jsx(Ni,{id:"description",placeholder:"Describe the product...",value:r.description,onChange:b=>s(S=>({...S,description:b.target.value})),rows:4})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"categoryId",children:"Category ID (Optional)"}),l.jsx(ke,{id:"categoryId",placeholder:"e.g., books, equipment",value:r.categoryId,onChange:b=>s(S=>({...S,categoryId:b.target.value}))})]})]})]}),l.jsxs(xe,{children:[l.jsx(Ge,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx(Xe,{children:"Product Images"}),l.jsx(At,{children:"Add image URLs for the product"})]}),l.jsxs(re,{type:"button",variant:"outline",onClick:g,children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Image"]})]})}),l.jsx(we,{className:"space-y-4",children:r.images.map((b,S)=>l.jsxs("div",{className:`flex gap-2 items-center ${u===S?"border-2 border-dashed p-2 rounded":""}`,onDragOver:_=>{_.preventDefault(),h(S)},onDragEnter:_=>{_.preventDefault(),h(S)},onDragLeave:()=>{h(null)},onDrop:async _=>{_.preventDefault(),h(null);try{const x=_.dataTransfer;if(!x)return;if(x.files&&x.files.length>0){const I=x.files[0];try{let C=null;try{C=await pr(I)}catch(O){console.warn("Cloudinary upload failed, trying ImageKit fallback",(O==null?void 0:O.message)||O),C=await To(I,I.name)}C&&typeof C=="string"&&C.startsWith("http")?v(S,C):alert("Upload failed: unexpected response from upload provider")}catch(C){console.error("Drop upload error:",C);const V=((C==null?void 0:C.message)||String(C)||"").toLowerCase();if(V.includes("cloudinary signing did not return an api key")||V.includes("missing required parameter - api_key")||V.includes("missing required parameter 'api_key'")){const B=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(B&&B.trim())try{Na(null,null,B.trim());const P=await pr(I);if(P&&typeof P=="string"&&P.startsWith("http")){v(S,P);return}}catch(P){console.error("Retry after API key failed:",P)}}alert("Upload failed: "+((C==null?void 0:C.message)||C))}return}const A=x.getData("text/uri-list")||x.getData("text/plain");if(A&&A.startsWith("http")){if(!window.confirm(`Upload the dragged URL to Cloudinary and replace it?
`+A))return;const C=await Hb(A);C&&typeof C=="string"&&C.startsWith("http")?v(S,C):alert("Upload failed: unexpected response from server")}}catch(x){console.error("Drop upload error:",x),alert("Image upload failed: "+((x==null?void 0:x.message)||x))}},children:[l.jsx(ke,{placeholder:"https://example.com/image.jpg",value:b,onChange:_=>v(S,_.target.value)}),l.jsx(re,{type:"button",variant:"ghost",size:"icon",onClick:async()=>{var _;try{const x=(_=r.images[S])==null?void 0:_.trim();if(x&&(x.startsWith("http://")||x.startsWith("https://"))){try{if(!window.confirm(`Upload the current URL to Cloudinary/ImageKit and replace it?
`+x))return;try{const C=await Hb(x);if(C&&typeof C=="string"&&C.startsWith("http")){v(S,C);return}}catch(C){console.warn("uploadUrlToServer failed, will try ImageKit:",(C==null?void 0:C.message)||C)}try{const C=await To(x);if(C&&typeof C=="string"&&C.startsWith("http")){v(S,C);return}else alert("Upload failed: unexpected response from ImageKit")}catch(C){console.error("ImageKit URL upload error:",C),alert("URL upload failed: "+((C==null?void 0:C.message)||C))}}catch(I){console.error("URL upload error:",I),alert("URL upload failed: "+((I==null?void 0:I.message)||I))}return}const A=document.createElement("input");A.type="file",A.accept="image/*",A.onchange=async()=>{var C;const I=(C=A.files)==null?void 0:C[0];if(I)try{let O=null;try{O=await pr(I)}catch(V){console.warn("Cloudinary upload failed, trying ImageKit fallback",(V==null?void 0:V.message)||V);try{O=await To(I,I.name)}catch(B){throw console.error("ImageKit upload failed:",B),V}}if(!O||typeof O!="string"||!O.startsWith("http")){alert("Upload failed: unexpected response from upload provider");return}v(S,O)}catch(O){const V=(O==null?void 0:O.message)||String(O);console.error("Upload error:",O);const B=(V||"").toLowerCase();if(B.includes("cloudinary cloud name is not configured")){const P=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!P){alert("No cloud name provided.");return}const R=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),D=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");Na(P,R||null,D||null);try{const k=await pr(I);if(!k||typeof k!="string"||!k.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}v(S,k)}catch(k){console.error("Retry upload error:",k),alert("Upload failed after configuring Cloudinary: "+(k.message||k))}}else if(B.includes("cloudinary signing did not return an api key")||B.includes("missing required parameter - api_key")||B.includes("missing required parameter 'api_key'")){const P=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(P&&P.trim())try{Na(null,null,P.trim());const R=await pr(I);if(!R||typeof R!="string"||!R.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}v(S,R);return}catch(R){console.error("Retry upload error:",R),alert("Upload failed after setting API key: "+(R.message||R));return}}else alert("Image upload failed: "+(O.message||O))}},A.click()}catch(x){console.error(x),alert("Could not open file dialog")}},children:l.jsx(ov,{className:"h-4 w-4"})}),r.images.length>1&&l.jsx(re,{type:"button",variant:"outline",size:"icon",onClick:()=>y(S),children:l.jsx(tc,{className:"h-4 w-4"})})]},S))})]}),r.name&&l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Preview"}),l.jsx(At,{children:"How the product will appear"})]}),l.jsx(we,{children:l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex items-start gap-4",children:[r.images[0]&&r.images[0].trim()&&(()=>{const b=c2(r.images[0]);return l.jsx("img",{src:b||void 0,alt:r.name,className:"w-20 h-20 object-cover rounded",onError:S=>{S.currentTarget.style.display="none",console.warn("Product preview image failed to load:",b||r.images[0])}})})(),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-lg",children:r.name}),l.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-1",children:["$",r.price.toFixed(2)]}),r.description&&l.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:r.description}),r.categoryId&&l.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Category: ",r.categoryId]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(re,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(re,{type:"submit",disabled:a,children:[l.jsx(Vo,{className:"h-4 w-4 mr-2"}),a?"Saving...":n?"Update Product":"Add Product"]})]})]})]})}function Xj(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,a]=E.useState(null);return E.useEffect(()=>{const m=Ar(it($e,"orders"),xd("orderDate","desc")),g=Bo(m,async v=>{try{const y=await Mt(it($e,"products")),b={};y.forEach(_=>{const x=_.data();b[_.id]={id:_.id,name:x.name||x.title||"",price:x.price||0}});const S=[];v.forEach(_=>{var B,P;const x=_.data();let A=[];x.items&&Array.isArray(x.items)&&x.items.length>0?A=x.items:x.productsIds&&Array.isArray(x.productsIds)&&(A=x.productsIds.map(R=>{var D,k;return{productId:R,name:((D=b[R])==null?void 0:D.name)||R,quantity:1,price:((k=b[R])==null?void 0:k.price)||0}}));const I=x.total||x.totalAmount||x.totalPrice||0,C=x.address||x.shippingaddress||x.shippingAddress||"",O=x.userPhone||x.user_phone||x.phone||"";let V=new Date;x.createdAt&&typeof x.createdAt.toDate=="function"?V=x.createdAt.toDate():x.orderDate&&typeof x.orderDate.toDate=="function"?V=x.orderDate.toDate():x.orderDate&&(V=new Date(x.orderDate)),S.push({id:_.id,userId:x.userId||x.user_id||"",username:x.username||x.userName||x.user_name||x.customerName||"",userName:x.userName||x.user_name||x.customerName||"",userEmail:x.userEmail||x.email||"",userPhone:O,address:C,items:A,total:I,iscompleted:x.iscompleted===!0||x.isCompleted===!0||!1,status:x.status||(x.iscompleted===!0?"completed":"pending"),createdAt:V,updatedAt:(P=(B=x.updatedAt)==null?void 0:B.toDate)==null?void 0:P.call(B)})}),e(S),r(!1)}catch(y){console.error("Error processing orders:",y),a("Failed to load orders"),r(!1)}},v=>{console.error("Failed to load orders:",v),a("Failed to load orders"),r(!1)});return()=>g()},[]),{orders:n,loading:t,error:s,createOrder:async m=>{try{await In(it($e,"orders"),{...m,createdAt:new Date})}catch(g){console.error("Error creating order:",g)}},updateOrder:async(m,g)=>{try{const v={...g,updatedAt:new Date};(g.status==="completed"||g.isCompleted)&&(v.isCompleted=!0,v.iscompleted=!0,v.completedAt=new Date,v.status="completed"),await hn(jt($e,"orders",m),v)}catch(v){console.error("Error updating order:",v)}},deleteOrder:async m=>{try{await Cr(jt($e,"orders",m))}catch(g){console.error("Error deleting order:",g)}}}}function ez(){const[n,e]=E.useState(""),[t,r]=E.useState(!1),[s,a]=E.useState(null),{products:c,loading:u,error:h,isOfflineMode:m,createProduct:g,updateProduct:v,deleteProduct:y,retryConnection:b}=MC(),{createOrder:S}=Xj(),_=()=>{a(null),r(!0)},x=C=>{a(C),r(!0)},A=async(C,O)=>{confirm(`Are you sure you want to delete "${O}"?`)&&await y(C)};if(t)return l.jsx(Z$,{product:s,onClose:()=>{r(!1),a(null)},onSave:async C=>{try{s?await v(s.id,C):await g(C),r(!1),a(null)}catch(O){console.error("Error saving product:",O),alert("Failed to save product. Please try again.")}}});const I=c.filter(C=>C.name.toLowerCase().includes(n.toLowerCase())||C.description.toLowerCase().includes(n.toLowerCase()));return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Store Management"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-muted-foreground",children:"Manage store products and categories"}),m&&l.jsxs("span",{className:"flex items-center gap-1 text-orange-600 font-medium text-sm",children:[l.jsx("div",{className:"h-2 w-2 bg-orange-600 rounded-full"}),"Offline Mode"]})]})]})}),u&&l.jsx(xe,{children:l.jsxs(we,{className:"text-center py-12",children:[l.jsx(Co,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading products..."})]})}),h&&l.jsx(xe,{children:l.jsxs(we,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading products"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:h}),l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx(re,{onClick:b,variant:"outline",children:"Retry Connection"}),l.jsx(re,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!u&&!h&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[l.jsxs(xe,{children:[l.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Xe,{className:"text-sm font-medium",children:"Total Products"}),l.jsx(av,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(we,{children:l.jsx("div",{className:"text-2xl font-bold",children:c.length})})]}),l.jsxs(xe,{children:[l.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Xe,{className:"text-sm font-medium",children:"Average Price"}),l.jsx(V1,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(we,{children:l.jsxs("div",{className:"text-2xl font-bold",children:["$",c.length>0?(c.reduce((C,O)=>{const V=O.types&&O.types.length>0?O.types[0].price:O.price||0;return C+V},0)/c.length).toFixed(2):"0.00"]})})]}),l.jsxs(xe,{children:[l.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Xe,{className:"text-sm font-medium",children:"Categories"}),l.jsx(Cu,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(we,{children:l.jsx("div",{className:"text-2xl font-bold",children:new Set(c.map(C=>C.categoryId).filter(C=>C&&C.trim())).size})})]})]}),l.jsxs(J$,{defaultValue:"products",className:"space-y-6",children:[l.jsxs(Yj,{className:"grid w-full grid-cols-2",children:[l.jsxs(ay,{value:"products",className:"flex items-center gap-2",children:[l.jsx(gy,{className:"h-4 w-4"}),"Products (",c.length,")"]}),l.jsxs(ay,{value:"categories",className:"flex items-center gap-2",children:[l.jsx(Cu,{className:"h-4 w-4"}),"Categories"]})]}),l.jsxs(ly,{value:"products",className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"relative flex-1 max-w-sm",children:[l.jsx(mc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(ke,{placeholder:"Search products...",value:n,onChange:C=>e(C.target.value),className:"pl-10"})]}),l.jsxs(re,{onClick:_,children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),I.length===0?l.jsx(xe,{children:l.jsxs(we,{className:"text-center py-12",children:[l.jsx(av,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:n?"No products found":"No products yet"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"Try adjusting your search terms":"Add your first product to get started"}),!n&&l.jsxs(re,{onClick:_,children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add First Product"]})]})}):l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:I.map(C=>l.jsxs(xe,{className:"overflow-hidden",children:[l.jsxs("div",{className:"aspect-video bg-muted relative",children:[C.images&&C.images[0]?l.jsx("img",{src:C.images[0],alt:C.name,className:"w-full h-full object-cover",onError:O=>{O.currentTarget.style.display="none",O.currentTarget.nextElementSibling.style.display="flex"}}):null,l.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{display:C.images&&C.images[0]?"none":"flex"},children:l.jsx(ov,{className:"h-12 w-12 text-muted-foreground"})})]}),l.jsxs(Ge,{className:"pb-2",children:[l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsx(Xe,{className:"text-lg line-clamp-1",children:C.name}),l.jsx("div",{className:"mt-2",children:C.types&&C.types.length>0?l.jsx("div",{className:"flex gap-2 flex-wrap",children:C.types.map((O,V)=>l.jsxs(rn,{variant:"secondary",className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium",children:O.name}),l.jsxs("span",{className:"text-sm text-muted-foreground",children:["$",O.price.toFixed(2)]})]},V))}):l.jsxs("div",{className:"text-xl font-bold",children:["$",(C.price||0).toFixed(2)]})}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(re,{variant:"ghost",size:"icon",onClick:()=>x(C),className:"h-8 w-8",children:l.jsx(sd,{className:"h-3 w-3"})}),l.jsx(re,{variant:"ghost",size:"icon",onClick:async()=>{try{const O=document.createElement("input");O.type="file",O.accept="image/*",O.onchange=async()=>{var B;const V=(B=O.files)==null?void 0:B[0];if(V)try{let P=null;try{P=await pr(V)}catch(R){console.warn("Cloudinary upload failed, trying ImageKit fallback",(R==null?void 0:R.message)||R);try{P=await To(V,V.name)}catch(D){throw console.error("ImageKit upload failed:",D),R}}if(!P||typeof P!="string"||!P.startsWith("http")){console.error("Invalid upload response:",P),alert("Image upload failed: unexpected response from upload provider");return}await v(C.id,{images:[P]})}catch(P){console.error(P);const D=((P==null?void 0:P.message)||String(P)||"").toLowerCase();if(D.includes("cloudinary cloud name is not configured")){const k=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!k){alert("No cloud name provided. Upload cancelled.");return}const $=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),z=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");try{Na(k,$||null,z||null);const M=await pr(V);if(console.log("Cloudinary upload result after config:",M),!M||typeof M!="string"||!M.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await v(C.id,{images:[M]})}catch(M){console.error(M),alert("Image upload failed after configuring Cloudinary: "+(M.message||M))}return}else if(D.includes("cloudinary signing did not return an api key")||D.includes("missing required parameter - api_key")||D.includes("missing required parameter 'api_key'")){const k=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(k&&k.trim())try{Na(null,null,k.trim());const $=await pr(V);if(!$||typeof $!="string"||!$.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await v(C.id,{images:[$]});return}catch($){console.error($),alert("Image upload failed after setting API key: "+($.message||$));return}}alert("Image upload failed: "+(P.message||P))}},O.click()}catch(O){console.error(O),alert("Could not open file dialog")}},className:"h-8 w-8",children:l.jsx(ov,{className:"h-3 w-3"})}),l.jsx(re,{variant:"ghost",size:"icon",onClick:()=>A(C.id,C.name),className:"h-8 w-8 text-destructive hover:text-destructive",children:l.jsx(On,{className:"h-3 w-3"})}),l.jsx(re,{variant:"outline",size:"sm",onClick:async()=>{try{const O=window.prompt("Your full name:");if(!O)return;const V=window.prompt("Your email:");if(!V)return;const B=window.prompt("Quantity:","1")||"1",P=parseInt(B)||1,R=window.prompt("Phone (optional):","")||"",D=window.prompt("Address (optional):","")||"",k=C.types&&C.types.length>0?C.types[0].price:C.price||0;await S({username:O,userName:O,userEmail:V,userPhone:R,address:D,items:[{productId:C.id,name:C.name,quantity:P,price:k}],total:k*P,status:"pending",createdAt:new Date}),alert("Order placed successfully")}catch(O){console.error(O),alert("Failed to place order")}},children:"Buy"})]})]}),l.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",(C.types&&C.types.length>0?C.types[0].price:C.price||0).toFixed(2)]})]}),l.jsxs(we,{className:"pt-0",children:[C.description&&l.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:C.description}),l.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[l.jsx("span",{children:C.createdAt.toLocaleDateString()}),C.categoryId&&l.jsx(rn,{variant:"secondary",className:"text-xs",children:C.categoryId})]})]})]},C.id))})]}),l.jsxs(ly,{value:"categories",className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Categories"}),l.jsxs(re,{disabled:!0,children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Category"]})]}),l.jsx(xe,{children:l.jsxs(we,{className:"text-center py-12",children:[l.jsx(Cu,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Category Management"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"Category management will be implemented in the future."}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"For now, you can specify category IDs when creating products."})]})})]})]})]})]})}function tz({order:n,onChangeStatus:e,onDelete:t}){var r,s;return l.jsxs(xe,{children:[l.jsx(Ge,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(Xe,{children:["Order for ",n.username||n.userName,l.jsx("div",{className:"text-xs text-muted-foreground",children:(s=(r=n.createdAt)==null?void 0:r.toLocaleString)==null?void 0:s.call(r)})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(rn,{variant:n.status==="completed"||n.iscompleted?"default":"secondary",children:[n.status,n.iscompleted?" â€¢ completed":""]}),l.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>e(n.id,"completed"),children:[l.jsx(p_,{className:"h-4 w-4 mr-1"})," Complete"]}),l.jsx(re,{variant:"ghost",size:"icon",onClick:()=>t(n.id),className:"text-destructive",children:l.jsx(On,{className:"h-4 w-4"})})]})]})}),l.jsxs(we,{children:[l.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact"}),l.jsx("div",{className:"font-medium",children:n.username||n.userName}),l.jsx("div",{className:"text-sm",children:n.userEmail}),n.userPhone&&l.jsx("div",{className:"text-sm",children:n.userPhone}),n.address&&l.jsx("div",{className:"text-sm",children:n.address})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Items"}),l.jsxs("div",{className:"space-y-2 mt-2",children:[n.items&&n.items.length>0?n.items.map((a,c)=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-sm",children:[a.name," x",a.quantity]}),l.jsxs("div",{className:"font-medium",children:["$",(a.price*a.quantity).toFixed(2)]})]},c)):l.jsx("div",{className:"text-sm text-muted-foreground",children:"No item details. Products IDs may be attached in the raw order."}),n.productsIds&&n.productsIds.length>0&&l.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Product IDs: ",(n.productsIds||[]).join(", ")]}),l.jsxs("div",{className:"flex items-center justify-between pt-2 border-t mt-2",children:[l.jsx("div",{className:"font-medium",children:"Total"}),l.jsxs("div",{className:"font-bold",children:["$",(n.total||0).toFixed(2)]})]})]})]})]}),l.jsxs("div",{className:"flex gap-2 mt-4",children:[l.jsxs(re,{onClick:()=>e(n.id,"paid"),children:[l.jsx(p_,{className:"h-4 w-4 mr-2"})," Mark Paid"]}),l.jsxs(re,{variant:"outline",onClick:()=>e(n.id,"cancelled"),children:[l.jsx(yR,{className:"h-4 w-4 mr-2"})," Cancel"]})]})]})]},n.id)}function nz(){const{orders:n,loading:e,error:t,updateOrder:r,deleteOrder:s}=Xj(),a=async(u,h)=>{u&&await r(u,{status:h})},c=async u=>{u&&confirm("Delete this order?")&&await s(u)};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Orders"}),l.jsx("p",{className:"text-muted-foreground",children:"View and manage store orders"})]})}),e&&l.jsx("div",{children:"Loading..."}),t&&l.jsx("div",{className:"text-destructive",children:t}),!e&&!t&&l.jsx("div",{className:"grid gap-4",children:n.map(u=>l.jsx(tz,{order:u,onChangeStatus:a,onDelete:c},u.id))})]})}function zx(n,e){const[t,r]=E.useState([]),[s,a]=E.useState(!0),[c,u]=E.useState(null);return E.useEffect(()=>{let h=null,m=!0;return(async()=>{if(!n){r([]),a(!1);return}try{const v=Ar(vi($e,"lectures"),c6(ZU(),"==",n)),y=await Mt(v);if(y.empty){m&&(r([]),a(!1));return}const b=y.docs[0],S=it(b.ref,e);h=Bo(S,_=>{if(!m)return;const x=[];_.forEach(A=>{const I=A.data();x.push({id:A.id,...I})}),r(x),a(!1)},_=>{console.error(`Failed to subscribe to ${e}:`,_),u(`Failed to load ${e}`),a(!1)})}catch(v){console.error(`Error resolving lecture for ${e}:`,v),m&&(u(v.message||String(v)),a(!1))}})(),()=>{m=!1,h&&h()}},[n,e]),{items:t,loading:s,error:c}}function rz(n){return zx(n,"videos")}function sz(n){return zx(n,"files")}function Jj(n){return zx(n,"quizzes")}function iz(){var m;const[n]=od(),e=n.get("lecture"),{lectures:t,loading:r,error:s}=Bm(),{items:a,loading:c,error:u}=rz(e);if(c||r)return l.jsx("div",{children:"Loading..."});if(u||s)return l.jsx("div",{className:"text-destructive",children:u||s});const h=t.find(g=>g.id===e);return h?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Videos for ",h.title||h.id]}),l.jsx("p",{className:"text-muted-foreground",children:h.description})]}),l.jsx("div",{children:l.jsx(Hn,{to:"/admin/resources",children:l.jsx(re,{variant:"ghost",children:"Back"})})})]}),l.jsxs(xe,{children:[l.jsx(Ge,{children:l.jsxs(Xe,{children:["Videos (",((m=h.videos)==null?void 0:m.length)||0,")"]})}),l.jsx(we,{children:a&&a.length>0?l.jsx("div",{className:"space-y-3",children:a.map(g=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[g.thumbnailUrl?l.jsx("img",{src:g.thumbnailUrl,alt:g.title,className:"w-32 h-18 object-cover rounded"}):l.jsx("div",{className:"w-32 h-18 bg-muted rounded"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:g.title||"Untitled"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:g.description})]})]}),l.jsx("div",{children:l.jsxs(re,{onClick:()=>window.open(g.url||g.youtubeUrl||"","_blank"),children:[" ",l.jsx(Rs,{className:"h-4 w-4 mr-2"})," Play "]})})]},g.id))}):l.jsx("p",{className:"text-muted-foreground",children:"No videos available for this lecture."})})]})]}):l.jsx(xe,{children:l.jsxs(we,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its videos."}),l.jsx("div",{className:"mt-4",children:l.jsx(Hn,{to:"/admin/years",children:l.jsx(re,{children:"Back to Years"})})})]})})}function oz(){var m;const[n]=od(),e=n.get("lecture"),{lectures:t,loading:r,error:s}=Bm(),{items:a,loading:c,error:u}=sz(e);if(c||r)return l.jsx("div",{children:"Loading..."});if(u||s)return l.jsx("div",{className:"text-destructive",children:u||s});const h=t.find(g=>g.id===e);return h?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Files for ",h.title||h.id]}),l.jsx("p",{className:"text-muted-foreground",children:h.description})]}),l.jsx("div",{children:l.jsx(Hn,{to:"/admin/resources",children:l.jsx(re,{variant:"ghost",children:"Back"})})})]}),l.jsxs(xe,{children:[l.jsx(Ge,{children:l.jsxs(Xe,{children:["Files (",((m=h.files)==null?void 0:m.length)||0,")"]})}),l.jsx(we,{children:a&&a.length>0?l.jsx("div",{className:"space-y-3",children:a.map(g=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx($s,{className:"h-6 w-6 text-blue-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:g.title||g.name||"Untitled File"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:g.description})]})]}),l.jsx("div",{children:l.jsx(re,{onClick:()=>window.open(g.fileUrl||g.url||"_blank"),children:"Download"})})]},g.id))}):l.jsx("p",{className:"text-muted-foreground",children:"No files available for this lecture."})})]})]}):l.jsx(xe,{children:l.jsxs(we,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its files."}),l.jsx("div",{className:"mt-4",children:l.jsx(Hn,{to:"/admin/years",children:l.jsx(re,{children:"Back to Years"})})})]})})}function az(){var m;const[n]=od(),e=n.get("lecture"),{lectures:t,loading:r,error:s}=Bm(),{items:a,loading:c,error:u}=Jj(e);if(c||r)return l.jsx("div",{children:"Loading..."});if(u||s)return l.jsx("div",{className:"text-destructive",children:u||s});const h=t.find(g=>g.id===e);return h?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Quizzes for ",h.title||h.id]}),l.jsx("p",{className:"text-muted-foreground",children:h.description})]}),l.jsx("div",{children:l.jsx(Hn,{to:"/admin/resources",children:l.jsx(re,{variant:"ghost",children:"Back"})})})]}),l.jsxs(xe,{children:[l.jsx(Ge,{children:l.jsxs(Xe,{children:["Quizzes (",((m=h.quizzes)==null?void 0:m.length)||0,")"]})}),l.jsx(we,{children:a&&a.length>0?l.jsx("div",{className:"space-y-3",children:a.map(g=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(yi,{className:"h-6 w-6 text-purple-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:g.title||"Untitled Quiz"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:g.description}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",l.jsx("strong",{children:g.type||"multiple_choice"})]})]})]}),l.jsx("div",{children:(g.type||"multiple_choice")==="flashcard"?l.jsx(re,{onClick:()=>window.location.href=`/admin/flashcards?lecture=${e}&quiz=${g.id}`,children:"Flashcards"}):l.jsx(re,{onClick:()=>alert("Multiple choice runner not implemented. Use Flashcards or implement MCQ runner."),children:"Start"})})]},g.id))}):l.jsx("p",{className:"text-muted-foreground",children:"No quizzes available for this lecture."})})]})]}):l.jsx(xe,{children:l.jsxs(we,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its quizzes."}),l.jsx("div",{className:"mt-4",children:l.jsx(Hn,{to:"/admin/years",children:l.jsx(re,{children:"Back to Years"})})})]})})}var Bx="Progress",qx=100,[lz,Bz]=Ti(Bx),[cz,uz]=lz(Bx),Zj=E.forwardRef((n,e)=>{const{__scopeProgress:t,value:r=null,max:s,getValueLabel:a=dz,...c}=n;(s||s===0)&&!Gb(s)&&console.error(hz(`${s}`,"Progress"));const u=Gb(s)?s:qx;r!==null&&!Qb(r,u)&&console.error(fz(`${r}`,"Progress"));const h=Qb(r,u)?r:null,m=Jf(h)?a(h,u):void 0;return l.jsx(cz,{scope:t,value:h,max:u,children:l.jsx(Ke.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":Jf(h)?h:void 0,"aria-valuetext":m,role:"progressbar","data-state":nA(h,u),"data-value":h??void 0,"data-max":u,...c,ref:e})})});Zj.displayName=Bx;var eA="ProgressIndicator",tA=E.forwardRef((n,e)=>{const{__scopeProgress:t,...r}=n,s=uz(eA,t);return l.jsx(Ke.div,{"data-state":nA(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});tA.displayName=eA;function dz(n,e){return`${Math.round(n/e*100)}%`}function nA(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function Jf(n){return typeof n=="number"}function Gb(n){return Jf(n)&&!isNaN(n)&&n>0}function Qb(n,e){return Jf(n)&&!isNaN(n)&&n<=e&&n>=0}function hz(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${qx}\`.`}function fz(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${qx} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var rA=Zj,mz=tA;const sA=E.forwardRef(({className:n,value:e,...t},r)=>l.jsx(rA,{ref:r,className:et("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:l.jsx(mz,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));sA.displayName=rA.displayName;function pz(){const[n]=od(),e=n.get("lecture"),t=n.get("quiz"),{items:r,loading:s,error:a}=Jj(e),c=r.find(z=>z.id===t),[u,h]=E.useState(0),[m,g]=E.useState([]);if(s)return l.jsx("div",{children:"Loading..."});if(a)return l.jsx("div",{className:"text-destructive",children:a});if(!c)return l.jsx(xe,{children:l.jsxs(we,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Quiz not found"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a quiz to start flashcards."}),l.jsx("div",{className:"mt-4",children:l.jsx(Hn,{to:"/admin/quizzes",children:l.jsx(re,{children:"Back"})})})]})});const v=c.questions||[],y=v.reduce((z,M)=>z+(M.weight&&Number(M.weight)||1),0),b=v[u],S=b&&(b.weight||1)||1,_=m[u]??0,[x,A]=E.useState(!1),[I,C]=E.useState([]),[O,V]=E.useState(null);E.useEffect(()=>{A(!1),C([]),V(null)},[u]);const B=(z,M)=>{const ie=[...m];ie[z]=M,g(ie)},P=m.reduce((z,M,ie)=>z+(M||0),0),R=Math.round(P/y*100),D=z=>{if(!z)return[{type:"text",value:""}];const M=[],ie=/\[\[(.+?)\]\]/g;let K=0,J;for(;(J=ie.exec(z))!==null;)J.index>K&&M.push({type:"text",value:z.slice(K,J.index)}),M.push({type:"blank",value:J[1]}),K=ie.lastIndex;return K<z.length&&M.push({type:"text",value:z.slice(K)}),M},k=()=>{const z=(b==null?void 0:b.question)||"",ie=D(z).filter(K=>K.type==="blank");ie.length>0?C(ie.map(()=>"")):C([""]),V(null),A(!0)},$=()=>{const z=(b==null?void 0:b.question)||"",ie=D(z).filter(q=>q.type==="blank").map(q=>q.value);let K=[];ie.length>0?K=ie:b&&Array.isArray(b.options)&&typeof b.correctAnswer=="number"?K=[b.options[b.correctAnswer]||""]:b&&(b.answer||b.correct)&&(K=[String(b.answer||b.correct)]);const X=I.map((q,Q)=>{const Z=(K[Q]??K[0]??"").toString().trim().toLowerCase();return q.toString().trim().toLowerCase()===Z&&Z!==""}).every(Boolean);V(X?"Correct":"Incorrect"),X&&B(u,S)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Flashcards: ",c.title]}),l.jsx("p",{className:"text-muted-foreground",children:"Fill marks per question. Total progress shows weighted score."})]}),l.jsx("div",{children:l.jsx(Hn,{to:"/admin/quizzes",children:l.jsx(re,{variant:"ghost",children:"Back"})})})]}),l.jsxs(xe,{children:[l.jsx(Ge,{children:l.jsx(Xe,{children:"Progress"})}),l.jsxs(we,{children:[l.jsxs("div",{className:"mb-2 text-sm",children:["Total: ",y," points â€” Current: ",P," points"]}),l.jsx(sA,{value:R}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[R,"%"]})]})]}),l.jsxs(xe,{children:[l.jsx(Ge,{children:l.jsxs(Xe,{children:["Question ",u+1," / ",v.length]})}),l.jsx(we,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"font-medium",children:x?l.jsxs("div",{className:"space-y-2",children:[(()=>{const z=D(b.question||"");let M=0;return l.jsxs("div",{children:[z.map((ie,K)=>{if(ie.type==="text")return l.jsx("span",{children:ie.value},K);const J=M++;return l.jsx("input",{value:I[J]??"",onChange:X=>C(q=>{const Q=[...q];return Q[J]=X.target.value,Q}),placeholder:"Fill the blank",className:"border-b-2 border-gray-300 px-1 mx-1"},K)}),z.length===1&&z[0].type==="text"&&l.jsx("div",{children:l.jsx("input",{value:I[0]??"",onChange:ie=>C(K=>{const J=[...K];return J[0]=ie.target.value,J}),placeholder:"Answer",className:"border-b-2 border-gray-300 px-1"})})]})})(),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsx(re,{onClick:$,children:"Check"}),l.jsx(re,{variant:"outline",onClick:()=>{A(!1),V(null)},children:"Cancel"}),O&&l.jsx("div",{className:"ml-2 text-sm",children:O})]})]}):l.jsx("span",{role:"button",tabIndex:0,onClick:k,onKeyDown:z=>{z.key==="Enter"&&k()},children:b.question})}),b.imageUrl&&l.jsx("img",{src:b.imageUrl,alt:"question",className:"w-full max-w-md object-contain"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Weight: ",S]}),l.jsxs("label",{className:"text-sm",children:["Mark (0 - ",S,")"]}),l.jsx("input",{type:"number",min:0,max:S,value:_,onChange:z=>B(u,Math.max(0,Math.min(S,Number(z.target.value)||0))),className:"border rounded px-2 py-1 w-24"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(re,{disabled:u===0,onClick:()=>h(z=>Math.max(0,z-1)),children:"Previous"}),l.jsx(re,{disabled:u===v.length-1,onClick:()=>h(z=>Math.min(v.length-1,z+1)),children:"Next"}),l.jsx(re,{variant:"outline",onClick:()=>{g([]),h(0)},children:"Reset"})]}),l.jsx("div",{className:"mt-4",children:l.jsx(re,{onClick:()=>alert(`Final score: ${P}/${y} (${R}%)`),children:"Finish"})})]})})]})]})}function gz(){return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),l.jsx("p",{className:"text-muted-foreground",children:"Configure application settings and preferences"})]}),l.jsx(xe,{children:l.jsxs(we,{className:"text-center py-12",children:[l.jsx($1,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Application Settings"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"This section will provide configuration options for the admin panel."}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Features: User management, system configuration, backup settings, security options."})]})})]})}function vz(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,a]=E.useState(null);return E.useEffect(()=>{const m=Ar(it($e,"maps")),g=Bo(m,v=>{const y=[];v.forEach(b=>{var _,x;const S=b.data();y.push({id:b.id,name:S.name||"",location:S.location||"",description:S.description||S.desc||"",type:S.type||S.mapType||"",video_url:S.video_url||S.videoUrl||"",createdAt:((x=(_=S.createdAt)==null?void 0:_.toDate)==null?void 0:x.call(_))||void 0})}),e(y),r(!1)},v=>{console.error("Failed to load maps:",v),a("Failed to load maps"),r(!1)});return()=>g()},[]),{maps:n,loading:t,error:s,createMap:async m=>{const g={...m,createdAt:new Date};g.type&&!g.mapType&&(g.mapType=g.type),g.mapType&&!g.type&&(g.type=g.mapType),["name","location","description","video_url","type","mapType"].forEach(v=>{typeof g[v]=="string"&&(g[v]=g[v].trim())}),await In(it($e,"maps"),g)},updateMap:async(m,g)=>{const v={...g};v.type&&!v.mapType&&(v.mapType=v.type),v.mapType&&!v.type&&(v.type=v.mapType),["name","location","description","video_url","type","mapType"].forEach(y=>{typeof v[y]=="string"&&(v[y]=v[y].trim())}),await hn(jt($e,"maps",m),v)},deleteMap:async m=>{await Cr(jt($e,"maps",m))}}}function yz(){const{maps:n,loading:e,error:t,createMap:r,updateMap:s,deleteMap:a}=vz(),[c,u]=E.useState({name:"",location:"",description:"",video_url:"",type:""}),[h,m]=E.useState(!1),[g,v]=E.useState(null),y=()=>u({name:"",location:"",description:"",video_url:"",type:""}),b=async S=>{if(S.preventDefault(),!!c.name.trim()){m(!0);try{g?await s(g,c):await r(c),y(),v(null)}catch(_){console.error("Error saving map:",_),alert("Failed to save map")}finally{m(!1)}}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Lu,{className:"h-6 w-6 text-blue-600"}),l.jsx("h1",{className:"text-3xl font-bold",children:"Maps"})]}),l.jsxs(xe,{children:[l.jsx(Ge,{children:l.jsx(Xe,{children:"Add Map"})}),l.jsx(we,{children:l.jsxs("form",{onSubmit:b,className:"grid md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{children:"Name"}),l.jsx(ke,{value:c.name,onChange:S=>u(_=>({..._,name:S.target.value})),placeholder:"Map name",required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{children:"Location"}),l.jsx(ke,{value:c.location,onChange:S=>u(_=>({..._,location:S.target.value})),placeholder:"Location"})]}),l.jsxs("div",{className:"space-y-2 md:col-span-3",children:[l.jsx(Ae,{children:"Description"}),l.jsx("textarea",{value:c.description,onChange:S=>u(_=>({..._,description:S.target.value})),placeholder:"Short description",className:"w-full border rounded px-3 py-2",rows:3})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{children:"Type"}),l.jsxs("select",{className:"w-full border rounded px-3 py-2",value:c.type,onChange:S=>u(_=>({..._,type:S.target.value})),children:[l.jsx("option",{value:"",children:"Select type"}),l.jsx("option",{value:"Ù‚Ø§Ø¹Ø© Ø¯Ø±Ø§Ø³ÙŠØ©",children:"Ù‚Ø§Ø¹Ø© Ø¯Ø±Ø§Ø³ÙŠØ©"}),l.jsx("option",{value:"Ù„Ø§Ø¨Ø§Øª",children:"Ù„Ø§Ø¨Ø§Øª"}),l.jsx("option",{value:"Ù…Ø¯Ø±Ø¬",children:"Ù…Ø¯Ø±Ø¬"}),l.jsx("option",{value:"Ù‚Ø§Ø¹Ø§Øª Ø§Ù…ØªØ­Ø§Ù†Ø§Øª",children:"Ù‚Ø§Ø¹Ø§Øª Ø§Ù…ØªØ­Ø§Ù†Ø§Øª"}),l.jsx("option",{value:"Ù…Ø·Ø¹Ù…",children:"Ù…Ø·Ø¹Ù…"}),l.jsx("option",{value:"Ù…ØµÙ„Ù‰",children:"Ù…ØµÙ„Ù‰"}),l.jsx("option",{value:"Ø£Ø®Ø±Ù‰",children:"Ø£Ø®Ø±Ù‰"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{children:"Video URL"}),l.jsx(ke,{value:c.video_url,onChange:S=>u(_=>({..._,video_url:S.target.value})),placeholder:"https://..."})]}),l.jsx("div",{className:"md:col-span-3 flex justify-end space-x-2",children:g?l.jsxs(l.Fragment,{children:[l.jsx(re,{type:"button",variant:"outline",onClick:()=>{v(null),y()},children:"Cancel"}),l.jsxs(re,{type:"submit",disabled:h,children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"}),h?"Saving...":"Save"]})]}):l.jsxs(re,{type:"submit",disabled:h,children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"}),h?"Adding...":"Add"]})})]})})]}),l.jsxs(xe,{children:[l.jsx(Ge,{children:l.jsxs(Xe,{children:["All Maps (",n.length,")"]})}),l.jsx(we,{children:e?l.jsx("div",{children:"Loading..."}):t?l.jsx("div",{className:"text-destructive",children:t}):n.length===0?l.jsx("div",{className:"text-muted-foreground",children:"No maps yet."}):l.jsx("div",{className:"grid gap-3",children:n.map(S=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-medium truncate",children:S.name}),l.jsx("div",{className:"text-xs text-muted-foreground truncate",children:S.location}),S.type&&l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",l.jsx("span",{className:"font-medium",children:S.type})]}),S.description&&l.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:S.description}),S.video_url&&l.jsx("a",{className:"text-xs text-blue-600 hover:underline",href:S.video_url,target:"_blank",rel:"noreferrer",children:S.video_url})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(re,{variant:"ghost",size:"sm",onClick:()=>{v(S.id),u({name:S.name||"",location:S.location||"",description:S.description||"",video_url:S.video_url||"",type:S.type||""}),window.scrollTo({top:0,behavior:"smooth"})},className:"",children:"Edit"}),l.jsx(re,{variant:"ghost",size:"icon",onClick:()=>a(S.id),className:"text-destructive",children:l.jsx(On,{className:"h-4 w-4"})})]})]},S.id))})})]})]})}function xz({research:n,onClose:e,onSave:t}){const[r,s]=E.useState({projectTitle:"",abstract:"",fieldOfResearch:[],contactPerson:[],authorshipPosition:[],projectDuration:"",requiredSkills:[],supervisor:""}),[a,c]=E.useState(""),[u,h]=E.useState("");E.useEffect(()=>{n&&s({projectTitle:n.projectTitle||"",abstract:n.abstract||"",fieldOfResearch:n.fieldOfResearch||[],contactPerson:n.contactPerson||[],authorshipPosition:n.authorshipPosition||[],projectDuration:n.projectDuration||"",requiredSkills:n.requiredSkills||[],supervisor:n.supervisor||""})},[n]);const m=()=>{const S=a.trim();S&&(r.fieldOfResearch.includes(S)||s(_=>({..._,fieldOfResearch:[..._.fieldOfResearch,S]})),c(""))},g=()=>{const S=u.trim();S&&(r.requiredSkills.includes(S)||s(_=>({..._,requiredSkills:[..._.requiredSkills,S]})),h(""))},v=S=>s(_=>({..._,fieldOfResearch:_.fieldOfResearch.filter(x=>x!==S)})),y=S=>s(_=>({..._,requiredSkills:_.requiredSkills.filter(x=>x!==S)})),b=S=>{S.preventDefault();const _={projectTitle:r.projectTitle,abstract:r.abstract,fieldOfResearch:r.fieldOfResearch,contactPerson:r.contactPerson,authorshipPosition:r.authorshipPosition,projectDuration:r.projectDuration,requiredSkills:r.requiredSkills,supervisor:r.supervisor,updatedAt:new Date,...n?{}:{createdAt:new Date}};t(_)};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(re,{variant:"ghost",onClick:e,children:[l.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Research":"Create Research"}),l.jsx("p",{className:"text-muted-foreground",children:"Add or update research project details"})]})]})}),l.jsx("form",{onSubmit:b,className:"space-y-6",children:l.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Project Details"}),l.jsx(At,{children:"Title and abstract"})]}),l.jsxs(we,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"title",children:"Project Title *"}),l.jsx(ke,{id:"title",placeholder:"Enter project title...",value:r.projectTitle,onChange:S=>s(_=>({..._,projectTitle:S.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{htmlFor:"abstract",children:"Abstract"}),l.jsx(Ni,{id:"abstract",placeholder:"Write a brief abstract...",value:r.abstract,onChange:S=>s(_=>({..._,abstract:S.target.value})),rows:8})]})]})]}),l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Fields & Skills"}),l.jsx(At,{children:"Fields of research and required skills"})]}),l.jsxs(we,{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Ae,{children:"Field of Research"}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx(ke,{placeholder:"Add field e.g., Oncology",value:a,onChange:S=>c(S.target.value),onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),m())}}),l.jsx(re,{type:"button",onClick:m,variant:"outline",children:"Add"})]}),l.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.fieldOfResearch.map(S=>l.jsxs(rn,{variant:"secondary",className:"flex items-center gap-2",children:[S,l.jsx("button",{type:"button",onClick:()=>v(S),className:"ml-1 hover:text-destructive",children:l.jsx(tc,{className:"h-3 w-3"})})]},S))})]}),l.jsxs("div",{children:[l.jsx(Ae,{children:"Required Skills"}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx(ke,{placeholder:"Add skill e.g., Data analysis",value:u,onChange:S=>h(S.target.value),onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),g())}}),l.jsx(re,{type:"button",onClick:g,variant:"outline",children:"Add"})]}),l.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.requiredSkills.map(S=>l.jsxs(rn,{variant:"secondary",className:"flex items-center gap-2",children:[S,l.jsx("button",{type:"button",onClick:()=>y(S),className:"ml-1 hover:text-destructive",children:l.jsx(tc,{className:"h-3 w-3"})})]},S))})]})]})]})]}),l.jsx("div",{className:"space-y-6",children:l.jsxs(xe,{children:[l.jsxs(Ge,{children:[l.jsx(Xe,{children:"Meta"}),l.jsx(At,{children:"Contact, supervisor and duration"})]}),l.jsxs(we,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{children:"Contact Person(s)"}),l.jsx(ke,{placeholder:"Comma separated names",value:r.contactPerson.join(", "),onChange:S=>s(_=>({..._,contactPerson:S.target.value.split(",").map(x=>x.trim()).filter(Boolean)}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{children:"Authorship Positions"}),l.jsx(ke,{placeholder:"Comma separated positions",value:r.authorshipPosition.join(", "),onChange:S=>s(_=>({..._,authorshipPosition:S.target.value.split(",").map(x=>x.trim()).filter(Boolean)}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{children:"Supervisor"}),l.jsx(ke,{placeholder:"Supervisor name",value:r.supervisor,onChange:S=>s(_=>({..._,supervisor:S.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ae,{children:"Project Duration"}),l.jsx(ke,{placeholder:"e.g., 6 months",value:r.projectDuration,onChange:S=>s(_=>({..._,projectDuration:S.target.value}))})]}),l.jsxs("div",{className:"flex justify-end",children:[l.jsx(re,{variant:"ghost",onClick:e,className:"mr-2",children:"Cancel"}),l.jsx(re,{type:"submit",children:"Save"})]})]})]})})]})})]})}const wz=[{id:"r1",projectTitle:"Impact of Early Clinical Exposure on Medical Students",abstract:"A study investigating how early clinical exposure affects students' clinical reasoning and confidence.",fieldOfResearch:["Medical Education","Clinical Skills"],contactPerson:["Dr. Sarah Johnson"],authorshipPosition:["Lead","Co-author"],projectDuration:"6 months",requiredSkills:["Clinical observation","Data analysis"],supervisor:"Prof. Michael Chen",createdAt:new Date,updatedAt:new Date}];function _z(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,a]=E.useState(null),[c,u]=E.useState(!1);E.useEffect(()=>{const v=async()=>{try{const b=Ar(it($e,"research"));await Mt(b);const S=Ar(it($e,"research"),xd("createdAt","desc"));return Bo(S,x=>{const A=[];x.forEach(I=>{var O,V;const C=I.data();A.push({id:I.id,projectTitle:C.projectTitle||C.title||"",abstract:C.abstract||"",fieldOfResearch:C.fieldOfResearch||[],contactPerson:C.contactPerson||[],authorshipPosition:C.authorshipPosition||[],projectDuration:C.projectDuration||"",requiredSkills:C.requiredSkills||[],supervisor:C.supervisor||"",createdAt:(O=C.createdAt)!=null&&O.toDate?C.createdAt.toDate():C.createdAt||new Date,updatedAt:(V=C.updatedAt)!=null&&V.toDate?C.updatedAt.toDate():C.updatedAt||new Date})}),e(A),r(!1)},x=>{console.error("Error in research listener:",x),y()})}catch(b){return console.error("Firebase connection failed for research:",b),y(),null}},y=()=>{u(!0),e(wz),a(null),r(!1)};v()},[]);const h=async v=>{if(c){const y={id:`offline_${Date.now()}`,...v};e(b=>[y,...b]);return}try{await In(it($e,"research"),v)}catch(y){console.error("Error creating research:",y),u(!0),await h(v)}};return{research:n,loading:t,error:s,createResearch:h,updateResearch:async(v,y)=>{if(c||v.startsWith("offline_")||v.startsWith("mock_")){e(b=>b.map(S=>S.id===v?{...S,...y}:S));return}try{await hn(jt($e,"research",v),y)}catch(b){console.error("Error updating research:",b),e(S=>S.map(_=>_.id===v?{..._,...y}:_))}},deleteResearch:async v=>{if(c||v.startsWith("offline_")||v.startsWith("mock_")){e(y=>y.filter(b=>b.id!==v));return}try{await Cr(jt($e,"research",v))}catch(y){console.error("Error deleting research:",y),e(b=>b.filter(S=>S.id!==v))}},isOfflineMode:c}}function Ez(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[s,a]=E.useState(!1),{research:c,loading:u,error:h,createResearch:m,updateResearch:g,deleteResearch:v}=_z(),y=c.filter(x=>x.projectTitle.toLowerCase().includes(n.toLowerCase())),b=()=>{r(null),a(!0)},S=x=>{r(x),a(!0)},_=async x=>{window.confirm("Are you sure you want to delete this research entry?")&&await v(x)};return s?l.jsx(xz,{research:t,onClose:()=>{a(!1),r(null)},onSave:async x=>{try{t?await g(t.id,x):await m(x),a(!1),r(null)}catch(A){console.error(A),alert("Failed to save. Please try again.")}}}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Research"}),l.jsx("p",{className:"text-muted-foreground",children:"Manage research projects and student/faculty submissions"})]}),l.jsxs(re,{onClick:b,className:"flex items-center gap-2",children:[l.jsx(Jt,{className:"h-4 w-4"}),"Create Research"]})]}),l.jsx(xe,{children:l.jsx(we,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(mc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(ke,{placeholder:"Search by project title...",value:n,onChange:x=>e(x.target.value),className:"pl-10"})]})})}),u&&l.jsx(xe,{children:l.jsxs(we,{className:"text-center py-12",children:[l.jsx(Co,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading research entries..."})]})}),h&&l.jsx(xe,{children:l.jsxs(we,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading research"}),l.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&l.jsx("div",{className:"space-y-4",children:y.map(x=>l.jsx(xe,{className:"hover:shadow-md transition-shadow",children:l.jsx(we,{className:"pt-6",children:l.jsx("div",{className:"flex gap-4",children:l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:x.projectTitle}),l.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mt-2",children:x.abstract}),l.jsx("div",{className:"flex gap-2 flex-wrap mt-3 text-xs text-muted-foreground",children:(x.fieldOfResearch||[]).map(A=>l.jsx("span",{className:"bg-muted px-2 py-1 rounded text-xs",children:A},A))})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx(re,{variant:"ghost",onClick:()=>S(x),children:l.jsx(sd,{className:"h-4 w-4"})}),l.jsx(re,{variant:"ghost",onClick:()=>_(x.id),children:l.jsx(On,{className:"h-4 w-4"})})]})]})})})})},x.id))})]})}const bz=()=>{const n=Ii();return E.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),l.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),l.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},Sz=new JD;function Nz({children:n}){const{currentUser:e}=Ix();return e?l.jsx(l.Fragment,{children:n}):l.jsx(af,{to:"/login"})}const Yb=()=>l.jsx(K6,{children:l.jsx(eO,{client:Sz,children:l.jsxs(ID,{children:[l.jsx(f2,{}),l.jsx(q2,{}),l.jsx(eL,{basename:"/builder-stellar-world/",children:l.jsx(q6,{children:l.jsxs(WO,{children:[l.jsx(Bt,{path:"/login",element:l.jsx(s5,{})}),l.jsxs(Bt,{path:"/admin",element:l.jsx(Nz,{children:l.jsx(Z6,{})}),children:[l.jsx(Bt,{index:!0,element:l.jsx(c5,{})}),l.jsx(Bt,{path:"news",element:l.jsx(g5,{})}),l.jsx(Bt,{path:"years",element:l.jsx(C$,{})}),l.jsx(Bt,{path:"years/:id",element:l.jsx(I$,{})}),l.jsx(Bt,{path:"subjects/:id",element:l.jsx(L$,{})}),l.jsx(Bt,{path:"resources",element:l.jsx(Kb,{})}),l.jsx(Bt,{path:"resources/*",element:l.jsx(Kb,{})}),l.jsx(Bt,{path:"VIDEOS",element:l.jsx(af,{to:"/admin/years",replace:!0})}),l.jsx(Bt,{path:"VIDEOS/*",element:l.jsx(af,{to:"/admin/years",replace:!0})}),l.jsx(Bt,{path:"professors",element:l.jsx(A$,{})}),l.jsx(Bt,{path:"users",element:l.jsx(k$,{})}),l.jsx(Bt,{path:"store",element:l.jsx(ez,{})}),l.jsx(Bt,{path:"orders",element:l.jsx(nz,{})}),l.jsx(Bt,{path:"videos",element:l.jsx(iz,{})}),l.jsx(Bt,{path:"files",element:l.jsx(oz,{})}),l.jsx(Bt,{path:"quizzes",element:l.jsx(az,{})}),l.jsx(Bt,{path:"flashcards",element:l.jsx(pz,{})}),l.jsx(Bt,{path:"research",element:l.jsx(Ez,{})}),l.jsx(Bt,{path:"maps",element:l.jsx(yz,{})}),l.jsx(Bt,{path:"settings",element:l.jsx(gz,{})})]}),l.jsx(Bt,{path:"/",element:l.jsx(af,{to:"/admin"})}),l.jsx(Bt,{path:"*",element:l.jsx(bz,{})})]})})})]})})}),Tz=document.getElementById("root");if(window.__appRoot)window.__appRoot.render(l.jsx(Yb,{}));else{const n=p2.createRoot(Tz);window.__appRoot=n,n.render(l.jsx(Yb,{}))}
